webpackJsonp([26],[function(e,t,i){"use strict";(function(e){function o(e,t){a.call(this),this._linetool=e,this._pointindex=t,this._model=e._model,this._text="",this._coordinate=0,this._background="#5592C9",this._activeBackground="#0F6DBF",this._borderColor="#2E84A6",this._color="white",this._visible=!1,this._invalidated=!0,this._renderer=new l}function n(e,t){var i,r,s;if(c.call(this),this._model=e,this._properties=t,this._pointAdded=new v,this._pointChanged=new v,this._onRestoringFactoryDefaults=new v,this._onTemplateApplying=new v,this._onTemplateApplied=new v,t.visible&&t.frozen||this._properties.merge(defaults("linetool")),i=defaults("linetoolvisibilities"),t.intervalsVisibilities)for(r in i.intervalsVisibilities)this._properties.intervalsVisibilities[r]||this._properties.intervalsVisibilities.addProperty(r,i.intervalsVisibilities[r]);else this._properties.merge(i);if(this._paneViews=[],this._points=[],this._fixedPoints=[],this._timePoint=[],this._currentPointsetId=null,this._properties.symbol||this._properties.merge({symbol:e.mainSeries().symbol()}),this._properties.interval||this._properties.merge({interval:e.mainSeries().interval()}),this._properties.addExclusion&&(this._properties.addExclusion("symbol"),this._properties.addExclusion("symbolInfo"),this._properties.addExclusion("points"),this._properties.addExclusion("interval"),this._properties.addExclusion("visible"),this._properties.addExclusion("lastUpdateTime")),this.calcIsActualSymbol(),this._properties.intervalsVisibilities.listeners().subscribe(this,n.prototype.calcIsActualSymbol),this._properties.listeners().subscribe(this,this.propertiesChanged),this._createPointsProperties(),"_tooltipFieldsHash"in this&&!this.hasOwnProperty("_tooltipFieldsHash")&&(this._tooltipFieldsHash=$.extend(!0,{},this._tooltipFieldsHash)),this.m_priceAxisViews=[],this.m_timeAxisViews=[],this.pointsCount()>0)for(s=0;s<this.pointsCount();s++)this.m_priceAxisViews.push(this.createPriceAxisView(s)),this.m_timeAxisViews.push(new o(this,s));this._properties.visible.listeners().subscribe(this,function(e){e.value()||this._model.selectedSource()!==this||this._model.setSelectedSource(null)}),this.customization=this.customization||{forcePriceAxisLabel:!1,disableSelection:!1,disableErasing:!1,disableSave:!1,showInObjectsTree:!0},this._properties.lastUpdateTime||this._properties.addProperty("lastUpdateTime",0),this._syncStateExclusions=[]}var r=i(6).Point,s=i(172).LineToolPriceAxisView,a=i(173).TimeAxisView,l=i(174).TimeAxisViewRenderer,c=i(30).DataSource,h=i(33),u=i(21),d=u.Interval,p=u.ResolutionKind,_=i(62).getServerInterval,f=i(175).AbbreviatedDateTimeFormatter,m=i(643),g=i(16),y=i(5).getLogger("Chart.LineDataSource"),v=i(8),b=i(1).propertyPages,S=i(305).lineToolsInfo;inherit(o,a),o.prototype.setActive=function(e){this._active=e},o.prototype.update=function(){this._invalidated=!0},o.prototype.updateImpl=function(){var e,t,i;this._visible=!1,this._model.timeScale().isEmpty()||(e=this._linetool.axisPoints(),
e.length<=this._pointindex||this._linetool===this._model.selectedSource()&&(this._text="",t=e[this._pointindex].index,this._coordinate=this._model.timeScale().indexToCoordinate(t),i=this._model.timeScale().indexToUserTime(t),i&&(this._text=new f(this._model.mainSeries().isDWM()).format(i)),this._visible=!0,this._invalidated=!1))},o.prototype.renderer=function(){this._invalidated&&(this.updateImpl(),this._invalidated=!1);var e={text:this._text,coordinate:this._coordinate,color:this._color,background:this._active?this._activeBackground:this._background,borderColor:this._borderColor,visible:this._visible};return this._renderer.setData(e),this._renderer},inherit(n,c),n.prototype.pointAdded=function(){return this._pointAdded},n.prototype.pointChanged=function(){return this._pointChanged},n.PointPriceProperty=function(t,i){e.call(this),this._lineSource=t,this._pointIndex=i,t.pointAdded().subscribe(this,function(e){this._pointIndex===e&&this._listeners.fire(this)}),t.pointChanged().subscribe(this,function(e){this._pointIndex===e&&this._listeners.fire(this)})},inherit(n.PointPriceProperty,e),n.prototype.enableCurrentIntervalVisibility=function(){var e,t,i,o,n,r,s,a=d.parse(this._model.mainSeries().interval());a.isSeconds()&&(a.multiplier()<60?(this.properties().intervalsVisibilities.seconds.setValue(!0),e=Math.min(this.properties().intervalsVisibilities.secondsFrom.value(),a.multiplier()),this.properties().intervalsVisibilities.secondsFrom.setValue(e),t=Math.max(this.properties().intervalsVisibilities.secondsTo.value(),a.multiplier()),this.properties().intervalsVisibilities.secondsTo.setValue(t)):a=new d(p.Minutes,a.multiplier()/60)),a.isMinutes()&&(a.multiplier()<60?(this.properties().intervalsVisibilities.minutes.setValue(!0),e=Math.min(this.properties().intervalsVisibilities.minutesFrom.value(),a.multiplier()),this.properties().intervalsVisibilities.minutesFrom.setValue(e),t=Math.max(this.properties().intervalsVisibilities.minutesTo.value(),a.multiplier()),this.properties().intervalsVisibilities.minutesTo.setValue(t)):(i=Math.floor(a.multiplier()/60),this.properties().intervalsVisibilities.hours.setValue(!0),o=Math.min(this.properties().intervalsVisibilities.hoursFrom.value(),i),this.properties().intervalsVisibilities.hoursFrom.setValue(o),n=Math.max(this.properties().intervalsVisibilities.hoursTo.value(),i),this.properties().intervalsVisibilities.hoursTo.setValue(n))),a.isDays()&&(this.properties().intervalsVisibilities.days.setValue(!0),r=Math.min(this.properties().intervalsVisibilities.daysFrom.value(),a.multiplier()),this.properties().intervalsVisibilities.daysFrom.setValue(r),s=Math.max(this.properties().intervalsVisibilities.daysTo.value(),a.multiplier()),this.properties().intervalsVisibilities.daysTo.setValue(s)),a.isWeeks()&&this.properties().intervalsVisibilities.weeks.setValue(!0),a.isMonths()&&this.properties().intervalsVisibilities.months.setValue(!0)},n.prototype.getType=function(){return TradingView.className(this.constructor)},n.prototype.getConstructor=function(){return this._constructor||null},
n.prototype.isActualSymbol=function(){return this._isActualSymbol},n.prototype.isActualInterval=function(){return this._isActualInterval},n.prototype.isSavedInChart=function(e){return!this.customization.disableSave},n.prototype.setSavingInChartEnabled=function(e){this.customization.disableSave=!e},n.prototype.showInObjectTree=function(){return this.customization.showInObjectsTree},n.prototype.setShowInObjectsTreeEnabled=function(e){this.customization.showInObjectsTree=e},n.prototype.isSelectionEnabled=function(){return!this.customization.disableSelection},n.prototype.setSelectionEnabled=function(e){this.customization.disableSelection=!e},n.prototype.visibilityKeyByInterval=function(e){var t,i=d.parse(e);return n.IntervalsVisibilities.forEach(function(e){e.kind===i.kind()&&e.from<=i.multiplier()&&e.to>=i.multiplier()&&(t=e.key)}),t},n.prototype.calcIsActualSymbol=function(){var e,t=this._properties.symbol,i=this._model.mainSeries(),o=t.value();this._isActualSymbol=i.symbolSameAsCurrent(o),this._isActualSymbol&&(e=i.symbol(),o!==e&&(y.logWarn('Possible drawing "migrating" detected from "'+o+'" to "'+e+'"'),y.logWarn("Series symbolInfo: "+JSON.stringify(i.symbolInfo())),y.logWarn(Error().stack)),t.setValue(e)),this.calcIsActualInterval()},n.prototype.calcIsActualInterval=function(){var e,t,i,o,n,r=this._properties,s=this._model.mainSeries(),a=d.parse(s.interval()),l=r.intervalsVisibilities;this._isActualInterval=!1,a.isSeconds()&&a.multiplier()<60&&(e=l.seconds.value(),t=l.secondsFrom.value(),i=l.secondsTo.value(),this._isActualInterval=e&&a.multiplier()>=t&&a.multiplier()<=i),a.isSeconds()&&a.multiplier()>=60&&(o=Math.floor(a.multiplier()/60),e=l.minutes.value(),t=l.minutesFrom.value(),i=l.minutesTo.value(),this._isActualInterval=e&&o>=t&&o<=i),a.isMinutes()&&a.multiplier()<60&&(e=l.minutes.value(),t=l.minutesFrom.value(),i=l.minutesTo.value(),this._isActualInterval=e&&a.multiplier()>=t&&a.multiplier()<=i),a.isMinutes()&&a.multiplier()>=60&&(n=Math.floor(a.multiplier()/60),e=l.hours.value(),t=l.hoursFrom.value(),i=l.hoursTo.value(),this._isActualInterval=e&&n>=t&&n<=i),a.isHours()&&(e=l.hours.value(),t=l.hoursFrom.value(),i=l.hoursTo.value(),this._isActualInterval=e&&a.multiplier()>=t&&a.multiplier()<=i),a.isDays()&&(e=l.days.value(),t=l.daysFrom.value(),i=l.daysTo.value(),this._isActualInterval=e&&a.multiplier()>=t&&a.multiplier()<=i),a.isWeeks()&&(this._isActualInterval=l.weeks.value()),a.isMonths()&&(this._isActualInterval=l.months.value()),a.isRange()&&(this._isActualInterval=l.ranges.value()),this._isActualInterval||this._model.selectedSource()!==this||this._model.setSelectedSource(null)},n.PointPriceProperty.prototype.value=function(){var e=this._lineSource.points()[this._pointIndex].price,t=this._lineSource.ownerSource().formatter(),i=t.parse(t.format(e));return i.price?i.price:i.value},n.PointPriceProperty.prototype.setValue=function(e){var t=this._lineSource.points()[this._pointIndex];t.price=parseFloat(e),this._lineSource.setPoint(this._pointIndex,t),this._lineSource._model.updateSource(this._lineSource),
this._listeners.fire(this),this._lineSource.endChanging(!0),this._lineSource._syncMultichartState(),this._lineSource._properties.lastUpdateTime.setValue((new Date).valueOf())},n.PointIndexProperty=function(t,i){e.call(this),this._lineSource=t,this._pointIndex=i},inherit(n.PointIndexProperty,e),n.PointIndexProperty.prototype.value=function(){return this._lineSource.points()[this._pointIndex].index},n.PointIndexProperty.prototype.setValue=function(e){var t=this._lineSource.points()[this._pointIndex];t.index=e,this._lineSource.setPoint(this._pointIndex,t),this._lineSource._model.updateSource(this._lineSource),this._listeners.fire(this),this._lineSource.endChanging(!0),this._lineSource._syncMultichartState(),this._lineSource._properties.lastUpdateTime.setValue((new Date).valueOf())},n.prototype._syncMultichartState=function(){var e={points:this._timePoint,interval:this._model.mainSeries().interval()};this.linkKey&&!this.properties().singleChartOnly&&h.finishChangingLineTool({model:this._model,linkKey:this.linkKey,symbol:this._model.mainSeries().symbol(),finalState:e})},n.prototype._createPointProperty=function(e){var t,i=this._properties.points;i.addProperty(e),t=i[e],t.addChild("price",new n.PointPriceProperty(this,e)),t.addChild("bar",new n.PointIndexProperty(this,e))},n.prototype._createPointsProperties=function(){this._properties.addProperty("points");for(var e=0;e<this.pointsCount();e++)this._createPointProperty(e)},n.prototype.priceScale=function(){return this._ownerSource?this._ownerSource.m_priceScale:null},n.prototype.symbol=function(){return this._properties.symbol.value()},n.prototype.properties=function(){return this._properties},n.prototype.isSavedInStudyTemplates=function(){return!1},n.prototype.state=function(e){var t=TradingView.className(this.constructor),i={type:t,id:this.id(),state:this.properties().state(),points:this._timePoint,zorder:this.zorder(),linkKey:this.linkKey};return i.state._isActualInterval=this.isActualInterval(),delete i.state.points,e&&(i.indexes=this._points),this.ownerSource()&&(i.ownerSource=this.ownerSource().id()),this.isFixed()&&(i.positionPercents=this._positionPercents||this.calcPositionPercents()),"version"in this&&1!==this.version&&(i.version=this.version),this.hasAlert.value()&&(i.alertId=this._alertId),i},n.prototype.template=function(){var e=this.properties().state();return delete e.points,delete e.symbol,delete e.symbolInfo,e},n.prototype.applyTemplate=function(e){delete e.symbolInfo,this._onTemplateApplying.fire(e);var t=this.properties();t.merge(e),t.saveDefaults(),this.propertiesChanged(),this.calcIsActualSymbol(),this.updateAllViews(),this.model().invalidate(new g(g.LIGHT_UPDATE)),this._onTemplateApplied.fire()},n.prototype.restoreFactoryDefaults=function(){this.properties().restoreFactoryDefaults(),this._onRestoringFactoryDefaults.fire(),this.model().updateSource(this)},n.prototype.clearData=function(){this._points=[]},n.prototype.currentPointsetId=function(){return"pointset_"+this._currentPointsetId},n.prototype.stop=function(){this.clearServerPoints(),
this.hasAlert.value()&&TradingView.alertsDispatcher&&TradingView.alertsDispatcher.deleteAlert(this._alertId)},n.prototype.isStarted=function(){return null!==this._currentPointsetId},n.prototype.restart=function(){this.isFixed()||(this._currentPointsetId=null,this.createServerPoints())},n.prototype.tryCreateServerPoints=function(){this.isFixed()||null===this._currentPointsetId&&this.createServerPoints()},n.prototype.normalizePoint=function(e){var t=this._model.timeScale().normalizeBarIndex(e.index);return t.price=e.price,t},n.prototype.normalizePoints=function(){var e,t;for(this._timePoint=[],e=0;e<this._points.length;e++){if(t=this._model.timeScale().normalizeBarIndex(this._points[e].index),!t.time_t){this._timePoint=[];break}t.price=this._points[e].price,this._timePoint.push(t)}},n.prototype.denormalizeTimePoints=function(){var e,t,i=[];for(e=0;e<this._timePoint.length;e++){if(void 0===(t=this._model.timeScale().denormalizeTimePoint(this._timePoint[e]))){i=[];break}i.push({index:t,price:this._timePoint[e].price})}i.length>0&&(this._points=i)},n.prototype.restorePoints=function(e,t,i){this._timePoint=e,this._points=t,i||this.denormalizeTimePoints()},n.prototype.restoreExternalPoints=function(e){if(this.properties().interval.setValue(e.interval),this._timePoint=e.points,this.denormalizeTimePoints(),!this.isActualSymbol())return void this.clearServerPoints();this.createServerPoints()},n.prototype.restorePositionPercents=function(e){this._positionPercents=e},n.prototype.updateAllViewsAndRedraw=function(){this.updateAllViews(),this._model.updateSource(this)},n.prototype.propertiesChanged=function(){if(this.calcIsActualInterval(),this.updateAllViewsAndRedraw(),this.linkKey){var e=this.properties().state(this._syncStateExclusions);delete e.interval,h.changeLineStyle({linkKey:this.linkKey,state:e,model:this._model})}},n.prototype.points=function(){var e,t,i=[];for(e=0;e<this._points.length;e++)t=this._points[e],i.push({index:t.index,price:t.price,time:t.time});return this._lastPoint&&i.push({index:this._lastPoint.index,price:this._lastPoint.price,time:this._lastPoint.time}),this._currentMovingPoint&&this._startMovingPoint&&this.correctPoints(i),i},n.prototype.axisPoints=function(){return this.points()},n.prototype.fixedPoints=function(){var e,t,i,o,n=[];if(this._positionPercents&&!this.priceScale().isEmpty())for(e=0;e<this._positionPercents.length;e++)t=this._positionPercents[e],i=this._model.timeScale().width()*t.x,o=this.priceScale().height()*t.y,n.push(new r(i,o));else for(e=0;e<this._fixedPoints.length;e++)n.push(this._fixedPoints[e].clone());return this._lastPoint&&n.push(this._lastPoint.clone()),this._currentMovingPoint&&this._startMovingPoint&&this.correctFixedPoints(n),n},n.prototype._preparePoint=function(e,t){var i=e;return t&&t.shift&&this.points().length>=2&&this._properties.snapTo45Degrees&&this._snapPoint45Degree(i,this.points()[this.points().length-2]),i},n.prototype.addPoint=function(e,t,i){var o=this._preparePoint(e,t);return this._addPointIntenal(o,t,i)},n.prototype._addPointIntenal=function(e,t,i){
this._points.push(e);var o=this._points.length===this.pointsCount();return o?(this._lastPoint=null,i||(this.normalizePoints(),this.createServerPoints())):this._lastPoint=e,this._pointAdded.fire(this._points.length-1),o},n.prototype.addFixedPoint=function(e){this._fixedPoints.push(e);var t=this._fixedPoints.length===this.pointsCount();return t&&this.calcPositionPercents(),t},n.prototype.calcPositionPercents=function(){var e,t,i,o;if(!this.priceScale()||this.priceScale().isEmpty())return[];for(this._positionPercents=[],e=0;e<this._fixedPoints.length;e++)t=this._fixedPoints[0],i=t.x/this._model.timeScale().width(),o=t.y/this.priceScale().height(),this._positionPercents.push({x:i,y:o});return this._positionPercents},n.prototype.calcMiddlePoint=function(e,t){return new r((e.x+t.x)/2,(e.y+t.y)/2)},n.prototype.restoreFixedPoints=function(){this._fixedPoints=this.fixedPoints()},n.prototype.onData=function(e){e.params.customId===this.currentPointsetId()&&this._onPointsetUpdated(e.params.plots)},n.prototype._onPointsetUpdated=function(e){var t,i,o,n,r,s;if(0!==e.length){for(t=0;t<e.length;t++)i=e[t],o=this._timePoint[i.index],n=i.value[0],r=new Date(1e3*i.value[1]),s={index:n,time:r,price:o.price},this._points.length<=i.index?(this._points.push(s),this._pointAdded.fire(this._points.length-1)):(this._points[i.index]=s,this._pointChanged.fire(i.index));this.checkAlert&&this.checkAlert(),this.updateAllViewsAndRedraw()}},n.prototype.startChanging=function(e,t){e<this.m_priceAxisViews.length&&this.m_priceAxisViews[e].setActive(!0),e<this.m_timeAxisViews.length&&this.m_timeAxisViews[e].setActive(!0),this._properties.lastUpdateTime.setValue((new Date).valueOf())},n.prototype.setPoint=function(e,t,i){if(i&&i.shift&&this._properties.snapTo45Degrees){var o=0===e?1:e-1;this._snapPoint45Degree(t,this.points()[o])}this._points[e]=t,this._pointChanged.fire(e),this.normalizePoints()},n.prototype.startMoving=function(e){this.isFixed()&&this.restoreFixedPoints(),this._startMovingPoint=e,this._properties.lastUpdateTime.setValue((new Date).valueOf())},n.prototype.move=function(e){this._currentMovingPoint=e,this.updateAllViews()},n.prototype.correctPoints=function(e){var t,i,o=this._currentMovingPoint.index-this._startMovingPoint.index,n=this._currentMovingPoint.price-this._startMovingPoint.price;if(0===o&&0===n)return!1;for(t=0;t<e.length;t++)i=e[t],i.index+=o,i.price+=n,e[t]=i;return!0},n.prototype.correctFixedPoints=function(e){var t,i=this._currentMovingPoint.subtract(this._startMovingPoint);for(t=0;t<e.length;t++)e[t]=e[t].add(i)},n.prototype.endMoving=function(e){var t,i,o;if(this._properties.interval.setValue(this._model.mainSeries().interval()),t=!1,i=!1,this._currentMovingPoint&&this._startMovingPoint){if(t=this._currentMovingPoint.index!==this._startMovingPoint.index,i=this._currentMovingPoint.price!==this._startMovingPoint.price,this.isFixed())this.correctFixedPoints(this._fixedPoints);else if(this.correctPoints(this._points))for(o=0;o<this._points.length;o++)this._pointChanged.fire(o);this._startMovingPoint=null,
this._currentMovingPoint=null}if(this.isFixed())return this.calcPositionPercents(),void this.updateAllViews();this.normalizePoints(),this.updateAllViews(),t&&!e&&this.createServerPoints(),(i||t)&&this.synchronizeAlert(!this._alertUndoMode)},n.prototype.endChanging=function(e,t){var i;for(this._properties.interval.setValue(this._model.mainSeries().interval()),t||(this.normalizePoints(),this.createServerPoints()),i=0;i<this.m_priceAxisViews.length;i++)this.m_priceAxisViews[i].setActive(!1);for(i=0;i<this.m_timeAxisViews.length;i++)this.m_timeAxisViews[i].setActive(!1);this.synchronizeAlert(!e)},n.prototype.paneViews=function(e){var t,i;if(this.isSourceHidden())return null;for(t=[],i=this._paneViews.length-1;i>=0;--i)t.push(this._paneViews[i]);return t},n.prototype._setPaneViews=function(e){this._paneViews=e,this._model.invalidate(new g(g.LIGHT_UPDATE))},n.prototype.dataWindowView=function(){return null},n.prototype.statusView=function(){return null},n.prototype.isSourceHidden=function(){return!this._properties.visible.value()||h.hideAllDrawings().value()&&this.canBeHidden()||!this._isActualInterval||!this._isActualSymbol},n.prototype.priceAxisViews=function(e,t){var i,o,n;return this.isSourceHidden()?null:-1!==e.dataSources().indexOf(this)&&t===this.priceScale()?this._model.lineBeingEdited()===this?(i=this._model.linePointBeingEdited(),i<this.m_priceAxisViews.length?(o=this.m_priceAxisViews.slice(),n=o[i],o.splice(i,1),o.push(n),o):this.m_priceAxisViews):this.m_priceAxisViews:null},n.prototype.timeAxisViews=function(){var e,t,i;return this.isSourceHidden()?null:this._model.lineBeingEdited()===this?(e=this._model.linePointBeingEdited(),e<this.m_timeAxisViews.length?(t=this.m_timeAxisViews.slice(),i=t[e],t.splice(e,1),t.push(i),t):this.m_timeAxisViews):this.m_timeAxisViews},n.prototype.updateAllViews=function(){var e,t,i;if(!this._isActualSymbol)return null;if(!this._properties.visible.value())return null;if(null!==(e=this.paneViews()))for(t=e,i=0;i<t.length;i++)t[i].update();for(t=this.m_priceAxisViews,i=0;i<t.length;i++)t[i].update();for(t=this.m_timeAxisViews,i=0;i<t.length;i++)t[i].update()},n.prototype.setLastPoint=function(e,t){this._lastPoint=this._preparePoint(e,t),this.updateAllViews()},n.prototype.setLastFixedPoint=function(e){this._lastFixedPoint=e,this.updateAllViews()},n.prototype.title=function(){return"Line Tool"},n._pointSetId=1,n.prototype.start=function(){this.createServerPoints()},n.prototype.createServerPoints=function(){var e,t,i,o,r,s;if(!this._recursiveGuard&&this._isActualSymbol&&this._model.chartApi().connected()&&(this.clearServerPoints(),!this._model.timeScale().isEmpty()&&(0===this._timePoint.length&&this.normalizePoints(),0!==this._timePoint.length))){for(this._currentPointsetId=++n._pointSetId,e=this._model.mainSeries().symbolId(),t=[],i=0;i<this._timePoint.length;i++)o=this._timePoint[i],t.push([o.time_t,o.offset]);r=_(this.properties().interval.value()),s=this,this._model.chartApi().createPointset(this.currentPointsetId(),"turnaround",e,r,t,function(e){s.onData(e)})}},
n.prototype.clearServerPoints=function(){null!==this._currentPointsetId&&(this._model.chartApi().removePointset(this.currentPointsetId()),this._currentPointsetId=null)},n.prototype.isBeingEdited=function(){return this===this._model.lineBeingEdited()||this===this._model.sourceBeingMoved},n.prototype.isFixed=function(){return this.properties().locked&&this.properties().locked.value()},n.prototype.isLocked=n.prototype.isFrozen=function(){return this.properties().frozen&&this.properties().frozen.value()},n.prototype._tooltipFieldsHash={},n.prototype._tooltipFieldsOrder=["time","price","index","time0","price0","time1","price1","time2","price2","time3","price3","time4","price4","distance","term","pointsPerBar"],n.prototype._tooltipFieldsOrdered=null,n.prototype._formatTooltip=function(){return null===this._tooltipFieldsOrdered&&(this._tooltipFieldsOrdered=new m(this._tooltipFieldsHash,m.byOrder(this._tooltipFieldsOrder))),this._tooltipFieldsOrdered.array.filter(function(e){return null!==e.value&&""!==e.value}).map(function(e){return"<span>"+e.title+":</span> "+e.value}).join("<br />")},n.prototype.pointToScreenPoint=function(e){var t,i,o,n,s,a=this._model.timeScale(),l=this.priceScale(),c=this.ownerSource().firstValue();return!l||l.isEmpty()||a.isEmpty()||null==c?[new r(0,0),new r(0,0)]:(t=a.indexToCoordinate(e.index,!0),i=e.price,o=l.priceToCoordinate(i,c,!0),n=new r(t,o),t=a.indexToCoordinate(e.index,!1),o=l.priceToCoordinate(i,c,!1),s=new r(t,o),[n,s])},n.prototype.screenPointToPoint=function(e){var t,i=this._model.timeScale(),o=this.priceScale(),n=i.coordinateToIndex(e.x),r=this.ownerSource().firstValue();if(null!==r&&isFinite(r))return t=o.coordinateToPrice(e.y,r),{price:t,index:n}},n.prototype.tags=function(){return[this._constructor]},n.prototype._snapPoint45Degree=function(e,t,i){var o,n,r,s,a,l,c,h,u,d=this._model.timeScale(),p=d.indexToCoordinate(t.index),_=d.indexToCoordinate(e.index)-p,f=this.m_priceScale,m=t.price,g=e.price,y=this.ownerSource().firstValue(),v=f.priceToCoordinate(m,y),b=f.priceToCoordinate(g,y)-v,S=Math.round(Math.atan2(_,b)/Math.PI*4);2===Math.abs(S)?i||(e.price=m):0===Math.abs(S)||4===Math.abs(S)?i||(e.index=t.index):0===Math.abs(S)||4===Math.abs(S)?i||(e.index=t.index):(o=Math.sqrt(_*_+b*b),n=_<0?-1:1,r=b<0?-1:1,s=Math.max(Math.abs(b),Math.abs(_)),a=s*Math.sqrt(2),l=a/o,s/=l,c=Math.round(d.coordinateToIndex(p+s*n)),h=Math.abs(d.indexToCoordinate(c)-p),u=f.coordinateToPrice(v+h*r,y),e.index=c,e.price=u)},n.prototype.createPriceAxisView=function(e){return new s(this,{pointIndex:e})},n.prototype.version=1,n.prototype.alertId=function(){return this._alertId},n.prototype.setAlert=function(e,t){},n.prototype.flushAlert=function(){delete this._alertId,delete this._alert,this.hasAlert.setValue(!1),window.saver&&window.saver.saveChartSilently(null,!1)},n.prototype._processAlertHanders=function(e){var t,i,o,n=this;("unsubscribe"!==(e="subscribe"===e?"subscribe":"unsubscribe")||n._alertCallbacks)&&(i="subscribe"===e?"on":"off",t=n.properties(),o=n._alertCallbacks||{flush:n.flushAlert.bind(n),
hovered:function(e,t){t?n._model.setHoveredSource(n):n._model.hoveredSource()===n&&n._model.setHoveredSource(null)},selected:function(e,t){t&&n._model.setSelectedSource(n)},synchronizeSilently:function(e){n.synchronizeAlert(!1)}},n._alertCallbacks||(n._alertCallbacks=o),n.getAlert().done(function(r){r&&(r[i]("destroy",o.flush),r[i]("change:hovered",o.hovered),r[i]("change:selected",o.selected),t.extendLeft&&t.extendLeft[e](n,o.synchronizeSilently),t.extendRight&&t.extendRight[e](n,o.synchronizeSilently))}))},n.prototype.editAlert=function(){},n.prototype.getAlert=function(e){var t,i=this;return e=e||{},t=$.Deferred(),TradingView.alertsDispatcher?TradingView.alertsDispatcher.requestAlert(i._alertId,{success:t.resolve.bind(t),error:t.reject.bind(t),fromCache:e.fromCache}):y.logError("[Alerts] Can't get alert without alerts dispatcher"),t.promise()},n.prototype.synchronizeAlert=function(e){var t=this;t.hasAlert.value()&&setTimeout(function(){function i(){t._alertUndoMode=!0,s.undoToCheckpoint(t._undoCheckpointAlert),setTimeout(function(){t._alertUndoMode=!1,t.localAndServerAlersMismatch=!1},0)}function o(e){var i=e.get("description")!==e.defaultDescription(),o=e.get("extra"),n=o.alertSeries(),r=t._model.mainSeries().stateForAlert();"MainSeries"===n.type&&r.actualSymbol===n.actualSymbol&&(o.mainSeries(r),o.alertSeries(r)),e.set("resolution",t.stateForAlert().interval),o.drawing(t),i||e.setDefaultDescription(),t.localAndServerAlersMismatch=!0}function n(e){TradingView.alertsDispatcher.restartAlert(e,{success:function(){t.localAndServerAlersMismatch=!1},error:i,complete:function(){delete t._undoCheckpointAlert}})}var r,s=t._getUndoHistory();t._undoCheckpointAlert||t._alertUndoMode||(r=s.undoStack().pop(),t._undoCheckpointAlert=s.createUndoCheckpoint(),r&&s.undoStack().push(r)),t.getAlert().done(function(t){o(t),e&&n(t)}).fail(i)},0)},n.prototype._getUndoHistory=function(){return this._model._undoModel.undoHistory},n.prototype.stateForAlert=function(){var e,t;if(this.canHasAlert())return e=this.state(),e.id=this.idForAlert(),e.uniqueId=this.idForAlert(),e.title=this.title(),e.interval=this._model.mainSeries().interval(),t=this._getAlertPlots(),t&&(e.plots=t),e},n.prototype._getAlertPlots=function(){return null},n.prototype._linePointsToAlertPlot=function(e,t,i,o){if(2!==e.length)return y.logError("[Drawing Alert] Wrong points"),null;var n=this._model.timeScale();return!n||n.isEmpty()?null:{type:"LinePlot",title:t||this.title(),timestamp:n.indexToTimePoint(0),offset1:e[0].index,offset2:e[1].index,price1:e[0].price,price2:e[1].price,extendBackward:i||!1,extendForward:o||!1}},n.prototype.getAlertIsActive=function(e){this.getAlert({fromCache:!0}).done(function(t){e(!!t&&t.get("active"))}).fail(function(){e(!1)})},n.prototype.geometry=function(){var e=this,t=function(t){var i=t.x/e._model.timeScale().width(),o=t.y/e.priceScale().height();return new r(i,o)};return this.points().map(function(i){var o=e.pointToScreenPoint(i)[0];return t(o)})},n.prototype.onlyYMoving=function(){return!1},n.prototype.model=function(){
return this._model},n.prototype.isForcedDrawPriceAxisLabel=function(){return this.customization.forcePriceAxisLabel},n.prototype.getInputsPropertyPage=function(){return b.LineToolInputsPropertyPage},n.prototype.getVisibilitiesPropertyPage=function(){return b.LineToolVisibilitiesPropertyPage},n.prototype.getSourceIcon=function(){var e=S[this.getType()];return void 0===e?null:{type:"svg",svgCode:e.icon}},n.prototype.destroy=function(){this.stop()},t.LineToolPriceAxisView=s,t.LineDataSource=n}).call(t,i(12))},function(e,t,i){"use strict";function o(e,t){i.e(5).then(function(t){n.ChartStylesPropertyPage=i(827),n.LineToolABCDPatternStylesPropertyPage=i(828),n.LineToolArcStylesPropertyPage=i(829),n.LineToolArrowMarkStylesPropertyPage=i(830),n.LineToolBalloonStylesPropertyPage=i(831),n.LineToolBarsPatternStylesPropertyPage=i(832).LineToolBarsPatternStylesPropertyPage,n.LineToolBezierStylesPropertyPage=i(833),n.LineToolBrushStylesPropertyPage=i(834),n.LineToolCalloutStylesPropertyPage=i(835),n.LineToolCircleLinesStylesPropertyPage=i(836),n.LineToolDateAndPriceRangeStylesPropertyPage=i(837),n.LineToolDateRangeStylesPropertyPage=i(838),n.LineToolDisjointAngleStylesPropertyPage=i(839),n.LineToolElliottStylesPropertyPage=i(840),n.LineToolEllipseStylesPropertyPage=i(841),n.LineToolFibChannelStylesPropertyPage=i(842),n.LineToolFibCirclesStylesPropertyPage=i(843),n.LineToolFibRetracementStylesPropertyPage=i(818),n.LineToolFibSpeedResistanceArcsStylesPropertyPage=i(844),n.LineToolFibSpeedResistanceFanStylesPropertyPage=i(845),n.LineToolFibSpiralStylesPropertyPage=i(846),n.LineToolFibTimeZoneStylesPropertyPage=i(847),n.LineToolFibWedgeStylesPropertyPage=i(848),n.LineToolFlatBottomStylesPropertyPage=i(849),n.LineToolGannComplexStylesPropertyPage=i(850).LineToolGannComplexStylesPropertyPage,n.LineToolGannFixedStylesPropertyPage=i(851).LineToolGannFixedStylesPropertyPage,n.LineToolGannFanStylesPropertyPage=i(852),n.LineToolGannSquareStylesPropertyPage=i(853),n.LineToolGhostFeedInputsPropertyPage=i(343).LineToolGhostFeedInputsPropertyPage,n.LineToolGhostFeedStylesPropertyPage=i(343).LineToolGhostFeedStylesPropertyPage,n.LineToolHorzLineInputsPropertyPage=i(344).LineToolHorzLineInputsPropertyPage,n.LineToolHorzLineStylesPropertyPage=i(344).LineToolHorzLineStylesPropertyPage,n.LineToolIconStylesPropertyPage=i(854),n.LineToolInputsPropertyPage=i(815),n.LineToolLineTool5PointsPatternStylesPropertyPage=i(855),n.LineToolNotePropertyPage=i(856),n.LineToolParallelChannelStylesPropertyPage=i(857),n.LineToolPitchfanStylesPropertyPage=i(858),n.LineToolPitchforkStylesPropertyPage=i(859),n.LineToolPolylineStylesPropertyPage=i(860),n.LineToolPredictionStylesPropertyPage=i(861),n.LineToolPriceLabelStylesPropertyPage=i(862),n.LineToolProjectionStylesPropertyPage=i(863),n.LineToolRectangleStylesPropertyPage=i(864),n.LineToolRiskRewardInputsPropertyPage=i(345).LineToolRiskRewardInputsPropertyPage,n.LineToolRiskRewardStylesPropertyPage=i(345).LineToolRiskRewardStylesPropertyPage,n.LineToolTextStylesPropertyPage=i(865),
n.LineToolTimeCyclesPropertyPage=i(866),n.LineToolTrendAngleInputsPropertyPage=i(346).LineToolTrendAngleInputsPropertyPage,n.LineToolTrendAngleStylesPropertyPage=i(346).LineToolTrendAngleStylesPropertyPage,n.LineToolTrendBasedFibExtensionStylesPropertyPage=i(867),n.LineToolTrendBasedFibTimeStylesPropertyPage=i(868),n.LineToolTrendLineStylesPropertyPage=i(869),n.LineToolTrianglePatternStylesPropertyPage=i(870),n.LineToolTriangleStylesPropertyPage=i(871),n.LineToolVertLineInputsPropertyPage=i(347).LineToolVertLineInputsPropertyPage,n.LineToolVertLineStylesPropertyPage=i(347).LineToolVertLineStylesPropertyPage,n.LineToolCrossLineInputsPropertyPage=i(348).LineToolCrossLineInputsPropertyPage,n.LineToolCrossLineStylesPropertyPage=i(348).LineToolCrossLineStylesPropertyPage,n.LineToolVisibilitiesPropertyPage=i(872),n.StudyCompareInputsPropertyPage=i(873),n.StudyDisplayPropertyPage=i(318).StudyDisplayPropertyPage,n.StudyInputsPropertyPage=i(816).StudyInputsPropertyPage,n.StudyLineDataSourcePropertyPage=i(874),n.StudyOverlayStylesPropertyPage=i(875),n.StudyPivotPointsStandardStylesPropertyPage=i(876),n.StudyStrategyPropertyPage=i(877),n.StudyStylesPropertyPage=i(318).StudyStylesPropertyPage,s.logNormal("Property pages loaded"),e()}.bind(null,i)).catch(t)}var n,r,s=i(5).getLogger("Chart.DataSourcePropertyPages"),a=i(163).retries;t.propertyPages={},n=t.propertyPages,r=null,t.loadPropertyPages=function(){return null!==r?r:(s.logNormal("Start loading property pages"),r=a(function(){return new Promise(o)},2))}},function(e,t,i){"use strict";function o(e,t,i,o){var n=e?s.defaults:s.factoryDefaults,r=t.startsWith("study_")?TradingView.clone(n("study")):t.startsWith("linetool")?TradingView.clone(n("linetoolvisibilities")):{},a=TradingView.clone(n(t,o));return t.startsWith("study_")&&a.inputs&&delete a.inputs.symbol,"linetoolicon"===t&&e&&(a.icon=s.defaults(t).icon),i.forEach(function(e){delete a[e]}),TradingView.merge(r,a),r}function n(e,t,i,r){void 0===r&&(r=!0),this._defaultName=e;var s;i?s=t:(s=o(r,e,[],null),t&&TradingView.merge(s,t)),a.call(this,s),this._defaultName=e,this._useUserPreferences=r,this.listeners().subscribe(this,n.prototype.onPropertyChanged),this._exclusions=[]}function r(e){n._saveDefaults=e}var s=i(133),a=i(12);inherit(n,a),n._saveDefaults=!1,n.prototype.addExclusion=function(e){this._exclusions.indexOf(e)<0&&this._exclusions.push(e)},n.prototype.restoreFactoryDefaults=function(){var e=o(!1,this._defaultName,this._exclusions,null);this.mergeAndFire(e),this._defaultName.startsWith("study_")||this.saveDefaults(),this.listeners().fire(this)},n.prototype.onPropertyChanged=function(){n._saveDefaults&&!this._defaultName.startsWith("study_")&&this.saveDefaults()},n.prototype.saveDefaults=function(){this._useUserPreferences&&s.saveDefaults(this._defaultName,this.state(this._exclusions))},n.prototype.restoreDefaults=function(e){var t=o(this._useUserPreferences,this._defaultName,this._exclusions,e);this.merge(t),this.listeners().fire(this)},n.prototype.clone=function(e){
return new n(this._defaultName,this.state(),e&&e.replaceByState,this._useUserPreferences)},t.DefaultProperty=n,t.saveDefaultProperties=r},function(e,t,i){"use strict";function o(e,t){function i(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}function n(e,t){var i,o,n={};for(i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(o=0,i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&(n[i[o]]=e[i[o]]);return n}function r(e,t,i,o){return new(i||(i=Promise))(function(n,r){function s(e){try{l(o.next(e))}catch(e){r(e)}}function a(e){try{l(o.throw(e))}catch(e){r(e)}}function l(e){e.done?n(e.value):new i(function(t){t(e.value)}).then(s,a)}l((o=o.apply(e,t||[])).next())})}function s(e,t){function i(e){return function(t){return o([e,t])}}function o(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(s=r[2&i[0]?"return":i[0]?"throw":"next"])&&!(s=s.call(r,i[1])).done)return s;switch(r=0,s&&(i=[0,s.value]),i[0]){case 0:case 1:s=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(s=l.trys,!(s=s.length>0&&s[s.length-1])&&(6===i[0]||2===i[0])){l=0;continue}if(3===i[0]&&(!s||i[1]>s[0]&&i[1]<s[3])){l.label=i[1];break}if(6===i[0]&&l.label<s[1]){l.label=s[1],s=i;break}if(s&&l.label<s[2]){l.label=s[2],l.ops.push(i);break}s[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=s=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}var n,r,s,a,l={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return a={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a}var a,l;t.c=o,i.d(t,"a",function(){return l}),t.e=n,t.b=r,t.d=s,a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},l=Object.assign||function(e){var t,i,o,n;for(i=1,o=arguments.length;i<o;i++){t=arguments[i];for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}},function(e,t,i){var o=i(464),n={},r={},s={},a={init:function(){var e,t,i,l;Object.keys(o).forEach(function(i){e=o[i],t=e.subsets,Array.isArray(t)?t.forEach(function(e){n[e]=1}):t&&Object.keys(t).forEach(function(e){n[e]=1}),n[i]=1}),i=Object.keys(n),i.forEach(function(e){i.forEach(function(i){if(void 0!==(l=o[i])){if(!(t=l.subsets))return;r.hasOwnProperty(e)||(r[e]=[]),Array.isArray(t)&&~t.indexOf(e)?r[e].push(i):e in t&&r[e].push(i)}})}),"undefined"!=typeof __initialDisabledFeaturesets&&__initialDisabledFeaturesets&&__initialDisabledFeaturesets.forEach(function(e){a.disable(e)}),"undefined"!=typeof __initialEnabledFeaturesets&&__initialEnabledFeaturesets&&__initialEnabledFeaturesets.forEach(function(e){a.enable(e)}),"undefined"!=typeof window&&(window.Featuresets=a),this.meta={_uniqueSetsNames:n,
_setsReverseDependencies:r,_setsStates:s}},enabled:function(e){var t=function(e){var i,o,n=r.hasOwnProperty(e)?r[e]:[];if(!1===s[e])return!1;for(i=s[e],o=0;o<n.length;++o)i|=t(n[o]);return i};return!!t(e)},enable:function(e){s[e]=!0},disable:function(e){s[e]=!1},setEnabled:function(e,t){s[e]=!!t},_uniqueSets:function(){return Object.keys(n)}};a.init(),e.exports=a},function(e,t,i){"use strict";function o(){return C}function n(){return L}function r(e){e=Math.max(m.ERROR,Math.min(m.DEBUG,e)),C=e,d()}function s(e,t){var i,o=0,n=0;for(i=e.length-1;i>=1&&(o+=8*(1+encodeURIComponent(e[i]).length),!(i-1>0&&(n=8*(1+encodeURIComponent(e[i-1]).length),o+n>t)));i--);return e.slice(i)}function a(e,t,i,o,n){var r={id:g,message:t+"",subSystemId:o,timestamp:+e};g+=1,i.push(r),void 0!==n&&i.length>n&&i.splice(0,1)}function l(e){var t,i=S.reduce(function(e,t){return e.concat(t)},[]);return i.sort(function(e,t){return e.id-t.id}),"number"==typeof e&&(i=i.slice(-e)),t=i.map(function(e){return new Date(e.timestamp).toISOString()+":"+e.subSystemId+":"+e.message.replace(/"/g,"'")}),s(t,y)}function c(e,t,i,o){var r,s;if((t!==T||o.id!==P)&&(r=new Date,e<=m.NORMAL&&a(r,t,i,o.id,o.maxCount),e<=C&&(!o.highRate||n())&&(!w||o.id.match(w)))){switch(s=r.toISOString()+":"+o.id+":"+t,e){case m.DEBUG:console.debug(s);break;case m.INFO:case m.NORMAL:o.color?console.log("%c"+s,"color: "+o.color):console.log(s);break;case m.WARNING:console.warn(s);break;case m.ERROR:console.error(s)}T=t,P=o.id,x&&clearTimeout(x),x=setTimeout(function(){T=null,P=null,x=NaN},1e3)}}function h(e,t){function i(e){return function(t){return c(e,t,o,n)}}var o,n;return void 0===t&&(t={}),o=[],S.push(o),n=Object.assign(t,{id:e}),{logDebug:i(m.DEBUG),logError:i(m.ERROR),logInfo:i(m.INFO),logNormal:i(m.NORMAL),logWarn:i(m.WARNING)}}function u(){L=!!f&&"true"===localStorage.getItem(b);var e=parseInt(f?localStorage.getItem(v)||"":"");Number.isNaN(e)&&(e=m.WARNING),r(e),I.logNormal("Init with settings - level: "+C+", high-rate: "+L)}function d(){try{f&&(localStorage.setItem(b,L+""),localStorage.setItem(v,C+""))}catch(e){I.logWarn("Cannot save logger state (level: "+C+", high-rate: "+L+") to localStorage: "+e.message)}}function p(){_.performance&&_.performance.now?I.logNormal("Sync logger and perf times, now is "+_.performance.now()):I.logWarn("Perf time is not available")}var _,f,m,g,y,v,b,S,w,T,P,x,C,L,I,M,k;Object.defineProperty(t,"__esModule",{value:!0}),i.d(t,"LOGLEVEL",function(){return m}),t.getLogLevel=o,t.isHighRateEnabled=n,t.setLogLevel=r,t.getLogHistory=l,t.getLogger=h,i.d(t,"loggingOn",function(){return M}),i.d(t,"loggingOff",function(){return k}),_="undefined"!=typeof window?window:{},f=!1;try{localStorage.getItem(""),f=!0}catch(e){}!function(e){e[e.ERROR=1]="ERROR",e[e.WARNING=2]="WARNING",e[e.INFO=3]="INFO",e[e.NORMAL=4]="NORMAL",e[e.DEBUG=5]="DEBUG"}(m||(m={})),g=0,y=75497472,v="tv.logger.loglevel",b="tv.logger.logHighRate",S=[],w=null,T=null,P=null,x=NaN,C=m.WARNING,L=!1,I=h("logger"),M=_.lon=function(e,t){r(m.DEBUG),I.logNormal("Debug logging enabled"),L=!!e,
w=t||null,d()},k=_.loff=function(){r(m.INFO),I.logInfo("Debug logging disabled")},u(),p()},function(e,t,i){"use strict";function o(e,t){return new h(e,t)}function n(e,t){return e.x===t.x&&e.y===t.y}function r(e,t,i){if(0===e&&0===t)throw Error("A and B can not be both equal to zero.");return{A:e,B:t,C:i}}function s(e,t){var i,o,s;if(n(e,t))throw Error("Points should be distinct");return i=e.y-t.y,o=t.x-e.x,s=e.x*t.y-t.x*e.y,r(i,o,s)}function a(e,t){if(n(e,t))throw Error("Points of a segment should be distinct");return[e,t]}function l(e,t){return{edge:e,isPositive:t}}function c(e,t){return l(e,e.A*t.x+e.B*t.y+e.C>0)}Object.defineProperty(t,"__esModule",{value:!0});var h=function(){function e(e,t){this.x=e,this.y=t}return e.prototype.add=function(t){return new e(this.x+t.x,this.y+t.y)},e.prototype.addScaled=function(t,i){return new e(this.x+i*t.x,this.y+i*t.y)},e.prototype.subtract=function(t){return new e(this.x-t.x,this.y-t.y)},e.prototype.dotProduct=function(e){return this.x*e.x+this.y*e.y},e.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},e.prototype.scaled=function(t){return new e(this.x*t,this.y*t)},e.prototype.normalized=function(){return this.scaled(1/this.length())},e.prototype.transposed=function(){return new e(-this.y,this.x)},e.prototype.clone=function(){return new e(this.x,this.y)},e}();t.Point=h,t.point=o,t.equalPoints=n,t.line=r,t.lineThroughPoints=s,t.lineSegment=a,t.halfplane=l,t.halfplaneThroughPoint=c},function(e,t,i){"use strict";function o(e,t){if(!e)throw Error("Assertion failed"+(t?": "+t:""))}function n(e){if(void 0===e)throw Error("Value is undefined");return e}function r(e){if(null===e)throw Error("Value is null");return e}function s(e){return r(n(e))}Object.defineProperty(t,"__esModule",{value:!0}),t.assert=o,t.ensureDefined=n,t.ensureNotNull=r,t.ensure=s},function(e,t,i){"use strict";(function(e){function t(){this._listeners=[]}i(5).getLogger("Common.Delegate");t.prototype.subscribe=function(e,t,i){var o={object:e,member:t,singleshot:!!i};this._listeners.push(o)},t.prototype.unsubscribe=function(e,t){var i,o;for(i=0;i<this._listeners.length;++i)if(o=this._listeners[i],o.object===e&&o.member.prototype===t.prototype){this._listeners.splice(i,1);break}},t.prototype.unsubscribeAll=function(e){var t,i;for(t=this._listeners.length-1;t>=0;--t)i=this._listeners[t],i.object===e&&this._listeners.splice(t,1)},t.prototype.destroy=function(){delete this._listeners},t.prototype.fire=function(){var e,t,i=this._listeners.slice();for(e=0;e<i.length;++e)t=i[e],t.member.apply(t.object||null,arguments);for(e=this._listeners.length-1;e>=0;e--)this._listeners[e].singleshot&&this._listeners.splice(e,1)},"undefined"!=typeof window&&(window.Delegate=t),void 0!==e&&e&&e.exports&&(e.exports=t)}).call(t,i(47)(e))},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i.d(t,"HitTestResult",function(){return o});var o=function(){function e(e,t,i){this._result=e,this._data=t,this._eraseMarker=i}return e.prototype.result=function(){return this._result},
e.prototype.data=function(){return this._data},e.prototype.eraseMarker=function(){return this._eraseMarker},e.MOVEPOINT_BACKGROUND=1,e.REGULAR=2,e.MOVEPOINT=3,e.CHANGEPOINT=4,e.CUSTOM=5,e.CUSTOM_MOVE=6,e}()},,,function(e,t,i){"use strict";(function(t){function i(e){if(this._listeners=new t,this._childs=[],this._muteChildChanges=!1,void 0!==e&&null!==e)if(this.isPrimitiveType(e))this._value=e;else for(var i in e)this.addProperty(i,e[i])}i.prototype.merge=function(e,t){var i,o,n,r,s=null;if(t&&(s=[],i=s.length),null==e)return s;if(this.isPrimitiveType(e))return t&&this._value!==e&&s.push(this),this._value=e,s;if(Array.isArray(e))for(o=0;o<e.length;o++)this[o]?(n=this[o].merge(e[o],t),t&&(s=s.concat(n))):(this.addProperty(o,e[o]),t&&s.push(this[o]));else for(r in e)this[r]?(n=this[r].merge(e[r],t),t&&(s=s.concat(n))):(this.addProperty(r,e[r]),t&&s.push(this[r]));return t&&s.length>i&&s.push(this),s},i.prototype.mergeAndFire=function(e){var t=this.merge(e,!0);this._muteChildChanges=!0,t.forEach(function(e){e._muteChildChanges=!0}),t.forEach(function(e){e._muteChildChanges=!1,e.listeners().fire(e)}),this._muteChildChanges=!1,t.length>0&&this.listeners().fire(this)},i.prototype.state=function(e){var t,i,o,n,r,s=this._value;for(void 0===s&&(s={}),t=0;t<this._childs.length;t++)if(i=this._childs[t],!e||-1===e.indexOf(i))if(e){for(o=[],n=0;n<e.length;n++)r=e[n],r.startsWith(i+".")&&o.push(r.substr(i.length+1));s[i]=this[i].state(o)}else s[i]=this[i].state();return s},i.prototype.clone=function(e){return new i(this.state())},i.prototype.isPrimitiveType=function(e){return!!isNumber(e)||(!!new TradingView.TypeValidator(String).check(e)||TradingView.isBoolean(e))},i.prototype.value=function(){return this._value},i.prototype.listeners=function(){return this._listeners},i.prototype.childCount=function(){return this._childs.length},i.prototype.childNames=function(){return this._childs},i.prototype.child=function(e){return this[e]},i.prototype.setValue=function(e,t){(this._value!==e||t)&&(this._value=e,this._listeners.fire(this))},i.prototype.setValueSilently=function(e){this._value=e},i.prototype.addProperty=function(e,t){var o=new i(t);this[e]=o,this._childs.push(e),o.listeners().subscribe(this,i.prototype.childChanged)},i.prototype.removeProperty=function(e){this[e].listeners().unsubscribe(this,i.prototype.childChanged),delete this[e],this._childs=this._childs.filter(function(t){return t!==e})},i.prototype.hasChild=function(e){return this._childs.indexOf(e)>=0},i.prototype.addChild=function(e,t){this[e]=t,-1===$.inArray(e,this._childs)&&this._childs.push(e),t.listeners().subscribe(this,i.prototype.childChanged)},i.prototype.childChanged=function(e,t){this._muteChildChanges||this.listeners().fire(this)},i.prototype.subscribe=function(e,t){this.listeners().subscribe(e,t)},i.prototype.unsubscribe=function(e,t){this.listeners().unsubscribe(e,t)},i.prototype.unsubscribeAll=function(e){this.listeners().unsubscribeAll(e)},e.exports=i}).call(t,i(8))},,function(e,t,i){(function(e){function t(e){return"number"==typeof e&&isFinite(e)}
function i(e){return"string"==typeof e?JSON.parse(e):e}function o(e){return null!==e&&void 0!==e&&e.constructor===Function}function n(e){return h(e)&&e.then}function r(e,t){e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),e.prototype.superclass=t}function s(e,t){for(var i in e.prototype)"function"==typeof e.prototype[i]&&e.prototype.hasOwnProperty(i)&&(e.prototype[i]=function(){throw Error(t+"::"+i+" is an interface member declaration and must be overloaded in order to be called")})}function a(e,t,i,o){for(var n in i.prototype)if("function"==typeof i.prototype[n]&&!e.prototype[n])throw Error("Interface implementation assertion failed: "+t+" does not implement "+o+"::"+n+" function")}var l,c=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},h=function(e){return"object"==typeof e&&null!==e},u=function(e){return h(e)&&-1!==(""+e.constructor).indexOf("function Object")};"undefined"!=typeof window?(l=window.TradingView=window.TradingView||{},window.isNumber=t,window.isFunction=o,window.inherit=r,window.isArray=c):l=this.TradingView=this.TradingView||{},l.isNaN=function(e){return!(e<=0||e>0)},l.isAbsent=function(e){return null===e||void 0===e},l.isExistent=function(e){return null!==e&&void 0!==e},Number.isNaN=Number.isNaN||function(e){return e!=e},l.isSameType=function(e,t){return Number.isNaN(e)||Number.isNaN(t)?Number.isNaN(e)===Number.isNaN(t):{}.toString.call(e)==={}.toString.call(t)},l.isInteger=function(e){return"number"==typeof e&&e%1==0},l.parseBool=function(e){return!0===e||"true"===e},l.isBoolean=function(e){return!0===e||!1===e},l.isString=function(e){return null!==e&&void 0!==e&&e.constructor===String},l.isInherited=function(e,t){return e===t||!(!e||!e.prototype)&&(void 0!==e.prototype.superclass&&null!==e.prototype.superclass&&(e.prototype.superclass===t||l.isInherited(e.prototype.superclass,t)))},l.TypeValidator=function(e){this.m_type=e},l.TypeValidator.prototype.check=function(e){return e.constructor===this.m_type||l.isInherited(e.constructor,this.m_type)},l.PredicateValidator=function(e){this.m_predicate=e},l.PredicateValidator.prototype.check=function(e){return this.m_predicate(e)},l.clone=function(e){var t,i,o;if(!e||"object"!=typeof e)return e;t="function"==typeof e.pop?[]:{};for(i in e)e.hasOwnProperty(i)&&(o=e[i],t[i]=o&&"object"==typeof o?l.clone(o):o);return t},l.deepEquals=function(e,t,i){var n,r,s,a,h;if(i||(i=""),e===t)return[!0,i];if(o(e)&&(e=void 0),o(t)&&(t=void 0),void 0===e&&void 0!==t)return[!1,i];if(void 0===t&&void 0!==e)return[!1,i];if(null===e&&null!==t)return[!1,i];if(null===t&&null!==e)return[!1,i];if("object"!=typeof e&&"object"!=typeof t)return[e===t,i];if(Array.isArray(e)&&Array.isArray(t)){if(n=e.length,r=t.length,n!==r)return[!1,i];for(s=0;s<n;s++)if(a=l.deepEquals(e[s],t[s],i+"["+s+"]"),!a[0])return a;return[!0,i]}if(c(e)||c(t))return[!1,i];for(h in e)if(a=l.deepEquals(e[h],t[h],i+"["+h+"]"),!a[0])return a;return[!0,i]},l.merge=function(e,t){
for(var i in t)"object"==typeof t[i]&&e.hasOwnProperty(i)?l.merge(e[i],t[i]):e[i]=t[i];return e},l.mergeObj=function(e,t){for(var i in t)t[i].constructor===Object&&e.hasOwnProperty(i)?l.mergeObj(e[i],t[i]):e[i]=t[i];return e},l.mergeWithRules=function(e,t,i,o){var n,r;for(n in t)r=o?o+"."+n:n,i&&r in i?e[n]=i[r](e[n],t[n]):"object"==typeof t[n]&&e.hasOwnProperty(n)?l.merge(e[n],t[n],i,r):e[n]=t[n]},l.sortMultipleFunction=function(){var e=[].slice.call(arguments),t=e.length;return function(i,o){var n,r,s,a,l,c,h;for(h=0;h<t&&(c=0,s=e[h],a="string"==typeof s?s:s.name,n=i[a],r=o[a],"function"==typeof s.fn&&(n=s.fn(n),r=s.fn(r)),l=s.reverse?-1:1,n<r&&(c=-1*l),n>r&&(c=1*l),0===c);h++);return c}},void 0!==e&&e&&e.exports&&(e.exports={inherit:r,clone:l.clone,merge:l.merge,isNumber:t,isInteger:l.isInteger,isBoolean:l.isBoolean,isString:l.isString,isObject:h,isHashObject:u,isPromise:n,isNaN:l.isNaN,isAbsent:l.isAbsent,isExistent:l.isExistent,isSameType:l.isSameType,isArray:c,parseBool:l.parseBool,parseJSONorNot:i,deepEquals:l.deepEquals,declareClassAsPureInterface:s,requireFullInterfaceImplementation:a})}).call(t,i(47)(e))},function(e,t,i){"use strict";(function(e){function t(){}function i(e){if(!(this instanceof i))return new i(e);arguments.length>0&&(this._value=e),this._listeners=[]}i.prototype.value=function(){return this._owner?this._owner._value:this._value},i.prototype.setValue=function(e,t){var i,o,n,r=this._owner?this._owner:this;if("function"==typeof r.hook&&(e=r.hook(e)),r.writeLock)return r._value;if(!t&&r._value===e&&r.hasOwnProperty("_value"))return e;for(r._value=e,i=r._listeners.slice(),o=0,n=0;n<i.length;n++)i[n].once&&(r._listeners.splice(n-o,1),o++),i[n].cb(e);return e},i.prototype.deleteValue=function(){var e,t,i,o=this._owner?this._owner:this;if(o.hasOwnProperty("_value")){if(o.writeLock)return o._value;for(delete o._value,e=o._listeners.slice(),t=0,i=0;i<e.length;i++)e[i].once&&(o._listeners.splice(i-t,1),t++),e[i].cb()}},i.prototype.subscribe=function(e,t){var i,o,n;if("function"!=typeof e)throw new TypeError("callback must be a function");i=!!t&&!!t.once,o=!!t&&!!t.callWithLast,n=this._owner?this._owner:this,o&&n.hasOwnProperty("_value")&&(e(n._value),i)||n._listeners.push({cb:e,owner:this,once:!!t&&!!t.once})},i.prototype.unsubscribe=function(e){var t,i,o=this._owner?this._owner:this;for(void 0===e&&(e=null),t=o._listeners,i=t.length;i--;)t[i].owner!==this&&o!==this||t[i].cb!==e&&null!==e||t.splice(i,1)},i.prototype.listeners=function(){return(this._owner?this._owner:this)._listeners},i.prototype.readonly=function(){if(this._readonlyInstance)return this._readonlyInstance;var e=this._readonlyInstance=new t;return e.subscribe=this.subscribe.bind(this),e.unsubscribe=this.unsubscribe.bind(this),e.value=this.value.bind(this),e.when=this.when.bind(this),e.spawn=function(){return this.spawn().readonly()}.bind(this),this.destroy&&(e.destroy=this.destroy.bind(this)),e},i.prototype.spawn=function(){var e=new i;return delete e._listeners,e._owner=this._owner||this,e.destroy=function(){this.unsubscribe(),
delete this._owner},e},i.prototype.when=function(e){var t,i=this;if(this.value())return void e();t=function(o){o&&(i.unsubscribe(t),e())},i.subscribe(t)},i.prototype.opposite=function(){var e,t;return this._opposite||(e=this,t=new i(!this.value()),this.subscribe(function(e){t.setValue(!e)}),t.subscribe(function(t){e.setValue(!t)}),this._opposite=t),this._opposite},"undefined"!=typeof window&&(window.WatchedValue=i),void 0!==e&&e&&e.exports&&(e.exports=i)}).call(t,i(47)(e))},function(e,t,i){"use strict";function o(e){this._invalidationLevel=e||o.UPDATE_CURSOR_ONLY,this._invalidatedPanes={}}o.UPDATE_CURSOR_ONLY=1,o.LIGHT_UPDATE=2,o.FULL_UPDATE=3,o.prototype.invalidatePane=function(e,t){this._invalidatedPanes[e]?this._invalidatedPanes[e]=Math.max(this._invalidatedPanes[e],t):this._invalidatedPanes[e]=t},o.prototype.invalidateAll=function(e){this._invalidationLevel=Math.max(this._invalidationLevel,e)},o.prototype.fullInvalidation=function(){return this._invalidationLevel},o.prototype.invalidateForPane=function(e){return this._invalidatedPanes[e]?Math.max(this._invalidatedPanes[e],this._invalidationLevel):this._invalidationLevel},o.prototype.merge=function(e){this.force=this.force||e.force,this._invalidationLevel=Math.max(this._invalidationLevel,e._invalidationLevel);for(var t in e._invalidatedPanes)this._invalidatedPanes[t]?this._invalidatedPanes[t]=Math.max(this._invalidatedPanes[t],e._invalidatedPanes[t]):this._invalidatedPanes[t]=e._invalidatedPanes[t]},o.prototype.exclude=function(e){this._invalidationLevel<=e&&(this._invalidationLevel=0);for(var t in this._invalidatedPanes)this._invalidatedPanes[t]<=e&&(this._invalidatedPanes[t]=0)},e.exports=o},function(e,t,i){"use strict";(function(t){function o(e,t,i,o){this._map=$.extend({},this._map,o),t&&(t=this.unpackLevels(t)),r.call(this,e,t,i),this.updateCollectibleProperty()}var n=i(14).isSameType,r=i(2).DefaultProperty,s=i(645);inherit(o,r),o.prototype.state=function(e,i){e=e||[],e.push("__collectibleLines");var o=t.prototype.state.call(this,e);return i?o:this.packLevels(o)},o.prototype.clone=function(){var e=this.state();return this.__collectibleLines&&(e.__collectibleLines=this.__collectibleLines.state()),new o(this._defaultName,e)},o.prototype.merge=function(e,i){var o=t.prototype.merge.call(this,this.unpackLevels(e),i);return this.updateCollectibleProperty(),o},o.prototype._map={prefixes:[""],range:[0,0],names:["coeff","color","visible","linestyle","linewidth"],typecheck:{pack:Object,unpack:Array}},o.prototype._packLvlTpl=function(){return[]},o.prototype._unpackLvlTpl=function(){return{}},o.prototype._packLvlFill=function(e,t,i,o){return o.push(i[t]),o},o.prototype._unpackLvlFill=function(e,t,i,o){return o[t]=i[e],o},o.prototype._iterateLevels=function(e,t){var i,o,r,s,a;for(i in this._map.prefixes)for(o=(this._map.prefixes[i]||"")+"level",r=this._map.range[0];r<=this._map.range[1];r++)if(e[o+r]&&n(e[o+r],t.typecheck())){s=t.tpl();for(a in this._map.names)s=t.fill(a,this._map.names[a],e[o+r],s);e[o+r]=s}return e},o.prototype.packLevels=function(e){
return this._iterateLevels(e,{tpl:this._packLvlTpl,fill:this._packLvlFill,typecheck:this._map.typecheck.pack})},o.prototype.unpackLevels=function(e){return this._iterateLevels(e,{tpl:this._unpackLvlTpl,fill:this._unpackLvlFill,typecheck:this._map.typecheck.unpack})},o.prototype.saveDefaults=function(){TradingView.saveDefaults(this._defaultName,this.state(this._exclusions,!0))},o.prototype.updateCollectibleProperty=function(){var e,t;this.__collectibleLines&&(e=this,t=[],this.__collectibleLines._childs.forEach(function(i){var o,n=e.__collectibleLines[i].value(),r=n.split("."),s=e[r[0]];for(o=1;o<r.length&&s;++o)s=s[r[o]];s&&t.push({property:s.color,defaultValue:s.color.value()})}),this.collectibleColors?this.collectibleColors.reloadProperties(t):this.collectibleColors=new s(t))},e.exports=o}).call(t,i(12))},,function(e,t,i){"use strict";function o(e,t){if(!Object(n.isNumber)(e))return"n/a";if(!Object(n.isInteger)(t))throw new TypeError("invalid length");if(t<0||t>16)throw new TypeError("invalid length");return 0===t?""+e:("0000000000000000"+e).slice(-t)}var n,r,s,a,l,c,h;Object.defineProperty(t,"__esModule",{value:!0}),i.d(t,"customFormatters",function(){return a}),i.d(t,"formatterOptions",function(){return l}),t.numberToStringWithLeadingZero=o,i.d(t,"PriceFormatter",function(){return h}),i(11),n=i(14),i.n(n),r=i(5),s=Object(r.getLogger)("Chart.PriceFormatter"),a={dateFormatter:null,timeFormatter:null},l={decimalSign:".",decimalSignFractional:"'"},c={custom:$.t("Price format is invalid."),fraction:$.t("Fraction part is invalid."),secondFraction:$.t("Second fraction part is invalid.")},h=function(){function e(e,t,i,o){if(this.type="price",t||(t=1),Object(n.isNumber)(e)&&Object(n.isInteger)(e)||(e=100),e<0)throw new TypeError("invalid base");if(this._priceScale=e,this._minMove=t,this._minMove2=o,i&&void 0!==o&&o>0&&2!==o&&4!==o&&8!==o)return void s.logDebug("invalid minmove2");this._fractional=i,this.calculateDecimal()}return e.prototype.isFractional=function(){return!!this._fractional},e.prototype.state=function(){return{fractional:this._fractional,fractionalLength:this._fractionalLength,minMove:this._minMove,minMove2:this._minMove2,priceScale:this._priceScale}},e.prototype.calculateDecimal=function(){if(this._fractionalLength=0,this._priceScale>0&&this._minMove>0){var e=this._priceScale;for(this._fractional&&this._minMove2&&(e/=this._minMove2);e>1;)e/=10,this._fractionalLength++}},e.prototype.format=function(e,t,i,o){void 0===o&&(o=!0);var n="";return e<0?(n=!0===t?"":!1===o?"":"-",e=-e):e&&!0===t&&(n="+"),this._fractional?n+this._formatAsFractional(e,i):n+this._formatAsDecimal(e,i)},e.prototype.parse=function(e){return this._fractional?this._minMove2?this._parseAsDoubleFractional(e):this._parseAsSingleFractional(e):this._parseAsDecimal(e)},e.prototype.hasForexAdditionalPrecision=function(){return!this._fractional&&10===this._minMove2},e.serialize=function(e){return e.state()},e.deserialize=function(t){return new e(t.priceScale,t.minMove,t.fractional,t.minMove2)},e.prototype._formatAsDecimal=function(e,t){
var i,n,r,s,a;return t=t||0,i=this._fractional?Math.pow(10,this._fractionalLength||0):Math.pow(10,t)*this._priceScale/this._minMove,n=Math.floor(e),r=+(Math.round(e*i)-n*i).toFixed(this._fractionalLength),r>=i&&(r-=i,n+=1),s="",1!==i&&(a=void 0!==this._fractionalLength?this._fractionalLength:NaN,s=l.decimalSign+o(+r.toFixed(this._fractionalLength)*this._minMove,a+t),s=this._removeEndingZeros(s,t)),""+n+s},e.prototype._formatAsFractional=function(e,t){var i,n,r,s,a,c,h,u,d,p=this._priceScale/this._minMove,_=Math.floor(e),f=t?Math.floor(e*p)-_*p:Math.round(e*p)-_*p;if(f===p&&(f=0,_+=1),i="",t&&(n=(e-_-f/p)*p,n=Math.round(n*Math.pow(10,t)),i=o(n,t),i=this._removeEndingZeros(i,t)),!this._fractionalLength)throw Error("_fractionalLength is not calculated");return r="",this._minMove2?(s=["0","5"],a=["0","2","5","7"],c=["0","1","2","3","4","5","6","7"],h=f%this._minMove2,f=(f-h)/this._minMove2,u=o(f,this._fractionalLength),d=2===this._minMove2?s[h]:8===this._minMove2?c[h]:a[h],r=u+l.decimalSignFractional+d):r=o(f*this._minMove,this._fractionalLength),""+_+l.decimalSignFractional+r+i},e.prototype._removeEndingZeros=function(e,t){for(var i=0;i<t&&"0"===e[e.length-1];i++)e=e.substr(0,e.length-1);return e},e.prototype._parseAsDecimal=function(e){var t,i,o=RegExp(/^(\-?)[0-9]+$/),n=o.exec(e);return n?(t=parseFloat(e),{price:t,res:!0,suggest:this.format(t)}):(i=RegExp("^(-?)[0-9]+\\"+l.decimalSign+"[0-9]*$"),n=i.exec(e),n?(t=parseFloat(e.replace(l.decimalSign,".")),{price:t,res:!0,suggest:this.format(t)}):{error:c.custom,res:!1})},e.prototype._patchFractPart=function(e,t){var i={0:0,5:1},o={0:0,2:1,5:2,7:3};return 2===t?void 0===i[e]?-1:i[e]:4===t?void 0===o[e]?-1:o[e]:e},e.prototype._parseAsSingleFractional=function(e){var t,i,o,n,r,s,a=RegExp(/^(\-?)[0-9]+$/),h=a.exec(e);return h?(t=parseFloat(e),{price:t,res:!0,suggest:this.format(t)}):(i=RegExp("^(-?)([0-9]+)\\"+l.decimalSignFractional+"([0-9]+)$"),h=i.exec(e),h?(o=!!h[1],n=parseInt(h[2]),r=this._priceScale,(s=this._patchFractPart(parseInt(h[3]),r))>=r||s<0?{error:c.fraction,res:!1}:(t=n+s/r,o&&(t=-t),{price:t,res:!0,suggest:this.format(t)})):{error:c.custom,res:!1})},e.prototype._parseAsDoubleFractional=function(e){var t,i,o,n,r,s,a,h,u,d=RegExp(/^(\-?)[0-9]+$/),p=d.exec(e);return p?(t=parseFloat(e),{price:t,res:!0,suggest:this.format(t)}):(i=RegExp("^(-?)([0-9]+)\\"+l.decimalSignFractional+"([0-9]+)\\"+l.decimalSignFractional+"([0-9]+)$"),p=i.exec(e),p?(o=!!p[1],n=parseInt(p[2]),r=void 0!==this._minMove2?this._minMove2:NaN,s=this._priceScale/r,a=this._minMove2,h=this._patchFractPart(parseInt(p[3]),s),u=this._patchFractPart(parseInt(p[4]),a),h>=s||h<0?{error:c.fraction,res:!1}:void 0!==a&&u>=a||u<0?{error:c.secondFraction,res:!1}:(t=void 0!==a?n+h/s+u/(s*a):NaN,o&&(t=-t),{price:t,res:!0,suggest:this.format(t)})):{error:c.custom,res:!1})},e}()},function(e,t,i){"use strict";function o(e,t){var i,o;return null===e?t:null===t?e:(i=Math.min(e.min,t.min),o=Math.max(e.max,t.max),{min:i,max:o})}function n(e,t){
for(var i=r(e,t),o=Array(i),n=0,s=0,a=e.length,l=t.length,c=0;n<a&&s<l;)e[n].index<t[s].index?(o[c]=e[n],n++):e[n].index>t[s].index?(o[c]=t[s],s++):(o[c]=t[s],n++,s++),c++;for(;n<a;)o[c]=e[n],n++,c++;for(;s<l;)o[c]=t[s],s++,c++;return o}function r(e,t){for(var i=e.length,o=t.length,n=i+o,r=0,s=0;r<i&&s<o;)e[r].index<t[s].index?r++:e[r].index>t[s].index?s++:(r++,s++,n--);return n}var s,a,l,c,h,u,d,p;Object.defineProperty(t,"__esModule",{value:!0}),i.d(t,"PlotRowSearchMode",function(){return h}),i.d(t,"REMOVE_INDEX_MAGIC_NUMBER",function(){return d}),i.d(t,"PlotList",function(){return p}),t.mergeMinMax=o,t.mergePlotRows=n,s=i(7),i.n(s),a=i(78),l=i(5),c=Object(l.getLogger)("Chart.PlotList"),function(e){e[e.NearestLeft=-1]="NearestLeft",e[e.Exact=0]="Exact",e[e.NearestRight=1]="NearestRight"}(h||(h={})),u=30,d=-2e6,p=function(){function e(e){void 0===e&&(e=[]),this._items=[],this._plotNames=[],this._start=0,this._end=0,this._shareRead=!1,this._minMaxCache={},this._rowSearchCache={},this._plotNames=e}return e.prototype.clear=function(){this._items=[],this._start=0,this._end=0,this._shareRead=!1,this._minMaxCache={},this._rowSearchCache={}},e.prototype.plotNames=function(){return this._plotNames},e.prototype.first=function(){return this.size()>0?this._items[this._start]:null},e.prototype.last=function(){return this.size()>0?this._items[this._end-1]:null},e.prototype.firstIndex=function(){return this.size()>0?this._indexAt(this._start):null},e.prototype.lastIndex=function(){return this.size()>0?this._indexAt(this._end-1):null},e.prototype.size=function(){return this._end-this._start},e.prototype.isEmpty=function(){return 0===this.size()},e.prototype.contains=function(e){return null!==this._search(e)},e.prototype.valueAt=function(e){var t=this.search(e);return null!==t?t.value:null},e.prototype.add=function(e,t){var i,o;return this._shareRead?(c.logDebug("add: readonly collection modification attempt"),!1):(i={index:e,value:t},o=this._search(e),this._rowSearchCache={},null===o?(this._items.splice(this._lowerbound(e),0,i),this._start=0,this._end=this._items.length,!0):(this._items[o]=i,!1))},e.prototype.search=function(e,t){var i,o;return void 0===t&&(t=h.Exact),this._rowSearchCache[e]&&this._rowSearchCache[e][t]?this._rowSearchCache[e][t]:null===(i=this._search(e,t))?null:(o={index:this._indexAt(i),value:this._valueAt(i)},this._rowSearchCache[e]=this._rowSearchCache[e]||{},this._rowSearchCache[e][t]=o,o)},e.prototype.fold=function(e,t){var i,o,n,r=t;for(i=this._start;i<this._end;++i)o=this._indexAt(i),n=this._valueAt(i),r=e(o,n,r);return r},e.prototype.findFirst=function(e,t){var i,o,n,r=void 0!==t&&Math.min(this._start+t,this._end)||this._end;for(i=this._start;i<r;++i)if(o=this._indexAt(i),n=this._valueAt(i),e(o,n))return{index:o,value:n};return null},e.prototype.findLast=function(e,t){var i,o,n,r=void 0!==t&&Math.max(this._end-t,this._start)||this._start;for(i=this._end-1;i>=r;--i)if(o=this._indexAt(i),n=this._valueAt(i),e(o,n))return{index:o,value:n};return null},e.prototype.each=function(e){var t,i,o
;for(t=this._start;t<this._end&&(i=this._indexAt(t),o=this._valueAt(t),!e(i,o));++t);},e.prototype.reduce=function(e,t){var i,o,n,r=t;for(i=this._start;i<this._end;++i)o=this._indexAt(i),n=this._valueAt(i),r=e(r,o,n);return r},e.prototype.range=function(t,i){var o=new e;return o._items=this._items,o._start=this._lowerbound(t),o._end=this._upperbound(i),o._shareRead=!0,o},e.prototype.minMaxOnRange2=function(e,t,i){var n,r,a,l,c,h,d,p,_,f,m,g,y,v,b,S,w,T,P;if(this.isEmpty())return null;for(n=null,r=Object(s.ensureNotNull)(this.firstIndex()),a=Object(s.ensureNotNull)(this.lastIndex()),l=0,c=i;l<c.length;l++){for(h=c[l],d=e-h.offset,p=t-h.offset,d=Math.max(d,r),p=Math.min(p,a),_=Math.ceil(d/u)*u,f=Math.max(_,Math.floor(p/u)*u),m=this._lowerbound(d),g=this._upperbound(Math.min(p,_,t)),y=this._plotMinMax(m,g,h),n=o(n,y),this._minMaxCache[h.index]||(this._minMaxCache[h.index]={}),v=this._minMaxCache[h.index],b=Math.max(_+1,d);b<f;b+=u)S=Math.floor(b/u),w=v[S],void 0===w&&(T=S*u,P=(S+1)*u-1,w=this.minMaxOnRange(T,P,[h]),v[S]=w),n=o(n,w);m=this._lowerbound(f),g=this._upperbound(p),y=this._plotMinMax(m,g,h),n=o(n,y),void 0!==h.baseValue&&null!==n&&(n.min=n.min?Math.min(h.baseValue,n.min):n.min,n.max=n.min?Math.max(h.baseValue,n.max):n.max)}return n},e.prototype.minMaxOnRange=function(e,t,i){var n,r,s,a,l,c,h=null;for(n=0,r=i;n<r.length;n++)s=r[n],a=this._lowerbound(e-s.offset),l=Math.min(this._lowerbound(t-s.offset)+1,this._items.length),this._items[this._end-1]&&this._items[l-1].index>t-s.offset&&(l=a),c=this._plotMinMax(a,l,s),h=o(h,c),void 0!==s.baseValue&&null!==h&&(h.min=h.min?Math.min(s.baseValue,h.min):h.min,h.max=h.max?Math.max(s.baseValue,h.max):h.max);return h},e.prototype.merge=function(e){return this._shareRead?(c.logDebug("merge: readonly collection modification attempt"),null):0===e.length?null:this.isEmpty()||e[e.length-1].index<this._items[0].index?this._prepend(e):e[0].index>this._items[this._items.length-1].index?this._append(e):1===e.length&&e[0].index===this._items[this._items.length-1].index?(this._updateLast(e[0]),e[0]):this._merge(e)},e.prototype.addTail=function(e,t){var i,o,n,r;for(void 0===t&&(t=!1),i=0,t&&this._end-this._start>0&&(i=1,this._items[this._end-this._start-1].value=e[0].value),o=i;o<e.length;++o){if(n=e[o],null===(r=this.lastIndex())){c.logError("Can't add tail to the empty plotlist");break}this.add(r+1,n.value)}this._rowSearchCache={}},e.prototype.move=function(e){var t,i,o,n,r,s,a;if(this._shareRead)return void c.logDebug("move: readonly collection modification attempt");if(0!==e.length){for(t=this._items.slice(),i=0,o=e;i<o.length;i++)n=o[i],null!==(r=this._bsearch(n.old))&&void 0!==t[r]&&(n.new===d?t[r]=void 0:(t[r]={index:n.new,value:t[r].value},null!==(s=this._bsearch(n.new))&&void 0!==(a=t[s])&&a.index===n.new&&(t[s]=void 0)));this._items=t.filter(function(e){return void 0!==e}).sort(function(e,t){return e.index-t.index}),this._rowSearchCache={},this._minMaxCache={},this._start=0,this._end=this._items.length}},e.prototype.remove=function(e){var t,i
;return this._shareRead?(c.logDebug("remove: readonly collection modification attempt"),null):null===(t=this._search(e,h.NearestRight))?null:(i=this._items.splice(t),this._end=this._items.length,this._minMaxCache={},this._rowSearchCache={},i.length>0?i[0]:null)},e.prototype.state=function(){return{columns:this._plotNames,start:this._start,end:this._end,data:this._items,shareread:this._shareRead}},e.prototype.restoreState=function(e){if(!e)return void this.clear();this._plotNames=e.columns,this._start=e.start,this._end=e.end,this._shareRead=e.shareread,this._items=e.data,this._minMaxCache={},this._rowSearchCache={}},e.prototype._indexAt=function(e){return this._items[e].index},e.prototype._valueAt=function(e){return this._items[e].value},e.prototype._length=function(){return this._items.length},e.prototype._search=function(e,t){var i,o=this._bsearch(e);return null===o&&t?t<0?(i=this._lowerbound(e),i>this._start&&(i-=1),i!==this._end&&this._indexAt(i)<e?i:null):(i=this._upperbound(e),i!==this._end&&e<this._indexAt(i)?i:null):o},e.prototype._bsearch=function(e){var t=this._lowerbound(e);return t===this._end||e<this._items[t].index?null:t},e.prototype._lowerbound=function(e){return Object(a.lowerbound)(this._items,e,function(e,t){return e.index<t},this._start,this._end)},e.prototype._upperbound=function(e){return Object(a.upperbound)(this._items,e,function(e,t){return t.index>e},this._start,this._end)},e.prototype._plotMinMax=function(e,t,i){var o,n,r,s=null;for(o=e;o<t;o++)n=this._items[o].value,void 0===(r=n[i.index])||null===r||Number.isNaN(r)||(null===s?s={min:r,max:r}:(r<s.min&&(s.min=r),r>s.max&&(s.max=r)));return s},e.prototype._invalidateCacheForRow=function(e){var t,i=Math.floor(e.index/u);for(t=0;t<this._plotNames.length;t++)this._minMaxCache[t]&&delete this._minMaxCache[t][i]},e.prototype._prepend=function(e){return Object(s.assert)(!this._shareRead,"collection should not be readonly"),Object(s.assert)(0!==e.length,"plotRows should not be empty"),this._rowSearchCache={},this._minMaxCache={},this._items=e.concat(this._items),this._start=0,this._end=this._items.length,e[0]},e.prototype._append=function(e){return Object(s.assert)(!this._shareRead,"collection should not be readonly"),Object(s.assert)(0!==e.length,"plotRows should not be empty"),this._rowSearchCache={},this._minMaxCache={},this._items=this._items.concat(e),this._start=0,this._end=this._items.length,e[0]},e.prototype._updateLast=function(e){Object(s.assert)(!this.isEmpty(),"plot list should not be empty");var t=this._items[this._end-1];Object(s.assert)(t.index===e.index,"last row index should match new row index"),this._invalidateCacheForRow(e),this._rowSearchCache[e.index]={},this._items[this._end-1]=e},e.prototype._merge=function(e){return Object(s.assert)(0!==e.length,"plot rows should not be empty"),this._rowSearchCache={},this._minMaxCache={},this._items=n(this._items,e),this._start=0,this._end=this._items.length,e[0]},e}()},function(e,t,i){"use strict";function o(e){return 0===e.length?1:parseInt(e,10)}var n,r,s,a,l,c
;Object.defineProperty(t,"__esModule",{value:!0}),i.d(t,"ResolutionKind",function(){return s}),i.d(t,"Interval",function(){return c}),n=/^(\d*)([SHDWMR])$/,r=/^(\d+)$/,function(e){e.Seconds="seconds",e.Minutes="minutes",e.Hours="hours",e.Days="days",e.Weeks="weeks",e.Months="months",e.Range="range",e.Invalid="invalid"}(s||(s={})),a={},a[s.Seconds]=1e3,a[s.Minutes]=60*a[s.Seconds],a[s.Hours]=60*a[s.Minutes],a[s.Days]=24*a[s.Hours],a[s.Weeks]=7*a[s.Days],l={S:s.Seconds,H:s.Hours,D:s.Days,W:s.Weeks,M:s.Months,R:s.Range},c=function(){function e(t,i){if(this._kind=s.Invalid,void 0===i&&t!==s.Invalid)return e.parse(t);this._kind=this._validateResolutionKind(t),this._multiplier=this._kind!==s.Invalid?i:void 0,0===this._multiplier&&(this._kind=s.Invalid,this._multiplier=void 0)}return e.prototype.kind=function(){return this._kind},e.prototype.multiplier=function(){return this._multiplier},e.prototype.isValid=function(){return this.kind()!==s.Invalid},e.prototype.isDWM=function(){return this.isValid()&&!this.isRange()&&!this.isIntraday()},e.prototype.isIntraday=function(){var e=-1!==[s.Seconds,s.Minutes,s.Hours].indexOf(this.kind());return this.isValid()&&!this.isRange()&&e},e.prototype.isSeconds=function(){return this.kind()===s.Seconds},e.prototype.isMinutes=function(){return this.kind()===s.Minutes},e.prototype.isHours=function(){return this.kind()===s.Hours},e.prototype.isDays=function(){return this.kind()===s.Days},e.prototype.isWeeks=function(){return this.kind()===s.Weeks},e.prototype.isMonths=function(){return this.kind()===s.Months},e.prototype.isRange=function(){return this.kind()===s.Range},e.prototype.isTimeBased=function(){return!this.isRange()},e.prototype.letter=function(){return this.isValid()&&this.kind()!==s.Minutes?this.kind()[0].toUpperCase():""},e.prototype.value=function(){return this.isValid()?this.kind()===s.Minutes?this.multiplier()+"":this.multiplier()+this.letter():""},e.prototype.isEqualTo=function(t){if(!(t instanceof e))throw Error("Argument is not an Interval");return!(!this.isValid()||!t.isValid())&&(this.kind()===t.kind()&&this.multiplier()===t.multiplier())},e.prototype.inMilliseconds=function(e){var t,i;return void 0===e&&(e=Date.now()),!this.isValid()||this.isRange()?NaN:this.isMonths()?(t=new Date(e),t.setUTCMonth(t.getUTCMonth()+(this.multiplier()||1)),+t-e):(i=this.multiplier(),void 0===i?NaN:a[this.kind()]*i)},e.isEqual=function(t,i){return e.parse(t).isEqualTo(e.parse(i))},e.parse=function(t){t=(t+"").toUpperCase().split(",")[0];var i=n.exec(t);return null!==i?new e(l[i[2]],o(i[1])):(i=r.exec(t),null!==i?new e(s.Minutes,o(i[1])):new e(s.Invalid))},e.kind=function(t){return e.parse(t).kind()},e.isValid=function(t){return e.parse(t).isValid()},e.isDWM=function(t){return e.parse(t).isDWM()},e.isIntraday=function(t){return e.parse(t).isIntraday()},e.isSeconds=function(t){return e.parse(t).isSeconds()},e.isMinutes=function(t){return e.parse(t).isMinutes()},e.isHours=function(t){return e.parse(t).isHours()},e.isDays=function(t){return e.parse(t).isDays()},e.isWeeks=function(t){
return e.parse(t).isWeeks()},e.isMonths=function(t){return e.parse(t).isMonths()},e.isRange=function(t){return e.parse(t).isRange()},e.isTimeBased=function(t){return e.parse(t).isTimeBased()},e.normalize=function(t){var i=new e(t);return i.isValid()?i.value():null},e.prototype._validateResolutionKind=function(e){return e!==s.Seconds&&e!==s.Minutes&&e!==s.Hours&&e!==s.Days&&e!==s.Weeks&&e!==s.Months&&e!==s.Range&&e!==s.Invalid?s.Invalid:e},e}()},,,function(e,t,i){"use strict";function o(e,t,i){var o,n,r,l,c;if(t=t||0,!s(e))return i?Object(a.rgbaToString)(Object(a.rgba)(Object(a.parseRgb)(e),Object(a.normalizeAlphaComponent)(1-t/100))):e;if(t<0&&t>100)throw Error("invalid transparency");return o=Object(a.parseRgb)(e),n=o[0],r=o[1],l=o[2],c=Object(a.normalizeAlphaComponent)(1-t/100),Object(a.rgbaToString)([n,r,l,c])}function n(e){return s(e)?e:Object(a.rgbaToString)(Object(a.rgba)(Object(a.parseRgb)(e),Object(a.normalizeAlphaComponent)(1)))}function r(e){var t=Object(a.parseRgb)(e).map(function(e){return e/=255,e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4)});return+(.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3)}function s(e){return 0===e.indexOf("#")}var a;Object.defineProperty(t,"__esModule",{value:!0}),t.generateColor=o,t.resetTransparency=n,t.getLuminance=r,t.isHexColor=s,a=i(27),i.n(a)},function(e,t,i){"use strict";(function(t,o,n,r){function s(e,t,i,o){this._study=e,this.m_series=t,this.m_model=i,this._plotName=o,this._visible=!1,this._points=[new te(0,0)],this._invalidated=!0,this._lineRenderer=new P}function a(){return{visible:!0,color:"#0496FF",linestyle:CanvasEx.LINESTYLE_SOLID,linewidth:2,plottype:_e.Line,histogramBase:0,transparency:50,trackPrice:!1,joinPoints:!1}}function l(e,t,i,o,n){return c(e,t,i,o,de.getStudyPropertyRootName(e),n)}function c(e,t,i,o,n,r){var s,a,l,c,h,u=d(e,t,i,o);for(r instanceof g&&(s=de.getSourceInputIds(e),s.length>0&&(a=s[0],u.inputs[a]="{pid}$0")),l=new oe(n,u,!0),l.addExclusion("visible"),l.addExclusion("precision"),l.addExclusion("minTick"),c=0;c<e.inputs.length;++c)h=e.inputs[c],h.isHidden&&(l.addExclusion("inputs."+c),l.addExclusion("inputs."+h.id));return l}function h(e,t,i,o,n,r){return u(e,t,i,o,n,de.getStudyPropertyRootName(e),r)}function u(e,t,i,o,n,r,s){var a,l,c,h=p(e,t,i,o,n),u=new oe(r,h,!0);for(u.addExclusion("visible"),u.addExclusion("precision"),u.addExclusion("minTick"),a=t||e,l=0;l<a.inputs.length;++l)c=a.inputs[l],c.isHidden&&(u.addExclusion("inputs."+l),u.addExclusion("inputs."+c.id));return u}function d(e,o,n,r){var s,a,l,c,h,u,d,p,g=i(171);if(de.versionOf(e)<1)throw Error("This function cannot work with metainfo of the old format version. Required format version >= 1");return s=TradingView.clone(defaults("study")),_(s,e),a=de.getStudyPropertyRootName(e),l=TradingView.clone(defaults(a,r)),e.isTVScript&&e.TVScriptSourceCode!==l.TVScriptSourceCode&&(l=TradingView.clone(TradingView.factoryDefaults(a,r))),TradingView.merge(s,l),o&&(b(!(o instanceof t),"propsState should not be an instance of Property"),TradingView.merge(s,o)),c=TradingView.clone(e),h={},
g.mergeInputsObjPart(h,c.defaults.inputs),g.mergeInputsObjPart(h,s.inputs),s.inputs=h,delete c.inputs,delete c.defaults.inputs,u={},TradingView.merge(u,c.defaults),TradingView.merge(u,TradingView.factoryDefaults("study_"+c.id)),TradingView.merge(u,s),TradingView.merge(u,c),delete u.defaults,s=u,d=null!==n?n.model().getStudyShiftColorStartOffset():void 0,p=f(n,e),TradingView.merge(s,m(s,p,d)),o&&TradingView.merge(s.styles,o.styles),s}function p(e,t,o,n,r){var s,a,l,c,h,u,d=i(171);return e.version&&o.version&&e.version!==o.version&&me.logWarn("Serialized metaInfo version "+e.version+" is not equal to the saved state version "+o.version),s=TradingView.clone(defaults("study")),TradingView.merge(s,TradingView.factoryDefaults("study_"+e.id)),_(s,e),TradingView.merge(s,o),s=r.updateStudyState(s,e,t),a=TradingView.clone(t||e),a&&de.versionOf(a)>=1&&(l={},d.mergeInputsObjPart(l,a.defaults.inputs),d.mergeInputsObjPart(l,s.inputs),s.inputs=l,delete a.inputs,delete a.defaults.inputs,c={},TradingView.merge(c,a.defaults),TradingView.merge(c,TradingView.factoryDefaults("study_"+a.id)),TradingView.merge(c,s),delete a.defaults,TradingView.merge(c,a),s=c),h=null!==n?n.model().getStudyShiftColorStartOffset():void 0,u=f(n,a),TradingView.merge(s,m(s,u,h)),s}function _(e,t){var i,o,n,r;if(t.plots)for(i=0;i<t.plots.length;i++)o=t.plots[i],n=o.id,pe.isColorerPlot(o)||(r=a(),pe.isBarColorerPlot(o)&&(r.transparency=0),r.plottype=o.type,r.title=n,e.styles&&n in e.styles&&TradingView.merge(r,e.styles[n]),e.styles[n]=r)}function f(e,t){var i,o,n,r,s=0;if(e)for(i=0;i<e.dataSources().length;i++)o=e.dataSources()[i],o.metaInfo&&o.metaInfo()&&(n=o.metaInfo().id===t.id,r=(o.metaInfo().pine&&o.metaInfo().pine.version)===(t.pine&&t.pine.version),n&&r&&s++);return s}function m(e,t,i){var o,n;if(!t)return e;for(o in e.styles)(n=e.styles[o].color)&&(e.styles[o].color=ie(n,t,i));return e}function g(e,t,r,s){var a,l,c,h,u,d,p,_,f,m,y=i(118);for(this._titleCache={},this._resolvedSymbols={},this._priceAxisViewsBase=[],this._paneViews=[],this._hlinesPriceAsisViews=[],this._horizlinesPriceAsisViews=[],W.call(this,e),this._model=e,this._chartApi=e._chartApi,this._series=r instanceof TradingView.Series?r:this._model.mainSeries(),r instanceof g&&(this._source=r,this._isChildStudy=!0,this._source.setChild(this)),this._numericFormatter=new se,this._metaInfo=s,this._properties=t,this._properties.listeners().subscribe(this,this.changeStyles),this._properties.visible.listeners().subscribe(this,this.visibleChanged),this._properties.visible.listeners().subscribe(this,this.processHibernate),a=0;a<this._metaInfo.plots.length;a++)l=this._metaInfo.plots[a].id,null!=(c=this.properties().styles[l])&&null!=c.visible&&c.visible.listeners().subscribe(this,this.processHibernate);for(h in this._metaInfo.graphics)for(u in this._metaInfo.graphics[h])d=this._properties.graphics[h][u],d.visible&&d.visible.listeners().subscribe(this,this.processHibernate);if(this._showStudyArgumentsProperty=this.model().properties().paneProperties.legendProperties.showStudyArguments,
this._turnaroundCounter=0,this._turnaround="st"+this._turnaroundCounter,this._status="",this._plotFields=[],p=this.metaInfo().plots)for(a=0,_=p.length;a<_;a++)u=p[a].id,this._plotFields.push(u);this._invalidateLastNonEmptyPlotRowCache(),this.m_data=new le(this._plotFields),this._graphics=new Z,this._plotOffsets={},this._plotOffsetsMetaInfoOverride={},this._studyModified=!1,this._tagsChanged=new o,this.createViews(),f=this,this._handler=function(e){f.onData(e)},this._handler.isTVScriptStrategy=this._metaInfo.isTVScriptStrategy,this._createFormatter(),f=this,this._properties.precision.listeners().subscribe(null,function(){f._createFormatter(),f._model.invalidate(new Q(Q.FULL_UPDATE))}),this._showStudyArgumentsProperty.listeners().subscribe(this,this.invalidateTitleCache),this._properties.description.listeners().subscribe(this,this.invalidateTitleCache),this._properties.shortDescription&&this._properties.shortDescription.listeners().subscribe(this,this.invalidateTitleCache),n.enabled("update_study_formatter_on_symbol_resolve")&&e.mainSeries().onSymbolResolved().subscribe(this,g.prototype._createFormatter),f=this,m={},this._simplePlotsCount=s.plots.filter(function(e,t){if(f.isLinePlot(t))return!0;if(f.isOHLCSeriesPlot(t)){var i=f.metaInfo().plots[t].target;return!m[i]&&(m[i]=i,!0)}return!1}).length,this._properties.showInDataWindow.listeners().subscribe(e,y.prototype.fullUpdate),this.hasBarColorer()&&this._properties.visible.listeners().subscribe(e.mainSeries(),TradingView.Series.prototype.invalidateBarStylesCache),this.onStart=new o,this._childStudyByRebind=new o,this._symbolsResolved=new o}function y(e,t){return e&&e[t]&&e[t].hasOwnProperty("showLast")?e[t].showLast.value():null}var v=i(7),b=v.assert,S=v.ensureNotNull,w=i(260).unpackNonSeriesData,T=i(168).StudyBarColorer,P=i(84).HorizontalLineRenderer,x=i(618),C=x.BandPaneView,L=x.BandBackgroundPaneView,I=x.HlineFillPaneView,M=i(619).StudyPriceAxisView,k=i(620),A=k.StudyPaneView,E=k.StudyBackgroundPaneView,D=k.StudyPlotShapesPaneView,V=k.StudyPlotCharsPaneView,O=k.StudyPlotArrowsPaneView,R=k.StudyPlotBarsPaneView,B=k.StudyPlotCandlesPaneView,z=i(637),N=z.PlotFillPaneView,F=z.AreaBackgroundPaneView,W=i(30).PriceDataSource,H=i(97),j=i(170).StudyDataWindowView,U=i(117),q=i(638),Y=q.emptyStudyGraphics,G=q.loadStudyGraphics,K=q.saveStudyGraphics,Z=q.LiveStudyGraphics,X=q.createGraphicsPaneViews,J=q.createGraphicsPriceAxisViews,Q=i(16),ee=i(269).ChartApiInterface,te=i(6).Point,ie=i(27).shiftColor,oe=i(2).DefaultProperty,ne=i(19).PriceFormatter,re=i(639).VolumeFormatter,se=i(102).NumericFormatter,ae=i(20),le=ae.PlotList,ce=ae.PlotRowSearchMode,he=ae.mergeMinMax,ue=i(213).MarkLocation,de=i(28),pe=i(107),_e=pe.PlotType,fe=i(1).propertyPages,me=i(5).getLogger("Chart.Study");s.prototype.update=function(){this._invalidated=!0},s.prototype.updateImpl=function(){this._visible=!1;var e=this._study.lastValueData(this._plotName,!0);e.noData||(this._visible=!0,this._points=[new te(0,e.coordinate)],this._color=e.color)},s.prototype.renderer=function(){
this._invalidated&&(this.updateImpl(),this._invalidated=!1);var e={};return e.width=this.m_model.timeScale().width(),e.height=this._study.priceScale().height(),e.points=this._points,e.color=this._color,e.linewidth=this._study.properties().styles[this._plotName].linewidth.value(),e.linestyle=CanvasEx.LINESTYLE_DOTTED,e.visible=this._visible,this._lineRenderer.setData(e),this._lineRenderer},inherit(g,W),TradingView.Study=g,g.prototype.lastValueData=function(e,t,i){var o,n,r,s,a,l,c,h,u,d,p,_,f,m,g,y,v,b,S,w,T,P,x={noData:!0};if(this._model.timeScale().isEmpty()||null==this.priceScale()||this.priceScale().isEmpty()||this.data().isEmpty())return x;if(null===(o=this._model.timeScale().visibleBars()))return x;if(!this.properties().visible.value())return x;if(n=this.properties().styles,r=this.properties().ohlcPlots,n&&n[e]&&(s=n[e]),r&&r[e]&&(s=r[e]),!s||!s.visible.value())return x;if(a=this.offset(e),null==(l=this.nearestIndex(o.lastBar()-a,ce.NearestLeft))||void 0===l)return x;for(h=this.metaInfo().plots,c=0;c<h.length&&!(h[c].id===e||this.isOHLCClosePlot(c)&&h[c].target===e);c++);if(u=this._lastNonEmptyPlotRow(c),d=null!==u&&o.contains(u.index),p=null!==u?u.value:null,!(_=t||d?p:this.data().valueAt(l))||!isNumber(_[c+1]))return x;for(f={noData:!1},m=null,g=null,v=0;v<h.length;v++)h[v].target===e&&(this.isSelfColorerPlot(v)||this.isOHLCColorerPlot(v))&&(m=v,g=this.metaInfo().palettes[h[v].palette],y=this.properties().palettes[h[v].palette]);return b=_[c+1],i&&(f.price=b),(S=this.firstValue(!0))?(f.text=this.priceScale().formatPrice(b,S),w=s.color.value(),m&&_.length>m+1?(T=_[m+1],void 0!==T&&null!==T?(P=g.valToIndex?g.valToIndex[T]:T,f.color=y.colors[P].color.value()):f.color=w):f.color=w,f.floatCoordinate=this.priceScale().priceToCoordinate(b,S,!0),f.coordinate=Math.round(f.floatCoordinate),f.item=_,f):x},g.prototype.isFailed=function(){return this._failed},g.prototype.series=function(){return this._series},g.prototype.model=function(){return this._model},g.prototype._invalidateLastNonEmptyPlotRowCache=function(){this._lastNonEmptyPlotRowCache={}},g.prototype.clearData=function(){this._invalidateLastNonEmptyPlotRowCache(),this.m_data.clear(),this._graphics.clear&&this._graphics.clear(),this._plotOffsets={}},g.prototype.onTagsChanged=function(){return this._tagsChanged},g.prototype.properties=function(){return this._properties},g.prototype.state=function(e){var t,i,o,n,r=TradingView.className(this.constructor),s={type:r,id:this.id(),state:this.properties().state(),zorder:this.zorder()};for(this.metaInfo()instanceof de?s.metaInfo=TradingView.clone(this.metaInfo().state()):(s.metaInfo=TradingView.clone(this.metaInfo()),s.metaInfo.id=de.parseIdString(s.metaInfo.id+(s.metaInfo.version?"-"+s.metaInfo.version:"")).fullId),e&&(s.data=this.data().state(),s.data.symbols=this._resolvedSymbols,s.data.graphics=K(this.graphics()),s.data.plotOffsets=this._plotOffsets),this.ownerSource()&&(s.ownerSource=this.ownerSource().id()),
t=0;t<this._metaInfo.inputs.length;t++)"bar_time"===this._metaInfo.inputs[t].type&&(i=this._metaInfo.inputs[t].id,(o=s.state.inputs[i])<0&&(n=this._rightOffsetToUnixTime(-o),s.state.inputs[i]=n&&n>=0?n:0));return this._isChildStudy&&de.patchChildStudyMetaInfoState(s),s},g.prototype._plotsForAlert=function(){var e=this,t=this._metaInfo,i=[pe.isLinePlot,pe.isShapesPlot,pe.isCharsPlot,pe.isArrowsPlot,pe.isOhlcPlot];return t.plots.map(function(e,t){return e.pinePlotIndex=t,e}).filter(function(e){return i.some(function(t){return t(e)})}).map(function(i){var o={id:i.id,type:i.type,pinePlotIndex:i.pinePlotIndex,offset:e.offset(i.id)};return t.styles&&void 0!==t.styles[i.id]&&(o.title=t.styles[i.id].title||""),i.target&&t.ohlcPlots&&t.ohlcPlots[i.target]&&(o.ohlcTitle=t.ohlcPlots[i.target].title),o})},g.prototype.isSavedInStudyTemplates=function(){for(var e=0;e<this._metaInfo.inputs.length;e++)if("bar_time"===this._metaInfo.inputs[e].type)return!1;return!0},g.prototype.restoreData=function(e){this._invalidateLastNonEmptyPlotRowCache(),this.m_data.restoreState(e),this._resolvedSymbols=e.symbols,this._graphics=e.graphics?G(e.graphics):Y(),this._postProcessGraphics(),this._plotOffsets=e.plotOffsets},g.prototype.restart=function(){this._restarting=!0,this.clearData(),n.enabled("stop_study_on_restart")&&this.stop(),setTimeout(this.start.bind(this),0)},g.prototype.stop=function(e){if(!0===e&&this._children)for(var t=0;t<this._children.length;++t)this._children[t].stop(!0);this._chartApi&&this._chartApi.connected()&&this._studyId&&this._chartApi.removeStudy(this._studyId,this._handler,this._isChildStudy),n.enabled("update_study_formatter_on_symbol_resolve")&&this._model.mainSeries().onSymbolResolved().unsubscribe(this,g.prototype._createFormatter),this._studyId=null,this.clearData(),this._unsubscribeExtendedHours(),this.recalculate()},g.prototype.symbolsResolved=function(){return this._symbolsResolved},g.prototype.resolvedSymbolInfoBySymbol=function(e){return this._resolvedSymbols&&e?this._resolvedSymbols[e]||null:null},g.prototype._resolveSymbol=function(e){var t=function(i,o){this._chartApi.resolveSymbol(this._makeNextSymbolId(),i,function(i){switch(i.method){case"symbol_resolved":this._resolvedSymbols[e]=i.params[1],this.invalidateTitleCache(!0),o.resolve(e);break;case"symbol_error":if("permission denied"===i.params[1]&&i.params[2])switch(i.params[2]){case TradingView.Series.PD_REASON_EXTENDED_HOURS:break;case TradingView.Series.PD_REASON_SYMBOL:if(i.params[3])return void t(i.params[3],o);break;default:return void t(i.params[2],o)}o.reject(e)}}.bind(this))}.bind(this),i=$.Deferred();return t(e,i),i.promise()},g.prototype._allSymbolsAreResolved=function(){var e,t,i,o,n=$.Deferred(),r=[];for(e=0;e<this._metaInfo.inputs.length;e++)"symbol"===this._metaInfo.inputs[e].type&&(t=this._metaInfo.inputs[e].id,i=this._properties.inputs[t].value(),this._resolvedSymbols[i]||(o=this._resolveSymbol(i),r.push(o)));return r.length>0?$.when.apply($,r).done(function(){0!==this._studyId&&this.stop(!0),this.start(!0),
n.resolve("All symbols are resolved now"),this._symbolsResolved.fire()}.bind(this)).fail(function(e){this._status=window.t("Invalid Symbol"),this.stop(!0),this._model.updateSource(this),n.reject("Invalid symbol, "+e)}.bind(this)):n.resolve("There are no symbols to resolve"),n.promise()},g.prototype._allInputsAreValid=function(){var e,t,i;for(e=0;e<this._metaInfo.inputs.length;e++)if("bar_time"===this._metaInfo.inputs[e].type&&(t=this._metaInfo.inputs[e].id,void 0===(i=this._properties.inputs[t].value())||null==i))return!1;return!0},g.prototype.sourceId=function(){return this._studyId},g.prototype.source=function(){return this._source||this._series},g.prototype.ownerSource=function(){return this._isChildStudy?this._source:W.prototype.ownerSource.call(this)},g.prototype.getAllOwnerSources=function(){for(var e=[],t=this.ownerSource();null!=t;)e.push(t),t=t.ownerSource();return e},g.prototype.isChildStudy=function(){return!!this._isChildStudy},g.prototype.setChild=function(e){e instanceof g&&e.source()===this&&(this._children||(this._children=[]),-1===this._children.indexOf(e)&&this._children.push(e))},g.prototype.unsetChild=function(e){if(e instanceof g&&e.source()===this&&this._children){var t=this._children.indexOf(e);~t&&this._children.splice(t,1)}},g.prototype.hasChildren=function(){return!(!this._children||!this._children.length)},g.prototype.getAllChildren=function(){var e,t,i,o;if(!Array.isArray(this._children))return[];for(e=this._children.slice(),t=0;t<e.length;++t)for(i=e[t].getAllChildren(),o=0;o<i.length;++o)~e.indexOf(i[o])||e.push(i[o]);return e},g.prototype._debugId=function(){var e=[];return this._studyId&&e.push(this._studyId),e.push(this._metaInfo.fullId),e.push(this._metaInfo.description),JSON.stringify({study:e})},g.prototype.isStarted=function(){return!!this._studyId},g.prototype.isRestarting=function(){return!!this._restarting},g.prototype.isVisible=function(){var e,t,i;if(!this.properties().visible.value())return!1;if(this._metaInfo.plots.length>0)return!0;for(e in this._metaInfo.graphics)for(t in this._metaInfo.graphics[e])if(i=this.properties().graphics[e][t],!i.visible||i.visible.value())return!0;return!!this._metaInfo.isTVScriptStrategy},g.prototype.start=function(e,t){var i,o=this._model.mainSeries();if(!o.isStarted())return void o.onCompleted().subscribe(this,function(){this.start(e,t)},!0);this._isChildStudy&&this._source.isHibernated()&&this._source.start(),i=!this._isChildStudy&&!this.hasChildren()&&!this.isVisible(),!this._chartApi||!this._chartApi.connected()||i&&!0!==t||this._allSymbolsAreResolved().done(function(i){this._startAfterSymbolsResolved(e,t)}.bind(this)).fail(function(e){me.logError("ERROR: "+this._debugId()+" start failed, "+e),delete this._restarting}.bind(this))},g.prototype._getStudyIdWithLatestVersion=function(){var e=de.cutDollarHash(this._metaInfo.id),t=e;return e.indexOf("@tv-scripting")>=0?t+="-101!":t+="-"+this._metaInfo.version,t},g.prototype._startAfterSymbolsResolved=function(e,t){var i,o;if(!this.isStarted()||this._restarting){if(this._isChildStudy){
if(!this._source.isStarted()||this._source.isRestarting())return void this._source.onStart.subscribe(this,this._startAfterSymbolsResolved,!0);de.setChildStudyMetaInfoPropertiesSourceId(this._metaInfo,this._source.sourceId(),this._properties)}if(this._studyId=g.makeNextStudyId(),delete this._restarting,this._allInputsAreValid()&&(this._inputs=this.inputs(),i=this._getStudyIdWithLatestVersion(),this._incrementTurnaround(),this._chartApi.createStudy(this._studyId,this._turnaround,this._isChildStudy?this._source.sourceId():this._series._seriesId,i,this._inputs,this._handler,this._isChildStudy),this._studyName=i,this._subscribeExtendedHours(),this.onStart.fire(this._studyId),!0===e&&this._children))for(o=0;o<this._children.length;++o)this._children[o].start(!0,t)}},g._nextSymbolId=0,g.prototype._makeNextSymbolId=function(){return"ss_"+ ++g._nextSymbolId},g._nextStudyId=0,g.makeNextStudyId=function(){return"st"+ ++g._nextStudyId},g.prototype._rightOffsetToUnixTime=function(e){var t;return this._series.bars().size()>=e&&(t=S(this._series.bars().lastIndex())-e,S(this._series.bars().valueAt(t))[TradingView.TIME_PLOT]),null},g.prototype.getSymbolString=function(e){return this._series&&this._series.extendedHours.value()?"="+JSON.stringify({symbol:e,session:"extended"}):e},g.prototype.inputsForGUI=function(){return this.inputs({symbolsForDisplay:!0,skipHiddenInputs:!0,skipFakeInputs:!1,fakeInputsForDisplay:!0,asObject:!1})},g.prototype.inputsForAlert=function(){var e=this.offset(),t=this.inputs();return e&&t.push(e),t},g.prototype.inputs=function(e){var t={symbolsForDisplay:!1,symbolsForChartApi:!0,skipHiddenInputs:!1,skipFakeInputs:!1,asObject:!0};return TradingView.merge(t,e),this._buildInputs(t)},g.prototype._buildInputs=function(e){var t,i;b(!!e,"options not set"),t={};try{t=this._prepareInputs(e)}catch(e){me.logWarn("Failed to prepare study inputs: "+e)}return e.asObject?(i={},Object.keys(t).forEach(function(e){null!=t[e]&&(i[e]=t[e])}),i):(i=[],Object.keys(t).forEach(function(e){null!=t[e]&&i.push(t[e])}),i)},g.prototype._prepareInputs=function(e){var t,i,o,r;for(b(!!e,"options not set"),t={},i=0;i<this._metaInfo.inputs.length;i++)o=this._metaInfo.inputs[i],o.isFake&&e.skipFakeInputs||o.isHidden&&e.skipHiddenInputs||"bool"===o.type&&e.skipHiddenInputs&&n.enabled("dont_show_boolean_study_arguments")||(r=this._prepareInput(o,e),t[o.id]=TradingView.clone(r));return t},g.prototype._prepareInput=function(e,t){var i=this._prepareInputValue(e,t);return!e.isFake||t.fakeInputsForDisplay?i:t.onlyAtomValues?i:{v:i,f:!0,t:e.type}},g.prototype._prepareInputValue=function(e,t){var i,o,n,r,s=e.id;return"symbol"===e.type?(i=this._properties.inputs[s].value(),t&&t.symbolsForDisplay?this._resolvedSymbols&&this._resolvedSymbols[i]&&(i=this._resolvedSymbols[i].exchange?this._resolvedSymbols[i].name+", "+this._resolvedSymbols[i].exchange:this._resolvedSymbols[i].name):(this._resolvedSymbols&&this._resolvedSymbols[i]&&(o=this._resolvedSymbols[i],i=o.ticker||o.full_name),t&&t.symbolsForChartApi&&(i=this.getSymbolString(i))),
i):"bar_time"===e.type?(n=this._properties.inputs[s].value(),n<0&&(r=this._rightOffsetToUnixTime(-n),n=r&&r>=0?r:n),n):this._metaInfo.isTVScript||this._metaInfo.pine?"text"===s?this._metaInfo.defaults.inputs.text:"pineId"===s?this._metaInfo.scriptIdPart:"pineVersion"===s?this._metaInfo.pine?this._metaInfo.pine.version:"-1":this._properties.inputs[s].value():this._properties.inputs[s].value()},g.prototype._rebindToSource=function(e,t){var i,o,n,r,s,a,l,c,h,u,d;if(this._isChildStudy){if(this._source.unsetChild(this),delete this._nonPriceParent,o=null,e===this._model.mainSeries()){for(n=this._model.studiesMetaData(),s=0;s<n.length;++s)if(this._metaInfo.id===n[s].id){r=n[s];break}if(!r)return void me.logError("Can not find "+this._metaInfo.id+" meta info");delete this._source,delete this._isChildStudy,delete this._ownerSource,this._metaInfo=r.state(!0),i=this._series._seriesId,o=ee.REBIND_STUDY_CHILD_TO_STANDALONE}else{if(!(e instanceof g))return me.logError("Unable to rebind study to source of this type"),!1;this._ownerSource=e,this._source=e,i=this._source.sourceId(),this._source.setChild(this),this._source.isHibernated()&&this._source.start()}this._incrementTurnaround(),this._chartApi.rebindStudy(this._studyId,this._turnaround,i,this._studyName,t,this._handler,o)}else{if(!(e instanceof g))return me.logError("Unable to rebind study to source of this type"),!1;if(a=e.isHibernated(),a&&e.start(),l=!1,this._canCreateStudyWithRebindType(ee.REBIND_STUDY_STANDALONE_TO_CHILD)&&(this._incrementTurnaround(),l=this._chartApi.rebindStudy(this._studyId,this._turnaround,e.sourceId(),this._studyName,t,this._handler,ee.REBIND_STUDY_STANDALONE_TO_CHILD)),!l)return a&&e.stop(),!1;this._metaInfo=TradingView.clone(this._metaInfo),this._isChildStudy=!0,this._ownerSource=e,this._source=e,this._source.setChild(this),this._childStudyByRebind.fire()}return c=this.m_priceScale,h=e.priceScale(),c!==h&&(u=this._model.paneForSource(this),d=this._model.paneForSource(e),u===d&&(~c.dataSources().indexOf(this)&&c.removeDataSource(this),h.addDataSource(this),this.setPriceScale(h))),!0},g.prototype.childStudyByRebind=function(){return this._childStudyByRebind},g.prototype._changeInputsImpl=function(e,t){var i,o,n,r,s=this.source(),a=this._properties.inputs&&this._properties.inputs.state(),l=de.getSourceIdByInputs(this._metaInfo.inputs,a),c=!0;if(l)if("high"===l||"open"===l||"low"===l||"close"===l||"hl2"===l||"ohl3"===l||"ohlc4"===l)s=this._model.mainSeries();else for(i=this._model.dataSources(),o=0;o<i.length;++o)if(i[o]instanceof g&&i[o].sourceId()===l){s=i[o];break}if(s!==this.source()){if(!this._rebindToSource(s,e)&&a){for(n=null,r=null,o=0;o<t.length;++o)if(t[o]!==e[o]&&0===e[o].indexOf(l)){n=this._properties.inputs[a[o].id],r=t[o],c=!1;break}n&&n.setValue(r)}}else this._incrementTurnaround(),this._chartApi.modifyStudy(this._studyId,this._turnaround,e,this._handler);c&&(this._studyModified=c)},g.prototype._incrementTurnaround=function(){this._turnaround="st"+ ++this._turnaroundCounter},g.prototype._tryChangeInputs=function(){
var e=TradingView.clone(this._inputs);this.isStarted()&&this._chartApi.connected()?this._allInputsAreValid()?this._allSymbolsAreResolved().done(function(){var t=this.inputs();JSON.stringify(t)!==JSON.stringify(this._inputs)&&(this._changeInputsImpl(t,e),this._inputs=t)}.bind(this)).fail(function(e){me.logError("ERROR: "+this._debugId()+" _tryChangeInputs: cannot modify study, "+e)}.bind(this)):this.stop():(this.stop(!0),this.start(!0)),this._tagsChanged.fire(),this._titleCache={}},g.prototype.testInputValue=function(e,t){var i,o;return!de.canBeChild(this._metaInfo)||!de.isSourceInput(e)||(!(i=this._properties.inputs&&this._properties.inputs[e.id])||(o=g.getInputRebindType(e,i.value(),t),!!this._canCreateStudyWithRebindType(o)))},g.prototype._canCreateStudyWithRebindType=function(e){return e!==ee.REBIND_STUDY_STANDALONE_TO_CHILD||this._chartApi.isCanCreateStudy(!0)},g.prototype.changeStyles=function(){var e=null!=this._metaInfo.inputs.filter(function(e){return"symbol"===e.type})[0];!this.isStarted()&&!e||this._restarting||(this._inputs?this._tryChangeInputs():this._chartApi&&this._chartApi.connected()&&this.restart(),this.hasBarColorer()&&this._model.mainSeries().invalidateBarStylesCache(),e&&this.invalidateBarStylesCache(),this.createViews(),this.recalculate(!0),this.updateAllViews())},g.prototype._isModifiedStudyInputs=function(e){if(void 0===this._oldStudyInputs)return this._oldStudyInputs=e,!0;var t=Object.keys(this._oldStudyInputs);return b(t.length===Object.keys(e).length,"keys quantity should be equal"),t.forEach(function(t){b(e.hasOwnProperty(t),"key '"+t+"' should existing in studyInputs"),this._oldStudyInputs[t]!==e[t]&&(this._oldStudyInputs=e)},this),this._oldStudyInputs===e},g.prototype.visibleChanged=function(){this._series instanceof TradingView.Series&&this._series.invalidateBarColorerCache()},g.prototype.invalidateBarStylesCache=function(){this.m_data.each(function(e,t){t[TradingView.STYLE_PLOT]=null})},g.prototype.processHibernate=function(){this.isHibernateAllowed()&&(!this._studyId&&this.isVisible()&&this.start(),this._studyId&&!this.isVisible()&&this.stop())},g.prototype.isHibernated=function(){return!this.isVisible()&&!this._studyId},g.prototype.isHibernateAllowed=function(){return!this._isChildStudy&&!this.hasChildren()},g.prototype.lastPriceLabelFixedCoordinate=function(e){return this._priceAxisViewsCache[e]._fixedCoordinate},g.prototype.priceLabelText=function(e){var t,i,o,n;return 1===this._simplePlotsCount?this._metaInfo.shortDescription:(t=this._metaInfo.styles,i=this._metaInfo.ohlcPlots,t&&t[e]&&(o=t[e]),i&&i[e]&&(o=i[e]),n=o.title,this._metaInfo.is_price_study?this._metaInfo.shortDescription+":"+n:n)},g.prototype.createPlotLabels=function(e){for(var t=0;t<e.length;t++)this._paneViews.push(new H(this._model,this,e[t],"priceLabelText","showStudyPlotLabels"))},g.prototype.createViews=function(){var e,t,i,o,n,r,a,l,c;if(this._priceAxisViewsBase=[],this._paneViews=[],e={},this._priceAxisViewsCache={},t=[],
this.metaInfo().plots)for(i=0;i<this.metaInfo().plots.length;i++)if(!(this.isSelfColorerPlot(i)||this.isTextColorerPlot(i)||this.isBarColorerPlot(i)||this.isOHLCColorerPlot(i)))if(o=this.metaInfo().plots[i].id,this.isBgColorerPlot(i))this._paneViews.push(new E(this,this._series,this._model,o));else if(this.isPlotShapesPlot(i))this._paneViews.push(new D(this,this._series,this._model,o));else if(this.isPlotCharsPlot(i))this._paneViews.push(new V(this,this._series,this._model,o));else if(this.isPlotArrowsPlot(i))this._paneViews.push(new O(this,this._series,this._model,o));else if(this.isOHLCSeriesPlot(i)){if(n=this.metaInfo().plots[i].target,e[n])continue;e[n]=n,this.isOHLCBarsPlot(i)?this._paneViews.push(new R(this,this._series,this._model,n)):this.isOHLCCandlesPlot(i)&&this._paneViews.push(new B(this,this._series,this._model,n)),r=new M(this,{plotIndex:n}),this._priceAxisViewsCache[n]=r,this._priceAxisViewsBase.push(r),t.push(n)}else r=new M(this,{plotIndex:o}),this._priceAxisViewsCache[o]=r,this._priceAxisViewsBase.push(r),this._paneViews.push(new A(this,this._series,this._model,o)),this.properties().styles[o].trackPrice.value()&&this._paneViews.push(new s(this,this._series,this._model,o)),t.push(o);if(this._properties.bands)for(i=0;i<this._properties.bands.childCount();i++)this._properties.bands[i].visible.value()&&this._paneViews.push(new C(this._properties.bands[i],this));if(this._properties.bandsBackground&&this._paneViews.push(new L(this)),a=this._paneViews,X(this).then(function(e){for(var t=0;t<e.length;t++)a.push(e[t])}),this._properties.areaBackground&&this._paneViews.push(new F(this)),this._properties.filledAreas&&this._metaInfo.filledAreas)for(i=0;i<this._metaInfo.filledAreas.length;++i)l=this._metaInfo.filledAreas[i],c=this._properties.filledAreasStyle[l.id],l.type===de.FilledArea.TYPE_PLOTS||l.palette?this._paneViews.push(new N(this,l,c)):l.type===de.FilledArea.TYPE_HLINES?this._paneViews.push(new I(this,l,c)):me.logWarn("Unsupported filledArea type: "+l.type);this.createPlotLabels(t),this._dataWindowView||(this._dataWindowView=new j(this,this._model)),this._statusView||(this._statusView=new U(this,this._model.properties())),this._priceAxisViews=[].concat(this._priceAxisViewsBase,this._hlinesPriceAsisViews,this._horizlinesPriceAsisViews)},g.prototype.recalculate=function(e){var t=this._model.paneForSource(this);this._model.recalculatePane(t,e),this._model.updateSource(this)},g.prototype.data=function(){return this.m_data},g.prototype.metaInfo=function(){return this._metaInfo},g.prototype.status=function(){return this._status},g.prototype.title=function(e,t,i){var o,n;return i=void 0===i?!this._showStudyArgumentsProperty.value():i,o=JSON.stringify([e,t,i]),this._titleCache[o]?this._titleCache[o]:(n=this._title(e,t,i),this._titleCache[o]=n,n)},g.prototype._title=function(e,t,i){var o,n,r,s,a,l,c,h,u,d,p,_,f
;if(o=e?this._metaInfo.shortDescription||this._properties.shortDescription&&this._properties.shortDescription.value()||"Study":this._metaInfo.description||this._properties.description&&this._properties.description.value()||"Study",t=t||{},o=window.t(o),!i&&(n=this.inputsForGUI()||[],n.length>0)){if(r={},this._isChildStudy)for(s=0;s<this._metaInfo.inputs.length;++s)if(a=this._metaInfo.inputs[s],de.isSourceInput(a)){l=a.id,c=this._properties.inputs[l].value(),c.indexOf("$")>=0&&this._source&&(h=this._source.metaInfo(),u=this._source.title(e,null,!0),1===h.plots.length?r[c]=u:(d=c.split("$")[1],p=h.plots[d].id,_=h.styles&&h.styles[p]&&h.styles[p].title||p,r[c]=u+":"+_));break}f=this,n=n.map(function(e){var i=isNumber(e)?f._numericFormatter.format(e):r&&r[e]||e;return t[i]&&(i=t[i]),i}),o+=" ("+n.join(", ")+")"}return o},g.prototype.invalidateTitleCache=function(e){if(this._titleCache={},!0===e&&this._children)for(var t=0;t<this._children.length;++t)this._children[t].invalidateTitleCache(e)},g.prototype.graphics=function(){return this._graphics},g.prototype.turnaround=function(e){return!0===e?this.source().turnaround(!0)+"_"+this._turnaround:this._turnaround},g.prototype._checkTurnaround=function(e){return e===this._turnaround||e===this._model.mainSeries().turnaround()||e===this.turnaround(!0)},g.prototype.onData=function(e){var t,i,o,n,r,s=this;switch(e.method){case"study_loading":this._status=window.t("loading..."),this._failed=!1,this._statusView.update(),this._model.updateSource(this),s._loadingStartTime=(new Date).getTime();break;case"study_error":delete this._loadingStartTime,this._failed=!0,this.clearData(),this._status="","string"==typeof e.params[2]&&(t=e.params[2],i=t.split(":",2)[0],i.length>0&&(this._status=$.t(i))),this._statusView.update(),this._model.updateSource(this);break;case"study_completed":if(!this._checkTurnaround(e.params[1]))return;o="chartSession:"+s._chartApi._sessionid,n=(new Date).getTime()-this._loadingStartTime,me.logDebug(o+", Study "+this._metaInfo.description+" loading took "+n+" ms"),delete this._loadingStartTime,this._status="",this._statusView.update(),r=this._model.paneForSource(this),this._model.recalculatePane(r),this._updateSources(),this._model.invalidate(new Q(Q.FULL_UPDATE));break;case"study_deleted":break;case"data_update":if(e.params.customId!==this.sourceId()||!this._checkTurnaround(e.params.turnaround))return;b(!!e.params.nonseries,"data.params.nonseries is missing"),this._onDataUpdate(e.params.plots,e.params.nonseries)}},g.prototype._onDataUpdate=function(e,t){this._studyModified&&(this.clearData(),this._studyModified=!1),w(t.d).then(function(i){"nochange"!==t.indexes&&this._processPlotOffsets(i),this.transformData(e),this._mergeData(e),null!==i&&(i.indexes_replace?(b("nochange"!==t.indexes),this._graphics.replaceIndexesTo(t.indexes)):("nochange"!==t.indexes&&this._graphics.replaceIndexesTo(t.indexes),void 0!==i.graphicsCmds&&this._graphics.processCommands(i.graphicsCmds,this._metaInfo.graphics))),this._onDataUpdated(e,i,t.indexes)}.bind(this))},
g.prototype._onDataUpdated=function(e,t,i){this.hasBarColorer()&&e.length>0&&this._model.mainSeries().invalidateBarStylesCache(e[0].index),null!==t&&this._postProcessGraphics();var o=this._model.paneForSource(this);this._model.recalculatePane(o),this._updateSources()},g.prototype.transformData=function(e){},g.prototype.moveData=function(e){this._invalidateLastNonEmptyPlotRowCache(),this.m_data.move(e)},g.prototype.replaceData=function(e,t,i){this._invalidateLastNonEmptyPlotRowCache(),this.m_data.remove(e+1),this.m_data.addTail(i,t)},g.prototype._updateSources=function(){this._model.updateSource(this),this.hasBarColorer()&&this._model.updateSource(this._model.mainSeries())},g.processPlotOffsets=function(e,t){t&&t.indexes_replace||(e._plotOffsets=t&&t.offsets||{})},g.prototype._processPlotOffsets=function(e){g.processPlotOffsets(this,e)},g.prototype._mergeData=function(e){this._invalidateLastNonEmptyPlotRowCache(),this.m_data.merge(e)},g.prototype._postProcessGraphics=function(){this._priceAxisViews=[].concat(this._priceAxisViewsBase,J(this))},g.prototype._getNonPriceParent=function(){var e,t;if(this._nonPriceParent)return this._nonPriceParent;for(e=this.source();e instanceof g;){if(t=e.metaInfo(),!t.is_price_study||"Compare@tv-basicstudies"===t.id)return this._nonPriceParent=e,e;e=e.source()}},g.prototype.firstValue=function(e){var t,i,o,n,r,s;return!this._isChildStudy&&"Compare@tv-basicstudies"===this._metaInfo.id||!this._metaInfo.is_price_study?null===(t=this._model.timeScale().visibleBars())?null:(i=t.firstBar(),o=t.lastBar(),0===this.data().size()?null:(r=this,this.data().range(i,o).each(function(t,i){var o,s,a;for(o=1;o<i.length;++o)if(void 0!==i[o-1]&&null!==i[o-1]&&!r.isSelfColorerPlot(o-1)&&(s=r._metaInfo.plots[o-1].id,a=r.properties().styles[s],a.visible&&a.visible.value()&&!(e&&Math.abs(i[o])<1e-10||void 0===i[o]||null===i[o]||n)))return n=i[o],!0}),this._nonPriceFirstValue=n,n)):this._isChildStudy&&(s=this._getNonPriceParent())&&this.priceScale()===s.priceScale()?void 0!==s._nonPriceFirstValue?s._nonPriceFirstValue:s.firstValue():this._series.firstValue()},g.offset=function(e,t){var i=0;return e._plotOffsets&&void 0!==e._plotOffsets[t]&&(i+=e._plotOffsets[t]),void 0!==e._plotOffsetsMetaInfoOverride[t]?i+=e._plotOffsetsMetaInfoOverride[t]:e.properties().offsets&&void 0!==e.properties().offsets[t]&&(i+=e.properties().offsets[t].val.value()),e.properties().offset&&(i+=e.properties().offset.val.value()),i},g.prototype.offset=function(e){return g.offset(this,e)},g.prototype.priceRange=function(e,t){var i,o,n,s,a,l,c,h,u,d,p,_,f,m,g,y,v,b,S;if(!TradingView.isInteger(e))return void me.logDebug("priceRange: incorrect startBar");if(!TradingView.isInteger(t))return void me.logDebug("priceRange: incorrect endBar");if(0===this.m_data.size())return null;if(i=null,o=this,n=o._metaInfo,0===n.plots.length)return null;for(a=[],c=0;c<n.plots.length;++c)if(!(o.isSelfColorerPlot(c)||o.isTextColorerPlot(c)||o.isBarColorerPlot(c)||o.isBgColorerPlot(c)||o.isOHLCColorerPlot(c))&&(h=n.plots[c].id,
o.isOHLCSeriesPlot(c)?(d=n.plots[c].target,u=o.properties().ohlcPlots[d]):u=o.properties().styles[h],u.visible.value()&&(l=null,u.location&&(l=u.location.value()),s||(p=[ue.Absolute,ue.Top,ue.Bottom].indexOf(l)<0,_=o.isPlotShapesPlot(c)||o.isPlotCharsPlot(c),s=_&&p||o.isPlotArrowsPlot(c)),o.isLinePlot(c)||(o.isPlotShapesPlot(c)||o.isPlotCharsPlot(c))&&u.location.value()===ue.Absolute||o.isOHLCSeriesPlot(c)))){if(f={index:c+1,offset:o.offset(h)},m=o.properties().styles[h].plottype.value(),!o.properties().skipHistogramBaseOnAutoScale&&[_e.Histogram,_e.Columns,_e.Area].indexOf(m)>=0){if(g=o.properties().styles[h].histogramBase.value(),!isNumber(g))continue;f.baseValue=g}a.push(f)}if(y=o.m_data.minMaxOnRange2(e,t,a),s&&(a=[{index:TradingView.LOW_PLOT,offset:0},{index:TradingView.HIGH_PLOT,offset:0}],v=o.series().data().bars().minMaxOnRange2(e,t,a),y=he(y,v)),null!==y&&(i=new r(y.min,y.max)),n.bands)for(c=0;c<n.bands.length;c++)if(o.properties().bands[c].visible.value()){if(g=o.properties().bands[c].value.value(),!isNumber(g))continue;i?i.apply(g,g):i=new r(g,g)}return i&&i.minValue()===i.maxValue()&&(b=.005*i.minValue(),i=new r(i.minValue()-b,i.maxValue()+b)),S=this.priceScale(),S&&S.isLog()&&i?new r(o.priceScale().priceToLogical(i.minValue()),o.priceScale().priceToLogical(i.maxValue())):i},g.prototype.paneViews=function(e){return this.properties().visible.value()?this._paneViews:null},g.prototype.dataWindowView=function(){return this._dataWindowView},g.prototype.statusView=function(){return this._statusView},g.prototype.priceAxisViews=function(e,t){return this._model.paneForSource(this)===e&&t===this.priceScale()&&(this._showLastValueOnPriceScale()||this.properties().oldShowLastValue&&this.properties().oldShowLastValue.value())?this._priceAxisViews:null},g.prototype._showLastValueOnPriceScale=function(){return this._model.properties().scalesProperties.showStudyLastValue.value()},g.prototype.isLinePlot=function(e){var t=this._metaInfo.plots[e];return pe.isLinePlot(t)},g.isSelfColorerPlot=function(e,t){var i=e._metaInfo.plots[t];return pe.isColorerPlot(i)},g.prototype.isSelfColorerPlot=function(e){return g.isSelfColorerPlot(this,e)},g.prototype.isTextColorerPlot=function(e){var t=this._metaInfo.plots[e];return pe.isTextColorerPlot(t)},g.prototype.isBarColorerPlot=function(e){var t=this._metaInfo.plots[e];return pe.isBarColorerPlot(t)},g.prototype.isBgColorerPlot=function(e){var t=this._metaInfo.plots[e];return pe.isBgColorerPlot(t)},g.prototype.isPlotShapesPlot=function(e){var t=this._metaInfo.plots[e];return pe.isShapesPlot(t)},g.prototype.isPlotCharsPlot=function(e){var t=this._metaInfo.plots[e];return pe.isCharsPlot(t)},g.prototype.isPlotArrowsPlot=function(e){var t=this._metaInfo.plots[e];return pe.isArrowsPlot(t)},g.prototype.isOHLCBarsPlot=function(e){var t=this._metaInfo.plots[e].target,i=this.metaInfo().defaults.ohlcPlots[t];return i&&this.isOHLCSeriesPlot(e)&&pe.isOhlcPlotStyleBars(i)},g.prototype.isOHLCCandlesPlot=function(e){var t=this._metaInfo.plots[e].target,i=this.metaInfo().defaults.ohlcPlots[t]
;return i&&this.isOHLCSeriesPlot(e)&&pe.isOhlcPlotStyleCandles(i)},g.prototype.isOHLCSeriesPlot=function(e){var t=this._metaInfo.plots[e];return pe.isOhlcPlot(t)},g.prototype.isOHLCOpenPlot=function(e){var t=this._metaInfo.plots[e];return pe.isOhlcOpenPlot(t)},g.prototype.isOHLCHighPlot=function(e){var t=this._metaInfo.plots[e];return pe.isOhlcHighPlot(t)},g.prototype.isOHLCLowPlot=function(e){var t=this._metaInfo.plots[e];return pe.isOhlcLowPlot(t)},g.prototype.isOHLCClosePlot=function(e){var t=this._metaInfo.plots[e];return pe.isOhlcClosePlot(t)},g.prototype.isOHLCColorerPlot=function(e){var t=this._metaInfo.plots[e];return pe.isOhlcColorerPlot(t)},g.prototype.isDataOffsetPlot=function(e){var t=this._metaInfo.plots[e];return pe.isDataOffsetPlot(t)},g.prototype.hasBarColorer=function(){for(var e=0;e<this._metaInfo.plots.length;++e)if(this.isBarColorerPlot(e))return!0;return!1},g.prototype.barColorer=function(){var e,t,i=null;for(e=0;e<this._metaInfo.plots.length;++e)this.isBarColorerPlot(e)&&(t=new T(this,e),null==i?i=t:i.pushBackBarColorer(t));if(null==i)throw Error("Cannot create BarColorer: study doesn't have a bar_colorer plot!");return i},g.prototype.base=function(){return"Volume"===this._metaInfo.id?1:0},g.prototype._createFormatter=function(){var e,t,i;"default"===this.properties().precision.value()?this.metaInfo().defaults&&(e=parseInt(this.metaInfo().defaults.precision)):e=parseInt(this.properties().precision.value()),isFinite(e)||(e=-1!==["Volume@tv-basicstudies","VbPVisible@tv-volumebyprice","VbPSessions@tv-volumebyprice"].indexOf(this._metaInfo.id)?0:1e4),t=this.series().symbolInfo(),0===e?(i=0,t&&t.volume_precision&&(i=t.volume_precision),this._formatter=new re(i)):this._formatter=new ne(Math.pow(10,e)),this.priceScale()&&this.priceScale().updateFormatter()},g.prototype.formatter=function(){return this._formatter},g.prototype.nearestIndex=function(e,t){if(!TradingView.isInteger(e))return void me.logDebug("nearestIndex: incorrect logicalPoint");var i=this._series.data().bars().search(e,t);return null!==i?i.index:void 0},g.prototype._lastNonEmptyPlotRow=function(e){var t,i;return TradingView.isInteger(e)?void 0!==this._lastNonEmptyPlotRowCache[e]?this._lastNonEmptyPlotRowCache[e]:(t=1e3,null===(i=this.data().findLast(function(t,i){return void 0!==i[e]},t))?null:(this._lastNonEmptyPlotRowCache[e]=i,this._lastNonEmptyPlotRowCache[e])):(me.logDebug("_lastNonEmptyPlotRow: incorrect plotIndex"),null)},g.prototype.updateAllViews=function(){var e;for(e=0;e<this._paneViews.length;e++)this._paneViews[e].update();for(this._dataWindowView.update(),this._statusView.update(),e=0;e<this._priceAxisViews.length;e++)this._priceAxisViews[e].update()},g.prototype.tags=function(){return!this._metaInfo||!this._metaInfo.description||this._metaInfo.isTVScriptStub||this._metaInfo.is_hidden_study||this._metaInfo.isTVScript&&"tv-scripting"===this._metaInfo.productId?[]:[this._metaInfo.description]},g.isPointsBasedStudy=function(e){switch(e){case"VbPFixed@tv-volumebyprice":case"mtp_tsanalysis@mtp-mtpredictor":
case"mtp_riskreward@mtp-mtpredictor":case"mtp_decisionpoint@mtp-mtpredictor":case"mtp_ew_main@mtp-mtpredictor":case"mtp_ew_major@mtp-mtpredictor":case"mtp_ew_minor@mtp-mtpredictor":case"mtp_wpt_down1ora@mtp-mtpredictor":case"mtp_wpt_down2orb@mtp-mtpredictor":case"mtp_wpt_down3@mtp-mtpredictor":case"mtp_wpt_down4@mtp-mtpredictor":case"mtp_wpt_down5@mtp-mtpredictor":case"mtp_wpt_downc@mtp-mtpredictor":case"mtp_wpt_up1ora@mtp-mtpredictor":case"mtp_wpt_up2orb@mtp-mtpredictor":case"mtp_wpt_up3@mtp-mtpredictor":case"mtp_wpt_up4@mtp-mtpredictor":case"mtp_wpt_up5@mtp-mtpredictor":case"mtp_wpt_upc@mtp-mtpredictor":return!0;default:return!1}},g.lineToolNameForPointsBasedStudy=function(e){switch(e){case"VbPFixed@tv-volumebyprice":return"LineToolVbPFixed";case"RegressionTrend@tv-basicstudies":return"LineToolRegressionTrend";case"mtp_tsanalysis@mtp-mtpredictor":return"LineStudyMtpAnalysis";case"mtp_riskreward@mtp-mtpredictor":return"LineStudyMtpRiskReward";case"mtp_decisionpoint@mtp-mtpredictor":return"LineStudyMtpDecisionPoint";case"mtp_ew_main@mtp-mtpredictor":return"LineStudyMtpElliotWaveMain";case"mtp_ew_major@mtp-mtpredictor":return"LineStudyMtpElliotWaveMajor";case"mtp_ew_minor@mtp-mtpredictor":return"LineStudyMtpElliotWaveMinor";case"mtp_wpt_down1ora@mtp-mtpredictor":return"LineStudyMtpDownWave1OrA";case"mtp_wpt_down2orb@mtp-mtpredictor":return"LineStudyMtpDownWave2OrB";case"mtp_wpt_down3@mtp-mtpredictor":return"LineStudyMtpDownWave3";case"mtp_wpt_down4@mtp-mtpredictor":return"LineStudyMtpDownWave4";case"mtp_wpt_down5@mtp-mtpredictor":return"LineStudyMtpDownWave5";case"mtp_wpt_downc@mtp-mtpredictor":return"LineStudyMtpDownWaveC";case"mtp_wpt_up1ora@mtp-mtpredictor":return"LineStudyMtpUpWave1OrA";case"mtp_wpt_up2orb@mtp-mtpredictor":return"LineStudyMtpUpWave2OrB";case"mtp_wpt_up3@mtp-mtpredictor":return"LineStudyMtpUpWave3";case"mtp_wpt_up4@mtp-mtpredictor":return"LineStudyMtpUpWave4";case"mtp_wpt_up5@mtp-mtpredictor":return"LineStudyMtpUpWave5";case"mtp_wpt_upc@mtp-mtpredictor":return"LineStudyMtpUpWaveC";default:throw Error("There is no line tool name, associated with study id "+e)}},g.prototype.onExtendedHoursChanged=function(){this.restart()},g.prototype.hasSymbolInputs=function(){for(var e=this._metaInfo.inputs.length;e--;)if("symbol"===this._metaInfo.inputs[e].type)return!0;return!1},g.prototype._subscribeExtendedHours=function(){!this._isSubscribedToExtendedHours&&this.hasSymbolInputs()&&(this._series.extendedHours.listeners().subscribe(this,this.onExtendedHoursChanged),this._isSubscribedToExtendedHours=!0)},g.prototype._unsubscribeExtendedHours=function(){this._isSubscribedToExtendedHours&&(this._series.extendedHours.listeners().unsubscribe(this,this.onExtendedHoursChanged),delete this._isSubscribedToExtendedHours)},g.prototype.removeByRemoveAllStudies=function(){return!0},g.prototype.canHaveChildren=function(){return void 0===this._canHaveChildren&&(this._canHaveChildren=!!de.canHaveChildren(this._metaInfo)),this._canHaveChildren},g.getInputRebindType=function(e,t,i){var o=de.isSourceInput(e)
;return o&&!~t.indexOf("$")&&~i.indexOf("$")?ee.REBIND_STUDY_STANDALONE_TO_CHILD:o&&~t.indexOf("$")&&!~i.indexOf("$")?ee.REBIND_STUDY_CHILD_TO_STANDALONE:0},g.prototype.getPlotFields=function(){return this._plotFields},g.prototype.getMinFirstBarIndexForPlot=function(e){var t,i=y(this._properties.styles,e)||y(this._properties.ohlcPlots,e)||y(this._properties.filledAreasStyle,e);return null===i?-1/0:(t=this.data().lastIndex(),null===t?-1/0:t-i+1)},g.prototype.getInputsPropertyPage=function(){return fe.StudyInputsPropertyPage},g.prototype.getStylesPropertyPage=function(){return fe.StudyStylesPropertyPage},g.prototype.getDisplayPropertyPage=function(){return fe.StudyDisplayPropertyPage},g.prototype._getTelemetryObjectName=function(){return"study"},g.prototype._getTelemetryAdditionalData=function(){var e="";return this._metaInfo.pine&&this._metaInfo.pine.version&&this._metaInfo.shortId.indexOf("USER")>=0&&(e="_v"+this._metaInfo.pine.version),{symbol:this.series().actualSymbol(),resolution:this.series().interval(),study:this._metaInfo.shortId+e}},g.prototype._sendTelemetryReport=function(e,t,i){void 0===i&&(i=this._getTelemetryAdditionalData());var o=Object.assign(t,{additional:i});telemetry.sendChartReport(e,o)},g.prototype._sendTelemetryCounter=function(e,t){this._sendTelemetryReport(e,{count:1},t)},g.prototype._sendTelemetryTiming=function(e,t,i){this._sendTelemetryReport(e,{value:t},i)},e.exports={Study:g,prepareStudyProperties:l,prepareStudyPropertiesForLoadChart:h,prepareStudyPropsStateForLoadChart:p}}).call(t,i(12),i(8),i(4),i(58).PriceRange)},function(e,t,i){"use strict";(function(t){var o=i(78),n=1e-10,r=function(){function e(e,t,i,o,n){var r,s=n,a=0;if(isNaN(e.get(t-1)))return{index:NaN,value:NaN};for(r=0;r<t;++r)o(e.get(r),s)&&(a=r,s=e.get(r));return{index:a,value:s}}function r(e,t){return 100*e/t}function s(e,t,i,o,n){var r,s,a;this._areaRight=e,this._areaLeft=t,this._pivotType=i,this._series=o,this._currentIndex=n.new_var(0),this._currentValue=n.new_var(NaN),this._pivotIndex=n.new_var(-1),this._index=w.n(n),this._isNewBar=n.symbol.isNewBar,r=this._currentIndex.get(1),s=this._currentValue.get(1),a=this._pivotIndex.get(1),this._index>1&&(this._currentIndex.set(r),this._currentValue.set(s),this._pivotIndex.set(a))}function a(e,t,i){var o,n,r,a,l;this._deviation=e,o=i.new_var(w.high(i)),n=i.new_var(w.low(i)),o.get(2*t+1),n.get(2*t+1),this._pivotHigh=new s(t,t,s.HIGH,o,i),this._pivotLow=new s(t,t,s.LOW,n,i),this._lastVal=i.new_var(NaN),this._lastIndex=i.new_var(-1),this._lastType=i.new_var(),this._index=w.n(i),this._isNewBar=i.symbol.isNewBar,this._isBarClosed=i.symbol.isBarClosed,r=this._lastIndex.get(1),a=this._lastVal.get(1),l=this._lastType.get(1),this._index>1&&this.addPivot(r,a,l),this.processPivot(this._pivotHigh),this.processPivot(this._pivotLow)}function l(e){this.symbol=e,this.vars=[],this.vars_index=0,this.ctx=[],this.ctx_index=0}function c(e){this.mindepth=0,this.original=NaN,this.modified=!1,this.symbol=e}function h(e,t){this.timezone=e||"America/New_York",this.session=t||"0000-0000"}
function u(e,t,i,o,n,r){this.periodBase=i,this.tickerid=e,this.period=t,this.index=-1,this.time=NaN,this.open=NaN,this.high=NaN,this.low=NaN,this.close=NaN,this.volume=NaN,this.updatetime=NaN,this.isNewBar=!1,this.isBarClosed=!1,this.session=new S.Session,this.other_sessions={},this.script=o,this.ticker=u.parseTicker(e);var s=u.parsePeriod(t);this.resolution=s.resolution,this.interval=s.interval,this.bb_cache={},this.minTick=n,this.periodForInitialRange=r}function d(e,t,i,o,n,r,s,a,c){this.body=n,this.symbols=[],this.runner=o,this.inputCallback=s,this.out=r,this.nonseriesOut=c,this.ctx=new l(this.add_sym(e,t,i,a)),this.init()}function p(e){this.symbols=[],this.barsets=[],this.subscription=[],this.host=e,this.isRecalculated=!1,this.start()}function _(e){p.feed=e}function f(e){this.runner=new p(e)}function m(e,t){this.info=e,this.bars=t||[],this.isBarClosed=!0}function g(e,t){this.period=e,this.generateEmptyBars=!!t}function y(){}var v="undefined"!=typeof window?window:t,b=v.PineJsCalendar?v.PineJsCalendar:i(34),S=i(44),w={};return w.max_series_size=10001,w.n=function(e){return e.symbol.index+1},w.nz=function(e,t){return t=t||0,isFinite(e)?e:t},w.na=function(e){return 0===arguments.length?NaN:isNaN(e)?1:0},w.isZero=function(e){return Math.abs(e)<=1e-10},w.toBool=function(e){return isFinite(e)&&!w.isZero(e)},w.eq=function(e,t){return w.isZero(e-t)},w.neq=function(e,t){return!w.eq(e,t)},w.ge=function(e,t){return w.isZero(e-t)||e>t},w.gt=function(e,t){return!w.isZero(e-t)&&e>t},w.lt=function(e,t){return!w.isZero(e-t)&&e<t},w.le=function(e,t){return w.isZero(e-t)||e<t},w.and=function(e,t){return isNaN(e)||isNaN(t)?NaN:w.isZero(e)||w.isZero(t)?0:1},w.or=function(e,t){return isNaN(e)||isNaN(t)?NaN:w.isZero(e)&&w.isZero(t)?0:1},w.not=function(e){return isNaN(e)?NaN:w.isZero(e)?1:0},w.greaterOrEqual=function(e,t){return t-e<n},w.lessOrEqual=function(e,t){return e-t<n},w.equal=function(e,t){return Math.abs(e-t)<n},w.greater=function(e,t){return e-t>n},w.less=function(e,t){return t-e>n},w.max=Math.max,w.min=Math.min,w.pow=Math.pow,w.abs=Math.abs,w.log=Math.log,w.log10=function(e){return Math.log(e)/Math.LN10},w.sqrt=Math.sqrt,w.sign=function(e){return isNaN(e)?NaN:w.isZero(e)?0:e>0?1:-1},w.exp=Math.exp,w.sin=Math.sin,w.cos=Math.cos,w.tan=Math.tan,w.asin=Math.asin,w.acos=Math.acos,w.atan=Math.atan,w.floor=Math.floor,w.ceil=Math.ceil,w.round=Math.round,w.avg=function(e,t,i,o,n,r){var s,a;if(2===arguments.length)return(e+t)/2;for(s=0,a=0;a<arguments.length;a++)s+=arguments[a];return s/arguments.length},w.open=function(e){return e.symbol.open},w.high=function(e){return e.symbol.high},w.low=function(e){return e.symbol.low},w.close=function(e){return e.symbol.close},w.hl2=function(e){return(e.symbol.high+e.symbol.low)/2},w.hlc3=function(e){return(e.symbol.high+e.symbol.low+e.symbol.close)/3},w.ohlc4=function(e){return(e.symbol.open+e.symbol.high+e.symbol.low+e.symbol.close)/4},w.volume=function(e){return e.symbol.volume},w.updatetime=function(e){return e.symbol.updatetime},w.time=function(e,t,i){return e.symbol.bartime(t,i)},
w.period=function(e){return e.symbol.period},w.tickerid=function(e){return e.symbol.tickerid},w.ticker=function(e){return e.symbol.ticker},w.interval=function(e){return e.symbol.interval},w.isdwm=function(e){return e.symbol.isdwm()},w.isintraday=function(e){return!e.symbol.isdwm()},w.isdaily=function(e){return"D"===e.symbol.resolution},w.isweekly=function(e){return"W"===e.symbol.resolution},w.ismonthly=function(e){return"M"===e.symbol.resolution},w.year=function(e){return w.timepart(e.symbol,b.YEAR,arguments[1])},w.month=function(e){return w.timepart(e.symbol,b.MONTH,arguments[1])},w.weekofyear=function(e){return w.timepart(e.symbol,b.WEEK_OF_YEAR,arguments[1])},w.dayofmonth=function(e){return w.timepart(e.symbol,b.DAY_OF_MONTH,arguments[1])},w.dayofweek=function(e){return w.timepart(e.symbol,b.DAY_OF_WEEK,arguments[1])},w.hour=function(e){return w.timepart(e.symbol,b.HOUR_OF_DAY,arguments[1])},w.minute=function(e){return w.timepart(e.symbol,b.MINUTE,arguments[1])},w.second=function(e){return w.timepart(e.symbol,b.SECOND,arguments[1])},w.add_days_considering_dst=function(e,t,i){return b.add_days_considering_dst(b.get_timezone(e),t,i)},w.selectSessionBreaks=function(e,t){var i,o,n,r,s,a;if(w.isdwm(e)||void 0===e.symbol.session.timezone)return[];if(i=u.newBarBuilder(e.symbol.period,e.symbol.session),o=[],n=t.length,i.moveTo(t[n-1]),1===n&&i.sessionStart===t[0])o.push(t[0]);else{for(r=n-2;r>=0;--r)(s=t[r])>=i.sessionStart||(i.moveTo(s),a=t[r+1],o.push(a));o.reverse()}return o},w.iff=function(e,t,i){return w.not(e)?i:t},w.rising=function(e,t){for(var i=1;i<t+1;++i)if(e.get(i)>e.get(0))return 0;return 1},w.falling=function(e,t){for(var i=1;i<t+1;++i)if(e.get(i)<e.get(0))return 0;return 1},w.timepart=function(e,t,i){var o=b.utc_to_cal(e.timezone,i||e.bartime());return b.get_part(o,t)},w.rsi=function(e,t){return w.isZero(t)?100:w.isZero(e)?0:100-100/(1+e/t)},w.sum=function(e,t,i){var o=i.new_var(),n=w.nz(e.get())+w.nz(o.get(1))-w.nz(e.get(t));return o.set(n),n},w.sma=function(e,t,i){var o=w.sum(e,t,i);return w.na(e.get(t-1))?NaN:o/t},w.rma=function(e,t,i){var o=w.sum(e,t,i),n=t-1,r=e.get(n),s=i.new_var(),a=s.get(1),l=e.get(),c=w.na(r)?NaN:w.na(a)?o/t:(l+a*n)/t;return s.set(c),c},w.fixnan=function(e,t){var i=t.new_var();return isNaN(e)?i.get(1):(i.set(e),e)},w.tr=function(e,t){var i,o,n;return 1===arguments.length&&(t=e,e=void 0),i=void 0!==e&&!!e,o=t.new_var(w.close(t)),n=o.get(1),i&&isNaN(n)&&(n=w.close(t)),w.max(w.max(w.high(t)-w.low(t),w.abs(w.high(t)-n)),w.abs(w.low(t)-n))},w.atr=function(e,t){var i=t.new_var(w.tr(t));return w.sma(i,e,t)},w.ema=function(e,t,i){var o=w.sum(e,t,i),n=i.new_var(),r=e.get(0),s=e.get(t-1),a=n.get(1),l=w.na(s)?NaN:w.na(a)?o/t:2*(r-a)/(t+1)+a;return n.set(l),l},w.wma=function(e,t,i){var o,n,r=0;for(t=Math.round(t),o=t;o>=0;o--)n=t-o,r+=n*e.get(o);return 2*r/(t*(t+1))},w.vwma=function(e,t,i){var o=i.new_var(w.volume(i)),n=i.new_var(e.get(0)*w.volume(i));return w.sma(n,t,i)/w.sma(o,t,i)},w.swma=function(e,t){return(e.get(0)+2*e.get(1)+2*e.get(2)+e.get(3))/6},w.lowestbars=function(t,i,o){
return-e(t,i,o,function(e,t){return w.lt(e,t)},Number.MAX_VALUE).index},w.lowest=function(t,i,o){return e(t,i,o,function(e,t){return w.lt(e,t)},Number.MAX_VALUE).value},w.highestbars=function(t,i,o){return-e(t,i,o,function(e,t){return w.gt(e,t)},Number.MIN_VALUE).index},w.highest=function(t,i,o){return e(t,i,o,function(e,t){return w.gt(e,t)},Number.MIN_VALUE).value},w.cum=function(e,t){var i=t.new_var(),o=w.nz(i.get(1))+e;return i.set(o),o},w.accdist=function(e){var t=w.high(e),i=w.low(e),o=w.close(e),n=w.volume(e);return w.cum(o===t&&o===i||t===i?0:n*(2*o-i-t)/(t-i),e)},w.correlation=function(e,t,i,o){var n=w.sma(e,i,o),r=w.sma(t,i,o),s=o.new_var(e.get()*t.get());return(w.sma(s,i,o)-n*r)/Math.sqrt(w.variance2(e,n,i)*w.variance2(t,r,i))},w.stoch=function(e,t,i,o,n){var s=w.highest(t,o),a=w.lowest(i,o);return w.fixnan(r(e.get()-a,s-a),n)},w.tsi=function(e,t,i,o){var n=o.new_var(w.change(e)),r=o.new_var(w.abs(w.change(e))),s=o.new_var(w.ema(n,i,o)),a=o.new_var(w.ema(r,i,o));return w.ema(s,t,o)/w.ema(a,t,o)},w.cross=function(e,t,i){function o(e){return e<0?-1:0===e?0:1}if(isNaN(e)||isNaN(t))return!1;var n=i.new_var(o(e-t));return!isNaN(n.get(1))&&n.get(1)!==n.get()},w.linreg=function(e,t,i){var o,n,r,s,a,l,c=0,h=0,u=0,d=0;for(o=0;o<t;++o)n=e.get(o),r=t-1-o,s=r+1,c+=s,h+=n,u+=s*s,d+=n*s;return a=(t*d-c*h)/(t*u-c*c),l=h/t,l-a*c/t+a+a*(t-1-i)},w.sar=function(e,t,i,o){function n(t,i){var o=m.get();return g.set(t),m.set(i),y.set(1e3*e),v.set(o),o}var r,s,a=w.high(o),l=w.low(o),c=w.close(o),h=o.new_var(a),u=o.new_var(l),d=o.new_var(c),p=d.get(1),_=u.get(1),f=h.get(1),m=o.new_var(),g=o.new_var(),y=o.new_var(),v=o.new_var(),b=v.get(1);if(isNaN(p))return NaN;if(r=1e-7,isNaN(b)&&(w.ge(c,p)?(g.set(1),m.set(Math.max(a,f)),b=Math.min(l,_)):(g.set(-1),b=Math.max(a,f),m.set(Math.min(l,_))),y.set(1e3*e)),1===g.get()){if(w.gt(a,m.get())&&(m.set(a),y.set(Math.min(y.get()+1e3*t,1e3*i))),w.le(l,b))return n(-1,l)}else if(w.lt(l,m.get())&&(m.set(l),y.set(Math.min(y.get()+1e3*t,1e3*i))),w.ge(a,b))return n(1,a);return s=b+y.get()*(m.get()-b)/1e3,1===g.get()?w.ge(s,l)&&(s=l-r):w.le(s,a)&&(s=a+r),v.set(s),s},w.alma=function(e,t,i,o){var n,r,s,a=Math.floor(i*(t-1)),l=t/o*(t/o),c=[],h=0;for(n=0;n<t;++n)r=Math.exp(-1*Math.pow(n-a,2)/(2*l)),h+=r,c.push(r);for(n=0;n<t;++n)c[n]/=h;for(s=0,n=0;n<t;++n)s+=c[n]*e.get(t-n-1);return s},w.wvap=function(e,t){return e.get()-e.get(1)},w.change=function(e){return e.get()-e.get(1)},w.roc=function(e,t){var i=e.get(t);return 100*(e.get()-i)/i},w.dev=function(e,t,i){var o=w.sma(e,t,i);return w.dev2(e,t,o)},w.dev2=function(e,t,i){var o,n,r,s=0;for(o=0;o<t;o++)n=e.get(o),r=w.abs(n-i),s+=r;return s/t},w.stdev=function(e,t,i){var o=w.variance(e,t,i);return w.sqrt(o)},w.variance=function(e,t,i){var o=w.sma(e,t,i);return w.variance2(e,o,t)},w.variance2=function(e,t,i){var o,n,r,s=0;for(o=0;o<i;o++)n=e.get(o),r=w.abs(n-t),s+=r*r;return s/i},w.percentrank=function(e,t){var i,o,n,r;if(w.na(e.get(t-1)))return NaN;for(i=0,o=e.get(),n=1;n<t;n++)r=e.get(n),w.ge(o,r)&&i++;return 100*i/t},w.createNewSessionCheck=function(e){
var t=u.newBarBuilder(e.symbol.period,e.symbol.session);return function(e){return t.indexOfBar(e)===S.POST_SESSION&&(t.moveTo(e),!0)}},s.LOW=0,s.HIGH=1,s.prototype.isPivotFound=function(){return-1!==this._pivotIndex.get()},s.prototype.pivotIndex=function(){return this._pivotIndex.get()},s.prototype.currentValue=function(){return this._currentValue.get()},s.prototype.pivotType=function(){return this._pivotType},s.prototype.reset=function(){this._currentValue.set(NaN),this._currentIndex.set(0),this._pivotIndex.set(-1)},s.prototype.isRightSideOk=function(e){return e-this._currentIndex.get()===this._areaRight},s.prototype.isViolate=function(e,t){if(e<1||isNaN(this._currentValue.get()))return!0;var i=this._series.get(this._index-e);return!!isNaN(i)||(i===this._currentValue.get()?t:this._pivotType===s.HIGH?i>this._currentValue.get():i<this._currentValue.get())},s.prototype.processPoint=function(e){this.isViolate(e,!1)&&(this._currentValue.set(this._series.get()),this._currentIndex.set(e))},s.prototype.isRestartNeeded=function(e){return e-this._currentIndex.get()>this._areaRight},s.prototype.update=function(){var e,t;if(this._isNewBar&&this.isPivotFound()&&this.reset(),this.processPoint(this._index),this.isRightSideOk(this._index)){if(-1===this._pivotIndex.get()){for(e=!0,t=0;t<this._areaLeft;++t)if(this.isViolate(this._currentIndex.get()-1-t,!0)){e=!1;break}e&&this._pivotIndex.set(this._currentIndex.get())}}else-1!==this._pivotIndex.get()&&this._pivotIndex.set(-1);if(this.isRestartNeeded(this._index))for(this.reset(),t=0;t<=this._areaRight;++t)this.processPoint(this._index-this._areaRight+t)},a.prototype.addPivot=function(e,t,i){this._lastIndex.set(e),this._lastVal.set(t),this._lastType.set(i)},a.prototype.updatePivot=function(e,t){this._lastIndex.set(e),this._lastVal.set(t)},a.prototype.lastPrice=function(){return this._lastVal.get()},a.prototype.lastIndex=function(){return this._lastIndex.get()},a.prototype.addPoint=function(e,t,i){var o;return isNaN(this._lastVal.get())?void this.addPivot(e,t,i):(o=this._lastVal.get(),this._lastType.get()===i?void((i===s.HIGH?t>o:t<o)&&this.updatePivot(e,t)):void(Math.abs(o-t)/t>this._deviation&&this.addPivot(e,t,i)))},a.prototype.processPivot=function(e){e.update(),this._isBarClosed&&e.isPivotFound()&&this.addPoint(e.pivotIndex(),e.currentValue(),e.pivotType())},w.zigzag=function(e,t,i){return new a(e,t,i).lastPrice()},w.zigzagbars=function(e,t,i){var o=new a(e,t,i);return-1===o.lastIndex()?NaN:o.lastIndex()-w.n(i)},l.prototype.new_sym=function(e,t,i,o){return this.symbol.script.add_sym(e,t,i,void 0,o)},l.prototype.select_sym=function(e){this.symbol=this.symbol.script.get_sym(e)},l.prototype.new_var=function(e){var t,i=this.vars;return i.length<=this.vars_index&&i.push(new c(this.symbol)),t=i[this.vars_index++],arguments.length>0&&t.set(e),t},l.prototype.new_ctx=function(){return this.ctx.length<=this.ctx_index&&this.ctx.push(new l(this.symbol)),this.ctx[this.ctx_index++]},l.prototype.prepare=function(e){var t,i;for(this.ctx_index=0,this.vars_index=0,
t=0;t<this.vars.length;t++)this.vars[t].prepare(e);for(i=0;i<this.ctx.length;i++)this.ctx[i].prepare(e)},l.prototype.stop=function(){this.symbol=null,this.vars=null},c.prototype.valueOf=function(){return this.get(0)},c.prototype.get=function(e){return isNaN(e)&&(e=0),e=e||0,this.hist?e>=this.hist.length?(console.error("not enough depth: "+this),NaN):this._get(e):(this.mindepth=w.max(this.mindepth,e),NaN)},c.prototype._get=function(e){var t=this.hist_pos-e;return t<0&&(t+=this.hist.length),this.hist[t]},c.prototype.set=function(e){this.hist&&(this.hist[this.hist_pos]=e,this.modified=!0)},c.prototype.prepare=function(e){e===this.symbol&&(e.isNewBar?(this.original=this.get(0),!this.modified&&this.hist||this.add_hist()):this.set(this.original),this.modified=!1)},c.prototype.add_hist=function(){var e,t,i;if(!this.hist){for(e=w.na(this.mindepth)?w.max_series_size:w.min(this.mindepth+1,w.max_series_size),e=Math.round(e),t=Array(e),i=0;i<e;i++)t[i]=NaN;this.hist=t,this.hist_pos=-1}this.hist_pos=Math.min(this.hist_pos+1,this.hist.length),this.hist_pos===this.hist.length&&(this.hist_pos=this.hist.length-1,this.hist.shift(),this.hist.push(NaN)),this.hist[this.hist_pos]=this.original},c.prototype.adopt=function(e,t,i){var o,n,r,s;return this.hist||(this.mindepth=NaN),o=t.get(),n=e.indexOf(o),0!==i&&(r=t.get(1),w.na(r)||(s=e.indexOf(r),n=n===s?-1:n)),n<0?NaN:this._get(n)},c.prototype.indexOf=function(e){var t,i,n,r;return this.hist?w.na(e)?-1:(t=this.hist.length,i=this.symbol.index+1,n=Math.min(t,i),r=o.upperbound_int(this.hist,e,0,n),0===r?-1:n-r):(this.mindepth=NaN,-1)},u.parseTicker=function(e){var t=e.indexOf(":");return-1===t?e:e.substr(t+1)},u.parsePeriod=function(e){var t,i,o,n,r,s,a,l;return e+="",t=e.slice(0),i=t.indexOf(",")>=0,i&&(n=t.split(","),o=u.parsePeriod(n[1]),t=n[0]),r=!1,s=!1,a=t[t.length-1],-1==="DWM".indexOf(a)&&("S"===a?s=!0:(r=!0,a="")),l=parseInt(r?t:t.length>1?t.slice(0,t.length-1):1),{resolution:a,interval:l,pureResolution:""+l+a,isIntraday:r,isSeconds:s,range:o}},u.newBarBuilder=function(e,t,i){var o=u.parsePeriod(e);return S.newBarBuilder(o.resolution,o.interval,t,i)},u.newSession=function(e,t){var i=b.get_timezone(e);return(new S.Session).init(i,t)},u.prototype.set_symbolinfo=function(e){e||console.error("WARN: symbolinfo isn't defined for "+this.tickerid),this.info=e,this.timezone=b.get_timezone(e.timezone),this.session.init(this.timezone,e.session);for(var t in this.other_sessions)this.other_sessions.hasOwnProperty(t)&&this.other_sessions[t].init(this.timezone,t)},u.prototype.get_session=function(e){if(!e)return this.session;var t=this.other_sessions[e];return t||(t=new S.Session,this.other_sessions[e]=t),t},u.prototype.isdwm=function(){return""!==this.resolution&&"S"!==this.resolution},u.prototype.enable_dwm_aligning=function(e,t){this.dwm_aligner=u.newBarBuilder(this.period,e,t)},u.prototype.bartime=function(e,t){var i,o,n,r,s=this.time;return e&&(i=e,t&&(i+=t),o=this.bb_cache[i],o||(n=this.get_session(t),o=u.newBarBuilder(e,n),this.bb_cache[i]=o),s=o.alignTime(s)),
!this.isdwm()||isNaN(s)?s:(r=b.utc_to_cal(this.timezone,s),this.session.spec.correctTradingDay(r,this.timezone),b.cal_to_utc(this.timezone,r))},u.prototype.lastbar=function(e){var t,i;isNaN(e.time)||(t=e.time,this.dwm_aligner&&(this.dwm_aligner.moveTo(t),t=this.dwm_aligner.startOfBar(0)),i=this.time!==t,i&&this.index>=0&&!this.isBarClosed&&(this.isNewBar=!1,this.isBarClosed=!0,this.script.calc(this)),this.time=t,this.open=e.open,this.high=e.high,this.low=e.low,this.close=e.close,this.volume=e.volume,this.updatetime=e.updatetime,this.isNewBar=i,this.isBarClosed=e.isBarClosed,this.isLastBar=e.isLastBar,this.isNewBar&&this.index++,this.script.calc(this))},d.prototype.calc=function(e){var t,i,o=this.ctx,n=this.body;o.prepare(e),t=n.main(o,this.inputCallback),i=this,this.out&&t&&(!isNaN(o.symbol.time)||t.nonseries)&&(t.nonseries?("projection"===t.type&&(t.projectionTime=o.symbol.time),this.nonseriesOut(o.symbol,t)):t.bars?t.bars.forEach(function(e){i.out(o.symbol,e)}):this.out(o.symbol,t))},d.prototype.init=function(){var e=this.ctx,t=this.body;t.init&&t.init(e,this.inputCallback),t.main(e,this.inputCallback)},d.prototype.add_sym=function(e,t,i,o,n){var r=this.runner.add_sym(e,t,i,this,o,n);return this.symbols.push(r),r.isdwm()&&this.symbols.length>1&&r.enable_dwm_aligning(this.symbols[0].session,r.session),r},d.prototype.stop=function(){this.symbols=null,this.ctx.stop(),this.ctx=null},d.prototype.get_sym=function(e){return this.symbols[e]},p.prototype.add_sym=function(e,t,i,o,n,r){var s=new u(e,t,i,o,n,r);return this.symbols.push(s),s},p.prototype.get_sym=function(e){return this.symbols[e]},p.prototype.out=function(e,t){if(this.nonseriesUpdate){var i=$.extend({},this.nonseriesUpdate);t.splice(0,0,e.time),i.lastBar=t,this.host.nonseriesOut(e,i)}else this.host.out(e,t)},p.prototype.start=function(){function e(e,o){var n=p.feed.subscribe(e.tickerid,e.period,e.periodBase,e.periodForInitialRange,function(i){"series"==(i.nonseries?"nonseries":"series")?t.update(o,i):i.lastBar?(t.nonseriesUpdate=i,i.lastBar.isLastBar=!0,t.symbols[0].lastbar(i.lastBar),t.nonseriesUpdate=null):r.nonseriesOut(e,i)},r.onErrorCallback,r.symbolInfo,r.sessionId,r.rangeExtension);i.push(n)}var t,i,o,n,r=this.host;for(this._script=new d(r.tickerid,r.period,r.periodBase||r.period,this,r.body,this.out.bind(this),r.input,r.symbolInfo.minmov/r.symbolInfo.pricescale,r.nonseriesOut),t=this,i=[],o=this.symbols,n=0;n<o.length;n++)e(o[n],n);this.subscription=i},p.prototype.stop=function(){var e,t=this.subscription;if(!t&&!this._script)return void console.warn("Recurring script engine stop happened.");for(e=0;e<t.length;e++)p.feed.unsubscribe(t[e]);this.subscription=null,this._script.stop(),this._script=null,this.symbols=null},p.prototype.update=function(e,t){var i,o;if(!t)return void console.error("Unexpected barset = null");i=this.symbols[e],this.isRecalculated?(o=t.bar(t.count()-1),o.isBarClosed=t.isLastBarClosed(),o.isLastBar=!0,i.lastbar(o)):this.barsets[e]||(this.barsets[e]=t,i.set_symbolinfo(t.symbolinfo()),this.recalc())},p.prototype.recalc=function(){
var e,t,i,o,n,r,s,a=this.symbols;for(e=0;e<a.length;e++)if(!this.barsets[e])return;for(t=a.length-1;t>=0;t--)for(i=a[t],o=this.barsets[t],n=o.count(),r=0;r<n;r++)s=o.bar(r),s.isLastBar=r===n-1,s.isBarClosed=!s.isLastBar||o.isLastBarClosed(),i.lastbar(s);this.isRecalculated=!0,this.barsets[0]&&this.barsets[0].endOfData&&this.host.setNoMoreData(),this.host.recalc(this,{endOfData:this.barsets[0].endOfData,nextTime:this.barsets[0].nextTime})},p.feed={subscribe:function(e,t,i,o){console.error("must be initialized with setupFeed")},unsubscribe:function(e){console.error("must be initialized with setupFeed")}},f.prototype.stop=function(){this.runner.stop()},m.prototype.symbolinfo=function(){return this.info},m.prototype.isLastBarClosed=function(){return this.isBarClosed},m.prototype.setLastBarClosed=function(e){this.isBarClosed=e},m.prototype.bar=function(e){return this.bars[e]},m.prototype.count=function(){return this.bars.length},m.prototype.add=function(e,t){var i=e,o=this.bars,n=o.length,r=i.time,s=0===n?NaN:o[n-1].time;0===n||s<r?o.push(i):s===r?o[n-1]=i:console.error("time order violation, prev: "+new Date(s).toUTCString()+", cur: "+new Date(r).toUTCString()),this.isBarClosed=!!t},g.prototype.init=function(e){this.bb=u.newBarBuilder(this.period,e.symbol.session),this.bbEmptyBars=this.generateEmptyBars?u.newBarBuilder(this.period,e.symbol.session):void 0},g.prototype.extrapolate=function(e,t){return isNaN(e)||isNaN(t)?void 0:S.extrapolateBarsFrontToTime(this.bbEmptyBars,e,t)},g.prototype.main=function(e){var t=e.symbol.time,i=this.bb.alignTime(t),o=e.new_var(i),n=w.na(i),r=o.get(1),s=w.na(r)?1:w.neq(i,r),a=e.new_var(),l=e.new_var(),c=e.new_var(),h=e.new_var(),u=a.get(1),d=l.get(1),p=c.get(1),_=h.get(1),f=n?NaN:s?w.open(e):u,m=n?NaN:s?w.high(e):w.max(w.high(e),d),g=n?NaN:s?w.low(e):w.min(w.low(e),p),y=n?NaN:w.close(e),v=n?NaN:s?w.volume(e):w.volume(e)+_,b=n?NaN:t,S=e.symbol.isBarClosed&&this.bb.isLastBar(0,t),T=this.generateEmptyBars&&s?this.extrapolate(r,i):void 0,P=e.new_var(w.close(e)),x=P.get(1),C=T instanceof Array?x:NaN;return a.set(f),l.set(m),c.set(g),h.set(v),[i,f,m,g,y,v,b,S,T,C]},y.prototype.main=function(e){return[w.open(e),w.high(e),w.low(e),w.close(e),w.volume(e),w.updatetime(e)]},{Std:w,Series:c,Symbol:u,SymbolInfo:h,StudyEngine:f,BarSet:m,OHLCV:y,BarBuilder:g,setupFeed:_}}();e.exports=r}).call(t,i(96))},,function(e,t,i){"use strict";(function(e,t){function o(e){TradingView.merge(this,{palettes:{},inputs:[],plots:[],graphics:{},defaults:{}}),TradingView.merge(this,e);var t=e.fullId||e.id;TradingView.merge(this,o.parseIdString(t)),this.name=this.id}var n=i(7).assert,r=i(5).getLogger("Chart.Study.MetaInfo"),s=i(164).applyOverridesToStudyDefaults,a=i(165).Version,l=null;o.VERSION_STUDY_ARG_SOURCE=41,o.METAINFO_FORMAT_VERSION_SOS_V2=42,o.VERSION_PINE_PROTECT_TV_4164=43,o.CURRENT_METAINFO_FORMAT_VERSION=45,o.CHILD_STUDY_ALLOWED_PLOT_TYPES=["line"],o.CHILD_STUDY_EXCLUDE_IDS=["CorrelationCoefficient@tv-basicstudies"],o.CHILD_STUDY_PARENT_EXCLUDE_IDS=[],o.FilledArea={},o.FilledArea.TYPE_PLOTS="plot_plot",
o.FilledArea.TYPE_HLINES="hline_hline",o.versionOf=function(e){var t="_metainfoVersion"in e&&isNumber(e._metainfoVersion)?e._metainfoVersion:0;return t<0&&r.logError("Metainfo format version cannot be negative: "+t),t>o.CURRENT_METAINFO_FORMAT_VERSION&&r.logWarn("Client doesn't support this version of metainfo format: "+t),t},o.parseIdString=function(e){var t,i,o,n,r={};if(-1===e.indexOf("@"))r.shortId=e,r.packageId="tv-basicstudies",r.id=e+"@"+r.packageId,r.version=1;else if(t=e.split("@"),r.shortId=t[0],i=t[1].split("-"),3===i.length)r.packageId=i.slice(0,2).join("-"),r.id=r.shortId+"@"+r.packageId,r.version=i[2];else if(1===i.length&&"decisionbar"===i[0])r.packageId="les-"+i[0],r.id=r.shortId+"@"+r.packageId,r.version=1;else{if(1!==i.length)throw Error("unexpected study id:"+e);r.packageId="tv-"+i[0],r.id=r.shortId+"@"+r.packageId,r.version=1}return r.fullId=r.id+"-"+r.version,"tv-scripting"===r.packageId?(o=r.shortId,0===o.indexOf("Script$")||0===o.indexOf("StrategyScript$")?(n=o.indexOf("_"),r.productId=n>=0?o.substring(0,n):r.packageId):r.productId=r.packageId):r.productId=r.packageId,r},o.getPackageName=function(e){return(/^[^@]+@([^-]+-[^-]+)/.exec(e||"")||[0,"tv-basicstudies"])[1]},o.cutFullId=function(e){return e.replace(/(@[^-]+-[^-]+).*$/,"$1")},o.cutDollarHash=function(e){var t,i,o=e.indexOf("$"),n=e.indexOf("@");return-1===o?e:(t=e.substr(0,o),i=n>=0?e.substr(n):"",t+i)},o.cutScriptIdPart=function(e){var t=e.indexOf("$"),i=e.indexOf("@");return t<0&&i>=0?"":e.substring(Math.max(t+1,0),i>=0?i:e.length)},o.hasUserIdSuffix=function(e){return/^USER;[\d\w]+;\d+$/.test(e)},o.getSourceIdByInputs=function(e,t){var i,n,r;if(!Array.isArray(e)||!t)return null;for(i=0;i<e.length;++i)if(n=e[i],o.isSourceInput(n)&&"string"==typeof t[n.id])return r=t[n.id],~r.indexOf("$")&&(r=r.split("$")[0]),r;return null},o.getSourceInputIds=function(e){var t,i,n=[],r=e.inputs;for(t=0;t<r.length;++t)i=r[t],o.isSourceInput(i)&&n.push(i.id);return n},o.setChildStudyMetaInfoPropertiesSourceId=function(t,i,n){var r,s,a,l;for(r=0;r<t.inputs.length;++r)s=t.inputs[r],o.isSourceInput(s)&&n instanceof e&&n.inputs&&n.inputs[s.id]&&(a=n.inputs[s.id].value(),a.indexOf("$")>0&&(l=a.replace(/^[^\$]+/,i),n.inputs[s.id].setValue(l)))},o.patchChildStudyMetaInfoState=function(e){function t(e){if("object"==typeof e)for(var i in e)"string"==typeof e[i]&&/^[^\$]+\$\d+$/.test(e[i])?e[i]=e[i].replace(/^[^\$]+/,"{pid}"):t(e[i])}e.state&&t(e.state.inputs),e.state.isChildStudy=!0},o.prototype.parseValue=function(e,t){return"bool"===e?TradingView.parseBool(t):t},o.prototype.defaultInputs=function(){var e,t=[];for(e=0;e<this.inputs.length;e++)t.push(this.inputs[e].defval);return t},o.prototype.state=function(e){var t,i={};for(t in this)this.hasOwnProperty(t)&&(i[t]=this[t],!0!==e&&"id"===t&&(i[t]+="-"+this.version));return i},o.prototype.symbolInputId=function(){var e=this.inputs.filter(function(e){return"symbol"===e.type});return e.length>0?e[0].id:null},o.findStudyMetaInfoByDescription=function(e,t){if(e){
for(var i=0;i<e.length;++i)if(e[i].description.toLowerCase()===t.toLowerCase())return e[i];throw Error("unexpected study id:"+t)}throw Error("There is no studies metainfo")},o._findStudyMetaInfo=function(e,t){for(var i=0;i<e.length;i+=1)if(e[i].id===t)return[i,e[i]];return[]},o.findStudyMetaInfo=function(e,t){if(!e)throw new ReferenceError("There is no studies metainfo");var i=o._findStudyMetaInfo(e,t)[1];if(!i)throw new ReferenceError("unexpected study id:"+t);return i},o.isParentSourceId=function(e){return"string"==typeof e&&/^[^\$]+\$\d+$/.test(e)},o.isSourceInput=function(e){return e.id&&(("source"===e.id||"src"===e.id)&&("text"===e.type||"source"===e.type)||"source"===e.type)},o.getChildSourceInputTitles=function(e,t,i){var n,r,s,a,l={};if(t.plots&&t.plots.length&&e.options&&e.options.length)for(n=0;n<e.options.length;++n)r=e.options[n],s=r&&+r.split("$")[1],(a=isFinite(s)&&t.plots[s])&&~o.CHILD_STUDY_ALLOWED_PLOT_TYPES.indexOf(a.type)&&(l[r]=t.styles&&t.styles[a.id]&&t.styles[a.id].title||a.id,i&&(l[r]=i+":"+l[r]));return l},o.removeStudyMetaInfo=function(e,t,i){var n=function(i){return void 0!==(i=void 0!==i?i:o._findStudyMetaInfo(e,t.id)[0])&&(e.splice(i,1),defaults.remove(o.getStudyPropertyRootName(t)),!0)};if(e)return n(i);throw Error("There are no studies metainfo")},o.getStudyPropertyRootName=function(e){var t="study_"+e.id;return e.pine&&e.pine.version&&(t+="_"+e.pine.version.replace(".","_")),t},o.addOrReplaceStudyMetaInfo=function(e,t){var i,n,s,l,c=new o(t),h=o._findStudyMetaInfo(e,c.id),u=h[0],d=h[1];if(d){if(i=d.pine&&d.pine.version&&a.parse(d.pine.version),null!=(n=c.pine&&c.pine.version&&a.parse(c.pine.version))&&null!=i&&!n.isGreaterOrEqual(i))return c;o.removeStudyMetaInfo(e,c,u)}else o.removeStudyMetaInfo(e,c,u)&&r.logDebug("Study with id="+c.id+" already exists in the model!");return e.push(c),c.defaults&&(s=TradingView.clone(c.defaults),s.precision="default",l=o.getStudyPropertyRootName(c),defaults.create(l,s)),c},o.overrideDefaults=function(e){null!==l&&0!==e.length&&s(l,e,function(e){return TradingView.defaultProperties["study_"+e]||null})},o.setDefaultsOverrides=function(e){l=e},o.createMetaInfoStub=function(e,t){var i,o,r;return n(TradingView.isExistent(e.scriptIdPart),"scriptIdPart is missing, study: "+JSON.stringify(e)),i=e.extra&&"strategy"===e.extra.kind||!0===e.isTVScriptStrategy,o=TVScript.createScriptStudyId(e.scriptIdPart,t,i),r={isTVScriptStubToCompile:!0,id:o,scriptIdPart:e.scriptIdPart,description:e.scriptName,TVScriptSourceCode:e.scriptSource,is_hidden_study:e.extra&&e.extra.is_hidden_study,extra:e.extra,version:t},r.pine={},r.pine.version=TradingView.isExistent(e.version)?e.version:-1,r.pine.access=TVScript.Access.MAP_ID_TO_NAME[e.access],r.pine.userHaveAccess=e.userHaveAccess,!0===i&&(r.isTVScriptStrategy=!0),r},o.isScriptStrategy=function(e){if(e.extra&&e.extra.kind)return e.extra.kind===TVScript.Kinds.STRATEGY;if(!0===e.isTVScriptStrategy)return!0;var t=e.TVScriptSourceCode||e.scriptSource;return!!t&&TVScript.isStrategy(t)},
o.replaceWithFullStudyMetaInfoAsync=function(e,t){var i=$.Deferred();return t.isTVScriptStubToCompile||i.resolve(t),i.promise()},o.getOrderedInputIds=function(e){var t,i,o=[],n=e.inputs;for(t=0;t<n.length;++t)i=n[t],o.push(i.id);return o},o.canBeChild=function(e){var t,i,n;if(e&&"string"==typeof e)return!0;if(!e||e.extra&&!o.isAllowedSourceInputsCount(e.extra.sourceInputsCount)||!0===e.canNotBeChild||!1===e.canBeChild||~o.CHILD_STUDY_EXCLUDE_IDS.indexOf(e.id)||e.isTVScriptStrategy||e.TVScriptSourceCode&&TVScript.isStrategy(e.TVScriptSourceCode))return!1;if(e.isTVScriptStubToCompile)return!0;for(t=e.inputs,i=0,n=0;n<t.length;++n)o.isSourceInput(t[n])&&++i;return o.isAllowedSourceInputsCount(i)},o.isAllowedSourceInputsCount=function(e){return 1===e},o.canHaveChildren=function(e){if(e){if(e.isTVScriptStrategy||e.TVScriptSourceCode&&TVScript.isStrategy(e.TVScriptSourceCode))return!1;if(e.id&&!~o.CHILD_STUDY_PARENT_EXCLUDE_IDS.indexOf(e.id)&&Array.isArray(e.plots))for(var t=0;t<e.plots.length;++t)if(~o.CHILD_STUDY_ALLOWED_PLOT_TYPES.indexOf(e.plots[t].type))return!0}return!1},TradingView.StudyMetaInfo=o,void 0!==t&&t&&t.exports&&(t.exports=o)}).call(t,i(12),i(47)(e))},function(e,t,i){"use strict";function o(e,t,i,o,n,r){var s,a,h,u;return Object(l.equalPoints)(e,t)?null:(s=new l.Point(0,0),a=new l.Point(i,o),n?r?(h=Object(c.intersectLineAndRectangle)(Object(l.lineThroughPoints)(e,t),s,a),Array.isArray(h)?h:null):(u=Object(c.intersectRayAndRectangle)(t,e,s,a),null===u||Object(l.equalPoints)(t,u)?null:Object(l.lineSegment)(t,u)):r?(u=Object(c.intersectRayAndRectangle)(e,t,s,a),null===u||Object(l.equalPoints)(e,u)?null:Object(l.lineSegment)(e,u)):(h=Object(c.intersectLineSegmentAndRectangle)(Object(l.lineSegment)(e,t),s,a),Array.isArray(h)?h:null))}function n(e){return.3*e}function r(e){return 2+.5*e}function s(e){return null!==e&&void 0!==e&&!Object(h.isNaN)(e)}function a(e,t){void 0!==t&&Object(u.setLineStyle)(e,t)}var l,c,h,u;Object.defineProperty(t,"__esModule",{value:!0}),t.extendAndClipLineSegment=o,t.optimalBarWidth=n,t.selectionTolerance=r,t.coordinateIsValid=s,t.setValidLineStyle=a,l=i(6),i.n(l),c=i(128),i.n(c),h=i(14),i.n(h),u=i(51),i.n(u)},function(e,t,i){"use strict";(function(e){function o(){this._zorder=0,this.m_priceScale=null,this._id=s.randomHashN(6),this._ownerSource=null,this._userEditEnabled=!0,this.hasAlert=new e(!1)}function n(e){o.call(this),this._isOverlay=null,this._model=e}var r=i(2).DefaultProperty,s=i(37);o.prototype.createPropertiesObject=function(e,t,i){return new r(e,t,i)},o.prototype.id=function(){return this._id},o.prototype.preferNoScale=function(){return!1},o.prototype.idForAlert=function(){return this._id},o.prototype.setId=function(e){this._id=e},o.prototype.zorder=function(){return this._zorder},o.prototype.setZorder=function(e){"number"==typeof e&&this._zorder!==e&&(this._zorder=e)},o.prototype.title=function(){throw Error("Implement this fun in a subclass")},o.prototype.priceScale=function(){return this.m_priceScale},o.prototype.setPriceScale=function(e){this.m_priceScale=e},
o.prototype.ownerSource=function(){return this._ownerSource},o.prototype.setOwnerSource=function(e){this._ownerSource=e,e&&this.setPriceScale(e.priceScale())},o.prototype.isSavedInChart=function(e){return!0},o.prototype.isSavedInStudyTemplates=function(){return!0},o.prototype.isRemovedByStudyTemplates=function(){return!0},o.prototype.hasContextMenu=function(){return!0},o.prototype.showInObjectTree=function(){return!0},o.prototype.setUserEditEnabled=function(e){this._userEditEnabled=e},o.prototype.userEditEnabled=function(){return this._userEditEnabled},o.prototype.canBeHidden=function(){return this.userEditEnabled()},o.prototype.isUserDeletable=function(){return this.userEditEnabled()},o.prototype.canHasAlert=function(){return!1},o.prototype.properties=function(){throw Error("Implement this fun in a subclass")},o.prototype.statusView=function(){return null},o.prototype.dataWindowView=function(){return null},o.prototype.priceAxisViews=function(e,t){return null},o.prototype.updateAllViews=function(){},o.prototype.paneViews=function(e){return null},o.prototype.isChildStudy=function(){return!1},o.prototype.hasChildren=function(){return!1},o.prototype.canHaveChildren=function(){return!1},o.prototype.onClickOutside=function(){},o.prototype.getInputsPropertyPage=function(){return null},o.prototype.getStylesPropertyPage=function(){return null},o.prototype.getDisplayPropertyPage=function(){return null},o.prototype.getVisibilitiesPropertyPage=function(){return null},o.prototype.getStrategyPropertyPage=function(){return null},o.prototype.getSourceIcon=function(){return null},o.prototype.doesMovingAffectsUndo=function(){return!0},inherit(n,o),n.prototype.isNoScale=function(){return!!this._isOverlay},n.prototype.base=function(){return 0},n.prototype.formatter=function(){return null},n.prototype.model=function(){return this._model},n.prototype.priceRange=function(e,t){return null},n.prototype.isDraggable=function(){return!this._metaInfo||!this._metaInfo.linkedToSeries},n.prototype.priceLineColor=function(e){return e},t.DataSource=o,t.PriceDataSource=n}).call(t,i(15))},function(e,t,i){"use strict";function o(e,t,i){var o=t.subtract(e),n=i.subtract(e),r=n.dotProduct(o)/o.dotProduct(o);return{coeff:r,distance:e.addScaled(o,r).subtract(i).length()}}function n(e,t,i){var n,r,s=o(e,t,i);return 0<=s.coeff&&s.coeff<=1?s:(n=e.subtract(i).length(),r=t.subtract(i).length(),n<r?{coeff:0,distance:n}:{coeff:1,distance:r})}Object.defineProperty(t,"__esModule",{value:!0}),t.distanceToLine=o,t.distanceToSegment=n},function(e,t,i){"use strict";function o(e,t,i){var o,n,s;for(t=t||e||i||"",o="",n=0;n<c.length;n++)if((s=t.match(c[n]))&&3===s.length){t=s[1],o=s[2];break}Object(r.emit)(t.toLowerCase().replace(" ","_"),{category:e,label:i,value:o})}function n(e,t,i){var n,r,a;if(s.enabled("charting_library_base"))return void o(e,t,i);n=(e?e+":":"")+t,i&&(n+=" "+i),l.logNormal(n),s.enabled("widget")||(r=window._gaq,window._UNIT_TESTS||void 0===r||(a=["_trackEvent",e,t],void 0!==i&&a.push(i),r.push(a)))}var r,s,a,l,c;Object.defineProperty(t,"__esModule",{
value:!0}),t.trackEvent=n,r=i(38),s=i(4),i.n(s),a=i(5),l=Object(a.getLogger)("Common.TrackEvent"),c=[/Study_(Drawing)_(.*)/,/(Study)_(.*)@tv-basicstudies/,/(Study)_(.*)/,/(Chart Style) (.*)/],window.TradingView=window.TradingView||{},window.TradingView.trackEvent=n},function(e,t,i){"use strict";(function(t,o,n){function r(e){return"cursor"===e||"arrow"===e||"dot"===e}function s(e){!e&&u&&u.stayInDrawingMode.value()||this.tool.setValue(this.cursorTool.value())}function a(e,t){return function(t){e.inFire||(e.inFire=!0,e.fire(t),e.inFire=!1)}}function l(){K||(g.setValue(TVSettings.getValue("chart.cursorPreference","cursor")),g.subscribe(function(e){r(e)&&y.setValue(e)},{callWithLast:!0}),y.subscribe(function(e){e&&TVSettings.setValue("chart.cursorPreference",e)}),u=new c("drawings"),d=new n,p=new n,_=new n,f=new n,d.setValue(!1),p.setValue(!1),_.setValue(!1),f.setValue(!1),g.subscribe(function(){h.emit("onSelectedLineToolChanged")}),K=!0)}var c=i(2).DefaultProperty,h=i(38),u=null,d=null,p=null,_=null,f=null,m=new t,g=new t,y=new t,v=new o,b=new o,S=new o,w=new o,T=new o,P=new o,x=new o,C=new o,L=new o,I=new o,M=new o,k=new o,A=new o,E=new o,D=new o,V=a(v),O=a(b),R=a(S),B=a(w),z=a(T),N=a(P),F=a(x),W=a(C),H=a(L),j=a(I),U=a(M),q=a(k),$=a(A),Y=a(E),G=a(D),K=!1;e.exports={tool:g,cursorTool:y,toolIsCursor:r,resetToCursor:s,init:l,createdLineTool:v,continuedLineTool:b,cancelledLineTool:S,createLineTool:V,continueLineTool:O,cancelLineTool:R,startedMovingLineTool:w,movedLineTool:T,finishedMovingLineTool:P,startMovingLineTool:B,moveLineTool:z,finishMovingLineTool:N,startedChangingLineTool:x,changedLineTool:C,finishedChangingLineTool:L,startChangingLineTool:F,changeLineTool:W,finishChangingLineTool:H,removedLineTool:I,removeLineTool:j,restoredLineTool:E,restoreLineTool:Y,restoredLineToolState:D,restoreLineToolState:G,finishedLineTool:M,finishLineTool:U,changedLineStyle:k,changeLineStyle:q,copiedLineTool:A,copyLineTool:$,properties:function(){return u},hideAllDrawings:function(){return d},hideMarksOnBars:function(){return _},lockDrawings:function(){return p},drawOnAllCharts:function(){return u.drawOnAllCharts},lockTimeAxis:function(){return f},lockTimeAxisTime:m}}).call(t,i(15),i(8),i(12))},function(e,t,i){"use strict";function o(e){var t,i,o,n,r,s;if(this._name=e,t=u[e],t||(t={time:[],offset:[]},this._invalid=!0),t.time.length!==t.offset.length&&(t={time:[],offset:[]},this._invalid=!0),!t.time_utc){for(i=t.time,o=t.offset,n=i.length,r=Array(n),s=0;s<n;s++)i[s]*=1e3,o[s]*=1e3,r[s]=i[s]-o[s];t.time_utc=r}this.tz=t}function n(e,t){var i,o,n,s=e.length;if(0===s)return-1;if(isNaN(t))throw Error("Key is NaN");for(i=0,o=s-1,n=r((i+o)/2);;){if(e[n]>t){if((o=n-1)<i)return n}else if(i=n+1,o<i)return n<s-1?n+1:-1;n=r((i+o)/2)}}var r,s,a,l,c,h,u=i(640).tzData;o.prototype.offset_utc=function(e){return o._offset(this.tz.time_utc,this.tz.offset,e)},o.prototype.offset_loc=function(e){return o._offset(this.tz.time,this.tz.offset,e)},o.prototype.is_valid=function(){return!this._invalid},o._offset=function(e,t,i){var o=n(e,i);return-1===o?0:t[o]},
r=function(e){return 0|e},s=function(e){return 60*e*1e3},a=function(e){return 1e3*e},l=function(e,t){return r((r(e/1e3)-r(t/1e3))/60)},c=function(e,t){return r(r(e/1e3)-r(t/1e3))},h={SUNDAY:1,MONDAY:2,TUESDAY:3,WEDNESDAY:4,THURSDAY:5,FRIDAY:6,SATURDAY:7,JANUARY:0,DECEMBER:11,YEAR:1,MONTH:2,WEEK_OF_YEAR:3,DAY_OF_MONTH:5,DAY_OF_YEAR:6,DAY_OF_WEEK:7,HOUR_OF_DAY:11,MINUTE:12,SECOND:13,minutesPerDay:1440,secondsPerDay:s(1440),get_minutes_from_hhmm:function(e){return-1!==e.indexOf(":")&&(e=e.split(":").join("")),e%100+60*r(e/100)},get_year:function(e){return e.getUTCFullYear()},get_month:function(e){return e.getUTCMonth()},get_hours:function(e){return e.getUTCHours()},get_minutes:function(e){return e.getUTCMinutes()},get_seconds:function(e){return e.getUTCSeconds()},get_day_of_month:function(e){return e.getUTCDate()},get_day_of_week:function(e){return e.getUTCDay()+1},get_day_of_year:function(e){var t=Date.UTC(e.getUTCFullYear(),0,1,0,0,0,0);return r((e.getTime()-t)/h.secondsPerDay)+1},get_week_of_year:function(e){var t=Date.UTC(e.getUTCFullYear(),0,1,0,0,0,0),i=h.clone(e);return h.set_hms(i,0,0,0,0),i.setUTCDate(i.getUTCDate()+4-(i.getUTCDay()||7)),r(((i.getTime()-t)/h.secondsPerDay+1)/7)},get_minutes_from_midnight:function(e){return 60*h.get_hours(e)+h.get_minutes(e)},set_hms:function(e,t,i,o,n){e.setUTCHours(t),e.setUTCMinutes(i),e.setUTCSeconds(o),e.setUTCMilliseconds(n)},add_days_considering_dst:function(e,t,i){var o,n=e.offset_utc(t),r=this.clone(t);return this.add_date(r,i),o=e.offset_utc(r),r.setTime(r.getTime()+n-o),r},add_date:function(e,t){e.setTime(e.getTime()+t*h.secondsPerDay)},clone:function(e){return new Date(e.getTime())},get_days_per_year:function(e){var t=e.getUTCFullYear();return this.days_per_year(t)},days_per_year:function(e){return e%4!=0||e%100==0&&e%400!=0?365:366},get_part:function(e,t){switch(t){case h.YEAR:return h.get_year(e);case h.MONTH:return h.get_month(e);case h.DAY_OF_MONTH:return h.get_day_of_month(e);case h.WEEK_OF_YEAR:return h.get_week_of_year(e);case h.DAY_OF_WEEK:return h.get_day_of_week(e);case h.HOUR_OF_DAY:return h.get_hours(e);case h.MINUTE:return h.get_minutes(e);case h.DAY_OF_YEAR:return h.get_day_of_year(e);case h.SECOND:return h.get_seconds(e);default:return e.getTime()}},time_minutes:s,time_seconds:a,time_minutes_diff:l,time_seconds_diff:c,utc_to_cal:function(e,t){var i=e.offset_utc(t);return new Date(t+i)},get_cal:function(e,t,i,o){var n=new Date(Date.UTC(t,i,o)),r=e.offset_utc(+n);return new Date(n.valueOf()-r)},get_cal_utc:function(e,t,i){return new Date(Date.UTC(e,t,i))},cal_to_utc:function(e,t){var i=t.getTime();return i-e.offset_loc(i)},get_timezone:function(e){return new o(e)},shift_day:function(e,t){var i=e-1;return i+=t,i>6?i%=7:i<0&&(i=(7+i%7)%7),i+1}},e.exports=h},,function(e,t,i){"use strict";function o(e){return""!==e&&h&&void 0!==e&&null!==e?u+e:e}function n(e){return""!==e&&h&&void 0!==e&&null!==e?d+e+_:e}function r(e){return""!==e&&h&&void 0!==e&&null!==e?p+e+_:e}function s(e){return Object(c.getNormalizedScrollLeft)(e,"rtl")}function a(e,t){
var i=Object(c.detectScrollType)();if("indeterminate"===i)return 0;switch(i){case"negative":t=e.clientWidth-e.scrollWidth+t;break;case"reverse":t=e.scrollWidth-e.clientWidth-t}return t}function l(e){var t=f.exec(e);return t?m.test(t[0])?"rtl":"ltr":""}var c,h,u,d,p,_,f,m;Object.defineProperty(t,"__esModule",{value:!0}),i.d(t,"IS_RTL",function(){return h}),t.startWithLTR=o,t.forceLTRStr=n,t.forceRTLStr=r,t.getLTRScrollLeft=s,t.getLTRScrollLeftOffset=a,t.detectAutoDirection=l,c=i(473),i.n(c),h="rtl"===document.dir,u="",d="",p="",_="",f=/[^\u0000-\u0040\u005B-\u0060\u007B-\u00BF\u00D7\u00F7\u02B9-\u02FF\u2000-\u200E\u2010-\u2029\u202C\u202F-\u2BFF]/,m=/[\u0590-\u07FF\u200F\u202B\u202E\uFB1D-\uFDFD\uFE70-\uFEFC]/},function(e,t,i){"use strict";function o(){return s.replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})}function n(){return r(12)}function r(e){var t,i,o="";for(t=0;t<e;++t)i=Math.round(Math.random()*(a.length-1)),o+=a[i];return o}var s,a;Object.defineProperty(t,"__esModule",{value:!0}),t.guid=o,t.randomHash=n,t.randomHashN=r,s="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx",a="0123456789abcdefghijklmopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"},function(e,t,i){"use strict";function o(e,t,i){u[e].unsubscribe(i,t)}function n(e,t,i){r(e,t,i)}function r(e,t,i,o){if(u.hasOwnProperty(e)||(u[e]=new h.a),p[e])return void t.call(i);u[e].subscribe(i,t,o)}function s(e){d.push(e)}function a(e){var t,i,o=[];for(t=1;t<arguments.length;t++)o[t-1]=arguments[t];i=[e].concat(o),d.forEach(function(e){e.apply(null,i)}),u.hasOwnProperty(e)&&u[e].fire.apply(u[e],o)}function l(e){p[e]&&console.warn("Something went wrong: emitOnce called multiple times with same event ("+e+")"),p[e]=!0,a.apply(null,arguments)}var c,h,u,d,p;Object.defineProperty(t,"__esModule",{value:!0}),t.unsubscribe=o,t.on=n,t.subscribe=r,t.subscribeToAll=s,t.emit=a,t.emitOnce=l,c=i(8),h=i.n(c),u={},d=[],p={}},function(e,t,i){"use strict";var o,n,r,s,a,l,c,h,u,d,p,_,f,m,g,y,v,b,S,w,T,P,x,C,L,I,M,k,A;Object.defineProperty(t,"__esModule",{value:!0}),i.d(t,"STATUS_OFFLINE",function(){return o}),i.d(t,"STATUS_RESOLVING",function(){return n}),i.d(t,"STATUS_LOADING",function(){return r}),i.d(t,"STATUS_READY",function(){return s}),i.d(t,"STATUS_INVALID_SYMBOL",function(){return a}),i.d(t,"STATUS_SNAPSHOT",function(){return l}),i.d(t,"STATUS_EOD",function(){return c}),i.d(t,"STATUS_PULSE",function(){return h}),i.d(t,"STATUS_DELAYED",function(){return u}),i.d(t,"STATUS_DELAYED_STREAMING",function(){return d}),i.d(t,"STATUS_NO_BARS",function(){return p}),i.d(t,"STATUS_REPLAY",function(){return _}),i.d(t,"STYLE_BARS",function(){return f}),i.d(t,"STYLE_CANDLES",function(){return m}),i.d(t,"STYLE_LINE",function(){return g}),i.d(t,"STYLE_LINE_TYPE_MARKERS",function(){return y}),i.d(t,"STYLE_LINE_TYPE_STEP",function(){return v}),i.d(t,"STYLE_LINE_TYPE_SIMPLE",function(){return b}),i.d(t,"STYLE_AREA",function(){return S}),i.d(t,"STYLE_RENKO",function(){return w}),i.d(t,"STYLE_KAGI",function(){return T}),i.d(t,"STYLE_PNF",function(){return P}),
i.d(t,"STYLE_PB",function(){return x}),i.d(t,"STYLE_HEIKEN_ASHI",function(){return C}),i.d(t,"STYLE_HOLLOW_CANDLES",function(){return L}),i.d(t,"STYLE_BASELINE",function(){return I}),i.d(t,"STYLE_RANGE",function(){return M}),i.d(t,"STYLE_SHORT_NAMES",function(){return k}),i.d(t,"SYMBOL_STRING_DATA",function(){return A}),o=0,n=1,r=2,s=3,a=4,l=5,c=6,h=7,u=8,d=9,p=10,_=11,f=0,m=1,g=2,y=0,v=1,b=2,S=3,w=4,T=5,P=6,x=7,C=8,L=9,I=10,M=11,k={},k[f]="bar",k[m]="candle",k[L]="hollowCandle",k[g]="line",k[S]="area",k[w]="renko",k[x]="pb",k[T]="kagi",k[P]="pnf",k[C]="ha",k[I]="baseline",k[M]="range",A={},A[w]={type:"BarSetRenko@tv-prostudies",basicStudyVersion:15},A[x]={type:"BarSetPriceBreak@tv-prostudies",basicStudyVersion:15},A[T]={type:"BarSetKagi@tv-prostudies",basicStudyVersion:15},A[P]={type:"BarSetPnF@tv-prostudies",basicStudyVersion:15},A[C]={type:"BarSetHeikenAshi@tv-basicstudies",basicStudyVersion:60},A[M]={type:"BarSetRange@tv-basicstudies",basicStudyVersion:72}},function(e,t,i){"use strict";(function(e){function o(t){t||(t={}),this.checkable=t.checkable||!1,this.checked=t.checked||null,this.enabled=void 0===t.enabled||t.enabled,this.visible=t.visible||!0,this.active=!0,this.font=t.font||"Arial",this.icon=t.icon||null,this.iconText=t.iconText||null,this.iconVisibleInMenu=t.iconVisibleMenu||!0,this.deleteButton=t.deleteButton||null,this.shortcut=null,this.setShortCut(t.shortcut,t.doNotBindShortcut),this.statusTip=t.statusTip||null,this.text=t.text||null,this.toolTip=t.toolTip||null,this.htmlclass=t.htmlclass||null,this.statName=t.statName||null,this._callbackContext=t.callbackContext||this,this._callbacks=new e,this.subActions=t.subActions||[]}function n(){o.call(this),this.font=null,this.subActions=null,this.htmlclass="action-separator"}function r(e){o.call(this),this.deferred=e}var s=i(191);o.prototype.callbacks=function(){return this._callbacks},o.prototype.callbackContext=function(){return this._callbackContext},o.prototype.setCallbackContext=function(e){this._callbackContext=e},o.prototype.hasSubActions=function(){return this.subActions&&this.subActions.length},o.prototype.setChecked=function(e){this.checked=e},o.prototype._toggleChecked=function(){this.checked=!this.checked},o.prototype.setVisible=function(e){this.visible=e},o.prototype.setEnabled=function(e){this.enabled=e},o.prototype.disable=function(){this.setEnabled(!1)},o.prototype.enable=function(){this.setEnabled(!0)},o.prototype.setActive=function(e){this.active!==e&&(this.active=e,this.shortcut&&!this.doNotBindShortcut&&(e?this._bindShortCut():this._unbindShortCut()))},o.prototype.setShortCut=function(e,t){e&&(this.shortcut=e,!0!==t&&this._bindShortCut())},o.prototype._bindShortCut=function(){s.bind(this.shortcut,function(e){if(e.preventDefault(),this.enabled)return this.executeCallback(),!1}.bind(this))},o.prototype._unbindShortCut=function(){s.unbind(this.shortcut)},o.prototype.setIconVisible=function(e){this.iconVisibleInMenu=e},o.prototype.executeCallback=function(e){this._lastEvent=e,this._toggleChecked(),this._callbacks.fire(this)},inherit(n,o),
inherit(r,o),t.Action=o,t.ActionSeparator=n,t.ActionPlaceholder=r}).call(t,i(8))},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i.d(t,"UndoCommand",function(){return o});var o=function(){function e(e,t){void 0===t&&(t=!0),this._customFlags={},this._text=e,this._executeOnPush=t}return e.prototype.text=function(){return this._text},e.prototype.executeOnPush=function(){return this._executeOnPush},e.prototype.customFlag=function(e){return this._customFlags[e]},e.prototype.setCustomFlag=function(e,t){this._customFlags[e]=t},e}()},function(e,t,i){"use strict";function o(e){this.items=e.items,this.height=e.height||e.width,this.width=e.width||e.height,this._color=e.color,this._borderColor=e.borderColor,this._vertOffset=e.vertOffset||0,e.textCache&&(this._textCache=e.textCache,this._textColor=e.textColor,this._textVertOffset=this._vertOffset>0?this.height:-this.height,this._textImageWidth=this._textCache.textImageWidth,this._textImageHeight=this._textCache.textImageHeight)}var n=i(6).Point,r=i(9).HitTestResult;o.prototype.draw=function(e){this.drawShape(e),this.drawText(e)},o.prototype.drawShape=function(e){throw Error("Not implemented")},o.prototype.drawText=function(e){var t,i,o,n,r,s;if(this._textCache)for(t=0,i=this.items.length;t<i;t++)o=this.items[t],n=o.x,r=o.y+this._vertOffset+this._textVertOffset,s=o.style&&null!=o.style.textColor?o.style.textColor:this._textColor,this._textCache.paintTo(e,s,n,r,"center",this._vertOffset>0?"top":"bottom")},o.prototype.hitTest=function(e,t){var i,o,s,a,l,c,h,u,d,p,_,f,m,g=Math.max(this.height,this.width),y=this._vertOffset,v=this._textVertOffset;for(t=t||r.REGULAR,o=0;o<this.items.length;++o)if(s=this.items[o]){if(i=new n(s.x,s.y+y),i.subtract(e).length()<=g)return new r(t,{});if(this._textCache&&(a=this._textImageWidth/2,l=s.y+y+v,c=y>0?0:-this._textImageHeight,h=y>0?this._textImageHeight:0,u=e.x,d=e.y,p=s.x-a,_=l+c,f=s.x+a,m=l+h,u>p&&u<f&&d>_&&d<m))return new r(t,{})}return null},t.PaneRendererAbstractShape=TradingView.PaneRendererAbstractShape=o},function(e,t,i){"use strict";for(var o={LineToolFibRetracement:i(644).LineToolFibRetracement,LineToolFibChannel:i(646).LineToolFibChannel,LineToolFibSpeedResistanceArcs:i(647).LineToolFibSpeedResistanceArcs,LineToolProjection:i(648).LineToolProjection,LineToolTrendBasedFibExtension:i(649).LineToolTrendBasedFibExtension,LineToolElliott:i(80).LineToolElliott,LineToolFibCircles:i(650).LineToolFibCircles,LineToolTrading:i(176),LineToolVertLine:i(651).LineToolVertLine,LineToolCrossLine:i(652).LineToolCrossLine,LineToolBarsPattern:i(653).LineToolBarsPattern,LineToolTrendBasedFibTime:i(654).LineToolTrendBasedFibTime,LineToolFibTimeZone:i(655).LineToolFibTimeZone,LineToolCircleLines:i(656).LineToolCircleLines,LineToolDateRange:i(657).LineToolDateRange,LineToolPriceRange:i(658).LineToolPriceRange,LineToolDateAndPriceRange:i(659).LineToolDateAndPriceRange,LineToolParallelChannel:i(660).LineToolParallelChannel,LineToolTrendAngle:i(661).LineToolTrendAngle,LineToolTrendLine:i(119).LineToolTrendLine,
LineToolArrowMark:i(98).LineToolArrowMark,LineToolExecution:i(272).LineToolExecution,LineToolPitchfan:i(662).LineToolPitchfan,LineToolGannSquare:i(663).LineToolGannSquare,LineToolFibSpeedResistanceFan:i(664).LineToolFibSpeedResistanceFan,LineToolGannComplex:i(665).LineToolGannComplex,LineToolGannFixed:i(666).LineToolGannFixed,LineToolGannFan:i(667).LineToolGannFan,LineToolFibWedge:i(270).LineToolFibWedge,LineToolPitchfork:i(121).LineToolPitchfork,LineToolDisjointAngle:i(668).LineToolDisjointAngle,LineToolFlatBottom:i(669).LineToolFlatBottom,LineToolIcon:i(670).LineToolIcon,LineToolRotatedRectangle:i(671).LineToolRotatedRectangle,LineToolFibSpiral:i(672).LineToolFibSpiral,LineToolHeadAndShoulders:i(673).LineToolHeadAndShoulders,LineToolTriangle:i(674).LineToolTriangle,LineToolTrianglePattern:i(675).LineToolTrianglePattern,LineTool5PointsPattern:i(274).LineTool5PointsPattern,LineToolThreeDrivers:i(676).LineToolThreeDrivers,LineToolABCD:i(677).LineToolABCD,LineToolRiskReward:i(178).LineToolRiskReward,LineToolPolyline:i(679).LineToolPolyline,LineToolPrediction:i(680).LineToolPrediction,LineToolPriceLabel:i(681).LineToolPriceLabel,LineToolNote:i(276).LineToolNote,LineToolNoteAbsolute:i(276).LineToolNoteAbsolute,LineToolBrush:i(682).LineToolBrush,LineToolArc:i(683).LineToolArc,LineToolCallout:i(684).LineToolCallout,LineToolBalloon:i(685).LineToolBalloon,LineToolText:i(277).LineToolText,LineToolHorzLine:i(686).LineToolHorzLine,LineToolHorzRay:i(687).LineToolHorzRay,LineToolRectangle:i(688).LineToolRectangle,LineToolEllipse:i(689).LineToolEllipse,LineToolTimeCycles:i(690).LineToolTimeCycles,LineToolSineLine:i(691).LineToolSineLine,LineToolGhostFeed:i(692).LineToolGhostFeed,LineToolBezierQuadro:i(693).LineToolBezierQuadro,LineToolBezierCubic:i(694).LineToolBezierCubic,LineToolArrow:i(695).LineToolArrow,LineToolRay:i(696).LineToolRay,LineToolExtended:i(697).LineToolExtended,LineToolSchiffPitchfork:i(698).LineToolSchiffPitchfork,LineToolSchiffPitchfork2:i(699).LineToolSchiffPitchfork2,LineToolInsidePitchfork:i(700).LineToolInsidePitchfork,LineToolTextAbsolute:i(277).LineToolTextAbsolute,LineToolArrowMarkLeft:i(98).LineToolArrowMarkLeft,LineToolArrowMarkRight:i(98).LineToolArrowMarkRight,LineToolArrowMarkUp:i(98).LineToolArrowMarkUp,LineToolArrowMarkDown:i(98).LineToolArrowMarkDown,LineToolFlagMark:i(701).LineToolFlagMark,LineToolCypherPattern:i(702).LineToolCypherPattern,LineToolElliottImpulse:i(80).LineToolElliottImpulse,LineToolElliottTriangle:i(80).LineToolElliottTriangle,LineToolElliottTripleCombo:i(80).LineToolElliottTripleCombo,LineToolElliottCorrection:i(80).LineToolElliottCorrection,LineToolElliottDoubleCombo:i(80).LineToolElliottDoubleCombo,LineToolRiskRewardLong:i(178).LineToolRiskRewardLong,LineToolRiskRewardShort:i(178).LineToolRiskRewardShort,LineToolPosition:i(703).LineToolPosition,LineToolOrder:i(705).LineToolOrder},n=Object.keys(o),r=n.length;r--;)TradingView[n[r]]=o[n[r]];e.exports=o},function(e,t,i){"use strict";(function(t){var o=i(356).ExchangeSession,n=function(){function e(e,t,i,o){
return""===e?new h(60*t,i):"S"===e?new h(t,i):new u(i,o,t,n(e,i))}function n(e,t){switch(e){case"D":return new S(t);case"W":return new w(t);case"M":return new T(t)}return console.error("unknown dwm resolution: "+e),null}function r(e,t,i,o,n){var r,s,a,l,c,h,u,d=(new x).init("Etc/UTC",e),p=""!==t;return p?(s=i*E[t],r=E.D):(s=60*i*1e3,r=60*d.spec.findSessionEntry(0,0).length()*1e3),a=r/s,l=p?7:7-d.spec.weekEndsCount(),c=l*a,o<c?(h=o/a,n-h*E.D):(u=o/c,n-u*E.W)}function s(e,t,i,o){if("number"!=typeof i||"number"!=typeof t||isNaN(i)||isNaN(t))throw Error("Cannot extrapolate from "+t+" to "+i);return l(e,t,function(e,t){return t>i||o&&e.length>o})}function a(e,t,i){return l(e,t,function(e,t){return e.length>=i})}function l(e,t,i){var o,n,r,s,a,l=t;for(e.moveTo(l),o=[],n=0,r=0;!i(o,l);){if(n>5)throw console.trace(["0x10",new Date(t),"->",new Date(l)]),Error("Internal error 0x10 while extrapolating.");if((s=e.indexOfBar(l))===I)l=e.startOfBar(0);else if(s===M)l=e.startOfBar(M);else{if((a=e.startOfBar(s))!==t){if(r&&r===a)throw console.trace(["0x11",new Date(t),"->",new Date(a)]),Error("Internal error 0x11 while extrapolating.");r=a,n=0,o.push(a)}l=e.startOfBar(s+1)}e.moveTo(l),n++}return o}function c(e){if(isNaN(e))return NaN;var t=this.indexOfBar(e);return t===M&&(this.moveTo(e),t=this.indexOfBar(e)),t<0?NaN:this.startOfBar(t)}function h(e,t){this.period=e,this.session=t,this.sessionStart=Number.MIN_VALUE,this.sessionEnd=Number.MIN_VALUE}function u(e,t,i,o){this.period=i,this.sessionTgt=e,this.sessionSrc=t||e,this.builder=o,this.periodStart=-Number.MAX_VALUE,this.periodEnd=-Number.MAX_VALUE,this.periodLastBarStart=-Number.MAX_VALUE}function d(e,t,i){var o=A.clone(i);return t.alignToSessionStart(o,e),A.cal_to_utc(e,o)}function p(e,t){var i=A.get_day_of_week(t)-e.firstDayOfWeek();return i<0?i+7:i}function _(e,t){var i=t+e.firstDayOfWeek();return i>A.SATURDAY?i-A.SATURDAY:i}function f(e,t){var i=A.get_day_of_year(t)-1,o=p(e,t)-i%7;return 0===o?P(i/7):(o>=0&&(o-=7),P((o+i)/7))}function m(e,t,i){var o,n=0;for(o=t;o<i;++o)n+=e.isWeekEnd(_(e,o))?1:0;return n}function g(e,t){var i=new Date(Date.UTC(t,11,31,23,59)),o=A.days_per_year(t)-y(e,i);return e.isWeekEnd(A.get_day_of_week(i))&&o--,o}function y(e,t){var i,o,n=A.get_day_of_year(t)-1,r=p(e,t),s=r-n%7;return s<0&&(s+=7),i=0,n<7-s?i+=m(e,s,r):(o=0===s?0:m(e,s,7),i+=m(e,0,r)+o),i+f(e,t)*e.weekEndsCount()}function v(){}function b(e){this.sessionsSpec=e}function S(e){this.session=e}function w(e){this.session=e}function T(e){this.session=e}function P(e){return 0|e}function x(){}function C(e,t,i){var o,n,r,s,a=e.length;if(0===a)return-1;for(o=0,n=a-1,r=P((o+n)/2);;){if(0===(s=i(e[r],t))||s>0){if((n=r-1)<o)return r}else if(o=r+1,n<o)return r<a-1?r+1:-1;r=P((o+n)/2)}}function L(e,t){var i=A.utc_to_cal(t.timezone,+e),o=A.get_day_of_week(i),n=A.get_minutes_from_midnight(i),r=t.spec.findSessionEntry(o,n);return r.isOvernight()&&n>r.start()+r.length()&&o===r.dayOfWeek()-1&&(o++,n-=1440),o===r.dayOfWeek()&&n>=r.start()&&n<r.start()+r.length()}
var I=-1,M=-2,k="undefined"!=typeof window?window:t,A=k.PineJsCalendar?k.PineJsCalendar:i(34),E={S:1e3,D:864e5,W:6048e5,M:2592e6};return h.prototype.alignTime=c,h.prototype.alignTimeIfPossible=function(e){var t=this.alignTime(e);return isNaN(t)?e:t},h.prototype.indexOfBar=function(e){return e<this.sessionStart?I:e>=this.sessionEnd?M:P(A.time_seconds_diff(e,this.sessionStart)/this.period)},h.prototype.startOfBar=function(e){if(e===M)return this.sessionEnd;if(e<0)throw Error("Negative offset is not supported");return this.sessionStart+A.time_seconds(this.period*e)},h.prototype.isLastBar=function(e,t){return t>=this.sessionStart+A.time_seconds(this.period*(e+1)-1)},h.prototype.moveTo=function(e){var t=this.session.timezone,i=A.utc_to_cal(t,e),o=this.session.spec,n=o.alignToSessionStart(i,this.session.timezone);this.sessionStart=A.cal_to_utc(t,i),this.sessionEnd=this.sessionStart+A.time_minutes(n)},u.prototype.alignTime=c,u.prototype.alignTimeIfPossible=function(e){return this.tradingDayToSessionStart(e)},u.prototype.tradingDayToSessionStart=function(e){return this.moveTo(e),this.startOfBar(0)},u.prototype.indexOfBar=function(e){return e<this.periodStart?I:e>=this.periodEnd?M:0},u.prototype.startOfBar=function(e){if(e===M||e>0)return this.periodEnd;if(e===I)throw Error("PRE_SESSION is not supported");return this.periodStart},u.prototype.isLastBar=function(e,t){return t>=this.periodLastBarStart},u.prototype.moveTo=function(e){var t,i,o,n,r,s,a,l,c=A.utc_to_cal(this.sessionSrc.timezone,e);c=this.sessionSrc.spec.correctTradingDay(c,this.sessionSrc.timezone),t=this.sessionTgt.timezone,i=this.builder.indexOfPeriod(c,t),o=P(i/this.period)*this.period,n=A.get_year(c),r=this.sessionTgt.spec,s=this.builder.startOfPeriod(t,o,n),this.periodStart=d(t,r,s),a=o+this.period,l=this.builder.startOfPeriod(t,a,n),this.periodEnd=d(t,r,l),A.add_date(l,-1),this.moveToPrevWorkDay(r,l),this.periodLastBarStart=d(t,r,l),(this.periodLastBarStart<this.periodStart||this.periodLastBarStart===this.periodEnd)&&(this.periodLastBarStart=this.periodStart)},u.prototype.moveToPrevWorkDay=function(e,t){for(;e.isWeekEnd(A.get_day_of_week(t));)A.add_date(t,-1)},v.prototype.indexOfPeriod=function(e){return A.get_day_of_year(e)-1},v.prototype.startOfPeriod=function(e,t,i){var o=A.get_cal(e,i,A.JANUARY,1),n=A.add_days_considering_dst(e,o,t);return A.utc_to_cal(e,+n)},b.prototype.uber=new v,b.prototype.indexOfPeriod=function(e){return this.uber.indexOfPeriod(e)-y(this.sessionsSpec,e)},b.prototype.startOfPeriod=function(e,t,i){function o(e,t){this.weekEnds=m(e,t,7),this.calendarDays=7-t,this.businessDays=this.calendarDays-this.weekEnds}function n(e,t){var i,o=0;for(i=e;i<7&&(s.sessionsSpec.isWeekEnd(_(s.sessionsSpec,i))||!(--t<0));++i)o++;return o}function r(e,t,i){var o,n,r,a,l,c,h=0,u=i%(7-s.sessionsSpec.weekEndsCount());for(o=0,n=u-(0===e?0:t.businessDays);o<7&&n>0;++o)r=s.sessionsSpec.isWeekEnd(_(s.sessionsSpec,o)),h+=r?1:0,n-=r?0:1;return a=t.weekEnds+h,l=P((i-t.businessDays)/(7-s.sessionsSpec.weekEndsCount())),c=a+s.sessionsSpec.weekEndsCount()*l,i+c}
var s,a,l,c,h;return t>=g(this.sessionsSpec,i)&&(i++,t=0),s=this,a=new Date(Date.UTC(i,A.JANUARY,1)),l=p(this.sessionsSpec,a),c=new o(this.sessionsSpec,l),h=t<c.businessDays?n(l,t):r(l,c,t),this.uber.startOfPeriod(e,h,i)},S.prototype.indexOfPeriod=function(e){return this.builder().indexOfPeriod(e)},S.prototype.startOfPeriod=function(e,t,i){return this.builder().startOfPeriod(e,t,i)},S.prototype.builder=function(){return this._builder||(this._builder=this.session.spec.hasWeekEnds()?new b(this.session.spec):new v),this._builder},w.prototype.indexOfPeriod=function(e,t){var i=f(this.session.spec,e);return 0===i&&e<this.startOfPeriod(t,0,A.get_year(e))&&(i=-1),i},w.prototype.startOfPeriod=function(e,t,i){var o,n,r=new Date(Date.UTC(i,A.JANUARY,1)),s=p(this.session.spec,r),a=0===s?7*t:7*(t+1)-s,l=A.get_days_per_year(r);return a>l?this.startOfPeriod(e,0,i+P(a/l)):(o=A.get_cal(e,i,A.JANUARY,1),n=A.add_days_considering_dst(e,o,a),A.utc_to_cal(e,+n))},T.prototype.indexOfPeriod=function(e){return A.get_month(e)},T.prototype.startOfPeriod=function(e,t,i){var o,n,r,s;return t<0?(o=P((11-t)/12),i-=o,t+=12*o):t>A.DECEMBER&&(i++,t=A.JANUARY),n=A.get_cal_utc(i,t,1),r=p(this.session.spec,n),r>4&&(s=7-r,A.add_date(n,s)),n},x.prototype.init=function(e,t){return this.timezone="string"==typeof e?A.get_timezone(e):e,this.spec=new o(t),this},{PRE_SESSION:I,POST_SESSION:M,LASTBAR_SESSION:-3,newBarBuilder:e,Session:x,alignPeriodsBack:r,extrapolateBarsFrontByCount:a,extrapolateBarsFrontToTime:s,lower_bound:C,isTradingNow:L,numberOfFullWeeks:f,numberOfWeekEndsSinceYearStart:y,BusinessDaysBuilder:b,alignExchangeTimeToSessionStartAndReturnUTC:d}}();e.exports=n}).call(t,i(96))},function(e,t,i){"use strict";(function(e,t){var o,n,r,s,a,l;i(63),o=i(320).regExpEscape,n=i(108).TVXWindowEvents,r=i(158).TVLocalStorage,s=i(8),a=["s.tradingview.com","betacdn.tradingview.com"],l=window.TVSettings=function(){function t(e){return D+"."+e}function i(e,t){var i;return i=V[e],window.is_authenticated&&!W||null!=i||(i=V[e]),null==i?t:i}function c(e,t){var o=i(e,void 0);if(null==o)return t;try{return JSON.parse(o)}catch(i){return f(e),t}}function h(e,t){var o=i(e);return null==o?t:!(!o||"false"===o||0==+o)}function u(e,t,o){var n,r=i(e,void 0,o);if(null==r)return t;if(n=parseFloat(r),!isFinite(n))throw new TypeError('"'+r+'" is not float (key: "'+e+'")');return n}function d(e,t,o){var n,r=i(e,void 0,o);if(null==r)return t;if(n=parseInt(r,10),!isFinite(n))throw new TypeError('"'+r+'" is not int (key: "'+e+'")');return n}function p(e,t,i){i=i||{};var o=""+t;return V[e]!==o&&(V[e]=o,g(e)),i.forceFlush&&!B&&(B=setTimeout(function(){B=void 0,y()},E)),l}function _(e,t,i){return p(e,JSON.stringify(t),i),l}function f(e,t){return t=t||{},null!=V[e]&&(delete V[e],g(e)),t.forceFlush&&y(),l}function m(){R=void 0,O.length&&y()}function g(e){if(H)null==V[e]?H.removeValue(t(e)):H.setValue(t(e),V[e]);else if(!window.is_authenticated||W)try{null==V[e]?r.removeItem(t(e)):r.setItem(t(e),V[e])}catch(e){}else O.push(e),R||(R=setTimeout(m,A));n.emit("settings",JSON.stringify({key:e,
value:V[e]}))}function y(t){var i,o,n,r,s;if(!e.enabled("widget")&&window.is_authenticated&&!W&&0!==O.length){for(i=O,O=[],o={},n=i.length;n--;)r=i[n],s=V[r],void 0===s&&(s=null),o[r]=s;$.ajax({url:"/savesettings/",type:"POST",data:{delta:JSON.stringify(o)},async:!t})}}function v(){var e,t,i;for(e=0;e<r.length;e++)t=r.key(e),i=D.length,t.substring(0,i+1)===D+"."&&(O=[],r.removeItem(t));$.post("/restoredefaults/",{},function(e){TVDialogs.showNotice("Success","Defaults has been successfully restored")}).error(function(e){})}function b(){return Object.keys(V)}function S(e,t){var i,n=b(t),r=[];for(e=RegExp("^"+o(e).replace(/\\\*\\\*/gi,".+").replace(/\\\*/gi,"[^.]+")+"$","gi"),i=n.length-1;i>=0;i--)e.test(n[i])&&r.push(n[i]),e.lastIndex=0;return r}function w(e){for(var t=0;t<z.length;++t)if(z[t].exec(e))return!0;return!1}function T(){var t,i,o,n,s;for(V={},t=D+".",i=!e.enabled("save_chart_properties_to_local_storage"),o=r.length;o--;)(n=r.key(o))&&n.substring(0,t.length)===t&&(s=n.substring(t.length),i&&!w(s)||(V[s]=r.getItem(n)))}function P(e){var t,i,o,n,s;for(V={},t=0===Object.keys(e).length,i=D+".",o=r.length;o--;)(n=r.key(o))&&n.substring(0,i.length)===i&&(t&&(s=n.substring(i.length),p(s,r.getItem(n))),r.removeItem(n));Object.keys(e).forEach(function(t){V[t]=e[t]+""})}function x(){var e,t,i,o;if(TradingView.onWidget()&&a.includes(window.location.host))for(e="tradingview.",t=r.length;t--;)i=r.key(t),0===i.indexOf(e)&&(o=i.replace(e,D+"."),r.setItem(o,r.getItem(i)),r.removeItem(i))}function C(e){H?P(H.initialSettings||{}):window.is_authenticated&&!W?P(e||{}):(x(),T()),N.fire()}function L(e){H=e}var I,M,k,A,E,D,V,O,R,B,z,N,F=!1,W=e.enabled("cqg_terminal"),H=null;try{F=!TradingView.onWidget()&&parent&&parent!==window&&!!parent.IS_DEMO_PAGE}catch(e){}return F?(I={"widgetbar.layout-settings":{widgets:{},settings:{minimized:!0}},notShowMainWizard:!0},M=function(e,t,i){var o=I[e];return null==o?t:o},k=function(){},{loaded:!1,loadedModel:!1,getValue:M,getJSON:M,getBool:M,getFloat:M,getInt:M,setValue:k,setJSON:k,remove:k,restoreDefaults:k,keys:function(){return Object.keys(I)},keysMask:function(){return[]},sync:k,onSync:{subscribe:function(){}}}):(A=12e4,E=10,"local"===window.environment&&(A=5e3),D=TradingView.onWidget()?"tradingview-widget":"tradingview",V={},O=[],z=[/^widgetbar\.widget\.watchlist.+/,/.+quicks$/,/^widgetbar\.layout-settings$/,/^ChartSideToolbarWidget\.visible$/,/^onwidget\.watchlist$/,/^domepanel.visible$/,/^chart\.favoriteDrawings$/,/^chart\.favoriteDrawingsPosition$/,/^loadChartDialog.favorites$/,/^ChartFavoriteDrawingToolbarWidget\.visible/,/^trading\.chart\.proterty$/,/^trading_floating_toolbar\.position$/],n.on("settings",function(e){var t=JSON.parse(e);null==t.value?delete V[t.key]:V[t.key]=t.value}),N=new s,document.addEventListener("visibilitychange",function(){"hidden"!==document.visibiltyState&&!0!==document.hidden||y()}),window.addEventListener("unload",function(){y(!0)}),{loaded:!1,loadedModel:!1,getValue:i,getJSON:c,getBool:h,getFloat:u,getInt:d,setValue:p,setJSON:_,remove:f,restoreDefaults:v,
keys:b,keysMask:S,sync:C,onSync:N,setSettingsAdapter:L})}(),void 0!==t&&t&&t.exports&&(t.exports=l)}).call(t,i(4),i(47)(e))},function(e,t,i){"use strict";function o(e,t){return e<=t}function n(e,t){return e>=t}function r(e,t,i){return Math.min(Math.max(e,t),i)}function s(e){return e<0?-1:e>0?1:0}function a(e){if(e<0)return f.logDebug("MathEx.isBaseDecimal: argument less zero"),!1;for(var t=e;t>1;t/=10)if(t%10!=0)return!1;return!0}function l(e,t,i){return t-e<=i}function c(e,t,i){return Math.abs(e-t)<i}function h(e){return e<=0?(f.logDebug("MathEx.log10: argument less or equal zero"),NaN):Math.log(e)/Math.log(10)}function u(e,t){return e<t?-1:e>t?1:0}function d(e,t){var i,o;if(void 0===t&&(t=u),e.length<1)throw Error("array is empty");for(i=e[0],o=0;o<e.length;++o)t(e[o],i)<0&&(i=e[o]);return i}function p(e,t){var i,o;if(void 0===t&&(t=u),e.length<1)throw Error("array is empty");for(i=e[0],o=0;o<e.length;++o)t(e[o],i)>0&&(i=e[o]);return i}var _,f;Object.defineProperty(t,"__esModule",{value:!0}),t.lessThan=o,t.greaterThan=n,t.clamp=r,t.sign=s,t.isBaseDecimal=a,t.greaterOrEqual=l,t.equal=c,t.log10=h,t.defComparator=u,t.min=d,t.max=p,_=i(5),f=Object(_.getLogger)("Common.MathEx")},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,i){"use strict";function o(e){return-1!==v.indexOf(e)}function n(e){return-1!==b.indexOf(e)}function r(e){return e===g.STYLE_RANGE}function s(e){return-1!==S.indexOf(e)}function a(e){return n(e)||s(e)}function l(e){a(e)&&e!==g.STYLE_RANGE&&m.setValue("chart.lastUsedStyle",e)}function c(){var e=m.getInt("chart.lastUsedStyle");return void 0===e?g.STYLE_CANDLES:e}function h(e){return e?g.STYLE_RANGE:g.STYLE_CANDLES}function u(e,t){var i=r(t),o=y.Interval.isRange(e);return!i&&o?h(!0):i&&!o?h(!1):t}function d(e,t){return t?g.SYMBOL_STRING_DATA[e].type+"-"+g.SYMBOL_STRING_DATA[e].basicStudyVersion:g.SYMBOL_STRING_DATA[e].type}function p(e){var t=e.priceAxisProperties,i=t.lockScale.value(),o=e.style.value()===g.STYLE_PNF;(o||i)&&(t.log.setValue(!1),t.percentage.setValue(!1)),t.logDisabled.setValue(!(!o&&!i)),t.percentageDisabled.setValue(!(!o&&!i))}function _(e){return-1!==w.indexOf(e)}function f(e){return T[e]}var m,g,y,v,b,S,w,T;Object.defineProperty(t,"__esModule",{value:!0}),t.isRequiringRestartSeriesStyles=o,t.isRangeBasedStyle=n,t.isRangeStyle=r,t.isTimeBasedStyle=s,t.isValidStyle=a,t.setLastUsedStyle=l,t.getLastUsedStyle=c,t.getDefaultStyle=h,t.getChartStyleByResolution=u,t.chartStyleStudyId=d,t.preparePriceAxisProperties=p,t.hasProjection=_,t.barFunction=f,m=i(45),i.n(m),g=i(39),y=i(21),v=[g.STYLE_RENKO,g.STYLE_KAGI,g.STYLE_PNF,g.STYLE_PB,g.STYLE_HEIKEN_ASHI],b=[g.STYLE_RENKO,g.STYLE_KAGI,g.STYLE_PNF,g.STYLE_PB,g.STYLE_HEIKEN_ASHI,g.STYLE_RANGE],
S=[g.STYLE_BARS,g.STYLE_CANDLES,g.STYLE_HOLLOW_CANDLES,g.STYLE_LINE,g.STYLE_AREA,g.STYLE_BASELINE],w=[g.STYLE_RENKO,g.STYLE_PB,g.STYLE_KAGI,g.STYLE_PNF],T={open:function(e){return e[1]},high:function(e){return e[2]},low:function(e){return e[3]},close:function(e){return e[4]},hl2:function(e){return(e[2]+e[3])/2},hlc3:function(e){return(e[2]+e[3]+e[4])/3},ohlc4:function(e){return(e[1]+e[2]+e[3]+e[4])/4}}},,function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i.d(t,"CompositeRenderer",function(){return o});var o=function(){function e(){this._renderers=[],this._globalAlpha=1}return e.prototype.setGlobalAlpha=function(e){this._globalAlpha=e},e.prototype.append=function(e){this._renderers.push(e)},e.prototype.insert=function(e,t){this._renderers.splice(t,0,e)},e.prototype.draw=function(e){for(var t=0;t<this._renderers.length;t++)e.save(),e.globalAlpha=this._globalAlpha,this._renderers[t].draw(e),e.restore()},e.prototype.drawBackground=function(e){var t,i;for(e.save(),e.globalAlpha=this._globalAlpha,t=0;t<this._renderers.length;t++)i=this._renderers[t],i.drawBackground&&i.drawBackground(e);e.restore()},e.prototype.hitTest=function(e){var t,i,o=null;for(t=this._renderers.length-1;t>=0;t--)null!==(i=this._renderers[t].hitTest(e))&&(null===o||i.result()>o.result())&&(o=i);return o},e}()},function(e,t,i){"use strict";var o,n,r,s;i(249),o=i(46),n=o.greaterThan,r=o.lessThan,s=window.CanvasEx=i(195),TradingView.resizeCanvas=function(e,t,i){var o,n,r,s,a,l=e.prop("height"),c=e.prop("width");l&&c&&(l/=window.hidpiCanvasRatio||1,c/=window.hidpiCanvasRatio||1,l<1&&(l=1),c<1&&(c=1),o=$("<canvas>").prop("width",c).prop("height",l),n=o.get(0).getContext("2d"),r=Math.min(c,t),s=Math.min(l,i),r&&s&&n.drawImage(e.get(0),0,0,r,s,0,0,r,s),e.prop("height",i).prop("width",t),a=e.get(0).getContext("2d"),r&&s&&a.drawImage(o.get(0),0,0,r,s,0,0,r,s),o.remove())},s.computeDashPattern=function(e){return[[e.lineWidth,2*e.lineWidth],[5*e.lineWidth,6*e.lineWidth],[6*e.lineWidth,6*e.lineWidth],[e.lineWidth,4*e.lineWidth]][e.lineStyle-1]},s.drawLine=function(e,t,i,o,n){isFinite(t)&&isFinite(o)&&isFinite(i)&&isFinite(n)&&(e.lineStyle===s.LINESTYLE_DASHED||e.lineStyle===s.LINESTYLE_DOTTED||e.lineStyle===s.LINESTYLE_SPARSE_DOTTED?e.drawDashedLine(e,t,i,o,n):s.drawSolidLine(e,t,i,o,n))},s.drawArrow=function(e,t,i,o,n){isFinite(t)&&isFinite(o)&&isFinite(i)&&isFinite(n)&&(e.beginPath(),e.moveTo(o,n),e.lineTo(t,i),e.moveTo(t+2,i+2),e.lineTo(t-2,i+2),e.moveTo(t-1,i+1),e.lineTo(t+1,i+1),e.stroke())},s.drawSolidLine=function(e,t,i,o,n){e.beginPath(),e.moveTo(t,i),e.lineTo(o,n),e.stroke()},s.setLineStyle=function(e,t){e.lineStyle=t;var i=[];t!==s.LINESTYLE_SOLID&&(i=s.computeDashPattern(e)),"function"==typeof e.setLineDash?e.setLineDash(i):void 0!==e.mozDash?e.mozDash=i:void 0!==e.webkitLineDash&&(e.webkitLineDash=i)},s.drawPoly=function(e,t,i){var o,n;for(e.beginPath(),e.moveTo(t[0].x,t[0].y),o=0;o<t.length;o++)n=t[o],e.lineTo(n.x,n.y);e.closePath(),e.stroke(),i&&e.fill()},s.drawRoundRect=function(e,t,i,o,n,r){e.beginPath(),e.moveTo(t+r,i),
e.lineTo(t+o-r,i),e.arcTo(t+o,i,t+o,i+r,r),e.lineTo(t+o,i+n-r),e.arcTo(t+o,i+n,t+o-r,i+n,r),e.lineTo(t+r,i+n),e.arcTo(t,i+n,t,i+n-r,r),e.lineTo(t,i+r),e.arcTo(t,i,t+r,i,r)},s.drawDashedLineHorizontal=function(e,t,i,o){var n,r,a,l,c,h,u;for(e.save(),n=s.computeDashPattern(e),r=0,a=e.lineWidth,l=a/2,e.translate(-l,-l),c=!0,h=t+o;t<h;)u=n[r],c&&e.fillRect(t,i,u,a),c=!c,t+=u,r=r===n.length-1?0:r+1;e.restore()},s.drawDashedLineVertical=function(e,t,i,o){var n,r,a,l,c,h,u;for(e.save(),n=s.computeDashPattern(e),r=0,a=e.lineWidth,l=a/2,e.translate(-l,-l),c=!0,h=i+o;i<h;)u=n[r],c&&e.fillRect(t,i,a,u),c=!c,i+=u,r=r===n.length-1?0:r+1;e.restore()},s.lineStyles=[],"undefined"!=typeof CanvasRenderingContext2D&&(CanvasRenderingContext2D.prototype.setFont=function(e){if(this.font!==e)try{this.font=e}catch(e){}},CanvasRenderingContext2D.prototype.lineStyle=s.LINESTYLE_SOLID,s.originalSave=CanvasRenderingContext2D.prototype.save,s.originalRestore=CanvasRenderingContext2D.prototype.restore,CanvasRenderingContext2D.prototype.save=function(){s.lineStyles.push(this.lineStyle),s.originalSave.call(this)},CanvasRenderingContext2D.prototype.restore=function(){s.lineStyles.length>0&&(this.lineStyle=s.lineStyles.pop(),s.originalRestore.call(this))},CanvasRenderingContext2D.prototype.drawDashedLine=function(e,t,i,o,n){e.save();var r=s.computeDashPattern(e);if(e.beginPath(),"function"==typeof e.setLineDash)e.setLineDash(r);else if(void 0!==e.mozDash)e.mozDash=r;else{if(void 0===e.webkitLineDash)return e.dashedLineTo(t,i,o,n,r),e.stroke(),void e.restore();e.webkitLineDash=r}e.moveTo(t,i),e.lineTo(o,n),e.stroke(),e.restore()},CanvasRenderingContext2D.prototype.dashedLineTo=function(e,t,i,o,s){var a,l,c,h,u,d,p={thereYet:n,cap:Math.min},_={thereYet:n,cap:Math.min};for(t-o>0&&(_.thereYet=r,_.cap=Math.max),e-i>0&&(p.thereYet=r,p.cap=Math.max),this.moveTo(e,t),a=e,l=t,c=0,h=!0;!p.thereYet(a,i)||!_.thereYet(l,o);)u=Math.atan2(o-t,i-e),d=s[c],a=p.cap(i,a+Math.cos(u)*d),l=_.cap(o,l+Math.sin(u)*d),h?this.lineTo(a,l):this.moveTo(a,l),c=(c+1)%s.length,h=!h}),e.exports=s},,,,,,,function(e,t,i){"use strict";var o,n,r,s;Object.defineProperty(t,"__esModule",{value:!0}),i.d(t,"PriceRange",function(){return s}),o=i(14),i.n(o),n=i(5),r=Object(n.getLogger)("Chart.PriceRange"),s=function(){function e(e,t){var i,o;null!==e&&"object"==typeof e?(i=e,this._minValue=i.m_minValue,this._maxValue=i.m_maxValue):(o=e,this._minValue=o,void 0!==t&&(this._maxValue=t))}return e.prototype.equals=function(e){return this._minValue===e._minValue&&this._maxValue===e._maxValue},e.prototype.clone=function(){return new e(this._minValue,this._maxValue)},e.prototype.minValue=function(){return this._minValue},e.prototype.setMinValue=function(e){this._minValue=e},e.prototype.maxValue=function(){return this._maxValue},e.prototype.setMaxValue=function(e){this._maxValue=e},e.prototype.length=function(){return this._maxValue-this._minValue},e.prototype.isEmpty=function(){return this._maxValue===this._minValue||this._maxValue!==this._maxValue||this._minValue!==this._minValue},
e.prototype.serialize=function(){return{m_maxValue:this._maxValue,m_minValue:this._minValue}},e.prototype.state=function(){return{max:this._maxValue,min:this._minValue}},e.prototype.merge=function(t){return new e(Math.min(this.minValue(),t.minValue()),Math.max(this.maxValue(),t.maxValue()))},e.prototype.apply=function(e,t){this._minValue=Math.min(this._minValue,e),this._maxValue=Math.max(this._maxValue,t)},e.prototype.set=function(e,t){this._minValue=e,this._maxValue=t},e.prototype.scaleAroundCenter=function(e){var t,i,n,s;if(!Object(o.isNumber)(e))return void r.logDebug("PriceRange.scaleAroundCenter: invalid coeff");0!==(t=this._maxValue-this._minValue)&&(i=.5*(this._maxValue+this._minValue),n=this._maxValue-i,s=this._minValue-i,n*=e,s*=e,this._maxValue=i+n,this._minValue=i+s)},e.prototype.shift=function(e){if(!Object(o.isNumber)(e))return void r.logDebug("PriceRange.shift: invalid coeff");this._maxValue+=e,this._minValue+=e},e.prototype.containsStrictly=function(e){return e.minValue()>this._minValue&&e.maxValue()<this._maxValue},e}()},function(e,t,i){"use strict";var o,n=i(27),r=i(3),s=i(24),a=i(36),l=function(){function e(e){this.setData(e)}return e.prototype.setData=function(e){this._data=r.a({},e)},e.prototype.draw=function(e,t){var i,o,n,r,l,c,h,u,d,p,_,f,m,g,y,v,b,S,w,T;this._data.visible&&(i=t.fontSize,e.font=t.font,o=t.tickLength,n=t.borderSize,r=t.paddingTop,l=t.paddingBottom,c=t.paddingInner,h=t.paddingOuter,u=Math.ceil(t.widthCache.measureText(e,this._data.text)),d=t.baselineOffset,p=t.fontSize+r+l,_=n+u+c+h+o,f=this._data.coordinate,this._data.fixedCoordinate&&(f=this._data.fixedCoordinate),m=f-Math.floor(i/2)-r-.5,g=m+p,y=t.isLeft?t.width-n-.5:.5,v=y,e.fillStyle=Object(s.resetTransparency)(this._data.background),e.lineWidth=1,this._data.text&&(t.isLeft?(v=y-_,b=y-o,S=v+h):(v=y+_,b=y+o,S=y+n+o+c),e.beginPath(),e.moveTo(y,m),e.lineTo(v,m),e.lineTo(v,g),e.lineTo(y,g),e.fill(),e.beginPath(),e.strokeStyle=this._data.color,e.moveTo(y,f),e.lineTo(b,f),e.stroke(),e.textAlign="left",e.fillStyle=this._data.color,e.fillText(Object(a.startWithLTR)(this._data.text),S,g-l-d)),this._data.secondLine&&(w=Math.ceil(t.widthCache.measureText(e,this._data.secondLine)),T=w+c+h,e.fillStyle=Object(s.resetTransparency)(this._data.background),this._data.text&&(m+=p+1,g+=p+1),t.isLeft?(v=Math.min(v,t.width-o),y=v+T,S=v+h):(y=Math.max(v-T,n),v=y+T,S=y+c),e.beginPath(),e.moveTo(y,m),e.lineTo(v,m),e.lineTo(v,g),e.lineTo(y,g),e.fill(),e.textAlign="left",e.fillStyle=this._data.color,e.fillText(Object(a.startWithLTR)(this._data.secondLine),S,g-l-d)))},e.prototype.height=function(e,t){var i=e.fontSize+e.paddingTop+e.paddingBottom;return this._data.secondLine&&t?2*i+1:i},e}();i.d(t,"a",function(){return o}),o=function(){function e(){this._rendererData={text:"",coordinate:0,fixedCoordinate:0,color:"#FFF",background:"#000",visible:!1},this._renderer=new l(this._rendererData),this._invalidated=!0}return e.prototype.text=function(){return this._rendererData.text},e.prototype.background=function(){return this._rendererData.background},
e.prototype.color=function(){return this.generateTextColor(this.background())},e.prototype.generateTextColor=function(e){return"black"===Object(n.rgbToBlackWhiteString)(Object(n.parseRgb)(e),160)?"white":"black"},e.prototype.coordinate=function(){return this._updateRendererDataIfNeeded(),this._rendererData.coordinate},e.prototype.floatCoordinate=function(){return this._updateRendererDataIfNeeded(),this._rendererData.floatCoordinate||this._rendererData.coordinate},e.prototype.update=function(){this._invalidated=!0},e.prototype.height=function(e,t){return void 0===t&&(t=!1),this._renderer.height(e,t)},e.prototype.getFixedCoordinate=function(){return this._rendererData.fixedCoordinate||0},e.prototype.setFixedCoordinate=function(e){this._rendererData.fixedCoordinate=e},e.prototype.isVisible=function(){return this._rendererData.visible},e.prototype.renderer=function(){return this._updateRendererDataIfNeeded(),this._renderer.setData(this._rendererData),this._renderer},e.prototype._updateRendererDataIfNeeded=function(){this._invalidated&&(this._updateRendererData(this._rendererData),this._invalidated=!1)},e}()},,function(e,t,i){"use strict";function o(e,t){var i=t.edge;return i.A*e.x+i.B*e.y+i.C>0===t.isPositive}function n(e,t,i,o){var n=t.add(i).scaled(.5),r=n.add(o).scaled(.5),s=l.intersectLineSegments(t,i,r,e);return null===s&&(null===(s=l.intersectLineSegments(i,o,r,e))&&null===(s=l.intersectLineSegments(o,t,r,e)))}function r(e,t,i){return e.x>=t.x&&e.x<=i.x&&e.y>=t.y&&e.y<=i.y}function s(e,t){var i,o,n,r=t.length-1,s=!1,a=e.x,l=e.y;for(i=0;i<t.length;i++)o=t[i],n=t[r],(o.y<l&&n.y>=l||n.y<l&&o.y>=l)&&o.x+(l-o.y)/(n.y-o.y)*(n.x-o.x)<a&&(s=!s),r=i;return s}function a(e,t,i){return(e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.y-t.y)<=i*i}Object.defineProperty(t,"__esModule",{value:!0});var l=i(128);t.pointInHalfplane=o,t.pointInTriangle=n,t.pointInRectangle=r,t.pointInPolygon=s,t.pointInCircle=a},function(e,t,i){"use strict";function o(e){return x.Interval.parse(e).value()}function n(e){var t,i,n,r;return!!x.Interval.isRange(e)||(e=o(e),t=I.linking.supportedResolutions.value(),i=!1,void 0!==t?(n=t.map(o),i=-1!==n.indexOf(e)):i=!0,r=I.linking.intraday.value(),r?i:x.Interval.isDWM(e)&&i)}function r(e){x.Interval.isValid(e)&&(x.Interval.isRange(e)?L.setValue("chart.lastUsedRangeResolution",e):L.setValue("chart.lastUsedTimeBasedResolution",e))}function s(e){var t,i=L.getValue("chart.lastUsedRangeResolution");return void 0!==i&&x.Interval.isRange(i)?i:(t=e.filter(function(e){return x.Interval.isRange(e)}),t.includes("100R")?"100R":t.length>0?t[0]:"100R")}function a(e){var t,i=L.getValue("chart.lastUsedTimeBasedResolution");return void 0!==i&&x.Interval.isTimeBased(i)?i:(t=e.filter(function(e){return x.Interval.isTimeBased(e)}),t.includes("1D")?"1D":t.length>0?t[0]:"1D")}function l(e){return e?"100R":"1D"}function c(e,t,i){var o=C.isRangeStyle(e),n=x.Interval.isRange(t);return!o&&n?a(i):o&&!n?s(i):t}function h(e){return x.Interval.isRange(e)?"1":e}function u(e){var t=x.Interval.parse(e),i=d(t.kind()),o=t.multiplier();return void 0!==o&&o<=i}
function d(e){var t=D[e];return Number.isNaN(t)?1:t}function p(e){return d(x.Interval.kind(e))}function _(e){var t=f(L.getJSON(e,[]));return k()(t.filter(u).map(o))}function f(e){return Array.isArray(e)?e:Object.keys(e)}function m(){var e,t,i,n=[];for(e=0;e<arguments.length;e++)n[e]=arguments[e];return i=(t=[]).concat.apply(t,n),i=k()(i.filter(u).map(o)),g(i)}function g(e){return e.sort(v)}function y(e){var t=new x.Interval(e),i=t.multiplier()||1;return t.kind()===x.ResolutionKind.Minutes&&P(i)?[x.ResolutionKind.Hours,Math.floor(i/60)]:[t.kind(),i]}function v(e,t){var i=y(e),o=i[0],n=i[1],r=y(t),s=r[0],a=r[1];return o!==s?V[o]-V[s]:n-a}function b(){return[]}function S(e){var t=w(e);return""+t.multiplier+t.shortKind}function w(e){var t=x.Interval.parse(e),i=t.multiplier(),o=t.kind();if(!t.isValid()||void 0===i)throw new TypeError("Can't translate invalid interval");return t.kind()===x.ResolutionKind.Minutes&&P(i)&&(i=Math.floor(i/60),o=x.ResolutionKind.Hours),{multiplier:""+i,shortKind:T(o),hint:i+" "+T(o,i),mayOmitMultiplier:t.isDWM()&&1===i}}function T(e,t){if(t)switch(e){case x.ResolutionKind.Days:return window.t("day",{plural:"days",count:t});case x.ResolutionKind.Weeks:return window.t("week",{plural:"weeks",count:t});case x.ResolutionKind.Months:return window.t("month",{plural:"months",count:t});case x.ResolutionKind.Seconds:return window.t("second",{plural:"seconds",count:t});case x.ResolutionKind.Minutes:return window.t("minute",{plural:"minutes",count:t});case x.ResolutionKind.Hours:return window.t("hour",{plural:"hours",count:t});case x.ResolutionKind.Range:return window.t("range",{plural:"ranges",count:t});default:return e}else switch(e){case x.ResolutionKind.Minutes:return window.t("m",{context:"interval_short"});case x.ResolutionKind.Hours:return window.t("h",{context:"interval_short"});case x.ResolutionKind.Days:return window.t("D",{context:"interval_short"});case x.ResolutionKind.Weeks:return window.t("W",{context:"interval_short"});case x.ResolutionKind.Months:return window.t("Mo",{context:"interval_short"});case x.ResolutionKind.Range:return window.t("R",{context:"interval_short"});default:return""}}function P(e){return e>=60&&!(e%60)}var x,C,L,I,M,k,A,E,D,V;Object.defineProperty(t,"__esModule",{value:!0}),t.normalizeIntervalString=o,t.isAvailable=n,t.setLastUsedResolution=r,t.getRangeResolution=s,t.getTimeBasedResolution=a,t.getDefaultResolution=l,t.getResolutionByChartStyle=c,t.getServerInterval=h,t.isResolutionMultiplierValid=u,t.getMaxResolutionValue=p,t.getResolutionsFromSettings=_,t.convertResolutionsFromSettings=f,t.mergeResolutions=m,t.sortResolutions=g,t.getCustomResolutions=b,t.getTranslatedResolution=S,t.getTranslatedResolutionModel=w,t.isHour=P,i(11),x=i(21),C=i(48),L=i(45),i.n(L),I=i(64),M=i(205),k=i.n(M),A={},A[x.ResolutionKind.Seconds]=60,A[x.ResolutionKind.Minutes]=1440,A[x.ResolutionKind.Hours]=24,A[x.ResolutionKind.Days]=365,A[x.ResolutionKind.Weeks]=52,A[x.ResolutionKind.Months]=12,A[x.ResolutionKind.Range]=1e3,A[x.ResolutionKind.Invalid]=NaN,D=A,E={},E[x.ResolutionKind.Seconds]=1,
E[x.ResolutionKind.Minutes]=2,E[x.ResolutionKind.Hours]=3,E[x.ResolutionKind.Days]=4,E[x.ResolutionKind.Weeks]=5,E[x.ResolutionKind.Months]=6,E[x.ResolutionKind.Range]=7,E[x.ResolutionKind.Invalid]=8,V=E},function(e,t,i){"use strict";(function(t){function i(){return/on-features-page=1/i.test(window.location.search)}var o=window.TradingView=window.TradingView||{};o.className=function(e){for(var t in this)if(o[t]===e)return t;return null},o.isOnFeaturePage=i(),o.wrapUrl=function(e){return t.enabled("charting_library_base")&&(e=e.replace("/static/","")),e},o.isMobile=function(){var e=/Android/i.test(navigator.userAgent),t=/BlackBerry/i.test(navigator.userAgent),i=/iPhone|iPad|iPod/i.test(navigator.userAgent),o=/Opera Mini/i.test(navigator.userAgent),n=e||t||i||o;return{Android:function(){return e},BlackBerry:function(){return t},iOS:function(){return i},Opera:function(){return o},any:function(){return n}}}(),o.supportTouch=function(){return Modernizr.touch||o.isMobile.any()},o.onWidget=function(){var e,t,i=["^widgetembed/?$","^cmewidgetembed/?$","^([0-9a-zA-Z-]+)/widgetembed/?$","^([0-9a-zA-Z-]+)/widgetstatic/?$","^([0-9a-zA-Z-]+)?/?miniwidgetembed/?$","^([0-9a-zA-Z-]+)?/?mediumwidgetembed/?$","^embed(-static)?/([0-9a-zA-Z]{8})/?$","^widgetpopup/?$","^extension/?$","^chatwidgetembed/?$","^ideaswidgetembed/?$","^ideas-widget/?$","^view-idea-widget/([0-9a-zA-Z]{8})/?$","^user-info-widget/?$","^user-info-widget-get/(.+?)?/?$","^embed-quotes-provider/?$","^idea-popup/?$","^hotlistswidgetembed/?$","^([0-9a-zA-Z-]+)/hotlistswidgetembed/?$","^marketoverviewwidgetembed/?$","^([0-9a-zA-Z-]+)/marketoverviewwidgetembed/?$","^eventswidgetembed/?$","^tickerswidgetembed/?$","^forexcrossrateswidgetembed/?$","^forexheatmapwidgetembed/?$","^marketquoteswidgetembed/?$","^screenerwidget/?$","^cryptomktscreenerwidget/?$","^([0-9a-zA-Z-]+)/cryptomktscreenerwidget/?$","^([0-9a-zA-Z-]+)/marketquoteswidgetembed/?$","^technical-analysis-widget-embed/$","^singlequotewidgetembed/?$"],o=window.location.pathname.replace(/^\//,"");for(t=i.length-1;t>=0;t--)if(e=RegExp(i[t]),e.test(o))return!0;return!1},o.onOrder=function(){return"/order/"===window.location.pathname},e.exports.CheckMobile=o.isMobile,e.exports.isOnFeaturePage=i,e.exports.onWidget=o.onWidget,e.exports.supportTouch=o.supportTouch}).call(t,i(4))},function(e,t,i){"use strict";var o,n,r,s,a,l;Object.defineProperty(t,"__esModule",{value:!0}),i.d(t,"Linking",function(){return a}),i.d(t,"linking",function(){return l}),o=i(15),n=i.n(o),r=i(4),i.n(r),function(e){e[e.NotBound=0]="NotBound",e[e.BoundToWidget=1]="BoundToWidget",e[e.BoundToModel=2]="BoundToModel"}(s||(s={})),a=function(){function e(){this._watchedSymbol=new n.a,this._seriesShortSymbol=new n.a,this._proSymbol=new n.a,this._watchedInterval=new n.a,this._watchedIntraday=new n.a,this._watchedSupportedResolutions=new n.a,this._symbolNamesList=new n.a,this._chartWidgetBindingState=s.NotBound,this._activeChartWidget=null,this._watchedSymbolListenerBound=this._watchedSymbolListener.bind(this),
this._watchedIntervalListenerBound=this._watchedIntervalListener.bind(this),this._onSymbolLinkBound=this._onSymbolLink.bind(this),this._searchCharts=null,this._selfEmit=!1,this._preventFeedBySymbol=!1}return Object.defineProperty(e.prototype,"symbol",{get:function(){return this._watchedSymbol},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"proSymbol",{get:function(){return this._proSymbol},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"symbolNamesList",{get:function(){return this._symbolNamesList},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"seriesShortSymbol",{get:function(){return this._seriesShortSymbol.readonly()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"interval",{get:function(){return this._watchedInterval},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"intraday",{get:function(){return this._watchedIntraday.readonly()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"supportedResolutions",{get:function(){return this._watchedSupportedResolutions.readonly()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"preventFeedBySymbol",{get:function(){return this._preventFeedBySymbol},enumerable:!0,configurable:!0}),e.prototype.bindToChartWidget=function(e){var t,i;if(this.unbindFromChartWidget(),this._activeChartWidget=e,t=e.model())return void this._onChartModelCreated(t);e.modelCreated().subscribe(this,this._onChartModelCreated),this._chartWidgetBindingState=s.BoundToWidget,i=e.properties().mainSeriesProperties,this._watchedSymbol.setValue(i.symbol.value()),this._watchedInterval.setValue(i.interval.value())},e.prototype.unbindFromChartWidget=function(){switch(this._chartWidgetBindingState){case s.BoundToWidget:if(!this._activeChartWidget)throw Error("ChartWidget is undefined");this._activeChartWidget.modelCreated().unsubscribe(this,this._onChartModelCreated);break;case s.BoundToModel:this._symbolProperty().unsubscribe(this,this._onSymbolPropertyChange),this._watchedSymbol.unsubscribe(this._watchedSymbolListenerBound),this._mainSeries().onSymbolResolved().unsubscribe(this,this._updateSeriesSymbolInfo),this._mainSeries().onSymbolError().unsubscribe(this,this._updateSeriesSymbolInfo),this._intervalProperty().unsubscribe(this,this._onIntervalPropertyChange),this._watchedInterval.unsubscribe(this._watchedIntervalListenerBound),delete this._watchedSymbol.hook,delete this._watchedSymbol.writeLock}this._activeChartWidget=null,this._chartWidgetBindingState=s.NotBound},e.prototype.getChartWidget=function(){return this._activeChartWidget},e.prototype.bindToChartWidgetCollection=function(e){var t=this;this._chartWidgetCollection=e,this.unbindFromChartWidget(),e.activeChartWidget.subscribe(function(e){t.unbindFromChartWidget(),t.bindToChartWidget(e)},{callWithLast:!0})},e.prototype.bindToSearchCharts=function(e){this.unbindFromSearchCharts(),this._searchCharts=e,e.onSearchBySymbol.subscribe(this,this._onSearchBySymbol),this._watchedSymbol.subscribe(this._onSymbolLinkBound)},
e.prototype.unbindFromSearchCharts=function(){this._searchCharts&&(this._searchCharts.onSearchBySymbol.unsubscribe(this,this._onSearchBySymbol),this._watchedSymbol.unsubscribe(this._onSymbolLinkBound),this._searchCharts=null)},e.prototype.setPreventFeedBySymbol=function(e){this._preventFeedBySymbol=e},e.prototype._onSearchBySymbol=function(e){if(!e.resolved_symbol)throw Error("no resolved_symbol");this._selfEmit=!0,this._watchedSymbol.setValue(e.resolved_symbol),this._selfEmit=!1},e.prototype._onSymbolLink=function(e){if(!this._selfEmit){if(!this._searchCharts)throw Error("No search charts defined");this._preventFeedBySymbol||this._searchCharts.feedBySymbol(e)}},e.prototype._mainSeries=function(){if(!this._activeChartWidget)throw Error("ChartWidget is undefined");return this._activeChartWidget.model().mainSeries()},e.prototype._properties=function(){return this._mainSeries().properties()},e.prototype._symbolProperty=function(){return this._properties().symbol},e.prototype._intervalProperty=function(){return this._properties().interval},e.prototype._watchedSymbolListener=function(e){(r.enabled("same_data_requery")||this._symbolProperty().value()!==e)&&this._chartWidgetCollection.setSymbol(e)},e.prototype._onSymbolPropertyChange=function(){this._watchedSymbol.setValue(this._symbolProperty().value())},e.prototype._onSymbolResolved=function(e){var t=this._mainSeries().symbolInfo();t&&this._applyValuesFromSymbolInfo(t)},e.prototype._applyValuesFromSymbolInfo=function(e){var t=e.pro_name||r.enabled("trading_terminal")&&(e.full_name||e.name)||"";this._proSymbol.setValue(t),e.aliases&&this._symbolNamesList.setValue(e.aliases)},e.prototype._updateSeriesSymbolInfo=function(){this._seriesShortSymbol.setValue(this._properties().shortName.value());var e=this._mainSeries().symbolInfo();e?(this._applyValuesFromSymbolInfo(e),e.hasOwnProperty("supported_resolutions")?this._watchedSupportedResolutions.setValue(e.supported_resolutions):this._watchedSupportedResolutions.setValue(void 0),this._watchedIntraday.setValue(!!e.has_intraday)):(this._watchedIntraday.deleteValue(),this._proSymbol.deleteValue())},e.prototype._watchedIntervalListener=function(e){(r.enabled("same_data_requery")||this._intervalProperty().value()!==e)&&this._chartWidgetCollection.setResolution(e)},e.prototype._onIntervalPropertyChange=function(){this._watchedInterval.setValue(this._intervalProperty().value())},e.prototype._onChartModelCreated=function(e){var t,i,o;if(!this._activeChartWidget)throw Error("ChartWidget is undefined");this._chartWidgetBindingState=s.BoundToModel,this._activeChartWidget.modelCreated().unsubscribe(this,this._onChartModelCreated),t=this._symbolProperty(),t.subscribe(this,this._onSymbolPropertyChange),this._watchedSymbol.setValue(t.value()),this._watchedSymbol.subscribe(this._watchedSymbolListenerBound),i=this._mainSeries(),i.onSymbolResolved().subscribe(this,this._onSymbolResolved),this._watchedSymbol.hook=function(e){return i.symbolSameAsCurrent(e)&&(e=i.symbol()),e},i.onSymbolResolved().subscribe(this,this._updateSeriesSymbolInfo),
i.onSymbolError().subscribe(this,this._updateSeriesSymbolInfo),i.onSymbolNotPermitted().subscribe(this,this._updateSeriesSymbolInfo),i.onSymbolGroupNotPermitted().subscribe(this,this._updateSeriesSymbolInfo),i.onExtendedHoursNotPermitted().subscribe(this,this._updateSeriesSymbolInfo),this._updateSeriesSymbolInfo(),o=this._intervalProperty(),o.subscribe(this,this._onIntervalPropertyChange),this._watchedInterval.setValue(o.value()),this._watchedInterval.subscribe(this._watchedIntervalListenerBound),this._activeChartWidget.readOnly()&&(this._watchedSymbol.writeLock=!0)},e}(),window.TradingView=window.TradingView||{},l=new a,window.TradingView.Linking=l},function(e,t,i){"use strict";(function(e,o,n,r){function s(e){this._series=e,this._model=e.m_model,this._points=[new V(0,0)],this._invalidated=!0,this._lineRenderer=new L}function a(){return{count:TradingView.DEFAULT_BAR_COUNT}}function l(t,n,r){var c,_=i(118);M.call(this,t),this._boxSizeChanged=new e,this._tagsChanged=new e,this._symbolIntervalChanged=new e,this._symbolResolved=new e,this._symbolError=new e,this._symbolNotPermitted=new e,this._symbolGroupNotPermitted=new e,this._intervalChanged=new e,this._extendedHoursChanged=new e,this._extendedHoursNotPermitted=new e,this.chartTypeNotPermitted=new e,this.intradaySpreadNotPermitted=new e,this.intradayExchangeNotPermitted=new e,this.customIntervalNotPermitted=new e,this.chartWidgetInitialized=new e,this._startLoading=new e,this._dataLoaded=new e,this._tickmarksRangeChanged=new e,this._barReceived=new e,this._onStyleChanged=new e,this._onCompleted=new e,this._onStatusChanged=new e,this._onRestarted=new e,this._onSessionsStudyCreated=new e,this.requestingIntradayWhenNotSupported=new e,this.requestingResolutionWhenNotSupported=new e,this._priceScaleChanged=new e,this._onInReplayStateChanged=new e,this._requestOptions=r||a(),this.m_model=t,this._chartApi=t._chartApi,this.m_data=new E(["time","open","high","low","close","adt","style"]),this.setProperties(n),this._prevChartStyle=n.style.value(),this.createPaneView(),this._dataWindowView=new p(this,t),this._statusView=new h(this,t.properties()),this._priceAxisViews=[new d(this,{model:t}),new u(this,{model:t})],this._symbolInfo=null,this._status=l.STATUS_OFFLINE,this._syncModel=null,this._replaySubscriber=null,c=this,this._turnaroundCounter=1,this._turnaround="s"+this._turnaroundCounter,this._handler=function(e){c.onData(e)},this._haStyle={studyId:Q.chartStyleStudyId(l.STYLE_HEIKEN_ASHI,!0)},this._renkoStyle={studyId:Q.chartStyleStudyId(l.STYLE_RENKO,!0)},this._pbStyle={studyId:Q.chartStyleStudyId(l.STYLE_PB,!0)},this._kagiStyle={studyId:Q.chartStyleStudyId(l.STYLE_KAGI,!0)},this._pnfStyle={studyId:Q.chartStyleStudyId(l.STYLE_PNF,!0)},this._rangeStyle={studyId:Q.chartStyleStudyId(l.STYLE_RANGE,!0)},this._properties.addExclusion&&this._properties.addExclusion("visible"),this._base=100,this._formatter=new R(this._base),this._predictBars=0,this._futureBarsPaneView=null,this._properties.showInDataWindow.listeners().subscribe(t,_.prototype.fullUpdate),this.marketStatus=new o,
this._seriesLoaded=!1,this.properties().minTick.listeners().subscribe(this,l.prototype._recreateFormatter),c=this,this.properties().minTick.listeners().subscribe(null,function(){c.m_model.invalidate(new D(D.FULL_UPDATE))}),this._priceLineView=new s(this),this._gotoDateView=new I(this),this.bindStyleChange(),this.bindJapChartsInputs(),this._createIsPrevClosePriceAvailableProperty(),this.createExtendedHoursProperty(),this.extendedHours.listeners().subscribe(this,function(){this._extendedHoursChanged.fire()}),this._extendedHoursNotPermitted.subscribe(this,function(){this._properties.extendedHours.setValue(!1)}),this._extendedHoursChanged.subscribe(this,function(){this._status!==l.STATUS_SNAPSHOT&&this.restart()}),this._symbolIntervalChanged.subscribe(this,this.checkInterval),this.properties().showCountdown.listeners().subscribe(this,l.prototype._onChangeShowCountdown),this._onChangeShowCountdown(this.properties().showCountdown),this._recreateFormatter(),this._isDWMCached=null,this.properties().lineStyle.priceSource.listeners().subscribe(this,this._updateBarFunction),this.properties().areaStyle.priceSource.listeners().subscribe(this,this._updateBarFunction),this.properties().baselineStyle.priceSource.listeners().subscribe(this,this._updateBarFunction),this._updateBarFunction()}var c,h,u,d,p,_,f,m,g,y,v,b,S,w,T,P,x,C,L,I,M,k,A,E,D,V,O,R,B,z,N,F,W,H,j,U,q,Y,G,K,Z,X,J,Q,ee,te,ie,oe,ne,re,se;TradingView.DEFAULT_BAR_COUNT=300,TradingView.TIME_PLOT=0,TradingView.OPEN_PLOT=1,TradingView.HIGH_PLOT=2,TradingView.LOW_PLOT=3,TradingView.CLOSE_PLOT=4,TradingView.ADT_PLOT=6,TradingView.STYLE_PLOT=7,c=i(7).ensureNotNull,h=i(712),u=i(714).ProjectionSeriesPriceAxisView,d=i(279).SeriesPriceAxisView,p=i(715),_=i(280),f=_.SeriesAreaPaneView,m=_.SeriesLinePaneView,g=_.SeriesHollowCandlesPaneView,y=_.SeriesCandlesPaneView,v=_.SeriesBarsPaneView,b=_.SeriesHeikenAshiPaneView,S=_.SeriesBaselinePaneView,w=_.SeriesBaselineLinePaneView,T=i(4),P=i(1).propertyPages,x=i(216).BarsRange,C=i(168).SeriesBarColorer,L=i(84).HorizontalLineRenderer,I=i(717),M=i(30).PriceDataSource,k=i(97),A=i(718).FutureBarsPaneView,E=i(196).SeriesData,D=i(16),V=i(6).Point,O=i(719),R=i(19).PriceFormatter,B=i(20),z=B.PlotList,N=B.PlotRowSearchMode,F=B.mergeMinMax,W=i(28),H=i(260).unpackNonSeriesData,j=i(283).SyncModel,U=i(32).trackEvent,q=i(122).translatedIntervalString,Y=i(37),G=i(5),K=G.getLogger("Chart.Series"),Z=G.getLogger("Chart.Series.Updates",{highRate:!0}),X=i(39),J=i(332).SERIES_ICONS,Q=i(48),ee=i(62),te=ee.getServerInterval,ie=ee.getResolutionByChartStyle,oe=i(21).Interval,ne=i(134),re=ne.getQuoteSessionInstance,se=!T.enabled("hide_series_legend_item"),s.prototype.update=function(){this._invalidated=!0},s.prototype.updateImpl=function(){if(this._visible=!1,this._series.properties().showPriceLine.value()){var e=this._series.lastValueData(void 0,!0);e.noData||(this._visible=!0,this._points=[new V(0,e.coordinate)],this._color=this._series.priceLineColor(e.color))}},s.prototype.renderer=function(){this._invalidated&&(this.updateImpl(),this._invalidated=!1);var e={}
;return e.width=this._model.timeScale().width(),e.height=this._series.priceScale().height(),e.points=this._points,e.color=this._color,e.linewidth=this._series.properties().priceLineWidth.value(),e.linestyle=CanvasEx.LINESTYLE_DOTTED,e.visible=this._visible,this._lineRenderer.setData(e),this._lineRenderer},inherit(l,M),l.prototype.styleStudyInfos=function(){return{haStyle:this._haStyle,renkoStyle:this._renkoStyle,pbStyle:this._pbStyle,kagiStyle:this._kagiStyle,pnfStyle:this._pnfStyle,rangeStyle:this._rangeStyle}},l.prototype.styleStudyInfo=function(e){return this.styleStudyInfos()[e]},l.prototype.priceLineColor=function(e){return this.properties().priceLineColor.value()||e},l.prototype.endOfData=function(){return this._endOfData},l.prototype.serverTimeOffset=function(){return this._chartApi.serverTimeOffset()},l.prototype._onChangeShowCountdown=function(e){var t=this;e.value()?this._countdownUpdateTimer=this.m_model.setInterval(function(){t.isDWM()||(t._priceAxisViews[0].update(),t.m_model.invalidate(new D(D.LIGHT_UPDATE)))},500):(this.m_model.clearInterval(this._countdownUpdateTimer),delete this._countdownUpdateTimer)},l.prototype.lastValueData=function(e,t,i){var o,n,r,s,a,l,c,h,u,d,p={noData:!0};if(this.m_model.timeScale().isEmpty()||this.priceScale().isEmpty()||this.data().isEmpty())return p;if(null===(o=this.m_model.timeScale().visibleBars()))return p;if(t){if(null===(s=this.data().bars().last()))return p;n=s.value,r=s.index}else{if(null===(a=this.data().bars().search(o.lastBar(),N.NearestLeft)))return p;n=this.data().bars().valueAt(a.index),r=a.index}return l={noData:!1},c=void 0!==e?n[e]:this._barFunction(n),i&&(l.price=c),h=this.firstValue(),l.text=this.priceScale().formatPrice(c,h),u=this.barColorer(),d=u.barStyle(r,!1),l.color=d.barColor,l.floatCoordinate=this.priceScale().priceToCoordinate(c,h,!0),l.coordinate=Math.round(l.floatCoordinate),l.index=r,l},l.prototype.prevClose=function(){var e,t;return this.priceScale().isEmpty()||this.data().isEmpty()||!this.quoteData?null:null==(e=this.quoteData.prev_close_price)?null:(t=this.firstValue(),{coordinate:this.priceScale().priceToCoordinate(e,t),floatCoordinate:this.priceScale().priceToCoordinate(e,t,!0),text:this.priceScale().formatPrice(e,t)})},l.prototype._createIsPrevClosePriceAvailableProperty=function(){this._isPrevClosePriceAvailable=new n(!this.isDWM()),this._onRestarted.subscribe(this,function(){this._isPrevClosePriceAvailable.setValue(!this.isDWM())})},l.prototype.isPrevClosePriceAvailable=function(){return this._isPrevClosePriceAvailable},l.prototype._prepareChartApiParams=function(){return this._requestOptions.startDate?!this._requestOptions.startDate||this._requestOptions.endDate||this._requestOptions.count?this._requestOptions.startDate&&this._requestOptions.endDate?["from_to",this._requestOptions.startDate,this._requestOptions.endDate]:["from_to",this._requestOptions.startDate,this._requestOptions.count]:["from_to",this._requestOptions.startDate]:this._requestOptions.count||TradingView.DEFAULT_BAR_COUNT},l.prototype._nextSymbolId=1,
l.prototype._nextSeriesId=1,Object.assign(l,X),l.PERMISSION_DENIED="permission denied",l.PD_REASON_SYMBOL="symbol",l.PD_REASON_EXTENDED_HOURS="extended_hours",l.PD_REASON_GROUP_PERMISSION="group",l.STUDY_NOT_AUTH="study_not_auth",l.prototype.model=function(){return this.m_model},l.prototype.fixLastBar=function(e){this._futureBarsPaneView||(this._futureBarsPaneView=new A(this,this.data().bars().lastIndex(),e))},l.prototype.clearData=function(){this.data().clear()},l.prototype.data=function(){return this.m_data},l.prototype.symbolId=function(){return this._symbolId},l.prototype.seriesId=function(){return this._seriesId},l.prototype.isPulse=function(){return this._symbolInfo&&this._symbolInfo.resolutions.length>0},l.prototype.onTagsChanged=function(){return this._tagsChanged},l.prototype.onSymbolIntervalChanged=function(){return this._symbolIntervalChanged},l.prototype.onSymbolResolved=function(){return this._symbolResolved},l.prototype.onSymbolError=function(){return this._symbolError},l.prototype.onSymbolNotPermitted=function(){return this._symbolNotPermitted},l.prototype.onSymbolGroupNotPermitted=function(){return this._symbolGroupNotPermitted},l.prototype.onIntervalChanged=function(){return this._intervalChanged},l.prototype.onExtendedHoursNotPermitted=function(){return this._extendedHoursNotPermitted},l.prototype.onStartLoading=function(){return this._startLoading},l.prototype.onDataLoaded=function(){return this._dataLoaded},l.prototype.onStatusChanged=function(){return this._onStatusChanged},l.prototype.onTickmarksRangeChanged=function(){return this._tickmarksRangeChanged},l.prototype.onBarReceived=function(){return this._barReceived},l.prototype.onStyleChanged=function(){return this._onStyleChanged},l.prototype.onCompleted=function(){return this._onCompleted},l.prototype.onRestarted=function(){return this._onRestarted},l.prototype.onBoxSizeChanged=function(){return this._boxSizeChanged},l.prototype.status=function(){return this._status},l.prototype.isDWM=function(){var e,t;return null!==this._isDWMCached?this._isDWMCached:(e=new oe(this._properties.interval.value()),e.isDWM()?this._isDWMCached=!0:(t=e.isSeconds()?e.multiplier():60*e.multiplier(),this._isDWMCached=!(t<216e3)),this._isDWMCached)},l.prototype.lastPriceLabelFixedCoordinate=function(){return this._priceAxisViews[0]._fixedCoordinate},l.prototype.createPaneView=function(){this._paneView=null,this._projectionBarsPaneView=null,this._baseLineView=null,this._symbolLabelView=new k(this.m_model,this,void 0,"firstShortName","showSymbolLabels");var e=this._properties.style.value();switch(e){case l.STYLE_BARS:this._paneView=new v(this,this.m_model);break;case l.STYLE_CANDLES:this._paneView=new y(this,this.m_model);break;case l.STYLE_LINE:this._paneView=new m(this,this.m_model);break;case l.STYLE_AREA:this._paneView=new f(this,this.m_model);break;case l.STYLE_HEIKEN_ASHI:this._paneView=new b(this,this.m_model);break;case l.STYLE_HOLLOW_CANDLES:this._paneView=new g(this,this.m_model);break;case l.STYLE_BASELINE:this._paneView=new S(this,this.m_model),
this._baseLineView=new w(this,this.m_model);break;default:throw Error("Unknown chart style assigned: "+e)}},l.prototype._clearStylePlot=function(e,t){var i,o;0!==e.size()&&(i=t||c(e.firstIndex()),o=c(e.lastIndex())+1,e.range(i,o).each(function(e,t){t[TradingView.STYLE_PLOT]=null}))},l.prototype.invalidateBarStylesCache=function(e){K.logDebug("Invalidate style cache starting from "+e),this._clearStylePlot(this.m_data.m_bars,e),this._clearStylePlot(this.m_data.m_nsBars)},l.prototype.invalidateBarColorerCache=function(){delete this._barColorerCache,this.invalidateBarStylesCache()},l.prototype.barColorer=function(){var e,t,i,o;if(this._barColorerCache)return this._barColorerCache;for(e=null,t=this.m_model.dataSources().length-1;t>=0;t--)i=this.m_model.dataSources()[t],i.metaInfo&&TradingView.isInherited(i.constructor,TradingView.Study)&&i.hasBarColorer()&&i.properties().visible.value()&&(o=i.barColorer(),null===e?e=o:e.pushBackBarColorer(o));return null===e?e=new C(this):e.pushBackBarColorer(new C(this)),this._barColorerCache=e,this._barColorerCache},l.prototype.properties=function(){return this._properties},l.prototype._barsState=function(e){var t=e.state();return t.columns=t.columns.filter(function(e){return"style"!==e}),t.data.forEach(function(e){e.value.splice(7,1)}),t},l.prototype.state=function(e,t){var i=this===this.m_model.mainSeries()?"MainSeries":TradingView.className(this.constructor),o={type:i,id:this.id(),state:this.properties().state(t),zorder:this.zorder(),haStyle:this._haStyle,renkoStyle:this._renkoStyle,pbStyle:this._pbStyle,kagiStyle:this._kagiStyle,pnfStyle:this._pnfStyle,rangeStyle:this._rangeStyle};return this._symbolInfo&&this._symbolInfo.ticker&&(o.state.symbol=this._symbolInfo.ticker),e&&(o.bars=this._barsState(this.m_data.m_bars),o.nsBars=this._barsState(this.m_data.m_nsBars),o.symbolInfo=this._symbolInfo,o.rtPrice=this.data().lastProjectionPrice),o.boxSize=this.data().boxSize,o.reversalAmount=this.data().reversalAmount,o},l.prototype.restoreData=function(e,t,i,o,n,r){this._status=l.STATUS_SNAPSHOT,this.m_data.m_bars.restoreState(e),this.m_data.m_nsBars.restoreState(t),this.updateSymbolInfo(i),this.m_data.lastProjectionPrice=o,this.m_data.boxSize=n,n||(this.properties().style.value()===l.STYLE_PNF?this.m_data.boxSize=this.properties().pnfStyle.inputs.boxSize.value():this.properties().style.value()===l.STYLE_RENKO&&(this.m_data.boxSize=this.properties().renkoStyle.inputs.boxSize.value())),this.m_data.reversalAmount=r,r||this.properties().style.value()===l.STYLE_KAGI&&(this.m_data.reversalAmount=this.properties().kagiStyle.inputs.reversalAmount.value())},l.prototype.setProperties=function(e){e.timeframe||e.merge({timeframe:""}),e.shortName||e.merge({shortName:""}),this._properties=e,this._properties.symbol.listeners().subscribe(this,l.prototype.changeSymbol),this._properties.interval.listeners().subscribe(this,l.prototype.changeInterval),this._properties.timeframe.listeners().subscribe(this,l.prototype.changeTimeFrame),this._properties.listeners().subscribe(this,l.prototype.changeProperties)},
l.prototype.changeSymbol=function(){this.setSymbolIntervalDelayed(),this.m_model.checkLineToolSelection()},l.prototype.changeInterval=function(){this.setSymbolIntervalDelayed()},l.prototype.changeTimeFrame=function(){U("GUI","Change timeframe")},l.prototype.title=function(){return this.properties().symbol.value()+", "+q(this.properties().interval.value())},l.prototype.changeProperties=function(e){e!==this._properties.symbol&&e!==this._properties.interval&&e!==this._properties.timeframe&&(this._tagsChanged.fire(),this.createPaneView(),this.updateAllViews(),this.m_model.updateSource(this))},l.prototype._makeNextSymbolId=function(){return"symbol_"+this._nextSymbolId++},l.prototype._makeNextSeriesId=function(){return"s"+this._nextSeriesId++},l.prototype.onData=function(e){var t,i,o,n,r,s,a,h,u,d,p,_,f,m,g,y,v=this;switch(e.method){case"symbol_resolved":if(e.params[0]!==this._symbolId){K.logNormal("command for old symbol. Expected:"+this._symbolId+", actual"+e.params[0]);break}this.updateSymbolInfo(e.params[1]),this.m_model.updateSource(this),this._symbolResolved.fire(this._symbolInfo),this.m_model.realignLineTools(),TradingView.onWidget()||U("Symbol",e.params[1].listed_exchange,e.params[1].name),t=this.symbolInfo().minmov/this.symbolInfo().pricescale,i=this.properties(),i.style.value()===l.STYLE_RENKO&&i.renkoStyle.inputs.boxSize.value()<t?i.renkoStyle.inputs.merge({boxSize:t}):i.style.value()===l.STYLE_PNF&&i.pnfStyle.inputs.boxSize.value()<t?i.pnfStyle.inputs.merge({boxSize:t}):i.style.value()===l.STYLE_KAGI&&i.kagiStyle.inputs.reversalAmount.value()<t&&i.kagiStyle.inputs.merge({reversalAmount:t});break;case"symbol_error":if(e.params[0]!==this._symbolId){K.logNormal("command for old symbol. Expected:"+this._symbolId+", actual"+e.params[0]);break}if(this._setStatus(l.STATUS_INVALID_SYMBOL),this._properties.shortName.setValue(this._properties.symbol.value()),this.m_model.clearAllStudies(),this.updateAllViews(),this.m_model.updateSource(this),(o=e.params[1])===l.PERMISSION_DENIED)switch(e.params[2]){case l.PD_REASON_EXTENDED_HOURS:this._extendedHoursNotPermitted.fire();break;case l.PD_REASON_SYMBOL:this._symbolNotPermitted.fire(e.params[3]);break;case l.PD_REASON_GROUP_PERMISSION:this._symbolGroupNotPermitted.fire(e.params[3]);break;default:this._symbolNotPermitted.fire(e.params[2])}else this.m_model.resetTimeScale(),this._symbolError.fire();this.m_model.realignLineTools();break;case"series_timeframe":if(e.params[1]!==this._turnaround)break;n=e.params[2],r=e.params[3],s=e.params[4],a=void 0!==s&&s?r:r+10,this.m_model.setTimeViewport(n,a);break;case"series_error":o=e.params[2],delete this._loadingStartTime,T.enabled("charting_library_debug_mode")&&K.logNormal("Error reason: "+o),this._setStatus(T.enabled("no_bars_status")&&this._symbolInfo?l.STATUS_NO_BARS:l.STATUS_INVALID_SYMBOL),"string"==typeof o&&(o.startsWith("study_not_auth:")?(h=o.split(":",2)[1].split("@",2)[0],h in{BarSetRenko:!0,BarSetPriceBreak:!0,BarSetKagi:!0,BarSetPnF:!0
}?this.chartTypeNotPermitted.fire(h):"BarSetSpread"===h?this.intradaySpreadNotPermitted.fire():"BarSetRange"===h&&this.customIntervalNotPermitted.fire()):"resolution_not_entitled"===o?this.intradayExchangeNotPermitted.fire():"custom_resolution"===o&&this.customIntervalNotPermitted.fire()),this._seriesLoaded=!0;break;case"series_loading":if(e.params[1]!==this._turnaround)break;if(e.params[0]!==this._seriesId){K.logNormal("command for old series. Expected:"+this._seriesId+", actual"+e.params.customId);break}this._setStatus(l.STATUS_LOADING),v._loadingStartTime=(new Date).getTime();break;case"series_completed":if(e.params[2]!==this._turnaround)break;if(e.params[0]!==this._seriesId){K.logNormal("command for old series. Expected:"+this._seriesId+", actual"+e.params.customId);break}switch(u="chartSession:"+v._chartApi._sessionid,d=(new Date).getTime()-this._loadingStartTime,K.logDebug(u+", Series loading took "+d+" ms, eod:"+this._endOfData),delete this._loadingStartTime,p=e.params[1],"pulsed"===p&&(p="delayed"),p){case"streaming":this._setStatus(l.STATUS_READY);break;case"endofday":this._setStatus(l.STATUS_EOD);break;case"delayed":this._setStatus(l.STATUS_DELAYED);break;case"pulsed":this._setStatus(l.STATUS_PULSE);break;case"replay":this._setStatus(l.STATUS_REPLAY)}p.match(/delayed_streaming/)&&this._setStatus(l.STATUS_DELAYED_STREAMING),_=this.m_model.paneForSource(this),_.recalculatePriceScale(this.priceScale()),this.m_model.invalidate(new D(D.FULL_UPDATE)),this.m_data.size()&&this._tickmarksRangeChanged.fire({start:c(this.data().first()).value[TradingView.TIME_PLOT],end:c(this.data().last()).value[TradingView.TIME_PLOT]}),this.model().recalcVisibleRangeStudy(this.model().dataSources(),!0),this.model().recalcStudyBasedLineTools(),!this.m_priceScale.isLockScale()||this.model().timeScale().isEmpty()||this._seriesLoaded||(this.model().timeScale()._correctOffset(),this.model().timeScale().correctBarSpacing(),this.model().resetPriceScale(_,this.priceScale())),this._seriesLoaded=!0,this._onCompleted.fire(this._endOfData),this.requestMoreData();break;case"series_deleted":break;case"data_update":if(e.params.customId!==this._seriesId){K.logNormal("command for old series. Expected:"+this._seriesId+", actual"+e.params.customId);break}if(e.params.turnaround!==this._turnaround){K.logNormal("command for old series turnaround. Expected:"+this._turnaround+", actual"+e.params.turnaround);break}if(this._setSymbolIntervalDelay){if(this._willSymbolIntervalChanged())return void K.logNormal("command comes during symbol/interval changing");K.logNormal("data_update comes when symbol interval delay present but symbol/interval should not be changed")}if(this.status()===l.STATUS_INVALID_SYMBOL)break;e.params.plots.length?(f=this.m_data.bars().size(),m=this.m_data.bars().firstIndex(),g=this.m_data.bars().merge(e.params.plots),(null===m||g.index<m)&&(this._endOfData=!1),y="Merge bars. earliestRow:"+g.index+"} ",
y+="bars state:{firstBar:"+c(this.m_data.bars().firstIndex())+",lastBar:"+c(this.m_data.bars().lastIndex())+",size:"+this.m_data.bars().size()+"}",Z.logDebug(y),f!==this.bars().size()&&(this._barReceived.fire(g),this.model().recalcVisibleRangeStudy(this.model().dataSources(),!0))):(this.m_data.clear(),this._startLoading.fire()),new Promise(function(t){var i=v.properties().style.value();e.params.nonseries&&Q.isRangeBasedStyle(i)?v.parseJapProjBars(e.params.nonseries).then(function(e){v.m_data.m_nsBars=e.nsBars,v.m_data.lastProjectionPrice=e.lastPrice;var i=v.m_data.boxSize!==e.boxSize;v.m_data.boxSize=e.boxSize,v.m_data.reversalAmount=e.reversalAmount,i&&v._boxSizeChanged.fire(v.m_data.boxSize),t()}):(e.params.nonseries||(v.m_data.m_nsBars.clear(),v.m_data.lastProjectionPrice=void 0),t(),t())}).then(function(){v._statusView.invalidate();var e=v.m_model.paneForSource(v);v.m_model.updateAllVolumeStudies(),v.m_model.recalculatePane(e),v.m_model.updateSource(v),v.m_model.updateLineTools(),v.m_model.updateCrossHair()})}this._dataLoaded.fire(e)},l.prototype.parseJapProjBars=function(e){var t,i,o,n=new z(["time","open","high","low","close","adt","style"]),r=this.model().timeScale(),s=this.properties().style.value();return new Promise(function(a){e.d&&""!==e.d?H(e.d).then(function(c){var h,u,d,p,_=c.data;for(t=_.price,i=_.boxSize,o=_.reversalAmount,h=_.bars,u=0;h&&u<h.length;u++)d=[],p=e.indexes[h[u].time],d.push(r.points().valueAt(p)),d.push(h[u].open),d.push(h[u].high),d.push(h[u].low),d.push(h[u].close),d.push(h[u].volume),s===l.STYLE_KAGI?d.push(h[u].additionalPrice):s===l.STYLE_PNF&&d.push(h[u].factor),n.add(p,d);a({nsBars:n,lastPrice:t,boxSize:i,reversalAmount:o})}):a({nsBars:n,lastPrice:t,boxSize:i,reversalAmount:o})})},l.prototype.disconnect=function(){this._seriesId&&this._chartApi.removeSeries(this._seriesId),this._symbolId=null,this._seriesId=null,this._predictBars=0,this._status=l.STATUS_OFFLINE},l.prototype.isStarted=function(){return!!this._symbolId},l.prototype.restart=function(){var e,t=i(118);this._onRestarted.fire(),this._setStatus(l.STATUS_RESOLVING),this.m_data=new E(["time","open","high","low","close","adt","style"]),this.updateSymbolInfo(null),this._prevSymbolId=this._symbolId,this._symbolId=this._makeNextSymbolId(),e=this._properties.interval.value(),this._pendingTimeRange&&(e=this._generateTimeframe(e,this._pendingTimeRange),delete this._pendingTimeRange),this._onBeforeModifySeries(this.getSymbolString(),e),e=te(e),this._chartApi.resolveSymbol(this._symbolId,this._getResolvingSymbolString(),this._handler),this._seriesId?(this._turnaround="s"+ ++this._turnaroundCounter,this._chartApi.modifySeries(this._seriesId,this._turnaround,this._symbolId,e,this._handler,this._prevSymbolId)):(this._seriesId=this._makeNextSeriesId(),!1===this._chartApi.createSeries(this._seriesId,this._turnaround,this._symbolId,e,this._prepareChartApiParams(),this._handler)&&(this._seriesId=void 0)),this._properties.showInDataWindow.listeners().subscribe(this.m_model,t.prototype.fullUpdate),
this.m_symbol=this._properties.symbol.value(),this.m_interval=this._properties.interval.value()},l.prototype._generateTimeframe=function(e,t){var i,o=t.slice(-1),n=e;return"ytd"===t?n+=",YTD":"d"===o?(i=t.slice(0,-1),n+=","+i,T.enabled("daily_timeframe_suffix")&&(n+="D")):"m"===o?(i=t.slice(0,-1),n+=","+i+"M"):"all"===t&&(n+=",ALL"),n},l.prototype.hasDelayedSymbolIntervalChange=function(){return!!this._setSymbolIntervalDelay},l.prototype.setSymbolIntervalDelayed=function(){this._isDWMCached=null,this._willSymbolIntervalChanged()&&(this._setSymbolIntervalDelay&&(K.logNormal("Clear timeout to change symbol/interval #"+this._setSymbolIntervalDelay),clearTimeout(this._setSymbolIntervalDelay)),this._setSymbolIntervalDelay=setTimeout(function(){K.logNormal("Timeout #"+this._setSymbolIntervalDelay+' fired, new symbol will be "'+this._properties.symbol.value()+'"'),delete this._setSymbolIntervalDelay,this._setSymbolInterval(this._properties.symbol.value(),this._properties.interval.value())}.bind(this),30),K.logNormal("Started timeout #"+this._setSymbolIntervalDelay+' to change symbol/interval from "'+this.m_symbol+'" to "'+this._properties.symbol.value()+'"'))},l.prototype._willSymbolIntervalChanged=function(){var e=this._checkIntervalWillChanged(this._parseInterval(this._properties.interval.value()).interval);return this._checkSymbolWillChanged(this._properties.symbol.value())||e},l.prototype._checkSymbolWillChanged=function(e){return!this.symbolSameAsCurrent(e)||T.enabled("same_data_requery")},l.prototype._checkIntervalWillChanged=function(e){return this.m_interval!==e||T.enabled("same_data_requery")},l.prototype._parseInterval=function(e){var t=(e+"").split(",");return{interval:2===t.length?t[0]:e,timeframe:2===t.length?t[1]:0}},l.prototype.rerequestData=function(){this._setSymbolInterval(this.m_symbol,this.m_interval,!0)},l.prototype._setSymbolInterval=function(e,t,i){var o,n,r,s,a,c,h;delete this._gotoDateResult,o=oe.isRange(t),o&&this._properties.rangeStyle.inputs.range.setValue(oe.parse(t).multiplier()),n=this._parseInterval(t),r=n.interval,s=n.timeframe,a=this._checkSymbolWillChanged(e),c=this._checkIntervalWillChanged(r),(a||c||i)&&((o||oe.isRange(this.m_interval))&&(this._symbolId=null),this._syncModel=null,this.m_symbol=e,this.m_interval=r,this.m_timeframe=s,this._symbolId&&!a||this.updateSymbolInfo(null),this.m_model.realignLineTools(),this._status!==l.STATUS_SNAPSHOT&&(this._setStatus(l.STATUS_RESOLVING),this._symbolIntervalChanged.fire(),c&&(h={timeframe:this._pendingTimeRange},this._intervalChanged.fire(this.m_interval,h),this._pendingTimeRange=h.timeframe&&h.timeframe.toLowerCase()),this._onRestarted.fire(),this._seriesLoaded=!1,this._chartApi&&this._chartApi.connected()&&(this._symbolId&&!a||(this._prevSymbolId=this._symbolId,this._symbolId=this._makeNextSymbolId(),this._chartApi.resolveSymbol(this._symbolId,this._getResolvingSymbolString(),this._handler)),this._seriesId?(this._turnaround="s"+ ++this._turnaroundCounter,this._pendingTimeRange&&(t=this._generateTimeframe(t,this._pendingTimeRange),
delete this._pendingTimeRange),this._onBeforeModifySeries(this.getSymbolString(),t),this._predictBars=0,t=te(t),this._chartApi.modifySeries(this._seriesId,this._turnaround,this._symbolId,t,this._handler,this._prevSymbolId)):(this._onBeforeModifySeries(this.getSymbolString(),t),this._seriesId=this._makeNextSeriesId(),t=te(t),this._chartApi.createSeries(this._seriesId,this._turnaround,this._symbolId,t,this._prepareChartApiParams(),this._handler)))))},l.prototype.setDefaultTimeframe=function(e){this._pendingTimeRange=e},l.prototype.actualSymbol=function(){return this.symbolInfo()?this.symbolInfo().full_name:this.symbol()},l.prototype.proSymbol=function(){return this.symbolInfo()?this.symbolInfo().pro_name:this.symbol()},l.prototype.symbol=function(){return this.properties().symbol.value()},l.prototype.interval=function(){return this.properties().interval.value()},l.prototype.isIntradayInterval=function(){var e=te(this.interval());return!!/^\d*$/.test(e)&&e<=1440},l.prototype.bars=function(){return this.m_data.m_bars},l.prototype.nsBars=function(){return this.m_data.m_nsBars},l.prototype.open=function(e){return this.m_data.valueAt(e)[TradingView.OPEN_PLOT]},l.prototype.high=function(e){return this.m_data.valueAt(e)[TradingView.HIGH_PLOT]},l.prototype.low=function(e){return this.m_data.valueAt(e)[TradingView.LOW_PLOT]},l.prototype.close=function(e){return this.m_data.valueAt(e)[TradingView.CLOSE_PLOT]},l.prototype.hl2=function(e){return(this.high(e)+this.low(e))/2},l.prototype.hlc3=function(e){return(this.high(e)+this.low(e)+this.close(e))/3},l.prototype.ohlc4=function(e){return(this.open(e)+this.high(e)+this.low(e)+this.close(e))/4},l.prototype.priceRange=function(e,t){var i,o,n,s,a,l,c;return TradingView.isInteger(e)?TradingView.isInteger(t)?this.data().isEmpty()?null:this.m_priceScale.isLockScale()&&null!==(i=this._model.mainSeriesScaleRatio())?(o=this.priceScale().internalHeight()/(this.model().timeScale().barSpacing()/i),n=this.data().search(t,N.NearestLeft),s=(n.value[TradingView.HIGH_PLOT]+n.value[TradingView.LOW_PLOT])/2,new r(s-.5*o,s+.5*o)):(a=this.data().bars().minMaxOnRange2(e,t,[{index:TradingView.LOW_PLOT,offset:0},{index:TradingView.HIGH_PLOT,offset:0}]),l=this.data().nsBars().minMaxOnRange(e,t,[{index:TradingView.LOW_PLOT,offset:0},{index:TradingView.HIGH_PLOT,offset:0}]),a=F(a,l),c=null!==a?a.min===a.max?new r(a.min-.5,a.max+.5):new r(a.min,a.max):new r(-.5,.5),this.priceScale().isLog()?new r(this.priceScale().priceToLogical(c.minValue()),this.priceScale().priceToLogical(c.maxValue())):c):(K.logDebug("Series.priceRange: incorrect endBar"),null):(K.logDebug("Series.priceRange: incorrect startBar"),null)},l.prototype.nearestData=function(e,t){if(!TradingView.isInteger(e))return void K.logDebug("Series.nearestData: incorrect logicalPoint");var i=this.data().search(e,t);return null!==i?i:void 0},l.prototype.nearestIndex=function(e,t){var i=this.nearestData(e,t);return i?i.index:void 0},l.prototype.paneViews=function(e){if(!this.properties().visible.value())return null;var t=[this._paneView]
;return this._futureBarsPaneView&&t.push(this._futureBarsPaneView),this._projectionBarsPaneView&&t.push(this._projectionBarsPaneView),null!==this._baseLineView&&t.push(this._baseLineView),t.push(this._priceLineView),t.push(this._symbolLabelView),t.push(this._gotoDateView),t},l.prototype.dataWindowView=function(){return this._dataWindowView},l.prototype.statusView=function(){return se?this._statusView:null},l.prototype.priceAxisViews=function(e,t){return this.m_model.paneForSource(this)===e&&t===this.priceScale()&&(this.m_model.properties().scalesProperties.showSeriesLastValue.value()||this.properties().showCountdown.value())?this._priceAxisViews:null},l.prototype.base=function(){return this._base},l.prototype.formatter=function(){return this._formatter},l.prototype.purgeSymbolInfo=function(){this._symbolInfo=null},l.prototype.symbolInfo=function(){return this._symbolInfo},l.prototype._recreateFormatter=function(){var e,t,i,o;"default"===this.properties().minTick.value()?this._formatter=new R(this._symbolInfo?this._symbolInfo.pricescale:100,this._symbolInfo?this._symbolInfo.minmov:1,!!this._symbolInfo&&this._symbolInfo.fractional,this._symbolInfo?this._symbolInfo.minmove2:void 0):(e=this.properties().minTick.value().split(","),t=parseInt(e[0]),i=parseInt(e[1]),o="true"===e[2],this._formatter=new R(t,i,o)),this.priceScale()&&this.priceScale().updateFormatter()},l.prototype.updateSymbolInfo=function(e){var t,i,o=this,n=e&&(e.pro_name||e.full_name||e.name);T.enabled("charting_library_single_symbol_request")&&this.m_symbol&&(n=this.m_symbol),this._symbolInfo=e,e&&(this._properties.shortName.setValue(e.name),t=this._properties.symbol.value(),i=n,T.enabled("uppercase_instrument_names")&&(t=t.toUpperCase(),i=i.toUpperCase()),n&&t!==i&&this._properties.symbol.setValue(n)),this._base=e?e.pricescale/e.minmov:100,this._recreateFormatter(),this._statusView.update(),this.priceScale().updateFormatter(),this._quoteSessionSymbol!==n&&(this._quoteSessionClientId||(this._quoteSessionClientId="series-"+Y.guid()),this._unsubscribeQuoteSession(),n&&(this._quoteSessionSymbol=n,re("full").subscribe(this._quoteSessionClientId,this._quoteSessionSymbol,function(e,t){o.quoteData=e&&e.values||null,t&&t.values&&t.values.current_session&&o.marketStatus.setValue(t.values.current_session)}))),this.checkInterval()},l.prototype._unsubscribeQuoteSession=function(){this._quoteSessionSymbol&&(re("full").unsubscribe(this._quoteSessionClientId,this._quoteSessionSymbol),this._quoteSessionSymbol=void 0)},l.prototype.symbolSameAsCurrent=function(e){if(this.m_symbol===e)return!0;var t=this._symbolInfo;if(t){if(t.full_name===e||t.pro_name===e)return!0;if(t.ticker===e)return!0;if(t.aliases&&-1!==t.aliases.indexOf(e))return!0;if(t.alternatives&&-1!==t.alternatives.indexOf(e))return!0;if(0===e.indexOf("FRA:")&&t.pro_name===e.replace("FRA:","FWB:"))return!0}return!1},l.prototype.updateAllViews=function(){var e,t;for(this._paneView.update(),this._dataWindowView.update(),this._statusView.update(),e=this._priceAxisViews.length,
t=0;t<e;t++)this._priceAxisViews[t].update();this._futureBarsPaneView&&this._futureBarsPaneView.update(),this._projectionBarsPaneView&&this._projectionBarsPaneView.update(),null!==this._baseLineView&&this._baseLineView.update(),this._priceLineView.update(),this._gotoDateView.update(),this._symbolInfo&&this._symbolLabelView.update()},l.prototype._setStatus=function(e){this._status=e,this._statusView.update(),this.m_model.updateSource(this),this._onStatusChanged.fire()},l.prototype.requestMoreData=function(e){var t,i,o,n;this._status!==l.STATUS_READY&&this._status!==l.STATUS_PULSE&&this._status!==l.STATUS_DELAYED&&this._status!==l.STATUS_DELAYED_STREAMING&&this._status!==l.STATUS_EOD&&this._status!==l.STATUS_REPLAY||this.m_model.timeScale().isEmpty()||null!==(t=this.m_model.timeScale().visibleBars())&&0!==this.bars().size()&&(i=e||t.lastBar()-c(this.data().last()).index,this._predictBars<i&&(this._predictBars=i,this._chartApi&&this._chartApi.connected()&&this._chartApi.requestMoreTickmarks(this._seriesId,i,this._handler)),this._endOfData||(o=c(this.bars().firstIndex()),(n=e||o-t.firstBar())<=0||(this._endOfData=!0,this._chartApi&&this._chartApi.connected()&&(this._chartApi.requestMoreData(this._seriesId,n,this._handler),T.enabled("charting_library_base")&&(this._predictBars=0)),this._setStatus(l.STATUS_LOADING))))},l.prototype.bindStyleChange=function(){var e=this;Object.keys(l.STYLE_SHORT_NAMES).map(function(e){return l.STYLE_SHORT_NAMES[e]+"Style"}).forEach(function(t){e._properties[t].listeners().subscribe(e,l.prototype.invalidateBarStylesCache)})},l.prototype.bindJapChartsInputs=function(){this._properties.style.listeners().subscribe(this,this.onChartStyleChanged),this._properties.renkoStyle.inputs.boxSize.listeners().subscribe(this,this.onInputChanged),this._properties.renkoStyle.inputs.style.listeners().subscribe(this,this.onInputChanged),this._properties.renkoStyle.inputs.atrLength.listeners().subscribe(this,this.onInputChanged),this._properties.renkoStyle.inputs.wicks.listeners().subscribe(this,this.onInputChanged),this._properties.pbStyle.inputs.lb.listeners().subscribe(this,this.onInputChanged),this._properties.kagiStyle.inputs.reversalAmount.listeners().subscribe(this,this.onInputChanged),this._properties.kagiStyle.inputs.style.listeners().subscribe(this,this.onInputChanged),this._properties.kagiStyle.inputs.atrLength.listeners().subscribe(this,this.onInputChanged),this._properties.pnfStyle.inputs.boxSize.listeners().subscribe(this,this.onInputChanged),this._properties.pnfStyle.inputs.reversalAmount.listeners().subscribe(this,this.onInputChanged),this._properties.pnfStyle.inputs.sources.listeners().subscribe(this,this.onInputChanged),this._properties.pnfStyle.inputs.style.listeners().subscribe(this,this.onInputChanged),this._properties.pnfStyle.inputs.atrLength.listeners().subscribe(this,this.onInputChanged),this._properties.rangeStyle.inputs.phantomBars.listeners().subscribe(this,this.onInputChanged)},l.prototype.createExtendedHoursProperty=function(){function e(){
var e="undefined"!=typeof ProductFeatures&&isProductFeatureEnabled(ProductFeatures.EXTENDED_SESSION),i=t.model().readOnly(),o=t._properties.extendedHours.value(),n=T.enabled("widget");!o||n||i||e||(t._extendedHoursNotPermitted.fire(),o=!1),o&&!t.isIntradayInterval()&&(o=!1),t.extendedHours.setValue(o)}var t=this;t.extendedHours=new n,t._properties.extendedHours.listeners().subscribe(null,e),t._properties.interval.listeners().subscribe(null,e),t.chartWidgetInitialized.subscribe(null,e),e()},l.prototype.setChartStyleWithIntervalIfNeeded=function(e,t){var i,o=t;void 0===t&&(o=ie(e,this._properties.interval.value(),this._model.defaultResolutions())),i=oe.isEqual(o,this._properties.interval.value()),i||this._properties.interval.setValue(o),this._properties.style.setValue(e)},l.prototype.isNeedRestart=function(e){return void 0===e&&(e=this.properties().style.value()),!Q.isRangeStyle(this._prevChartStyle)&&!Q.isRangeStyle(e)&&!(this._prevChartStyle===e||!Q.isRequiringRestartSeriesStyles(this._prevChartStyle)&&!Q.isRequiringRestartSeriesStyles(e))},l.prototype.onChartStyleChanged=function(){this._updateBarFunction(),this.isNeedRestart()&&(this.data().clear(),this.model().timeScale().scrollToRealtime(!1),this.restart()),this._prevChartStyle=this.properties().style.value(),this._onStyleChanged.fire(this.properties().style.value()),this.invalidateBarStylesCache()},l.prototype.applyPreferences=function(e){var t=$.extend(!0,{},e);this.m_priceScale.setMode({autoScale:t.priceAxisProperties.autoScale,percentage:t.priceAxisProperties.percentage,log:t.priceAxisProperties.log,lockScale:t.priceAxisProperties.lockScale}),this.setChartStyleWithIntervalIfNeeded(t.style),delete t.style,delete t.interval,this._properties.mergeAndFire(t),this._properties.saveDefaults(),this.createPaneView(),this.invalidateBarStylesCache()},l.prototype.barFunction=function(){return this._barFunction},l.prototype._updateBarFunction=function(){var e="close";switch(this._properties.style.value()){case l.STYLE_LINE:e=this._properties.lineStyle.priceSource.value();break;case l.STYLE_AREA:e=this._properties.areaStyle.priceSource.value();break;case l.STYLE_BASELINE:e=this._properties.baselineStyle.priceSource.value()}this._barFunction=Q.barFunction(e)},l.prototype.style=function(){return this.properties().style.value()},l.prototype.isRangeBasedStyle=function(){return Q.isRangeBasedStyle(this.style())},l.prototype.onInputChanged=function(){this.restart()},l.prototype.onExtendedHoursChanged=function(){return this._extendedHoursChanged},l.prototype.getSymbolString=function(){var e,t,i;return e=T.enabled("pay_attention_to_ticker_not_symbol")&&this._symbolInfo?this._symbolInfo.ticker:this.actualSymbol(),this.extendedHours.value()&&(e={symbol:e,session:"extended"}),l.SYMBOL_STRING_DATA.hasOwnProperty(this._properties.style.value())&&(t=this.styleStudyInfo(this.getStyleShortName()+"Style").studyId,i=this.getInputsProperties(),e={symbol:e,type:t+"!",inputs:i.state()}),"string"!=typeof e&&(e="="+JSON.stringify(e)),e},l.prototype._getResolvingSymbolString=function(){
return this.getSymbolString()},l.prototype.getStyleShortName=function(){var e=this._properties.style.value();if(l.STYLE_SHORT_NAMES.hasOwnProperty(e))return l.STYLE_SHORT_NAMES[e];throw Error("Missed short name for style "+e)},l.prototype.getStyleProperties=function(){return this._properties[this.getStyleShortName()+"Style"]},l.prototype.getInputsProperties=function(){return this.getStyleProperties().inputs||new n},l.prototype.getRealVisibleRange=function(){var e,t,i=this.model().timeScale().visibleBars();return null===i?null:(e=this.data().search(i.firstBar(),N.NearestRight),t=this.data().search(i.lastBar(),N.NearestLeft),null===e||null===t?null:new x(e.index,t.index))},l.prototype.firstValue=function(){var e=this.firstBar();return null===e?null:this._barFunction(e)},l.prototype.firstBar=function(){var e,t,i=this.model().timeScale().visibleBars();return null===i?null:(e=i.firstBar(),t=this.data().search(e,N.NearestRight),null!==t?t.value:null)},l.prototype.sessionsStudy=function(){var e,t,i,o;if(this._sessionsStudy)return this._sessionsStudy;for(e=this.model().paneForSource(this),t=e.dataSources(),i=0;i<t.length;i++)if((o=t[i])instanceof TradingView.Study&&"Sessions"===o.metaInfo().shortId)return this._sessionsStudy=o,this._sessionsStudy;return!1},l.prototype.clearSessionStudy=function(){this._sessionsStudy=null},l.prototype.createSessStudy=function(){if(!this.sessionsStudy()){var e=W.findStudyMetaInfo(this.model().studiesMetaData(),"Sessions@tv-basicstudies");this.model().insertStudy(e,!1,!0),this._onSessionsStudyCreated.fire()}},l.prototype.checkSessStudy=function(){T.enabled("charting_library_base")||(this.sessionsStudy()||this.createSessStudy(),this.sessionsStudy().start())},l.prototype.isSpread=function(){return"spread"===this._symbolInfo.type},l.prototype.firstSymbol=function(){return this._symbolInfo?this._symbolInfo.legs[0]:""};l.prototype.firstShortName=function(){return O.ticker(this.firstSymbol())},l.prototype.onSessionsStudyCreated=function(){return this._onSessionsStudyCreated},l.prototype.loadDataTo=function(e){this._turnaround="s"+ ++this._turnaroundCounter;var t=this._properties.interval.value();t=this._generateTimeframe(t,e),this._chartApi.modifySeries(this._seriesId,this._turnaround,this._symbolId,t,this._handler)},l.prototype.checkInterval=function(){if(this._symbolInfo&&(oe.isMinutes(this.interval())&&!this._symbolInfo.has_intraday&&this.requestingIntradayWhenNotSupported.fire(),this._symbolInfo.hasOwnProperty("supported_resolutions"))){var e=oe.normalize(this._properties.interval.value());-1===this._symbolInfo.supported_resolutions.indexOf(e)&&this.requestingResolutionWhenNotSupported.fire(this._symbolInfo.supported_resolutions[0])}},l.prototype.priceScale=function(){return this.m_priceScale},l.prototype.setPriceScale=function(e){this.m_priceScale!==e&&(this.m_priceScale=e,this._priceScaleChanged.fire(e),this._properties.removeProperty("priceAxisProperties"),this._properties.addChild("priceAxisProperties",e.properties()),this._properties.priceAxisProperties.childChanged())},
l.prototype.priceScaleChanged=function(){return this._priceScaleChanged},l.prototype.setGotoDateResult=function(e){this._gotoDateResult=e},l.prototype.gotoDateResult=function(){return this._gotoDateResult},l.prototype.syncModel=function(){var e,t;if(!this._syncModel){if(e=this.symbolInfo(),t=this.interval(),!e||!t)return null;this._syncModel=new j(e,t)}return this._syncModel},l.prototype.turnaround=function(){return this._turnaround},l.prototype.getStylesPropertyPage=function(){return T.enabled("show_chart_property_page")?P.ChartStylesPropertyPage:null},l.prototype.getSourceIcon=function(){return{type:"svg",svgCode:J[this.properties().style.value()]}},l.prototype.isStyleSupported=function(e){return!0},l.prototype._onBeforeModifySeries=function(e,t){},l.prototype._isExtendedHoursAllowed=function(){return this._symbolInfo&&-1!==["stock","index","futures"].indexOf(this._symbolInfo.type)},l.prototype._getTelemetryAdditionalData=function(e,t){t=void 0===t||t;var i={symbol:this.actualSymbol()};return t&&(i.resolution=this.interval()),void 0!==e&&(i.reason=e),i},l.prototype._sendTelemetryReport=function(e,t,i){void 0===i&&(i=this._getTelemetryAdditionalData());var o=Object.assign(t,{additional:i});telemetry.sendChartReport(e,o)},l.prototype._sendTelemetryCounter=function(e,t){this._sendTelemetryReport(e,{count:1},t)},l.prototype._sendTelemetryTiming=function(e,t,i){this._sendTelemetryReport(e,{value:t},i)},l.prototype.destroy=function(){this._unsubscribeQuoteSession()},TradingView.Series=l,t.Series=l}).call(t,i(8),i(15),i(12),i(58).PriceRange)},,,,,function(e,t,i){"use strict";e.exports=i(253)},function(e,t,i){"use strict";function o(){this._registeredSources={},this._sourcesToRow={},this._rowsToSources={},this._currentSymbol="",this._actualCapacity=0,this._actualWidth=1,this._numericFormatter=new r,this._percentageFormatter=new n}var n=i(105).PercentageFormatter,r=i(102).NumericFormatter;o.prototype.levelsCount=function(){return 0},o.prototype.topByRow=function(e){return e*o.ROW_HEIGHT},o.prototype.rowHeight=function(e){return o.ROW_HEIGHT},o.prototype.canvas=function(){if(!this._canvas){this._canvas=$("<canvas>"),this._cache=this._canvas.get(0).getContext("2d"),this._canvas.prop("width",100).css("position","absolute").css("top",0).css("z-index",1e3).css("left",0);this._canvas.get(0).getContext("2d").font="12px Verdana"}return this._canvas},o.ROW_HEIGHT=14,o.prototype.points=function(e){return[e.points()[0],e.points()[1]]},o.prototype.startPoint=function(e,t){return t?e.points()[0]:e.points()[1]},o.prototype.priceRange=function(e,t){var i=this.points(e),o=i[0],n=i[1];return t?n.price-o.price:o.price-n.price},o.prototype.sourceIsReady=function(e){return e.points().length>=2},o.prototype._calculateWidth=function(e){var t,i,o,n,r,s,a,l,c,h,u,d,p,_,f,m,g,y,v,b,S,w,T;if(!this.sourceIsReady(e))return null;if(t=this.canvas().get(0).getContext("2d"),t.font="12px Verdana",i=!!e.properties().showPrices&&e.properties().showPrices.value(),o=!!e.properties().coeffsAsPercents&&e.properties().coeffsAsPercents.value(),
n=e.properties().showCoeffs.value(),r=e.priceScale(),s=this.points(e),a=s[0],l=s[1],!a||!l)return null;if(c=!1,h=e.properties(),h.reverse&&h.reverse.value()&&(c=h.reverse.value()),u=this.priceRange(e,c),d=this.startPoint(e,c).price,null===(p=e.ownerSource().firstValue()))return 0;for(_=0,f=[],m=1;m<=this.levelsCount();m++)g="level"+m,y=h[g],v=y.coeff.value(),b=d+v*u,S="",n&&(S+=o?this._percentageFormatter.format(Math.round(1e4*v)/100):this._numericFormatter.format(v)),i&&(S+="("+r.formatPrice(b,p)+")"),w=t.measureText(S).width,T={text:S,left:_,width:w+4},f.push(T),_+=T.width;return{totalWidth:_,cells:f}},o.prototype._effectiveState=function(e){var t,i,o,n,r,s,a={},l=e.properties();for(l.showPrices&&(a.showPrices=l.showPrices.value()),l.coeffsAsPercents&&(a.coeffsAsPercents=l.coeffsAsPercents.value()),a.showCoeffs=l.showCoeffs.value(),e.priceScale()&&e.priceScale().formatter().state&&(a.formatter=e.priceScale().formatter().state()),l.reverse&&(a.reverse=l.reverse.value()),a.p1=e.points()[0],a.p2=e.points()[1],3===e.points().length&&(a.p3=e.points()[2]),a.items=[],t=1;t<=this.levelsCount();t++)i="level"+t,o=l[i],n=o.coeff.value(),r=o.color.value(),s={coeff:n,color:r},a.items.push(s);return a},o.prototype._findEmptyRow=function(e){for(var t,i=0;this._rowsToSources[i];)i++;return this._rowsToSources[i]=e,i>=this._actualCapacity&&(this._actualCapacity++,t=this.canvas(),TradingView.resizeCanvas(t,this._actualWidth,o.ROW_HEIGHT*this._actualCapacity)),i},o.prototype._repaintSource=function(e,t,i){var n,r,s=o.ROW_HEIGHT*i.row,a=this.canvas().get(0).getContext("2d");for(a.clearRect(0,s,this._actualWidth,o.ROW_HEIGHT),a.textBaseline="bottom",a.font="12px Verdana",s+=o.ROW_HEIGHT,n=0;n<e.cells.length;n++)r=e.cells[n],a.fillStyle=t.items[n].color,a.fillText(r.text,r.left,s)},o.prototype.removeSource=function(e){var t,i;this._sourcesToRow[e]&&(t=this._sourcesToRow[e].row,i=this.canvas().get(0).getContext("2d"),i.save(),i.clearRect(0,this.topByRow(t),this._actualWidth,o.ROW_HEIGHT),i.restore(),delete this._sourcesToRow[e],delete this._rowsToSources[t])},o.prototype._effectiveStatesEquals=function(e,t){var i,o=function(e,t){return!(!e&&!t)&&(!(!e||t)||(!(e||!t)||(e.minMove!==t.minMove||(e.minMove2!==t.minMove2||(e.fractional!==t.fractional||e.fractionalLength!==t.fractionalLength)))))},n=function(e,t){return!(!e&&!t)&&(!(!e||t)||(!(e||!t)||(e.index!==t.index||e.price!==t.price)))},r=function(e,t){return e.coeff!==t.coeff||e.color!==t.color};if(e&&!t)return!1;if(!e&&t)return!1;if(e.showPrices!==t.showPrices)return!1;if(e.coeffsAsPercents!==t.coeffsAsPercents)return!1;if(e.showCoeffs!==t.showCoeffs)return!1;if(e.reverse!==t.reverse)return!1;if(o(e.formatter,t.formatter))return!1;if(n(e.p1,t.p1))return!1;if(n(e.p2,t.p2))return!1;if(n(e.p3,t.p3))return!1;if(e.items.length!==t.items.length)return!1;for(i=0;i<e.items.length;i++)if(r(e.items[i],t.items[i]))return!1;return!0},o.prototype.updateSource=function(e){var t,i,n,r,s=e.properties().symbol.value();return this._currentSymbol!==s&&(this._currentSymbol=s,this._sourcesToRow={},
this._rowsToSources={}),this._sourcesToRow[e.id()]||(t=this._findEmptyRow(e.id()),this._sourcesToRow[e.id()]={effectiveState:null,row:t}),i=this._sourcesToRow[e.id()].effectiveState,n=this._effectiveState(e),this._effectiveStatesEquals(i,n)||(r=this._calculateWidth(e),r?(this._sourcesToRow[e.id()].effectiveState=n,r.totalWidth>this._actualWidth&&(TradingView.resizeCanvas(this.canvas(),r.totalWidth,o.ROW_HEIGHT*this._actualCapacity),this._actualWidth=r.totalWidth),t=this._sourcesToRow[e.id()],this._repaintSource(r,n,t),this._sourcesToRow[e.id()].effectiveState=n,this._sourcesToRow[e.id()].preparedCells=r):this._sourcesToRow[e.id()].effectiveState=null),this._sourcesToRow[e.id()]},e.exports=o},function(e,t,i){"use strict";function o(e,t){e.width=t.w,e.height=t.h;var i=e.getContext("2d");i&&i.translate(.5,.5)}function n(e,t){e.width=0,o(e,t)}function r(e,t,i,o,n,r){e.save(),e.translate(-.5,-.5),e.fillStyle=r,e.fillRect(t,i,o,n),e.restore()}function s(e,t){var i=document.createElement("canvas");return e.append(i),o(i,t),i}function a(e,t){return"center"===e.textAlign?0:c.IS_RTL?"start"===e.textAlign||"right"===e.textAlign?t:0:"start"===e.textAlign||"left"===e.textAlign?0:t}var l,c,h;Object.defineProperty(t,"__esModule",{value:!0}),i.d(t,"Size",function(){return h}),t.resizeCanvas=o,t.hardResizeCanvas=n,t.clearRect=r,t.addCanvasTo=s,t.calcTextHorizontalShift=a,l=i(13),i.n(l),c=i(36),h=function(){function e(e,t){this.w=e,this.h=t}return e.prototype.equals=function(e){return this.w===e.w&&this.h===e.h},e}()},function(e,t,i){"use strict";var o,n,r;Object.defineProperty(t,"__esModule",{value:!0}),o=i(14),i.n(o),n=/{(\w+)}/g,r=/{(\d+)}/g,String.prototype.format=function(){var e,t,i,s,a=[];for(e=0;e<arguments.length;e++)a[e]=arguments[e];return t=Object(o.isObject)(a[0]),i=t?n:r,s=t?function(e,t){var i=a[0];return void 0!==i[t]?i[t]:e}:function(e,t){var i=parseInt(t,10),o=a[i];return void 0!==o?o:e},this.replace(i,s)}},,,,,function(e,t,i){"use strict";function o(e,t){return e<t}function n(e,t,i,o,n){var r,s,a;for(void 0===o&&(o=0),void 0===n&&(n=e.length),r=n-o;0<r;)s=r>>1,a=o+s,i(e[a],t)?(o=a+1,r-=s+1):r=s;return o}function r(e,t,i,r){return void 0===i&&(i=0),void 0===r&&(r=e.length),n(e,t,o,i,r)}function s(e,t,i,o,n){var r,s,a;for(void 0===o&&(o=0),void 0===n&&(n=e.length),r=n-o;0<r;)s=r>>1,a=o+s,i(t,e[a])?r=s:(o=a+1,r-=s+1);return o}function a(e,t,i,n){return void 0===i&&(i=0),void 0===n&&(n=e.length),s(e,t,o,i,n)}Object.defineProperty(t,"__esModule",{value:!0}),t.lowerbound=n,t.lowerbound_int=r,t.upperbound=s,t.upperbound_int=a},function(e,t,i){"use strict";function o(e,t,i,o,r){Object(l.assert)(n(e),"Unknown line tool: "+e);var s=Object(l.ensureDefined)(h[e])
;return"LineToolVbPFixed"===e?new s(t,i,o,r):"LineToolRegressionTrend"===e?new s(t,i,o):["LineStudyMtpAnalysis","LineStudyMtpDecisionPoint","LineStudyMtpRiskReward","LineStudyMtpElliotWaveMain","LineStudyMtpElliotWaveMajor","LineStudyMtpElliotWaveMinor","LineStudyMtpDownWave1OrA","LineStudyMtpDownWave2OrB","LineStudyMtpDownWave3","LineStudyMtpDownWave4","LineStudyMtpDownWave5","LineStudyMtpDownWaveC","LineStudyMtpUpWave1OrA","LineStudyMtpUpWave2OrB","LineStudyMtpUpWave3","LineStudyMtpUpWave4","LineStudyMtpUpWave5","LineStudyMtpUpWaveC"].indexOf(e)>=0?new s(t,i,o):new s(t,i)}function n(e){return e in h}function r(e){return e instanceof c.LineDataSource}function s(e){return!1}function a(e){return!1}var l,c,h;Object.defineProperty(t,"__esModule",{value:!0}),t.createLineTool=o,t.isLineToolName=n,t.isLineTool=r,t.isStudyLineToolName=s,t.isStudyLineTool=a,l=i(7),i.n(l),c=i(0),i.n(c),h=i(43),i.n(h)},function(e,t,i){"use strict";function o(e,t){var o=t||new p("linetoolelliott");u.call(this,e,o),i.e(0).then(function(e){var t=i(215).ElliottLabelsPaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}function n(e,t){var o=t||new p("linetoolelliott");u.call(this,e,o),this.version=n.version,i.e(0).then(function(e){var t=i(215).ElliottLabelsPaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}function r(e,t){this._constructor="LineToolElliottImpulse";var i=t||new p("linetoolelliottimpulse");n.call(this,e,i)}function s(e,t){this._constructor="LineToolElliottTriangle";var i=t||new p("linetoolelliotttriangle");n.call(this,e,i)}function a(e,t){this._constructor="LineToolElliottTripleCombo";var i=t||new p("linetoolelliotttriplecombo");n.call(this,e,i)}function l(e,t){var o=t||new p("linetoolelliott");u.call(this,e,o),this.version=l.version,i.e(0).then(function(e){var t=i(215).ElliottLabelsPaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}function c(e,t){this._constructor="LineToolElliottCorrection";var i=t||new p("linetoolelliottcorrection");l.call(this,e,i)}function h(e,t){this._constructor="LineToolElliottLineToolElliottDoubleCombo";var i=t||new p("linetoolelliottdoublecombo");l.call(this,e,i)}var u=i(0).LineDataSource,d=i(40).Action,p=i(2).DefaultProperty,_=i(1).propertyPages;inherit(o,u),o.migrateState=function(e){var t={0:11,1:10,2:9,3:8,4:7,5:6,6:5,7:4,8:3},i={0:11,1:8};"LineToolElliottSubminuette"===e.type&&(e.type="LineToolElliottImpulse",e.state.degree=t[e.state.wavesize]),"LineToolElliottMinor"===e.type&&(e.type="LineToolElliottImpulse",e.state.degree=t[e.state.wavesize]),"LineToolElliottCircle"===e.type&&(e.type="LineToolElliottImpulse",e.state.degree=t[e.state.wavesize]),"LineToolElliottMinorRetr"===e.type&&(e.type="LineToolElliottCorrection",e.state.degree=i[e.state.wavesize]),"LineToolElliottMajorRetr"===e.type&&(e.type="LineToolElliottCorrection",e.state.degree=i[e.state.wavesize])},o.prototype.title=function(){return"Elliott Labels"},
o.degrees=[$.t("Supermillennium"),$.t("Millennium"),$.t("Submillennium"),$.t("Grand Supercycle"),$.t("Supercycle"),$.t("Cycle"),$.t("Primary"),$.t("Intermediate"),$.t("Minor",{context:"wave"}),$.t("Minute"),$.t("Minuette"),$.t("Subminuette"),$.t("Micro"),$.t("Submicro"),$.t("Miniscule")],o.prototype.additionalActions=function(e){var t=new d({text:$.t("Degree")}),i=this;return t.subActions=o.degrees.map(function(t,o){var n=new d({text:t,checkable:!0,checked:i.properties().degree.value()===o});return n.callbacks().subscribe(null,function(){e.setProperty(i.properties().degree,o,"Change Elliott Degree")}),n}),[t]},o.prototype.label=function(e){var t=o.degrees.length-this.properties().degree.value()-1,i=Math.floor(t/3),n=t%3;return{fontIncrease:4*Math.floor(i),bold:!!(i%2),decoration:["","brackets","circle"][n],label:this.labelsGroup()[i][e]}},o.prototype.getStylesPropertyPage=function(){return _.LineToolElliottStylesPropertyPage},o.prototype.getDegrees=function(){return o.degrees},inherit(n,o),n.version=3,n.prototype.pointsCount=function(){return 6},n.prototype.migrateVersion=function(e,t,i){if(1===e){var o=$.extend({},this._timePoint[0]);this._timePoint.unshift(o),this._points.length>0&&(o=$.extend({},this._points[0]),this._points.unshift(o))}},inherit(r,n),r._labelsGroups=[["0","1","2","3","4","5"],["0","i","ii","iii","iv","v"],["0","1","2","3","4","5"],["0","I","II","III","IV","V"],["0","1","2","3","4","5"]],r.prototype.labelsGroup=function(){return r._labelsGroups},inherit(s,n),s._labelsGroups=[["0","A","B","C","D","E"],["0","a","b","c","d","e"],["0","A","B","C","D","E"],["0","a","b","c","d","e"],["0","A","B","C","D","E"]],s.prototype.labelsGroup=function(){return s._labelsGroups},inherit(a,n),a._labelsGroups=[["0","W","X","Y","X","Z"],["0","w","x","y","x","z"],["0","W","X","Y","X","Z"],["0","w","x","y","x","z"],["0","W","X","Y","X","Z"]],a.prototype.labelsGroup=function(){return a._labelsGroups},inherit(l,o),l.version=3,l.prototype.pointsCount=function(){return 4},l.prototype.migrateVersion=function(e,t,i){if(1===e){var o=$.extend({},this._timePoint[0]);this._timePoint.insert(o,0),this._points.length>0&&(o=$.extend({},this._points[0]),this._points.insert(o,0))}},inherit(c,l),c._labelsGroups=[["0","A","B","C"],["0","a","b","c"],["0","A","B","C"],["0","a","b","c"],["0","A","B","C"]],c.prototype.labelsGroup=function(){return c._labelsGroups},inherit(h,l),h._labelsGroups=[["0","W","X","Y"],["0","w","x","y"],["0","W","X","Y"],["0","w","x","y"],["0","W","X","Y"]],h.prototype.labelsGroup=function(){return h._labelsGroups},t.LineToolElliott=o,t.LineToolElliottImpulse=r,t.LineToolElliottTriangle=s,t.LineToolElliottTripleCombo=a,t.LineToolElliottCorrection=c,t.LineToolElliottDoubleCombo=h},function(e,t,i){"use strict";function o(e,t){var i=e[0].getBoundingClientRect();t.localX=t.clientX-i.left,t.localY=t.clientY-i.top}function n(e,t,i,o){new u(e,t,i,o)}var r,s,a,l,c,h,u;Object.defineProperty(t,"__esModule",{value:!0}),t.setMouseEventHandler=n,r=i(13),i.n(r),s=i(104),i.n(s),a=i(358),i.n(a),l=i(7),i.n(l),c=2,h=!1,u=function(){
function e(e,t,i,o){this._clickCount=0,this._clickTimeoutId=null,this._touchContextMenuTimeout=null,this._lastTouchPosition={x:0,y:0},this._mouseMoveStartPosition=null,this._cancelClick=!1,this._$target=e,this._handler=t,this._originalPreventDefault=i,this._preventDefault=!o&&i,this._verticalTouchScroll=o,this._init()}return e.prototype._mouseEnterHandler=function(e){this._$target.off("mousemove.chartgui"),this._$target.on("mousemove.chartgui",this._mouseMoveHandler.bind(this)),Modernizr.touch&&this._mouseMoveHandler(e),this._processEvent(e,this._handler.mouseEnterEvent),this._preventDefaultIfNeeded(e)},e.prototype._resetClickTimeout=function(){null!==this._clickTimeoutId&&clearTimeout(this._clickTimeoutId),this._clickCount=0,this._clickTimeoutId=null},e.prototype._mouseMoveHandler=function(e){h&&!Modernizr.touch||(this._processEvent(e,this._handler.mouseMoveEvent),this._preventDefaultIfNeeded(e))},e.prototype._mouseMoveWithDownHandler=function(e){var t,i,o,n,r,s,a;void 0===e.button&&(e.button=0),t=!1,this._fixMouseTouchEvent(e,e.originalEvent),i=Modernizr.touch||e.originalEvent.touches,i&&(this._verticalTouchScroll&&(o=Math.abs(.5*(e.pageX-this._lastTouchPosition.x)),n=Math.abs(e.pageY-this._lastTouchPosition.y),o<=n?(t=!0,this._preventDefault=!1):this._preventDefault=this._originalPreventDefault),this._lastTouchPosition.x=e.pageX,this._lastTouchPosition.y=e.pageY),r=Object(l.ensure)(this._mouseMoveStartPosition),s=Math.abs(r.x-e.pageX),a=Math.abs(r.y-e.pageY),s+a>5&&(this._cancelClick=!0,i&&this._clearContextMenuTimeout()),e.button===c||t||this._processEvent(e,this._handler.pressedMouseMoveEvent),this._preventDefaultIfNeeded(e)},e.prototype._mouseUpHandler=function(e){void 0===e.button&&(e.button=0),this._fixMouseTouchEvent(e,e.originalEvent),Modernizr.touch&&this._clearContextMenuTimeout(),this._mouseMoveStartPosition=null,h=!1;var t=e.target.ownerDocument.documentElement;$(t).off("mousemove.chartgui"),$(t).off("mouseup.chartgui"),Modernizr.touch||e.originalEvent.touches?($(t).off("touchmove.chartgui"),$(t).off("touchend.chartgui"),this._mouseLeaveHandler(e)):($(t).off("mousemove.chartgui touchmove.chartgui"),$(t).off("mouseup.chartgui touchend.chartgui")),e.button!==c&&(this._processEvent(e,this._handler.mouseUpEvent),++this._clickCount,this._clickTimeoutId&&this._clickCount>1?(this._processEvent(e,this._handler.mouseDoubleClickEvent),this._resetClickTimeout()):this._cancelClick||this._processEvent(e,this._handler.mouseClickEvent)),this._preventDefaultIfNeeded(e),Modernizr.touch&&this._mouseLeaveHandler(e)},e.prototype._clearContextMenuTimeout=function(){null!==this._touchContextMenuTimeout&&(clearTimeout(this._touchContextMenuTimeout),this._touchContextMenuTimeout=null)},e.prototype._mouseDownHandler=function(e){void 0===e.button&&(e.button=0),this._cancelClick=!1,this._fixMouseTouchEvent(e,e.originalEvent),Modernizr.touch&&(this._lastTouchPosition.x=e.pageX,this._lastTouchPosition.y=e.pageY,this._mouseEnterHandler(e)),this._mouseMoveStartPosition={x:e.pageX,y:e.pageY}
;var t=e.target.ownerDocument.documentElement;if(Modernizr.touch?($(t).off("touchmove.chartgui"),$(t).off("touchend.chartgui"),$(t).on("touchmove.chartgui",this._mouseMoveWithDownHandler.bind(this)),$(t).on("touchend.chartgui",this._mouseUpHandler.bind(this)),this._clearContextMenuTimeout(),this._touchContextMenuTimeout=setTimeout(this._contextMenuHandler.bind(this,e),500)):($(t).off("mousemove.chartgui touchmove.chartgui"),$(t).off("mouseup.chartgui touchend.chartgui"),$(t).on("mousemove.chartgui touchmove.chartgui",this._mouseMoveWithDownHandler.bind(this)),$(t).on("mouseup.chartgui touchend.chartgui",this._mouseUpHandler.bind(this))),h=!0,e.button!==c&&(this._processEvent(e,this._handler.mouseDownEvent),this._clickTimeoutId||(this._clickCount=0,this._clickTimeoutId=setTimeout(this._resetClickTimeout.bind(this),500))),this._preventDefaultIfNeeded(e),this._preventDefault)try{window.focus()}catch(e){}},e.prototype._init=function(){var e=this;this._$target.mouseenter(this._mouseEnterHandler.bind(this)),this._$target.on("touchcancel",this._clearContextMenuTimeout.bind(this)),this._$target.on("touchstartoutside mousedownoutside",function(t){e._handler.mouseDownOutsideEvent&&e._handler.mouseDownOutsideEvent(t,e._$target)}),this._$target.mouseleave(this._mouseLeaveHandler.bind(this)),this._$target.contextMenu&&this._$target.contextMenu(this._contextMenuHandler.bind(this)),Modernizr.touch?(this._$target.on("touchstart.chartgui",this._mouseDownHandler.bind(this)),this._initGestureEvents()):this._$target.on("mousedown.chartgui touchstart.chartgui",this._mouseDownHandler.bind(this))},e.prototype._mouseLeaveHandler=function(e){this._$target.off("mousemove.chartgui touchmove.chartgui"),this._processEvent(e,this._handler.mouseLeaveEvent),this._preventDefaultIfNeeded(e)},e.prototype._contextMenuHandler=function(e){this._processEvent(e,this._handler.contextMenuEvent),this._preventDefaultIfNeeded(e),this._cancelClick=!0},e.prototype._processEvent=function(e,t){t&&(o(this._$target,e),t.call(this._handler,e,this._$target))},e.prototype._preventDefaultIfNeeded=function(e){this._preventDefault&&e.preventDefault()},e.prototype._initGestureEvents=function(){var e=this,t=new a(this._$target.get(0));t.get("pinch").set({enable:!0}),t.on("pinchstart",function(t){e._handler.gestureStartEvent&&e._handler.gestureStartEvent(t,e._$target),e._clearContextMenuTimeout()}),t.on("pinchmove",function(t){e._handler.gestureChangeEvent&&e._handler.gestureChangeEvent(t,e._$target)}),t.on("pinchend pinchcancel",function(t){e._handler.gestureEndEvent&&e._handler.gestureEndEvent(t,e._$target)})},e.prototype._fixMouseTouchEvent=function(e,t){var i;if(t.touches&&0!==t.touches.length)i=t.touches[0];else{if(!t.changedTouches||0===t.changedTouches.length)return;i=t.changedTouches[0]}e.pageX=i.pageX,e.pageY=i.pageY,e.localX=i.pageX,e.localY=i.pageY,e.clientX=i.clientX,e.clientY=i.clientY},e}()},,function(e,t,i){"use strict";function o(e){return new Promise(function(t){i.e(2).then(function(o){var r=i(190).createDialog;t(r(n.a({},a,e)))}.bind(null,i)).catch(i.oe)})}
var n,r,s,a;Object.defineProperty(t,"__esModule",{value:!0}),t.createConfirmDialog=o,n=i(3),i(11),r={key:13,name:"yes",text:window.t("Yes"),type:"success"},s={method:"close",name:"no",text:window.t("No"),type:"default"},a={actions:[r,s],actionsWrapTemplate:'<div class="tv-dialog__section tv-dialog__section--actions tv-dialog__section--no-border">',content:window.t("Are you sure?"),contentWrapTemplate:'<div class="tv-dialog__section tv-dialog__section--no-border"><div class="tv-text"><p></p></div></div>',destroyOnClose:!0,title:window.t("Confirmation"),width:400}},function(e,t,i){"use strict";var o,n,r;Object.defineProperty(t,"__esModule",{value:!0}),i.d(t,"HorizontalLineRenderer",function(){return r}),o=i(9),n=i(51),i.n(n),r=function(){function e(){this._data=null,this._hitTest=new o.HitTestResult(o.HitTestResult.REGULAR)}return e.prototype.setData=function(e){this._data=e},e.prototype.setHitTest=function(e){this._hitTest=e},e.prototype.draw=function(e){var t,i;null!==this._data&&0!==this._data.points.length&&!1!==this._data.visible&&((t=this._data.points[0].y)<0||t>this._data.height||(i=this._data.width,e.lineCap="square",e.strokeStyle=this._data.color,e.lineWidth=this._data.linewidth,void 0!==this._data.linestyle&&Object(n.setLineStyle)(e,this._data.linestyle),Object(n.drawLine)(e,0,t,i,t)))},e.prototype.hitTest=function(e){return null===this._data||!1===this._data.visible?null:0===this._data.points.length?null:Math.abs(e.y-this._data.points[0].y)<=5?this._hitTest:null},e}()},function(e,t,i){"use strict";(function(e,o,n){function r(t,i){var r,a=t._undoModel._chartWidget,l=a.onWidget(),c=!1;c=l?a._options&&!a._options.hideIdeas:!!e.enabled("bars_marks")&&TVSettings.getBool("BarsMarksContainer.visibile",!1),i?i.merge({visible:c,frozen:!1}):i=new o({visible:c,frozen:!1}),r=this,i.visible.listeners().subscribe(null,function(t){l||a._containsData||!e.enabled("bars_marks")||TVSettings.setValue("BarsMarksContainer.visibile",!!t.value()),r._tooltip&&r._tooltip.removeAll()}),s.call(this,t,i),this.onNeedRepaint=new n,this._requests=[],this._marks={},this._loadedRange=null,this._getDataTimeout=null,this._collectedRange=null,this._model.mainSeries().onSymbolIntervalChanged().subscribe(this,this.clearMarks),this._model.mainSeries().onSymbolResolved().subscribe(this,this.clearMarks),this._model.mainSeries().onTickmarksRangeChanged().subscribe(this,this.getData),this._initialize(),this.pinnedTooltips={},this._tooltip=new h(this._createTooltip.bind(this),this)}var s=i(0).LineDataSource,a=i(14).isNumber,l=i(181).BarsMarksContainerPaneView,c=i(181).BarsMarksContainerRenderer,h=i(727).TooltipRenderer,u=i(5).getLogger("Chart.BarsMarksContainer");inherit(r,s),r.prototype._constructor="Child class must override this member",r.prototype._initialize=function(e){throw Error("Child class must override this member")},r.prototype.onClicked=function(){throw Error("Child class must override this member")},r.prototype._getData=function(e){throw Error("Child class must override this member")},r.prototype._createTooltip=function(){
throw Error("Child class must override this member")},r.prototype.updateDotData=function(e,t){return t},r.prototype.updatePlateData=function(e,t){},r.prototype._plateViewData=function(e){return{}},r.prototype.pinTooltip=function(e,t){this.pinnedTooltips[e]=t},r.prototype.timeScale=function(){return this._model.timeScale()},r.prototype.getIntervalInTicks=function(){function e(e){if((e=parseInt(e))!=e)throw new TypeError("Unexpected interval");return 60*e}var t=e(1440),i=7*t,o=31*t,n=this._model.mainSeries().properties().interval.value();switch(n){case"M":return o;case"W":return i;case"D":return t;default:return e(n)}},r.prototype._maxDate=Math.round(new Date(2037,0,1).getTime()/1e3),r.prototype.getVisibleTickmarksRange=function(){var e,t;return this.timeScale().isEmpty()?{start:0,end:0}:(e=this.timeScale().visibleBars(),e.lastBar()>this.timeScale().points().firstIndex()&&e.firstBar()<this.timeScale().points().lastIndex()?(t=e.lastBar()<this.timeScale().points().lastIndex()?this.timeScale().indexToTimePoint(e.lastBar()):this._maxDate,e={start:this.timeScale().indexToTimePoint(Math.max(e.firstBar(),this.timeScale().points().firstIndex())),end:t},{start:e.start?e.start:void 0,end:e.end?e.end:void 0}):{start:0,end:0})},r.prototype.getVisibleRangePlates=function(){var e=[],t=this.getVisibleTickmarksRange(),i=this.getIntervalInTicks();return $.each(this._marks,function(o,n){var r=n.tickmark;r>=t.start&&r<=t.end+i&&e.push(n)}),e},r.prototype.getPublishedPlates=function(){var e={},t=this;return is_authenticated?($.each(this.getVisibleRangePlates(),function(i,o){o.is_public&&(t.pinnedTooltips[o.id]||o.user__id===user.id)&&(e[o.id]=o)}),e):e},r.prototype._maxPlatesPerBar=10,r.prototype.filterDisplayedPlates=function(e){return e=e.reduce(function(e,t){var i=this._getIndex(t.tickmark);return e[i]=e[i]||[],e[i].push(t),e}.bind(this),{}),e=Object.keys(e).reduce(function(t,i){var o=e[i];return o=o.sort(function(e,t){return t.views_count-e.views_count}),o=o.slice(0,this._maxPlatesPerBar),t.concat(o)}.bind(this),[])},r.prototype._layout=function(e){switch(e){default:case 0:return"up";case 1:return"down";case 2:return"up";case 3:case 4:case 5:case 6:return"up"}},r.prototype._theme=function(e){switch(e){default:case 0:return"neutral";case 1:return"green";case 2:return"red";case 3:return"yellow";case 4:return"blue";case 5:return"green";case 6:return"red"}},r.prototype._offset=function(e,t){var i;switch(e){default:case"up":i=t[TradingView.HIGH_PLOT];break;case"down":i=t[TradingView.LOW_PLOT]}return this.priceScale().priceToCoordinate(i,this.ownerSource().firstValue())},r.prototype._getIndex=function(e){return this.timeScale().timePointToIndex(e)},r.prototype.getViewData=function(){return{barWidth:this.barWidth(),plates:this.getPlatesViewData(),tooltip:this._tooltip}},r.prototype.barWidth=function(){return this.timeScale().barSpacing()},r.prototype.getPlatesViewData=function(){var e,t,i,o,n,r;if(this._model.mainSeries().data().isEmpty())return[];e=this.filterDisplayedPlates(this.getVisibleRangePlates()),t=this,i={},
o=this._model.lastHittestData(),e=e.map(function(e){var n,r,s,a,l,c,h=this._getIndex(e.tickmark),u=this._getBar(h);return null!==u&&(n=this._layout(e.direction),r=this._theme(e.direction),s=o&&o.id===e.id,a=this.timeScale().indexToCoordinate(h),l=this._offset(n,u),c=0,h in i||(i[h]={up:0,down:0}),c=i[h][n]++,TradingView.merge({id:e.id,x:a,y:l,order:c,direction:n,theme:r,hovered:s,pinned:!0===t.pinnedTooltips[e.id],user__id:e.user__id,label:e.label,labelFontColor:e.labelFontColor||"#444",minSize:e.minSize||5},this._plateViewData(e)))}.bind(this)),e=e.filter(function(e){return!!e}),n=e.filter(function(e){return!0===e.hovered});for(r=0;r<e.length;r++)null!=n[0]&&e[r].user__id===n[0].user__id&&(e[r].highlightByAuthor=!0);return e.sort(function(e,t){return e.hovered&&!t.hovered?1:0}),e},r.prototype._getBar=function(e){return this._model.mainSeries().data().valueAt(e)},r.prototype.paneViews=function(e){var t=this;return this._properties.visible.value()?[new l(this,e,function(e){return new c(e.getViewData(),t)})]:[]},r.prototype.dataWindowView=function(){return null},r.prototype.priceAxisViews=function(){return null},r.prototype.statusView=function(){return null},r.prototype.updateAllViews=function(){},r.prototype.pointsCount=function(){return 0},r.prototype.properties=function(){return this._properties},r.prototype._rangeDifference=function(e){return e=$.extend({},e),this._loadedRange&&(e.start<this._loadedRange.start?e.end=this._loadedRange.start:e.end>this._loadedRange.end&&(e.start=this._loadedRange.end)),e},r.prototype._rangeUnion=function(e,t){return e=$.extend({},e),t&&(e.start=Math.min(t.start,e.start),e.end=Math.max(t.end,e.end)),e},r.prototype._pushGetDataStack=function(e){if(!a(e.start)||!a(e.end))return void u.logError("Wrong tickmark range");this._getDataTimeout&&clearTimeout(this._getDataTimeout),this._collectedRange=this._rangeUnion(e,this._collectedRange),this._getDataTimeout=setTimeout(function(){this._getData(this._collectedRange),this._getDataTimeout=this._collectedRange=null}.bind(this),300)},r.prototype.roundRange=function(e){return{start:Math.round(e.start),end:Math.round(e.end)}},r.prototype.refreshData=function(){this.getData(this._lastRange)},r.prototype.getData=function(e){if(!a(e.start)||!a(e.end))return void u.logError("Wrong range");this._lastRange=e;var e=$.extend({},e);e.end=this._maxDate,this._pushGetDataStack(e)},r.prototype._abortAllRequests=function(){this._requests.forEach(function(e){e.abort()}),this._requests=[],this._getDataTimeout&&clearTimeout(this._getDataTimeout),this._getDataTimeout=this._collectedRange=null},r.prototype.clearMarks=function(){this._abortAllRequests(),this._marks={},this._loadedRange=null},t.BarsMarksContainer=r}).call(t,i(4),i(12),i(8))},function(e,t,i){"use strict";var o=i(286),n={instances:[],createMenu:function(e,t,i){var n=new o(e,t,i);return this.instances.push(n),n},hideAll:function(){for(var e in this.instances)this.instances[e].hide()}};e.exports=n},,,,,,,,,,,function(e,t,i){"use strict";(function(t){function o(e){this._data=e,this._textWidthCache=new l}
function n(e,t,i,o,n){this._model=e,this._source=t,this._plotIndex=i,this._getterName=o||"symbol",this._propertyName=n,this._cache={},this._invalidated=!0,this._rendererData={}}var r=i(27),s=r.parseRgb,a=r.rgbToBlackWhiteString,l=i(114),c=i(50).CompositeRenderer,h=i(115).makeFont,u=i(24);o.prototype.hitTest=function(e){return null},o.prototype.draw=function(e){var t,i,o,n,r,s,a,l,c,h;this._data.visible&&(this._textWidthCache.font!==this._data.font&&(this._textWidthCache.reset(),this._textWidthCache.font=this._data.font),e.font=this._data.font,t=this._data.fontSize,i=Math.floor(t/4.5),o=Math.ceil(t/4.5),n=Math.ceil(t/3),r=Math.ceil(this._textWidthCache.measureText(e,this._data.text)),s=Math.round(t/10),a=t+i+o,l=r+2*n,c=this._data.x-.5,"right"===this._data.align&&(c-=l),h=this._data.y-Math.floor(t/2)-i-.5,e.fillStyle=u.resetTransparency(this._data.backColor),e.fillRect(c,h,l,a),e.fillStyle=this._data.color,e.textAlign="left",e.fillText(this._data.text,c+n,h+i+t-s))},n.prototype.isPropertyEnabled=function(){return this._model.properties().scalesProperties[this._propertyName].value()},n.prototype.update=function(){this._invalidated=!0},n.prototype.updateImpl=function(){var e,i,o,n,r,l,u,d,p=this._rendererData;if(p.visible=!1,p.text="",this.isPropertyEnabled()&&this._source.properties().visible.value()&&(e=this._source.lastValueData(this._plotIndex,t.enabled("price_scale_always_last_bar_value")),!e.noData)){if(i=this._model.paneForSource(this._source),o="right",i.leftPriceScale()===this._source.priceScale()&&(o="left"),n=this._model.properties(),r=!i.leftPriceScale().mainSource()||!i.rightPriceScale().mainSource(),r&&n.scalesProperties.showLeftScale.value()&&!n.scalesProperties.showRightScale.value()&&(o="left"),!r){if("left"===o&&!n.scalesProperties.showLeftScale.value())return new c;if("right"===o&&!n.scalesProperties.showRightScale.value())return new c}l=e.coordinate,u=this._source.m_data.m_series&&this._source.m_data.m_series.properties().style.value()===TradingView.Series.STYLE_HEIKEN_ASHI,this._source.lastPriceLabelFixedCoordinate&&!u&&"showSymbolLabels"===!this._propertyName&&(l=this._source.lastPriceLabelFixedCoordinate(this._plotIndex)||l),e.color!==p.backColor&&(p.backColor=this._source.priceLineColor(e.color),d=a(s(p.backColor),160),p.color="black"===d?"white":"black"),p.text=this._source[this._getterName](this._plotIndex),p.visible=""!==p.text,p.align=o,p.x="right"===o?this._model.timeScale().width():0,p.y=l,p.fontSize=this._model.properties().scalesProperties.fontSize.value(),p.font=h(p.fontSize,"Arial","")}},n.prototype.renderer=function(){return this._invalidated&&(this.updateImpl(),this._invalidated=!1),this._renderer||(this._renderer=new o(this._rendererData)),this._renderer},e.exports=n}).call(t,i(4))},function(e,t,i){"use strict";function o(e,t){var o=t||new h("linetoolarrowmark");o.hasChild("text")||o.addChild("text",new c("")),o.addExclusion("text"),l.call(this,e,o),i.e(0).then(function(t){
var o=i(351).TextPaneView,n=i(352).MarkPaneView,r=[new n(this,e,this.image,this.width,this.height,this.offsetX,this.offsetY)],s=this._createTextPaneView(o);null!==s&&r.push(s),this._setPaneViews(r)}.bind(this).bind(null,i)).catch(i.oe)}function n(e,t){this._constructor="LineToolArrowMarkLeft",o.call(this,e,t)}function r(e,t){this._constructor="LineToolArrowMarkUp",o.call(this,e,t)}function s(e,t){this._constructor="LineToolArrowMarkRight",o.call(this,e,t)}function a(e,t){this._constructor="LineToolArrowMarkDown",o.call(this,e,t)}var l=i(0).LineDataSource,c=i(12),h=i(2).DefaultProperty,u=i(1).propertyPages;inherit(o,l),o.prototype.width=21,o.prototype.height=21,o.prototype.offsetX=0,o.prototype.offsetY=0,o.prototype.paneViews=function(e){var t=l.prototype.paneViews.call(this,e);return null!==t&&this._textPaneView&&t.push(this._textPaneView),t},o.prototype.pointsCount=function(){return 1},o.prototype.title=function(){return"Arrow Mark"},o.prototype.getStylesPropertyPage=function(){return u.LineToolArrowMarkStylesPropertyPage},o.prototype._createTextPaneView=function(e){return null},inherit(n,o),n.prototype.image=new Image,n.prototype.image.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAVCAYAAACpF6WWAAAB50lEQVR4AWMgETAKKAgIAGkQ5mCgAmCWdtTWV4yxvgFkWwKxOKUGssr5Gccrx9t+Vk6w+w/kxwKxIrmGMTKIivIohFvONKsI+e/cl/ofamgGECuTYyCTqJ2mqlK01Vnr+uj/HjNy/1v1J8AMzSTHUBYZP6MgpTjb97bNsf9dpmf9N++J/W/UEQEztAiIbUEGo2EpIObE8C4oVuVDzLuBmv869aT8t5+c+t+0K/q/YXs4GGsWeIAMRscwy/yhBiO8K2ijJKcYZXXYuj7qv/u0nP/W/Yn/jTsjQYYRwliDhUXKy8BVKdbmuW1T7H+3Gdn/LXrjQN4FaSDLUBa5MItyoOAvp67k/45T0pC9S56hSrHWhY4tif9D5pUDXZjz36w7Blkx+S5VDLNoBUWMY3fKfwdExMAw+WEq7Wvkoxhn+waUhFwRSYhcQxGxL26jpqQYbX3CBpjY3aeDYj+BothHpFNxcW75cIvJpmXB/516Uv/bT0r5b9IVRUY6xQSssr6GkcAc9dGuNe6/y7RMMnMUJmCWcNTSBgbHZeuG6P+eM/P+W/VRlPcRwSGoJMgvH265yKIq/L9LfzqKoZSXp0Em6cDy9BvU0Dhyy1PM4PAwMFWKs7kFZFsBsQQDlQAjr4a0MJAWxFdHAQAcI3sGHsO1dgAAAABJRU5ErkJggg==",n.prototype.offsetX=1,n.prototype.offsetY=-10,n.prototype.title=function(){return"Arrow Mark Left"},n.prototype._createTextPaneView=function(e){var t=new e(this,this._model,22,-3,"middle","left");return t.disableSelection(),t},inherit(r,o),r.prototype.image=new Image,r.prototype.image.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAVCAYAAACpF6WWAAACBklEQVR4AWMgErAoxVoXgmgGKgEWxTCLVseWxP9yYRbl1DCYSdrXyEc5we5vyLzy/0D6l5SXgStInFwDGcVt1JQU42zfOHan/HebkfPfqSv5v1KszXNBGyU5kDzpRoqLcytGW5+wbY797zA59b9Zd8x/xylp/22bYv8rRlkdBqrgINVIVvlwi8k29dH/Xadn/Tftiv5v2B4Opt1mZP+3ro/6Lx9i3k1K+DLL+hpGmpYF/3efnvPfvCcWZCAcW/TG/XeflvMfFM4yfkZBxIQvo4SjlrZSnO1Hp57U/9b9Cf+NOiKQDQXxgeKJ/516Uv4D1b0XtdNUxRu+gkqC/MBwvGzXGvffflLKf+POSISBCAwWtweGMyi8laKtzjKIivLgCUfLRdYN0f9dpmX+N+mKghiCieHh6wIMb2tguCuEW84E6ccIR7kgk3SLqvD/njPzYOFICIPVeczI/W9WEfJfzs84HmQOIhw9DEyV422/ufSn/7fqg4cjIQxWZwUMd+e+1P9A/Z+lHbX1weHLqyEtrBRncwsYm/+RsWaBBz4DwfLoehRjrG8IKAgIgOMHiK2AOA6IM6G4CKgIr6EgeZA6qPoMII4FYksgFmCA5gwJIFYEYmUotiXSUFuYHqh+cXw5TZlIQ5WxaR4mhuLBZBkqBcT+oJjFg/3B6kgAnFANyniwFEQdJgAAOuN7Bp7MBuYAAAAASUVORK5CYII=",r.prototype.offsetX=-9,r.prototype.offsetY=0,r.prototype.title=function(){
return"Arrow Mark Up"},r.prototype._createTextPaneView=function(e){var t=new e(this,this._model,0,18,"top","center");return t.disableSelection(),t},inherit(s,o),s.prototype.image=new Image,s.prototype.image.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAVCAYAAACpF6WWAAAB60lEQVR4AWPAAziAWJBXQ1oYSDMyUAlIALGVUpzNLQkPA1Mgm5kahioCcZxygt1/5Xjbb3JBJulAPiulhioDcSbIUJf+9P8WVeH/5cMtFwkqCfKDgoNiQ636Ev57zsz7b90Q/V8x2vqyhKOWNqHg4ARiKZAhaNgWiItAhhp1RPw374n97zIt879da9x/pTjbj7K+hpE4gwNqoD9IMzasWeDx37A9HIxNuqL+209K+e/Uk/rftCwYGBwWkxnExbkRwYHpTZBGgti4M/K/dX/Cf/fpOf9t6sHBcULcRk0JaAYT6YYiMDw4XKdn/bdtjv2vGGf7RtrXyAdoDguZhiKwaVf0f4fJqf8du1NAQfVXMcyiFWQwmYYisFl3zH+3GTn/Q+aV/3dsSfyvFGtdSLFLHaek/XfqSga59JdcmEU5yKVkh6lFbxzQhdn/bZtiga6zeS7lZeAKMpCC2E/87z4t5791fdR/xSirw4I2SnKg2CcxnSK8aw+MGKceSMTIh5h3Q0szRvJzFCQJgXLUexk/oyCQd8nP+8DE7jEjF+jd6P9K0VZnRe00VWHeJcfQDJChzn2p/80qQv4rhFvOZBAV5QF5l5LyNBZann6W8zOOp0Z5Kg7Eloox1jekHbX1qVLyQ2NVQEBBQIBU7wIAOFZ7BmG7RzYAAAAASUVORK5CYII=",s.prototype.offsetX=-19,s.prototype.offsetY=-10,s.prototype.title=function(){return"Arrow Mark Right"},s.prototype._createTextPaneView=function(e){var t=new e(this,this._model,-22,-3,"middle","right",!0);return t.disableSelection(),t},inherit(a,o),a.prototype.image=new Image,a.prototype.image.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAVCAYAAACpF6WWAAAB/UlEQVR4AWPAATj3Wij8J4RB6hhIAFIgTS9a8nBhmKFSpBiqDNJ0P80PF4YZqkyyobfD7HDh4WJolaKY+G5zhXvoMXva2xifoWB5dD07zeTvFKvxioDMFY6RFUgEGvzzQVk8OGafVib9v5fkhc9QkDxIHVj9vaKY/7vM5b+HS/JFA80TAhnKA8TGZSoiS057GYFiFqzhTpQTPkNB8iB1YPUnPQz+5ykKzQGaYwjE3CBDmUCuBWKHabqSZ0656oI0EY1B6idoSx4F6reDupIJFrTMQCwtxsYcvNZY5uU5T0OiDDwLdOFKI9knvMzM/kD9kmBz0AAbEKs6iHAX7zSX/3nF3xyvgZd8Tf9vM5P/ZiXAmQdNBazYEgIjEHOBwiVHXmjWcSctnAbeDLH5f8xR83+SjNBEoHo9sD4owGWwIBDb9mtJHMIVviDxDg3x3UB11kDMD9ZHADCDwkeAmdlvhZHMI2C4oRh4xl3//1IDmbvszAxeQHXiUPWEATR8lE0EubJB4QYMP7CBF31M/m82k/usy8uRCpRXAKsjEXCCwiteVqD/qIPG/+tBVv/3WCj8C5Pi7wCKawMxBwMZgBEaXlbtGuI7T7ro/G9QFdsI5JsDMR/+cCQcvuLsLAzubRoSa4FsJyAWBSdwsgEifKVBXoYmcBYGagCoQZzEGggAoyq6zKXuV5gAAAAASUVORK5CYII=",a.prototype.offsetX=-9,a.prototype.offsetY=-18,a.prototype.title=function(){return"Arrow Mark Down"},a.prototype._createTextPaneView=function(e){var t=new e(this,this._model,0,-23,"bottom","center");return t.disableSelection(),t},s.prototype.version=n.prototype.version=a.prototype.version=r.prototype.version=2,t.LineToolArrowMark=o,t.LineToolArrowMarkLeft=n,t.LineToolArrowMarkRight=s,t.LineToolArrowMarkUp=r,t.LineToolArrowMarkDown=a},,function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i.d(t,"LineEnd",function(){return o});var o;!function(e){e[e.Normal=0]="Normal",e[e.Arrow=1]="Arrow",e[e.Circle=2]="Circle"}(o||(o={}))},,function(e,t,i){"use strict";var o,n;Object.defineProperty(t,"__esModule",{value:!0}),i.d(t,"NumericFormatter",function(){return n}),o=i(19),n=function(){function e(e){this._precision=e}return e.prototype.format=function(t){return(void 0!==this._precision?t.toFixed(this._precision):e.formatNoE(t)).replace(".",o.formatterOptions.decimalSign)},
e.prototype.parse=function(e){var t=e.replace(o.formatterOptions.decimalSign,"."),i=parseFloat(t);return this._precision&&(i=+i.toFixed(this._precision)),i},e.formatNoE=function(e){return e>=1e-15&&e<1?e.toFixed(15).replace(/\.?0+$/,""):e+""},e}()},,,function(e,t,i){"use strict";var o,n,r;Object.defineProperty(t,"__esModule",{value:!0}),i.d(t,"PercentageFormatter",function(){return r}),o=i(3),n=i(19),r=function(e){function t(t){void 0===t&&(t=100);var i=e.call(this,t)||this;return i.type="percentage",i}return o.c(t,e),t.prototype.state=function(){var e=n.PriceFormatter.prototype.state.call(this);return e.percent=!0,e},t.prototype.format=function(t,i,o,n){return e.prototype.format.call(this,t,i,o,n)+"%"},t.serialize=function(e){return e.state()},t.deserialize=function(e){return new t(e.priceScale)},t}(n.PriceFormatter)},function(e,t,i){"use strict";var o=i(158).TVLocalStorage;i(63),TradingView.FeatureToggle={force_prefix:"forcefeaturetoggle.",enableFeature:function(e){o.setItem(this.force_prefix+e,"true")},disableFeature:function(e){o.setItem(this.force_prefix+e,"false")},resetFeature:function(e){o.removeItem(this.force_prefix+e)}},TradingView.isFeatureEnabled=function(e){function t(t){var i=Math.random()<=e[t];return o.setItem(n+t,i),i}function i(e){return-1===["address-autocomplete-google-key","black_friday","black_friday_popup","black_friday_mainpage","coinbase_payments","ios_app_info","text_notes","multiple-sos","datawindow","broker_ALOR_dev"].indexOf(e)&&-1===e.indexOf("-maintenance")}var n="featuretoggle.";return function(r){var s,a;return!(!s&&"local"!==window.environment||!i(r))||(!e[r]||-1!==e[r])&&(!!("true"===o.getItem(TradingView.FeatureToggle.force_prefix+r)||window.is_authenticated&&"undefined"!=typeof user&&user.settings&&"true"===user.settings[TradingView.FeatureToggle.force_prefix+r])||!("false"===o.getItem(TradingView.FeatureToggle.force_prefix+r)||window.is_authenticated&&"undefined"!=typeof user&&user.settings&&"false"===user.settings[TradingView.FeatureToggle.force_prefix+r])&&(!!e[r]&&(1===e[r]||(a=o.getItem(n+r),void 0===a||null===a?t(r):"true"===a))))}}(window.featureToggleState||{}),t.FeatureToggle=TradingView.FeatureToggle,t.isFeatureEnabled=TradingView.isFeatureEnabled},function(e,t,i){"use strict";function o(e){return"line"===e.type}function n(e){return"shapes"===e.type}function r(e){return"chars"===e.type}function s(e){return"arrows"===e.type}function a(e){return"dataoffset"===e.type}function l(e){return"ohlc_open"===e.type}function c(e){return"ohlc_high"===e.type}function h(e){return"ohlc_low"===e.type}function u(e){return"ohlc_close"===e.type}function d(e){return l(e)||c(e)||h(e)||u(e)}function p(e){return"colorer"===e.type}function _(e){return"bar_colorer"===e.type}function f(e){return"bg_colorer"===e.type}function m(e){return"text_colorer"===e.type}function g(e){return"ohlc_colorer"===e.type}function y(e){return"ohlc_bars"===e.plottype}function v(e){return"ohlc_candles"===e.plottype}var b,S;Object.defineProperty(t,"__esModule",{value:!0}),i.d(t,"PlotType",function(){return b}),
t.isLinePlot=o,t.isShapesPlot=n,t.isCharsPlot=r,t.isArrowsPlot=s,t.isDataOffsetPlot=a,t.isOhlcOpenPlot=l,t.isOhlcHighPlot=c,t.isOhlcLowPlot=h,t.isOhlcClosePlot=u,t.isOhlcPlot=d,t.isColorerPlot=p,t.isBarColorerPlot=_,t.isBgColorerPlot=f,t.isTextColorerPlot=m,t.isOhlcColorerPlot=g,t.isOhlcPlotStyleBars=y,t.isOhlcPlotStyleCandles=v,i.d(t,"PlotSymbolSize",function(){return S}),function(e){e[e.Line=0]="Line",e[e.Histogram=1]="Histogram",e[e.Cross=3]="Cross",e[e.Area=4]="Area",e[e.Columns=5]="Columns",e[e.Circles=6]="Circles",e[e.LineWithBreaks=7]="LineWithBreaks",e[e.AreaWithBreaks=8]="AreaWithBreaks",e[e.StepLine=9]="StepLine"}(b||(b={})),function(e){e.Auto="auto",e.Tiny="tiny",e.Small="small",e.Normal="normal",e.Large="large",e.Huge="huge"}(S||(S={}))},function(e,t,i){"use strict";var o;Object.defineProperty(t,"__esModule",{value:!0}),i.d(t,"TVXWindowEvents",function(){return o}),i(73),function(e){function t(e,t){s[e]||(s[e]=[]),s[e].push(t)}function i(e,t){if(s[e]){var i=s[e].indexOf(t);-1!==i&&(1===s[e].length?delete s[e]:s[e].splice(i,1))}}function o(e){return TVLocalStorage.getItem(r+e)}function n(e,t){void 0===t&&(t=(new Date).valueOf()),t!==TVLocalStorage.getItem(r+e)&&TVLocalStorage.setItem(r+e,t)}var r="tvxwevents.",s={};window.addEventListener("storage",function(e){if(null!==e.newValue){var t=e.key;t&&t.startsWith(r)&&(t=t.substr(r.length),s[t]&&s[t].forEach(function(t){t.call(e.newValue,e.newValue)}))}}),e.on=t,e.off=i,e.current=o,e.emit=n}(o||(o={}))},function(e,t,i){"use strict";function o(e){return"s"===e}function n(e){return!o(e)}Object.defineProperty(t,"__esModule",{value:!0}),i.d(t,"layouts",function(){return r}),t.isSingleLayout=o,t.isMultipleLayout=n;var r={s:{title:"1 chart",count:1,sizer:function(e,t,i,o){return{width:t.width-o-o,height:t.height-o-o,top:o,left:o}}}}},function(e,t,i){"use strict";var o,n;Object.defineProperty(t,"__esModule",{value:!0}),i.d(t,"TimeFormatter",function(){return n}),o=i(19),n=function(){function e(e){this._formatStr=e||"%h:%m:%s"}return e.prototype.format=function(e){return o.customFormatters.timeFormatter?o.customFormatters.timeFormatter.format(e):this._formatStr.replace("%h",Object(o.numberToStringWithLeadingZero)(e.getUTCHours(),2)).replace("%m",Object(o.numberToStringWithLeadingZero)(e.getUTCMinutes(),2)).replace("%s",Object(o.numberToStringWithLeadingZero)(e.getUTCSeconds(),2))},e.prototype.formatLocal=function(e){return o.customFormatters.timeFormatter?o.customFormatters.timeFormatter.formatLocal?o.customFormatters.timeFormatter.formatLocal(e):o.customFormatters.timeFormatter.format(e):this._formatStr.replace("%h",Object(o.numberToStringWithLeadingZero)(e.getHours(),2)).replace("%m",Object(o.numberToStringWithLeadingZero)(e.getMinutes(),2)).replace("%s",Object(o.numberToStringWithLeadingZero)(e.getSeconds(),2))},e}()},,,,function(e,t,i){"use strict";function o(e){this._maxSize=e||50,this.reset()}var n=/[2-9]/g;o.prototype.measureText=function(e,t,i){var o,r,s=i||n,a=(t+"").replace(s,"0")
;return this._cache[a]?this._cache[a].width:(this._actualSize===this._maxSize&&(o=this._tick2Labels[this._oldestTick],delete this._tick2Labels[this._oldestTick],delete this._cache[o],this._oldestTick++,this._actualSize--),0===(r=e.measureText(a).width)&&t.length?0:(this._cache[a]={width:r,tick:this._usageTick},this._tick2Labels[this._usageTick]=a,this._actualSize++,this._usageTick++,r))},o.prototype.reset=function(){this._actualSize=0,this._cache={},this._usageTick=1,this._oldestTick=1,this._tick2Labels={}},e.exports=o},function(e,t,i){"use strict";function o(e,t,i){return i&&(i+=" "),(i||"")+e+"px "+t}Object.defineProperty(t,"__esModule",{value:!0}),t.makeFont=o},function(e,t,i){"use strict";var o,n;Object.defineProperty(t,"__esModule",{value:!0}),i.d(t,"DataWindowItem",function(){return o}),i.d(t,"DataWindowView",function(){return n}),o=function(){function e(e,t){this._visible=!0,this._title=e,this._value=t}return e.prototype.title=function(){return this._title},e.prototype.text=function(){return this._value},e.prototype.value=function(){return this._value},e.prototype.setValue=function(e){this._value=e},e.prototype.visible=function(){return this._visible},e.prototype.setVisible=function(e){this._visible=e},e.prototype.color=function(){return this._color},e.prototype.setColor=function(e){this._color=e},e}(),n=function(){function e(){this._items=[],this._header="",this._title=""}return e.prototype.header=function(){return this._header},e.prototype.title=function(){return this._title},e.prototype.items=function(){return this._items},e.prototype.update=function(){},e}()},function(e,t,i){"use strict";function o(e,t){n.call(this,t),this._study=e,this._inputValueReplacements={NONE:"Default"}}var n=i(268);inherit(o,n),o.prototype.color=function(){return this._study.isFailed()||this._study.metaInfo&&this._study.metaInfo().isTVScriptStub?"#ff0000":n.prototype.color.call(this)},o.prototype.update=function(){this._study.isFailed()?this._text=this._study.title(!0,this._inputValueReplacements)+": "+this._study.status():this._text=this._study.title(!0,this._inputValueReplacements)+" "+this._study.status()},e.exports=o},function(e,t,i){"use strict";var o,n=i(7).assert,r=i(27),s=r.rgba,a=r.rgbaToString,l=r.parseRgb,c=i(642),h=i(180).PriceScale,u=i(123),d=i(79),p=d.createLineTool,_=d.isLineToolName,f=d.isStudyLineToolName,m=i(0).LineDataSource,g=i(43).LineToolBarsPattern,y=i(43).LineToolCallout,v=i(742),b=i(25),S=b.Study,w=b.prepareStudyPropsStateForLoadChart,T=b.prepareStudyPropertiesForLoadChart,P=i(284).createStudy,x=i(65).Series,C=i(39),L=i(48),I=i(2).DefaultProperty,M=i(28),k=i(4),A=i(5).getLogger("Chart.Serialization"),E=i(43).LineToolParallelChannel,D=i(43).LineToolTrendAngle,V=i(43).LineToolGhostFeed,O=i(43).LineToolElliott,R=i(30).PriceDataSource,B=i(179).Pane,z=i(16),N=i(24);A=i(5).getLogger("Chart.Serialization"),c.version=2,c.prototype.state=function(e,t){var i,o,n,r={};for(r.panes=[],i=0;i<this.panes().length;i++)r.panes.push(this.panes()[i].state(!0,e,!1,t));return r.timeScale=this.m_timeScale.state(e),o=null,
n=this.properties(),r.chartProperties={paneProperties:n.paneProperties.state(),scalesProperties:n.scalesProperties.state(),publishedChartsTimelineProperties:o?o.state(e):void 0,chartEventsSourceProperties:n.chartEventsSourceProperties.state()},n.chartEventsSourceProperties&&(r.chartProperties.chartEventsSourceProperties=n.chartEventsSourceProperties.state()),r.version=c.version,r.timezone=this.timezone(),r},c.prototype.chartPropertiesTransparencyMigrate=function(e){var t,i,o;e.chartProperties.paneProperties.crossHairProperties&&(o=e.chartProperties.paneProperties.crossHairProperties,N.isHexColor(o.color)&&(i=o.transparency/100,t=l(o.color),o.color=a(s(t,i)))),e.chartProperties.paneProperties.dataWindowProperties&&(o=e.chartProperties.paneProperties.dataWindowProperties,N.isHexColor(o.color)&&(i=o.transparency/100,t=l(o.color),o.color=a(s(t,i))))},c.prototype.resetDeferredStudies=function(){new o(this).reset()},c.prototype._getExceedingChildStudies=function(e){var t,i,o,n,r,s,a,l,c=[];for(t=0;t<e.length;++t)c=c.concat(e[t].sources||[]);for(i=0,o=1,n=[],r={},s=0,a=1e6;c.length&&--a;)l=c[s],(l.ownerSource&&r[l.ownerSource]||!l.ownerSource)&&(r[l.id]=l,c.splice(c.indexOf(l),1),l.ownerSource&&"Study"===l.type&&l.state&&l.state.isChildStudy&&++i>o&&n.push(l)),s=(s+1)%c.length;return n},c.prototype.restoreState=function(e,t){var i,n,r,s,a,l,c,h,u,d,p,_;if(new o(this).reset(),i={},!e.panes)return void A.logDebug("ChartModel.restoreState: invalid state");if(!Array.isArray(e.panes))return void A.logDebug("ChartModel.restoreState: invalid state");if(e.panes.length<1)return void A.logDebug("ChartModel.restoreState: invalid state");if(e.chartProperties&&!e.chartProperties.timezone&&(e.chartProperties.timezone=e.timezone),e.chartProperties&&(n=TradingView.factoryDefaults("chartproperties").scalesProperties,TradingView.merge(n,e.chartProperties.scalesProperties),!("showLastValue"in n)||"showSeriesLastValue"in n||"showStudyLastValue"in n||(n.showSeriesLastValueProperty=n.showLastValue,n.showStudyLastValueProperty=n.showLastValue),"showSeriesLastValue"in n&&(i.showSeriesLastValueProperty=!0),"showStudyLastValue"in n&&(i.showStudyLastValueProperty=!0),e.chartProperties.paneProperties.vertGridProperties=e.chartProperties.paneProperties.vertGridProperties||TradingView.clone(e.chartProperties.paneProperties.gridProperties),e.chartProperties.paneProperties.horzGridProperties=e.chartProperties.paneProperties.horzGridProperties||TradingView.clone(e.chartProperties.paneProperties.gridProperties),this._properties.paneProperties.merge(e.chartProperties.paneProperties),this._properties.scalesProperties.merge(n),e.chartProperties.timezone&&this._properties.timezone.setValue(e.chartProperties.timezone),e.chartProperties.chartEventsSourceProperties&&this._properties.chartEventsSourceProperties&&this._properties.chartEventsSourceProperties.merge(e.chartProperties.chartEventsSourceProperties),this.m_timeScale.restoreState(e.timeScale,t)),e.timeScale&&this.m_timeScale.restoreState(e.timeScale,t),
!this.readOnly()&&(r=this._getExceedingChildStudies(e.panes),r.length))for(s=e.panes.length-1;s>=0;--s){for(a=e.panes[s],l=a.sources.length-1;l>=0;--l)c=a.sources[l],~r.indexOf(c)&&a.sources.splice(l,1);a.sources.length||e.panes.splice(s,1)}for(h=e.panes,this.panes()[0].restoreState(h[0],t,e.version,i),s=1;s<e.panes.length;s++)a=this.panes()[s]||this.createPane(),a.restoreState(e.panes[s],t,e.version,i);for(this._invalidateBarColorerCaches(),u=this.dataSources(),d=0,s=0;s<u.length;s++)p=u[s],TradingView.isInherited(p.constructor,m)&&(d++,p.calcIsActualSymbol());return this._version=e.version,this.updateTimeScaleBaseIndex(),this.recalculateAllPanes(),this.invalidate(new z(z.FULL_UPDATE)),_=TVLocalStorage.getItem("linetools_limit")||1e3,window.is_authenticated&&window.user&&window.user.settings&&(_=window.user.settings.linetools_limit||_),d>_&&d%100==0?{lines_limit_exceeded:!0,line_tools_count:d}:{}},B.prototype.state=function(e,t,i,o){function n(e){return i&&!e.isSavedInStudyTemplates()||!e.state||!e.state()||!e.isSavedInChart(t)||o&&e.isActualSymbol&&!e.isActualSymbol()}var r,s,a={};if(e)for(a.sources=[],r=0;r<this.m_dataSources.length;r++)n(this.m_dataSources[r])||a.sources.push(this.m_dataSources[r].state(t));for(a.leftAxisState=this.m_leftPriceScale.state(),a.leftAxisState.m_isLockScale&&null!==this._lastLeftPriceScaleRatio&&(a.leftPriceScaleRatio=this._lastLeftPriceScaleRatio),a.leftAxisSources=[],r=0;r<this.m_leftPriceScale.dataSources().length;r++)n(this.m_leftPriceScale.dataSources()[r])||a.leftAxisSources.push(this.m_leftPriceScale.dataSources()[r].id());for(a.rightAxisState=this.m_rightPriceScale.state(),a.rightAxisState.m_isLockScale&&null!==this._lastRightPriceScaleRatio&&(a.rightPriceScaleRatio=this._lastRightPriceScaleRatio),a.rightAxisSources=[],r=0;r<this.m_rightPriceScale.dataSources().length;r++)n(this.m_rightPriceScale.dataSources()[r])||a.rightAxisSources.push(this.m_rightPriceScale.dataSources()[r].id());for(a.overlayPriceScales={},r=0;r<this.m_dataSources.length;r++)s=this.m_dataSources[r],this.isOverlay(s)&&s.isSavedInChart(t)&&(a.overlayPriceScales[s.id()]=s.priceScale().state());return a.stretchFactor=this._stretchFactor,this.m_mainDataSource&&(a.mainSourceId=this.m_mainDataSource.id()),a},B.prototype.sourceById=function(e){for(var t=0;t<this.m_dataSources.length;t++)if(this.m_dataSources[t].id()===e)return this.m_dataSources[t];return null},B.prototype.isESDStudy=function(e){return"Script$TV_EARNINGS@tv-scripting"===e.id||"Script$TV_DIVIDENDS@tv-scripting"===e.id||"Script$TV_SPLITS@tv-scripting"===e.id||"ESD$TV_EARNINGS@tv-scripting"===e.id||"ESD$TV_DIVIDENDS@tv-scripting"===e.id||"ESD$TV_SPLITS@tv-scripting"===e.id},B.prototype.isStudyToSkip=function(e){return!!this.isESDStudy(e)},B.prototype.restoreState=function(e,t,i,o){var n,r,s,a,l,c,u,d,p,_,f,g,y,v,b;if(o=o||{},!e.leftAxisState||!e.rightAxisState)throw Error("invalid state");if(!e.leftAxisSources||!e.rightAxisSources)throw Error("invalid state");if(e.stretchFactor&&(this._stretchFactor=e.stretchFactor),n={},
e.sources)for(r=-1!==this.m_dataSources.indexOf(this._model.mainSeries()),this.clearSeries(),this.m_mainDataSource=null,r&&this.m_dataSources.push(this._model.mainSeries()),s=this.getZOrderMinMax(),a=s.minZOrder,l=s.maxZOrder,function(){var t,i,o,n,r,s=e.sources.find(function(t){return t.id===e.mainSourceId});if(void 0===s)return void A.logWarn("There is no main source with id "+e.mainSourceId+", total sources="+e.sources.length);if(!TradingView.isInherited(TradingView[s.type],m))return void A.logNormal("The type of main source is not line tool - fix is unnecessary");for(t=null,i=0;i<e.sources.length;i++)if(o=e.sources[i],!TradingView.isInherited(TradingView[o.type],m)){if(null!==t)return void A.logWarn("Pane contains more than 1 possibly main sources - auto fix cannot be applied");t=o}if(null===t)return void A.logWarn("Pane contains only line tools - possible we need to remove this pane?");n=e.mainSourceId,r=0,e.mainSourceId=t.id,e.sources.forEach(function(e){e.ownerSource===n&&(e.ownerSource=t.id,r+=1)}),A.logNormal("Auto fix broken pane is applied, changed line tools="+r+", changed from="+n+" to="+t.id)}(),c=0;c<e.sources.length;c++)u=e.sources[c],d=u.type,Math.abs(u.zorder)>1e200?(p=a-1,A.logWarn("Datasource zorder has bad value: "+u.zorder+" Resetting it to "+p),u.zorder=p):this.isZOrderAvailable(u.zorder)||r&&"MainSeries"===d&&this._model.mainSeries().zorder()===u.zorder||(u.zorder=l+1),_=u.id,n[_]=u.ownerSource,d&&("MainSeries"===d?this._restoreMainSeries(u,t,r,o):d.toLowerCase().startsWith("study")?this._restoreStudy(u,t,o):TradingView.isInherited(TradingView[d],m)?this._restoreLineTool(u,t):TradingView[d]&&TradingView[d].createFromState&&this._restoreSpecialSource(u,t)),a=Math.min(a,u.zorder),l=Math.max(l,u.zorder);for(this.m_leftPriceScale.dataSources().splice(0,1/0),this.m_leftPriceScale._hasSeries=!1,f=defaults("chartproperties").paneProperties.leftAxisProperties,TradingView.merge(f,e.leftAxisState),this.m_leftPriceScale.restoreState(f),void 0!==e.leftPriceScaleRatio&&(this._lastLeftPriceScaleRatio=e.leftPriceScaleRatio),c=0;c<e.leftAxisSources.length;c++)(g=this.dataSourceForId(e.leftAxisSources[c]))&&(void 0!==f.m_showSymbolLabels&&g instanceof x&&this.model().properties().scalesProperties.showSymbolLabels.setValue(f.m_showSymbolLabels),g.setPriceScale(this.m_leftPriceScale),this.m_leftPriceScale.addDataSource(g));for(this.m_rightPriceScale.dataSources().splice(0,1/0),this.m_rightPriceScale._hasSeries=!1,f=defaults("chartproperties").paneProperties.rightAxisProperties,TradingView.merge(f,e.rightAxisState),this.m_rightPriceScale.restoreState(f),void 0!==e.rightPriceScaleRatio&&(this._lastRightPriceScaleRatio=e.rightPriceScaleRatio),c=0;c<e.rightAxisSources.length;c++)(g=this.dataSourceForId(e.rightAxisSources[c]))&&(void 0!==f.m_showSymbolLabels&&g instanceof x&&this.model().properties().scalesProperties.showSymbolLabels.setValue(f.m_showSymbolLabels),g.setPriceScale(this.m_rightPriceScale),this.m_rightPriceScale.addDataSource(g));for(c=0;c<this.m_dataSources.length;c++)g=this.m_dataSources[c],
-1===this.m_rightPriceScale.dataSources().indexOf(g)&&-1===this.m_leftPriceScale.dataSources().indexOf(g)?(g._isOverlay=!0,y=new h(this._model.properties().scalesProperties),y.setHeight(this.m_height),y.setTopMargin(this.m_rightPriceScale.topMargin()),y.setBottomMargin(this.m_rightPriceScale.bottomMargin()),y.addDataSource(g),e.overlayPriceScales&&e.overlayPriceScales[g.id()]&&(f=e.overlayPriceScales[g.id()],f.m_isAutoScale=!0,f.m_isLog=!1,f.m_isPercentage=!1,f.m_isLockScale=!1,y.restoreState(f)),g.setPriceScale(y)):g._isOverlay=!1;for(_ in n)(v=n[_])&&(g=this.sourceById(_))&&this.sourceById(_).setOwnerSource(this.sourceById(v));if(e.mainSourceId&&!this.m_mainDataSource&&(this.m_mainDataSource=this.dataSourceForId(e.mainSourceId)),!this.m_mainDataSource)for(c=0;c<this.m_dataSources.length;c++)if(g=this.m_dataSources[c],TradingView.isInherited(g.constructor,R)){this.m_mainDataSource=g;break}for(c=0;c<this.m_dataSources.length;c++)g=this.m_dataSources[c],TradingView.isInherited(g.constructor,m)?(g.ownerSource()||g.setOwnerSource(this.mainDataSource()),g.isFixed()&&g.restoreFixedPoints(),g.fixAfterRestorePriceAxis&&g.fixAfterRestorePriceAxis()):TradingView.isInherited(g.constructor,S)&&(b=g.properties(),b.linkedToSeries&&b.linkedToSeries.value()&&(g.ownerSource()||g.setOwnerSource(this.model().mainSeries())));this._updateMargins(),this._model.onMainSeriesPriceScaleNameChanged(),this._cachedOrderedSoruces=null,this._cachedHitTestSources=null},B.prototype._restoreMainSeries=function(e,t,i,o){var n,r,s,a,l,c,h,u,d,p,_,f,m,g,y,v=e.id,b=e.state,S=e.zorder;if(b&&["candleStyle","hollowCandleStyle","haStyle"].forEach(function(e){b[e]&&(b[e].wickUpColor=b[e].wickUpColor||b[e].wickColor,b[e].wickDownColor=b[e].wickDownColor||b[e].wickColor)}),i||(n=this._model.paneForSource(this._model.mainSeries()),n.removeDataSource(this._model.mainSeries()),this.m_dataSources.push(this._model.mainSeries())),this.m_mainDataSource=this._model.mainSeries(),r=b&&b.style?b.style:void 0,r===x.STYLE_PNF&&"ATR"===this._model.mainSeries().properties().pnfStyle.inputs.style.value()?this._model.mainSeries().properties().pnfStyle.inputs.style._value="Traditional":r===x.STYLE_RENKO&&"ATR"===this._model.mainSeries().properties().renkoStyle.inputs.style.value()&&(this._model.mainSeries().properties().renkoStyle.inputs.style._value="Traditional"),b&&!b.hasOwnProperty("showSessions")&&(b.showSessions=!1),b&&!b.extendedHours&&(b.extendedHours=!1),b&&t&&(b.showCountdown=!1),b&&(t&&!("showSeriesLastValueProperty"in o)&&"showLastValue"in b&&this._model.properties().scalesProperties.showSeriesLastValue.setValue(b.showLastValue),delete b.showLastValue),b)for(s={haStyle:L.chartStyleStudyId(x.STYLE_HEIKEN_ASHI,!0),renkoStyle:L.chartStyleStudyId(x.STYLE_RENKO,!0),pbStyle:L.chartStyleStudyId(x.STYLE_PB,!0),kagiStyle:L.chartStyleStudyId(x.STYLE_KAGI,!0),pnfStyle:L.chartStyleStudyId(x.STYLE_PNF,!0),rangeStyle:L.chartStyleStudyId(x.STYLE_RANGE,!0)},a=this._model.studyVersioning(),l=this._model.mainSeries().styleStudyInfos(),c=Object.keys(C.SYMBOL_STRING_DATA),
h=0;h<c.length;h++)r=c[h],u=C.STYLE_SHORT_NAMES[r]+"Style",d=u in e?e[u].studyId:s[u],null!=(r=b[u])&&(p=r.inputs,_=M.parseIdString(d),f=l[u].studyId,m=M.parseIdString(f),g=a.updateStudyInputs(_.id,_.version,m.version,p,null),r.inputs=g);this._model.mainSeries().clearSessionStudy(),this._model.mainSeries().properties().merge(b),this._model.mainSeries()._prevChartStyle=this._model.mainSeries().properties().style.value(),this._model.mainSeries().createPaneView(),this._model.mainSeries().setId(v),t&&this._model.mainSeries().restoreData(e.bars,e.nsBars,e.symbolInfo,e.rtPrice,e.boxSize,e.reversalAmount),void 0!==S&&this._model.mainSeries().setZorder(S),this._model.mainSeries().properties().extendedHours.listeners().fire(this._model.mainSeries().properties().extendedHours),(y=this._model.mainSeries().symbolInfo())&&this._model.mainSeries().onSymbolResolved().fire(this._model.mainSeries().symbolInfo())},B.prototype._restoreStudy=function(e,t,i){var n,r,s,a,l,c,h,d,p,_;return t&&void 0===e.data&&void 0===e.nonSeriesData&&void 0===e.indexes?void A.logError("Cannot restore (skipping) study without data "+e.id+", "+e.metaInfo.id):(n=e.id,r=e.state,s=e.zorder,a=e.ownerSource,l=TradingView.clone(e.metaInfo),$.extend(l,M.parseIdString(l.id)),this.isStudyToSkip(l)&&!t?void A.logNormal("Skipping study "+l.id):(c=r,h=this._model.studyVersioning(),d=h.patchPropsStateAndMetaInfo(c,l,{oldShowStudyLastValueProperty:t&&!i.showStudyLastValueProperty}),c=d.propsState,l=d.metaInfo,p=new u(this._model,e,l.shortDescription),p.setId(n),_=this,h.updateMetaInfoAsync(l,t).done(function(i){function r(o){var r,a=T(l,i,c,null,h,o),d=P(_._model,a,o||_._model.mainSeries(),s);d.setId(n),t&&(r=h.patchStudyData(l,e.data,e.nonSeriesData,e.indexes),d.restoreData(r.data,r.nsData,r.indexes)),_._model.replaceStudyStub(p,d)||(p=d),u.add(n,d)}var s,u,d;p.setStatus(""),s=i||new M(l),u=new o(_._model),d=a&&e.state.isChildStudy,d?u.get(a).done(r):r()}).fail(function(e){p.setStatus("error: "+e),p.setFailed(!0)}),p&&this.m_dataSources.push(p),delete this._cachedOrderedSoruces,delete this._cachedHitTestSources,p&&void 0!==s&&p.setZorder(s),p))},B.prototype._restoreLineTool=function(e,t,i){var o,r,s,a,l,c,h,d,m,b,S,T,P,x,C,L,A,R,B;if(i=void 0===i||i,O.migrateState(e),v.migrateState(e),o=e.type,r=e.id,s=e.state,a=i?e.zorder:this._newZOrderForLineTool(),n(_(o),"invalid data source type:"+o+" (expected to be a Line Tool)"),l=null,c=TradingView.factoryDefaults("linetool"),f(o)){if(l=this._model.studyVersioning(),e=l.patchPointsBasedStudyState(e),TradingView.merge(c,s),m=e.metaInfo,$.extend(m,M.parseIdString(m.fullId)),!t&&(b=m.productId,!pro.hasPackage(b)))return S=new u(this._model,e,m.shortDescription),S.setId(r),this.m_dataSources.push(S),void 0!==a&&S.setZorder(a),S.setStatus($.t("not authorized")),void S.setFailed(!0);T=l.updateMetaInfo(m),P=T||m,c=w(P,m,c,null,l),t?TradingView.merge(c,{fixedSize:!1}):TradingView.merge(c,{fixedSize:!0}),d=new I("study_"+P.id,c,!0),h=p(o,this._model,d,P,this.mainDataSource())}else x=o.toLowerCase(),
TradingView.merge(c,TradingView.factoryDefaults(x)),d=TradingView[o].prototype.createPropertiesObject(x,c),d.merge(s),t?d.merge({fixedSize:!1}):d.merge({fixedSize:!0}),h=new TradingView[o](this._model,d,!0);return h.setId(r),h.linkKey=e.linkKey,C=e.alertId,C&&"function"==typeof h.setAlert&&k.enabled("alerts")&&!this._model.readOnly()&&!this._model.isJustClonedChart()&&h.setAlert(C,{noChartSave:!0}),L=e.indexes?e.indexes:[],L=L.slice(0,e.points.length),h.isFixed()?h.restorePositionPercents(e.positionPercents):h.restorePoints(e.points,L,t),h instanceof g||h instanceof y||h instanceof D||h instanceof V||h instanceof E?h.restoreData(e):t&&h.restoreData&&(A=e,l&&(A.graphics=l.patchPointsBasedStudyData(A.metaInfo,A.graphics)),h.restoreData(A)),R=null==e.version?1:e.version,B=null==h.version?1:h.version,R!==B&&"function"==typeof h.migrateVersion&&h.migrateVersion(R,B,{pane:this,model:this._model,properties:d}),this.m_dataSources.push(h),delete this._cachedOrderedSoruces,delete this._cachedHitTestSources,void 0!==a&&h.setZorder(a),h},B.prototype._restoreSpecialSource=function(e,t){var i,o=TradingView[e.type];o&&o.createFromState&&(i=o.createFromState(e,t,this._model))&&(i.setId(e.id),this.m_dataSources.push(i),i.zorder&&i.setZorder(i.zorder))},c.prototype.studyTemplate=function(e){var t,i,o,n,r={};for(r.panes=[],t=0;t<this.panes().length;t++)i=!0,o=!1,n=!0,r.panes.push(this.panes()[t].state(i,o,n));return e&&(r.interval=this.mainSeries().interval()),r.version=c.version,r},c.prototype.restoreStudyTemplate=function(e,t){this._undoModel.studyLoadTemplate(this._undoModel,this.studyTemplate(),e,t)},c.prototype.theme=function(){var e={};return e.chartProperties={paneProperties:this.properties().paneProperties.state(),scalesProperties:this.properties().scalesProperties.state(),symbolWatermarkProperties:this.properties().symbolWatermarkProperties.state()},e.mainSourceProperties=this.mainSeries().state().state,delete e.mainSourceProperties.symbol,delete e.mainSourceProperties.interval,delete e.chartProperties.paneProperties.topMargin,delete e.chartProperties.paneProperties.bottomMargin,e.version=c.version,e},c.prototype.restoreTheme=function(e){var t,i,o={hollowCandle:{related:"candle"}};for(t in o)e.mainSourceProperties[t+"Style"]||(i=e.mainSourceProperties[o[t].related+"Style"],e.mainSourceProperties[t+"Style"]=TradingView.clone(i));this._undoModel.chartLoadTheme(this,e)},o=function(){function e(o){var n=t.indexOf(o);return~n?i[n]:this instanceof e?(this._source=o,this._studies={},this._deferreds={},t.push(o),void i.push(this)):new e(o)}var t=[],i=[];return e.prototype.add=function(e,t){this._deferreds[e]&&(this._deferreds[e].resolve(t),delete this._deferreds[e]),this._studies[e]=t},e.prototype.get=function(e){return this._studies[e]?$.Deferred().resolve(this._studies[e]):(this._deferreds[e]||(this._deferreds[e]=$.Deferred()),this._deferreds[e].promise())},e.prototype.reset=function(){var e=t.indexOf(this._source);~e&&(t.splice(e,1),i.splice(e,1))},e}(),e.exports=c},function(e,t,i){"use strict";function o(){var e,t,i,o
;this._registeredSources={},this._sourcesToRow={},this._rowsToSources={},this._currentSymbol="",this._actualCapacity=0,this._actualWidth=0,this._canvas=$("<canvas>"),this._cache=this._canvas.get(0).getContext("2d"),this._currentWidth=400,this._canvas.prop("width",this._currentWidth).prop("height",1).css("position","absolute").css("top",0).css("z-index",1e3).css("left",0),this._ctx=this._canvas.get(0).getContext("2d"),this._ctx.font=u.fontSize+"px"+u.font,e=u.fontSize,t=u.lineSpacing,i=e+t,o=3,this._padding=8,this._rowHeight=i*o-t+2*this._padding+2}function n(e,t){this._constructor="LineToolTrendLine";var n=t||new a("linetooltrendline");s.call(this,e,n),e._trendLineStatsCache||(e._trendLineStatsCache=new o),i.e(0).then(function(e){var t=i(895).TrendLinePaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var r=i(6).Point,s=i(0).LineDataSource,a=i(2).DefaultProperty,l=i(1).propertyPages,c=i(5).getLogger("Chart.LineToolTrendLine"),h=i(350).TrendLineStatsRenderer,u=i(325).LabelSettings;o.prototype.canvas=function(){return this._canvas},o.prototype.topByRow=function(e){return e*this._rowHeight},o.prototype.rowHeight=function(e){return this._rowHeight},o.prototype.rowWidth=function(e){var t=this._rowsToSources[e];return this._sourcesToRow[t].width},o.prototype.currentWidth=function(){return this._currentWidth},o.prototype._findEmptyRow=function(e){for(var t=0;this._rowsToSources[t];)t++;return this._rowsToSources[t]=e,t>=this._actualCapacity&&(this._actualCapacity++,TradingView.resizeCanvas(this._canvas,this._currentWidth,this._rowHeight*this._actualCapacity),this._ctx=this._canvas.get(0).getContext("2d"),c.logDebug("TrendLineCache. Expanging cache to "+this._actualCapacity+" items")),t},o.prototype._effectiveState=function(e){var t,i={};return i.p1=$.extend({},e.points()[0]),i.p2=$.extend({},e.points()[1]),t=e.properties(),i.showBars=t.showBarsRange.value(),i.showTimeRange=t.showDateTimeRange.value(),i.showDistance=t.showDistance.value(),i.showPriceRange=t.showPriceRange.value(),i.showAngle=t.showAngle.value(),i.color=t.textcolor.value(),i.showAngle&&(i.priceRange=e.priceScale().priceRange().state(),i.barSpacing=e._model.timeScale().barSpacing()),i},o.prototype._effectiveStatesEquals=function(e,t){var i=function(e,t){return!(!e&&!t)&&(!(!e||t)||(!(e||!t)||(e.index!==t.index||e.price!==t.price)))};if(e&&!t)return!1;if(!e&&t)return!1;if(i(e.p1,t.p1))return!1;if(i(e.p2,t.p2))return!1;if(e.color!==t.color)return!1;if(e.showBars!==t.showBars)return!1;if(e.showTimeRange!==t.showTimeRange)return!1;if(e.showDistance!==t.showDistance)return!1;if(e.showPriceRange!==t.showPriceRange)return!1;if(e.showAngle!==t.showAngle)return!1;if(e.showAngle){if(e.priceRange.min!==t.priceRange.min)return!1;if(e.priceRange.max!==t.priceRange.max)return!1;if(e.barSpacing!==t.barSpacing)return!1}return!0},o.prototype.removeSource=function(e){if(this._sourcesToRow[e]){var t=this._sourcesToRow[e].row;this._ctx.save(),this._ctx.clearRect(0,this.topByRow(t),this._currentWidth,this.rowHeight(t)),this._ctx.restore(),
delete this._sourcesToRow[e],delete this._rowsToSources[t]}},o.prototype._repaintSource=function(e,t,i){var o,n;this._ctx.save(),this._ctx.translate(0,this.topByRow(t)+.5),i.points[0]=new r(0,0),i.offsetX=0,i.offsetY=0,delete i.horzAlign,delete i.vertAlign,this._ctx.clearRect(0,0,this._currentWidth,this.rowHeight(t)),o=new h(i,{}),n=o.draw(this._ctx),this._sourcesToRow[e].width=n.width,this._ctx.restore()},o.prototype.updateSource=function(e,t){var i,o,n,r,s,a=e.properties().symbol.value();return this._currentSymbol!==a&&(c.logDebug("TrendLineCache. Clearing canvas because of changing symbol from "+this._currentSymbol+" to "+a),this._currentSymbol=a,this._sourcesToRow={},this._rowsToSources={}),i=e.id(),this._sourcesToRow[i]||(o=this._findEmptyRow(i),this._sourcesToRow[i]={effectiveState:null,row:o}),n=this._sourcesToRow[e.id()].effectiveState,r=this._effectiveState(e),this._effectiveStatesEquals(n,r)||(o=this._sourcesToRow[e.id()],s=t(),this._repaintSource(i,o.row,s),this._sourcesToRow[i].effectiveState=r),this._sourcesToRow[i]},inherit(n,s),n.prototype.stop=function(){s.prototype.stop.call(this),this._model._trendLineStatsCache.removeSource(this.id())},n.prototype.pointsCount=function(){return 2},n.prototype.title=function(){return"Trend Line"},n.prototype.canHasAlert=function(){return!0},n.prototype._getAlertPlots=function(){return[this._linePointsToAlertPlot(this._points,null,this.properties().extendLeft.value(),this.properties().extendRight.value())]},n.prototype.getStylesPropertyPage=function(){return l.LineToolTrendLineStylesPropertyPage},t.LineToolTrendLine=n},function(e,t,i){"use strict";function o(e){var t,i;return e.isEmpty()?null:null===(t=e.priceRange())?null:(i=t.length(),e.internalHeight()/i)}function n(e,t){var i,n,r;return t.isLog()||e.isEmpty()||t.isEmpty()?null:null===(i=o(t))?null:(n=e.getValidBarSpacing(),r=Math.max(l,i),n/r)}function r(e,t,i){var o,n,r,s;return e.isLog()||null===i||e.isEmpty()?null:null===(o=e.priceRange())||o.isEmpty()?null:(n=e.internalHeight()/(t/i),r=o.length(),n===r?o:(s=(n-r)/2,new a.PriceRange(o.minValue()-s,o.maxValue()+s)))}function s(e,t){var i,o;return e.isLog()||null===t||e.isEmpty()?null:null===(i=e.priceRange())?null:(o=i.length(),e.internalHeight()/o*t)}var a,l;Object.defineProperty(t,"__esModule",{value:!0}),t.scaleRatio=n,t.priceRangeByScaleRatio=r,t.barSpacingByScaleRatio=s,a=i(58),l=1e-10},function(e,t,i){"use strict";function o(e,t){this._constructor="LineToolPitchfork";var i=t||this.createPropertiesObject("linetoolpitchfork");n.call(this,e,i),this._properties.style.listeners().subscribe(this,o.prototype._recreatePaneView),this._recreatePaneView()}var n=i(0).LineDataSource,r=i(17),s=i(40).Action,a=i(1).propertyPages,l=i(250).LineToolPitchforkStyle,c=null;inherit(o,n),o.prototype.additionalActions=function(){var e,t,i=[],o=["Original","Modified Schiff","Inside","Schiff"];for(e=0;e<4;e++)t=new s({checked:this.properties().style.value()===e,checkable:!0,text:$.t(o[e]),callbackContext:{target:this,value:e}}),t.callbacks().subscribe(null,function(e){
var t=e.callbackContext(),i=t.target,o=t.value;i.properties().style.setValue(o),i.updateAllViews(),i._model.updateSource(i)}),i.push(t);return[i[0],i[3],i[1],i[2]]},o.prototype._recreatePaneView=function(){if(null===c)return void i.e(0).then(function(e){null===c&&(c=i(903)),this._recreatePaneView()}.bind(this).bind(null,i)).catch(i.oe);var e=[];this._properties.style.value()===l.Original?e=[new c.PitchforkLinePaneView(this,this._model)]:this._properties.style.value()===l.Schiff?e=[new c.SchiffPitchforkLinePaneView(this,this._model)]:this._properties.style.value()===l.Schiff2?e=[new c.SchiffPitchfork2LinePaneView(this,this._model)]:this._properties.style.value()===l.Inside&&(e=[new c.InsidePitchforkLinePaneView(this,this._model)]),this._setPaneViews(e)},o.prototype.pointsCount=function(){return 3},o.prototype.title=function(){return $.t("Pitchfork")},o.prototype.processErase=function(e,t){var i="level"+t,o=this.properties()[i].visible;e.setProperty(o,!1,"Erase level line")},o.prototype.createPropertiesObject=function(e,t,i){return new r(e,t,i,{range:[0,8]})},o.prototype.getStylesPropertyPage=function(){return a.LineToolPitchforkStylesPropertyPage},t.LineToolPitchfork=o},function(e,t,i){"use strict";function o(e){var t=(""+e).match(/(.*)([DWM])/);return t?t[1]+$.t(t[2],{context:"interval_short"}):e}Object.defineProperty(t,"__esModule",{value:!0}),t.translatedIntervalString=o;i(11)},function(e,t,i){"use strict";(function(t){function o(e,i,o){r.call(this,e),this._origState=i,this._title=o;var a={visible:!0};this._properties=new t(a),this._statusView=new n(this,e.properties()),this._status=$.t("compiling..."),this._statusView.setText(this._title+" "+this._status),this._formatter=new s(Math.pow(10,2)),this._failed=!1}var n=i(117),r=i(30).PriceDataSource,s=i(19).PriceFormatter;inherit(o,r),o.prototype.properties=function(){return this._properties},o.prototype.statusView=function(){return this._statusView},o.prototype.state=function(e){return this._origState},o.prototype.setStatus=function(e){this._status=e,this._statusView.setText(this._title+" "+this._status)},o.prototype.formatter=function(){return this._formatter},o.prototype.title=function(){return this._title},o.prototype.isFailed=function(){return this._failed},o.prototype.setFailed=function(e){this._failed=e},o.prototype.start=function(e){},o.prototype.firstValue=function(e){return null},e.exports=o}).call(t,i(12))},function(e,t,i){"use strict";(function(t){function o(e,t,i){this._options=Object.assign({},x,i),this.pane=e,this._isLeft=o.isLeft(t),this._properties=e.chart().properties().scalesProperties,this.jqCell=$(document.createElement("td")),this.jqCell.addClass("chart-markup-table"),this.jqCell.addClass("price-axis"),this.jqCell.width(25),this._dv=$("<div>"),this._dv.css("width","100%"),this._dv.css("height","100%"),this._dv.css("position","relative"),this._dv.css("overflow","hidden"),this._dv.appendTo(this.jqCell),this.canvas=g(this._dv,new y(16,16)),$(this.canvas).css("position","absolute"),$(this.canvas).css("z-order","2"),$(this.canvas).css("left",0),
$(this.canvas).css("top",0),this.ctx=this.canvas.getContext("2d"),this.top_canvas=g(this._dv,new y(16,16)),$(this.top_canvas).css("position","absolute"),$(this.top_canvas).css("z-order","1"),$(this.top_canvas).css("left",0),$(this.top_canvas).css("top",0),this.top_ctx=this.top_canvas.getContext("2d"),this._textWidthCache=new s,this.restoreDefaultCursor(),this.update(),v(this.jqCell,this,!0),this.dialog=this.pane.chart().dialog,this.contextMenu=null,this.actions={},this._isVisible=!0,this.priceScale().onMarksChanged.subscribe(this,this.onMarksChanged)}function n(e){var t=new P(e);return function(e,i){return isNumber(i)&&!e.isLog()?t.format(i):""}}var r,s,a,l,c,h,u,d,p,_,f,m,g,y,v,b,S,w,T,P,x,C;i(748),r=i(0).LineDataSource,s=i(114),a=i(40),l=a.Action,c=a.ActionSeparator,h=i(86),u=i(752),d=i(16),p=i(72),_=p.resizeCanvas,f=p.hardResizeCanvas,m=p.clearRect,g=p.addCanvasTo,y=p.Size,v=i(81).setMouseEventHandler,b=i(32).trackEvent,S=i(115).makeFont,w=i(183).ActionBinder,T=i(5).getLogger("Chart.PriceAxisWidget"),P=i(197).LimitedPrecisionNumericFormatter,x={contextMenuEnabled:!0},o.prototype._BORDER_SIZE=1,o.prototype._OFFSET_SIZE=1,o.prototype._TICK_LENGTH=3,o.LHS=1,o.RHS=2,o.isLeft=function(e){return e===o.LHS||e!==o.RHS&&(T.logDebug("PriceAxisWidget.isLeft: wrong side"),!1)},o.prototype.destroy=function(){this.actions.reset&&this.actions.reset.setActive(!1)},o.prototype.backgroundColor=function(){return this.pane.chart().properties().paneProperties.background.value()},o.prototype.lineColor=function(){return this._properties.lineColor.value()},o.prototype.textColor=function(){return this._properties.textColor.value()},o.prototype.fontSize=function(){return this._properties.fontSize.value()},o.prototype.baseFont=function(){return S(this.fontSize(),"Arial","")},o.prototype.rendererOptions=function(){var e,t,i;return this._rendererOptions||(this._rendererOptions={isLeft:this._isLeft,width:0,height:0,borderSize:this._BORDER_SIZE,offsetSize:this._OFFSET_SIZE,tickLength:this._TICK_LENGTH,fontSize:NaN,font:"",widthCache:new s,_tickmarksCache:new u(11,"Arial","","#000"),color:""}),e=this._rendererOptions,t=!1,e.color!==this.textColor()&&(e.color=this.textColor(),t=!0),e.fontSize!==this.fontSize()&&(i=this.fontSize(),e.fontSize=i,e.font=S(this.fontSize(),"'Trebuchet MS', Tahoma, Arial, sans-serif",""),e.paddingTop=Math.floor(i/3.5),e.paddingBottom=e.paddingTop,e.paddingInner=Math.max(Math.ceil(i/3-e.tickLength/2),0),e.paddingOuter=Math.ceil(i/3),e.baselineOffset=Math.round(i/5),e.widthCache.reset(),t=!0),t&&e._tickmarksCache.reset(e.fontSize,"Arial","",e.color),this.size&&(e.width=this.size.w,e.height=this.size.h),this._rendererOptions},o.prototype.mouseDownEvent=function(e){var i,o;!this.priceScale().isEmpty()&&t.enabled("chart_zoom")&&(i=this.pane.chart().model(),o=this.pane.state(),this._mousedown=!0,this.setCursor("ns-resize"),i.startScalePrice(o,this.priceScale(),e.localY))},o.prototype.pressedMouseMoveEvent=function(e){var t=this.pane.chart().model(),i=this.pane.state(),o=this.priceScale();t.scalePriceTo(i,o,e.localY)},
o.prototype.mouseDownOutsideEvent=function(e){var t,i=this.pane.chart().model(),o=this.pane.state();o&&(t=this.priceScale(),this._mousedown&&(this._mousedown=!1,i.endScalePrice(o,t),this.restoreDefaultCursor()))},o.prototype.mouseUpEvent=function(e){var t=this.pane.chart().model(),i=this.pane.state(),o=this.priceScale();this._mousedown=!1,t.endScalePrice(i,o),this.restoreDefaultCursor()},o.prototype._initActions=function(e){var t,i,n,r,s,a,c;this.pane.state()&&(this.actions={},i=this,this.actions.reset=new l({text:$.t("Reset Scale"),shortcut:"Alt+R",statName:"ResetScale"}),this.actions.reset.callbacks().subscribe(this,o.prototype.reset),this.priceScale().mainSource()instanceof TradingView.Series&&(n=function(){t={lockScale:this.value()},this._undoModel.setPriceScaleMode(t,i.priceScale(),this._undoText)},r=C(this.priceScale(),this.pane.chart().model().model().mainSeriesScaleRatio()),this.actions.setLockScale=new l({text:$.t("Lock Scale")+" "+r,checkable:!0,checked:this.priceScale().isLockScale(),statName:"ToggleLockScale"}),this._lockScaleBinding=new w(this.actions.setLockScale,this.priceScale().properties().lockScale,this.pane.chart().model(),"Lock Scale",n),this._lockScaleBinding.setValue(this.priceScale().isLockScale())),s=function(){t={autoScale:this.value()},this._undoModel.setPriceScaleMode(t,i.priceScale(),this._undoText)},this.actions.setAutoScale=new l({text:$.t("Auto Scale"),checkable:!0,checked:!0,statName:"ToggleAutoScale"}),this._autoScaleBinding=new w(this.actions.setAutoScale,this.priceScale().properties().autoScale,this.pane.chart().model(),"Undo AutoScale",s),this._autoScaleBinding.setValue(this._autoScaleBinding.property().value()),a=function(){t={percentage:this.value()},this._undoModel.setPriceScaleMode(t,i.priceScale(),this._undoText)},this.actions.setPercentage=new l({text:$.t("Percentage",{context:"scale_menu"}),checkable:!0,checked:!1,statName:"TogglePercantage"}),this.actions.setPercentage.binding=new w(this.actions.setPercentage,this.priceScale().properties().percentage,this.pane.chart().model(),"Undo Percentage",a),c=function(){t={log:this.value()},this._undoModel.setPriceScaleMode(t,i.priceScale(),this._undoText)},this.actions.setLog=new l({text:$.t("Log Scale",{context:"scale_menu"}),checkable:!0,checked:!1,statName:"ToggleLogScale"}),this.actions.setLog.binding=new w(this.actions.setLog,this.priceScale().properties().log,this.pane.chart().model(),"Undo Log Scale",c),this.actions.alignLabels=new l({text:$.t("No Overlapping Labels",{context:"scale_menu"}),checkable:!0,checked:!1,statName:"TogglePreciseLabels"}),this.actions.alignLabels.binding=new w(this.actions.alignLabels,this.priceScale().properties().alignLabels,this.pane.chart().model(),"No Overlapping Labels"),this._updateScalesActions())},o.prototype._updateScalesActions=function(){var e=this.priceScale(),t=e.mainSource()instanceof TradingView.Series,i=e.mainSource().properties();this.actions.setPercentage.setEnabled(!(e.isLog()||t&&e.isLockScale()||t&&i.style.value()===TradingView.Series.STYLE_PNF)),
this.actions.setLog.setEnabled(!(e.isPercentage()||t&&e.isLockScale()||t&&i.style.value()===TradingView.Series.STYLE_PNF)),this.actions.setAutoScale.setChecked(e.properties().autoScale.value()),this.actions.setAutoScale.setEnabled(!e.properties().autoScaleDisabled.value())},o.prototype.mouseClickEvent=function(e){},o.prototype.mouseDoubleClickEvent=function(e){this.reset(),b("GUI","Double click price scale")},o.prototype.contextMenuEvent=function(e,t){this._options.contextMenuEnabled&&this._createContextMenu().show(e)},o.prototype._createContextMenu=function(){return h.createMenu(this.getContextMenuActions(),{statName:"PriceScaleContextMenu"})},o.prototype.getContextMenuActions=function(){var e,i;return this._initActions(),e=this.pane.chart().actions(),i=[],i.push(this.actions.reset,new c,e.showLeftAxis,e.showRightAxis,new c,this.actions.setAutoScale),this.actions.setLockScale&&i.push(this.actions.setLockScale),i.push(e.scaleSeriesOnly,new c,this.actions.setPercentage,this.actions.setLog,new c),t.enabled("fundamental_widget")||i.push(e.showSymbolLabelsAction,e.showSeriesLastValue),i.push(e.showStudyPlotNamesAction,e.showStudyLastValue),t.enabled("countdown")&&i.push(e.showCountdown),i.push(this.actions.alignLabels),!TradingView.onWidget()&&t.enabled("show_chart_property_page")&&t.enabled("chart_property_page_scales")&&e.scalesProperties&&i.push(new c,e.scalesProperties),i},o.prototype.backLabels=function(e){var t,i,o,n,r,s=[],a=this.priceScale().orderedSources().slice(),l=this.pane,c=l.chart().model(),h=l.state(),u=[],d=c.sourceBeingMoved()||c.lineBeingEdited()||c.lineBeingCreated();if(d&&u.push(d),c.selectedSource()&&u.push(c.selectedSource()),c.hoveredSource()&&u.push(c.hoveredSource()),this.priceScale()===h.defaultPriceScale())for(t=this.pane.state().dataSources(),i=0;i<t.length;i++)h.isOverlay(t[i])&&a.push(t[i]);for(i=0;i<a.length;++i)if(o=a[i],(e||-1===u.indexOf(o))&&(n=o.priceAxisViews(h,o.priceScale())))for(r=0;r<n.length;r++)s.push(n[r]);return s},o.prototype.optimalWidth=function(){var e,t,i,o,n,r,s;if(!this.isVisible())return 0;if(e=0,t=this.rendererOptions(),this.pane.state())for(i=this.ctx,o=this.priceScale().marks(),i.setFont(this.baseFont()),o.length>0&&(e=Math.max(t.widthCache.measureText(i,o[0].label),t.widthCache.measureText(i,o[o.length-1].label))),n=this.backLabels(!0),r=n.length;r--;)(s=t.widthCache.measureText(i,n[r].text()))>e&&(e=s);return Math.ceil(t.offsetSize+t.borderSize+t.tickLength+t.paddingInner+t.paddingOuter+e)},o.prototype.setSize=function(e){this.size&&this.size.equals(e)||(this.size=e,_(this.canvas,e),_(this.top_canvas,e),this.jqCell.css({width:e.w,"min-width":e.w,height:e.h}))},o.prototype.update=function(){},o.prototype._hightlightBackground=function(e,t,i){var o,n,r,s,a,l,c;if(i){for(o=t[0].price,n=t[0].price,r=1;r<t.length;r++)o=Math.min(o,t[r].price),n=Math.max(n,t[r].price);s=i.firstValue(),a=this.priceScale().priceToCoordinate(o,s),l=this.priceScale().priceToCoordinate(n,s),c="rgba(109, 158, 235, 0.3)",m(e,1,a,this.size.w-1,l-a,c)}},o.prototype.drawBackground=function(e){
var t,i,o,n;if(m(e,0,0,this.size.w,this.size.h,this.backgroundColor()),t=this.pane.chart().model(),(i=t.model().selectedSource())&&i.priceScale()===this.priceScale()&&i instanceof r){if(o=i.axisPoints(),0===o.length)return;this._hightlightBackground(e,o,i.ownerSource())}n=t.model().crossHairSource(),n.startMeasurePoint()&&this._hightlightBackground(e,n.measurePoints(),this.pane.state().mainDataSource())},o.prototype.drawBorder=function(e){var t,i,o;e.save(),e.fillStyle=this.lineColor(),t=this.size.h,this._isLeft?(e.translate(-.5,-.5),i=this.size.w-this._BORDER_SIZE-1,o=this.size.w-1):(e.translate(.5,-.5),i=0,o=i+this._BORDER_SIZE),e.fillRect(i,0,o-i,t),e.restore()},o.prototype.drawTickMarks=function(e){var t,i,o,n,r,s;if(e.save(),e.strokeStyle=this.lineColor(),t=this.priceScale().marks(),e.fillStyle=this.textColor(),e.setFont(this.baseFont()),i=this,e.translate(-.5,-.5),o=this.rendererOptions(),i._isLeft){for(e.fillStyle=i.lineColor(),e.beginPath(),n=this.size.w-i._OFFSET_SIZE-i._BORDER_SIZE-i._TICK_LENGTH,r=t.length;r--;)e.rect(n,t[r].coord,i._TICK_LENGTH,1);for(e.fill(),r=t.length;r--;)o._tickmarksCache.paintTo(e,t[r].label,n-o.paddingInner,t[r].coord,"right")}else{for(e.fillStyle=i.lineColor(),e.beginPath(),s=i._BORDER_SIZE+i._OFFSET_SIZE,r=t.length;r--;)e.rect(s,t[r].coord,i._TICK_LENGTH,1);for(e.fill(),r=t.length;r--;)o._tickmarksCache.paintTo(e,t[r].label,s+i._TICK_LENGTH+o.paddingInner,t[r].coord,"left")}e.restore()},o.prototype._alignLabels=function(){var e,t,i,o,n,r,s,a,l,c,h,u,d,p,_,f=this.size.h/2,m=[],g=this.priceScale().orderedSources().slice(),y=this.pane,v=y.state(),b=this.rendererOptions();if(this.priceScale()===v.defaultPriceScale())for(e=this.pane.state().dataSources(),t=0;t<e.length;t++)v.isOverlay(e[t])&&g.push(e[t]);for(i=this.priceScale().mainSource(),t=0;t<g.length;++t)if(o=g[t],n=o.priceAxisViews(v,o.priceScale())){for(r=0;r<n.length;r++)s=n[r],s.isVisible()&&m.push(s);i===o&&n.length>0&&(f=n[0].floatCoordinate())}for(a=m.filter(function(e){return e.floatCoordinate()<=f}),l=m.filter(function(e){return e.floatCoordinate()>f}),a.sort(function(e,t){return t.floatCoordinate()-e.floatCoordinate()}),a.length&&l.length&&l.push(a[0]),l.sort(function(e,t){return e.floatCoordinate()-t.floatCoordinate()}),c=m.length,t=0;t<c;t++)s=m[t],s.setFixedCoordinate(s.coordinate());if(h=this.priceScale().properties(),h.alignLabels&&h.alignLabels.value()){for(t=1;t<a.length;t++)s=a[t],u=a[t-1],d=u.height(b,!1),p=s.coordinate(),_=u.getFixedCoordinate(),(p||_)&&p>_-d&&s.setFixedCoordinate(_-d);for(r=1;r<l.length;r++)s=l[r],u=l[r-1],d=u.height(b,!0),p=s.coordinate(),_=u.getFixedCoordinate(),(p||_)&&p<_+d&&s.setFixedCoordinate(_+d)}},o.prototype.drawBackLabels=function(e){var t,i,o,n;for(e.save(),t=this.backLabels(),i=this.rendererOptions(),o=0;o<t.length;o++)n=t[o],n.renderer().draw(e,i);e.restore()},o.prototype.drawCrossHairLabel=function(e){var t,i,o,n,r,s,a=this.pane.chart().model().model(),l=[],c=a.sourceBeingMoved()||a.lineBeingEdited()||a.lineBeingCreated();for(c&&l.push({source:c,scale:c.priceScale()}),
a.selectedSource()&&l.push({source:a.selectedSource(),scale:a.selectedSource().priceScale()}),a.hoveredSource()&&l.push({source:a.hoveredSource(),scale:a.hoveredSource().priceScale()}),l.push({source:a.crossHairSource(),scale:this.priceScale()}),t=this.pane.state(),i=0;i<l.length;i++)if(o=l[i],n=o.source.priceAxisViews(t,o.scale))for(r=0;r<n.length;r++)s=n[r],e.save(),s.renderer().draw(e,this.rendererOptions()),e.restore()},o.prototype.priceScale=function(){var e=this.pane.state(),t=[];return t=this._isLeft?[e.leftPriceScale(),e.rightPriceScale()]:[e.rightPriceScale(),e.leftPriceScale()],null===t[0].mainSource()?null===t[1].mainSource()?t[0]:t[1]:t[0]},o.prototype.isVisible=function(){return this._isVisible},o.prototype.setVisible=function(e){(e=!!e)!==this._isVisible&&(e?this.jqCell.css("display","table-cell"):this.jqCell.css("display","none"),this._isVisible=e)},o.prototype.setAutoScale=function(e){var t=this.pane.state,i=this.priceScale();this.pane.chart().model().setPriceAutoScale(t,i,e)},o.prototype.reset=function(){var e=this.pane.state(),t=this.priceScale();this.pane.chart().model().resetPriceScale(e,t)},o.prototype.hardResetCanvas=function(){this.size&&(f(this.canvas,this.size),f(this.top_canvas,this.size))},o.prototype.paint=function(e){this._isVisible&&e&&(e===d.UPDATE_CURSOR_ONLY?(this.top_ctx.clearRect(-.5,-.5,this.size.w,this.size.h),this.drawCrossHairLabel(this.top_ctx)):(this._alignLabels(),this.drawBackground(this.ctx),this.drawBorder(this.ctx),this.pane.state()&&(this.drawTickMarks(this.ctx),this.drawBackLabels(this.ctx),this.top_ctx.clearRect(-.5,-.5,this.size.w,this.size.h),this.drawCrossHairLabel(this.top_ctx))))},o.prototype.restoreDefaultCursor=function(){this.setCursor("")},o.prototype.setCursor=function(e){var t="";"grabbing"!==e&&"ns-resize"!==e||(t="price-axis--cursor-"+e),this._currentCursorClassName!==t&&(this._currentCursorClassName&&this.jqCell.removeClass(this._currentCursorClassName),t&&this.jqCell.addClass(t),this._currentCursorClassName=t,this.jqCell.css("cursor"))},o.prototype.image=function(){var e={};return e.content=this.canvas.toDataURL(),e.contentWidth=this.size.w,e.contentHeight=this.size.h,e},o.prototype.onMarksChanged=function(){var e,t=this.optimalWidth();this._prevOptimalWidth<t&&(e=this,this.updateTimeout||(this.updateTimeout=setTimeout(function(){e.pane&&e.pane.chart&&e.pane.chart()&&e.pane.chart().model().model().fullUpdate(),e.updateTimeout=null},100))),this._prevOptimalWidth=t},C=n(7),e.exports={PriceAxisWidget:o,scaleRatioForContextMenuTransformer:n}}).call(t,i(4))},function(e,t,i){"use strict";function o(e,t){return new Promise(function(o){i.e(1).then(function(n){o(i(66).bindToInput(e,t))}.bind(null,i)).catch(i.oe)})}function n(){return new Promise(function(e){i.e(1).then(function(t){i(66).activateKeyPressHandler(),e()}.bind(null,i)).catch(i.oe)})}function r(e){return new Promise(function(t){i.e(1).then(function(o){var n=i(66);t(n.showDialog(e))}.bind(null,i)).catch(i.oe)})}function s(e){return new Promise(function(t){i.e(1).then(function(o){
i(66).setSearchRequestDelay(e),t()}.bind(null,i)).catch(i.oe)})}Object.defineProperty(t,"__esModule",{value:!0}),t.bindToInput=o,t.activateKeyPressHandler=n,t.showDialog=r,t.setSearchRequestDelay=s},function(e,t,i){"use strict";function o(e){return Object(r.clean)(JSON.stringify(e))}function n(e){return JSON.parse(Object(r.clean)(e,!0))}var r;t.b=o,t.a=n,r=i(159),i.n(r)},,function(e,t,i){"use strict";function o(e,t,i){function o(e,t,i,o,n,r){var s=0;return e<i?s|=1:e>n&&(s|=2),t<o?s|=4:t>r&&(s|=8),s}for(var n,r,s,a=e[0].x,l=e[0].y,c=e[1].x,h=e[1].y,u=t.x,d=t.y,p=i.x,_=i.y,f=o(a,l,u,d,p,_),g=o(c,h,u,d,p,_),y=!1,v=0;;){if(v>1e3)throw Error("Cohen - Sutherland algorithm: infinity loop");if(v++,!(f|g)){y=!0;break}if(f&g)break;n=f||g,r=void 0,s=void 0,8&n?(r=a+(c-a)*(_-l)/(h-l),s=_):4&n?(r=a+(c-a)*(d-l)/(h-l),s=d):2&n?(s=l+(h-l)*(p-a)/(c-a),r=p):(s=l+(h-l)*(u-a)/(c-a),r=u),n===f?(a=r,l=s,f=o(a,l,u,d,p,_)):(c=r,h=s,g=o(c,h,u,d,p,_))}return y?m.equalPoints(m.point(a,l),m.point(c,h))?m.point(a,l):m.lineSegment(m.point(a,l),m.point(c,h)):null}function n(e,t){var i,o,n=e.A,r=t.A,s=e.B,a=t.B,l=e.C,c=t.C,h=n*a-r*s;return Math.abs(h)<1e-6?null:(i=(s*c-a*l)/h,o=(r*l-n*c)/h,new m.Point(i,o))}function r(e,t,i,o){var n,r=t.subtract(e),s=o.subtract(i),a=r.x*s.y-r.y*s.x;return Math.abs(a)<1e-6?null:(n=e.subtract(i),(n.y*s.x-n.x*s.y)/a)}function s(e,t,i,o){var n,s,a,l=r(e,t,i,o);return null===l?null:(n=t.subtract(e),s=n.scaled(l).add(e),a=g.distanceToSegment(i,o,s),Math.abs(a.distance)<1e-6?l:null)}function a(e,t){return-(e.C+e.B*t)/e.A}function l(e,t){return-(e.C+e.A*t)/e.B}function c(e,t){var i,o,n;for(i=0,o=e;i<o.length;i++)if(n=o[i],m.equalPoints(n,t))return!1;return e.push(t),!0}function h(e,t,i){var o,n,r,s,h,u=t.x,d=t.y,p=i.x,_=i.y;if(0===e.A)return o=-e.C/e.B,d<=o&&o<=_?m.lineSegment(m.point(u,o),m.point(p,o)):null;if(0===e.B)return n=-e.C/e.A,u<=n&&n<=p?m.lineSegment(m.point(n,d),m.point(n,_)):null;switch(r=[],s=function(t){var i=l(e,t);d<=i&&i<=_&&c(r,new m.Point(t,i))},h=function(t){var i=a(e,t);u<=i&&i<=p&&c(r,new m.Point(i,t))},s(u),h(d),s(p),h(_),r.length){case 0:return null;case 1:return r[0];case 2:return m.equalPoints(r[0],r[1])?r[0]:m.lineSegment(r[0],r[1])}return f.assert(!1,"We should have at most two intersection points"),null}function u(e,t,i,o){var n,r=s(e,t,i,new m.Point(o.x,i.y)),a=s(e,t,new m.Point(o.x,i.y),o),l=s(e,t,o,new m.Point(i.x,o.y)),c=s(e,t,new m.Point(i.x,o.y),i),h=[];return null!==r&&r>=0&&h.push(r),null!==a&&a>=0&&h.push(a),null!==l&&l>=0&&h.push(l),null!==c&&c>=0&&h.push(c),0===h.length?null:(h.sort(function(e,t){return e-t}),n=y.pointInRectangle(e,i,o)?h[0]:h[h.length-1],e.addScaled(t.subtract(e),n))}function d(e,t){return!(e.length>0&&m.equalPoints(e[e.length-1],t))&&(e.push(t),!0)}function p(e,t){var i,o,r,s,a,l=[];for(i=0;i<e.length;++i)o=e[i],r=e[(i+1)%e.length],s=m.lineThroughPoints(o,r),y.pointInHalfplane(o,t)?(d(l,o),y.pointInHalfplane(r,t)||null!==(a=n(s,t.edge))&&d(l,a)):y.pointInHalfplane(r,t)&&null!==(a=n(s,t.edge))&&d(l,a);return l.length>=3?l:null}function _(e,t){var i,o,n,r,s,a=e
;for(i=0;i<t.length&&null!==a;++i)o=t[i],n=t[(i+1)%t.length],r=t[(i+2)%t.length],s=m.lineThroughPoints(o,n),a=p(a,m.halfplaneThroughPoint(s,r));return a}var f,m,g,y;Object.defineProperty(t,"__esModule",{value:!0}),f=i(7),m=i(6),g=i(31),y=i(61),t.intersectLineSegmentAndRectangle=o,t.intersectLines=n,t.intersectLineSegments=s,t.intersectLineAndRectangle=h,t.intersectRayAndRectangle=u,t.intersectPolygonAndHalfplane=p,t.intersectPolygons=_},function(e,t,i){"use strict";function o(e){var t=/^[,\s]*(\d*)\s*([hdwms]?)\s*$/i,i=t.exec(e)||[],o=~~i[1],n=i[2]&&i[2].toUpperCase()||null,r={qty:!o&&n?1:o,unit:n};return r.error=!o&&!n,r.intraday=!(r.error||r.unit&&"H"!==r.unit),r}function n(e){var t,i,n;return a.enabled("allow_supported_resolutions_set_only")?null!==(t=r(e))&&Object(l.isAvailable)(""+t):(i=o(e),!i.error&&(i.intraday?c.linking.intraday.value():!(n=c.linking.supportedResolutions.value())||null!==i.unit&&!!~n.indexOf(i.unit)))}function r(e){var t=o(e),i=t.qty,n=t.unit;return t.error?null:("H"===n&&(i*=60,n=null),i&&!n?i+"":n&&(!i||1===i&&"S"!==n)?n:i+n)}function s(){return!1}var a,l,c;Object.defineProperty(t,"__esModule",{value:!0}),t.parseIntervalValue=o,t.intervalIsSupported=n,t.sanitizeIntervalValue=r,t.canShowSpreadActions=s,a=i(4),i.n(a),l=i(62),c=i(64)},function(e,t,i){"use strict";var o=i(16),n={_fontHeightCache:{},_parsedColorCache:{}};n._parseColor=function(e){var t,i,o;return this._parsedColorCache[e]?this._parsedColorCache[e]:(t=document.createElement("div"),t.style.color=e,i=t.style.color.match(/^rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/i)||t.style.color.match(/^rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\,\s*(\d*\.?\d+)\s*\)$/i),o={r:i[1],g:i[2],b:i[3],a:i[4]||"1"},this._parsedColorCache[e]=o,o)},n.getColorFromProperties=function(e,t){var i=1-t.value()/100,o=this._parseColor(e.value());return"rgba("+o.r+","+o.g+","+o.b+","+i+")"},n.setColorToProperties=function(e,t,i){var o,n=this._parseColor(e);t.setValue("rgb("+n.r+","+n.g+","+n.b+")"),o=100*(1-n.a),i.setValue(Math.max(0,Math.min(o,100)))},n._parseFont=function(e){var t,i,o=document.createElement("div");return o.style.font=e,t=o.style.fontSize.match(/(\d+)pt/),i=t&&t[0]===o.style.fontSize,{family:o.style.fontFamily,size:i?t[1]:"",bold:"bold"===o.style.fontWeight,italic:"italic"===o.style.fontStyle}},n.getFontFromProperties=function(e,t,i,o){return[i.value()?"bold":"",o.value()?"italic":"",t.value()+"pt",e.value()].join(" ")},n.setFontToProperties=function(e,t,i,o,n){var r=this._parseFont(e);r.family.length>0&&t.setValue(r.family),r.size.length>0&&i.setValue(r.size),o.setValue(r.bold),n.setValue(r.italic)},n.fontHeight=function(e){var t,i;return this._fontHeightCache[e]||(t=document.createElement("span"),t.appendChild(document.createTextNode("height")),document.body.appendChild(t),t.style.cssText="font: "+e+"; white-space: nowrap; display: inline;",i=t.offsetHeight,document.body.removeChild(t),this._fontHeightCache[e]=Math.ceil(i)),this._fontHeightCache[e]},n.drawPolyHoverOrPress=function(e,t,i,o){o?(e.save(),e.fillStyle="rgba(0, 0, 0, 0.15)",
CanvasEx.drawPoly(e,t,!0),e.restore()):i&&(e.save(),e.fillStyle="rgba(0, 0, 0, 0.1)",CanvasEx.drawPoly(e,t,!0),e.restore())},n.repaint=function(e){var t=new o(o.LIGHT_UPDATE);t.force=!0,e.invalidate(t)},n.roundToMinTick=function(e,t){var i=e.mainSource().base(),o=1/i;return o*Math.round(t/o)},e.exports=n},function(e,t,i){"use strict";function o(e,t,o,s){var a=Object(n.loadPropertyPages)(),l=function(n,r){i.e(19).then(function(r){a.then(function(){var r=i(357),a=new r(e,t,s);a.show(o),n(a)})}.bind(null,i)).catch(r)};return Object(r.retries)(function(e){return new Promise(l)},2)}var n,r;Object.defineProperty(t,"__esModule",{value:!0}),t.showEditObjectDialog=o,n=i(1),i.n(n),r=i(163)},function(e,t,i){"use strict";function o(){clearTimeout(F),clearTimeout(W),clearTimeout(H)}function n(e,t){H=setTimeout(e,t)}function r(e,t){W=setTimeout(e,t)}function s(e,t){F=setTimeout(e,t)}function a(){var e=document.getElementById(j);if(e)return void(U=e);U=document.createElement("div"),U.id=j,document.body.appendChild(U)}function l(){U.innerHTML=""}function c(e){return q.then(function(){l(),U.appendChild(e)})}function h(e,t){var i,o=G.includes(t)?Y[t]:"";(i=e.classList).remove.apply(i,G.map(function(e){return Y[e]}).filter(function(e){return!!e})),o&&!e.classList.contains(o)&&e.classList.add(o)}function u(e,t){var i=K.get(e);return i&&i[t]}function d(e,t,i){var o=K.get(e)||{};o[t]=i,K.set(e,o)}function p(e){var t=e.getAttribute("title");return t&&(d(e,"text",t),e.removeAttribute("title")),u(e,"text")||""}function _(e){var t=p(e),i=e.getBoundingClientRect(),o={h:i.height,w:i.width,x:i.left,y:i.top},n=e.getAttribute("data-color-theme")||"",r=e.classList.contains("common-tooltip-html"),s=parseInt(e.getAttribute("data-tooltip-delay")||""),a={type:"none"};return t&&(a={type:r?"html":"text",data:t}),{above:e.classList.contains("common-tooltip-above"),below:e.classList.contains("common-tooltip-below"),otl:e.classList.contains("common-tooltip-otl"),otr:e.classList.contains("common-tooltip-otr"),vertical:e.classList.contains("common-tooltip-vertical"),hotkey:e.getAttribute("data-tooltip-hotkey"),narrow:e.classList.contains("common-tooltip-narrow"),colorTheme:n,tooltipDelay:s,rect:o,content:a}}function f(e){var t,i,o,n,r,s,a=S(),l=x(a),c=e.content;switch(c.type){case"element":l.innerHTML="",l.appendChild(c.data);break;case"html":l.innerHTML=c.data;break;case"text":e.hotkey?(i=T(),i.innerText=c.data,l.appendChild(i)):l.innerText=c.data}return e.hotkey&&(o="none"!==c.type,n=w(),r=Object(Z.a)(e.hotkey),s=b(r.keys),n.innerHTML=(t=r.text).format.apply(t,s).replace(/\s\+\s/g,'<span class="'+Q["common-tooltip__plus-sign"]+'">+</span>'),l.classList.add(Q["common-tooltip__body--with-hotkey"]),o&&n.classList.add(Q["common-tooltip__hotkey-block--divider"]),l.appendChild(n)),a}function m(e,t){var i,o,n,r,s,a,l,c,u,d,p,_,f,m,g,y,b=t.rect;b&&(h(e,t.colorTheme||"default"),t.addClass&&e.classList.add(t.addClass),i=x(e),i.classList.toggle(Q["common-tooltip__body--width_wide"],!!t.wide),i.classList.toggle(Q["common-tooltip__body--width_narrow"],!!t.narrow),
i.classList.toggle(Q["common-tooltip__body--no-buttons"],!0),e.classList.toggle(Q["common-tooltip--no-pointer-events"],!Modernizr.pointerevents),i.style.left=v(0),i.style.width=v(i.clientWidth+2),o=document.body.clientWidth,n=document.body.clientHeight,r=t.vertical,s=r&&b.w<20||!r&&b.h<20,e.classList.toggle(Q["common-tooltip--farther"],s),e.classList.toggle(Q["common-tooltip--vertical"],r),e.classList.toggle(Q["common-tooltip--horizontal"],!r),a=P(e),l="",r?(e.style.left=v(b.x+b.w),e.style.top=v(b.y-(e.offsetHeight-b.h)/2),c=(e.querySelector(":last-child")||i).getBoundingClientRect().right,u=c+ee>o,e.classList.toggle(Q["common-tooltip--direction_reversed"],u),e.classList.toggle(Q["common-tooltip--direction_normal"],!u),l=u?"after":"before",J.IS_RTL?(l=t.otr?"after":l,l=t.otl?"before":l):(l=t.otr?"before":l,l=t.otl?"after":l),a.classList.toggle(Q["common-tooltip__ear-holder--before"],"before"===l),a.classList.toggle(Q["common-tooltip__ear-holder--after"],"after"===l),"after"===l&&(e.style.left="auto",e.style.right=v(o-b.x))):(d=b.x-(i.offsetWidth-b.w)/2,p=o-ee-e.offsetWidth,_=Math.max(ee,Math.min(d,p)),e.style.bottom=v(n-b.y),e.style.left=v(_),u=p<d,e.classList.toggle(Q["common-tooltip--direction_reversed"],u),e.classList.toggle(Q["common-tooltip--direction_normal"],!u),f=i.getBoundingClientRect().top,l=f<ee?"below":"above",l=t.above?"above":l,l=t.below?"below":l,a.classList.toggle(Q["common-tooltip__ear-holder--above"],"above"===l),a.classList.toggle(Q["common-tooltip__ear-holder--below"],"below"===l),"below"===l&&(e.style.bottom="auto",e.style.top=v(b.y+b.h)),m=C(e),g=i.getBoundingClientRect().left,y=Math.round(b.x+b.w/2-(g+i.clientWidth/2)),e.style.left=v(_+y),e.style.width=v(i.clientWidth+m.clientWidth),y=u?Math.max(0,y):Math.min(0,y),m.style.left=v(-y),i.style.left=v(-y)))}function g(e){e.classList.toggle(Q["common-tooltip--hidden"],!1)}function y(e){e.classList.toggle(Q["common-tooltip--hidden"],!0)}function v(e){return Math.floor(e)+"px"}function b(e){return e.map(function(e){return'<span class="'+Q["common-tooltip__hotkey-button"]+'">'+e+"</span>"})}function S(){return re.cloneNode(!0)}function w(){return se.cloneNode(!0)}function T(){return ae.cloneNode(!0)}function P(e){return e.querySelector("."+Q["common-tooltip__ear-holder"])}function x(e){return e.querySelector("."+Q["common-tooltip__body"])}function C(e){return e.querySelector("."+Q["common-tooltip__button-container"])}function L(e,t){var i,o,n,r,s;return void 0===t&&(t={}),i=B(t),o=i.content,n=z.e(i,["content"]),r=_(e),s=Object.assign(r,n),"none"!==o.type&&(s.content=o),!("none"===s.content.type&&!s.hotkey)&&(I(s),!0)}function I(e){var t=B(e),i=f(t);he={options:t,element:i},c(i).then(function(){o(),ce?D(i):(y(i),s(function(){return D(i)},A(t)))})}function M(e){return p(e)}function k(e){var t,i,o,n=e.target,r=e.currentTarget,s=O(n,r,"apply-common-tooltip"),a=function(t){var i,o,n;if("buttons"in e){if(1&e.buttons)return"continue"}else if(1===e.which)return"continue";if((i=function(){return L(t)})())return o=function(){
t.removeEventListener("common-tooltip-update",i),t.removeEventListener("mouseleave",o),t.removeEventListener("mousedown",o),document.removeEventListener("scroll",o),E()},n=function(e){27===e.keyCode&&(document.removeEventListener("keydown",n),o())},t.addEventListener("common-tooltip-update",i),t.addEventListener("mouseleave",o),t.addEventListener("mousedown",o),document.addEventListener("scroll",o),document.addEventListener("keydown",n),"break"};for(t=0,i=s;t<i.length&&(o=i[t],"break"!==a(o));t++);}function A(e){return"number"!=typeof e.tooltipDelay||isNaN(e.tooltipDelay)?le:e.tooltipDelay}function E(){var e,t,i;o(),ce&&he&&(e=he.element,t=he.options,i=function(){e.removeEventListener("mouseleave",i),y(e),n(function(){l(),ce=!1,he=null},le/2)},t.tooltipHideDelay?r(function(){e.querySelector(":hover")?e.addEventListener("mouseleave",i):i()},t.tooltipHideDelay):i())}function D(e){var t,i=Object($.ensureNotNull)(he).options;m(e,i),g(e),ce=!0,i.forceHideOnMove&&(t=function(){document.removeEventListener("mousemove",t),E()},document.addEventListener("mousemove",t))}function V(e){return e&&(e.nodeType===Node.ELEMENT_NODE?e:null)}function O(e,t,i){for(var o=[];e&&e!==t;)e.classList&&e.classList.contains(i)&&o.push(e),e=e.parentElement||V(e.parentNode);return o}function R(e){return"content"in e}function B(e){var t,i,o,n,r;return R(e)?e:(t=e.inner,i=e.html,o=e.text,n=z.e(e,["inner","html","text"]),r={type:"none"},t&&(r={type:"element",data:t}),o&&(r={type:i?"html":"text",data:o}),z.a({content:r},n))}var z,N,F,W,H,j,U,q,$,Y,G,K,Z,X,J,Q,ee,te,ie,oe,ne,re,se,ae,le,ce,he;Object.defineProperty(t,"__esModule",{value:!0}),z=i(3),N=i(104),F=0,W=0,H=0,j="tooltip-root-element",q=new Promise(function(e){"interactive"===document.readyState?(a(),e()):document.addEventListener("DOMContentLoaded",function(){a(),e()})}),$=i(7),Y={default:"",white:"theme-white","round-shadow":"theme-round-shadow"},G=Object.keys(Y),K=new WeakMap,Z=i(126),X=i(160),J=i(36),i(73),Q=i(474),ee=10,te="common-tooltip-wrapper",ie='\n\t<div id="'+te+'" class="'+Q["common-tooltip"]+'">\n\t\t<div class="'+Q["common-tooltip__ear-holder"]+'" >\n\t\t\t<div class="'+Q["common-tooltip__body"]+' js-tooltip-body"></div>\n\t\t</div>\n\t\t<div class="'+Q["common-tooltip__button-container"]+'"></div>\n\t</div>\n',oe='\n\t<div class="'+Q["common-tooltip__hotkey-block"]+'"></div>\n',ne='\n\t<div class="'+Q["common-tooltip__hotkey-text"]+'"></div>\n',re=Object(X.b)(ie),se=Object(X.b)(oe),ae=Object(X.b)(ne),t.showOnElement=L,t.show=I,t.updateTooltipText=M,t.hide=E,le=500,ce=!1,he=null,Modernizr.touch||document.addEventListener("mouseover",k,!0)},function(e,t,i){"use strict";function o(e,t,i,o,n){function r(e){return t&&t[e]?t[e]:e}function s(e,t,i,o){var n=r(t[0]);return!!e.hasOwnProperty(n)&&(t.length>1?s(e[n],t.slice(1),i):(e[n]&&e[n].setValue?e[n].setValue(i):e[n]=i,!0))}function a(e){i||m.logWarn("Path `"+e+"` does not exist.")}var l,c,h,u;if(o)for(l in o)c=l.split("."),h=r(c[0]),u=void 0!==n&&n===c[0],0!==c.length&&u&&(c=c.slice(1),h=r(c[0])),
0!==c.length&&e.hasOwnProperty(h)?s(e,c,o[l])||a(l):u&&a(l)}function n(e,t,i,n){window.__defaultsOverrides&&o(e,t,i,window.__defaultsOverrides,n)}function r(){var e=/^linetool.+/;Object.keys(TradingView.defaultProperties).forEach(function(t){e.test(t)&&n(TradingView.defaultProperties[t],null,!1,t)})}function s(e,t){return t?c(e,t):a(e)}function a(e){var t,i=g(e);return window._UNIT_TESTS||(t=TradingView.clone(TVSettings.getJSON(e,null)))&&TradingView.merge(i,t),i}function l(e){var t,i;return!!e&&(e=""+e,t=RegExp("\\d+"),i=t.exec(e),null!==i&&i[0]===e)}function c(e,t){var i,o,n,r,s=g(e);return window._UNIT_TESTS||(i=TradingView.clone(TVSettings.getJSON(e,null)),e.startsWith("study_")&&i&&l(i.version)&&(o=i.inputs,n=t.updateStudyInputs(i.id,i.version,"last",o,null),i.inputs=n,r=t.updateStudyState(i,i),i=r),TradingView.merge(s,i)),s}var h=i(39),u=i(250).LineToolPitchforkStyle,d=i(204).LineToolBarsPatternMode,p=i(107).PlotType,_=i(161),f=i(100).LineEnd,m=i(5).getLogger("Chart.Defaults"),g=function(e){var t,i,o,s,a,l,c,m,g={a:function(e,t){return{color:e,visible:t}},b:function(e,t,i){return{coeff:e,color:t,visible:i}},c:function(e,t,i,o,n){return{coeff:e,color:t,visible:i,linestyle:void 0===o?CanvasEx.LINESTYLE_SOLID:o,linewidth:void 0===n?1:n}},d:function(e,t,i){return{color:e,width:i,visible:t}},e:function(e,t,i,o,n){return{color:e,visible:t,width:i,x:o,y:n}},f:function(e,t,i,o,n,r){return{coeff1:e,coeff2:t,color:i,visible:o,linestyle:void 0===n?CanvasEx.LINESTYLE_SOLID:n,linewidth:void 0===r?1:r}}};if(void 0===TradingView.defaultProperties){switch(window.locale){case"ar_AE":t="Asia/Dubai";break;case"au":t="Australia/Sydney";break;case"br":t="America/Sao_Paulo";break;case"ca":t="America/Toronto";break;case"de_DE":case"it":t="Europe/Berlin";break;case"es":t="Europe/Madrid";break;case"fa_IR":t="Asia/Tehran";break;case"fr":case"sv_SE":t="Europe/Paris";break;case"he_IL":case"tr":t="Europe/Athens";break;case"hu_HU":case"pl":t="Europe/Warsaw";break;case"id":case"th_TH":case"vi_VN":t="Asia/Bangkok";break;case"in":t="Asia/Kolkata";break;case"ja":case"kr":t="Asia/Tokyo";break;case"ms_MY":t="Asia/Singapore";break;case"ru":t="Europe/Moscow";break;case"uk":t="Europe/London";break;case"zh_CN":case"zh_TW":t="Asia/Shanghai";break;default:t="Etc/UTC"}TradingView.defaultProperties={chartproperties:{timezone:t,dataWindowProperties:{background:"rgba( 255, 254, 206, 0.2)",border:"rgba( 96, 96, 144, 1)",font:"Verdana",fontBold:!1,fontItalic:!1,fontSize:10,transparency:80,visible:!0},paneProperties:{background:"#ffffff",gridProperties:{color:"#e1ecf2",style:CanvasEx.LINESTYLE_SOLID},vertGridProperties:{color:"#e1ecf2",style:CanvasEx.LINESTYLE_SOLID},horzGridProperties:{color:"#e1ecf2",style:CanvasEx.LINESTYLE_SOLID},crossHairProperties:{color:"#758696",style:CanvasEx.LINESTYLE_DASHED,transparency:0,width:1},topMargin:5,bottomMargin:5,leftAxisProperties:{autoScale:!0,autoScaleDisabled:!1,lockScale:!1,percentage:!1,percentageDisabled:!1,log:!1,logDisabled:!1,alignLabels:!0},rightAxisProperties:{autoScale:!0,autoScaleDisabled:!1,lockScale:!1,
percentage:!1,percentageDisabled:!1,log:!1,logDisabled:!1,alignLabels:!0},legendProperties:{showStudyArguments:!0,showStudyTitles:!0,showStudyValues:!0,showSeriesTitle:!0,showSeriesOHLC:!0,showLegend:!0}},scalesProperties:{showLeftScale:!1,showRightScale:!0,backgroundColor:"#ffffff",lineColor:"#555",textColor:"#555",fontSize:11,scaleSeriesOnly:!1,showSeriesLastValue:!0,showSeriesPrevCloseValue:!1,showStudyLastValue:!1,showSymbolLabels:!1,showStudyPlotLabels:!1,barSpacing:_.DEFAULT_BAR_SPACING},mainSeriesProperties:{style:h.STYLE_CANDLES,esdShowDividends:!0,esdShowSplits:!0,esdShowEarnings:!0,esdShowBreaks:!1,esdBreaksStyle:{color:"rgba( 235, 77, 92, 1)",style:CanvasEx.LINESTYLE_DASHED,width:1},esdFlagSize:2,showCountdown:!0,showInDataWindow:!0,visible:!0,showPriceLine:!0,priceLineWidth:1,priceLineColor:"",showPrevClosePriceLine:!1,prevClosePriceLineWidth:1,prevClosePriceLineColor:"rgba( 85, 85, 85, 1)",minTick:"default",extendedHours:!1,sessVis:!1,statusViewStyle:{fontSize:17,showExchange:!0,showInterval:!0,showSymbolAsDescription:!1},candleStyle:{upColor:"#53b987",downColor:"#eb4d5c",drawWick:!0,drawBorder:!0,borderColor:"#378658",borderUpColor:"#53b987",borderDownColor:"#eb4d5c",wickColor:"#737375",wickUpColor:"#a9cdd3",wickDownColor:"#f5a6ae",barColorsOnPrevClose:!1},hollowCandleStyle:{upColor:"rgba( 83, 185, 135, 1)",downColor:"rgba( 255, 77, 92, 1)",drawWick:!0,drawBorder:!0,borderColor:"rgba( 55, 134, 88, 1)",borderUpColor:"rgba( 83, 185, 135, 1)",borderDownColor:"rgba( 255, 77, 92, 1)",wickColor:"rgba( 115, 115, 117, 1)",wickUpColor:"rgba( 169, 220, 195, 1)",wickDownColor:"rgba( 245, 166, 174, 1)"},haStyle:{upColor:"rgba( 83, 185, 135, 1)",downColor:"rgba( 255, 77, 92, 1)",drawWick:!0,drawBorder:!0,borderColor:"rgba( 55, 134, 88, 1)",borderUpColor:"rgba( 83, 185, 135, 1)",borderDownColor:"rgba( 255, 77, 92, 1)",wickColor:"rgba( 115, 115, 117, 1)",wickUpColor:"rgba( 83, 185, 135, 1)",wickDownColor:"rgba( 255, 77, 92, 1)",showRealLastPrice:!1,barColorsOnPrevClose:!1,inputs:{},inputInfo:{}},barStyle:{upColor:"rgba( 83, 185, 135, 1)",downColor:"rgba( 255, 77, 92, 1)",barColorsOnPrevClose:!1,dontDrawOpen:!1},lineStyle:{color:"rgba( 60, 120, 216, 1)",linestyle:CanvasEx.LINESTYLE_SOLID,linewidth:1,priceSource:"close",styleType:h.STYLE_LINE_TYPE_SIMPLE},areaStyle:{color1:"rgba( 96, 96, 144, 0.5)",color2:"rgba( 1, 246, 245, 0.5)",linecolor:"rgba( 0, 148, 255, 1)",linestyle:CanvasEx.LINESTYLE_SOLID,linewidth:1,priceSource:"close",transparency:50},priceAxisProperties:{autoScale:!0,autoScaleDisabled:!1,lockScale:!1,percentage:!1,percentageDisabled:!1,log:!1,logDisabled:!1},renkoStyle:{upColor:"rgba( 83, 185, 135, 1)",downColor:"rgba( 255, 77, 92, 1)",borderUpColor:"rgba( 83, 185, 135, 1)",borderDownColor:"rgba( 255, 77, 92, 1)",upColorProjection:"rgba( 169, 220, 195, 1)",downColorProjection:"rgba( 245, 166, 174, 1)",borderUpColorProjection:"rgba( 169, 220, 195, 1)",borderDownColorProjection:"rgba( 245, 166, 174, 1)",wickUpColor:"rgba( 83, 185, 135, 1)",wickDownColor:"rgba( 255, 77, 92, 1)",inputs:{source:"close",
boxSize:3,style:"ATR",atrLength:14,wicks:!0},inputInfo:{source:{name:"Source"},boxSize:{name:"Box size"},style:{name:"Style"},atrLength:{name:"ATR Length"},wicks:{name:"Wicks"}}},pbStyle:{upColor:"rgba( 83, 185, 135, 1)",downColor:"rgba( 255, 77, 92, 1)",borderUpColor:"rgba( 83, 185, 135, 1)",borderDownColor:"rgba( 255, 77, 92, 1)",upColorProjection:"rgba( 169, 220, 195, 1)",downColorProjection:"rgba( 245, 166, 174, 1)",borderUpColorProjection:"rgba( 169, 220, 195, 1)",borderDownColorProjection:"rgba( 245, 166, 174, 1)",inputs:{source:"close",lb:3},inputInfo:{source:{name:"Source"},lb:{name:"Number of line"}}},kagiStyle:{upColor:"rgba( 83, 185, 135, 1)",downColor:"rgba( 255, 77, 92, 1)",upColorProjection:"rgba( 169, 220, 195, 1)",downColorProjection:"rgba( 245, 166, 174, 1)",inputs:{source:"close",style:"ATR",atrLength:14,reversalAmount:1},inputInfo:{source:{name:"Source"},style:{name:"Style"},atrLength:{name:"ATR Length"},reversalAmount:{name:"Reversal amount"}}},pnfStyle:{upColor:"rgba( 83, 185, 135, 1)",downColor:"rgba( 255, 77, 92, 1)",upColorProjection:"rgba( 169, 220, 195, 1)",downColorProjection:"rgba( 245, 166, 174, 1)",inputs:{sources:"Close",reversalAmount:3,boxSize:1,style:"ATR",atrLength:14},inputInfo:{sources:{name:"Source"},boxSize:{name:"Box size"},reversalAmount:{name:"Reversal amount"},style:{name:"Style"},atrLength:{name:"ATR Length"}}},baselineStyle:{baselineColor:"rgba( 117, 134, 150, 1)",topFillColor1:"rgba( 83, 185, 135, 0.1)",topFillColor2:"rgba( 83, 185, 135, 0.1)",bottomFillColor1:"rgba( 235, 77, 92, 0.1)",bottomFillColor2:"rgba( 235, 77, 92, 0.1)",topLineColor:"rgba( 83, 185, 135, 1)",bottomLineColor:"rgba( 235, 77, 92, 1)",topLineWidth:1,bottomLineWidth:1,priceSource:"close",transparency:50,baseLevelPercentage:50},rangeStyle:{upColor:"rgba( 83, 185, 135, 1)",downColor:"rgba( 255, 77, 92, 1)",upColorProjection:"rgba( 169, 220, 195, 1)",downColorProjection:"rgba( 245, 166, 174, 1)",inputs:{range:10,phantomBars:!1},inputInfo:{range:{name:"Range"},phantomBars:{name:"Phantom Bars"}}}},symbolWatermarkProperties:{color:"rgba( 85, 85, 85, 0)",transparency:100},chartEventsSourceProperties:{visible:!0,futureOnly:!0,breaks:{color:"rgba(85, 85, 85, 1)",visible:!1,style:CanvasEx.LINESTYLE_DASHED,width:1}},tradingProperties:{showPositions:!0,showOrders:!0,showExecutions:!0,extendLeft:!0,lineLength:5,lineWidth:1,lineStyle:CanvasEx.LINESTYLE_DASHED},alertsProperties:{labels:{visible:!0,color:"rgba( 215, 84, 66, 1)",highlightColor:"rgba( 255, 255, 51, 1)",hoverColor:"rgba( 245, 227, 135, 1)",line:{visible:!0,style:CanvasEx.LINESTYLE_DASHED,width:1}},fakeLabels:{visible:!0,color:"rgba( 119, 119, 119, 1)",line:{visible:!0,style:CanvasEx.LINESTYLE_DASHED,width:1}},drawingIcon:{color:"rgba( 170, 170, 170, 1)"}},editorFontsList:["Verdana","Courier New","Times New Roman","Arial"],volumePaneSize:"large"},drawings:{magnet:!1,stayInDrawingMode:!1,drawOnAllCharts:!0,crossHairColor:"#585858",crossHairStyle:CanvasEx.LINESTYLE_DASHED,crossHairWidth:1},linetoolorder:{singleChartOnly:!0,extendLeft:"inherit",
lineLength:"inherit",lineColor:"rgba( 255, 0, 0, 1)",lineTransparency:0,lineStyle:"inherit",lineWidth:"inherit",bodyBorderColor:"rgba( 255, 0, 0, 0)",bodyBorderTransparency:0,bodyBackgroundColor:"rgba( 255, 255, 255, 0.75)",bodyBackgroundTransparency:25,bodyTextColor:"rgba( 255, 0, 0, 0)",bodyTextTransparency:0,bodyFontFamily:"Verdana",bodyFontSize:7,bodyFontBold:!0,bodyFontItalic:!1,quantityBorderColor:"rgba( 255, 0, 0, 0)",quantityBorderTransparency:0,quantityBackgroundColor:"rgba( 255, 0, 0, 0.75)",quantityBackgroundTransparency:25,quantityTextColor:"rgba( 255, 255, 255, 1)",quantityTextTransparency:0,quantityFontFamily:"Verdana",quantityFontSize:7,quantityFontBold:!0,quantityFontItalic:!1,cancelButtonBorderColor:"rgba( 255, 0, 0, 1)",cancelButtonBorderTransparency:0,cancelButtonBackgroundColor:"rgba( 255, 255, 255, 0.75)",cancelButtonBackgroundTransparency:25,cancelButtonIconColor:"rgba( 255, 0, 0, 1)",cancelButtonIconTransparency:0,tooltip:""},linetoolposition:{singleChartOnly:!0,extendLeft:"inherit",lineLength:"inherit",lineColor:"rgba( 0, 113, 224, 1)",lineTransparency:0,lineStyle:"inherit",lineWidth:"inherit",bodyBorderColor:"rgba( 0, 113, 224, 1)",bodyBorderTransparency:0,bodyBackgroundColor:"rgba( 255, 255, 255, 0.75)",bodyBackgroundTransparency:25,bodyTextColor:"rgba( 0, 113, 224, 1)",bodyTextTransparency:0,bodyFontFamily:"Verdana",bodyFontSize:7,bodyFontBold:!0,bodyFontItalic:!1,quantityBorderColor:"rgba( 0, 113, 224, 1)",quantityBorderTransparency:0,quantityBackgroundColor:"rgba( 0, 113, 224, 0.75)",quantityBackgroundTransparency:25,quantityTextColor:"rgba( 255, 255, 255, 1)",quantityTextTransparency:0,quantityFontFamily:"Verdana",quantityFontSize:7,quantityFontBold:!0,quantityFontItalic:!1,reverseButtonBorderColor:"rgba( 0, 113, 224, 1)",reverseButtonBorderTransparency:0,reverseButtonBackgroundColor:"rgba( 255, 255, 255, 0.75)",reverseButtonBackgroundTransparency:25,reverseButtonIconColor:"rgba( 0, 113, 224, 1)",reverseButtonIconTransparency:0,closeButtonBorderColor:"rgba( 0, 113, 224, 1)",closeButtonBorderTransparency:0,closeButtonBackgroundColor:"rgba( 255, 255, 255, 0.75)",closeButtonBackgroundTransparency:25,closeButtonIconColor:"rgba( 0, 113, 224, 1)",closeButtonIconTransparency:0,tooltip:""},linetoolexecution:{singleChartOnly:!0,direction:"buy",arrowHeight:8,arrowSpacing:1,arrowColor:"rgba( 0, 0, 255, 1)",arrowTransparency:0,text:"",textColor:"rgba( 0, 0, 0, 1)",textTransparency:0,fontFamily:"Verdana",fontSize:8,fontBold:!1,fontItalic:!1,tooltip:""},linetoolicon:{singleChartOnly:!0,clonable:!0,color:"rgba( 61, 133, 198, 1)",size:40,icon:61536,angle:.5*Math.PI,scale:1},linetoolbezierquadro:{clonable:!0,linecolor:"rgba( 21, 153, 128, 1)",linewidth:1,fillBackground:!1,backgroundColor:"rgba( 21, 56, 153, 0.5)",transparency:50,linestyle:CanvasEx.LINESTYLE_SOLID,extendLeft:!1,extendRight:!1,leftEnd:f.Normal,rightEnd:f.Normal},linetoolbeziercubic:{clonable:!0,linecolor:"rgba( 21, 153, 128, 1)",linewidth:1,fillBackground:!1,backgroundColor:"rgba( 21, 56, 153, 0.5)",transparency:50,
linestyle:CanvasEx.LINESTYLE_SOLID,extendLeft:!1,extendRight:!1,leftEnd:f.Normal,rightEnd:f.Normal},linetooltrendline:{clonable:!0,linecolor:"rgba( 21, 153, 128, 1)",linewidth:1,linestyle:CanvasEx.LINESTYLE_SOLID,extendLeft:!1,extendRight:!1,leftEnd:f.Normal,rightEnd:f.Normal,font:"Verdana",textcolor:"rgba( 21, 119, 96, 1)",fontsize:12,bold:!1,italic:!1,snapTo45Degrees:!0,alwaysShowStats:!1,showMiddlePoint:!1,showPriceRange:!1,showBarsRange:!1,showDateTimeRange:!1,showDistance:!1,showAngle:!1},linetooltimecycles:{clonable:!0,linecolor:"rgba(21, 153, 128, 1)",linewidth:1,fillBackground:!0,backgroundColor:"rgba(106, 168, 79, 0.5)",transparency:50,linestyle:CanvasEx.LINESTYLE_SOLID},linetoolsineline:{clonable:!0,linecolor:"rgba( 21, 153, 128, 1)",linewidth:1,linestyle:CanvasEx.LINESTYLE_SOLID},linetooltrendangle:{singleChartOnly:!0,clonable:!0,linecolor:"rgba( 21, 153, 128, 1)",linewidth:1,linestyle:CanvasEx.LINESTYLE_SOLID,snapTo45Degrees:!0,font:"Verdana",textcolor:"rgba( 21, 119, 96, 1)",fontsize:12,bold:!0,italic:!1,alwaysShowStats:!1,showMiddlePoint:!1,showPriceRange:!1,showBarsRange:!1,extendRight:!1,extendLeft:!1},linetooldisjointangle:{clonable:!0,linecolor:"rgba( 18, 159, 92, 1)",linewidth:2,linestyle:CanvasEx.LINESTYLE_SOLID,fillBackground:!0,backgroundColor:"rgba( 106, 168, 79, 0.5)",transparency:50,extendLeft:!1,extendRight:!1,leftEnd:f.Normal,rightEnd:f.Normal,font:"Verdana",textcolor:"rgba( 18, 159, 92, 1)",fontsize:12,bold:!1,italic:!1,showPrices:!1,showPriceRange:!1,showDateTimeRange:!1,showBarsRange:!1},linetoolflatbottom:{clonable:!0,linecolor:"rgba( 73, 133, 231, 1)",linewidth:2,linestyle:CanvasEx.LINESTYLE_SOLID,fillBackground:!0,backgroundColor:"rgba( 21, 56, 153, 0.5)",transparency:50,extendLeft:!1,extendRight:!1,leftEnd:f.Normal,rightEnd:f.Normal,font:"Verdana",textcolor:"rgba( 73, 133, 231, 1)",fontsize:12,bold:!1,italic:!1,showPrices:!1,showPriceRange:!1,showDateTimeRange:!1,showBarsRange:!1},linetoolfibspiral:{counterclockwise:!1,clonable:!0,linecolor:"rgba( 21, 153, 128, 1)",linewidth:1,linestyle:CanvasEx.LINESTYLE_SOLID},linetooldaterange:{clonable:!0,linecolor:"rgba( 88, 88, 88, 1)",linewidth:1,font:"Verdana",textcolor:"rgba( 255, 255, 255, 1)",fontsize:12,fillLabelBackground:!0,labelBackgroundColor:"rgba( 91, 133, 191, 0.9)",labelBackgroundTransparency:30,fillBackground:!0,backgroundColor:"rgba( 186, 218, 255, 0.4)",backgroundTransparency:60,drawBorder:!1,borderColor:"rgba( 102, 123, 139, 1)",extendTop:!1,extendBottom:!1},linetoolpricerange:{clonable:!0,linecolor:"rgba( 88, 88, 88, 1)",linewidth:1,font:"Verdana",textcolor:"rgba( 255, 255, 255, 1)",fontsize:12,fillLabelBackground:!0,labelBackgroundColor:"rgba( 91, 133, 191, 0.9)",labelBackgroundTransparency:30,fillBackground:!0,backgroundColor:"rgba( 186, 218, 255, 0.4)",backgroundTransparency:60,drawBorder:!1,borderColor:"rgba( 102, 123, 139, 1)",extendLeft:!1,extendRight:!1},linetooldateandpricerange:{clonable:!0,linecolor:"rgba( 88, 88, 88, 1)",linewidth:1,font:"Verdana",textcolor:"rgba( 255, 255, 255, 1)",fontsize:12,
fillLabelBackground:!0,labelBackgroundColor:"rgba( 91, 133, 191, 0.9)",labelBackgroundTransparency:30,fillBackground:!0,backgroundColor:"rgba( 186, 218, 255, 0.4)",backgroundTransparency:60,drawBorder:!1,borderColor:"rgba( 102, 123, 139, 1)"},linetoolriskrewardshort:{clonable:!0,linecolor:"rgba( 88, 88, 88, 1)",linewidth:1,font:"Verdana",textcolor:"rgba(255, 255, 255, 1)",fontsize:12,fillLabelBackground:!0,labelBackgroundColor:"rgba( 88, 88, 88, 1)",labelBackgroundTransparency:0,fillBackground:!0,stopBackground:"rgba( 255, 0, 0, 0.2)",profitBackground:"rgba( 0, 160, 0, 0.2)",stopBackgroundTransparency:80,profitBackgroundTransparency:80,drawBorder:!1,borderColor:"rgba( 102, 123, 139, 1)",compact:!1,riskDisplayMode:"percents",accountSize:1e3,risk:25},linetoolriskrewardlong:{clonable:!0,linecolor:"rgba( 88, 88, 88, 1)",linewidth:1,font:"Verdana",textcolor:"rgba(255, 255, 255, 1)",fontsize:12,fillLabelBackground:!0,labelBackgroundColor:"rgba( 88, 88, 88, 1)",labelBackgroundTransparency:0,fillBackground:!0,stopBackground:"rgba( 255, 0, 0, 0.2)",profitBackground:"rgba( 0, 160, 0, 0.2)",stopBackgroundTransparency:80,profitBackgroundTransparency:80,drawBorder:!1,borderColor:"rgba( 102, 123, 139, 1)",compact:!1,riskDisplayMode:"percents",accountSize:1e3,risk:25},linetoolarrow:{clonable:!0,linecolor:"rgba( 111, 136, 198, 1)",linewidth:2,linestyle:CanvasEx.LINESTYLE_SOLID,extendLeft:!1,extendRight:!1,leftEnd:f.Normal,rightEnd:f.Arrow,font:"Verdana",textcolor:"rgba( 21, 119, 96, 1)",fontsize:12,bold:!1,italic:!1,alwaysShowStats:!1,showMiddlePoint:!1,showPriceRange:!1,showBarsRange:!1,showDateTimeRange:!1,showDistance:!1,showAngle:!1},linetoolray:{clonable:!0,linecolor:"rgba( 21, 153, 128, 1)",linewidth:1,linestyle:CanvasEx.LINESTYLE_SOLID,extendLeft:!1,extendRight:!0,leftEnd:f.Normal,rightEnd:f.Normal,font:"Verdana",textcolor:"rgba( 21, 119, 96, 1)",fontsize:12,bold:!1,italic:!1,alwaysShowStats:!1,showMiddlePoint:!1,showPriceRange:!1,showBarsRange:!1,showDateTimeRange:!1,showDistance:!1,showAngle:!1},linetoolextended:{clonable:!0,linecolor:"rgba( 21, 153, 128, 1)",linewidth:1,linestyle:CanvasEx.LINESTYLE_SOLID,extendLeft:!0,extendRight:!0,leftEnd:f.Normal,rightEnd:f.Normal,font:"Verdana",textcolor:"rgba( 21, 119, 96, 1)",fontsize:12,bold:!1,italic:!1,alwaysShowStats:!1,showMiddlePoint:!1,showPriceRange:!1,showBarsRange:!1,showDateTimeRange:!1,showDistance:!1,showAngle:!1},linetoolhorzline:{clonable:!0,linecolor:"rgba( 128, 204, 219, 1)",linewidth:1,linestyle:CanvasEx.LINESTYLE_SOLID,showPrice:!0,showLabel:!1,font:"Verdana",textcolor:"rgba( 21, 119, 96, 1)",fontsize:12,bold:!1,italic:!1,horzLabelsAlign:"center",vertLabelsAlign:"top"},linetoolhorzray:{clonable:!0,linecolor:"rgba( 128, 204, 219, 1)",linewidth:1,linestyle:CanvasEx.LINESTYLE_SOLID,showPrice:!0,showLabel:!1,font:"Verdana",textcolor:"rgba( 21, 119, 96, 1)",fontsize:12,bold:!1,italic:!1,horzLabelsAlign:"center",vertLabelsAlign:"top"},linetoolvertline:{clonable:!0,linecolor:"rgba( 128, 204, 219, 1)",linewidth:1,linestyle:CanvasEx.LINESTYLE_SOLID,showTime:!0},
linetoolcrossline:{clonable:!0,linecolor:"rgba(6, 160, 227, 1)",linewidth:1,linestyle:CanvasEx.LINESTYLE_SOLID,showPrice:!0,showTime:!0},linetoolcirclelines:{clonable:!0,trendline:{visible:!0,color:"rgba( 128, 128, 128, 1)",linewidth:1,linestyle:CanvasEx.LINESTYLE_DASHED},linecolor:"rgba( 128, 204, 219, 1)",linewidth:1,linestyle:CanvasEx.LINESTYLE_SOLID},linetoolfibtimezone:{horzLabelsAlign:"right",vertLabelsAlign:"bottom",clonable:!0,baselinecolor:"rgba( 128, 128, 128, 1)",linecolor:"rgba( 0, 85, 219, 1)",linewidth:1,linestyle:CanvasEx.LINESTYLE_SOLID,showLabels:!0,font:"Verdana",fillBackground:!1,transparency:80,trendline:{visible:!0,color:"rgba( 128, 128, 128, 1)",linewidth:1,linestyle:CanvasEx.LINESTYLE_DASHED},level1:g.c(0,"rgba( 128, 128, 128, 1)",!0),level2:g.c(1,"rgba( 0, 85, 219, 1)",!0),level3:g.c(2,"rgba( 0, 85, 219, 1)",!0),level4:g.c(3,"rgba( 0, 85, 219, 1)",!0),level5:g.c(5,"rgba( 0, 85, 219, 1)",!0),level6:g.c(8,"rgba( 0, 85, 219, 1)",!0),level7:g.c(13,"rgba( 0, 85, 219, 1)",!0),level8:g.c(21,"rgba( 0, 85, 219, 1)",!0),level9:g.c(34,"rgba( 0, 85, 219, 1)",!0),level10:g.c(55,"rgba( 0, 85, 219, 1)",!0),level11:g.c(89,"rgba( 0, 85, 219, 1)",!0),__collectibleLines:["trendline","level1","level2","level3","level4","level5","level6","level7","level8","level9","level10","level11"]},linetooltext:{clonable:!0,color:"rgba( 102, 123, 139, 1)",font:"Verdana",fontsize:20,fillBackground:!1,backgroundColor:"rgba( 91, 133, 191, 0.9)",backgroundTransparency:70,drawBorder:!1,borderColor:"rgba( 102, 123, 139, 1)",bold:!1,italic:!1,locked:!1,fixedSize:!0,wordWrap:!1,wordWrapWidth:400},linetooltextabsolute:{singleChartOnly:!0,clonable:!0,color:"rgba( 102, 123, 139, 1)",font:"Verdana",fontsize:20,fillBackground:!1,backgroundColor:"rgba( 155, 190, 213, 0.3)",backgroundTransparency:70,drawBorder:!1,borderColor:"rgba( 102, 123, 139, 1)",bold:!1,italic:!1,locked:!0,wordWrap:!1,wordWrapWidth:400},linetoolballoon:{clonable:!0,color:"rgba( 102, 123, 139, 1)",backgroundColor:"rgba( 255, 254, 206, 0.7)",borderColor:"rgba( 140, 140, 140, 1)",fontWeight:"bold",fontsize:12,font:"Arial",transparency:30},linetoolbrush:{clonable:!0,linecolor:"rgba( 53, 53, 53, 1)",linewidth:2,linestyle:CanvasEx.LINESTYLE_SOLID,smooth:5,fillBackground:!1,backgroundColor:"rgba( 21, 56, 153, 0.5)",transparency:50,leftEnd:f.Normal,rightEnd:f.Normal},linetoolpolyline:{clonable:!0,linecolor:"rgba( 53, 53, 53, 1)",linewidth:2,linestyle:CanvasEx.LINESTYLE_SOLID,fillBackground:!0,backgroundColor:"rgba( 21, 56, 153, 0.5)",transparency:50,filled:!1},linetoolarrowmark:{clonable:!0,color:"rgba( 120, 120, 120, 1)",fontsize:20,font:"Verdana"},linetoolarrowmarkleft:{clonable:!0,color:"rgba( 120, 120, 120, 1)",fontsize:20,font:"Verdana"},linetoolarrowmarkup:{clonable:!0,color:"rgba( 120, 120, 120, 1)",fontsize:20,font:"Verdana"},linetoolarrowmarkright:{clonable:!0,color:"rgba( 120, 120, 120, 1)",fontsize:20,font:"Verdana"},linetoolarrowmarkdown:{clonable:!0,color:"rgba( 120, 120, 120, 1)",fontsize:20,font:"Verdana"},linetoolflagmark:{clonable:!0,color:"rgba( 255, 0, 0, 1)"
},linetoolnote:{clonable:!0,markerColor:"rgba( 46, 102, 255, 1)",textColor:"rgba( 0, 0, 0, 1)",backgroundColor:"rgba( 255, 255, 255, 1)",backgroundTransparency:0,font:"Arial",fontSize:12,bold:!1,italic:!1,locked:!1,fixedSize:!0},linetoolnoteabsolute:{singleChartOnly:!0,clonable:!0,markerColor:"rgba( 46, 102, 255, 1)",textColor:"rgba( 0, 0, 0, 1)",backgroundColor:"rgba( 255, 255, 255, 1)",backgroundTransparency:0,font:"Arial",fontSize:12,bold:!1,italic:!1,locked:!0,fixedSize:!0},linetoolthumbup:{clonable:!0,color:"rgba( 0, 128, 0, 1)"},linetoolthumbdown:{clonable:!0,color:"rgba( 255, 0, 0, 1)"},linetoolpricelabel:{clonable:!0,color:"rgba( 102, 123, 139, 1)",backgroundColor:"rgba( 255, 255, 255, 0.7)",borderColor:"rgba( 140, 140, 140, 1)",fontWeight:"bold",fontsize:11,font:"Arial",transparency:30},linetoolrectangle:{clonable:!0,color:"rgba( 21, 56, 153, 1)",fillBackground:!0,backgroundColor:"rgba( 21, 56, 153, 0.5)",linewidth:1,snapTo45Degrees:!0,transparency:50},linetoolrotatedrectangle:{clonable:!0,color:"rgba( 152, 0, 255, 1)",fillBackground:!0,backgroundColor:"rgba( 142, 124, 195, 0.5)",transparency:50,linewidth:1,snapTo45Degrees:!0},linetoolellipse:{clonable:!0,color:"rgba( 153, 153, 21, 1)",fillBackground:!0,backgroundColor:"rgba( 153, 153, 21, 0.5)",transparency:50,linewidth:1},linetoolarc:{clonable:!0,color:"rgba( 153, 153, 21, 1)",fillBackground:!0,backgroundColor:"rgba( 153, 153, 21, 0.5)",transparency:50,linewidth:1},linetoolprediction:{singleChartOnly:!0,linecolor:"rgba( 28, 115, 219, 1)",linewidth:2,sourceBackColor:"rgba( 241, 241, 241, 1)",sourceTextColor:"rgba( 110, 110, 110, 1)",sourceStrokeColor:"rgba( 110, 110, 110, 1)",targetStrokeColor:"rgba( 47, 168, 255, 1)",targetBackColor:"rgba( 11, 111, 222, 1)",targetTextColor:"rgba( 255, 255, 255, 1)",successBackground:"rgba( 54, 160, 42, 0.9)",successTextColor:"rgba( 255, 255, 255, 1)",failureBackground:"rgba( 231, 69, 69, 0.5)",failureTextColor:"rgba( 255, 255, 255, 1)",intermediateBackColor:"rgba( 234, 210, 137, 1)",intermediateTextColor:"rgba( 109, 77, 34, 1)",transparency:10,centersColor:"rgba( 32, 32, 32, 1)"},linetooltriangle:{clonable:!0,color:"rgba( 153, 21, 21, 1)",fillBackground:!0,backgroundColor:"rgba( 153, 21, 21, 0.5)",transparency:50,linewidth:1},linetoolcallout:{clonable:!0,color:"rgba( 255, 255, 255, 1)",backgroundColor:"rgba( 153, 21, 21, 0.5)",transparency:50,linewidth:2,fontsize:12,font:"Verdana",bordercolor:"rgba( 153, 21, 21, 1)",bold:!1,italic:!1,wordWrap:!1,wordWrapWidth:400},linetoolparallelchannel:{clonable:!0,linecolor:"rgba( 119, 52, 153, 1)",linewidth:1,linestyle:CanvasEx.LINESTYLE_SOLID,extendLeft:!1,extendRight:!1,fillBackground:!0,backgroundColor:"rgba( 180, 167, 214, 0.5)",transparency:50,showMidline:!1,midlinecolor:"rgba( 119, 52, 153, 1)",midlinewidth:1,midlinestyle:CanvasEx.LINESTYLE_DASHED},linetoolelliottimpulse:{degree:7,clonable:!0,showWave:!0,color:"rgba( 61, 133, 198, 1)",linewidth:1},linetoolelliotttriangle:{degree:7,clonable:!0,showWave:!0,color:"rgba( 255, 152, 0, 1)",linewidth:1},linetoolelliotttriplecombo:{
degree:7,clonable:!0,showWave:!0,color:"rgba( 106, 168, 79, 1)",linewidth:1},linetoolelliottcorrection:{degree:7,clonable:!0,showWave:!0,color:"rgba( 61, 133, 198, 1)",linewidth:1},linetoolelliottdoublecombo:{degree:7,clonable:!0,showWave:!0,color:"rgba( 106, 168, 79, 1)",linewidth:1},linetoolbarspattern:{singleChartOnly:!0,color:"rgba( 80, 145, 204, 1)",clonable:!0,mode:d.Bars,mirrored:!1,flipped:!1},linetoolghostfeed:{singleChartOnly:!0,clonable:!0,averageHL:20,variance:50,candleStyle:{upColor:"#6ba583",downColor:"#d75442",drawWick:!0,drawBorder:!0,borderColor:"#378658",borderUpColor:"#225437",borderDownColor:"#5b1a13",wickColor:"#737375"},transparency:50},study:{inputs:{},styles:{},palettes:{},bands:{},area:{},graphics:{},showInDataWindow:!0,visible:!0,showStudyArguments:!0,precision:"default"},linetoolpitchfork:{clonable:!0,fillBackground:!0,transparency:80,style:u.Original,median:{visible:!0,color:"rgba( 165, 0, 0, 1)",linewidth:1,linestyle:CanvasEx.LINESTYLE_SOLID},level0:g.c(.25,"rgba( 160, 107, 0, 1)",!1),level1:g.c(.382,"rgba( 105, 158, 0, 1)",!1),level2:g.c(.5,"rgba( 0, 155, 0, 1)",!0),level3:g.c(.618,"rgba( 0, 153, 101, 1)",!1),level4:g.c(.75,"rgba( 0, 101, 153, 1)",!1),level5:g.c(1,"rgba( 0, 0, 153, 1)",!0),level6:g.c(1.5,"rgba( 102, 0, 153, 1)",!1),level7:g.c(1.75,"rgba( 153, 0, 102, 1)",!1),level8:g.c(2,"rgba( 165, 0, 0, 1)",!1),__collectibleLines:["median","level0","level1","level2","level3","level4","level5","level6","level7","level8"]},linetoolpitchfan:{clonable:!0,fillBackground:!0,transparency:80,median:{visible:!0,color:"rgba( 165, 0, 0, 1)",linewidth:1,linestyle:CanvasEx.LINESTYLE_SOLID},level0:g.c(.25,"rgba( 160, 107, 0, 1)",!1),level1:g.c(.382,"rgba( 105, 158, 0, 1)",!1),level2:g.c(.5,"rgba( 0, 155, 0, 1)",!0),level3:g.c(.618,"rgba( 0, 153, 101, 1)",!1),level4:g.c(.75,"rgba( 0, 101, 153, 1)",!1),level5:g.c(1,"rgba( 0, 0, 153, 1)",!0),level6:g.c(1.5,"rgba( 102, 0, 153, 1)",!1),level7:g.c(1.75,"rgba( 153, 0, 102, 1)",!1),level8:g.c(2,"rgba( 165, 0, 0, 1)",!1),__collectibleLines:["median","level0","level1","level2","level3","level4","level5","level6","level7","level8"]},linetoolgannfan:{clonable:!0,showLabels:!0,font:"Verdana",fillBackground:!0,transparency:80,level1:g.f(1,8,"rgba( 160, 107, 0, 1)",!0),level2:g.f(1,4,"rgba( 105, 158, 0, 1)",!0),level3:g.f(1,3,"rgba( 0, 155, 0, 1)",!0),level4:g.f(1,2,"rgba( 0, 153, 101, 1)",!0),level5:g.f(1,1,"rgba( 128, 128, 128, 1)",!0),level6:g.f(2,1,"rgba( 0, 101, 153, 1)",!0),level7:g.f(3,1,"rgba( 0, 0, 153, 1)",!0),level8:g.f(4,1,"rgba( 102, 0, 153, 1)",!0),level9:g.f(8,1,"rgba( 165, 0, 0, 1)",!0),__collectibleLines:["level1","level2","level3","level4","level5","level6","level7","level8","level9","level10","level11"]},linetoolganncomplex:{clonable:!0,fillBackground:!1,arcsBackground:{fillBackground:!0,transparency:80},reverse:!1,scaleRatio:"",showLabels:!0,labelsStyle:{font:"Verdana",fontSize:12,bold:!1,italic:!1},
levels:[g.d("rgba( 128, 128, 128, 1)",!0,1),g.d("rgba( 160, 107, 0, 1)",!0,1),g.d("rgba( 105, 158, 0, 1)",!0,1),g.d("rgba( 0, 155, 0, 1)",!0,1),g.d("rgba( 0, 153, 101, 1)",!0,1),g.d("rgba( 128, 128, 128, 1)",!0,1)],fanlines:[g.e("rgba( 165, 0, 255, 1)",!1,1,8,1),g.e("rgba( 165, 0, 0, 1)",!1,1,5,1),g.e("rgba( 128, 128, 128, 1)",!1,1,4,1),g.e("rgba( 160, 107, 0, 1)",!1,1,3,1),g.e("rgba( 105, 158, 0, 1)",!0,1,2,1),g.e("rgba( 0, 155, 0, 1)",!0,1,1,1),g.e("rgba( 0, 153, 101, 1)",!0,1,1,2),g.e("rgba( 0, 153, 101, 1)",!1,1,1,3),g.e("rgba( 0, 0, 153, 1)",!1,1,1,4),g.e("rgba( 102, 0, 153, 1)",!1,1,1,5),g.e("rgba( 165, 0, 255, 1)",!1,1,1,8)],arcs:[g.e("rgba( 160, 107, 0, 1)",!0,1,1,0),g.e("rgba( 160, 107, 0, 1)",!0,1,1,1),g.e("rgba( 160, 107, 0, 1)",!0,1,1.5,0),g.e("rgba( 105, 158, 0, 1)",!0,1,2,0),g.e("rgba( 105, 158, 0, 1)",!0,1,2,1),g.e("rgba( 0, 155, 0, 1)",!0,1,3,0),g.e("rgba( 0, 155, 0, 1)",!0,1,3,1),g.e("rgba( 0, 153, 101, 1)",!0,1,4,0),g.e("rgba( 0, 153, 101, 1)",!0,1,4,1),g.e("rgba( 0, 0, 153, 1)",!0,1,5,0),g.e("rgba( 0, 0, 153, 1)",!0,1,5,1)],__collectibleLines:["trendline","levels.0","levels.1","levels.2","levels.3","levels.4","levels.5","fanlines.0","fanlines.1","fanlines.2","fanlines.3","fanlines.4","fanlines.5","fanlines.6","fanlines.7","fanlines.8","fanlines.9","fanlines.10","arcs.0","arcs.1","arcs.2","arcs.3","arcs.4","arcs.5","arcs.6","arcs.7","arcs.8","arcs.9","arcs.10"]},linetoolgannfixed:{clonable:!0,fillBackground:!1,arcsBackground:{fillBackground:!0,transparency:80},reverse:!1,levels:[g.d("rgba( 128, 128, 128, 1)",!0,1),g.d("rgba( 160, 107, 0, 1)",!0,1),g.d("rgba( 105, 158, 0, 1)",!0,1),g.d("rgba( 0, 155, 0, 1)",!0,1),g.d("rgba( 0, 153, 101, 1)",!0,1),g.d("rgba( 128, 128, 128, 1)",!0,1)],fanlines:[g.e("rgba( 165, 0, 255, 1)",!1,1,8,1),g.e("rgba( 165, 0, 0, 1)",!1,1,5,1),g.e("rgba( 128, 128, 128, 1)",!1,1,4,1),g.e("rgba( 160, 107, 0, 1)",!1,1,3,1),g.e("rgba( 105, 158, 0, 1)",!0,1,2,1),g.e("rgba( 0, 155, 0, 1)",!0,1,1,1),g.e("rgba( 0, 153, 101, 1)",!0,1,1,2),g.e("rgba( 0, 153, 101, 1)",!1,1,1,3),g.e("rgba( 0, 0, 153, 1)",!1,1,1,4),g.e("rgba( 102, 0, 153, 1)",!1,1,1,5),g.e("rgba( 165, 0, 255, 1)",!1,1,1,8)],arcs:[g.e("rgba( 160, 107, 0, 1)",!0,1,1,0),g.e("rgba( 160, 107, 0, 1)",!0,1,1,1),g.e("rgba( 160, 107, 0, 1)",!0,1,1.5,0),g.e("rgba( 105, 158, 0, 1)",!0,1,2,0),g.e("rgba( 105, 158, 0, 1)",!0,1,2,1),g.e("rgba( 0, 155, 0, 1)",!0,1,3,0),g.e("rgba( 0, 155, 0, 1)",!0,1,3,1),g.e("rgba( 0, 153, 101, 1)",!0,1,4,0),g.e("rgba( 0, 153, 101, 1)",!0,1,4,1),g.e("rgba( 0, 0, 153, 1)",!0,1,5,0),g.e("rgba( 0, 0, 153, 1)",!0,1,5,1)],__collectibleLines:["trendline","levels.0","levels.1","levels.2","levels.3","levels.4","levels.5","fanlines.0","fanlines.1","fanlines.2","fanlines.3","fanlines.4","fanlines.5","fanlines.6","fanlines.7","fanlines.8","fanlines.9","fanlines.10","arcs.0","arcs.1","arcs.2","arcs.3","arcs.4","arcs.5","arcs.6","arcs.7","arcs.8","arcs.9","arcs.10"]},linetoolgannsquare:{clonable:!0,color:"rgba( 21, 56, 153, 0.8)",linewidth:1,linestyle:CanvasEx.LINESTYLE_SOLID,font:"Verdana",showTopLabels:!0,
showBottomLabels:!0,showLeftLabels:!0,showRightLabels:!0,fillHorzBackground:!0,horzTransparency:80,fillVertBackground:!0,vertTransparency:80,reverse:!1,fans:g.a("rgba( 128, 128, 128, 1)",!1),hlevel1:g.b(0,"rgba( 128, 128, 128, 1)",!0),hlevel2:g.b(.25,"rgba( 160, 107, 0, 1)",!0),hlevel3:g.b(.382,"rgba( 105, 158, 0, 1)",!0),hlevel4:g.b(.5,"rgba( 0, 155, 0, 1)",!0),hlevel5:g.b(.618,"rgba( 0, 153, 101, 1)",!0),hlevel6:g.b(.75,"rgba( 0, 101, 153, 1)",!0),hlevel7:g.b(1,"rgba( 128, 128, 128, 1)",!0),vlevel1:g.b(0,"rgba( 128, 128, 128, 1)",!0),vlevel2:g.b(.25,"rgba( 160, 107, 0, 1)",!0),vlevel3:g.b(.382,"rgba( 105, 158, 0, 1)",!0),vlevel4:g.b(.5,"rgba( 0, 155, 0, 1)",!0),vlevel5:g.b(.618,"rgba( 0, 153, 101, 1)",!0),vlevel6:g.b(.75,"rgba( 0, 101, 153, 1)",!0),vlevel7:g.b(1,"rgba( 128, 128, 128, 1)",!0),__collectibleLines:["fans","hlevel1","hlevel2","hlevel3","hlevel4","hlevel5","hlevel6","hlevel7","vlevel1","vlevel2","vlevel3","vlevel4","vlevel5","vlevel6","vlevel7"]},linetoolfibspeedresistancefan:{clonable:!0,fillBackground:!0,transparency:80,grid:{color:"rgba( 128, 128, 128, 1)",linewidth:1,linestyle:CanvasEx.LINESTYLE_SOLID,visible:!0},linewidth:1,linestyle:CanvasEx.LINESTYLE_SOLID,font:"Verdana",showTopLabels:!0,showBottomLabels:!0,showLeftLabels:!0,showRightLabels:!0,snapTo45Degrees:!0,hlevel1:g.b(0,"rgba( 128, 128, 128, 1)",!0),hlevel2:g.b(.25,"rgba( 160, 107, 0, 1)",!0),hlevel3:g.b(.382,"rgba( 105, 158, 0, 1)",!0),hlevel4:g.b(.5,"rgba( 0, 155, 0, 1)",!0),hlevel5:g.b(.618,"rgba( 0, 153, 101, 1)",!0),hlevel6:g.b(.75,"rgba( 0, 101, 153, 1)",!0),hlevel7:g.b(1,"rgba( 128, 128, 128, 1)",!0),vlevel1:g.b(0,"rgba( 128, 128, 128, 1)",!0),vlevel2:g.b(.25,"rgba( 160, 107, 0, 1)",!0),vlevel3:g.b(.382,"rgba( 105, 158, 0, 1)",!0),vlevel4:g.b(.5,"rgba( 0, 155, 0, 1)",!0),vlevel5:g.b(.618,"rgba( 0, 153, 101, 1)",!0),vlevel6:g.b(.75,"rgba( 0, 101, 153, 1)",!0),vlevel7:g.b(1,"rgba( 128, 128, 128, 1)",!0),__collectibleLines:["trendline","hlevel1","hlevel2","hlevel3","hlevel4","hlevel5","hlevel6","hlevel7","vlevel1","vlevel2","vlevel3","vlevel4","vlevel5","vlevel6","vlevel7"]},linetoolfibretracement:{clonable:!0,showCoeffs:!0,showPrices:!0,font:"Verdana",fillBackground:!0,transparency:80,extendLines:!1,horzLabelsAlign:"left",vertLabelsAlign:"middle",reverse:!1,coeffsAsPercents:!1,trendline:{visible:!0,color:"rgba( 128, 128, 128, 1)",linewidth:1,linestyle:CanvasEx.LINESTYLE_DASHED},levelsStyle:{linewidth:1,linestyle:CanvasEx.LINESTYLE_SOLID},level1:g.b(0,"rgba( 128, 128, 128, 1)",!0),level2:g.b(.236,"rgba( 204, 40, 40, 1)",!0),level3:g.b(.382,"rgba( 149, 204, 40, 1)",!0),level4:g.b(.5,"rgba( 40, 204, 40, 1)",!0),level5:g.b(.618,"rgba( 40, 204, 149, 1)",!0),level6:g.b(.786,"rgba( 40, 149, 204, 1)",!0),level7:g.b(1,"rgba( 128, 128, 128, 1)",!0),level8:g.b(1.618,"rgba( 40, 40, 204, 1)",!0),level9:g.b(2.618,"rgba( 204, 40, 40, 1)",!0),level10:g.b(3.618,"rgba( 149, 40, 204, 1)",!0),level11:g.b(4.236,"rgba( 204, 40, 149, 1)",!0),level12:g.b(1.272,"rgba( 149, 204, 40, 1)",!1),level13:g.b(1.414,"rgba( 204, 40, 40, 1)",!1),
level16:g.b(2,"rgba( 40, 204, 149, 1)",!1),level14:g.b(2.272,"rgba( 149, 204, 40, 1)",!1),level15:g.b(2.414,"rgba( 40, 204, 40, 1)",!1),level17:g.b(3,"rgba( 40, 149, 204, 1)",!1),level18:g.b(3.272,"rgba( 128, 128, 128, 1)",!1),level19:g.b(3.414,"rgba( 40, 40, 204, 1)",!1),level20:g.b(4,"rgba( 204, 40, 40, 1)",!1),level21:g.b(4.272,"rgba( 149, 40, 204, 1)",!1),level22:g.b(4.414,"rgba( 204, 40, 149, 1)",!1),level23:g.b(4.618,"rgba( 149, 204, 40, 1)",!1),level24:g.b(4.764,"rgba( 40, 204, 149, 1)",!1),__collectibleLines:["trendline","level1","level2","level3","level4","level5","level6","level7","level8","level9","level10","level11","level12","level13","level14","level15","level16","level17","level18","level19","level20","level21","level22","level23","level24"]},linetoolfibchannel:{clonable:!0,showCoeffs:!0,showPrices:!0,font:"Verdana",fillBackground:!0,transparency:80,extendLeft:!1,extendRight:!1,horzLabelsAlign:"left",vertLabelsAlign:"middle",coeffsAsPercents:!1,levelsStyle:{linewidth:1,linestyle:CanvasEx.LINESTYLE_SOLID},level1:g.b(0,"rgba( 128, 128, 128, 1)",!0),level2:g.b(.236,"rgba( 204, 40, 40, 1)",!0),level3:g.b(.382,"rgba( 149, 204, 40, 1)",!0),level4:g.b(.5,"rgba( 40, 204, 40, 1)",!0),level5:g.b(.618,"rgba( 40, 204, 149, 1)",!0),level6:g.b(.786,"rgba( 40, 149, 204, 1)",!0),level7:g.b(1,"rgba( 128, 128, 128, 1)",!0),level8:g.b(1.618,"rgba( 40, 40, 204, 1)",!0),level9:g.b(2.618,"rgba( 204, 40, 40, 1)",!0),level10:g.b(3.618,"rgba( 149, 40, 204, 1)",!0),level11:g.b(4.236,"rgba( 204, 40, 149, 1)",!0),level12:g.b(1.272,"rgba( 149, 204, 40, 1)",!1),level13:g.b(1.414,"rgba( 204, 40, 40, 1)",!1),level16:g.b(2,"rgba( 40, 204, 149, 1)",!1),level14:g.b(2.272,"rgba( 149, 204, 40, 1)",!1),level15:g.b(2.414,"rgba( 40, 204, 40, 1)",!1),level17:g.b(3,"rgba( 40, 149, 204, 1)",!1),level18:g.b(3.272,"rgba( 128, 128, 128, 1)",!1),level19:g.b(3.414,"rgba( 40, 40, 204, 1)",!1),level20:g.b(4,"rgba( 204, 40, 40, 1)",!1),level21:g.b(4.272,"rgba( 149, 40, 204, 1)",!1),level22:g.b(4.414,"rgba( 204, 40, 149, 1)",!1),level23:g.b(4.618,"rgba( 149, 204, 40, 1)",!1),level24:g.b(4.764,"rgba( 40, 204, 149, 1)",!1),__collectibleLines:["level1","level2","level3","level4","level5","level6","level7","level8","level9","level10","level11","level12","level13","level14","level15","level16","level17","level18","level19","level20","level21","level22","level23","level24"]},linetoolprojection:{clonable:!0,showCoeffs:!0,font:"Verdana",fillBackground:!0,transparency:80,color1:"rgba( 0, 128, 0, 0.2)",color2:"rgba( 255, 0, 0, 0.2)",linewidth:1,trendline:{visible:!0,color:"rgba( 128, 128, 128, 1)",linestyle:CanvasEx.LINESTYLE_SOLID},level1:g.c(1,"rgba( 128, 128, 128, 1)",!0)},linetool5pointspattern:{clonable:!0,color:"rgba( 204, 40, 149, 1)",textcolor:"rgba( 255, 255, 255, 1)",fillBackground:!0,backgroundColor:"rgba( 204, 40, 149, 0.5)",font:"Verdana",fontsize:12,bold:!1,italic:!1,transparency:50,linewidth:1},linetoolcypherpattern:{clonable:!0,color:"#CC2895",textcolor:"#FFFFFF",fillBackground:!0,backgroundColor:"#CC2895",font:"Verdana",fontsize:12,bold:!1,
italic:!1,transparency:50,linewidth:1},linetooltrianglepattern:{clonable:!0,color:"rgba( 149, 40, 255, 1)",textcolor:"rgba( 255, 255, 255, 1)",fillBackground:!0,backgroundColor:"rgba( 149, 40, 204, 0.5)",font:"Verdana",fontsize:12,bold:!1,italic:!1,transparency:50,linewidth:1},linetoolabcd:{clonable:!0,color:"rgba( 0, 155, 0, 1)",textcolor:"rgba( 255, 255, 255, 1)",font:"Verdana",fontsize:12,bold:!1,italic:!1,linewidth:2},linetoolthreedrivers:{clonable:!0,color:"rgba( 149, 40, 255, 1)",textcolor:"rgba( 255, 255, 255, 1)",fillBackground:!0,backgroundColor:"rgba( 149, 40, 204, 0.5)",font:"Verdana",fontsize:12,bold:!1,italic:!1,transparency:50,linewidth:2},linetoolheadandshoulders:{clonable:!0,color:"rgba( 69, 104, 47, 1)",textcolor:"rgba( 255, 255, 255, 1)",fillBackground:!0,backgroundColor:"rgba( 69, 168, 47, 0.5)",font:"Verdana",fontsize:12,bold:!1,italic:!1,transparency:50,linewidth:2},linetoolfibwedge:{singleChartOnly:!0,clonable:!0,showCoeffs:!0,font:"Verdana",fillBackground:!0,transparency:80,trendline:{visible:!0,color:"rgba( 128, 128, 128, 1)",linewidth:1,linestyle:CanvasEx.LINESTYLE_SOLID},level1:g.c(.236,"rgba( 204, 40, 40, 1)",!0),level2:g.c(.382,"rgba( 149, 204, 40, 1)",!0),level3:g.c(.5,"rgba( 40, 204, 40, 1)",!0),level4:g.c(.618,"rgba( 40, 204, 149, 1)",!0),level5:g.c(.786,"rgba( 40, 149, 204, 1)",!0),level6:g.c(1,"rgba( 128, 128, 128, 1)",!0),level7:g.c(1.618,"rgba( 40, 40, 204, 1)",!1),level8:g.c(2.618,"rgba( 204, 40, 40, 1)",!1),level9:g.c(3.618,"rgba( 149, 40, 204, 1)",!1),level10:g.c(4.236,"rgba( 204, 40, 149, 1)",!1),level11:g.c(4.618,"rgba( 204, 40, 149, 1)",!1),__collectibleLines:["trendline","level1","level2","level3","level4","level5","level6","level7","level8","level9","level10","level11"]},linetoolfibcircles:{clonable:!0,showCoeffs:!0,font:"Verdana",fillBackground:!0,transparency:80,snapTo45Degrees:!0,coeffsAsPercents:!1,trendline:{visible:!0,color:"rgba( 128, 128, 128, 1)",linewidth:1,linestyle:CanvasEx.LINESTYLE_DASHED},level1:g.c(.236,"rgba( 204, 40, 40, 1)",!0),level2:g.c(.382,"rgba( 149, 204, 40, 1)",!0),level3:g.c(.5,"rgba( 40, 204, 40, 1)",!0),level4:g.c(.618,"rgba( 40, 204, 149, 1)",!0),level5:g.c(.786,"rgba( 40, 149, 204, 1)",!0),level6:g.c(1,"rgba( 128, 128, 128, 1)",!0),level7:g.c(1.618,"rgba( 40, 40, 204, 1)",!0),level8:g.c(2.618,"rgba( 204, 40, 40, 1)",!0),level9:g.c(3.618,"rgba( 149, 40, 204, 1)",!0),level10:g.c(4.236,"rgba( 204, 40, 149, 1)",!0),level11:g.c(4.618,"rgba( 204, 40, 149, 1)",!0),__collectibleLines:["trendline","level1","level2","level3","level4","level5","level6","level7","level8","level9","level10","level11"]},linetoolfibspeedresistancearcs:{clonable:!0,showCoeffs:!0,font:"Verdana",fillBackground:!0,transparency:80,fullCircles:!1,trendline:{visible:!0,color:"rgba( 128, 128, 128, 1)",linewidth:1,linestyle:CanvasEx.LINESTYLE_DASHED},level1:g.c(.236,"rgba( 204, 40, 40, 1)",!0),level2:g.c(.382,"rgba( 149, 204, 40, 1)",!0),level3:g.c(.5,"rgba( 40, 204, 40, 1)",!0),level4:g.c(.618,"rgba( 40, 204, 149, 1)",!0),level5:g.c(.786,"rgba( 40, 149, 204, 1)",!0),
level6:g.c(1,"rgba( 128, 128, 128, 1)",!0),level7:g.c(1.618,"rgba( 40, 40, 204, 1)",!0),level8:g.c(2.618,"rgba( 204, 40, 40, 1)",!0),level9:g.c(3.618,"rgba( 149, 40, 204, 1)",!0),level10:g.c(4.236,"rgba( 204, 40, 149, 1)",!0),level11:g.c(4.618,"rgba( 204, 40, 149, 1)",!0),__collectibleLines:["trendline","level1","level2","level3","level4","level5","level6","level7","level8","level9","level10","level11"]},linetooltrendbasedfibextension:{clonable:!0,showCoeffs:!0,showPrices:!0,font:"Verdana",fillBackground:!0,transparency:80,extendLines:!1,horzLabelsAlign:"left",vertLabelsAlign:"middle",reverse:!1,coeffsAsPercents:!1,trendline:{visible:!0,color:"rgba( 128, 128, 128, 1)",linewidth:1,linestyle:CanvasEx.LINESTYLE_DASHED},levelsStyle:{linewidth:1,linestyle:CanvasEx.LINESTYLE_SOLID},level1:g.b(0,"rgba( 128, 128, 128, 1)",!0),level2:g.b(.236,"rgba( 204, 40, 40, 1)",!0),level3:g.b(.382,"rgba( 149, 204, 40, 1)",!0),level4:g.b(.5,"rgba( 40, 204, 40, 1)",!0),level5:g.b(.618,"rgba( 40, 204, 149, 1)",!0),level6:g.b(.786,"rgba( 40, 149, 204, 1)",!0),level7:g.b(1,"rgba( 128, 128, 128, 1)",!0),level8:g.b(1.618,"rgba( 40, 40, 204, 1)",!0),level9:g.b(2.618,"rgba( 204, 40, 40, 1)",!0),level10:g.b(3.618,"rgba( 149, 40, 204, 1)",!0),level11:g.b(4.236,"rgba( 204, 40, 149, 1)",!0),level12:g.b(1.272,"rgba( 149, 204, 40, 1)",!1),level13:g.b(1.414,"rgba( 204, 40, 40, 1)",!1),level16:g.b(2,"rgba( 40, 204, 149, 1)",!1),level14:g.b(2.272,"rgba( 149, 204, 40, 1)",!1),level15:g.b(2.414,"rgba( 40, 204, 40, 1)",!1),level17:g.b(3,"rgba( 40, 149, 204, 1)",!1),level18:g.b(3.272,"rgba( 128, 128, 128, 1)",!1),level19:g.b(3.414,"rgba( 40, 40, 204, 1)",!1),level20:g.b(4,"rgba( 204, 40, 40, 1)",!1),level21:g.b(4.272,"rgba( 149, 40, 204, 1)",!1),level22:g.b(4.414,"rgba( 204, 40, 149, 1)",!1),level23:g.b(4.618,"rgba( 149, 204, 40, 1)",!1),level24:g.b(4.764,"rgba( 40, 204, 149, 1)",!1),__collectibleLines:["trendline","level1","level2","level3","level4","level5","level6","level7","level8","level9","level10","level11","level12","level13","level14","level15","level16","level17","level18","level19","level20","level21","level22","level23","level24"]},linetooltrendbasedfibtime:{clonable:!0,showCoeffs:!0,font:"Verdana",fillBackground:!0,transparency:80,horzLabelsAlign:"right",vertLabelsAlign:"bottom",trendline:{visible:!0,color:"rgba( 128, 128, 128, 1)",linewidth:1,linestyle:CanvasEx.LINESTYLE_DASHED},level1:g.c(0,"rgba( 128, 128, 128, 1)",!0),level2:g.c(.382,"rgba( 204, 40, 40, 1)",!0),level3:g.c(.5,"rgba( 149, 204, 40, 1)",!1),level4:g.c(.618,"rgba( 40, 204, 40, 1)",!0),level5:g.c(1,"rgba( 40, 204, 149, 1)",!0),level6:g.c(1.382,"rgba( 40, 149, 204, 1)",!0),level7:g.c(1.618,"rgba( 128, 128, 128, 1)",!0),level8:g.c(2,"rgba( 40, 40, 204, 1)",!0),level9:g.c(2.382,"rgba( 204, 40, 40, 1)",!0),level10:g.c(2.618,"rgba( 149, 40, 204, 1)",!0),level11:g.c(3,"rgba( 204, 40, 149, 1)",!0),__collectibleLines:["trendline","level1","level2","level3","level4","level5","level6","level7","level8","level9","level10","level11"]},linetoolschiffpitchfork:{clonable:!0,fillBackground:!0,
transparency:80,style:u.Schiff,median:{visible:!0,color:"rgba( 165, 0, 0, 1)",linewidth:1,linestyle:CanvasEx.LINESTYLE_SOLID},level0:g.c(.25,"rgba( 160, 107, 0, 1)",!1),level1:g.c(.382,"rgba( 105, 158, 0, 1)",!1),level2:g.c(.5,"rgba( 0, 155, 0, 1)",!0),level3:g.c(.618,"rgba( 0, 153, 101, 1)",!1),level4:g.c(.75,"rgba( 0, 101, 153, 1)",!1),level5:g.c(1,"rgba( 0, 0, 153, 1)",!0),level6:g.c(1.5,"rgba( 102, 0, 153, 1)",!1),level7:g.c(1.75,"rgba( 153, 0, 102, 1)",!1),level8:g.c(2,"rgba( 165, 0, 0, 1)",!1),__collectibleLines:["median","level0","level1","level2","level3","level4","level5","level6","level7","level8"]},linetoolschiffpitchfork2:{clonable:!0,fillBackground:!0,transparency:80,style:u.Schiff2,median:{visible:!0,color:"rgba( 165, 0, 0, 1)",linewidth:1,linestyle:CanvasEx.LINESTYLE_SOLID},level0:g.c(.25,"rgba( 160, 107, 0, 1)",!1),level1:g.c(.382,"rgba( 105, 158, 0, 1)",!1),level2:g.c(.5,"rgba( 0, 155, 0, 1)",!0),level3:g.c(.618,"rgba( 0, 153, 101, 1)",!1),level4:g.c(.75,"rgba( 0, 101, 153, 1)",!1),level5:g.c(1,"rgba( 0, 0, 153, 1)",!0),level6:g.c(1.5,"rgba( 102, 0, 153, 1)",!1),level7:g.c(1.75,"rgba( 153, 0, 102, 1)",!1),level8:g.c(2,"rgba( 165, 0, 0, 1)",!1),__collectibleLines:["median","level0","level1","level2","level3","level4","level5","level6","level7","level8"]},linetoolinsidepitchfork:{clonable:!0,fillBackground:!0,transparency:80,style:u.Inside,median:{visible:!0,color:"rgba( 165, 0, 0, 1)",linewidth:1,linestyle:CanvasEx.LINESTYLE_SOLID},level0:g.c(.25,"rgba( 160, 107, 0, 1)",!1),level1:g.c(.382,"rgba( 105, 158, 0, 1)",!1),level2:g.c(.5,"rgba( 0, 155, 0, 1)",!0),level3:g.c(.618,"rgba( 0, 153, 101, 1)",!1),level4:g.c(.75,"rgba( 0, 101, 153, 1)",!1),level5:g.c(1,"rgba( 0, 0, 153, 1)",!0),level6:g.c(1.5,"rgba( 102, 0, 153, 1)",!1),level7:g.c(1.75,"rgba( 153, 0, 102, 1)",!1),level8:g.c(2,"rgba( 165, 0, 0, 1)",!1),__collectibleLines:["median","level0","level1","level2","level3","level4","level5","level6","level7","level8"]},linetool:{frozen:!1,visible:!0},linetoolvisibilities:{intervalsVisibilities:{seconds:!0,secondsFrom:1,secondsTo:59,minutes:!0,minutesFrom:1,minutesTo:59,hours:!0,hoursFrom:1,hoursTo:24,days:!0,daysFrom:1,daysTo:366,weeks:!0,months:!0,ranges:!0}}},n(TradingView.defaultProperties.chartproperties),r()}for(void 0===TradingView.defaultProperties["study_MA@tv-basicstudies"]&&(TradingView.defaultProperties["study_MA@tv-basicstudies"]={description:"Moving Average",shortDescription:"MA",inputs:{length:9,source:"close"},styles:{MovAvg:{visible:!0,color:"rgba( 4, 150, 255, 1)",linestyle:CanvasEx.LINESTYLE_SOLID,linewidth:1,plottype:p.Line,histogramBase:0,title:"MA"}}}),void 0===TradingView.defaultProperties["study_PivotPointsHighLow@tv-basicstudies"]&&(TradingView.defaultProperties["study_PivotPointsHighLow@tv-basicstudies"]={font:"Arial",fontsize:10,borderColor:"rgba( 83, 143, 31, 1)",backColor:"rgba( 240, 255, 204, 1)",textColor:"rgba( 0, 0, 0, 1)"}),void 0===TradingView.defaultProperties["study_PivotPointsStandard@tv-basicstudies"]&&(i="rgba( 212, 121, 40, 1)",o=!0,s=1,
TradingView.defaultProperties["study_PivotPointsStandard@tv-basicstudies"]={_hardCodedDefaultsVersion:1,font:"Arial",fontsize:11,levelsStyle:{showLabels:!0,visibility:{P:o,"S1/R1":o,"S2/R2":o,"S3/R3":o,"S4/R4":o,"S5/R5":o},colors:{P:i,"S1/R1":i,"S2/R2":i,"S3/R3":i,"S4/R4":i,"S5/R5":i},widths:{P:s,"S1/R1":s,"S2/R2":s,"S3/R3":s,"S4/R4":s,"S5/R5":s}}}),void 0===TradingView.defaultProperties["study_ZigZag@tv-basicstudies"]&&(TradingView.defaultProperties["study_ZigZag@tv-basicstudies"]={color:"rgba( 86, 135, 29, 1)",linewidth:2}),void 0===TradingView.defaultProperties["study_ElliottWave@tv-basicstudies"]&&(TradingView.defaultProperties["study_ElliottWave@tv-basicstudies"]={inputs:{},level0:g.a("rgba( 255, 0, 0, 1)",!1),level1:g.a("rgba( 0, 128, 0, 1)",!1),level2:g.a("rgba( 0, 0, 255, 1)",!1),level3:g.a("rgba( 255, 0, 255, 1)",!1),level4:g.a("rgba( 0, 128, 255, 1)",!0),level5:g.a("rgba( 255, 0, 0, 1)",!0),level6:g.a("rgba( 0, 128, 0, 1)",!0),level7:g.a("rgba( 0, 0, 255, 1)",!0),level8:g.a("rgba( 255, 0, 255, 1)",!0)}),void 0===TradingView.defaultProperties["study_LinearRegression@tv-basicstudies"]&&(TradingView.defaultProperties["study_LinearRegression@tv-basicstudies"]={styles:{upLine:{visible:!0,color:"rgba( 0, 0, 255, 0.3)",linestyle:CanvasEx.LINESTYLE_SOLID,linewidth:1},downLine:{visible:!0,color:"rgba( 0, 0, 255, 0.3)",linestyle:CanvasEx.LINESTYLE_SOLID,linewidth:1},baseLine:{visible:!0,color:"rgba( 255, 0, 0, 0.3)",linestyle:CanvasEx.LINESTYLE_SOLID,linewidth:1},extendLines:!0,showPearsons:!0,backgroundColor:"rgba( 153, 21, 21, 0.3)",transparency:70}}),void 0===TradingView.defaultProperties["study_RegressionTrend@tv-basicstudies"]&&(TradingView.defaultProperties["study_RegressionTrend@tv-basicstudies"]={linewidth:1,linestyle:CanvasEx.LINESTYLE_SOLID,styles:{upLine:{visible:!0,color:"rgba( 0, 0, 255, 0.3)",linestyle:CanvasEx.LINESTYLE_SOLID,linewidth:1},downLine:{visible:!0,color:"rgba( 0, 0, 255, 0.3)",linestyle:CanvasEx.LINESTYLE_SOLID,linewidth:1},baseLine:{visible:!0,color:"rgba( 255, 0, 0, 0.3)",linestyle:CanvasEx.LINESTYLE_SOLID,linewidth:1},extendLines:!1,showPearsons:!0,transparency:70}}),void 0===TradingView.defaultProperties["study_Compare@tv-basicstudies"]&&(TradingView.defaultProperties["study_Compare@tv-basicstudies"]={minTick:"default"}),void 0===TradingView.defaultProperties["study_Overlay@tv-basicstudies"]&&(a="study_Overlay@tv-basicstudies",TradingView.defaultProperties[a]={style:h.STYLE_BARS,showPriceLine:!1,minTick:"default",candleStyle:{upColor:"rgba( 107, 165, 131, 1)",downColor:"rgba( 215, 84, 66, 1)",drawWick:!0,drawBorder:!0,borderColor:"rgba( 55, 134, 88, 1)",borderUpColor:"rgba( 34, 84, 55, 1)",borderDownColor:"rgba( 91, 26, 19, 1)",wickColor:"rgba( 115, 115, 117, 1)",wickUpColor:"rgba( 115, 115, 117, 1)",wickDownColor:"rgba( 115, 115, 117, 1)",barColorsOnPrevClose:!1},hollowCandleStyle:{upColor:"rgba( 107, 165, 131, 1)",downColor:"rgba( 215, 84, 66, 1)",drawWick:!0,drawBorder:!0,borderColor:"rgba( 55, 134, 88, 1)",borderUpColor:"rgba( 34, 84, 55, 1)",borderDownColor:"rgba( 91, 26, 19, 1)",
wickColor:"rgba( 115, 115, 117, 1)",wickUpColor:"rgba( 115, 115, 117, 1)",wickDownColor:"rgba( 115, 115, 117, 1)",barColorsOnPrevClose:!1},barStyle:{upColor:"rgba( 107, 165, 131, 1)",downColor:"rgba( 215, 84, 66, 1)",barColorsOnPrevClose:!1,dontDrawOpen:!1},lineStyle:{color:"rgba( 3, 3, 247, 1)",linestyle:CanvasEx.LINESTYLE_SOLID,linewidth:1,priceSource:"close",styleType:h.STYLE_LINE_TYPE_SIMPLE},areaStyle:{color1:"rgba( 96, 96, 144, 0.5)",color2:"rgba( 1, 246, 245, 0.5)",linecolor:"rgba( 0, 148, 255, 1)",linestyle:CanvasEx.LINESTYLE_SOLID,linewidth:1,priceSource:"close",transparency:50},baselineStyle:{baselineColor:"rgba( 117, 134, 150, 1)",topFillColor1:"rgba( 83, 185, 135, 0.1)",topFillColor2:"rgba( 83, 185, 135, 0.1)",bottomFillColor1:"rgba( 235, 77, 92, 0.1)",bottomFillColor2:"rgba( 235, 77, 92, 0.1)",topLineColor:"rgba( 83, 185, 135, 1)",bottomLineColor:"rgba( 235, 77, 92, 1)",topLineWidth:1,bottomLineWidth:1,priceSource:"close",transparency:50,baseLevelPercentage:50},styles:{open:{visible:!0,color:"rgba( 255, 0, 0, 1)",linestyle:CanvasEx.LINESTYLE_SOLID,linewidth:1,plottype:p.Line,histogramBase:0},high:{visible:!0,color:"rgba( 255, 0, 0, 1)",linestyle:CanvasEx.LINESTYLE_SOLID,linewidth:1,plottype:p.Line,histogramBase:0},low:{visible:!0,color:"rgba( 255, 0, 0, 1)",linestyle:CanvasEx.LINESTYLE_SOLID,linewidth:1,plottype:p.Line,histogramBase:0},close:{visible:!0,color:"rgba( 255, 0, 0, 1)",linestyle:CanvasEx.LINESTYLE_SOLID,linewidth:1,plottype:p.Line,histogramBase:0}}}),l=e.split("."),c=TradingView.defaultProperties,m=0;m<l.length;m++)c&&(c=c[l[m]]);return c?TradingView.clone(c):{}};s.create=function(e,t){if(t){var i=g(e);TradingView.defaultProperties[e]=$.extend(t,i)}},s.remove=function(e){TradingView.defaultProperties[e]=void 0},TradingView.saveDefaults=function(e,t){TVSettings.setJSON(e,t)},TradingView.factoryDefaults=g,window.applyDefaultOverridesToLinetools=r,window.applyDefaultsOverrides=n,window.applyPropertiesOverrides=o,window.defaults=s,t.applyDefaultOverridesToLinetools=r,t.applyDefaultsOverrides=n,t.applyPropertiesOverrides=o,t.defaults=s,t.factoryDefaults=g,t.saveDefaults=TradingView.saveDefaults},function(e,t,i){"use strict";function o(e){return void 0===e&&(e="full"),c[e]||n(e,new l.a(e)),c[e]}function n(e,t){void 0===e&&(e="full"),c[e]=t}function r(e){return void 0===e&&(e="full"),c[e]}function s(){var e,t;for(e in c)c.hasOwnProperty(e)&&(t=c[e],void 0!==t&&t.destroy(),delete c[e])}var a,l,c;Object.defineProperty(t,"__esModule",{value:!0}),t.getQuoteSessionInstance=o,t.setQuoteSessionInstance=n,t.getQuoteSessionNoEnsure=r,t.destroyQuoteSessions=s,a=i(611),l=i.n(a),c={}},function(e,t,i){"use strict";function o(e){this.items=e.items,this._simpleMode=e.simpleMode,this.barSpacing=e.barSpacing,this.lineColor=e.lineColor,this.lineWidth=e.lineWidth,this.lineStyle=e.lineStyle,this.withMarkers=e.withMarkers,this.withSteps=e.withSteps,this.hittest=e.hittest,this.ignorePaletteLineWidth=e.ignorePaletteLineWidth,this.forceLineColor=!!e.forceLineColor}
var n=i(6).Point,r=i(31).distanceToSegment,s=i(29),a=i(9).HitTestResult;o.prototype.draw=function(e){e.lineCap="square",e.lineJoin=this.withMarkers?"round":"miter",e.strokeStyle=this.lineColor,e.fillStyle=this.lineColor,e.lineWidth=this.lineWidth,e.lineStyle=this.lineStyle,s.setValidLineStyle(e,this.lineStyle),this._simpleMode?this._drawSimpleMode(e):this._drawLines(e)},o.prototype._drawSimpleMode=function(e){var t,i,o,n;if(e.beginPath(),this.walkLine(e,this.items),e.stroke(),this.withMarkers){for(t=this.lineWidth+2,i=2*Math.PI,e.beginPath(),n=this.items.length;n--;)(o=this.items[n])&&(e.moveTo(o.x,o.y),e.arc(o.x,o.y,t,0,i));e.fill()}},o.prototype.walkLine=function(e,t,i,o){var n,r,a,l,c,h,u,d,p,_,f;if(t){for(n=.25*this.barSpacing,u=s.coordinateIsValid,d=0,p=t.length;d<p;d++)if(_=t[d],u(_.y)){a=_,r=d;break}if(void 0!==r&&a)for(f=this.withSteps&&this.lineWidth&&this.lineWidth%2==0?.5:0,d=r,p=t.length;d<p;d++){if(c=t[d],h=t[d+1]||{},u(c.y))if(l&&u(l.y))this.withSteps&&e.lineTo(l.x+f,c.y+f),e.lineTo(c.x+f,c.y+f),i&&!u(h.y)&&e.lineTo(c.x+f,o);else if(h&&u(h.y))i?(d!==r&&e.lineTo(c.x+f,o),e.lineTo(c.x+f,c.y+f)):e.moveTo(c.x+f,c.y+f);else if(i){if(0===d)continue;d!==r&&e.lineTo(c.x-n+f,o),e.lineTo(c.x-n+f,c.y+f),e.lineTo(c.x+n+f,c.y+f),e.lineTo(c.x+n+f,o)}else e.moveTo(c.x-n+f,c.y+f),e.lineTo(c.x+n+f,c.y+f);l=c}}},o.prototype._drawLines=function(e){function t(t,i,o){a(i.y)&&(a(t.y)?e.lineTo(i.x,i.y):o&&a(o.y)?e.moveTo(i.x,i.y):(e.moveTo(i.x-r,i.y),e.lineTo(i.x+r,i.y)))}var i,o,n,r,a,l,c,h,u,d,p,_,f,m;if(this.items.length){for(r=.25*this.barSpacing,a=s.coordinateIsValid,e.beginPath(),l=this.items[0],l&&e.moveTo(l.x,l.y),c=e.strokeStyle,h=e.lineWidth,u=e.lineStyle,d=1;d<this.items.length;++d)i=this.items[d-1],o=this.items[d],n=this.items[d+1],o.style&&!this.forceLineColor?(p=o.style.color,_=o.style.width,f=o.style.style):(p=this.lineColor,_=this.lineWidth,f=this.lineStyle),this.ignorePaletteLineWidth&&(_=this.lineWidth),m=p!==c||_!==h||f!==u,m&&(c=p,h=_,u=f,e.stroke(),e.beginPath(),e.strokeStyle=p,e.lineWidth=_,s.setValidLineStyle(e,f),e.moveTo(i.x,i.y)),t(i,o,n);e.stroke()}},o.prototype.hitTest=function(e){for(var t,i,o,l,c,h,u,d,p=s.selectionTolerance(this.lineWidth),_=0,f=this.items.length-1;f-_>2;)h=Math.round((f+_)/2),u=this.items[h],u.x<=e.x?_=h:f=h;for(_=Math.max(1,_-1),f=Math.min(this.items.length-1,f+1),d=_;d<=f;++d)if(t=this.items[d-1],i=this.items[d],o=t.x,l=i.x,c=r(new n(o,t.y),new n(l,i.y),new n(e.x,e.y)),c.distance<=p)return this.hittest?this.hittest:new a(a.REGULAR);return null},t.PaneRendererLine=TradingView.PaneRendererLine=o},function(e,t,i){"use strict";var o,n;Object.defineProperty(t,"__esModule",{value:!0}),i.d(t,"DateFormatter",function(){return n}),o=i(19),n=function(){function e(){}return e.prototype.format=function(e){
return o.customFormatters&&o.customFormatters.dateFormatter?o.customFormatters.dateFormatter.format(e):Object(o.numberToStringWithLeadingZero)(e.getUTCFullYear(),4)+"-"+Object(o.numberToStringWithLeadingZero)(e.getUTCMonth()+1,2)+"-"+Object(o.numberToStringWithLeadingZero)(e.getUTCDate(),2)},e.prototype.formatLocal=function(e){return o.customFormatters.dateFormatter?o.customFormatters.dateFormatter.formatLocal?o.customFormatters.dateFormatter.formatLocal(e):o.customFormatters.dateFormatter.format(e):Object(o.numberToStringWithLeadingZero)(e.getFullYear(),4)+"-"+Object(o.numberToStringWithLeadingZero)(e.getMonth()+1,2)+"-"+Object(o.numberToStringWithLeadingZero)(e.getDate(),2)},e}()},,,,,,,,,,,,,,,,,,,,,,function(e,t,i){"use strict";var o,n=function(){try{this.isAvailable=!0,this.localStorage=window.localStorage,this.localStorage.setItem("tvlocalstorage.available","true")}catch(e){delete this.isAvailable,delete this.localStorage}this._updateLength()};n.prototype.length=0,n.prototype.isAvailable=!1,n.prototype.localStorage={"tvlocalstorage.available":"false"},n.prototype._updateLength=function(){var e,t;if(this.isAvailable)this.length=this.localStorage.length;else{e=0;for(t in this.localStorage)this.localStorage.hasOwnProperty(t)&&e++;this.length=e}},n.prototype.key=function(e){return this.isAvailable?this.localStorage.key(e):Object.keys(this.localStorage)[e]},n.prototype.getItem=function(e){return this.isAvailable?this.localStorage.getItem(e):this.localStorage[e]},n.prototype.setItem=function(e,t){this.isAvailable?this.localStorage.setItem(e,t):this.localStorage[e]=t,this._updateLength()},n.prototype.removeItem=function(e){this.isAvailable?this.localStorage.removeItem(e):delete this.localStorage[e],this._updateLength()},n.prototype.clear=function(){this.isAvailable?this.localStorage.clear():this.localStorage={},this._updateLength()},o=function(e){this.storage=e},o.prototype.getItem=function(e){return Promise.resolve(this.storage.getItem(e))},o.prototype.setItem=function(e,t){return Promise.resolve(this.storage.setItem(e,t))},window.TVLocalStorage=new n,window.TVLocalStorageAsync=new o(window.TVLocalStorage),e.exports={TVLocalStorage:window.TVLocalStorage,TVLocalStorageAsync:window.TVLocalStorageAsync}},function(e,t,i){(function(e){TradingView.cleanButAmpersand=function(e,t){var i=t?["&amp;"]:["&"];return TradingView.clean(e,t,i)},TradingView.strip_tags=function(e){return e&&e.replace?e.replace(/(<([^>]+)>)/gi,""):e},TradingView.encodeSpread=function(e){return encodeURIComponent(e)},TradingView.clean=function(e,t,i){var o,n,r,s=[["&","&amp;"],["<","&lt;"],[">","&gt;"],['"',"&quot;"],["'","&#039;"],["'","&#39;"]],a=e;if(!e||!e.replace)return a;for(o=0;o<s.length;o++)n=s[o][0],r=s[o][1],i&&i.indexOf&&-1!==i.indexOf(t?r:n)||(a=t?a.replace(RegExp(r,"g"),n):a.replace(RegExp(n,"g"),r));return a},void 0!==e&&e&&e.exports&&(e.exports={clean:TradingView.clean,cleanButAmpersand:TradingView.cleanButAmpersand,stripTags:TradingView.strip_tags})}).call(t,i(47)(e))},function(e,t,i){"use strict";function o(e,t){var i,o
;return i=null==t?document.documentElement:9===t.nodeType?t.documentElement:t,r&&(o=r.get(i)),o||(o=i.ownerDocument.createRange(),o.selectNodeContents(i),r&&r.set(i,o)),o.createContextualFragment(e)}function n(e,t){var i,n,r,s=o(e,t);if("firstElementChild"in s)i=s.firstElementChild;else for(i=null,n=0;n<s.childNodes.length;n++)if(r=s.childNodes[n],1===r.nodeType){i=r;break}return null!==i&&s.removeChild(i),i}t.a=o,t.b=n;var r;"WeakMap"in window&&(r=new WeakMap)},function(e,t,i){"use strict";var o,n,r,s,a,l,c;Object.defineProperty(t,"__esModule",{value:!0}),i.d(t,"MINUTE_SPAN",function(){return o}),i.d(t,"HOUR_SPAN",function(){return n}),i.d(t,"DAY_SPAN",function(){return r}),i.d(t,"WEEK_SPAN",function(){return s}),i.d(t,"MONTH_SPAN",function(){return a}),i.d(t,"YEAR_SPAN",function(){return l}),i.d(t,"DEFAULT_BAR_SPACING",function(){return c}),o=20,n=30,r=40,s=50,a=60,l=70,c=6},function(e,t,i){"use strict";var o,n;i.d(t,"a",function(){return n}),o=3e3,n=function(){function e(){var e=this;this._cache=null,this._tryLoad=function(t){e._startLoading().then(t,function(){return setTimeout(function(){return e._tryLoad(t)},o)})}}return e.prototype.load=function(){return this._cache||(this._cache=new Promise(this._tryLoad)),this._cache},e}()},function(e,t,i){"use strict";function o(e,t){var i,o=Promise.reject();for(i=0;i<t;++i)o=o.catch(e);return o}Object.defineProperty(t,"__esModule",{value:!0}),t.retries=o},function(e,t,i){"use strict";function o(e){var t=e.split(":");return{name:t[0],type:2===t.length?t[1]:null}}function n(e,t,i,n){var r,s,a,l,c,p,_,f,m,g,y,v,b,S,w,T=i.split(".");if(0!==T.length&&0!==T[0].length){if(r=o(T[0]),s=r.name,a=r.type,l=null!==a,c=!l||"plot"===a,p=!l||"band"===a,_=!l||"area"===a,f=!l||"input"===a,m=c?d.getPlotIdByTitle(e,s):null,g=p?d.getBandIndexByName(e,s):null,y=_?d.getFilledAreaIdByTitle(e,s):null,v=f?d.getInputByName(e,s):null,b=t.hasOwnProperty(s),(null!==m?1:0)+(null!==g?1:0)+(null!==y?1:0)+(null!==v?1:0)+(b?1:0)>1)return void h.logWarn("Study '"+e.description+"' has ambiguous identifier '"+s+"'");if(S=T[1],null!==m){if(1===T.length)return void h.logWarn("Path of sub-property of '"+s+"' plot for study '"+e.description+"' must be not empty");w=T.slice(1),u.applyPlotProperty(e,t,m,w,n)}else if(null!==v)u.applyInputValue(t,v,n);else if(null!==g){if(void 0===S)return void h.logWarn("Property name of '"+s+"' band for study '"+e.description+"' must be set");u.applyBandProperty(t,g,S,n)}else if(null!==y){if(void 0===S)return void h.logWarn("Property name of '"+s+"' area for study '"+e.description+"' must be set");u.applyFilledAreaProperty(t,y,S,n)}else b?u.setRootProperty(t,T,n):h.logWarn("Study '"+e.description+"' has no plot or input '"+s+"'")}}function r(e,t){var i,o=e.properties(),r=o.state();for(i in t)t.hasOwnProperty(i)&&n(e.metaInfo(),r,i,t[i]);o.mergeAndFire(r)}function s(e,t,i){var o,r,s,a,l;for(o in e)e.hasOwnProperty(o)&&-1!==(r=o.indexOf("."))&&(s=o.substr(0,r),a=d.getMetaInfoByDescription(t,s),null!==a?(l=i(a.id),
null!==l?n(a,l,o.substr(r+1),e[o]):h.logWarn("Cannot apply overrides for study "+s)):h.logWarn("There is no such study "+s))}var a,l,c,h,u,d;Object.defineProperty(t,"__esModule",{value:!0}),t.applyOverridesToStudy=r,t.applyOverridesToStudyDefaults=s,a=i(7),i.n(a),l=i(107),c=i(5),h=Object(c.getLogger)("Chart.Model.StudyPropertiesOverrider"),function(e){function t(e,t,i){var o,n,r,s;if(void 0===e.plots)return null;for(o=0,n=e.plots;o<n.length;o++)if(r=n[o],Object(l.isColorerPlot)(r)&&void 0!==t.palettes&&(s=t.palettes[r.palette],r.target===i&&void 0!==s))return s;return null}function i(e,t,i,o,n){if(void 0===e.styles)return void h.logWarn("Study does not have styles");if(null===t&&!isNaN(o)&&o>0)return void h.logWarn("Study plot does not have color #"+o);if(0===o||isNaN(o)){Object(a.ensureDefined)(e.styles[i]).color=n+"",o=0}null!==t&&(Object(a.ensureDefined)(t.colors[o]).color=n+"")}function o(e,o,n,r,s){var a,l,c,d,p;if(void 0===o.styles)return void h.logWarn("Study does not have styles");if("color"===(a=r[0]))return l=t(e,o,n),c=r.length>1?parseInt(r[1]):NaN,void i(o,l,n,c,s);if(void 0===(d=o.styles[n])||!d.hasOwnProperty(a))return void h.logWarn("Study plot does not have property '"+a+"'");if("plottype"===a){if(void 0===(p=u[s+""]))return void h.logWarn("Unsupported plot type for plot: "+s);s=p}d[a]=s}function n(e,t,i,o){var n,r;if(void 0===e.bands)return void h.logWarn("Study does not have bands");if(void 0===(n=e.bands[t])||!n.hasOwnProperty(i))return void h.logWarn("Study band does not have property '"+i+"'");if("plottype"===i){if(void 0===(r=u[o+""]))return void h.logWarn("Unsupported plot type for band: "+o);o=r}n[i]=o}function r(e,t,i,o){if(void 0===e.filledAreasStyle)return void h.logWarn("Study does not have areas");var n=e.filledAreasStyle[t];if(void 0===n||!n.hasOwnProperty(i))return void h.logWarn("Study area does not have property '"+i+"'");n[i]=o}function s(e,t,i){if(void 0===e.inputs||!e.inputs.hasOwnProperty(t))return void h.logWarn("Study does not have input '"+t+"'");e.inputs[t]=i}function c(e,t,i){var o,n,r,s,a;if(0!==t.length){for(o=e,n=0,r=t.slice(0,-1);n<r.length&&(s=r[n],null!=o&&e.hasOwnProperty(s));n++)o=e[s];if(a=t[t.length-1],null==o||!o.hasOwnProperty(a))return void h.logWarn("Study does not have property "+t.join("."));o[a]=i}}var u={line:l.PlotType.Line,histogram:l.PlotType.Histogram,cross:l.PlotType.Cross,area:l.PlotType.Area,columns:l.PlotType.Columns,circles:l.PlotType.Circles,line_with_breaks:l.PlotType.LineWithBreaks,area_with_breaks:l.PlotType.AreaWithBreaks};e.applyPlotProperty=o,e.applyBandProperty=n,e.applyFilledAreaProperty=r,e.applyInputValue=s,e.setRootProperty=c}(u||(u={})),function(e){function t(e,t){var i,o,n;if(void 0===e.inputs)return null;for(t=t.toLowerCase(),i=0,o=e.inputs;i<o.length;i++)if(n=o[i],n.name.toLowerCase()===t)return n.id;return null}function i(e,t){var i,o,n;if(void 0===e.styles)return null;t=t.toLowerCase();for(i in e.styles)if(o=e.styles[i],n=void 0!==o&&void 0!==o.title?o.title:i,n.toLowerCase()===t)return i;return null}function o(e,t){var i,o,n
;if(void 0===e.filledAreas)return null;for(t=t.toLowerCase(),i=0,o=e.filledAreas;i<o.length;i++)if(n=o[i],n.title.toLowerCase()===t)return n.id;return null}function n(e,t){if(void 0===e.bands)return null;t=t.toLowerCase();for(var i=0;i<e.bands.length;++i)if(e.bands[i].name.toLowerCase()===t)return i;return null}function r(e,t){var i,o,n;for(t=t.toLowerCase(),i=0,o=e;i<o.length;i++)if(n=o[i],n.description.toLowerCase()===t||n.shortDescription.toLowerCase()===t)return n;return null}e.getInputByName=t,e.getPlotIdByTitle=i,e.getFilledAreaIdByTitle=o,e.getBandIndexByName=n,e.getMetaInfoByDescription=r}(d||(d={}))},function(e,t,i){"use strict";var o,n;Object.defineProperty(t,"__esModule",{value:!0}),i.d(t,"Version",function(){return n}),o=i(7),i.n(o),n=function(){function e(e,t){this._major=e,this._minor=t}return e.prototype.major=function(){return this._major},e.prototype.minor=function(){return this._minor},e.prototype.isZero=function(){return 0===this._major&&0===this._minor},e.prototype.toString=function(){return this._major+"."+this._minor},e.prototype.compareTo=function(e){return this._major<e._major?-1:this._major>e._major?1:this._minor<e._minor?-1:this._minor>e._minor?1:0},e.prototype.isLess=function(e){return this.compareTo(e)<0},e.prototype.isLessOrEqual=function(e){return this.compareTo(e)<=0},e.prototype.isEqual=function(e){return 0===this.compareTo(e)},e.prototype.isGreater=function(e){return this.compareTo(e)>0},e.prototype.isGreaterOrEqual=function(e){return this.compareTo(e)>=0},e.parse=function(t){var i,n,r;if(t instanceof e)return new e(t.major(),t.minor());if("number"==typeof t)return Object(o.assert)(Math.floor(t)===t,"Version should not be a float number"),new e(t,0);if("string"==typeof t){if(i=t.split("."),1===i.length)return n=parseInt(i[0],10),Object(o.assert)(!isNaN(n),"Bad version string: "+t),new e(n,0);if(2===i.length)return n=parseInt(i[0],10),Object(o.assert)(!isNaN(n),"Bad version string: "+t),r=parseInt(i[1],10),Object(o.assert)(!isNaN(r),"Bad version string: "+t),new e(n,r);throw Error("Bad version string (one dot expected): "+t)}throw Error("Bad version: "+t)},e.ZERO=new e(0,0),e}()},function(e,t,i){"use strict";var o,n,r,s,a;Object.defineProperty(t,"__esModule",{value:!0}),i.d(t,"ResizerDetacherState",function(){return a}),o=i(7),i.n(o),n=i(15),r=i.n(n),s=i(13),i.n(s),a=function(){function e(e){var t=this;this._alive=new r.a,this._body=new r.a,this._width=new r.a,this._height=new r.a,this._fullscreen=new r.a,this._detachable=new r.a,this._fullscreenable=new r.a,this._visible=new r.a,this._availWidth=new r.a,this._availHeight=new r.a,this._owner=new r.a,this._ownersStack=[],this.owner=this._owner.readonly(),this._bridge={alive:this._alive.readonly(),body:this._body.readonly(),width:this._width.readonly(),height:this._height.readonly(),fullscreen:this._fullscreen.readonly(),detachable:this._detachable.readonly(),fullscreenable:this._fullscreenable.readonly(),visible:this._visible.readonly(),availWidth:this._availWidth.readonly(),availHeight:this._availHeight.readonly(),remove:function(){
var e=t._owner.value();e&&e.remove&&e.remove()},negotiateWidth:function(e){var i=t._owner.value();i&&i.negotiateWidth&&i.negotiateWidth(e)},negotiateHeight:function(e){var i=t._owner.value();i&&i.negotiateHeight&&i.negotiateHeight(e)},requestFullscreen:function(){var e=t._owner.value();e&&e.requestFullscreen&&e.requestFullscreen()},exitFullscreen:function(){var e=t._owner.value();e&&e.exitFullscreen&&e.exitFullscreen()},detach:function(e){var i=t._owner.value();i&&i.detach&&i.detach(e)},attach:function(){var e=t._owner.value();e&&e.attach&&e.attach()}},e&&this.pushOwner(e)}return e.prototype.bridge=function(){return this._bridge},e.prototype.pushOwner=function(e){var t,i,o,n;if(e.alive.value()){for(t=0,i=this._ownersStack;t<i.length;t++)o=i[t],this._unsubscribeOwner(o);n={owner:e},this._ownersStack.push(n),this._subscribeOwner(n)}},e.prototype._subscribeOwner=function(e){var t,i,o=this,n=e.owner;e.deathWatcher||(this._alive.setValue(!0),e.deathWatcher=n.alive.spawn(),e.deathWatcher.subscribe(function(t){t||o._deadHandler(e)})),this._owner.setValue(n),e.subscriptions||(t=e.subscriptions=[],this._visible.setValue(!1),i=function(e,i){if(e){var o=e.spawn();t.push(o),o.subscribe(function(e){i.setValue(e)},{callWithLast:!0})}else i.deleteValue()},i(n.body,this._body),i(n.width,this._width),i(n.height,this._height),i(n.fullscreen,this._fullscreen),i(n.detachable,this._detachable),i(n.fullscreenable,this._fullscreenable),i(n.availWidth,this._availWidth),i(n.availHeight,this._availHeight),i(n.visible,this._visible))},e.prototype._unsubscribeOwner=function(e,t){var i,o,n;if(e.subscriptions){for(i=0,o=e.subscriptions;i<o.length;i++)n=o[i],n.unsubscribe();e.subscriptions=null}t&&e.deathWatcher&&(e.deathWatcher.unsubscribe(),e.deathWatcher=null)},e.prototype._deadHandler=function(e){var t,i=this._ownersStack.indexOf(e);for(Object(o.assert)(-1!==i,"sanitized owner should be in stack"),t=this._ownersStack.length-1;t>=i;t--)this._unsubscribeOwner(this._ownersStack[t],!0);this._ownersStack.length=i,i>0?this._subscribeOwner(this._ownersStack[i-1]):(this._alive.setValue(!1),this._owner.deleteValue())},e}()},function(e,t,i){"use strict";function o(e){return!d.some(function(t){return e[t]().size>0})}function n(e,t,i,o){var n,r,s,a;if(void 0!==t){n=function(t){var n,r=t.styleId;void 0!==i&&Object(c.assert)(r in i,"Every style used by graphics primitive should be declared in study metainfo"),n=null,e.forEach(function(e,t){t===r&&(n=e[0])}),null===n&&(n={indexes:o,items:[]},e.set(r,[n])),n.items=n.items.concat(t.data)};for(r=0,s=t;r<s.length;r++)a=s[r],n(a)}}function r(e,t,i){var o,n,r,s=null;for(o=0,n=e;o<n.length;o++)r=n[o],r.styleId===i&&(s=r);null===s&&(s={styleId:i,data:[]},e.push(s)),s.data.push(t)}function s(e){var t,i=e.hhistsByTimePointIndex();i.clear(),t=a(e.hhists()),i.set("histBars",t)}function a(e){var t=new Map;return e.forEach(function(e,i){var o,n,r,s,a,c,h=e[0],d=h.indexes;for(o=0,n=h.items;o<n.length;o++)r=n[o],
r.firstBarTime<0||r.firstBarTime>=d.length?u.logError("Cannot find index "+r.firstBarTime+" in study timescale indexes"):(s=l.a({},r,{styleId:i}),a=d[r.firstBarTime],c=t.get(a),void 0===c?t.set(a,{indexes:d,items:[s]}):c.items.push(s))}),t}var l,c,h,u,d;i.d(t,"d",function(){return d}),t.c=o,t.b=n,t.a=r,t.e=s,l=i(3),c=i(7),i.n(c),h=i(5),u=Object(h.getLogger)("Chart.StudyGraphics"),d=["horizlines","vertlines","lines","hlines","textmarks","shapemarks","backgrounds","polygons","trendchannels","hhists"]},function(e,t,i){"use strict";function o(){this.backColorers=[]}function n(e){o.call(this),this._series=e}function r(e,t){o.call(this),this._study=e,this._plotIndex=t}var s=i(20).PlotRowSearchMode;o.prototype.barStyle=function(e,t,i){var o,n={};for(o=this.backColorers.length-1;o>=0;o--)this.backColorers[o].applyBarStyle(e,t,n,i);return this.applyBarStyle(e,t,n,i),n},o.prototype.pushBackBarColorer=function(e){this.backColorers.push(e)},o.prototype.applyBarStyle=function(e,t,i){throw Error("This function is supposed to be reimplemented in a subclass")},inherit(n,o),n.prototype.applyBarStyle=function(e,t,i,o){var n,r,s,a,l,c,h,u,d,p,_,f,m,g,y;switch(i||(i={}),i.barColor=null,i.barBorderColor=null,i.barWickColor=null,i.isBarHollow=null,i.isBarUp=null,i.upColor=null,i.downColor=null,i.isTwoColorBar=null,n=this._series.properties(),n.style.value()){case TradingView.Series.STYLE_LINE:i.barColor=n.lineStyle.color.value();break;case TradingView.Series.STYLE_AREA:i.barColor=n.areaStyle.linecolor.value();break;case TradingView.Series.STYLE_BARS:r=n.barStyle.upColor.value(),s=n.barStyle.downColor.value(),a=r,l=s,c=this.findBar(e,!1,o),n.barStyle.barColorsOnPrevClose.value()?(h=this.findPrevBar(e,!1,o),i.barColor=h[TradingView.CLOSE_PLOT]<=c[TradingView.CLOSE_PLOT]?r:s,i.barBorderColor=h[TradingView.CLOSE_PLOT]<=c[TradingView.CLOSE_PLOT]?a:l):(i.barColor=c[TradingView.OPEN_PLOT]<=c[TradingView.CLOSE_PLOT]?r:s,i.barBorderColor=c[TradingView.OPEN_PLOT]<=c[TradingView.CLOSE_PLOT]?a:l);break;case TradingView.Series.STYLE_CANDLES:r=n.candleStyle.upColor.value(),s=n.candleStyle.downColor.value(),a=n.candleStyle.borderUpColor?n.candleStyle.borderUpColor.value():n.candleStyle.borderColor.value(),l=n.candleStyle.borderDownColor?n.candleStyle.borderDownColor.value():n.candleStyle.borderColor.value(),u=n.candleStyle.wickUpColor?n.candleStyle.wickUpColor.value():n.candleStyle.wickColor.value(),d=n.candleStyle.wickDownColor?n.candleStyle.wickDownColor.value():n.candleStyle.wickColor.value(),c=this.findBar(e,!1,o),n.candleStyle.barColorsOnPrevClose.value()?(h=this.findPrevBar(e,!1,o),p=h[TradingView.CLOSE_PLOT]<=c[TradingView.CLOSE_PLOT]):p=c[TradingView.OPEN_PLOT]<=c[TradingView.CLOSE_PLOT],i.barColor=p?r:s,i.barBorderColor=p?a:l,i.barWickColor=p?u:d;break;case TradingView.Series.STYLE_HOLLOW_CANDLES:r=n.hollowCandleStyle.upColor.value(),s=n.hollowCandleStyle.downColor.value(),a=n.hollowCandleStyle.borderUpColor?n.hollowCandleStyle.borderUpColor.value():n.hollowCandleStyle.borderColor.value(),
l=n.hollowCandleStyle.borderDownColor?n.hollowCandleStyle.borderDownColor.value():n.hollowCandleStyle.borderColor.value(),u=n.hollowCandleStyle.wickUpColor?n.hollowCandleStyle.wickUpColor.value():n.hollowCandleStyle.wickColor.value(),d=n.hollowCandleStyle.wickDownColor?n.hollowCandleStyle.wickDownColor.value():n.hollowCandleStyle.wickColor.value(),c=this.findBar(e,!1,o),h=this.findPrevBar(e,!1,o),h[TradingView.CLOSE_PLOT]<=c[TradingView.CLOSE_PLOT]?(i.barColor=r,i.barBorderColor=a,i.barWickColor=u):(i.barColor=s,i.barBorderColor=l,i.barWickColor=d),c[TradingView.OPEN_PLOT]<=c[TradingView.CLOSE_PLOT]?i.isBarHollow=!0:i.isBarHollow=!1;break;case TradingView.Series.STYLE_HEIKEN_ASHI:r=n.haStyle.upColor.value(),s=n.haStyle.downColor.value(),a=n.haStyle.borderUpColor.value(),l=n.haStyle.borderDownColor.value(),u=n.haStyle.wickUpColor.value(),d=n.haStyle.wickDownColor.value(),c=this.findBar(e,t,o),n.haStyle.barColorsOnPrevClose.value()?(h=this.findPrevBar(e,t,o),p=h[TradingView.CLOSE_PLOT]<=c[TradingView.CLOSE_PLOT]):p=c[TradingView.OPEN_PLOT]<=c[TradingView.CLOSE_PLOT],i.barColor=p?r:s,i.barBorderColor=p?a:l,i.barWickColor=p?u:d;break;case TradingView.Series.STYLE_BASELINE:c=this.findBar(e,t,o),_=n.baselineStyle,f=this._series.priceScale(),m=Math.round(f.height()*(Math.abs(100-_.baseLevelPercentage.value())/100)),g=this._series.firstValue(),y=f.coordinateToPrice(m,g),c[TradingView.CLOSE_PLOT]>y?i.barColor=n.baselineStyle.topLineColor.value():i.barColor=n.baselineStyle.bottomLineColor.value()}return i},n.prototype.getSeriesBars=function(e){return e?this._series.nsBars():this._series.bars()},n.prototype._findBarFieldValue=function(e,t,i){var o=this.getSeriesBars(i).valueAt(e);if(null!==o)return o[t]},n.prototype.findBar=function(e,t,i){return i?i.value:this.getSeriesBars(t).valueAt(e)||[]},n.prototype.findPrevBar=function(e,t,i){var o,n;return i&&i.previousValue?i.previousValue:(o=this._series.bars(),n=o._search(e,s.Exact),null!==n&&n>0?this._series.bars()._valueAt(n-1):[])},inherit(r,o),r.prototype.applyBarStyle=function(e,t,i){var o,n,r,s,a,l,c,h,u,d,p,_,f;return i||(i={}),t?i:(o=this._study.properties(),o.visible.value()?(n=this._study.metaInfo(),(r=this._study.data())&&0!==r.size()?(s=n.plots[this._plotIndex],this._study.getMinFirstBarIndexForPlot(s.id)>e?i:(a=o.styles[s.id],a.visible&&!a.visible.value()?i:(l=this._study.offset(s.id),null===(c=r.valueAt(e-l))?i:null==(h=c[this._plotIndex+1])?i:(h=Math.round(h),u=n.plots[this._plotIndex].palette,d=o.palettes,p=d[u],_=n.palettes[u].valToIndex?n.palettes[u].valToIndex[h]:h,f=p.colors[_].color.value(),i.barColor=f,i.upColor=f.color,i.downColor=f.color,i)))):i):i)},t.SeriesBarColorer=n,t.StudyBarColorer=r},function(e,t,i){"use strict";function o(e){this.items=e.items,this.barSpacing=e.barSpacing,this.colorUp=e.colorup,this.colorDn=e.colordown,this.colorBorderUp=e.colorBorderUp,this.colorBorderDown=e.colorBorderDown,this.width=this._calculateWidth(e.barSpacing),this.minHeight=e.minHeight,this.vertOffset=this._calculateVerticalOffset(e.barSpacing)}function n(e,t,i,o){this.x=e,
this.y=t,this.height=i,this.isUp=o}var r=i(6).Point,s=i(9).HitTestResult;o.prototype._calculateVerticalOffset=function(e){return Math.round((e||0)/4)},o.prototype._calculateMinHeight=function(e){return this.width||this._calculateWidth(e)},o.prototype._calculateWidth=function(e){var e=e||this.barSpacing;return Math.round(e/2)},o.prototype.draw=function(e){var t,i,o,n,r,s,a,l=this.width,c=l<4,h=Math.max(parseInt(l/2),1),u=Math.round(this.width/2),d=Math.round(this.width);for(e.translate(1,1),t=0,i=this.items.length;t<i;t++)o=this.items[t],n=o.isUp?-1:1,r=Math.abs(o.height),s=o.y-n*this.vertOffset,e.beginPath(),e.translate(o.x,s),c?(e.moveTo(0,0),e.lineTo(-u,-u*n),e.moveTo(0,0),e.lineTo(u,-u*n),e.moveTo(0,0),e.lineTo(0,-r*n),e.moveTo(-u,-r*n),e.lineTo(u,-r*n),e.lineWidth=h,e.strokeStyle=o.isUp?this.colorUp:this.colorDn,e.stroke()):(e.moveTo(0,0),r<d?(e.lineTo(l,-r*n),e.lineTo(-l,-r*n)):(e.lineTo(l,-d*n),e.lineTo(u,-d*n),e.lineTo(u,-r*n),e.lineTo(-u,-r*n),e.lineTo(-u,-d*n),e.lineTo(-l,-d*n)),e.lineTo(0,0),a=o.isUp?this.colorBorderUp:this.colorBorderDown,e.strokeStyle=a,e.stroke(),e.fillStyle=o.isUp?this.colorUp:this.colorDn,e.fill()),e.translate(-o.x,-s);e.translate(-1,-1)},o.prototype.hitTest=function(e){var t,i,o,n,r,a,l,c,h,u=Math.round(this.width/2),d=Math.round(this.width);for(t=0;t<this.items.length;++t)if((i=this.items[t])&&void 0!==i.x&&null!==i.x&&!TradingView.isNaN(i.x)&&void 0!==i.y&&null!==i.y&&!TradingView.isNaN(i.y)&&(o=Math.abs(i.height),n=i.isUp?-1:1,r=o+d,a=i.y-n*this.vertOffset,l=a-n*r,c=i.x-u,h=i.x+u,c<e.x&&e.x<h&&(i.isUp?a<e.y&&e.y<l:l<e.y&&e.y<a)))return new s(s.REGULAR);return null},inherit(n,r),t.PaneRendererArrowsUpDown=TradingView.PaneRendererArrowsUpDown=o,t.PaneRendererArrowsUpDownItem=TradingView.PaneRendererArrowsUpDownItem=n},function(e,t,i){"use strict";(function(e){function o(e,t){var i,o,n,r,l;if(s.call(this),this._study=e,this._model=t,i=e.metaInfo().plots){for(o=0;o<i.length;++o)if(!(this._study.isSelfColorerPlot(o)||this._study.isBarColorerPlot(o)||this._study.isBgColorerPlot(o)||this._study.isDataOffsetPlot(o)||this._study.isOHLCColorerPlot(o))){if(n=i[o].id,"Compare@tv-basicstudies"===this._study.metaInfo().id)r=new a(this._study.inputsForGUI()[1],"");else{l=this._study.title();try{l=this._study.properties().styles[n].title.value()}catch(e){}r=new a(l,"")}r.plotId=n,r.plotIndex=o,this._items.push(r)}this.update(),this._invalidated=!0}}function n(e,t){o.call(this,e,t)}var r=i(116),s=r.DataWindowView,a=r.DataWindowItem,l=i(20).PlotRowSearchMode;inherit(o,s),o.prototype.update=function(){this._invalidated=!0},o.prototype._updateImpl=function(){var t,i,o,n,r,s,a,c,h,u,d,p,_,f,m,g,y,v,b,S,w,T,P=!0;for(this._header=this._study.title(P),this._title=this._study.title(),t=this._study.isVisible()?$.t("n/a"):"",i=0;i<this._items.length;++i)this._items[i].setValue(t);if(e.enabled("hide_last_na_study_output")&&this._items.length&&this._items[this._items.length-1].setValue(""),!this._model.timeScale().isEmpty()){if(o=this._study.metaInfo().plots,n=null,r={},
o)for(i=0;i<o.length;i++)(this._study.isSelfColorerPlot(i)||this._study.isOHLCColorerPlot(i))&&(r[o[i].target]={index:i},r[o[i].target].palette=this._study.metaInfo().palettes[o[i].palette],r[o[i].target].paletterProps=this._study.properties().palettes[o[i].palette]);for(s=this._study.data().size()-1,a=this._model.crossHairSource().appliedIndex(),c=this._study.formatter(),h={},i=0;i<this._items.length;++i)u=this._items[i],d=u.plotId,p=u.plotIndex,_=this._study.offset(d),void 0!==(f=isNumber(a)?this._study.nearestIndex(a-_,l.NearestLeft):s)&&(m=h[d],void 0===m&&(m=this._study.getMinFirstBarIndexForPlot(d),h[d]=m),m>f||(g=this._study.data().last(),null!==(y=this._study.data().valueAt(f)||(null!==g?g.value:null))&&(v=y[p+1],isNumber(v)&&(u.setValue(c.format(v)),b=this._study.properties().styles[d].color.value(),this._study.isOHLCSeriesPlot(p)&&(d=o[p].target,b=this._study.properties().ohlcPlots[d].color.value()),r[d]&&y.length>r[d].index+1?(S=y[r[d].index+1],void 0!==S&&null!==S?(n=r[d].palette,w=r[d].paletterProps,T=n.valToIndex?n.valToIndex[S]:S,this._items[i].setColor(w.colors[T].color.value())):this._items[i].setColor(b)):this._items[i].setColor(b)))))}},o.prototype.items=function(){return this._invalidated&&(this._updateImpl(),this._invalidated=!1),this._items},inherit(n,o),t.StudyDataWindowView=o,t.DataVendorStudyDataWindowView=n}).call(t,i(4))},function(e,t,i){"use strict";function o(e,t){var o,n,r,a,l,c,h,u,d;if(!e)throw Error("No studies metainfo");if(o=i(641),this._studiesMetainfo=e,!t)throw Error("No studies migrations");for(this._studiesMigrations=t,this._migrations={},n=0;n<this._studiesMigrations.length;n++)for(r=this._studiesMigrations[n],a=r.versFrom,l=r.versTo,c=0;c<r.studyMigrations.length;c++)h=r.studyMigrations[c],u=h.studyId,0!==h.rules.length?(d=u in this._migrations?this._migrations[u]:new o(u),d.addMigration(a,l,h.rules),this._migrations[u]=d):s.logError("Study Migration should have at least one convertion rule");this._clientMigrations=[function(e,t){var i,o,n,r,s;if(0===this._studiesMetainfo.length||!e.isTVScript||e.version>=22)return t;for(i={},o=0,n=0;void 0!==(r=t[n]);)s=t[r.id],r.isFake&&(r.id="in_"+o++),i[n]=r,i[r.id]=s,n++;return i}]}var n=i(7).assert,r=i(165).Version,s=i(5).getLogger("Chart.Study.Versioning"),a=i(349),l=i(28);o.prototype.updateMetaInfo=function(e){var t,i,o;if(!e)return e;for(n(!e.isTVScript,"This method should update only built-in java indicators metaInfo. For Pine indicators use updateMetaInfoAsync"),t=null,i=this._studiesMetainfo,o=0;o<i.length;o++)if(i[o].id===e.id){t=i[o];break}return TradingView.clone(t)},o.prototype.updateMetaInfoAsync=function(e,t){var i,o,n,r,s,a=$.Deferred(),c=a.promise();if(!e)return a.reject("No old metaInfo was given"),c;if(t)return a.resolve(null),c;if(i=e.isTVScript&&e.scriptIdPart&&TVScript.pineType(e.scriptIdPart)===TVScript.PineType.Addon,o=l.versionOf(e),e.isTVScript&&!e.pine&&!i&&o<l.VERSION_PINE_PROTECT_TV_4164);else if((e.isTVScript||e.isTVScriptStubToCompile)&&e.pine&&!i);else{for(n=null,r=this._studiesMetainfo,
s=0;s<r.length;s++)if(r[s].id===e.id){n=r[s];break}n?a.resolve(TradingView.clone(n)):a.resolve(null)}return c},o.prototype.lastVersionOfStudy=function(e){return l.findStudyMetaInfo(this._studiesMetainfo,e).version},o.prototype.updateStudyInputs=function(e,t,i,o,n){var a,l,c,h,u,d,p,_=TradingView.clone(o);if(e in this._migrations&&(a=r.parse(t),"last"===i?(c=this.lastVersionOfStudy(e),l=r.parse(c)):l=r.parse(i),h=this._migrations[e],u=h.updateInputs(a,l,_),_=u),null==n)return _;for(d in n)d in _||(_[d]=n[d]);for(d in _)d in n||(p=_[d],s.logWarn("Extra input detected, studyId="+e+", versionFrom="+t+", inputId="+d+", inputValue="+p+", removing it and continue..."),delete _[d]);return _},o.prototype.updateStudyState=function(e,t,i){var o,n,r,a,c,h,u,d,p,_,f,m,g,y;if(null==e||null==t||null==i)return e;for(e=TradingView.clone(e),o=t.isTVScript||!!t.pine,o||t.version===i.version||(n=i&&i.defaults.inputs,r=this.updateStudyInputs(t.id,t.version,i.version,e.inputs,n),e.inputs=r),a=0;a<this._clientMigrations.length;++a)r=this._clientMigrations[a].call(this,t,e.inputs),Object.keys(r).length===Object.keys(e.inputs).length?e.inputs=r:s.logWarn("StudyVersioning._clientMigrations application returned bad result. Skipping it...");if(c=l.versionOf(t),t.isTVScript&&t.TVScriptSourceCode&&c>=12&&c<=26){for(h={},a=0;a<t.plots.length;++a)u=t.plots[a],d=i.plots[a],h[u.id]=d.id;for(p=Object.keys(e.styles),a=0;a<p.length;++a)_=p[a],f=e.styles[_],delete e.styles[_],m=h[_],e.styles[m]=f;for(g=Object.keys(e.plots),a=0;a<g.length;++a)y=g[a],_=e.plots[y].id,e.plots[y].id=h[_]}return e},o.prototype.patchPointsBasedStudyState=function(e){return o._fixInputsMaxValue(e.state,e.metaInfo),e},o.prototype.patchPointsBasedStudyData=function(e,t){if(!a.isProd())return t;if(!e||!t)return t;var i=TradingView.clone(t);return"VbPFixed@tv-volumebyprice"===e.id&&e.version&&e.version<=4&&o._patchOldVolumeProfiles(0,i),i},o.prototype.patchStudyData=function(e,t,i,n){var r,s,c,h,u,d,p;if(!a.isProd())return{data:t,nsData:i,indexes:n};if(r=TradingView.clone(t),s=TradingView.clone(i),c=TradingView.clone(n),"VbPVisible@tv-volumebyprice"===e.id&&e.version&&e.version<=4&&o._patchOldVolumeProfiles(0,r.graphics),"VbPSessions@tv-volumebyprice"===e.id&&e.version&&e.version<=4&&o._patchOldVolumeProfiles(0,r.graphics),h=l.versionOf(e),e.isTVScript&&e.TVScriptSourceCode&&h>=12&&h<=26)for(u=r.columns,r.columns=[],d=0;d<u.length;++d)p="plot_"+d,r.columns.push(p);return{data:r,nsData:s,indexes:c}},o._patchOldVolumeProfiles=function(e,t){var i,o=t.hhists[e].data,n=[];for(i in o)n=n.concat(o[i]);t.hhists[0].data=n},o._fixInputsOrder=function(e,t){var i,n,r,s,a=l.getOrderedInputIds(t),c=o.splitInputs(e.inputs),h=c.arr,u=c.obj,d=TradingView.merge({},u);for(i=0;i<a.length;++i)n=a[i],null!==(r=o.findInputKeyById(h,n))&&(s=h[r],d[i]=s);e.inputs=d},o.INPUT_MAX_VALUE=1e12,o._verifyInputsMaxValue=function(e){var t,i,n=o.INPUT_MAX_VALUE;if(e.inputs)for(t=0;t<e.inputs.length;t++)i=e.inputs[t],
"integer"===i.type&&i.max&&i.max>n&&s.logWarn("Bad integer input max value in metaInfo id="+e.id+" title="+e.description)},o._fixInputsMaxValue=function(e,t){var i,n,r,s,a,l;if(!TradingView.isAbsent(t)){if(i=o.INPUT_MAX_VALUE,t.inputs)for(n=0;n<t.inputs.length;n++)r=t.inputs[n],"integer"===r.type&&r.max&&r.max>i&&(r.max=i);if(e&&e.inputs){s=o.splitInputs(e.inputs),a=s.arr;for(l in a)r=a[l],"integer"===r.type&&r.max&&r.max>i&&(r.max=i);e.inputs=TradingView.merge(s.obj,s.arr)}}},o.prototype.patchPropsStateAndMetaInfo=function(e,t,i){var n,r,s,a,c,h,u,d,p,_,f,m,g,y,v,b,S,w;if("Script$BOOKER"!==t.productId||t.alerts||delete e.alerts,o._fixInputsOrder(e,t),o._fixInputsMaxValue(e,t),n=o.splitInputs(e.inputs),e.inputs=n.obj,l.versionOf(t)<l.METAINFO_FORMAT_VERSION_SOS_V2&&t.isChildStudy&&(e.isChildStudy=t.isChildStudy),r=60,t.isTVScript&&t.version<r&&("Script$TV_EARNINGS@tv-scripting"!==t.id&&"Script$TV_DIVIDENDS@tv-scripting"!==t.id&&"Script$TV_SPLITS@tv-scripting"!==t.id||delete t.TVScriptSourceCode),"Volume"!==t.id&&"Volume@tv-basicstudies"!==t.id||0!==t.inputs.length||(t.inputs=[{id:"length",type:"integer",defval:20,min:1,max:1e3}],t.plots.push({id:"vol_ma",type:"line"})),"Volume@tv-basicstudies"===t.id&&t.version&&t.version<=46&&(e.styles.vol.transparency=e.transparency||87),"PivotPointsStandard@tv-basicstudies"===t.id&&(0===t.inputs.length?(e.inputs={kind:"Traditional",showHistoricalPivots:!0},t.inputs=[{defval:"Traditional",id:"kind",type:"text",options:["Traditional","Fibonacci","Woodie","Classic","DeMark","Camarilla"]},{id:"showHistoricalPivots",type:"bool",defval:!0}]):1===t.inputs.length&&(e.inputs={kind:"Traditional"},t.inputs=[{defval:"Traditional",id:"kind",type:"text",options:["Traditional","Fibonacci","Woodie","Classic","DeMark","Camarilla"]},{id:"showHistoricalPivots",type:"bool",defval:!0}]),void 0===e._hardCodedDefaultsVersion&&(e._hardCodedDefaultsVersion=1,s=e.color,delete e.color,e.levelsStyle={colors:{P:s,"S1/R1":s,"S2/R2":s,"S3/R3":s,"S4/R4":s,"S5/R5":s}})),"CMF"===t.shortId&&2===t.inputs.length&&(e.inputs={length:e.inputs["length fast"]},t.inputs=t.inputs.splice(0,1),t.inputs[0].id="length"),t.defaults&&void 0===t.defaults.precision&&(-1!==["Volume@tv-basicstudies","VbPVisible@tv-volumebyprice","VbPSessions@tv-volumebyprice"].indexOf(t.id)?t.defaults.precision=0:t.defaults.precision=4),a=60,t.version<a)for(c=["TV_DIVIDENDS","TV_SPLITS","TV_EARNINGS"],h=6,u=0;u<c.length;u++)t.id.startsWith("Script$"+c[u]+"@tv-scripting")&&(t.fullId="ESD"+t.fullId.substring(h),t.id="ESD"+t.id.substring(h),t.name="ESD"+t.name.substring(h),t.shortId="ESD"+t.shortId.substring(h),t.productId="ESD"+t.productId.substring(h));if(l.versionOf(t)<l.VERSION_PINE_PROTECT_TV_4164&&(d={"StrategyScript$STD;Consecutive%1Ups/Downs%1Strategy":{pineId:"STD;Consecutive%1Ups%1Downs%1Strategy",className:"StrategyScript"},Script$EDGR_NET_INCOME_FROM_CONTINUING_OPERATIONS_APPLICABLE_TO_COMMON_V2:{pineId:"Script$EDGR_NET_INCOME_FROM_CONTINUING_OPS_APPLICABLE_TO_COMMON_V2",className:"Script"}},
t.shortId in d&&(p=d[t.shortId].className+"$"+d[t.shortId].pineId,_={scriptIdPart:d[t.shortId].pineId,fullId:t.fullId.replace(t.shortId,p),id:t.id.replace(t.shortId,p),name:t.name.replace(t.shortId,p),shortId:p},TradingView.merge(t,_),TradingView.merge(e,_)),f=TradingView.StudyMetaInfo.cutScriptIdPart(t.fullId),(m=f.match(/^(USER)(_\d+)(;)(.*)$/))&&(g=m[0],y=m[1]+m[3]+m[2]+m[4],_={scriptIdPart:y,fullId:t.fullId.replace(g,y),id:t.id.replace(g,y),name:t.name.replace(g,y),shortId:t.shortId.replace(g,y)},TradingView.merge(t,_),TradingView.merge(e,_))),"MA"===t.id){switch(v=new l({id:"MAExp",properties:[{id:"is_price_study",type:"bool",value:"true"}],inputs:[{id:"length",type:"integer",defval:20,min:1,max:500},{id:"source",type:"text",defval:"close",options:["open","high","low","close"]}],plots:[{id:"MovAvgExp",type:"line"}],palettes:{}}),b=new l({id:"MASimple",properties:[{id:"is_price_study",type:"bool",value:"true"}],inputs:[{id:"length",type:"integer",defval:20,min:1,max:500},{id:"source",type:"text",defval:"close",options:["open","high","low","close"]}],plots:[{id:"MovAvgSimple",type:"line"}],palettes:{}}),S=new l({id:"MAVolumeWeighted",properties:[{id:"is_price_study",type:"bool",value:"true"}],inputs:[{id:"length",type:"integer",defval:20,min:1,max:500},{id:"source",type:"text",defval:"close",options:["open","high","low","close"]}],plots:[{id:"MovAvgVolumeWeighted",type:"line"}],palettes:{}}),w=new l({id:"MAWeighted",properties:[{id:"is_price_study",type:"bool",value:"true"}],inputs:[{id:"length",type:"integer",defval:20,min:1,max:500},{id:"source",type:"text",defval:"close",options:["open","high","low","close"]}],plots:[{id:"MovAvgWeighted",type:"line"}],palettes:{}}),e.inputs.type){case"exp":t=v;break;case"simple":t=b;break;case"weighted":t=w;break;case"volume weighted":t=S}e.styles[t.plots[0].id]=e.styles.MovAvg,delete e.styles.MovAvg,delete e.inputs.type}return i.oldShowStudyLastValueProperty&&(e.oldShowLastValue=e.showLastValue),delete e.showLastValue,delete e.showStudyArguments,{propsState:e,metaInfo:t}},o.mergeInputs=function(e,t){o.mergeInputsArrPart(e,t),o.mergeInputsObjPart(e,t)},o.mergeInputsArrPart=function(e,t){var i,n,r=o.splitInputs(t);for(i in r.arr)n=o.findInputKeyById(e,r.arr[i].id),n?TradingView.merge(e[n],r.arr[i]):o.appendInputInfoToArr(e,r.arr[i])},o.mergeInputsObjPart=function(e,t){var i=o.splitInputs(t);TradingView.merge(e,i.obj)},o.appendInputInfoToArr=function(e,t){var i,o,n=-1;for(i in e)o=parseInt(i,10),isNumber(o)&&o>n&&(n=o);e[n+1]=t},o.splitInputs=function(e){var t,i={},o={};for(t in e)isNumber(parseInt(t,10))?i[t]=e[t]:o[t]=e[t];return{arr:i,obj:o}},o.findInputKeyById=function(e,t){var i,o=null;for(i in e)if(isNumber(parseInt(i,10))&&e[i].id===t){o=i;break}return o},o.getInputKeyById=function(e,t){var i=o.findInputKeyById(e,t);if(!i)throw Error("Cannot find input with id: "+t);return i},e.exports=o},function(e,t,i){"use strict";var o,n,r,s;Object.defineProperty(t,"__esModule",{value:!0}),i.d(t,"LineToolPriceAxisView",function(){return s}),o=i(3),n=i(7),i.n(n),r=i(59),s=function(e){
function t(t,i){var o=e.call(this)||this;return o._activeBackground="#0F6DBF",o._background="#5592C9",o._active=!1,o._source=t,o._data=i,o}return o.c(t,e),t.prototype.setActive=function(e){this._active=e},t.prototype.setBackground=function(e){this._background=e},t.prototype._updateRendererData=function(e){var t,i,o,n,r,s,a,l;e.visible=!1,t=this._source.model(),t.timeScale()&&!t.timeScale().isEmpty()&&(null===(i=this._source.priceScale())||i.isEmpty()||(t.selectedSource()===this._source||this._source.isForcedDrawPriceAxisLabel())&&null!==t.timeScale().visibleBars()&&(o=this._source.axisPoints(),n=this._data.pointIndex,o.length<=n||(r=o[n],isFinite(r.price)&&(s=this._source.ownerSource(),null!=(a=null!==s?s.firstValue():null)&&(l=this._active?this._activeBackground:this._background,this._data.backgroundProperty&&(l=this._data.backgroundProperty.value()),e.background=l,e.borderColor="#2E84A6",e.color=this.generateTextColor(l),e.coordinate=i.priceToCoordinate(r.price,a),e.text=this._formatPrice(r.price,a),e.visible=!0)))))},t.prototype._formatPrice=function(e,t){return Object(n.ensureNotNull)(this._source.priceScale()).formatPrice(e,t)},t}(r.a)},function(e,t,i){"use strict";var o,n;Object.defineProperty(t,"__esModule",{value:!0}),i.d(t,"TimeAxisView",function(){return n}),o=i(27),i.n(o),n=function(){function e(){this._text="",this._background="#585858",this._coordinate=0}return e.prototype.text=function(){return this._text},e.prototype.background=function(){return this._background},e.prototype.color=function(){return"black"===Object(o.rgbToBlackWhiteString)(Object(o.parseRgb)(this._background),150)?"white":"black"},e.prototype.coordinate=function(){return this._coordinate},e}()},function(e,t,i){"use strict";var o,n,r;Object.defineProperty(t,"__esModule",{value:!0}),i.d(t,"TimeAxisViewRenderer",function(){return r}),o=i(51),i.n(o),n=/[1-9]/g,r=function(){function e(){this._data=null}return e.prototype.setData=function(e){this._data=e},e.prototype.draw=function(e,t){var i,r,s,a,l,c,h,u,d,p,_,f,m,g;null!==this._data&&!1!==this._data.visible&&0!==this._data.text.length&&(e.font=t.font,(i=Math.round(t.widthCache.measureText(e,this._data.text,n)))<=0||(r=t.paddingHorizontal,s=i+2*r,a=s/2,l=this._data.width,c=this._data.coordinate,h=Math.floor(c-a)+.5,h<0?(c+=Math.abs(0-h),h=Math.floor(c-a)+.5):h+s>l&&(c-=Math.abs(l-(h+s)),h=Math.floor(c-a)+.5),u=h+s,d=.5,p=d+t.borderSize+t.paddingTop+t.fontSize+t.paddingBottom,e.fillStyle=this._data.background,e.lineWidth=1,Object(o.drawRoundRect)(e,h,d,u-h,p-d,1),e.fill(),_=Math.round(this._data.coordinate+1),f=d,m=f+t.borderSize+t.tickLength,e.strokeStyle=this._data.color,e.beginPath(),e.moveTo(_,f),e.lineTo(_,m),e.stroke(),g=p-t.baselineOffset-t.paddingBottom,e.textAlign="left",e.fillStyle=this._data.color,e.fillText(this._data.text,h+r,g)))},e}()},function(e,t,i){"use strict";var o,n,r,s;Object.defineProperty(t,"__esModule",{value:!0}),i.d(t,"AbbreviatedDateTimeFormatter",function(){return s}),o=i(110),n=i(19),r={1:window.t("Jan"),2:window.t("Feb"),3:window.t("Mar"),4:window.t("Apr"),
5:window.t("May"),6:window.t("Jun"),7:window.t("Jul"),8:window.t("Aug"),9:window.t("Sep"),10:window.t("Oct"),11:window.t("Nov"),12:window.t("Dec")},s=function(){function e(e){void 0===e&&(e=!1),this._dwm=e}return e.prototype.format=function(e){var t=this._formatDate(e);return this._dwm||(t+="  "+new o.TimeFormatter("%h:%m").format(e)),t},e.prototype.formatLocal=function(e){var t=this._formatDateLocal(e);return this._dwm||(t+="  "+new o.TimeFormatter("%h:%m").formatLocal(e)),t},e.prototype._formatDate=function(e){var t,i,o;return n.customFormatters&&n.customFormatters.dateFormatter?n.customFormatters.dateFormatter.format(e):(t=Object(n.numberToStringWithLeadingZero)(e.getUTCDate(),2),i=r[e.getUTCMonth()+1],o=(""+e.getUTCFullYear()).substring(2),t+" "+i+" '"+o)},e.prototype._formatDateLocal=function(e){var t,i,o;return n.customFormatters.dateFormatter?n.customFormatters.dateFormatter.formatLocal?n.customFormatters.dateFormatter.formatLocal(e):n.customFormatters.dateFormatter.format(e):(t=Object(n.numberToStringWithLeadingZero)(e.getDate(),2),i=r[e.getMonth()+1],o=(""+e.getFullYear()).substring(2),t+" "+i+" '"+o)},e}()},function(e,t,i){"use strict";function o(e,t){this.customization={forcePriceAxisLabel:!0,disableSelection:!0,disableErasing:!0},n.call(this,e,t)}var n=i(0).LineDataSource;inherit(o,n),o.POINTS_COUNT=1,o.prototype.pointsCount=function(){return o.POINTS_COUNT},o.prototype.hasContextMenu=function(){return!1},o.prototype.state=function(){return null},o.prototype.startMoving=function(){n.prototype.startMoving.apply(this,arguments),this._cursorMoved=!1},o.prototype.endMoving=function(){n.prototype.endMoving.apply(this,arguments),this._cursorMoved=!1},o.prototype.correctPoints=function(e){var t,i,o,n,r;for(this._currentMovingPoint&&this._startMovingPoint?this._currentMovingPoint.price-this._startMovingPoint.price&&(this._cursorMoved=!0):this._cursorMoved=!1,t=this.priceScale(),i=t.mainSource().base(),o=1/i,n=0;n<e.length;n++)r=e[n],this._cursorMoved&&(r.price=this._currentMovingPoint.price),r.price=o*Math.round(r.price/o),e[n]=r},o.prototype.userEditEnabled=function(){return!0},o.prototype.canBeHidden=function(){return!1},o.prototype.isUserDeletable=function(){return!1},o.prototype.showInObjectTree=function(){return!1},o.prototype.getInputsPropertyPage=function(){return null},o.prototype.doesMovingAffectsUndo=function(){return!1},e.exports=o},function(e,t,i){"use strict";var o,n,r;Object.defineProperty(t,"__esModule",{value:!0}),i.d(t,"LineToolHorzLinePriceAxisView",function(){return r}),o=i(3),n=i(59),r=function(e){function t(t){var i=e.call(this)||this;return i._source=t,i}return o.c(t,e),t.prototype._updateRendererData=function(e){var t,i,o,n,r,s;e.visible=!1,t=this._source.points(),i=this._source.priceScale(),0===t.length||null===i||i.isEmpty()||(o=t[0],isFinite(o.price)&&(n=this._source.ownerSource(),null!=(r=null!==n?n.firstValue():null)&&(s=this._source.properties().linecolor.value(),e.background=s,e.color=this.generateTextColor(s),e.coordinate=i.priceToCoordinate(o.price,r),
e.text=i.formatPrice(o.price,r),e.visible=!0)))},t}(n.a)},function(e,t,i){"use strict";(function(e){function o(t,n){var r,s,c,d,p,_,f,m,g,y=n||new h("linetoolriskreward");a.call(this,t,y),this._properties.addExclusion&&(this._properties.addExclusion("stopLevel"),this._properties.addExclusion("profitLevel")),n.stopLevel||n.profitLevel||(r=t.timeScale().visibleBars(),s=r.firstBar(),c=r.lastBar(),d=t.mainSeries().priceRange(s,c),p=t.mainSeries().priceScale(),p.isLog()&&(_=p.logicalToPrice(d.minValue()),f=p.logicalToPrice(d.maxValue()),d=new e(_,f)),d&&!d.isEmpty()&&(m=Math.round(.2*d.length()*t.mainSeries().base()),y.merge({stopLevel:m,profitLevel:m}))),g=this,y.stopLevel.listeners().subscribe(this,this.recalculate),y.stopLevel.listeners().subscribe(null,function(){g.properties().stopPrice._listeners.fire(g.properties().stopPrice)}),y.profitLevel.listeners().subscribe(this,this.recalculate),y.profitLevel.listeners().subscribe(null,function(){g.properties().targetPrice._listeners.fire(g.properties().targetPrice)}),y.addChild("entryPrice",new o.PriceProperty(this,0)),y.addChild("stopPrice",new o.StopPriceProperty(this)),y.addChild("targetPrice",new o.TargetPriceProperty(this)),y.addProperty("riskSize",250),y.addProperty("qty",0),y.addProperty("amountTarget",y.accountSize.value()),y.addProperty("amountStop",y.accountSize.value()),this._riskInPercentsFormatter=new u(2),this._riskInMoneyFormatter=new u,y.risk.subscribe(this,this._recalculateRiskSize),y.accountSize.subscribe(this,this._recalculateRiskSize),y.riskDisplayMode.subscribe(this,this._recalculateRisk),y.riskDisplayMode.subscribe(this,this._recalculateRiskSize),y.entryPrice.subscribe(this,this._recalculateRiskSize),y.stopPrice.subscribe(this,this._recalculateRiskSize),y.profitLevel.subscribe(this,this._recalculateRiskSize),y.stopLevel.subscribe(this,this._recalculateRiskSize),y.qty.subscribe(this,this._recalculateRiskSize),"percents"===y.riskDisplayMode.value()&&y.risk.value()>100&&y.riskDisplayMode.setValueSilently("money"),this._syncStateExclusions=["entryPrice","stopPrice","targetPrice","riskSize","qty","amountTarget","amountStop","risk","accountSize"],this.version=o.version,this._entryPriceAxisView=new l(this,{colorProperty:y.linecolor,priceProperty:y.entryPrice}),this._stopPriceAxisView=new l(this,{colorProperty:y.stopBackground,priceProperty:y.stopPrice}),this._profitPriceAxisView=new l(this,{colorProperty:y.profitBackground,priceProperty:y.targetPrice}),i.e(0).then(function(e){var t=i(914).RiskRewardPaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}function n(e,t){var i,n;this._constructor="LineToolRiskRewardShort",i=t||new h("linetoolriskrewardshort"),o.call(this,e,i),n=this.properties(),n.entryPrice.subscribe(this,this._recalculateQty),n.stopPrice.subscribe(this,this._recalculateQty),n.riskSize.subscribe(this,this._recalculateQty),n.entryPrice.subscribe(this,this._recalculateAmount),n.profitLevel.subscribe(this,this._recalculateAmount),n.stopLevel.subscribe(this,this._recalculateAmount),
n.accountSize.subscribe(this,this._recalculateAmount),n.riskSize.subscribe(this,this._recalculateAmount),n.qty.subscribe(this,this._recalculateAmount)}function r(e,t){var i,n;this._constructor="LineToolRiskRewardLong",i=t||new h("linetoolriskrewardlong"),o.call(this,e,i),n=this.properties(),n.entryPrice.subscribe(this,this._recalculateQty),n.stopPrice.subscribe(this,this._recalculateQty),n.riskSize.subscribe(this,this._recalculateQty),n.entryPrice.subscribe(this,this._recalculateAmount),n.profitLevel.subscribe(this,this._recalculateAmount),n.stopLevel.subscribe(this,this._recalculateAmount),n.accountSize.subscribe(this,this._recalculateAmount),n.riskSize.subscribe(this,this._recalculateAmount),n.qty.subscribe(this,this._recalculateAmount)}var s=i(7).ensureNotNull,a=i(0).LineDataSource,l=i(678).LineToolRiskRewardPriceAxisView,c=i(33),h=i(2).DefaultProperty,u=i(102).NumericFormatter,d=i(1).propertyPages,p=i(353).RiskRewardPointIndex;inherit(o,a),o.prototype.riskFormatter=function(e){return"percents"===e?this._riskInPercentsFormatter:this._riskInMoneyFormatter},o.prototype.getRiskStep=function(e){return"percents"===e?.01:1},o.prototype._roundValue=function(e){return parseFloat(e.toFixed(2))},o.prototype._recalculateRisk=function(){var e=this.properties(),t=e.riskDisplayMode.value(),i=e.riskSize.value(),o=e.accountSize.value(),n=e.risk.value();n="percents"===t?this._roundValue(i/o*100):this._roundValue(o/100*n),this._riskInChange=!0,e.risk.setValue(this.riskFormatter(t).format(n)),this._riskInChange=!1},o.prototype._recalculateRiskSize=function(){var e,t,i,o;this._riskInChange||(e=this.properties(),t=e.risk.value(),i=e.riskDisplayMode.value(),o=e.accountSize.value(),"percents"===i?e.riskSize.setValue(t/100*o):t>o?(e.risk.setValue(o),e.riskSize.setValue(o)):e.riskSize.setValue(t))},o.version=2,o.prototype.i18nCache={title:$.t("Risk/Reward")},o.prototype.lastBarData=function(){var e,t,i,o,n,r=this._model.mainSeries().bars().firstIndex(),a=this._model.mainSeries().bars().lastIndex();return null===r||null===a||isNaN(r)||isNaN(a)?null:(e=this.points(),4===e.length?(t=e[p.ActualClose],t.index<r?null:{closePrice:t.price,index:Math.min(a,t.index)}):(i=e[p.Close],i.index<r?null:(o=Math.min(a,i.index),n=s(this._model.mainSeries().bars().valueAt(o)),{closePrice:n[TradingView.CLOSE_PLOT],index:o})))},o.prototype.migrateVersion=function(e,t,i){var o,n,r,s;1===e&&this._points.length>=1&&(o=[],o.push(this._points[0]),n=this._points[0],n={price:n.price,index:n.index+50},o.push(n),this._points[1]&&o.push(this._points[1]),this._points[2]&&o.push(this._points[2]),this._points=o,this._timePoint.length>=1&&(r=[],n=this._timePoint[0],r.push(n),s={price:n.price,time_t:n.time_t,offset:n.offset+50},r.push(s),this._timePoint[1]&&o.push(this._points[1]),this._timePoint[2]&&o.push(this._points[2]),this._timePoint=r))},o.prototype.checkAlert=function(){this.recalculate()},o.prototype.priceAxisViews=function(e,t){
return this.isSourceHidden()?null:t!==this.priceScale()||this._model.paneForSource(this)!==e?null:[this._entryPriceAxisView,this._stopPriceAxisView,this._profitPriceAxisView]},o.prototype.updateAllViews=function(){this.isActualSymbol()&&this._properties.visible.value()&&(c.hideAllDrawings().value()&&this.userEditEnabled()||(a.prototype.updateAllViews.call(this),this._entryPriceAxisView.update(),this._stopPriceAxisView.update(),this._profitPriceAxisView.update()))},o.prototype.setPoint=function(e,t){switch(e){case 0:t.price=this._roundPrice(t.price),a.prototype.setPoint.call(this,e,t),this.recalculate();break;case 1:this.isActualSymbol()&&this.properties().stopPrice.setValue(this.preparseStopPrice(t.price));break;case 2:this.isActualSymbol()&&this.properties().targetPrice.setValue(this.preparseProfitPrice(t.price));break;case 3:t.price=this._roundPrice(t.price),a.prototype.setPoint.call(this,1,t),this.recalculate()}},o.PriceProperty=function(e,t){a.PointPriceProperty.call(this,e,t)},inherit(o.PriceProperty,a.PointPriceProperty),o.PriceProperty.prototype.setValue=function(e){var t=this._lineSource.points()[this._pointIndex];t.price=parseFloat(e),this._lineSource.setPoint(this._pointIndex,t),this._lineSource.recalculate(),this._lineSource._model.updateSource(this._lineSource),this._listeners.fire(this),this._lineSource.endChanging(),this._lineSource._syncMultichartState()},o.StopPriceProperty=function(e){o.PriceProperty.call(this,e,1)},inherit(o.StopPriceProperty,o.PriceProperty),o.StopPriceProperty.prototype.value=function(){var e=this._lineSource.stopPrice(),t=this._lineSource.ownerSource().formatter(),i=t.parse(t.format(e));return i.price?i.price:i.value},o.StopPriceProperty.prototype.setValue=function(e){var t=Math.round(Math.abs(e-this._lineSource.entryPrice())*this._lineSource._model.mainSeries().base());this._lineSource.properties().stopLevel.setValue(t),this._lineSource.properties().stopLevel.listeners().fire(this._lineSource.properties().stopLevel)},o.TargetPriceProperty=function(e){o.PriceProperty.call(this,e,2)},inherit(o.TargetPriceProperty,o.PriceProperty),o.TargetPriceProperty.prototype.value=function(){var e=this._lineSource.profitPrice(),t=this._lineSource.ownerSource().formatter(),i=t.parse(t.format(e));return i.price?i.price:i.value},o.TargetPriceProperty.prototype.setValue=function(e){var t=Math.round(Math.abs(e-this._lineSource.entryPrice())*this._lineSource._model.mainSeries().base());this._lineSource.properties().profitLevel.setValue(t),this._lineSource.properties().profitLevel.listeners().fire(this._lineSource.properties().profitLevel)},o.prototype.pointsCount=function(){return 1},o.prototype.title=function(){return this.i18nCache.title},o.prototype.addPoint=function(e){var t,i;return e.price=this._roundPrice(e.price),a.prototype.addPoint.call(this,e,null,!0),t={price:e.price,index:e.index+50},a.prototype._addPointIntenal.call(this,t,null,!0),i=this.calculateActualEntry(e,t),i&&(a.prototype._addPointIntenal.call(this,i,null,!0),
(t=this.findClosePoint(i,t))&&a.prototype._addPointIntenal.call(this,t,null,!0)),this._lastPoint=null,this.normalizePoints(),this.createServerPoints(),!0},o.prototype._roundPrice=function(e){var t=this._model.mainSeries().base();return Math.round(e*t)/t},o.prototype.recalculate=function(){var e,t,i,o,n;this.properties().interval.value()===this._model.mainSeries().interval()&&0!==this.points().length&&(e=this.properties().targetPrice.value(),t=this.properties().stopPrice.value(),i=[this._points[0],this._points[1]],o=this.calculateActualEntry(this.points()[0],this.points()[1]),o&&(i.push(o),(n=this.findClosePoint(o,this.points()[1]))&&i.push(n)),this._points=i,e!==this.properties().targetPrice.value()&&this.properties().targetPrice._listeners.fire(this.properties().targetPrice),t!==this.properties().stopPrice.value()&&this.properties().stopPrice._listeners.fire(this.properties().stopPrice))},o.prototype.start=function(){a.prototype.start.call(this),this.recalculate()},o.prototype.startMoving=function(e){e.price=this._roundPrice(e.price),a.prototype.startMoving.call(this,e)},o.prototype.move=function(e){e.price=this._roundPrice(e.price),a.prototype.move.call(this,e),this.recalculate(),this._entryPriceAxisView.update()},o.prototype.correctPoints=function(e){return!!this.isActualSymbol()&&a.prototype.correctPoints.call(this,[e[0],e[1]])},o.prototype.entryPrice=function(){return this.points()[0].price},o.prototype.findClosePoint=function(e,t){var i,o,n,r=this._model.mainSeries().bars(),a=s(r.firstIndex()),l=Math.max(e.index,a),c=s(r.lastIndex());for(i=l;i<=Math.min(c,t.index);i++)if(o=s(r.valueAt(i)),null!=(n=this.checkStopPrice(o)))return{index:i,price:n};return null},o.prototype.calculateActualEntry=function(e,t){var i,o,n=this._model.mainSeries().bars(),r=s(n.firstIndex()),a=Math.max(e.index,r),l=e.price,c=s(n.lastIndex());for(i=a;i<=Math.min(c,t.index);i++)if(o=s(n.valueAt(i)),o[TradingView.HIGH_PLOT]>=l&&o[TradingView.LOW_PLOT]<=l)return{index:i,price:l};return null},o.prototype.axisPoints=function(){var e,t,i;if(!this._points[p.ActualEntry])return[];if(e=this._points[p.ActualEntry],t=null,4===this._points.length)t=this._points[p.ActualClose];else{if(!(i=this.lastBarData()))return[];t={index:i.index,price:i.closePrice}}return[e,t]},o.prototype.getInputsPropertyPage=function(){return d.LineToolRiskRewardInputsPropertyPage},o.prototype.getStylesPropertyPage=function(){return d.LineToolRiskRewardStylesPropertyPage},inherit(n,o),n.prototype.i18nCache={title:$.t("Risk/Reward short")},n.prototype._recalculateQty=function(){var e,t,i,o,n;0!==this.points().length&&(e=this.properties(),t=e.entryPrice.value(),i=e.stopPrice.value(),o=e.riskSize.value(),n=Math.floor(o/Math.abs(i-t)),e.qty.setValue(n))},n.prototype._recalculateAmount=function(){var e,t,i,o,n,r,s,a;0!==this.points().length&&(e=this.properties(),t=e.accountSize.value(),i=e.entryPrice.value(),o=e.qty.value(),n=e.stopPrice.value(),r=e.targetPrice.value(),s=this._roundValue(t+(i-r)*o),a=this._roundValue(t-(n-i)*o),e.amountTarget.setValue(s),e.amountStop.setValue(a))},
n.prototype.title=function(){return this.i18nCache.title},n.prototype.stopPrice=function(){return this.entryPrice()+this.properties().stopLevel.value()/this._model.mainSeries().base()},n.prototype.profitPrice=function(){return this.entryPrice()-this.properties().profitLevel.value()/this._model.mainSeries().base()},n.prototype.calculatePL=function(e){return this.entryPrice()-e},n.prototype.preparseStopPrice=function(e){e=this._roundPrice(e);var t=this.entryPrice()+1/this._model.mainSeries().base();return Math.max(e,t)},n.prototype.preparseProfitPrice=function(e){e=this._roundPrice(e);var t=this.entryPrice()-1/this._model.mainSeries().base();return Math.min(e,t)},n.prototype.checkStopPrice=function(e){var t=this.stopPrice(),i=this.profitPrice();return e[TradingView.HIGH_PLOT]>=t?this.stopPrice():e[TradingView.LOW_PLOT]<=i?this.profitPrice():null},r.prototype.i18nCache={title:$.t("Risk/Reward long")},inherit(r,o),r.prototype._recalculateQty=function(){var e,t,i,o,n;0!==this.points().length&&(e=this.properties(),t=e.entryPrice.value(),i=e.stopPrice.value(),o=e.riskSize.value(),n=Math.floor(o/Math.abs(t-i)),e.qty.setValue(n))},r.prototype._recalculateAmount=function(){var e,t,i,o,n,r,s,a;0!==this.points().length&&(e=this.properties(),t=e.accountSize.value(),i=e.entryPrice.value(),o=e.qty.value(),n=e.stopPrice.value(),r=e.targetPrice.value(),s=this._roundValue(t+(r-i)*o),a=this._roundValue(t-(i-n)*o),e.amountTarget.setValue(s),e.amountStop.setValue(a))},r.prototype.stopPrice=function(){return this.entryPrice()-this.properties().stopLevel.value()/this._model.mainSeries().base()},r.prototype.profitPrice=function(){return this.entryPrice()+this.properties().profitLevel.value()/this._model.mainSeries().base()},r.prototype.calculatePL=function(e){return e-this.entryPrice()},r.prototype.preparseStopPrice=function(e){e=this._roundPrice(e);var t=this.entryPrice()-1/this._model.mainSeries().base();return Math.min(e,t)},r.prototype.preparseProfitPrice=function(e){e=this._roundPrice(e);var t=this.entryPrice()+1/this._model.mainSeries().base();return Math.max(e,t)},r.prototype.checkStopPrice=function(e){var t=this.stopPrice(),i=this.profitPrice();return e[TradingView.LOW_PLOT]<=t?this.stopPrice():e[TradingView.HIGH_PLOT]>=i?this.profitPrice():null},r.prototype.title=function(){return this.i18nCache.title},t.LineToolRiskReward=o,t.LineToolRiskRewardLong=r,t.LineToolRiskRewardShort=n}).call(t,i(58).PriceRange)},function(e,t,i){"use strict";(function(e){function o(t,i,n){var r,s;this.m_timeScale=t,r=i.rightAxisProperties.state(),r.autoScale=!0,this.m_rightPriceScale=new c(n.properties().scalesProperties,r),this.m_rightPriceScale.modeChanged().subscribe(this,this._onPriceScaleModeChanged.bind(this,this.m_rightPriceScale)),s=i.leftAxisProperties.state(),s.autoScale=!0,this.m_leftPriceScale=new c(n.properties().scalesProperties,s),this.m_leftPriceScale.modeChanged().subscribe(this,this._onPriceScaleModeChanged.bind(this,this.m_leftPriceScale)),this.m_dataSources=[],this.m_height=0,this.m_width=0,this.m_mainDataSource=null,
this._properties=i,this._model=n,this._tagsChanged=new e,this._destroyed=new e,this._leftPriceScaleRatioChanged=new e,this._rightPriceScaleRatioChanged=new e,this._leftPriceScaleRatioChanged.subscribe(this,this._mainSeriesPaneScaleRatioOnChange),this._rightPriceScaleRatioChanged.subscribe(this,this._mainSeriesPaneScaleRatioOnChange),this.m_timeScale.barSpacingChanged().subscribe(this,this._recalculatePriceScaleByScaleRatio),this.m_leftPriceScale.internalHeightChanged().subscribe(this,this._recalculatePriceScaleByScaleRatio),this.m_rightPriceScale.internalHeightChanged().subscribe(this,this._recalculatePriceScaleByScaleRatio),this.m_leftPriceScale.priceRangeChanged().subscribe(this,this._recalculateTimeScaleByLeftScaleRatio),this.m_rightPriceScale.priceRangeChanged().subscribe(this,this._recalculateTimeScaleByRightScaleRatio),this.m_leftPriceScale.priceRangeChanged().subscribe(this,this._onLeftPriceScaleSetMinMaxPriceRange),this.m_rightPriceScale.priceRangeChanged().subscribe(this,this._onRightPriceScaleSetMinMaxPriceRange),this._lastLeftPriceScaleRatio=h(this.m_timeScale,this.m_leftPriceScale),this._lastRightPriceScaleRatio=h(this.m_timeScale,this.m_rightPriceScale),i.topMargin.listeners().subscribe(this,o.prototype._updateMargins),i.bottomMargin.listeners().subscribe(this,o.prototype._updateMargins),this._updateMargins(),this._stretchFactor=o.DEFAULT_STRETCH_FACTOR,this._isInInsertManyDataSourcesState=!1,this._lastLineDataSourceZOrder=null,this._maximized=!1,this._isMainPane=!1}var n=i(272).ExecutionsPositionController,r=i(0).LineDataSource,s=i(58).PriceRange,a=i(30).PriceDataSource,l=i(5).getLogger("Chart.Pane"),c=i(180).PriceScale,h=i(120).scaleRatio,u=i(120).priceRangeByScaleRatio,d=i(120).barSpacingByScaleRatio;o.DEFAULT_STRETCH_FACTOR=1e3,o.PANE_ANIMATION_DURATION=500,o.sortSourcesPreOrdered={"Volume@tv-basicstudies":0,ChartEventsSource:1,"ESD$TV_DIVIDENDS@tv-scripting":2,"ESD$TV_SPLITS@tv-scripting":3,"ESD$TV_EARNINGS@tv-scripting":4,LineToolOrder:5,LineToolPosition:6,LineToolExecution:7},o.prototype.destroy=function(){var e,t;for(this._leftPriceScaleRatioChanged.unsubscribe(this,this._mainSeriesPaneScaleRatioOnChange),this._rightPriceScaleRatioChanged.unsubscribe(this,this._mainSeriesPaneScaleRatioOnChange),this.m_rightPriceScale.priceRangeChanged().unsubscribe(this,this._recalculateTimeScaleByRightScaleRatio),this.m_leftPriceScale.priceRangeChanged().unsubscribe(this,this._recalculateTimeScaleByLeftScaleRatio),this.m_timeScale.barSpacingChanged().unsubscribe(this,this._recalculatePriceScaleByScaleRatio),this.m_leftPriceScale.internalHeightChanged().unsubscribe(this,this._recalculatePriceScaleByScaleRatio),this.m_rightPriceScale.internalHeightChanged().unsubscribe(this,this._recalculatePriceScaleByScaleRatio),this.m_leftPriceScale.priceRangeChanged().unsubscribe(this,this._onLeftPriceScaleSetMinMaxPriceRange),this.m_rightPriceScale.priceRangeChanged().unsubscribe(this,this._onRightPriceScaleSetMinMaxPriceRange),this.m_leftPriceScale.modeChanged().unsubscribeAll(this),
this.m_rightPriceScale.modeChanged().unsubscribeAll(this),this._properties.topMargin.listeners().unsubscribe(this,o.prototype._updateMargins),this._properties.bottomMargin.listeners().unsubscribe(this,o.prototype._updateMargins),e=0;e<this.m_dataSources.length;e++)t=this.m_dataSources[e],t.destroy&&t.destroy();this._destroyed.fire()},o.prototype.setPaneSize=function(e){var t={large:1,medium:.6,small:.3,tiny:.15};if(!t[e])throw Error("Unknown size enum value: "+e);this._stretchFactor=t[e]*o.DEFAULT_STRETCH_FACTOR},o.sortSources=function(e){return e.map(function(e){var t,i,n=e._constructor;return isFunction(e.metaInfo)&&(n=e.metaInfo().id),i=o.sortSourcesPreOrdered[n]||0,t=i>0?1/0:i<0?-1/0:e.zorder(),[e,i,t]}).sort(function(e,t){return e[1]-t[1]||e[2]-t[2]}).map(function(e){return e[0]})},o.prototype._updateMargins=function(){var e,t,i=.01*this._properties.topMargin.value(),o=.01*this._properties.bottomMargin.value();for(this.m_leftPriceScale.setTopMargin(i),this.m_leftPriceScale.setBottomMargin(o),this.m_rightPriceScale.setTopMargin(i),this.m_rightPriceScale.setBottomMargin(o),e=0;e<this.m_dataSources.length;e++)(t=this.m_dataSources[e])instanceof TradingView.Study&&this.isOverlay(t)&&"Volume"!==t.metaInfo().shortId&&t.priceScale()&&t.priceScale()!==this.m_leftPriceScale&&t.priceScale()===this.m_rightPriceScale&&(t.priceScale().setTopMargin(i),t.priceScale().setBottomMargin(o),this.recalculatePriceScale(t.priceScale()));this.recalculatePriceScale(this.m_leftPriceScale),this.recalculatePriceScale(this.m_rightPriceScale),this.updateAllViews()},o.prototype.model=function(){return this._model},o.prototype.width=function(){return this.m_width},o.prototype.height=function(){return this.m_height},o.prototype.setWidth=function(e){this.m_width=e,this.updateAllViews()},o.prototype.setHeight=function(e){var t,i;for(this.m_height=e,this.m_leftPriceScale.setHeight(e),this.m_rightPriceScale.setHeight(e),t=0;t<this.m_dataSources.length;t++)i=this.m_dataSources[t],this.isOverlay(i)&&i.priceScale()&&i.priceScale().setHeight(e);this.updateAllViews()},o.prototype.leftPriceScale=function(){return this.m_leftPriceScale},o.prototype.rightPriceScale=function(){return this.m_rightPriceScale},o.prototype.timeScale=function(){return this.m_timeScale},o.prototype.dataSources=function(){return this.m_dataSources},o.prototype.isOverlay=function(e){return e._isOverlay},o.prototype._processMainSourceChange=function(){var e,t,i,n,s,l,c;if(null===this.m_mainDataSource)for(t=0;t<this.m_dataSources.length;t++)if(i=this.m_dataSources[t],TradingView.isInherited(i.constructor,a)&&!this.isOverlay(i)&&(!i.properties().linkedToSeries||!i.properties().linkedToSeries.value())){this.m_mainDataSource=i,e=!0;break}if(this.m_mainDataSource&&e){for(n=[],t=0;t<this.m_dataSources.length;t++)i=this.m_dataSources[t],TradingView.isInherited(i.constructor,r)&&n.push(i);for(n=o.sortSources(n),t=0;t<n.length;t++)this.move(n[t],this.m_mainDataSource.priceScale(),!0)
}else if(!this.m_mainDataSource||this.isOverlay(this.m_mainDataSource)&&0===this.nonOverlayPricesSourcesCount())for(t=0;t<this.m_dataSources.length;t++)if(i=this.m_dataSources[t],TradingView.isInherited(i.constructor,a)&&this.isOverlay(i)&&i.showInObjectTree()){for(this.m_mainDataSource=i,this.m_rightPriceScale.addDataSource(i),i.setPriceScale(this.m_rightPriceScale),s=this._model.children(i),c=0;c<s.length;c++)l=s[c],this.m_rightPriceScale.addDataSource(l),l.setPriceScale(this.m_rightPriceScale),l._isOverlay=!1;this.recalculatePriceScale(this.m_rightPriceScale),i._isOverlay=!1;break}},o.prototype._newZOrderForLineTool=function(){var e,t,i,o=null;for(e=0;e<this.m_dataSources.length;++e)(t=this.m_dataSources[e])instanceof r&&(i=t.zorder(),(null===o||i>o)&&(o=i));return null===o&&(o=this.getZOrderMinMax().minZOrder-1),this.m_dataSources.forEach(function(e){e.zorder()>o&&e.setZorder(e.zorder()+1)}),o+1},o.prototype.beginInsertManyLineDataSources=function(){this._isInInsertManyDataSourcesState=!0,this._lastLineDataSourceZOrder=null},o.prototype.endInsertManyLineDataSources=function(){this._isInInsertManyDataSourcesState=!1,this._lastLineDataSourceZOrder=null},o.prototype.addDataSource=function(e,t,i){var o;e instanceof r&&!i?(o=null!==this._lastLineDataSourceZOrder?this._lastLineDataSourceZOrder:this._newZOrderForLineTool(),this._isInInsertManyDataSourcesState&&(this._lastLineDataSourceZOrder=o)):o=this.getZOrderMinMax().minZOrder-1,this.insertDataSource(e,t,o)},o.prototype.insertDataSource=function(e,t,i){var n,r,s;this.m_dataSources.push(e),n=!1,e===this._model.mainSeries()?(this.m_mainDataSource=e,n=!0):null===this.m_mainDataSource&&(this.m_mainDataSource=e,n=!0),e._isOverlay=!1,null!==t||e.preferNoScale()||this.canHaveMoreNoScaleSources()||(t=this.rightPriceScale()),null===t&&(r=this.m_rightPriceScale.topMargin(),s=this.m_rightPriceScale.bottomMargin(),e.metaInfo&&"Volume@tv-basicstudies"===e.metaInfo().id&&(r=.75,s=0),t=new c(this._model.properties().scalesProperties),t.setHeight(this.m_height),t.setTopMargin(r),t.setBottomMargin(s),e._isOverlay=!0),t.addDataSource(e,this._isInInsertManyDataSourcesState),e.setPriceScale(t),e.onTagsChanged&&e.onTagsChanged().subscribe(this,o.prototype.onSourceTagsChanged),e.setZorder(i),n&&this._processMainSourceChange(),this._tagsChanged.fire(),TradingView.isInherited(e.constructor,a)&&this.recalculatePriceScale(t),this.invalidateSourcesCache()},o.prototype.removeDataSource=function(e,t){var i,n=this.m_dataSources.indexOf(e);if(-1===n)return void l.logDebug("removeDataSource: invalid data source");e._isOverlay=!1,this.m_dataSources.splice(n,1),e!==this.m_mainDataSource||t||(this.m_mainDataSource=null),i=null,-1!==this.m_leftPriceScale.dataSources().indexOf(e)?(this.m_leftPriceScale.removeDataSource(e),i=this.m_leftPriceScale):-1!==this.m_rightPriceScale.dataSources().indexOf(e)&&(this.m_rightPriceScale.removeDataSource(e),i=this.m_rightPriceScale),e.onTagsChanged&&e.onTagsChanged().unsubscribe(this,o.prototype.onSourceTagsChanged),
TradingView.isInherited(e.constructor,a)&&this._processMainSourceChange(),this._tagsChanged.fire(),i&&TradingView.isInherited(e.constructor,a)&&this.recalculatePriceScale(i),this.invalidateSourcesCache()},o.prototype.startScalePrice=function(e,t){e.startScale(t)},o.prototype.scalePriceTo=function(e,t){e.scaleTo(t),this.updateAllViews()},o.prototype.endScalePrice=function(e){e.endScale()},o.prototype.startScrollPrice=function(e,t){e.startScroll(t)},o.prototype.scrollPriceTo=function(e,t){e.scrollTo(t),this.updateAllViews()},o.prototype.endScrollPrice=function(e){e.endScroll()},o.prototype.setPriceAutoScale=function(e,t){if(e.setMode({autoScale:t}),this.timeScale().isEmpty())return void e.setPriceRange(null);this.recalculatePriceScale(e)},o.prototype.restorePriceScaleState=function(e,t){e.restoreState(t),this.updateAllViews()},o.prototype.updateAllViews=function(){for(var e=0;e<this.m_dataSources.length;e++)this.m_dataSources[e].updateAllViews()},o.prototype.defaultPriceScale=function(){var e=this.m_mainDataSource?this.m_mainDataSource.priceScale():this.rightPriceScale();return void 0===e&&(e=new c(this._model.properties().scalesProperties)),e},o.prototype._priceScaleIsPrice=function(e){var t=e.mainSource();return!!t&&(!!TradingView.isInherited(t.constructor,TradingView.Series)||!!TradingView.isInherited(t.constructor,TradingView.Study)&&t.metaInfo().is_price_study)},o.prototype.findSuitableScale=function(e){if(TradingView.isInherited(e.constructor,TradingView.Study)&&"Volume@tv-basicstudies"===e.metaInfo().id)return this.m_rightPriceScale.mainSource()||this.m_leftPriceScale.mainSource()?null:this.m_rightPriceScale;var t=!1;if(TradingView.isInherited(e.constructor,TradingView.Study)?t=e.metaInfo().is_price_study:TradingView.isInherited(e.constructor,TradingView.Series)&&(t=!0),t){if(this._priceScaleIsPrice(this.m_rightPriceScale))return this.m_rightPriceScale;if(this._priceScaleIsPrice(this.m_leftPriceScale))return this.m_leftPriceScale}return this.m_rightPriceScale.mainSource()?this.m_leftPriceScale.mainSource()?null:this.m_leftPriceScale:this.m_rightPriceScale},o.prototype.mainDataSource=function(){return this.m_mainDataSource},o.prototype.recalculatePriceScale=function(e){var t,i;e&&(t=e.sourcesForAutoscale(),e.isAutoScale()&&t&&t.length>0&&!this.timeScale().isEmpty()&&(i=this.timeScale().visibleBars(),e.recalculatePriceRange(i)),e.updatePaneViews())},o.prototype.resetPriceScale=function(e){var t=this.timeScale().visibleBars();e.isLockScale()||e.setMode({autoScale:!0}),e.recalculatePriceRange(t),this.updateAllViews()},o.prototype.recalculate=function(){var e,t;for(this.recalculatePriceScale(this.m_rightPriceScale),this.recalculatePriceScale(this.m_leftPriceScale),e=0;e<this.m_dataSources.length;e++)t=this.m_dataSources[e],!this.isOverlay(t)||t instanceof r||this.recalculatePriceScale(t.priceScale());this.updateAllViews(),this._model.updatePane(this)},o.prototype.isEmpty=function(){return null===this.m_mainDataSource},o.prototype.move=function(e,t,i){var o=this.m_dataSources.slice(),n=null!==t
;this.removeDataSource(e,n),this.addDataSource(e,t,i),this.m_dataSources=o,this.invalidateSourcesCache()},o.prototype.dataSourceForId=function(e){for(var t=0;t<this.m_dataSources.length;t++)if(this.m_dataSources[t].id()===e)return this.m_dataSources[t];return null},o.prototype.priceScaleForSource=function(e){return-1!==this.rightPriceScale().dataSources().indexOf(e)?this.rightPriceScale():-1!==this.leftPriceScale().dataSources().indexOf(e)?this.leftPriceScale():null},o.prototype.sourceById=function(e){for(var t=0;t<this.m_dataSources.length;t++)if(this.m_dataSources[t].id()===e)return this.m_dataSources[t];return null},o.prototype.containsMainSeries=function(){return-1!==this.m_dataSources.indexOf(this._model.mainSeries())},o.prototype.priceScaleByName=function(e){return"left"===e?this.m_leftPriceScale:"right"===e?this.m_rightPriceScale:null},o.prototype.priceScaleName=function(e){return e===this.m_leftPriceScale?"left":e===this.m_rightPriceScale?"right":""},o.prototype.hitTestSources=function(){var e,t,i,o,n;if(this._cachedHitTestSources)return this._cachedHitTestSources;for(e=this.orderedSources(),t=[],i=[this._model.crossHairSource()],o=0;o<e.length;o++)n=e[o],TradingView.isInherited(n.constructor,r)?t.push(n):i.push(n);return this._cachedHitTestSources=i.concat(t),this._cachedHitTestSources},o.prototype.orderedSources=function(){var e,t,i,n;if(this._cachedOrderedSoruces)return this._cachedOrderedSoruces;for(e=[],t=0,i=this.m_dataSources.length;t<i;t++)n=this.m_dataSources[t],TradingView.isInherited(n.constructor,r)&&!n.isActualSymbol()||e.push(n);return e=o.sortSources(e),this._cachedOrderedSoruces=e,e},o.prototype.createDrawingsCaches=function(){n.recreateOrderedByBarsSourcesCache(this)},o.prototype.clearDrawingCaches=function(){n.clearOrderedByBarsSourcesCache()},o.prototype.invalidateSourcesCache=function(){this._cachedOrderedSoruces=null,this._cachedHitTestSources=null,this.m_leftPriceScale.invalidateSourcesCache(),this.m_rightPriceScale.invalidateSourcesCache()},o.prototype.getZOrderMinMax=function(){var e,t,i,o,n=this.orderedSources();if(0===n.length)return{minZOrder:0,maxZOrder:0};for(e=n[0].zorder(),t=n[0].zorder(),i=1;i<n.length;i++)o=n[i],o.zorder()<e&&(e=o.zorder()),o.zorder()>t&&(t=o.zorder());return{minZOrder:e,maxZOrder:t}},o.prototype.isZOrderAvailable=function(e){var t,i;for(t=0;t<this.m_dataSources.length;t++)if(i=this.m_dataSources[t],i.zorder()===e)return!1;return!0},o.prototype.sendToBack=function(e){var t,i=this.getZOrderMinMax().minZOrder,o=Math.abs(e.zorder()-i);for(t=0;t<o;t++)this.changeZOrder(e,-1)},o.prototype.bringToFront=function(e){var t,i=this.getZOrderMinMax().maxZOrder,o=Math.abs(e.zorder()-i);for(t=0;t<o;t++)this.changeZOrder(e,1)},o.prototype.changeZOrder=function(e,t){var i,o,n,r,s,a=this.orderedSources().filter(function(e){return e.showInObjectTree()}),l=0;for(i=0,o=a.length;i<o;i++)if(a[i]===e){l=i;break}l>0&&t<0?(n=a[l-1].zorder(),r=e.zorder(),a[l-1].setZorder(r),e.setZorder(n)):l<a.length-1&&t>0&&(s=a[l+1].zorder(),r=e.zorder(),a[l+1].setZorder(r),e.setZorder(s)),
this.invalidateSourcesCache()},o.prototype.onSourceTagsChanged=function(){this._tagsChanged.fire()},o.prototype.onTagsChanged=function(){return this._tagsChanged},o.prototype.onDestroyed=function(){return this._destroyed},o.prototype.dumpPriceScale=function(e){var t,i,o,n=e.dataSources(),r=[];for(t=0;t<n.length;t++)if(i=n[t].priceAxisViews(this,e))for(o=0;o<i.length;o++)r.push(i[o].dump());return r},o.prototype.dumpViews=function(){var e,t,i,o,n,r={};for(r.paneViews={},e=this.orderedSources(),t=0;t<e.length;t++)if(i=e[t],r.paneViews[t]=[],o=i.paneViews())for(n=0;n<o.size();n++)r.paneViews[t].push(o.item(t).dump());return r.leftAxis=this.dumpPriceScale(this.m_leftPriceScale),r.rightAxis=this.dumpPriceScale(this.m_rightPriceScale),r},o.prototype.clearSeries=function(){for(var e=this.m_dataSources.length-1;e>=0;e--)TradingView.isInherited(this.m_dataSources[e].constructor,TradingView.Series)&&this.m_dataSources.splice(e,1)},o.prototype.nonOverlayPricesSourcesCount=function(){return this.m_dataSources.filter(function(e){return(!e.properties().linkedToSeries||!e.properties().linkedToSeries.value())&&(TradingView.isInherited(e.constructor,a)&&e.showInObjectTree()&&!e.isNoScale())}).length},o.prototype.canHaveMoreNoScaleSources=function(){return this.nonOverlayPricesSourcesCount()>1},o.prototype.actionNoScaleIsEnabled=function(e){return!(!this.isOverlay(e)&&TradingView.isInherited(e.constructor,a))||this.canHaveMoreNoScaleSources()},o.prototype.executionsPositionController=function(){return this._executionsPositionController||(this._executionsPositionController=new n(this,this._model.timeScale())),this._executionsPositionController},o.prototype.isLast=function(){var e=this._model.panes();return e[e.length-1]===this},o.prototype.setMaximized=function(e){this._maximized=e},o.prototype.isMaximized=function(){return this._maximized},o.prototype.isMainPane=function(){var e=this._model.mainSeries(),t=!1;return this.m_dataSources.forEach(function(i){t||(t=i===e)}),this._isMainPane=t,t},o.prototype.properties=function(){return this._properties},o.prototype._mainSourceVisiblePriceRange=function(e){var t=this.m_timeScale.visibleBars();return null!==t?e.mainSource().priceRange(t.firstBar(),t.lastBar()):new s(-.5,.5)},o.prototype.applyLeftPriceScaleRatio=function(e){this._lastLeftPriceScaleRatio!==e&&(this._setNewPriceRangeByScaleRatio(this.m_leftPriceScale,e,this._mainSourceVisiblePriceRange(this.m_leftPriceScale),!0,!0),this._tryToApplyNewLeftPriceScaleRatio(h(this.m_timeScale,this.m_leftPriceScale)))},o.prototype.applyRightPriceScaleRatio=function(e){this._lastRightPriceScaleRatio!==e&&(this._setNewPriceRangeByScaleRatio(this.m_rightPriceScale,e,this._mainSourceVisiblePriceRange(this.m_rightPriceScale),!0,!0),this._tryToApplyNewRightPriceScaleRatio(h(this.m_timeScale,this.m_rightPriceScale)))},o.prototype.isLeftPriceScaleLocked=function(){return!this.m_leftPriceScale.isLog()&&this.m_leftPriceScale.isLockScale()},o.prototype.isRightPriceScaleLocked=function(){return!this.m_rightPriceScale.isLog()&&this.m_rightPriceScale.isLockScale()
},o.prototype.leftPriceScaleRatio=function(){return null===this._lastLeftPriceScaleRatio&&(this._lastLeftPriceScaleRatio=h(this.m_timeScale,this.m_leftPriceScale)),this._lastLeftPriceScaleRatio},o.prototype.rightPriceScaleRatio=function(){return null===this._lastRightPriceScaleRatio&&(this._lastRightPriceScaleRatio=h(this.m_timeScale,this.m_rightPriceScale)),this._lastRightPriceScaleRatio},o.prototype._mainSeriesPaneScaleRatioOnChange=function(){this.isMainPane()&&(this._lastLeftPriceScaleRatio=null,this._lastRightPriceScaleRatio=null,this._model.mainSeriesScaleRatioPropertyOnChanged())},o.prototype._applyOldScaleRatioToPriceScale=function(e,t){if(this._isRecalculatingScales||null===t||void 0===t)return!1;this._isRecalculatingScales=!0,this._setNewPriceRangeByScaleRatio(e,t,this._mainSourceVisiblePriceRange(e)),this._isRecalculatingScales=!1},o.prototype._applyOldScaleRatioToTimeScale=function(e,t){if(this._isRecalculatingScales||null===t||void 0===t)return!1;this._isRecalculatingScales=!0,this._setNewBarSpacingByScaleRatio(e,t),this._isRecalculatingScales=!1},o.prototype._tryToApplyNewLeftPriceScaleRatio=function(e){if(this._lastLeftPriceScaleRatio===e||this.m_leftPriceScale.isLog())return!1;this._leftPriceScaleRatioChanged.fire(this._lastLeftPriceScaleRatio,e),this._lastLeftPriceScaleRatio=e},o.prototype._tryToApplyNewRightPriceScaleRatio=function(e){if(this._lastRightPriceScaleRatio===e||this.m_rightPriceScale.isLog())return!1;this._rightPriceScaleRatioChanged.fire(this._lastRightPriceScaleRatio,e),this._lastRightPriceScaleRatio=e},o.prototype._recalculatePriceScaleByScaleRatio=function(){this.isMainPane()&&(this.m_leftPriceScale.mainSource()&&(this.isLeftPriceScaleLocked()&&null!==this._lastLeftPriceScaleRatio?this._applyOldScaleRatioToPriceScale(this.m_leftPriceScale,this._lastLeftPriceScaleRatio):this._tryToApplyNewLeftPriceScaleRatio(h(this.m_timeScale,this.m_leftPriceScale))),this.m_rightPriceScale.mainSource()&&(this.isRightPriceScaleLocked()&&null!==this._lastRightPriceScaleRatio?this._applyOldScaleRatioToPriceScale(this.m_rightPriceScale,this._lastRightPriceScaleRatio):this._tryToApplyNewRightPriceScaleRatio(h(this.m_timeScale,this.m_rightPriceScale))))},o.prototype._recalculateTimeScaleByLeftScaleRatio=function(){this.isLeftPriceScaleLocked()&&null!==this._lastLeftPriceScaleRatio?this._applyOldScaleRatioToTimeScale(this.m_leftPriceScale,this._lastLeftPriceScaleRatio):this._tryToApplyNewLeftPriceScaleRatio(h(this.m_timeScale,this.m_leftPriceScale))},o.prototype._recalculateTimeScaleByRightScaleRatio=function(){this.isRightPriceScaleLocked()&&null!==this._lastRightPriceScaleRatio?this._applyOldScaleRatioToTimeScale(this.m_rightPriceScale,this._lastRightPriceScaleRatio):this._tryToApplyNewRightPriceScaleRatio(h(this.m_timeScale,this.m_rightPriceScale))},o.prototype._setNewPriceRangeByScaleRatio=function(e,t,i,o,n){var r=u(e,this.m_timeScale.barSpacing(),t);e.setPriceRange(null!==r?r:i,o,n)},o.prototype._setMinMaxPriceRange=function(e,t){
var i=u(e,this.m_timeScale.maxBarSpacing(),t),o=u(e,this.m_timeScale.minBarSpacing(),t);null!==i&&e.setMaxPriceRange(i),null!==o&&e.setMinPriceRange(o)},o.prototype._onLeftPriceScaleSetMinMaxPriceRange=function(){this._setMinMaxPriceRange(this.m_leftPriceScale,this._lastLeftPriceScaleRatio)},o.prototype._onRightPriceScaleSetMinMaxPriceRange=function(){this._setMinMaxPriceRange(this.m_rightPriceScale,this._lastRightPriceScaleRatio)},o.prototype._setNewBarSpacingByScaleRatio=function(e,t){var i=this.m_timeScale.getValidBarSpacing(d(e,t));this.m_timeScale.isValidBarSpacing(i)&&this.m_timeScale.setBarSpacing(i)},o.prototype._onPriceScaleModeChanged=function(e,t,i){if(t.percentage!==i.percentage){var o=this.timeScale().visibleBars();null!==o&&(e.recalculatePriceRange(o),e.updatePaneViews())}},t.Pane=o}).call(t,i(8))},function(e,t,i){"use strict";(function(e,o){function n(e,t){return t<0&&(e=-e),e/100*t+t}function r(e,t){var i=100*(e-t)/t;return t<0?-i:i}function s(e,t){var i=r(e.minValue(),t),o=r(e.maxValue(),t);return new g(i,o)}function a(e,t){if(this.m_base=e,this.m_integralDividers=t,this.m_fractionalDividers=[],u.isBaseDecimal(this.m_base))this.m_fractionalDividers=[2,2.5,2];else for(var i=this.m_base;1!==i;){if(i%2==0)this.m_fractionalDividers.push(2),i/=2;else{if(i%5!=0)throw new RangeError("unexpected base");this.m_fractionalDividers.push(2),this.m_fractionalDividers.push(2.5),i/=5}if(this.m_fractionalDividers.length>100)throw Error("something wrong with base")}}function l(e,t,i,o){this.m_marks=[],this.m_base=t,this.m_priceScale=e,this._currentFormatBase=0,this._coordinateToLogicalFunc=i,this._logicalToCoordinateFunc=o}function c(t,i){var n;this._properties=new e(i||h),this._scalesProperties=t,this.m_height=0,this._internalHeightCache=null,this._internalHeightChanged=new o,this.m_priceRange=null,this._priceRangeChanged=new o,this.m_dataSources=[],this.m_topMargin=0,this.m_bottomMargin=0,this._studyTopMargin=0,this._studyBottomMargin=0,this.m_scrollStartPoint=null,this.m_scaleStartPoint=null,this.m_maxPriceRange=null,this.m_minPriceRange=null,this.m_priceRangeSnapshot=null,this._invalidatedForRange={isValid:!0},this.onMarksChanged=new o,n=this,this._coordinateToLogicalFunc=function(e,t){return n._coordinateToLogical(e,t)},this._logicalToCoordinateFunc=function(e,t,i){return n._logicalToCoordinate(e,t,i)},this.m_markBuilder=new l(this,100,this._coordinateToLogicalFunc,this._logicalToCoordinateFunc),this._modeChanged=new o,this._sourcesForAutoscale=null,this._sourcesToUpdateViews=null,this._hasSeries=!1,n=this,this._properties.listeners().subscribe(null,function(){n.mainSource()&&n.mainSource().model()&&n.mainSource().model().fullUpdate()}),this._scalesProperties.listeners().subscribe(this,function(){this._marksCache=null})}var h,u=i(46),d=i(0).LineDataSource,p=i(30).PriceDataSource,_=i(65).Series,f=i(19).PriceFormatter,m=i(105).PercentageFormatter,g=i(58).PriceRange;a.prototype.TICK_SPAN_EPSILON=1e-9,a.prototype.tickSpan=function(e,t,i){
var o,n=0===this.m_base?0:1/this.m_base,r=this.TICK_SPAN_EPSILON,s=Math.pow(10,Math.max(0,Math.ceil(u.log10(e-t)))),a=0;for(a=0,o=this.m_integralDividers[0];s>n+r&&u.greaterOrEqual(s,n,r)&&u.greaterOrEqual(s,i*o,r)&&u.greaterOrEqual(s,1,r);++a,o=this.m_integralDividers[a%this.m_integralDividers.length])s/=o;if(s<=n+r&&(s=n),s=Math.max(1,s),this.m_fractionalDividers.length>0&&u.equal(s,1,r))for(a=0,o=this.m_fractionalDividers[0];s>n+r&&u.greaterOrEqual(s,i*o,r);++a,o=this.m_fractionalDividers[a%this.m_fractionalDividers.length])s/=o;return s},l.prototype.TICK_DENSITY=2.5,l.prototype.base=function(){return this.m_base},l.prototype.setBase=function(e){if(e<0)throw new RangeError("base < 0");this.m_base=e},l.prototype.fontHeight=function(){return this.m_priceScale.fontSize()},l.prototype.tickSpan=function(e,t){var i,o,n,r,s,l,c;if(e<t)throw new RangeError("high < low");return i=this.m_priceScale.height(),o=this.tickMarkHeight(),n=(e-t)*o/i,r=new a(this.m_base,[2,2.5,2]),s=new a(this.m_base,[2,2,2.5]),l=new a(this.m_base,[2.5,2,2]),c=[],c.push(r.tickSpan(e,t,n)),c.push(s.tickSpan(e,t,n)),c.push(l.tickSpan(e,t,n)),u.min(c)},l.prototype.tickMarkHeight=function(){return Math.ceil(this.fontHeight()*this.TICK_DENSITY)},l.prototype.rebuildTickMarks=function(){var e,t,i,o,n,r,s,a,l,c,h,u,d=this.m_priceScale;if(null===d)throw new TypeError("scale is null");if(d.isEmpty())return void(this.m_marks=[]);if(null===(e=d.mainSource()))return void(this.m_marks=[]);if(t=e.firstValue(),i=d.height(),o=this._coordinateToLogicalFunc(i-1,t),n=this._coordinateToLogicalFunc(0,t),n=Math.max(n,o),o=Math.min(n,o),n!==o)for(r=this.tickSpan(n,o),s=n%r,s+=s<0?r:0,this.m_marks=[],a=n>=o?1:-1,l=null,c=d.formatter(),h=n-s;h>o;h-=r)u=this._logicalToCoordinateFunc(h,t,!0),null!==l&&Math.abs(u-l)<this.tickMarkHeight()||(this.m_marks.push({coord:Math.round(u),label:c.format(h)}),l=u,d.isLog()&&(r=this.tickSpan(h*a,o)))},l.prototype.marks=function(){return this.m_marks},h={autoScale:!0,autoScaleDisabled:!1,lockScale:!1,percentage:!1,percentageDisabled:!1,log:!1,logDisabled:!1,alignLabels:!0},c.prototype.initScaleProperties=function(){var e=this.isLockScale();e&&(this.properties().percentage.setValue(!1),this.properties().log.setValue(!1),this.properties().autoScale.setValue(!1)),this.properties().percentageDisabled.setValue(e),this.properties().logDisabled.setValue(e),this.properties().autoScaleDisabled.setValue(this.properties().percentage.value()),this.properties().percentage.value()&&this.properties().log.setValue(!1)},c.prototype.isAutoScale=function(){return this._properties.autoScale.value()&&!this.isLockScale()},c.prototype.isLockScale=function(){return this._properties.lockScale.value()},c.prototype.isLog=function(){return this._properties.log.value()},c.prototype.isPercentage=function(){return this._properties.percentage.value()},c.prototype._convertPriceRangeFromLog=function(e){var t,i;return null===e?null:(t=this._fromLog(e.minValue()),i=this._fromLog(e.maxValue()),new g(t,i))},c.prototype._convertPriceRangeToLog=function(e){var t,i
;return null===e?null:(t=this._toLog(e.minValue()),i=this._toLog(e.maxValue()),new g(t,i))},c.prototype._canConvertPriceRangeFromLog=function(e){var t,i;return null!==e&&(t=this._fromLog(e.minValue()),i=this._fromLog(e.maxValue()),isFinite(t)&&isFinite(i))},c.prototype._setAutoScaleValueWithDependentProperties=function(e){!e&&this._properties.autoScale.value()&&this._properties.percentage.value()&&this._properties.percentage.setValueSilently(e),this._properties.autoScale.setValueSilently(e),this._properties.lockScale.value()&&e&&(this._properties.lockScale.setValueSilently(!1),this._properties.percentageDisabled.setValueSilently(!1),this._properties.logDisabled.setValueSilently(!1))},c.prototype._setLockScaleValueWithDependentProperties=function(e){this._properties.lockScale.setValueSilently(e),e&&(this._properties.autoScale.setValueSilently(!1),this._properties.percentage.setValueSilently(!1),this._properties.log.setValueSilently(!1),this._properties.autoScaleDisabled.setValueSilently(!e)),this._properties.percentageDisabled.setValueSilently(e),this._properties.logDisabled.setValueSilently(e)},c.prototype._setPercentageValueWithDependentProperties=function(e){this._properties.percentage.setValueSilently(e),this._properties.autoScaleDisabled.setValueSilently(e),e&&this._properties.autoScale.setValueSilently(!0),this._properties.log.value()&&e&&this._properties.log.setValueSilently(!1),this._properties.lockScale.value()&&e&&this._properties.lockScale.setValueSilently(!1)},c.prototype._setLogValueWithDependentProperties=function(e){this._properties.log.setValueSilently(e),this._properties.percentage.value()&&e&&(this._properties.percentage.setValueSilently(!1),this._properties.autoScaleDisabled.setValueSilently(!1)),this._properties.lockScale.value()&&e&&this._properties.lockScale.setValueSilently(!1)},c.prototype.mode=function(){return{autoScale:this._properties.autoScale.value(),lockScale:this._properties.lockScale.value(),percentage:this._properties.percentage.value(),log:this._properties.log.value()}},c.prototype.setMode=function(e){var t={},i=this.mode(),o=null;void 0!==e.autoScale&&e.autoScale!==i.autoScale&&(t.autoScale=e.autoScale,this._setAutoScaleValueWithDependentProperties(e.autoScale)),void 0!==e.lockScale&&e.lockScale!==i.lockScale&&(t.lockScale=e.lockScale,this._setLockScaleValueWithDependentProperties(e.lockScale)),void 0!==e.percentage&&e.percentage!==i.percentage&&(t.percentage=e.percentage,this._setPercentageValueWithDependentProperties(e.percentage)),void 0!==e.log&&e.log!==i.log&&(t.log=e.log,this._setLogValueWithDependentProperties(e.log)),i.log&&!this._properties.log.value()&&(this._canConvertPriceRangeFromLog(this.m_priceRange)?null!==(o=this._convertPriceRangeFromLog(this.m_priceRange))&&this.setPriceRange(o):this.properties().autoScale.setValue(!0)),!i.log&&this._properties.log.value()&&null!==(o=this._convertPriceRangeToLog(this.m_priceRange))&&this.setPriceRange(o),i.autoScale!==this._properties.autoScale.value()&&this._properties.autoScale.listeners().fire(this._properties.autoScale),
i.autoScaleDisabled!==this._properties.autoScaleDisabled.value()&&this._properties.autoScaleDisabled.listeners().fire(this._properties.autoScaleDisabled),i.lockScale!==this._properties.lockScale.value()&&this._properties.lockScale.listeners().fire(this._properties.lockScale),i.percentage!==this._properties.percentage.value()&&(this._properties.percentage.listeners().fire(this._properties.percentage),this.updateFormatter()),i.percentageDisabled!==this._properties.percentageDisabled.value()&&this._properties.percentageDisabled.listeners().fire(this._properties.percentageDisabled),i.log!==this._properties.log.value()&&this._properties.log.listeners().fire(this._properties.log),i.logDisabled!==this._properties.logDisabled.value()&&this._properties.logDisabled.listeners().fire(this._properties.logDisabled),void 0===t.log&&void 0===t.percentage&&void 0===t.lockScale&&void 0===t.autoScale||this._modeChanged.fire(i,this.mode())},c.prototype.modeChanged=function(){return this._modeChanged},c.prototype.properties=function(){return this._properties},c.prototype.fontSize=function(){return this._scalesProperties.fontSize.value()},c.prototype.height=function(){return this.m_height},c.prototype.setHeight=function(e){this.m_height!==e&&(this.m_height=e,this._invalidateInternalHeightCache(),this._marksCache=null)},c.prototype.topMargin=function(){return Math.max(this.m_topMargin,this._studyTopMargin)},c.prototype.setTopMargin=function(e){if(!isNumber(e))throw new TypeError("invalid margin");if(e<0||e>30)throw new RangeError("invalid margin");this.m_topMargin!==e&&(this.m_topMargin=e,this._invalidateInternalHeightCache(),this._marksCache=null)},c.prototype.bottomMargin=function(){return Math.max(this.m_bottomMargin,this._studyBottomMargin)},c.prototype.setBottomMargin=function(e){if(!isNumber(e))throw new TypeError("invalid margin");if(e<0||e>30)throw new RangeError("invalid margin");this.m_bottomMargin!==e&&(this.m_bottomMargin=e,this._invalidateInternalHeightCache(),this._marksCache=null)},c.prototype.internalHeight=function(){if(this._internalHeightCache)return this._internalHeightCache;var e=this.height()*(1-this.topMargin()-this.bottomMargin());return this._internalHeightCache=e,e},c.prototype._invalidateInternalHeightCache=function(){this._internalHeightCache=null,this._internalHeightChanged.fire()},c.prototype.internalHeightChanged=function(){return this._internalHeightChanged},c.prototype.priceRange=function(){return this.makeSureItIsValid(),this.m_priceRange},c.prototype.priceRangeChanged=function(){return this._priceRangeChanged},c.prototype.setPriceRange=function(e,t,i){var o,n,r;if(!(e instanceof g))throw new TypeError("incorrect price range");return o=this.m_priceRange,!!(t||null===o&&null!==e||null!==o&&!o.equals(e))&&(n=null!==this.m_maxPriceRange&&this.m_maxPriceRange.containsStrictly(e),r=null!==this.m_minPriceRange&&e.containsStrictly(this.m_minPriceRange),!(this.isLockScale()&&!t&&(n||r))&&(this._marksCache=null,this.m_priceRange=e,void(i||this._priceRangeChanged.fire(o,e))))},c.prototype.isEmpty=function(){
return this.makeSureItIsValid(),0===this.m_height||!this.m_priceRange||this.m_priceRange.isEmpty()},c.prototype.invertedCoordinate=function(e){return this.height()-1-e},c._logicalOffset=4,c._coordOffset=1e-4,c.prototype._toLog=function(e){var t,i=Math.abs(e);return i<1e-8?0:(t=u.log10(i+c._coordOffset)+c._logicalOffset,e<0?-t:t)},c.prototype.priceToLogical=function(e){return this.isLog()&&e?this._toLog(e):e},c.prototype._fromLog=function(e){var t,i=Math.abs(e);return i<1e-8?0:(t=Math.pow(10,i-c._logicalOffset)-c._coordOffset,e<0?-t:t)},c.prototype.logicalToPrice=function(e){return this.isLog()?this._fromLog(e):e},c.prototype._logicalToCoordinate=function(e,t,i){var o,n;return this.makeSureItIsValid(),this.isEmpty()?0:(e=this.priceToLogical(e),o=this.bottomMargin()*this.height()+(this.internalHeight()-1)*(e-this.priceRange().minValue())/(this.priceRange().maxValue()-this.priceRange().minValue()),n=this.invertedCoordinate(o),i?n:Math.round(n))},c.prototype.priceToCoordinate=function(e,t,i){return this.isPercentage()&&(e=r(e,t)),this._logicalToCoordinate(e,t,i)},c.prototype.pointsArrayToCoordinates=function(e,t){var i,o,n,s,a,l,c,h,u;if(this.makeSureItIsValid(),i=this.bottomMargin()*this.height(),o=this.priceRange().minValue(),n=this.priceRange().maxValue(),s=this.internalHeight()-1,a=s/(n-o),this.isPercentage())for(l=0;l<e.length;l++)e[l].y=r(e[l].y,t);if(this.isLog())for(l=0;l<e.length;l++)e[l].y=this.priceToLogical(e[l].y);for(l=0;l<e.length;l++)c=e[l].y,TradingView.isNaN(c)||void 0===c||null===c||(h=i+a*(c-o),u=this.m_height-1-h,e[l].y=Math.round(u))},c.prototype.pricesArrayToCoordinates=function(e,t){var i,o,n,s,a,l,c,h,u;if(this.makeSureItIsValid(),i=this.bottomMargin()*this.height(),o=this.priceRange().minValue(),n=this.priceRange().maxValue(),s=this.internalHeight()-1,a=s/(n-o),this.isPercentage())for(l=0;l<e.length;l++)e[l]=r(e[l],t);if(this.isLog())for(l=0;l<e.length;l++)e[l]=this.priceToLogical(e[l]);for(l=0;l<e.length;l++)void 0!==(c=e[l])&&null!==c&&(h=i+a*(c-o),u=this.m_height-1-h,e[l]=Math.round(u))},c.prototype.barPricesToCoordinates=function(e,t){var i,o,n,s,a,l,c,h,u,d,p;if(this.makeSureItIsValid(),i=e,o=this.bottomMargin()*this.height(),n=this.priceRange().minValue(),s=this.priceRange().maxValue(),a=this.internalHeight()-1,this.isPercentage())for(l=0;l<i.length;l++)i[l]&&(i[l].open=r(i[l].open,t),i[l].high=r(i[l].high,t),i[l].low=r(i[l].low,t),i[l].close=r(i[l].close,t),i[l].additionalPrice&&(i[l].additionalPrice=r(i[l].additionalPrice,t)));if(c=a/(s-n),this.isLog())for(l=0;l<i.length;l++)i[l]&&(i[l].open=this.priceToLogical(i[l].open),i[l].high=this.priceToLogical(i[l].high),i[l].low=this.priceToLogical(i[l].low),i[l].close=this.priceToLogical(i[l].close),i[l].additionalPrice&&(i[l].additionalPrice=this.priceToLogical(i[l].additionalPrice)));for(l=0;l<i.length;l++)(h=i[l])&&(u=h.open,d=o+c*(u-n),p=this.m_height-1-d,h.open=Math.round(p),u=h.high,d=o+c*(u-n),p=this.m_height-1-d,h.high=Math.round(p),u=h.low,d=o+c*(u-n),p=this.m_height-1-d,h.low=Math.round(p),u=h.close,d=o+c*(u-n),p=this.m_height-1-d,
h.close=Math.round(p),h.additionalPrice&&(u=h.additionalPrice,d=o+c*(u-n),p=this.m_height-1-d,h.additionalPrice=Math.round(p)))},c.prototype._coordinateToLogical=function(e,t){var i,o;return this.makeSureItIsValid(),this.isEmpty()?0:(i=this.invertedCoordinate(e),o=this.priceRange().minValue()+(this.priceRange().maxValue()-this.priceRange().minValue())*((i-this.bottomMargin()*this.height())/(this.internalHeight()-1)),this.logicalToPrice(o))},c.prototype.coordinateToPrice=function(e,t){var i=this._coordinateToLogical(e,t);return this.isPercentage()&&(i=n(i,t)),i},c.prototype.dataSources=function(){return this.m_dataSources},c.prototype.orderedSources=function(){var e,t,o,n;if(this._cachedOrderedSoruces)return this._cachedOrderedSoruces;for(e=[],t=0;t<this.m_dataSources.length;t++)o=this.m_dataSources[t],null==o.zorder()&&o.setZorder(t+1),e.push(o);return n=i(179).Pane,e=n.sortSources(e),this._cachedOrderedSoruces=e,this._cachedOrderedSoruces},c.prototype.invalidateSourcesCache=function(){this._cachedOrderedSoruces=null},c.prototype.hasSeries=function(){return this._hasSeries},c.prototype.addDataSource=function(e,t){var i,o;(t||-1===this.m_dataSources.indexOf(e))&&(TradingView.isInherited(e.constructor,_)&&(i=e.properties(),!0!==this._hasSeries&&(i.lockScale&&(this.setMode({lockScale:i.lockScale.value()}),i.removeProperty("lockScale")),i.pnfStyle.lockScale&&i.pnfStyle.removeProperty("lockScale")),this._hasSeries=!0),o=this,e.properties().visible.listeners().subscribe(null,function(){o._sourcesForAutoscale=null}),this.m_dataSources.push(e),this._mainSource=void 0,this._sourcesForAutoscale=null,this._sourcesToUpdateViews=null,this.updateFormatter(),this.initScaleProperties(),this.invalidateSourcesCache())},c.prototype.removeDataSource=function(e){var t=this.m_dataSources.indexOf(e);if(-1===t)throw Error("source is not attached to scale");this.m_dataSources.splice(t,1),TradingView.isInherited(e.constructor,_)&&(this._hasSeries=!1),this.mainSource()||this.setMode({autoScale:!0}),this._mainSource=void 0,this._sourcesForAutoscale=null,this._sourcesToUpdateViews=null,this.updateFormatter(),this.invalidateSourcesCache()},c.prototype.isScaled=function(){return"number"==typeof this.m_scaleStartPoint},c.prototype.startScale=function(e){this.isPercentage()||null===this.m_scaleStartPoint&&null===this.m_priceRangeSnapshot&&(this.isEmpty()||(this.m_scaleStartPoint=this.m_height-e,this.m_priceRangeSnapshot=this.priceRange().clone()))},c.prototype.marks=function(){return this._marksCache?this._marksCache:(this.m_markBuilder.rebuildTickMarks(),this._marksCache=this.m_markBuilder.marks(),this.onMarksChanged.fire(),this._marksCache)},c.prototype.setMaxPriceRange=function(e){this.m_maxPriceRange=e},c.prototype.setMinPriceRange=function(e){this.m_minPriceRange=e},c.prototype.scaleTo=function(e){var t,i;this.isPercentage()||null!==this.m_scaleStartPoint&&(this.setMode({autoScale:!1}),e=this.m_height-e,e<0&&(e=0),t=(this.m_scaleStartPoint+.2*(this.m_height-1))/(e+.2*(this.m_height-1)),i=this.m_priceRangeSnapshot.clone(),t=Math.max(t,.1),
i.scaleAroundCenter(t),this.setPriceRange(i))},c.prototype.endScale=function(){this.isPercentage()||null!==this.m_scaleStartPoint&&(this.m_scaleStartPoint=null,this.m_priceRangeSnapshot=null)},c.prototype.startScroll=function(e){this.isAutoScale()||null===this.m_scrollStartPoint&&null===this.m_priceRangeSnapshot&&(this.isEmpty()||(this.m_scrollStartPoint=e,this.m_priceRangeSnapshot=this.priceRange().clone()))},c.prototype.scrollTo=function(e){var t,i,o,n;this.isAutoScale()||null!==this.m_scrollStartPoint&&(t=this.priceRange().length()/(this.height()-1),i=e-this.m_scrollStartPoint,o=i*t,n=this.m_priceRangeSnapshot.clone(),n.shift(o),this.setPriceRange(n,!0),this._marksCache=null)},c.prototype.endScroll=function(){this.isAutoScale()||null!==this.m_scrollStartPoint&&(this.m_scrollStartPoint=null,this.m_priceRangeSnapshot=null)},c.prototype.state=function(){var e={};return e.m_priceRange=this.priceRange()&&!this.isPercentage()?this.priceRange().serialize():null,e.m_isAutoScale=this.isAutoScale(),e.m_isPercentage=this._properties.percentage.value(),e.m_isLog=this._properties.log.value(),e.m_isLockScale=this.isLockScale(),e.m_height=this.m_height,e.m_topMargin=this.m_topMargin,e.m_bottomMargin=this.m_bottomMargin,e},c.prototype.restoreState=function(e){var t,i=e.m_priceRange;if(void 0===i)throw new TypeError("invalid state");if(void 0===e.m_isAutoScale)throw new TypeError("invalid state");t={autoScale:e.m_isAutoScale},void 0!==e.m_isPercentage&&(t.percentage=e.m_isPercentage),void 0!==e.m_isLog&&(t.log=e.m_isLog),void 0!==e.m_isLockScale&&(t.lockScale=e.m_isLockScale),i?(i instanceof g||(i=new g(i)),this.setPriceRange(i,!0)):this.m_priceRange=null,void 0!==e.m_height&&(this.m_height=Math.max(0,e.m_height)),this.setMode(t),void 0!==e.m_topMargin&&(this.m_topMargin=e.m_topMargin),void 0!==e.m_bottomMargin&&(this.m_bottomMargin=e.m_bottomMargin),this._mainSource=void 0,this._scaleSeriesOnly=!1},c.prototype.mainSource=function(){var e,t;if(void 0!==this._mainSource)return this._mainSource;for(e=void 0,t=0;t<this.m_dataSources.length;t++){if(TradingView.isInherited(this.m_dataSources[t].constructor,_)){e=this.m_dataSources[t];break}!e&&TradingView.isInherited(this.m_dataSources[t].constructor,p)&&(e=this.m_dataSources[t])}return this._mainSource=e,this._mainSource||null},c.prototype.formatter=function(){return this._formatter||this.updateFormatter(),this._formatter},c.prototype.formatPrice=function(e,t){return this.isPercentage()&&(e=r(e,t)),this.formatter().format(e)},c.prototype.updateFormatter=function(){var e,t;this._marksCache=null,e=this.mainSource(),t=100,e&&(t=e.base()),this._formatter=null,this.isPercentage()?this._formatter=new m:this._formatter=e?e.formatter():new f(100,1),this.m_markBuilder=new l(this,t,this._coordinateToLogicalFunc,this._logicalToCoordinateFunc),this.m_markBuilder.rebuildTickMarks()},c.prototype._recalculateSourcesForAutoscale=function(){var e,t;this._mainSource&&(this._scaleSeriesOnly=this._scalesProperties.scaleSeriesOnly.value()),e=this._scaleSeriesOnly&&this._hasSeries,t=function(t){
return!!(t.properties().visible.value()||t instanceof _)&&(e?TradingView.isInherited(t.constructor,_):TradingView.isInherited(t.constructor,p))},this._sourcesForAutoscale=this.m_dataSources.filter(t)},c.prototype.sourcesForAutoscale=function(){return this._mainSource&&this._scaleSeriesOnly!==this._scalesProperties.scaleSeriesOnly.value()&&(this._sourcesForAutoscale=null),this._sourcesForAutoscale||this._recalculateSourcesForAutoscale(),this._sourcesForAutoscale},c.prototype.recalculatePriceRange=function(e){this._invalidatedForRange={visibleBars:e,isValid:!1}},c.prototype.makeSureItIsValid=function(){this._invalidatedForRange.isValid||(this._invalidatedForRange.isValid=!0,this.recalculatePriceRangeImpl())},c.prototype.recalculatePriceRangeImpl=function(){var e,t,i,o,n,r,a,l,c,h,u,d,p=this._invalidatedForRange.visibleBars;if(null!==p){for(e=null,t=this.sourcesForAutoscale(),i=0,o=0,n=this.isPercentage(),r=0;r<t.length;r++)a=t[r],a.properties().visible.value()&&(l=p.firstBar(),c=p.lastBar(),h=a.priceRange(l,c),h&&(n&&(u=a.firstValue(),h=s(h,u)),e=null===e?h:e.merge(h)),a.margins&&(d=a.margins(),i=Math.max(d[0],i),o=Math.max(d[1],o)));(Math.abs(o-this._studyBottomMargin)>.01||Math.abs(i-this._studyTopMargin)>.01)&&(this._studyBottomMargin=o,this._studyTopMargin=i,this._marksCache=null,this._invalidateInternalHeightCache()),e?(e.minValue()===e.maxValue()&&(e=new g(e.minValue()-.5,e.maxValue()+.5)),this.setPriceRange(e)):this.m_priceRange||this.setPriceRange(new g(-.5,.5)),this._invalidatedForRange.isValid=!0}},c.prototype.sourcesToUpdateViews=function(){var e,t;if(!this._sourcesToUpdateViews)for(this._sourcesToUpdateViews=[],e=0;e<this.m_dataSources.length;e++)t=this.m_dataSources[e],TradingView.isInherited(t.constructor,d)&&!t.isActualSymbol()||this._sourcesToUpdateViews.push(t);return this._sourcesToUpdateViews},c.prototype.updatePaneViews=function(){var e,t=this.sourcesToUpdateViews();for(e=0;e<t.length;e++)t[e].updateAllViews()},c.prototype.priceRangeInPrice=function(){var e,t,i,o,n,r;return this.isEmpty()?null:null===(e=this.m_priceScale)?null:null===(t=e.mainSource())?null:(i=t.firstValue(),o=this.height(),n=this.coordinateToPrice(o-1,i),r=this.coordinateToPrice(0,i),{from:n,to:r})},t.PriceScale=c}).call(t,i(12),i(8))},function(e,t,i){"use strict";function o(e,t,i){this.source=e,this.pane=t,this._rendererFactory=i}function n(e,t){this._barWidth=e.barWidth,this._plates=e.plates,this._tooltip=e.tooltip,this._model=t}function r(){this._layout=[],this._currentId=void 0,this.tooltipHovered=!1}var s=i(6).Point,a=i(61).pointInCircle,l=i(9).HitTestResult;o.prototype.update=function(){},o.prototype.renderer=function(){return this._rendererFactory(this.source)},n.prototype.draw=function(e){e.save();for(var t=0;t<this._plates.length;t++)if(this._plates[t].highlightByAuthor){this._highlightByAuthor=!0;break}this._plates.forEach(this._drawItem.bind(this,e)),this._tooltip.draw(this._plates.map(function(e){return this._plateTransform(e)}.bind(this)),e),this._tooltip.endDraw(),e.restore()},n.prototype._drawItem=function(e,t){
e.save(),this._highlightByAuthor&&!t.highlightByAuthor&&(e.globalAlpha=.4);var i=this._dotTransform(t);i.mine?this._drawTriangle(e,i):this._drawDot(e,i),e.restore()},n.prototype._commonTransform=function(e){var t=Math.max(1.4*e.minSize,this._barWidth+4),i=e.y+{up:-1,down:1}[e.direction]*(t*(e.order+.6)+.25*t),o=TradingView.clone(e.overridedTheme||this.themes[e.theme]);return o.dotBorderWidth=e.hovered||e.highlightByAuthor?4:2,{id:e.id,theme:o,themeName:e.theme,x:Math.round(e.x+1),y:Math.round(i),pinned:e.pinned,hovered:e.hovered}},n.prototype._dotTransform=function(e){var t=this._commonTransform(e);return t.radius=Math.max(e.minSize/2,.4*this._barWidth),t.label=e.label,t.labelFontColor=e.labelFontColor,t.labelFontSize=Math.ceil(Math.max(10,Math.min(t.radius,20))),this._model.updateDotData(e,t)},n.prototype._plateTransform=function(e){var t=this._commonTransform(e);return this._model.updatePlateData(e,t)},n.THEMES=["green","red","neutral","yellow","blue"],n.prototype.themes={green:{border:"#78C143",background:"#8DDD54"},red:{border:"#CC4545",background:"#ED5A5A"},neutral:{border:"#EAC300",background:"#FFD400"},yellow:{border:"#EAC300",background:"#FFD400"},blue:{border:"#047ACE",background:"#0496FF"}},n.prototype._drawTriangle=function(e,t){var i,o,n,r;e.strokeStyle=t.theme.border,e.fillStyle=t.theme.background,e.lineWidth=t.theme.dotBorderWidth,i=t,o=t.radius,n=Math.cos(Math.PI/6)*o,r=Math.sin(Math.PI/6)*o,e.translate(i.x,i.y),"up"===t.direction&&e.rotate(Math.PI),t.public||(e.lineWidth/=2),e.beginPath(),e.moveTo(0,-o),e.lineTo(n,r),e.lineTo(-n,r),e.lineTo(0,-o),e.closePath(),e.stroke(),t.public&&e.fill()},n.prototype._drawDot=function(e,t){e.strokeStyle=t.theme.border,e.fillStyle=t.theme.background,e.lineWidth=t.theme.dotBorderWidth,e.beginPath(),e.arc(t.x,t.y,t.radius,0,2*Math.PI,!0),e.closePath(),e.stroke(),e.fill(),t.label&&t.radius>6&&(e.textAlign="center",e.textBaseline="middle",e.font="bold "+t.labelFontSize+"px Arial",e.fillStyle=t.labelFontColor,e.fillText(t.label,t.x,t.y))},n.prototype.hitTest=function(e){var t,i;for(i=this._plates.length-1;i>=0;--i)if(t=this._hitTestDot(this._plates[i],e))return t;return null},n.prototype._hitTestDot=function(e,t){var i=this._dotTransform(e),o=new s(i.x,i.y);return a(t,o,Math.max(i.radius,8))?new l(l.REGULAR,e):null},r.prototype._createLayout=function(){throw Error("Child class must override this member")},r.prototype._updatePlate=function(e){throw Error("Child class must override this member")},r.prototype._getContainer=function(e){return this._container&&this._context===e||(this._context=e,this._container=$(e.canvas).parent()),this._container},r.prototype._plateArrowSize=14,r.prototype.showPlate=function(e,t){var i,o,n,r,s,a,l,c;this._currentId===e.id&&this._layout&&0!==this._layout.length&&null!=this._layout[0].parentNode||(this._currentId=e.id,this._createLayout(),this._getContainer(t).append(this._layout),i=this,this._layout.hover(function(){i.tooltipHovered=!0,$(this).stop(!0).fadeTo(0,1)},function(){i.tooltipHovered=!1})),o=Math.round(e.barWidth/2),o>15&&(o=15),
o<10&&(o=10),this._updatePlate(e),n=t.canvas.getBoundingClientRect(),r=e.x-this._layout.outerWidth()<this._plateArrowSize,s=n.width-e.x+Math.round(e.barWidth/2+o),r&&(s-=this._layout.outerWidth()+2*this._plateArrowSize),a=n.height,l=20,c=10,this._layout.toggleClass("right",r),this._layout.css({top:Math.min(Math.max(e.y,l),a-this._layout.outerHeight()-c),right:s,fontSize:o+"px",display:"block"})},r.prototype._removeLayout=function(){this.tooltipHovered||(this._layout.stop(!0),this._layout.remove())},r.prototype._toggleLayout=function(e){this._layout.toggle(e)},r.prototype.hide=function(e){this.tooltipHovered?this._layout.stop(!0).fadeTo(0,1):this._layout.fadeOut(400,function(){$(this).remove(),e()})},r.prototype.setSource=function(e){this.source=e},t.BarsMarksContainerPaneView=o,t.BarsMarksContainerRenderer=n,t.BarMarkTooltip=r},function(e,t,i){"use strict";var o={};o.renderAttributes=function(e){var t,i="";for(t in e)e[t]&&(i+=" "+t+'="'+e[t]+'"');return i},o.create=function(e,t){var i=$(document.createElement(e));return t&&(t.html&&(i.html(t.html),delete t.html),i.attr(t)),i},o.validAttributes=["abbr","accept-charset","accept","accesskey","action","align","alink","alt","archive","axis","background","bgcolor","border","cellpadding","cellspacing","char","charoff","charset","checked","cite","class","classid","clear","code","codebase","codetype","color","cols","colspan","compact","content","coords","data","datetime","declare","defer","dir","disabled","enctype","face","for","frame","frameborder","headers","height","href","hreflang","hspace","http-equiv","id","ismap","label","lang","language","link","longdesc","marginheight","marginwidth","maxlength","media","method","multiple","name","nohref","noresize","noshade","nowrap","object","onblur","onchange","onclick","ondblclick","onfocus","onkeydown","onkeypress","onkeyup","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","onreset","onselect","onsubmit","onunload","profile","prompt","readonly","rel","rev","rows","rowspan","rules","scheme","scope","scrolling","selected","shape","size","span","src","standby","start","style","summary","tabindex","target","text","title","type","usemap","valign","value","valuetype","version","vlink","vspace","width"],o.validAttribute=function(e){return-1!==jQuery.inArray(e,o.validAttributes)},o.cleanAttributes=function(e){return jQuery.each(e,function(t,i){o.validAttribute(t)||delete e[t]}),e},e.exports=o},function(e,t,i){function o(e,t,i,s,a){if(!i)return void r.logDebug("Missed undo model");n.call(this,e,t,!0,i,s),a?e.callbacks().subscribe(this,a):e.callbacks().subscribe(this,o.prototype.onActionCallback)}var n=i(313).Binding,r=i(5).getLogger("Chart.PropertyPage.ActionBinder");inherit(o,n),o.prototype.onActionCallback=function(e){this._undoModel.setProperty(this._property,this.value(),this._undoText)},o.prototype.value=function(){return this.control().checked},o.prototype.setValue=function(e){return this.control().checked=!!e},t.ActionBinder=o},function(e,t,i){"use strict";var o=function(){function e(e){switch(e){
case"c67":case"m67":case"c45":return"copy";case"c86":case"m86":case"s45":return"paste";case"c88":case"m88":case"s46":return"cut"}}function t(e){var t=[];return e.shiftKey&&t.push("s"),e.ctrlKey&&t.push("c"),e.metaKey&&t.push("m"),e.altKey&&t.push("a"),t.push(e.keyCode),t.join("")}function i(e){var t=$.Event(u+":"+e);return $(window).trigger(t,{AppClipboard:_}),t}function o(o){var n,r,s;if((document.activeElement===document.body||document.activeElement===document.documentElement)&&(n=t(o),r=e(n))){if("keydown"===o.type)d[n]=!0;else if(d[n])return;if(document.getSelection){if(!document.getSelection().isCollapsed)return}else if(document.selection&&"None"!==document.selection.type)return;o.isDefaultPrevented()||(s=i(r),s.isDefaultPrevented()&&o.preventDefault())}}function n(e){e=e.originalEvent||e,e.key===h&&i("change")}function r(){p||($(document).on("keypress keydown",o),$(window).on("storage",n),p=!0)}function s(){$(document).off("keypress keydown",o),$(window).off("storage",n),$(window).off(u+":copy"),$(window).off(u+":paste"),$(window).off(u+":cut"),$(window).off(u+":change"),p=!1}function a(){try{return JSON.parse(TVLocalStorage.getItem(h))}catch(e){return null}}function l(e){if(null==e)return c();var t=JSON.stringify(e);t!==TVLocalStorage.getItem(h)&&(TVLocalStorage.setItem(h,t),i("change"))}function c(){TVLocalStorage.getItem(h)&&(TVLocalStorage.removeItem(h),i("change"))}var h="application-clipboard",u="appclip",d={},p=!1,_={init:r,set:l,get:a,clear:c,destroy:s};return _}();e.exports=o},function(e,t,i){"use strict";var o=i(26);JSServer.studyLibrary=[{name:"Accumulation/Distribution",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#808000"}},precision:4,inputs:{}},plots:[{id:"plot_0",type:"line"}],styles:{plot_0:{title:"Plot",histogramBase:0,joinPoints:!1}},description:"Accumulation/Distribution",shortDescription:"Accum/Dist",is_price_study:!1,inputs:[],id:"Accumulation/Distribution@tv-basicstudies-1",scriptIdPart:"",name:"Accumulation/Distribution"},constructor:function(){this.f_0=function(e,t,i,n){return o.Std.or(o.Std.and(o.Std.eq(e,t),o.Std.eq(e,i)),o.Std.eq(t,i))?0:(2*e-i-t)/(t-i)*n},this.main=function(e,t){var i,n,r;return this._context=e,this._input=t,i=this.f_0(o.Std.close(this._context),o.Std.high(this._context),o.Std.low(this._context),o.Std.volume(this._context)),n=o.Std.cum(i,this._context),r=n,[r]}}},{name:"Accumulative Swing Index",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#3C78D8"}},precision:4,inputs:{in_0:10}},plots:[{id:"plot_0",type:"line"}],styles:{plot_0:{title:"ASI",histogramBase:0,joinPoints:!1}},description:"Accumulative Swing Index",shortDescription:"ASI",is_price_study:!1,inputs:[{id:"in_0",name:"Limit Move Value",defval:10,type:"float",min:.1,max:1e5}],id:"Accumulative Swing Index@tv-basicstudies-1",
scriptIdPart:"",name:"Accumulative Swing Index"},constructor:function(){this.f_0=function(e,t){var i=t.new_var(o.Std.open(t)),n=t.new_var(o.Std.high(t)),r=t.new_var(o.Std.low(t)),s=t.new_var(o.Std.close(t)),a=o.Std.abs(n-s.get(1)),l=o.Std.abs(r-s.get(1)),c=o.Std.abs(n-r),h=o.Std.abs(s.get(1)-i.get(1)),u=o.Std.max(a,l),d=o.Std.iff(a>=o.Std.max(l,c),a-.5*l+.25*h,o.Std.iff(l>=o.Std.max(a,c),l-.5*a+.25*h,c+.25*h));return o.Std.iff(0===d,0,(s-s.get(1)+.5*(s-i)+.25*(s.get(1)-i.get(1)))/d*u/e*50)},this.f_1=function(e,t){var i=this.f_0(e,t);return o.Std.cum(i,t)},this.main=function(e,t){var i,o;return this._context=e,this._input=t,i=this._input(0),o=this.f_1(i,this._context),[o]}}},{name:"Advance/Decline",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#FF0000"}},precision:4,inputs:{in_0:10}},plots:[{id:"plot_0",type:"line"}],styles:{plot_0:{title:"Plot",histogramBase:0,joinPoints:!1}},description:"Advance/Decline",shortDescription:"AD",is_price_study:!1,inputs:[{id:"in_0",name:"length",defval:10,type:"integer",min:1,max:2e3}],id:"Advance/Decline@tv-basicstudies-1",scriptIdPart:"",name:"Advance/Decline"},constructor:function(){this.f_0=function(e,t){return o.Std.gt(e,t)},this.f_1=function(e,t){return o.Std.lt(e,t)},this.f_2=function(e,t){return 0===t?e:e/t},this.main=function(e,t){var i,n,r,s,a,l,c,h,u;return this._context=e,this._input=t,i=this._input(0),n=this.f_0(o.Std.close(this._context),o.Std.open(this._context)),r=this._context.new_var(n),s=o.Std.sum(r,i,this._context),a=this.f_1(o.Std.close(this._context),o.Std.open(this._context)),l=this._context.new_var(a),c=o.Std.sum(l,i,this._context),h=this.f_2(s,c),u=h,[u]}}},{name:"Arnaud Legoux Moving Average",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#000080"}},precision:4,inputs:{in_0:9,in_1:.85,in_2:6}},plots:[{id:"plot_0",type:"line"}],styles:{plot_0:{title:"Plot",histogramBase:0,joinPoints:!1}},description:"Arnaud Legoux Moving Average",shortDescription:"ALMA",is_price_study:!0,inputs:[{id:"in_0",name:"Window Size",defval:9,type:"integer",min:0,max:5e3},{id:"in_1",name:"Offset",defval:.85,type:"float",min:-1e12,max:1e12},{id:"in_2",name:"Sigma",defval:6,type:"float",min:-1e12,max:1e12}],id:"Arnaud Legoux Moving Average@tv-basicstudies-1",scriptIdPart:"",name:"Arnaud Legoux Moving Average"},constructor:function(){this.main=function(e,t){var i,n,r,s,a,l;return this._context=e,this._input=t,i=o.Std.close(this._context),n=this._input(0),r=this._input(1),s=this._input(2),a=this._context.new_var(i),l=o.Std.alma(a,n,r,s),[l]}}},{name:"Aroon",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#FF6A00"},plot_1:{linestyle:0,linewidth:1,plottype:0,
trackPrice:!1,transparency:35,visible:!0,color:"#0094FF"}},precision:4,inputs:{in_0:14}},plots:[{id:"plot_0",type:"line"},{id:"plot_1",type:"line"}],styles:{plot_0:{title:"Upper",histogramBase:0,joinPoints:!1},plot_1:{title:"Lower",histogramBase:0,joinPoints:!1}},description:"Aroon",shortDescription:"Aroon",is_price_study:!1,inputs:[{id:"in_0",name:"length",defval:14,type:"integer",min:1,max:2e3}],id:"Aroon@tv-basicstudies-1",scriptIdPart:"",name:"Aroon"},constructor:function(){this.f_0=function(e,t){return 100*(e+t)/t},this.main=function(e,t){var i,n,r,s,a,l,c,h,u,d,p,_;return this._context=e,this._input=t,i=this._input(0),n=o.Std.high(this._context),r=i+1,s=this._context.new_var(n),a=o.Std.highestbars(s,r,this._context),l=this.f_0(a,i),c=o.Std.low(this._context),h=this._context.new_var(c),u=o.Std.lowestbars(h,r,this._context),d=this.f_0(u,i),p=l,_=d,[p,_]}}},{name:"Average Directional Index",metainfo:{_metainfoVersion:41,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#FF0000"}},precision:4,inputs:{in_0:14,in_1:14}},plots:[{id:"plot_0",type:"line"}],styles:{plot_0:{title:"ADX",histogramBase:0,joinPoints:!1,isHidden:!1}},description:"Average Directional Index",shortDescription:"ADX",is_price_study:!1,inputs:[{id:"in_0",name:"ADX Smoothing",defval:14,type:"integer",min:-1e12,max:1e12},{id:"in_1",name:"DI Length",defval:14,type:"integer",min:-1e12,max:1e12}],id:"average_directional_Index@tv-basicstudies-1",scriptIdPart:"",name:"Average Directional Index"},constructor:function(){this.f_0=function(e){var t=this._context.new_var(o.Std.high(this._context)),i=o.Std.change(t),n=this._context.new_var(o.Std.low(this._context)),r=-o.Std.change(n),s=this._context.new_var(o.Std.tr(void 0,this._context)),a=o.Std.rma(s,e,this._context),l=this._context.new_var(o.Std.and(o.Std.gt(i,r),o.Std.gt(i,0))?i:0),c=o.Std.fixnan(100*o.Std.rma(l,e,this._context)/a,this._context),h=this._context.new_var(o.Std.and(o.Std.gt(r,i),o.Std.gt(r,0))?r:0);return[c,o.Std.fixnan(100*o.Std.rma(h,e,this._context)/a,this._context)]},this.f_1=function(e,t){var i=this.f_0(e),n=i[0],r=i[1],s=n+r,a=this._context.new_var(o.Std.abs(n-r)/(o.Std.eq(s,0)?1:s));return[100*o.Std.rma(a,t,this._context)]},this.main=function(e,t){return this._context=e,this._input=t,this.f_1(this._input(0),this._input(1))}}},{name:"Average True Range",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#FF0000"}},precision:4,inputs:{in_0:14}},plots:[{id:"plot_0",type:"line"}],styles:{plot_0:{title:"Plot",histogramBase:0,joinPoints:!1}},description:"Average True Range",shortDescription:"ATR",is_price_study:!1,inputs:[{id:"in_0",name:"length",defval:14,type:"integer",min:1,max:2e3}],id:"Average True Range@tv-basicstudies-1",scriptIdPart:"",name:"Average True Range"},constructor:function(){this.main=function(e,t){var i,n,r,s
;return this._context=e,this._input=t,i=this._input(0),n=o.Std.tr(this._context),r=this._context.new_var(n),s=o.Std.rma(r,i,this._context),[s]}}},{name:"Awesome Oscillator",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:1,trackPrice:!1,transparency:35,visible:!0,color:"#000080"}},precision:4,palettes:{palette_0:{colors:{0:{color:"#FF0000",width:1,style:0},1:{color:"#008000",width:1,style:0}}}},inputs:{}},plots:[{id:"plot_0",type:"line"},{id:"plot_1",palette:"palette_0",target:"plot_0",type:"colorer"}],styles:{plot_0:{title:"Plot",histogramBase:0,joinPoints:!1}},description:"Awesome Oscillator",shortDescription:"AO",is_price_study:!1,palettes:{palette_0:{colors:{0:{name:"Color 0"},1:{name:"Color 1"}}}},inputs:[],id:"Awesome Oscillator@tv-basicstudies-1",scriptIdPart:"",name:"Awesome Oscillator"},constructor:function(){this.f_0=function(e,t){return e-t},this.f_1=function(e){return o.Std.le(e,0)?0:1},this.main=function(e,t){var i,n,r,s,a,l,c,h,u,d;return this._context=e,this._input=t,i=o.Std.hl2(this._context),n=this._context.new_var(i),r=o.Std.sma(n,5,this._context),s=this._context.new_var(i),a=o.Std.sma(s,34,this._context),l=this.f_0(r,a),c=l,h=this._context.new_var(l),u=o.Std.change(h),d=this.f_1(u),[c,d]}}},{name:"Balance of Power",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#FF0000"}},precision:4,inputs:{}},plots:[{id:"plot_0",type:"line"}],styles:{plot_0:{title:"Plot",histogramBase:0,joinPoints:!1}},description:"Balance of Power",shortDescription:"Balance of Power",is_price_study:!1,inputs:[],id:"Balance of Power@tv-basicstudies-1",scriptIdPart:"",name:"Balance of Power"},constructor:function(){this.f_0=function(e,t,i,o){return(e-t)/(i-o)},this.main=function(e,t){return this._context=e,this._input=t,[this.f_0(o.Std.close(this._context),o.Std.open(this._context),o.Std.high(this._context),o.Std.low(this._context))]}}},{name:"Bollinger Bands",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#FF0000"},plot_1:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#0000FF"},plot_2:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#0000FF"}},precision:4,filledAreasStyle:{fill_0:{color:"#000080",transparency:90,visible:!0}},inputs:{in_0:20,in_1:2}},plots:[{id:"plot_0",type:"line"},{id:"plot_1",type:"line"},{id:"plot_2",type:"line"}],styles:{plot_0:{title:"Median",histogramBase:0,joinPoints:!1},plot_1:{title:"Upper",histogramBase:0,joinPoints:!1},plot_2:{title:"Lower",histogramBase:0,joinPoints:!1}},description:"Bollinger Bands",shortDescription:"BB",is_price_study:!0,filledAreas:[{id:"fill_0",objAId:"plot_1",objBId:"plot_2",type:"plot_plot",title:"Plots Background"}],inputs:[{id:"in_0",
name:"length",defval:20,type:"integer",min:1,max:1e4},{id:"in_1",name:"mult",defval:2,type:"float",min:.001,max:50}],id:"Bollinger Bands@tv-basicstudies-1",scriptIdPart:"",name:"Bollinger Bands"},constructor:function(){this.f_0=function(e,t){return e*t},this.f_1=function(e,t){return e+t},this.f_2=function(e,t){return e-t},this.main=function(e,t){var i,n,r,s,a,l,c,h,u,d,p,_,f;return this._context=e,this._input=t,i=o.Std.close(this._context),n=this._input(0),r=this._input(1),s=this._context.new_var(i),a=o.Std.sma(s,n,this._context),l=this._context.new_var(i),c=o.Std.stdev(l,n,this._context),h=this.f_0(r,c),u=this.f_1(a,h),d=this.f_2(a,h),p=a,_=u,f=d,[p,_,f]}}},{name:"Bollinger Bands %B",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#008080"}},precision:4,bands:[{color:"#808080",linestyle:2,linewidth:1,visible:!0,value:1},{color:"#808080",linestyle:2,linewidth:1,visible:!0,value:0}],filledAreasStyle:{fill_0:{color:"#008080",transparency:90,visible:!0}},inputs:{in_0:20,in_1:2}},plots:[{id:"plot_0",type:"line"}],styles:{plot_0:{title:"Plot",histogramBase:0,joinPoints:!1}},description:"Bollinger Bands %B",shortDescription:"BB %B",is_price_study:!1,bands:[{id:"hline_0",name:"UpperLimit"},{id:"hline_1",name:"LowerLimit"}],filledAreas:[{id:"fill_0",objAId:"hline_0",objBId:"hline_1",type:"hline_hline",title:"Hlines Background"}],inputs:[{id:"in_0",name:"length",defval:20,type:"integer",min:1,max:1e4},{id:"in_1",name:"mult",defval:2,type:"float",min:.001,max:50}],id:"Bollinger Bands %B@tv-basicstudies-1",scriptIdPart:"",name:"Bollinger Bands %B"},constructor:function(){this.f_0=function(e,t){return e*t},this.f_1=function(e,t){return e+t},this.f_2=function(e,t){return e-t},this.f_3=function(e,t,i){return(e-t)/(i-t)},this.main=function(e,t){var i,n,r,s,a,l,c,h,u,d,p,_;return this._context=e,this._input=t,i=o.Std.close(this._context),n=this._input(0),r=this._input(1),s=this._context.new_var(i),a=o.Std.sma(s,n,this._context),l=this._context.new_var(i),c=o.Std.stdev(l,n,this._context),h=this.f_0(r,c),u=this.f_1(a,h),d=this.f_2(a,h),p=this.f_3(i,d,u),_=p,[_]}}},{name:"Bollinger Bands Width",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#0000FF"}},precision:4,inputs:{in_0:20,in_1:2}},plots:[{id:"plot_0",type:"line"}],styles:{plot_0:{title:"Plot",histogramBase:0,joinPoints:!1}},description:"Bollinger Bands Width",shortDescription:"BBW",is_price_study:!1,inputs:[{id:"in_0",name:"length",defval:20,type:"integer",min:1,max:1e4},{id:"in_1",name:"mult",defval:2,type:"float",min:.001,max:50}],id:"Bollinger Bands Width@tv-basicstudies-1",scriptIdPart:"",name:"Bollinger Bands Width"},constructor:function(){this.f_0=function(e,t){return e*t},this.f_1=function(e,t){return e+t},this.f_2=function(e,t){return e-t},this.f_3=function(e,t,i){return(e-t)/i},
this.main=function(e,t){var i,n,r,s,a,l,c,h,u,d,p,_;return this._context=e,this._input=t,i=o.Std.close(this._context),n=this._input(0),r=this._input(1),s=this._context.new_var(i),a=o.Std.sma(s,n,this._context),l=this._context.new_var(i),c=o.Std.stdev(l,n,this._context),h=this.f_0(r,c),u=this.f_1(a,h),d=this.f_2(a,h),p=this.f_3(u,d,a),_=p,[_]}}},{name:"Chaikin Money Flow",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#008000"}},precision:4,bands:[{color:"#808080",linestyle:2,linewidth:1,visible:!0,value:0}],inputs:{in_0:20}},plots:[{id:"plot_0",type:"line"}],styles:{plot_0:{title:"Plot",histogramBase:0,joinPoints:!1}},description:"Chaikin Money Flow",shortDescription:"CMF",is_price_study:!1,bands:[{id:"hline_0",name:"Zero"}],inputs:[{id:"in_0",name:"length",defval:20,type:"integer",min:1,max:2e3}],id:"Chaikin Money Flow@tv-basicstudies-1",scriptIdPart:"",name:"Chaikin Money Flow"},constructor:function(){this.f_0=function(e,t,i,n){return o.Std.or(o.Std.and(o.Std.eq(e,t),o.Std.eq(e,i)),o.Std.eq(t,i))?0:(2*e-i-t)/(t-i)*n},this.f_1=function(e,t){return e/t},this.main=function(e,t){var i,n,r,s,a,l,c,h,u;return this._context=e,this._input=t,i=this._input(0),n=this.f_0(o.Std.close(this._context),o.Std.high(this._context),o.Std.low(this._context),o.Std.volume(this._context)),r=this._context.new_var(n),s=o.Std.sum(r,i,this._context),a=o.Std.volume(this._context),l=this._context.new_var(a),c=o.Std.sum(l,i,this._context),h=this.f_1(s,c),u=h,[u]}}},{name:"Chaikin Oscillator",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#FF0000"}},precision:4,bands:[{color:"#808080",linestyle:2,linewidth:1,visible:!0,value:0}],inputs:{in_0:3,in_1:10}},plots:[{id:"plot_0",type:"line"}],styles:{plot_0:{title:"Plot",histogramBase:0,joinPoints:!1}},description:"Chaikin Oscillator",shortDescription:"Chaikin Osc",is_price_study:!1,bands:[{id:"hline_0",name:"Zero"}],inputs:[{id:"in_0",name:"short",defval:3,type:"integer",min:1,max:2e3},{id:"in_1",name:"long",defval:10,type:"integer",min:1,max:2e3}],id:"Chaikin Oscillator@tv-basicstudies-1",scriptIdPart:"",name:"Chaikin Oscillator"},constructor:function(){this.f_0=function(e,t){return e-t},this.main=function(e,t){var i,n,r,s,a,l,c,h,u;return this._context=e,this._input=t,i=this._input(0),n=this._input(1),r=o.Std.accdist(this._context),s=this._context.new_var(r),a=o.Std.ema(s,i,this._context),l=this._context.new_var(r),c=o.Std.ema(l,n,this._context),h=this.f_0(a,c),u=h,[u]}}},{name:"Chande Kroll Stop",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#008000"},plot_1:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#FF0000"}},precision:4,inputs:{
in_0:10,in_1:1,in_2:9}},plots:[{id:"plot_0",type:"line"},{id:"plot_1",type:"line"}],styles:{plot_0:{title:"Long",histogramBase:0,joinPoints:!1},plot_1:{title:"Short",histogramBase:0,joinPoints:!1}},description:"Chande Kroll Stop",shortDescription:"Chande Kroll Stop",is_price_study:!0,inputs:[{id:"in_0",name:"p",defval:10,type:"integer",min:1,max:4999},{id:"in_1",name:"x",defval:1,type:"integer",min:1,max:1e12},{id:"in_2",name:"q",defval:9,type:"integer",min:1,max:1e12}],id:"Chande Kroll Stop@tv-basicstudies-1",scriptIdPart:"",name:"Chande Kroll Stop"},constructor:function(){this.f_0=function(e,t,i){return e-t*i},this.f_1=function(e,t,i){return e+t*i},this.main=function(e,t){var i,n,r,s,a,l,c,h,u,d,p,_,f,m,g,y,v;return this._context=e,this._input=t,i=this._input(0),n=this._input(1),r=this._input(2),s=o.Std.high(this._context),a=this._context.new_var(s),l=o.Std.highest(a,i,this._context),c=o.Std.atr(i,this._context),h=this.f_0(l,n,c),u=this._context.new_var(s),d=o.Std.lowest(u,i,this._context),p=this.f_1(d,n,c),_=this._context.new_var(h),f=o.Std.highest(_,r,this._context),m=this._context.new_var(p),g=o.Std.lowest(m,r,this._context),y=g,v=f,[y,v]}}},{name:"Chande Momentum Oscillator",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#008080"}},precision:4,inputs:{in_0:9}},plots:[{id:"plot_0",type:"line"}],styles:{plot_0:{title:"Plot",histogramBase:0,joinPoints:!1}},description:"Chande Momentum Oscillator",shortDescription:"ChandeMO",is_price_study:!1,inputs:[{id:"in_0",name:"length",defval:9,type:"integer",min:1,max:2e3}],id:"Chande Momentum Oscillator@tv-basicstudies-1",scriptIdPart:"",name:"Chande Momentum Oscillator"},constructor:function(){this.f_0=function(e){return o.Std.ge(e,0)?e:0},this.f_1=function(e){return o.Std.ge(e,0)?0:-e},this.f_2=function(e,t){return 100*e/t},this.f_3=function(e,t){return this.f_2(e-t,e+t)},this.main=function(e,t){var i,n,r,s,a,l,c,h,u,d,p,_;return this._context=e,this._input=t,i=this._input(0),n=o.Std.close(this._context),r=this._context.new_var(n),s=o.Std.change(r),a=this.f_0(s),l=this.f_1(s),c=this._context.new_var(a),h=o.Std.sum(c,i,this._context),u=this._context.new_var(l),d=o.Std.sum(u,i,this._context),p=this.f_3(h,d),_=p,[_]}}},{name:"Chop Zone",metainfo:{_metainfoVersion:41,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:5,trackPrice:!1,transparency:35,visible:!0,color:"#000080"}},precision:4,palettes:{palette_0:{colors:{0:{color:"#34dddd",width:1,style:0},1:{color:"#006400",width:1,style:0},2:{color:"#98fb98",width:1,style:0},3:{color:"#00FF00",width:1,style:0},4:{color:"#8B0000",width:1,style:0},5:{color:"#FF0000",width:1,style:0},6:{color:"#FF7F00",width:1,style:0},7:{color:"#ffc04c",width:1,style:0},8:{color:"#FFFF00",width:1,style:0}}}},inputs:{}},plots:[{id:"plot_0",type:"line"},{id:"plot_1",palette:"palette_0",target:"plot_0",type:"colorer"}],styles:{plot_0:{title:"Plot",
histogramBase:0,joinPoints:!1,isHidden:!1}},description:"Chop Zone",shortDescription:"Chop Zone",is_price_study:!1,palettes:{palette_0:{colors:{0:{name:"Color 0"},1:{name:"Color 1"},2:{name:"Color 2"},3:{name:"Color 3"},4:{name:"Color 4"},5:{name:"Color 5"},6:{name:"Color 6"},7:{name:"Color 7"},8:{name:"Color 8"}},valToIndex:{0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8}}},inputs:[],id:"chop_zone@tv-basicstudies-1",scriptIdPart:"",name:"Chop Zone"},constructor:function(){this.f_0=function(){var e=o.Std.close(this._context),t=o.Std.hlc3(this._context),i=this._context.new_var(o.Std.high(this._context)),n=o.Std.highest(i,30,this._context),r=o.Std.lowest(i,30,this._context),s=25/(n-r)*r,a=this._context.new_var(e),l=this._context.new_var(o.Std.ema(a,34,this._context)),c=(l.get(1)-l.get(0))/t*s,h=o.Std.sqrt(1+c*c),u=o.Std.round(180*o.Std.acos(1/h)/3.141592653589793),d=o.Std.iff(o.Std.gt(c,0),-u,u),p=o.Std.and(o.Std.gt(d,-2.14),o.Std.le(d,-.71))?7:8,_=o.Std.and(o.Std.gt(d,-3.57),o.Std.le(d,-2.14))?6:p,f=o.Std.and(o.Std.gt(d,-5),o.Std.le(d,-3.57))?5:_,m=o.Std.le(d,-5)?4:f,g=o.Std.and(o.Std.lt(d,2.14),o.Std.ge(d,.71))?3:m,y=o.Std.and(o.Std.lt(d,3.57),o.Std.ge(d,2.14))?2:g,v=o.Std.and(o.Std.lt(d,5),o.Std.ge(d,3.57))?1:y;return[1,o.Std.ge(d,5)?0:v]},this.main=function(e,t){return this._context=e,this._input=t,this.f_0()}}},{name:"Choppiness Index",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#0000FF"}},precision:4,bands:[{color:"#808080",linestyle:2,linewidth:1,visible:!0,value:61.8},{color:"#808080",linestyle:2,linewidth:1,visible:!0,value:38.2}],filledAreasStyle:{fill_0:{color:"#008000",transparency:90,visible:!0}},inputs:{in_0:14}},plots:[{id:"plot_0",type:"line"}],styles:{plot_0:{title:"Plot",histogramBase:0,joinPoints:!1}},description:"Choppiness Index",shortDescription:"CHOP",is_price_study:!1,bands:[{id:"hline_0",name:"UpperLimit"},{id:"hline_1",name:"LowerLimit"}],filledAreas:[{id:"fill_0",objAId:"hline_0",objBId:"hline_1",type:"hline_hline",title:"Hlines Background"}],inputs:[{id:"in_0",name:"length",defval:14,type:"integer",min:1,max:2e3}],id:"Choppiness Index@tv-basicstudies-1",scriptIdPart:"",name:"Choppiness Index"},constructor:function(){this.f_0=function(e,t,i,n){return 100*o.Std.log10(e/(t-i))/n},this.main=function(e,t){var i,n,r,s,a,l,c,h,u,d,p,_,f;return this._context=e,this._input=t,i=this._input(0),n=o.Std.atr(1,this._context),r=this._context.new_var(n),s=o.Std.sum(r,i,this._context),a=o.Std.high(this._context),l=this._context.new_var(a),c=o.Std.highest(l,i,this._context),h=o.Std.low(this._context),u=this._context.new_var(h),d=o.Std.lowest(u,i,this._context),p=o.Std.log10(i),_=this.f_0(s,c,d,p),f=_,[f]}}},{name:"Commodity Channel Index",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#808000"}},precision:4,bands:[{color:"#808080",
linestyle:2,linewidth:1,visible:!0,value:100},{color:"#808080",linestyle:2,linewidth:1,visible:!0,value:-100}],filledAreasStyle:{fill_0:{color:"#808000",transparency:90,visible:!0}},inputs:{in_0:20}},plots:[{id:"plot_0",type:"line"}],styles:{plot_0:{title:"Plot",histogramBase:0,joinPoints:!1}},description:"Commodity Channel Index",shortDescription:"CCI",is_price_study:!1,bands:[{id:"hline_0",name:"UpperLimit"},{id:"hline_1",name:"LowerLimit"}],filledAreas:[{id:"fill_0",objAId:"hline_0",objBId:"hline_1",type:"hline_hline",title:"Hlines Background"}],inputs:[{id:"in_0",name:"length",defval:20,type:"integer",min:1,max:2e3}],id:"Commodity Channel Index@tv-basicstudies-1",scriptIdPart:"",name:"Commodity Channel Index"},constructor:function(){this.f_0=function(e,t,i){return(e-t)/(.015*i)},this.main=function(e,t){var i,n,r,s,a,l,c,h;return this._context=e,this._input=t,i=o.Std.hlc3(this._context),n=this._input(0),r=this._context.new_var(i),s=o.Std.sma(r,n,this._context),a=this._context.new_var(i),l=o.Std.dev(a,n,this._context),c=this.f_0(i,s,l),h=c,[h]}}},{name:"Connors RSI",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#800080"}},precision:4,bands:[{color:"#808080",linestyle:2,linewidth:1,visible:!0,value:70},{color:"#808080",linestyle:2,linewidth:1,visible:!0,value:30}],filledAreasStyle:{fill_0:{color:"#800080",transparency:90,visible:!0}},inputs:{in_0:3,in_1:2,in_2:100}},plots:[{id:"plot_0",type:"line"}],styles:{plot_0:{title:"CRSI",histogramBase:0,joinPoints:!1}},description:"Connors RSI",shortDescription:"CRSI",is_price_study:!1,bands:[{id:"hline_0",name:"UpperLimit"},{id:"hline_1",name:"LowerLimit"}],filledAreas:[{id:"fill_0",objAId:"hline_0",objBId:"hline_1",type:"hline_hline",title:"Hlines Background"}],inputs:[{id:"in_0",name:"RSI Length",defval:3,type:"integer",min:1},{id:"in_1",name:"UpDown Length",defval:2,type:"integer",min:1},{id:"in_2",name:"ROC Length",defval:100,type:"integer",min:1}],id:"Connors RSI@tv-basicstudies-1",scriptIdPart:"",name:"Connors RSI"},constructor:function(){this.f_1=function(e,t,i){var n=i.new_var(o.Std.max(o.Std.change(e),0));return o.Std.rma(n,t,i)},this.f_2=function(e,t,i){var n=i.new_var(-o.Std.min(o.Std.change(e),0));return o.Std.rma(n,t,i)},this.f_3=function(){var e=0;return function(t){var i=t.get(0),n=t.get(1);return e=i===n?0:i>n?o.Std.nz(e)<=0?1:o.Std.nz(e)+1:o.Std.nz(e)>=0?-1:o.Std.nz(e)-1,this._context.new_var(e)}}(),this.main=function(e,t){var i,n,r,s,a,l,c,h,u,d,p;return this._context=e,this._input=t,i=o.Std.close(this._context),n=this._context.new_var(i),r=this._input(0),s=this._input(1),a=this._input(2),l=o.Std.rsi(this.f_1(n,r,this._context),this.f_2(n,r,this._context)),c=this.f_3(n),h=o.Std.rsi(this.f_1(c,s,this._context),this.f_2(c,s,this._context)),u=this._context.new_var(o.Std.roc(n,1)),d=o.Std.percentrank(u,a),p=o.Std.avg(l,h,d),[p]}}},{name:"Coppock Curve",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,
is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#000080"}},precision:4,inputs:{in_0:10,in_1:14,in_2:11}},plots:[{id:"plot_0",type:"line"}],styles:{plot_0:{title:"Plot",histogramBase:0,joinPoints:!1}},description:"Coppock Curve",shortDescription:"Coppock Curve",is_price_study:!1,inputs:[{id:"in_0",name:"WMA Length",defval:10,type:"integer",min:-1e12,max:5e3},{id:"in_1",name:"Long RoC Length",defval:14,type:"integer",min:1,max:4999},{id:"in_2",name:"Short RoC Length",defval:11,type:"integer",min:1,max:4999}],id:"Coppock Curve@tv-basicstudies-1",scriptIdPart:"",name:"Coppock Curve"},constructor:function(){this.f_0=function(e,t){return e+t},this.main=function(e,t){var i,n,r,s,a,l,c,h,u,d,p,_;return this._context=e,this._input=t,i=this._input(0),n=this._input(1),r=this._input(2),s=o.Std.close(this._context),a=this._context.new_var(s),l=o.Std.roc(a,n),c=this._context.new_var(s),h=o.Std.roc(c,r),u=this.f_0(l,h),d=this._context.new_var(u),p=o.Std.wma(d,i,this._context),_=p,[_]}}},{name:"Correlation Coeff",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:4,trackPrice:!1,transparency:40,visible:!0,color:"#800080"}},precision:4,inputs:{in_0:"AAPL",in_1:20}},plots:[{id:"plot_0",type:"line"}],styles:{plot_0:{title:"Plot",histogramBase:0,joinPoints:!1}},description:"Correlation Coefficient",shortDescription:"CC",is_price_study:!1,inputs:[{id:"in_0",name:"sym",defval:"AAPL",type:"symbol"},{id:"in_1",name:"length",defval:20,type:"integer",min:1,max:2e3}],id:"Correlation Coeff@tv-basicstudies-1",scriptIdPart:"",name:"Correlation Coeff"},constructor:function(){this.init=function(e,t){this._context=e,this._input=t,this._context.new_sym(this._input(0),o.Std.period(this._context),o.Std.period(this._context))},this.main=function(e,t){var i,n,r,s,a,l,c,h,u,d;return this._context=e,this._input=t,i=this._context.new_var(this._context.symbol.time),this._input(0),o.Std.period(this._context),n=o.Std.close(this._context),r=this._input(1),this._context.select_sym(1),s=this._context.new_var(this._context.symbol.time),a=o.Std.close(this._context),l=this._context.new_var(a),this._context.select_sym(0),c=l.adopt(s,i,0),h=this._context.new_var(n),u=this._context.new_var(c),d=o.Std.correlation(h,u,r,this._context),[d]}}},{name:"Detrended Price Oscillator",metainfo:{_metainfoVersion:42,isTVScript:!1,isTVScriptStub:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#808000"}},precision:4,bands:[{color:"#808080",linestyle:2,linewidth:1,visible:!0,value:0}],inputs:{in_0:21,in_1:!1}},plots:[{id:"plot_0",type:"line"}],styles:{plot_0:{title:"DPO",histogramBase:0,joinPoints:!1,isHidden:!1}},description:"Detrended Price Oscillator",shortDescription:"DPO",is_price_study:!1,is_hidden_study:!1,id:"detrended_price_oscillator@tv-basicstudies-1",bands:[{id:"hline_0",name:"Zero",isHidden:!1}],inputs:[{id:"in_0",name:"Period",defval:21,
type:"integer",min:1,max:1e12},{id:"in_1",name:"isCentered",defval:!1,type:"bool"}],scriptIdPart:"",name:"Detrended Price Oscillator"},constructor:function(){this.f_0=function(){var e=this._input(0),t=this._input(1),i=Math.floor(e/2+1),n=this._context.new_var(o.Std.close(this._context)),r=this._context.new_var(o.Std.sma(n,e,this._context)),s=this._context.new_var(o.Std.close(this._context)),a=s.get(i)-r,l=o.Std.close(this._context)-r.get(i),c=t?a:l,h=-i;return[c,t?h:0]},this.main=function(e,t){this._context=e,this._input=t;var i=this.f_0();return[{value:i[0],offset:i[1]}]}}},{name:"Directional Movement Index",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#0000FF"},plot_1:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#FF7F00"},plot_2:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#FF0000"}},precision:4,inputs:{in_0:14,in_1:14}},plots:[{id:"plot_0",type:"line"},{id:"plot_1",type:"line"},{id:"plot_2",type:"line"}],styles:{plot_0:{title:"+DI",histogramBase:0,joinPoints:!1},plot_1:{title:"-DI",histogramBase:0,joinPoints:!1},plot_2:{title:"ADX",histogramBase:0,joinPoints:!1}},description:"Directional Movement",shortDescription:"DMI",is_price_study:!1,inputs:[{id:"in_0",name:"DI Length",defval:14,type:"integer",min:1,max:2e3},{id:"in_1",name:"ADX Smoothing",defval:14,type:"integer",min:1,max:50}],id:"Directional Movement Index@tv-basicstudies-1",scriptIdPart:"",name:"Directional Movement Index"},constructor:function(){this.f_0=function(e){return-e},this.f_1=function(e,t){return o.Std.and(o.Std.gt(e,t),o.Std.gt(e,0))?e:0},this.f_2=function(e,t){return 100*e/t},this.f_3=function(e,t){return e+t},this.f_4=function(e,t,i){return o.Std.abs(e-t)/(o.Std.eq(i,0)?1:i)},this.f_5=function(e){return 100*e},this.main=function(e,t){var i,n,r,s,a,l,c,h,u,d,p,_,f,m,g,y,v,b,S,w,T,P,x,C,L,I,M,k,A,E;return this._context=e,this._input=t,i=this._input(0),n=this._input(1),r=o.Std.high(this._context),s=this._context.new_var(r),a=o.Std.change(s),l=o.Std.low(this._context),c=this._context.new_var(l),h=o.Std.change(c),u=this.f_0(h),d=o.Std.tr(this._context),p=this._context.new_var(d),_=o.Std.rma(p,i,this._context),f=this.f_1(a,u),m=this._context.new_var(f),g=o.Std.rma(m,i,this._context),y=this.f_2(g,_),v=o.Std.fixnan(y,this._context),b=this.f_1(u,a),S=this._context.new_var(b),w=o.Std.rma(S,i,this._context),T=this.f_2(w,_),P=o.Std.fixnan(T,this._context),x=this.f_3(v,P),C=this.f_4(v,P,x),L=this._context.new_var(C),I=o.Std.rma(L,n,this._context),M=this.f_5(I),k=v,A=P,E=M,[k,A,E]}}},{name:"Donchian Channels",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#0000FF"},plot_1:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#0000FF"},plot_2:{linestyle:0,linewidth:1,
plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#FF7F00"}},precision:4,filledAreasStyle:{fill_0:{color:"#0000FF",transparency:90,visible:!0}},inputs:{in_0:20}},plots:[{id:"plot_0",type:"line"},{id:"plot_1",type:"line"},{id:"plot_2",type:"line"}],styles:{plot_0:{title:"Lower",histogramBase:0,joinPoints:!1},plot_1:{title:"Upper",histogramBase:0,joinPoints:!1},plot_2:{title:"Basis",histogramBase:0,joinPoints:!1}},description:"Donchian Channels",shortDescription:"DC",is_price_study:!0,filledAreas:[{id:"fill_0",objAId:"plot_1",objBId:"plot_0",type:"plot_plot",title:"Plots Background"}],inputs:[{id:"in_0",name:"length",defval:20,type:"integer",min:1,max:2e3}],id:"Donchian Channels@tv-basicstudies-1",scriptIdPart:"",name:"Donchian Channels"},constructor:function(){this.main=function(e,t){var i,n,r,s,a,l,c,h,u,d,p;return this._context=e,this._input=t,i=this._input(0),n=o.Std.low(this._context),r=this._context.new_var(n),s=o.Std.lowest(r,i,this._context),a=o.Std.high(this._context),l=this._context.new_var(a),c=o.Std.highest(l,i,this._context),h=o.Std.avg(c,s),u=s,d=c,p=h,[u,d,p]}}},{name:"Double Exponential Moving Average",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#008000"}},precision:4,inputs:{in_0:9}},plots:[{id:"plot_0",type:"line"}],styles:{plot_0:{title:"Plot",histogramBase:0,joinPoints:!1}},description:"Double EMA",shortDescription:"DEMA",is_price_study:!0,inputs:[{id:"in_0",name:"length",defval:9,type:"integer",min:1,max:1e4}],id:"Double Exponential Moving Average@tv-basicstudies-1",scriptIdPart:"",name:"Double Exponential Moving Average"},constructor:function(){this.f_0=function(e,t){return 2*e-t},this.main=function(e,t){var i,n,r,s,a,l,c,h;return this._context=e,this._input=t,i=this._input(0),n=o.Std.close(this._context),r=this._context.new_var(n),s=o.Std.ema(r,i,this._context),a=this._context.new_var(s),l=o.Std.ema(a,i,this._context),c=this.f_0(s,l),h=c,[h]}}},{name:"Ease of Movement",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#808000"}},precision:4,inputs:{in_0:1e4,in_1:14}},plots:[{id:"plot_0",type:"line"}],styles:{plot_0:{title:"Plot",histogramBase:0,joinPoints:!1}},description:"Ease Of Movement",shortDescription:"EOM",is_price_study:!1,inputs:[{id:"in_0",name:"Divisor",defval:1e4,type:"integer",min:1,max:1e9},{id:"in_1",name:"length",defval:14,type:"integer",min:1,max:2e3}],id:"Ease of Movement@tv-basicstudies-1",scriptIdPart:"",name:"Ease of Movement"},constructor:function(){this.f_0=function(e,t,i,o,n){return e*t*(i-o)/n},this.main=function(e,t){var i,n,r,s,a,l,c,h,u;return this._context=e,this._input=t,i=this._input(0),n=this._input(1),r=o.Std.hl2(this._context),s=this._context.new_var(r),a=o.Std.change(s),l=this.f_0(i,a,o.Std.high(this._context),o.Std.low(this._context),o.Std.volume(this._context)),
c=this._context.new_var(l),h=o.Std.sma(c,n,this._context),u=h,[u]}}},{name:"Elders Force Index",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#800000"}},precision:4,bands:[{color:"#808080",linestyle:2,linewidth:1,visible:!0,value:0}],inputs:{in_0:13}},plots:[{id:"plot_0",type:"line"}],styles:{plot_0:{title:"Plot",histogramBase:0,joinPoints:!1}},description:"Elder's Force Index",shortDescription:"EFI",is_price_study:!1,bands:[{id:"hline_0",name:"Zero"}],inputs:[{id:"in_0",name:"length",defval:13,type:"integer",min:1,max:2e3}],id:"Elders Force Index@tv-basicstudies-1",scriptIdPart:"",name:"Elders Force Index"},constructor:function(){this.f_0=function(e,t){return e*t},this.main=function(e,t){var i,n,r,s,a,l,c,h;return this._context=e,this._input=t,i=this._input(0),n=o.Std.close(this._context),r=this._context.new_var(n),s=o.Std.change(r),a=this.f_0(s,o.Std.volume(this._context)),l=this._context.new_var(a),c=o.Std.ema(l,i,this._context),h=c,[h]}}},{name:"EMA Cross",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#FF0000"},plot_1:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#008000"},plot_2:{linestyle:0,linewidth:4,plottype:3,trackPrice:!1,transparency:35,visible:!0,color:"#000080"}},precision:4,inputs:{in_0:9,in_1:26}},plots:[{id:"plot_0",type:"line"},{id:"plot_1",type:"line"},{id:"plot_2",type:"line"}],styles:{plot_0:{title:"Short",histogramBase:0,joinPoints:!1},plot_1:{title:"Long",histogramBase:0,joinPoints:!1},plot_2:{title:"Crosses",histogramBase:0,joinPoints:!1}},description:"EMA Cross",shortDescription:"EMA Cross",is_price_study:!0,inputs:[{id:"in_0",name:"Short",defval:9,type:"integer",min:1,max:2e3},{id:"in_1",name:"Long",defval:26,type:"integer",min:1,max:2e3}],id:"EMA Cross@tv-basicstudies-1",scriptIdPart:"",name:"EMA Cross"},constructor:function(){this.f_0=function(e,t){return e?t:o.Std.na()},this.main=function(e,t){var i,n,r,s,a,l,c,h,u,d,p;return this._context=e,this._input=t,i=this._input(0),n=this._input(1),r=o.Std.close(this._context),s=this._context.new_var(r),a=o.Std.ema(s,i,this._context),l=this._context.new_var(r),c=o.Std.ema(l,n,this._context),h=a,u=c,d=o.Std.cross(a,c,this._context),p=this.f_0(d,a),[h,u,p]}}},{name:"Envelope",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#FF7F00"},plot_1:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#0000FF"},plot_2:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#0000FF"}},precision:4,filledAreasStyle:{fill_0:{color:"#0000FF",transparency:90,visible:!0}},inputs:{in_0:20,in_1:10,in_2:!1}},plots:[{id:"plot_0",type:"line"},{
id:"plot_1",type:"line"},{id:"plot_2",type:"line"}],styles:{plot_0:{title:"Median",histogramBase:0,joinPoints:!1},plot_1:{title:"Upper",histogramBase:0,joinPoints:!1},plot_2:{title:"Lower",histogramBase:0,joinPoints:!1}},description:"Envelope",shortDescription:"Env",is_price_study:!0,filledAreas:[{id:"fill_0",objAId:"plot_1",objBId:"plot_2",type:"plot_plot",title:"Plots Background"}],inputs:[{id:"in_0",name:"Length",defval:20,type:"integer",min:1,max:2e3},{id:"in_1",name:"percent",defval:10,type:"float",min:-1e12,max:1e12},{id:"in_2",name:"exponential",defval:!1,type:"bool"}],id:"Envelope@tv-basicstudies-1",scriptIdPart:"",name:"Envelope"},constructor:function(){this.f_0=function(e,t,i){return e?t:i},this.f_1=function(e,t){return e*(1+t)},this.f_2=function(e,t){return e*(1-t)},this.main=function(e,t){var i,n,r,s,a,l,c,h,u,d,p,_,f,m,g;return this._context=e,this._input=t,i=o.Std.close(this._context),n=this._input(0),r=this._input(1),s=this._input(2),a=this._context.new_var(i),l=o.Std.ema(a,n,this._context),c=this._context.new_var(i),h=o.Std.sma(c,n,this._context),u=this.f_0(s,l,h),d=r/100,p=this.f_1(u,d),_=this.f_2(u,d),f=u,m=p,g=_,[f,m,g]}}},{name:"Fisher Transform",metainfo:{_metainfoVersion:41,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#0000FF"},plot_1:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#FF7F00"}},precision:4,bands:[{color:"#FF7F00",linestyle:2,linewidth:1,visible:!0,value:1.5},{color:"#808080",linestyle:2,linewidth:1,visible:!0,value:.75},{color:"#FF7F00",linestyle:2,linewidth:1,visible:!0,value:0},{color:"#808080",linestyle:2,linewidth:1,visible:!0,value:-.75},{color:"#FF7F00",linestyle:2,linewidth:1,visible:!0,value:-1.5}],inputs:{in_0:9}},plots:[{id:"plot_0",type:"line"},{id:"plot_1",type:"line"}],styles:{plot_0:{title:"Fisher",histogramBase:0,joinPoints:!1,isHidden:!1},plot_1:{title:"Trigger",histogramBase:0,joinPoints:!1,isHidden:!1}},description:"Fisher Transform",shortDescription:"Fisher",is_price_study:!1,bands:[{id:"hline_0",name:"Level",isHidden:!1},{id:"hline_1",name:"Level",isHidden:!1},{id:"hline_2",name:"Level",isHidden:!1},{id:"hline_3",name:"Level",isHidden:!1},{id:"hline_4",name:"Level",isHidden:!1}],inputs:[{id:"in_0",name:"Length",defval:9,type:"integer",min:1,max:1e12}],id:"fisher_transform@tv-basicstudies-1",scriptIdPart:"",name:"Fisher Transform"},constructor:function(){this.f_0=function(e){var t=o.Std.lt(e,-.99)?-.999:e;return[o.Std.gt(e,.99)?.999:t]},this.f_1=function(){var e,t,i,n=this._input(0),r=this._context.new_var(o.Std.hl2(this._context)),s=o.Std.highest(r,n,this._context),a=this._context.new_var(o.Std.hl2(this._context)),l=o.Std.lowest(a,n,this._context),c=this._context.new_var(),h=this.f_0(.66*((o.Std.hl2(this._context)-l)/o.Std.max(s-l,.001)-.5)+.67*o.Std.nz(c.get(1)));return c.set(h[0]),e=this._context.new_var(),e.set(.5*o.Std.log((1+c.get(0))/o.Std.max(1-c.get(0),.001))+.5*o.Std.nz(e.get(1))),t=e.get(1),i=e.get(0),
[i,t]},this.main=function(e,t){return this._context=e,this._input=t,this.f_1()}}},{name:"Historical Volatility",metainfo:{_metainfoVersion:41,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#0000FF"}},precision:4,inputs:{in_0:10}},plots:[{id:"plot_0",type:"line"}],styles:{plot_0:{title:"Plot",histogramBase:0,joinPoints:!1,isHidden:!1}},description:"Historical Volatility",shortDescription:"HV",is_price_study:!1,inputs:[{id:"in_0",name:"length",defval:10,type:"integer",min:1,max:1e12}],id:"historical_volatility@tv-basicstudies-1",scriptIdPart:"",name:"Historical Volatility"},constructor:function(){this.f_0=function(){var e=this._input(0),t=o.Std.or(o.Std.isintraday(this._context),o.Std.and(o.Std.isdaily(this._context),o.Std.eq(o.Std.interval(this._context),1)))?1:7,i=this._context.new_var(o.Std.close(this._context)),n=this._context.new_var(o.Std.log(o.Std.close(this._context)/i.get(1)));return[100*o.Std.stdev(n,e,this._context)*o.Std.sqrt(365/t)]},this.main=function(e,t){return this._context=e,this._input=t,this.f_0()}}},{name:"Hull MA",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#000080"}},precision:4,inputs:{in_0:9}},plots:[{id:"plot_0",type:"line"}],styles:{plot_0:{title:"Plot",histogramBase:0,joinPoints:!1}},description:"Hull Moving Average",shortDescription:"HMA",is_price_study:!0,inputs:[{id:"in_0",name:"length",defval:9,type:"integer",min:1,max:1e4}],id:"Hull MA@tv-basicstudies-1",scriptIdPart:"",name:"Hull MA"},constructor:function(){this.f_0=function(e,t){return 2*e-t},this.main=function(e,t){var i,n,r,s,a,l,c,h,u,d,p,_,f;return this._context=e,this._input=t,i=o.Std.close(this._context),n=this._input(0),r=n/2,s=this._context.new_var(i),a=o.Std.wma(s,r,this._context),l=this._context.new_var(i),c=o.Std.wma(l,n,this._context),h=this.f_0(a,c),u=o.Std.sqrt(n),d=o.Std.round(u),p=this._context.new_var(h),_=o.Std.wma(p,d,this._context),f=_,[f]}}},{name:"Ichimoku Cloud",metainfo:{_metainfoVersion:42,isTVScript:!1,isTVScriptStub:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#0496ff"},plot_1:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#991515"},plot_2:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#459915"},plot_3:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#008000"},plot_4:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#FF0000"}},precision:4,palettes:{palette_0:{colors:{0:{color:"#008000",width:1,style:0},1:{color:"#FF0000",width:1,style:0}}}},filledAreasStyle:{fill_0:{color:"#000080",transparency:90,visible:!0}},inputs:{in_0:9,in_1:26,in_2:52,in_3:26}},plots:[{id:"plot_0",type:"line"},{id:"plot_1",type:"line"},{id:"plot_2",type:"line"},{id:"plot_3",
type:"line"},{id:"plot_4",type:"line"},{id:"plot_5",palette:"palette_0",target:"fill_0",type:"colorer"}],styles:{plot_0:{title:"Conversion Line",histogramBase:0,joinPoints:!1,isHidden:!1},plot_1:{title:"Base Line",histogramBase:0,joinPoints:!1,isHidden:!1},plot_2:{title:"Lagging Span",histogramBase:0,joinPoints:!1,isHidden:!1},plot_3:{title:"Lead 1",histogramBase:0,joinPoints:!1,isHidden:!1},plot_4:{title:"Lead 2",histogramBase:0,joinPoints:!1,isHidden:!1}},description:"Ichimoku Cloud",shortDescription:"Ichimoku",is_price_study:!0,is_hidden_study:!1,id:"Ichimoku Cloud@tv-basicstudies-1",palettes:{palette_0:{colors:{0:{name:"Color 0"},1:{name:"Color 1"}},valToIndex:{0:0,1:1}}},filledAreas:[{id:"fill_0",objAId:"plot_3",objBId:"plot_4",type:"plot_plot",title:"Plots Background",isHidden:!1,palette:"palette_0"}],inputs:[{id:"in_0",name:"Conversion Line Periods",defval:9,type:"integer",min:1,max:1e12},{id:"in_1",name:"Base Line Periods",defval:26,type:"integer",min:1,max:1e12},{id:"in_2",name:"Lagging Span 2 Periods",defval:52,type:"integer",min:1,max:1e12},{id:"in_3",name:"Displacement",defval:26,type:"integer",min:1,max:1e12}],scriptIdPart:"",name:"Ichimoku Cloud"},constructor:function(){this.donchian=function(e){var t=this._context.new_var(o.Std.low(this._context)),i=this._context.new_var(o.Std.high(this._context));return o.Std.avg(o.Std.lowest(t,e,this._context),o.Std.highest(i,e,this._context))},this.f_1=function(){var e=this._input(0),t=this._input(1),i=this._input(2),n=this._input(3),r=this.donchian(e),s=this.donchian(t),a=o.Std.avg(r,s),l=this.donchian(i);return[r,s,o.Std.close(this._context),a,l,-n,n,n,o.Std.gt(a,l)?0:1]},this.main=function(e,t){this._context=e,this._input=t;var i=this.f_1();return[i[0],i[1],{value:i[2],offset:i[5]},{value:i[3],offset:i[6]},{value:i[4],offset:i[7]},i[8]]}}},{name:"Keltner Channels",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#0000FF"},plot_1:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#0000FF"},plot_2:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#0000FF"}},precision:4,filledAreasStyle:{fill_0:{color:"#0000FF",transparency:90,visible:!0}},inputs:{in_0:!0,in_1:20,in_2:1}},plots:[{id:"plot_0",type:"line"},{id:"plot_1",type:"line"},{id:"plot_2",type:"line"}],styles:{plot_0:{title:"Upper",histogramBase:0,joinPoints:!1},plot_1:{title:"Middle",histogramBase:0,joinPoints:!1},plot_2:{title:"Lower",histogramBase:0,joinPoints:!1}},description:"Keltner Channels",shortDescription:"KC",is_price_study:!0,filledAreas:[{id:"fill_0",objAId:"plot_0",objBId:"plot_2",type:"plot_plot",title:"Plots Background"}],inputs:[{id:"in_0",name:"useTrueRange",defval:!0,type:"bool"},{id:"in_1",name:"length",defval:20,type:"integer",min:1,max:2e3},{id:"in_2",name:"mult",defval:1,type:"float",min:-1e12,max:1e12}],id:"Keltner Channels@tv-basicstudies-1",scriptIdPart:"",name:"Keltner Channels"},
constructor:function(){this.f_0=function(e,t,i,o){return e?t:i-o},this.f_1=function(e,t,i){return e+t*i},this.f_2=function(e,t,i){return e-t*i},this.main=function(e,t){var i,n,r,s,a,l,c,h,u,d,p,_,f,m;return this._context=e,this._input=t,i=o.Std.close(this._context),n=this._input(0),r=this._input(1),s=this._input(2),a=this._context.new_var(i),l=o.Std.ema(a,r,this._context),c=this.f_0(n,o.Std.tr(this._context),o.Std.high(this._context),o.Std.low(this._context)),h=this._context.new_var(c),u=o.Std.ema(h,r,this._context),d=this.f_1(l,u,s),p=this.f_2(l,u,s),_=d,f=l,m=p,[_,f,m]}}},{name:"Klinger Oscillator",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#000080"},plot_1:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#008000"}},precision:4,inputs:{}},plots:[{id:"plot_0",type:"line"},{id:"plot_1",type:"line"}],styles:{plot_0:{title:"Plot",histogramBase:0,joinPoints:!1},plot_1:{title:"Signal",histogramBase:0,joinPoints:!1}},description:"Klinger Oscillator",shortDescription:"Klinger Oscillator",is_price_study:!1,inputs:[],id:"Klinger Oscillator@tv-basicstudies-1",scriptIdPart:"",name:"Klinger Oscillator"},constructor:function(){this.f_0=function(e,t){return o.Std.ge(e,0)?t:-t},this.f_1=function(e,t){return e-t},this.main=function(e,t){var i,n,r,s,a,l,c,h,u,d,p,_,f;return this._context=e,this._input=t,i=o.Std.hlc3(this._context),n=this._context.new_var(i),r=o.Std.change(n),s=this.f_0(r,o.Std.volume(this._context)),a=this._context.new_var(s),l=o.Std.ema(a,34,this._context),c=this._context.new_var(s),h=o.Std.ema(c,55,this._context),u=this.f_1(l,h),d=this._context.new_var(u),p=o.Std.ema(d,13,this._context),_=u,f=p,[_,f]}}},{name:"Know Sure Thing",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#008000"},plot_1:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#FF0000"}},precision:4,bands:[{color:"#808080",linestyle:2,linewidth:1,visible:!0,value:0}],inputs:{in_0:10,in_1:15,in_2:20,in_3:30,in_4:10,in_5:10,in_6:10,in_7:15,in_8:9}},plots:[{id:"plot_0",type:"line"},{id:"plot_1",type:"line"}],styles:{plot_0:{title:"KST",histogramBase:0,joinPoints:!1},plot_1:{title:"Signal",histogramBase:0,joinPoints:!1}},description:"Know Sure Thing",shortDescription:"KST",is_price_study:!1,bands:[{id:"hline_0",name:"Zero"}],inputs:[{id:"in_0",name:"roclen1",defval:10,type:"integer",min:1,max:2e3},{id:"in_1",name:"roclen2",defval:15,type:"integer",min:1,max:2e3},{id:"in_2",name:"roclen3",defval:20,type:"integer",min:1,max:2e3},{id:"in_3",name:"roclen4",defval:30,type:"integer",min:1,max:2e3},{id:"in_4",name:"smalen1",defval:10,type:"integer",min:1,max:2e3},{id:"in_5",name:"smalen2",defval:10,type:"integer",min:1,max:2e3},{id:"in_6",name:"smalen3",defval:10,type:"integer",min:1,max:2e3},{id:"in_7",
name:"smalen4",defval:15,type:"integer",min:1,max:2e3},{id:"in_8",name:"siglen",defval:9,type:"integer",min:1,max:2e3}],id:"Know Sure Thing@tv-basicstudies-1",scriptIdPart:"",name:"Know Sure Thing"},constructor:function(){this.f_0=function(e,t,i,o){return e+2*t+3*i+4*o},this.main=function(e,t){var i,n,r,s,a,l,c,h,u,d,p,_,f,m,g,y,v,b,S,w,T,P,x,C,L,I,M,k,A,E,D,V,O,R,B,z,N,F,W;return this._context=e,this._input=t,i=this._input(0),n=this._input(1),r=this._input(2),s=this._input(3),a=this._input(4),l=this._input(5),c=this._input(6),h=this._input(7),u=this._input(8),d=o.Std.close(this._context),p=i,_=this._context.new_var(d),f=o.Std.roc(_,p),m=a,g=this._context.new_var(f),y=o.Std.sma(g,m,this._context),v=n,b=this._context.new_var(d),S=o.Std.roc(b,v),w=l,T=this._context.new_var(S),P=o.Std.sma(T,w,this._context),x=r,C=this._context.new_var(d),L=o.Std.roc(C,x),I=c,M=this._context.new_var(L),k=o.Std.sma(M,I,this._context),A=s,E=this._context.new_var(d),D=o.Std.roc(E,A),V=h,O=this._context.new_var(D),R=o.Std.sma(O,V,this._context),B=this.f_0(y,P,k,R),z=this._context.new_var(B),N=o.Std.sma(z,u,this._context),F=B,W=N,[F,W]}}},{name:"Least Squares Moving Average",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#000080"}},precision:4,inputs:{in_0:25,in_1:0}},plots:[{id:"plot_0",type:"line"}],styles:{plot_0:{title:"Plot",histogramBase:0,joinPoints:!1}},description:"Least Squares Moving Average",shortDescription:"LSMA",is_price_study:!0,inputs:[{id:"in_0",name:"Length",defval:25,type:"integer",min:1,max:1e12},{id:"in_1",name:"Offset",defval:0,type:"integer",min:-1e12,max:1e12}],id:"Least Squares Moving Average@tv-basicstudies-1",scriptIdPart:"",name:"Least Squares Moving Average"},constructor:function(){this.main=function(e,t){var i,n,r,s,a,l;return this._context=e,this._input=t,i=this._input(0),n=this._input(1),r=o.Std.close(this._context),s=this._context.new_var(r),a=o.Std.linreg(s,i,n),l=a,[l]}}},{name:"Linear Regression Curve",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#000080"}},precision:4,inputs:{in_0:9}},plots:[{id:"plot_0",type:"line"}],styles:{plot_0:{title:"Plot",histogramBase:0,joinPoints:!1}},description:"Linear Regression Curve",shortDescription:"LRC",is_price_study:!0,inputs:[{id:"in_0",name:"Length",defval:9,type:"integer",min:1,max:2e3}],id:"Linear Regression Curve@tv-basicstudies-1",scriptIdPart:"",name:"Linear Regression Curve"},constructor:function(){this.main=function(e,t){var i,n,r,s,a;return this._context=e,this._input=t,i=o.Std.close(this._context),n=this._input(0),r=this._context.new_var(i),s=o.Std.linreg(r,n,0),a=s,[a]}}},{name:"MA Cross",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,
color:"#FF0000"},plot_1:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#008000"},plot_2:{linestyle:0,linewidth:4,plottype:3,trackPrice:!1,transparency:35,visible:!0,color:"#000080"}},precision:4,inputs:{in_0:9,in_1:26}},plots:[{id:"plot_0",type:"line"},{id:"plot_1",type:"line"},{id:"plot_2",type:"line"}],styles:{plot_0:{title:"Short",histogramBase:0,joinPoints:!1},plot_1:{title:"Long",histogramBase:0,joinPoints:!1},plot_2:{title:"Crosses",histogramBase:0,joinPoints:!1}},description:"MA Cross",shortDescription:"MA Cross",is_price_study:!0,inputs:[{id:"in_0",name:"Short",defval:9,type:"integer",min:1,max:2e3},{id:"in_1",name:"Long",defval:26,type:"integer",min:1,max:2e3}],id:"MA Cross@tv-basicstudies-1",scriptIdPart:"",name:"MA Cross"},constructor:function(){this.f_0=function(e,t){return e?t:o.Std.na()},this.main=function(e,t){var i,n,r,s,a,l,c,h,u,d,p;return this._context=e,this._input=t,i=this._input(0),n=this._input(1),r=o.Std.close(this._context),s=this._context.new_var(r),a=o.Std.sma(s,i,this._context),l=this._context.new_var(r),c=o.Std.sma(l,n,this._context),h=a,u=c,d=o.Std.cross(a,c,this._context),p=this.f_0(d,a),[h,u,p]}}},{name:"MA with EMA Cross",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#FF0000"},plot_1:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#008000"},plot_2:{linestyle:0,linewidth:4,plottype:3,trackPrice:!1,transparency:35,visible:!0,color:"#000080"}},precision:4,inputs:{in_0:10,in_1:10}},plots:[{id:"plot_0",type:"line"},{id:"plot_1",type:"line"},{id:"plot_2",type:"line"}],styles:{plot_0:{title:"MA",histogramBase:0,joinPoints:!1},plot_1:{title:"EMA",histogramBase:0,joinPoints:!1},plot_2:{title:"Crosses",histogramBase:0,joinPoints:!1}},description:"MA with EMA Cross",shortDescription:"MA/EMA Cross",is_price_study:!0,inputs:[{id:"in_0",name:"Length MA",defval:10,type:"integer",min:1,max:2e3},{id:"in_1",name:"Length EMA",defval:10,type:"integer",min:1,max:2e3}],id:"MA with EMA Cross@tv-basicstudies-1",scriptIdPart:"",name:"MA with EMA Cross"},constructor:function(){this.f_0=function(e,t){return e?t:o.Std.na()},this.main=function(e,t){var i,n,r,s,a,l,c,h,u,d,p;return this._context=e,this._input=t,i=this._input(0),n=this._input(1),r=o.Std.close(this._context),s=this._context.new_var(r),a=o.Std.sma(s,i,this._context),l=this._context.new_var(r),c=o.Std.ema(l,n,this._context),h=a,u=c,d=o.Std.cross(a,c,this._context),p=this.f_0(d,a),[h,u,p]}}},{name:"Mass Index",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#000080"}},precision:4,inputs:{in_0:10}},plots:[{id:"plot_0",type:"line"}],styles:{plot_0:{title:"Plot",histogramBase:0,joinPoints:!1}},description:"Mass Index",shortDescription:"Mass Index",is_price_study:!1,inputs:[{id:"in_0",name:"length",
defval:10,type:"integer",min:1,max:2e3}],id:"Mass Index@tv-basicstudies-1",scriptIdPart:"",name:"Mass Index"},constructor:function(){this.f_0=function(e,t){return e-t},this.f_1=function(e,t){return e/t},this.main=function(e,t){var i,n,r,s,a,l,c,h,u,d;return this._context=e,this._input=t,i=this._input(0),n=this.f_0(o.Std.high(this._context),o.Std.low(this._context)),r=this._context.new_var(n),s=o.Std.ema(r,9,this._context),a=this._context.new_var(s),l=o.Std.ema(a,9,this._context),c=this.f_1(s,l),h=this._context.new_var(c),u=o.Std.sum(h,i,this._context),d=u,[d]}}},{name:"McGinley Dynamic",metainfo:{_metainfoVersion:42,isTVScript:!1,isTVScriptStub:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#000080"}},precision:4,inputs:{in_0:14}},plots:[{id:"plot_0",type:"line"}],styles:{plot_0:{title:"Plot",histogramBase:0,joinPoints:!1,isHidden:!1}},description:"McGinley Dynamic",shortDescription:"McGinley Dynamic",is_price_study:!0,is_hidden_study:!1,id:"mcginley_dynamic@tv-basicstudies-1",inputs:[{id:"in_0",name:"length",defval:14,type:"integer",min:1,max:1e12}],scriptIdPart:"",name:"McGinley Dynamic"},constructor:function(){this.f_0=function(){var e,t=this._input(0),i=o.Std.close(this._context),n=this._context.new_var(i),r=o.Std.ema(n,t,this._context),s=this._context.new_var(),a=s.get(1)+(i-s.get(1))/(t*o.Std.pow(i/s.get(1),4));return s.set(o.Std.na(s.get(1))?r:a),e=s.get(0),[e]},this.main=function(e,t){return this._context=e,this._input=t,this.f_0()}}},{name:"Momentum",metainfo:{_metainfoVersion:30,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#808000"}},precision:4,inputs:{in_0:10,in_1:"close"}},plots:[{id:"plot_0",type:"line"}],styles:{plot_0:{title:"Mom",histogramBase:0,joinPoints:!1,isHidden:!1}},description:"Momentum",shortDescription:"Mom",is_price_study:!1,inputs:[{id:"in_0",name:"Length",defval:10,type:"integer",min:1,max:2e3},{id:"in_1",name:"Source",defval:"close",type:"source",options:["open","high","low","close","hl2","hlc3","ohlc4"]}],id:"Momentum@tv-basicstudies-1",scriptIdPart:"",name:"Momentum"},constructor:function(){this.main=function(e,t){var i,n,r,s,a;return this._context=e,this._input=t,i=this._input(0),n=o.Std[this._input(1)](this._context),r=this._context.new_var(n),s=r.get(i),a=s?n-s:null,[a]}}},{name:"Money Flow",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#459915"}},precision:4,bands:[{color:"#c0c0c0",linestyle:2,linewidth:1,visible:!0,value:80},{color:"#c0c0c0",linestyle:2,linewidth:1,visible:!0,value:20}],filledAreasStyle:{fill_0:{color:"#9915ff",transparency:90,visible:!0}},inputs:{in_0:14}},plots:[{id:"plot_0",type:"line"}],styles:{plot_0:{title:"Plot",histogramBase:0,joinPoints:!1}},description:"Money Flow",shortDescription:"MFI",is_price_study:!1,bands:[{id:"hline_0",
name:"UpperLimit"},{id:"hline_1",name:"LowerLimit"}],filledAreas:[{id:"fill_0",objAId:"hline_0",objBId:"hline_1",type:"hline_hline",title:"Hlines Background"}],inputs:[{id:"in_0",name:"Length",defval:14,type:"integer",min:1,max:2e3}],id:"Money Flow@tv-basicstudies-1",scriptIdPart:"",name:"Money Flow"},constructor:function(){this.f_0=function(e,t,i){return e*(o.Std.le(t,0)?0:i)},this.f_1=function(e,t,i){return e*(o.Std.ge(t,0)?0:i)},this.main=function(e,t){var i,n,r,s,a,l,c,h,u,d,p,_;return this._context=e,this._input=t,i=this._input(0),n=o.Std.hlc3(this._context),r=this._context.new_var(n),s=o.Std.change(r),a=this.f_0(o.Std.volume(this._context),s,n),l=this._context.new_var(a),c=o.Std.sum(l,i,this._context),h=this.f_1(o.Std.volume(this._context),s,n),u=this._context.new_var(h),d=o.Std.sum(u,i,this._context),p=o.Std.rsi(c,d),_=p,[_]}}},{name:"Moving Average",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#0000FF"}},precision:4,inputs:{in_0:9,in_1:"close",in_2:0}},plots:[{id:"plot_0",type:"line"}],styles:{plot_0:{title:"Plot",histogramBase:0,joinPoints:!1}},description:"Moving Average",shortDescription:"MA",is_price_study:!0,inputs:[{id:"in_0",name:"Length",defval:9,type:"integer",min:1,max:1e4},{id:"in_1",name:"Source",defval:"close",type:"source",options:["open","high","low","close","hl2","hlc3","ohlc4"]},{id:"in_2",name:"Offset",defval:0,type:"integer",min:-1e4,max:1e4}],id:"Moving Average@tv-basicstudies-1",scriptIdPart:"",name:"Moving Average"},constructor:function(){this.main=function(e,t){var i,n,r,s,a,l;return this._context=e,this._input=t,i=o.Std[this._input(1)](this._context),n=this._input(0),r=this._input(2),s=this._context.new_var(i),a=o.Std.sma(s,n,this._context),l=a,[{value:l,offset:r}]}}},{name:"Moving Average Channel",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#0000FF"},plot_1:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#CC0000"}},precision:4,filledAreasStyle:{fill_0:{color:"#A2C4C9",transparency:90,visible:!0}},inputs:{in_0:20,in_1:20,in_2:0,in_3:0}},plots:[{id:"plot_0",type:"line"},{id:"plot_1",type:"line"}],styles:{plot_0:{title:"Upper",histogramBase:0,joinPoints:!1},plot_1:{title:"Lower",histogramBase:0,joinPoints:!1}},filledAreas:[{id:"fill_0",objAId:"plot_0",objBId:"plot_1",type:"plot_plot",title:"Plots Background"}],description:"Moving Average Channel",shortDescription:"MAC",is_price_study:!0,inputs:[{id:"in_0",name:"Upper Length",defval:20,type:"integer",min:1,max:1e4},{id:"in_1",name:"Lower Length",defval:20,type:"integer",min:1,max:1e4},{id:"in_2",name:"Upper Offset",defval:0,type:"integer",min:-1e4,max:1e4},{id:"in_3",name:"Lower Offset",defval:0,type:"integer",min:-1e4,max:1e4}],id:"Moving Average Channel@tv-basicstudies-1",scriptIdPart:"",
name:"Moving Average Channel"},constructor:function(){this.main=function(e,t){var i,n,r,s,a,l,c,h,u,d;return this._context=e,this._input=t,i=o.Std.high(this._context),n=o.Std.low(this._context),r=this._input(0),s=this._input(1),a=this._input(2),l=this._input(3),c=this._context.new_var(i),h=this._context.new_var(n),u=o.Std.sma(c,r,this._context),d=o.Std.sma(h,s,this._context),[{value:u,offset:a},{value:d,offset:l}]}}},{name:"Moving Average Convergence/Divergence",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:1,trackPrice:!1,transparency:35,visible:!0,color:"#FF0000"},plot_1:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#0000FF"},plot_2:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#FF0000"}},precision:4,inputs:{in_0:12,in_1:26,in_3:"close",in_2:9}},plots:[{id:"plot_0",type:"line"},{id:"plot_1",type:"line"},{id:"plot_2",type:"line"}],styles:{plot_0:{title:"Histogram",histogramBase:0,joinPoints:!1},plot_1:{title:"MACD",histogramBase:0,joinPoints:!1},plot_2:{title:"Signal",histogramBase:0,joinPoints:!1}},description:"MACD",shortDescription:"MACD",is_price_study:!1,inputs:[{id:"in_0",name:"fastLength",defval:12,type:"integer",min:1,max:2e3},{id:"in_1",name:"slowLength",defval:26,type:"integer",min:1,max:2e3},{id:"in_3",name:"Source",defval:"close",type:"source",options:["open","high","low","close","hl2","hlc3","ohlc4"]},{id:"in_2",name:"signalLength",defval:9,type:"integer",min:1,max:50}],id:"Moving Average Convergence/Divergence@tv-basicstudies-1",scriptIdPart:"",name:"MACD"},constructor:function(){this.f_0=function(e,t){return e-t},this.main=function(e,t){var i,n,r,s,a,l,c,h,u,d,p,_,f,m,g;return this._context=e,this._input=t,i=o.Std[this._input(2)](this._context),n=this._input(0),r=this._input(1),s=this._input(3),a=this._context.new_var(i),l=o.Std.ema(a,n,this._context),c=this._context.new_var(i),h=o.Std.ema(c,r,this._context),u=this.f_0(l,h),d=this._context.new_var(u),p=o.Std.ema(d,s,this._context),_=this.f_0(u,p),f=_,m=u,g=p,[f,m,g]}}},{name:"Moving Average Exponential",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#0000FF"}},precision:4,inputs:{in_0:9,in_1:"close",in_2:0}},plots:[{id:"plot_0",type:"line"}],styles:{plot_0:{title:"Plot",histogramBase:0,joinPoints:!1}},description:"Moving Average Exponential",shortDescription:"EMA",is_price_study:!0,inputs:[{id:"in_0",name:"Length",defval:9,type:"integer",min:1,max:1e4},{id:"in_1",name:"Source",defval:"close",type:"source",options:["open","high","low","close","hl2","hlc3","ohlc4"]},{id:"in_2",name:"Offset",defval:0,type:"integer",min:-1e4,max:1e4}],id:"Moving Average Exponential@tv-basicstudies-1",scriptIdPart:"",name:"Moving Average Exponential"},constructor:function(){this.main=function(e,t){var i,n,r,s,a,l;return this._context=e,this._input=t,
i=o.Std[this._input(1)](this._context),n=this._input(0),r=this._input(2),s=this._context.new_var(i),a=o.Std.ema(s,n,this._context),l=a,[{value:l,offset:r}]}}},{name:"Moving Average Weighted",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#0000FF"}},precision:4,inputs:{in_0:9,in_1:"close",in_2:0}},plots:[{id:"plot_0",type:"line"}],styles:{plot_0:{title:"Plot",histogramBase:0,joinPoints:!1}},description:"Moving Average Weighted",shortDescription:"WMA",is_price_study:!0,inputs:[{id:"in_0",name:"Length",defval:9,type:"integer",min:1,max:2e3},{id:"in_1",name:"Source",defval:"close",type:"source",options:["open","high","low","close","hl2","hlc3","ohlc4"]},{id:"in_2",name:"Offset",defval:0,type:"integer",min:-1e4,max:1e4}],id:"Moving Average Weighted@tv-basicstudies-1",scriptIdPart:"",name:"Moving Average Weighted"},constructor:function(){this.main=function(e,t){var i,n,r,s,a,l;return this._context=e,this._input=t,i=o.Std[this._input(1)](this._context),n=this._input(0),r=this._input(2),s=this._context.new_var(i),a=o.Std.wma(s,n,this._context),l=a,[{value:l,offset:r}]}}},{name:"Net Volume",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#0000FF"}},precision:4,inputs:{}},plots:[{id:"plot_0",type:"line"}],styles:{plot_0:{title:"Plot",histogramBase:0,joinPoints:!1}},description:"Net Volume",shortDescription:"Net Volume",is_price_study:!1,inputs:[],id:"Net Volume@tv-basicstudies-1",scriptIdPart:"",name:"Net Volume"},constructor:function(){this.f_0=function(e,t,i){return o.Std.gt(e,0)?t:o.Std.lt(i,0)?-t:0*t},this.main=function(e,t){var i,n,r,s,a;return this._context=e,this._input=t,i=o.Std.close(this._context),n=this._context.new_var(i),r=o.Std.change(n),s=this.f_0(r,o.Std.volume(this._context),r),a=s,[a]}}},{name:"On Balance Volume",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#0000FF"}},precision:4,inputs:{}},plots:[{id:"plot_0",type:"line"}],styles:{plot_0:{title:"Plot",histogramBase:0,joinPoints:!1}},description:"On Balance Volume",shortDescription:"OBV",is_price_study:!1,inputs:[],id:"On Balance Volume@tv-basicstudies-1",scriptIdPart:"",name:"On Balance Volume"},constructor:function(){this.f_0=function(e,t,i){return o.Std.gt(e,0)?t:o.Std.lt(i,0)?-t:0*t},this.main=function(e,t){var i,n,r,s,a,l;return this._context=e,this._input=t,i=o.Std.close(this._context),n=this._context.new_var(i),r=o.Std.change(n),s=this.f_0(r,o.Std.volume(this._context),r),a=o.Std.cum(s,this._context),l=a,[l]}}},{name:"Parabolic SAR",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:3,trackPrice:!1,transparency:35,visible:!0,color:"#0000FF"}},
precision:4,inputs:{in_0:.02,in_1:.02,in_2:.2}},plots:[{id:"plot_0",type:"line"}],styles:{plot_0:{title:"Plot",histogramBase:0,joinPoints:!1}},description:"Parabolic SAR",shortDescription:"SAR",is_price_study:!0,inputs:[{id:"in_0",name:"start",defval:.02,type:"float",min:-1e12,max:1e12},{id:"in_1",name:"increment",defval:.02,type:"float",min:-1e12,max:1e12},{id:"in_2",name:"maximum",defval:.2,type:"float",min:-1e12,max:1e12}],id:"Parabolic SAR@tv-basicstudies-1",scriptIdPart:"",name:"Parabolic SAR"},constructor:function(){this.main=function(e,t){var i,n,r,s,a;return this._context=e,this._input=t,i=this._input(0),n=this._input(1),r=this._input(2),s=o.Std.sar(i,n,r,this._context),a=s,[a]}}},{name:"Price Channel",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#FF0080"},plot_1:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#FF0080"},plot_2:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#0496FF"}},precision:4,inputs:{in_0:20,in_1:0}},plots:[{id:"plot_0",type:"line"},{id:"plot_1",type:"line"},{id:"plot_2",type:"line"}],styles:{plot_0:{title:"Highprice Line",histogramBase:0,joinPoints:!1},plot_1:{title:"Lowprice Line",histogramBase:0,joinPoints:!1},plot_2:{title:"Centerprice Line",histogramBase:0,joinPoints:!1}},description:"Price Channel",shortDescription:"PC",is_price_study:!1,inputs:[{id:"in_0",name:"Length",defval:20,type:"integer",min:1,max:2e3},{id:"in_1",name:"Offset Length",defval:0,type:"integer",min:1,max:2e3}],id:"Price Channel@tv-basicstudies-1",scriptIdPart:"",name:"Price Channel"},constructor:function(){this.main=function(e,t){var i,n,r,s,a,l,c,h,u;return this._context=e,this._input=t,i=o.Std.high(this._context),n=this._context.new_var(i),r=o.Std.low(this._context),s=this._context.new_var(r),a=this._input(0),l=this._input(1),c=o.Std.highest(n,a,this._context),h=o.Std.lowest(s,a,this._context),u=o.Std.avg(c,h),[{value:c,offset:l},{value:h,offset:l},{value:u,offset:l}]}}},{name:"Price Oscillator",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#0000FF"}},precision:4,inputs:{in_0:10,in_1:21}},plots:[{id:"plot_0",type:"line"}],styles:{plot_0:{title:"Plot",histogramBase:0,joinPoints:!1}},description:"Price Oscillator",shortDescription:"PPO",is_price_study:!1,inputs:[{id:"in_0",name:"shortlen",defval:10,type:"integer",min:1,max:2e3},{id:"in_1",name:"longlen",defval:21,type:"integer",min:1,max:2e3}],id:"Price Oscillator@tv-basicstudies-1",scriptIdPart:"",name:"Price Oscillator"},constructor:function(){this.f_0=function(e,t){return(e-t)/t*100},this.main=function(e,t){var i,n,r,s,a,l,c,h,u;return this._context=e,this._input=t,i=o.Std.close(this._context),n=this._input(0),r=this._input(1),s=this._context.new_var(i),a=o.Std.sma(s,n,this._context),
l=this._context.new_var(i),c=o.Std.sma(l,r,this._context),h=this.f_0(a,c),u=h,[u]}}},{name:"Price Volume Trend",metainfo:{_metainfoVersion:42,isTVScript:!1,isTVScriptStub:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#0000FF"}},precision:4,inputs:{}},plots:[{id:"plot_0",type:"line"}],styles:{plot_0:{title:"PVT",histogramBase:0,joinPoints:!1,isHidden:!1}},description:"Price Volume Trend",shortDescription:"PVT",is_price_study:!1,is_hidden_study:!1,id:"price_volume_trend@tv-basicstudies-1",inputs:[],scriptIdPart:"",name:"Price Volume Trend"},constructor:function(){this.f_0=function(){var e=this._context.new_var(o.Std.close(this._context));return[o.Std.cum(o.Std.change(e)/e.get(1)*o.Std.volume(this._context),this._context)]},this.main=function(e,t){return this._context=e,this._input=t,[this.f_0()[0]]}}},{name:"Rate Of Change",metainfo:{_metainfoVersion:41,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#0000FF"}},precision:4,bands:[{color:"#808080",linestyle:2,linewidth:1,visible:!0,value:0}],inputs:{in_0:9}},plots:[{id:"plot_0",type:"line"}],styles:{plot_0:{title:"ROC",histogramBase:0,joinPoints:!1,isHidden:!1}},description:"Rate Of Change",shortDescription:"ROC",is_price_study:!1,bands:[{id:"hline_0",name:"Zero Line",isHidden:!1}],inputs:[{id:"in_0",name:"length",defval:9,type:"integer",min:1,max:1e12}],id:"rate_of_change@tv-basicstudies-1",scriptIdPart:"",name:"Rate Of Change"},constructor:function(){this.main=function(e,t){var i,n,r;return this._context=e,this._input=t,i=this._context.new_var(o.Std.close(this._context)),n=this._input(0),r=100*(i.get(0)-i.get(n))/i.get(n),[r]}}},{name:"Relative Strength Index",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#800080"}},precision:4,bands:[{color:"#808080",linestyle:2,linewidth:1,visible:!0,value:70},{color:"#808080",linestyle:2,linewidth:1,visible:!0,value:30}],filledAreasStyle:{fill_0:{color:"#800080",transparency:90,visible:!0}},inputs:{in_0:14}},plots:[{id:"plot_0",type:"line"}],styles:{plot_0:{title:"Plot",histogramBase:0,joinPoints:!1}},description:"Relative Strength Index",shortDescription:"RSI",is_price_study:!1,bands:[{id:"hline_0",name:"UpperLimit"},{id:"hline_1",name:"LowerLimit"}],filledAreas:[{id:"fill_0",objAId:"hline_0",objBId:"hline_1",type:"hline_hline",title:"Hlines Background"}],inputs:[{id:"in_0",name:"Length",defval:14,type:"integer",min:1,max:2e3}],id:"Relative Strength Index@tv-basicstudies-1",scriptIdPart:"",name:"Relative Strength Index"},constructor:function(){this.f_0=function(e){return o.Std.max(e,0)},this.f_1=function(e){return-o.Std.min(e,0)},this.f_2=function(e,t){return o.Std.eq(e,0)?100:o.Std.eq(t,0)?0:100-100/(1+t/e)},this.main=function(e,t){var i,n,r,s,a,l,c,h,u,d,p,_;return this._context=e,this._input=t,
i=o.Std.close(this._context),n=this._input(0),r=this._context.new_var(i),s=o.Std.change(r),a=this.f_0(s),l=this._context.new_var(a),c=o.Std.rma(l,n,this._context),h=this.f_1(s),u=this._context.new_var(h),d=o.Std.rma(u,n,this._context),p=this.f_2(d,c),_=p,[_]}}},{name:"Relative Vigor Index",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#008000"},plot_1:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#FF0000"}},precision:4,inputs:{in_0:10}},plots:[{id:"plot_0",type:"line"},{id:"plot_1",type:"line"}],styles:{plot_0:{title:"RVGI",histogramBase:0,joinPoints:!1},plot_1:{title:"Signal",histogramBase:0,joinPoints:!1}},description:"Relative Vigor Index",shortDescription:"RVGI",is_price_study:!1,inputs:[{id:"in_0",name:"Length",defval:10,type:"integer",min:1,max:2e3}],id:"Relative Vigor Index@tv-basicstudies-1",scriptIdPart:"",name:"Relative Vigor Index"},constructor:function(){this.f_0=function(e,t){return e-t},this.f_1=function(e,t){return e/t},this.main=function(e,t){var i,n,r,s,a,l,c,h,u,d,p,_,f,m,g,y;return this._context=e,this._input=t,i=this._input(0),n=this.f_0(o.Std.close(this._context),o.Std.open(this._context)),r=this._context.new_var(n),s=o.Std.swma(r,this._context),a=this._context.new_var(s),l=o.Std.sum(a,i,this._context),c=this.f_0(o.Std.high(this._context),o.Std.low(this._context)),h=this._context.new_var(c),u=o.Std.swma(h,this._context),d=this._context.new_var(u),p=o.Std.sum(d,i,this._context),_=this.f_1(l,p),f=this._context.new_var(_),m=o.Std.swma(f,this._context),g=_,y=m,[g,y]}}},{name:"Relative Volatility Index",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#000080"}},precision:4,bands:[{color:"#808080",linestyle:2,linewidth:1,visible:!0,value:80},{color:"#808080",linestyle:2,linewidth:1,visible:!0,value:20}],filledAreasStyle:{fill_0:{color:"#808000",transparency:90,visible:!0}},inputs:{in_0:10}},plots:[{id:"plot_0",type:"line"}],styles:{plot_0:{title:"Plot",histogramBase:0,joinPoints:!1}},description:"Relative Volatility Index",shortDescription:"RVI",is_price_study:!1,bands:[{id:"hline_0",name:"UpperLimit"},{id:"hline_1",name:"LowerLimit"}],filledAreas:[{id:"fill_0",objAId:"hline_0",objBId:"hline_1",type:"hline_hline",title:"Hlines Background"}],inputs:[{id:"in_0",name:"length",defval:10,type:"integer",min:1,max:2e3}],id:"Relative Volatility Index@tv-basicstudies-1",scriptIdPart:"",name:"Relative Volatility Index"},constructor:function(){this.f_0=function(e,t){return o.Std.le(e,0)?0:t},this.f_1=function(e,t){return o.Std.gt(e,0)?0:t},this.f_2=function(e,t){return e/(e+t)*100},this.main=function(e,t){var i,n,r,s,a,l,c,h,u,d,p,_,f,m;return this._context=e,this._input=t,i=this._input(0),n=o.Std.close(this._context),r=this._context.new_var(n),s=o.Std.stdev(r,i,this._context),
a=this._context.new_var(n),l=o.Std.change(a),c=this.f_0(l,s),h=this._context.new_var(c),u=o.Std.ema(h,14,this._context),d=this.f_1(l,s),p=this._context.new_var(d),_=o.Std.ema(p,14,this._context),f=this.f_2(u,_),m=f,[m]}}},{name:"SMI Ergodic Indicator/Oscillator",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#0000FF"},plot_1:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#FF7F00"},plot_2:{linestyle:0,linewidth:1,plottype:1,trackPrice:!1,transparency:35,visible:!0,color:"#FF0000"}},precision:4,inputs:{in_0:5,in_1:20,in_2:5}},plots:[{id:"plot_0",type:"line"},{id:"plot_1",type:"line"},{id:"plot_2",type:"line"}],styles:{plot_0:{title:"Indicator",histogramBase:0,joinPoints:!1},plot_1:{title:"Signal",histogramBase:0,joinPoints:!1},plot_2:{title:"Oscillator",histogramBase:0,joinPoints:!1}},description:"SMI Ergodic Indicator/Oscillator",shortDescription:"SMIIO",is_price_study:!1,inputs:[{id:"in_0",name:"shortlen",defval:5,type:"integer",min:1,max:2e3},{id:"in_1",name:"longlen",defval:20,type:"integer",min:1,max:2e3},{id:"in_2",name:"siglen",defval:5,type:"integer",min:1,max:2e3}],id:"SMI Ergodic Indicator/Oscillator@tv-basicstudies-1",scriptIdPart:"",name:"SMI Ergodic Indicator/Oscillator"},constructor:function(){this.f_0=function(e,t){return e-t},this.main=function(e,t){var i,n,r,s,a,l,c,h,u,d,p,_;return this._context=e,this._input=t,i=this._input(0),n=this._input(1),r=this._input(2),s=o.Std.close(this._context),a=this._context.new_var(s),l=o.Std.tsi(a,i,n,this._context),c=this._context.new_var(l),h=o.Std.ema(c,r,this._context),u=this.f_0(l,h),d=l,p=h,_=u,[d,p,_]}}},{name:"Smoothed Moving Average",metainfo:{_metainfoVersion:41,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#FF0000"}},precision:4,inputs:{in_0:7,in_1:"close"}},plots:[{id:"plot_0",type:"line"}],styles:{plot_0:{title:"Plot",histogramBase:0,joinPoints:!1,isHidden:!1}},description:"Smoothed Moving Average",shortDescription:"SMMA",is_price_study:!0,inputs:[{id:"in_0",name:"Length",defval:7,type:"integer",min:1,max:1e12},{id:"in_1",name:"Source",defval:"close",type:"source",options:["open","high","low","close","hl2","hlc3","ohlc4"]}],id:"smoothed_moving_average@tv-basicstudies-1",scriptIdPart:"",name:"Smoothed Moving Average"},constructor:function(){this.f_0=function(){var e,t=this._input(0),i=o.Std[this._input(1)](this._context),n=this._context.new_var(i),r=o.Std.sma(n,t,this._context),s=this._context.new_var(),a=(s.get(1)*(t-1)+i)/t;return s.set(o.Std.na(s.get(1))?r:a),e=s.get(0),[e]},this.main=function(e,t){return this._context=e,this._input=t,this.f_0()}}},{name:"Stochastic",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#0000FF"},
plot_1:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#FF0000"}},precision:4,bands:[{color:"#808080",linestyle:2,linewidth:1,visible:!0,value:80},{color:"#808080",linestyle:2,linewidth:1,visible:!0,value:20}],filledAreasStyle:{fill_0:{color:"#800080",transparency:75,visible:!0}},inputs:{in_0:14,in_1:1,in_2:3}},plots:[{id:"plot_0",type:"line"},{id:"plot_1",type:"line"}],styles:{plot_0:{title:"%K",histogramBase:0,joinPoints:!1},plot_1:{title:"%D",histogramBase:0,joinPoints:!1}},description:"Stochastic",shortDescription:"Stoch",is_price_study:!1,bands:[{id:"hline_0",name:"UpperLimit"},{id:"hline_1",name:"LowerLimit"}],filledAreas:[{id:"fill_0",objAId:"hline_0",objBId:"hline_1",type:"hline_hline",title:"Hlines Background"}],inputs:[{id:"in_0",name:"length",defval:14,type:"integer",min:1,max:1e4},{id:"in_1",name:"smoothK",defval:1,type:"integer",min:1,max:1e4},{id:"in_2",name:"smoothD",defval:3,type:"integer",min:1,max:1e4}],id:"Stochastic@tv-basicstudies-1",scriptIdPart:"",name:"Stochastic"},constructor:function(){this.main=function(e,t){var i,n,r,s,a,l,c,h,u,d,p,_,f,m,g,y;return this._context=e,this._input=t,i=this._input(0),n=this._input(1),r=this._input(2),s=o.Std.close(this._context),a=o.Std.high(this._context),l=o.Std.low(this._context),c=this._context.new_var(s),h=this._context.new_var(a),u=this._context.new_var(l),d=o.Std.stoch(c,h,u,i,this._context),p=this._context.new_var(d),_=o.Std.sma(p,n,this._context),f=this._context.new_var(_),m=o.Std.sma(f,r,this._context),g=_,y=m,[g,y]}}},{name:"Stochastic RSI",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#0000FF"},plot_1:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#FF0000"}},precision:4,bands:[{color:"#808080",linestyle:2,linewidth:1,visible:!0,value:80},{color:"#808080",linestyle:2,linewidth:1,visible:!0,value:20}],filledAreasStyle:{fill_0:{color:"#800080",transparency:80,visible:!0}},inputs:{in_0:14,in_1:14,in_2:3,in_3:3}},plots:[{id:"plot_0",type:"line"},{id:"plot_1",type:"line"}],styles:{plot_0:{title:"%K",histogramBase:0,joinPoints:!1},plot_1:{title:"%D",histogramBase:0,joinPoints:!1}},description:"Stochastic RSI",shortDescription:"Stoch RSI",is_price_study:!1,bands:[{id:"hline_0",name:"UpperLimit"},{id:"hline_1",name:"LowerLimit"}],filledAreas:[{id:"fill_0",objAId:"hline_0",objBId:"hline_1",type:"hline_hline",title:"Hlines Background"}],inputs:[{id:"in_0",name:"lengthRSI",defval:14,type:"integer",min:1,max:1e4},{id:"in_1",name:"lengthStoch",defval:14,type:"integer",min:1,max:1e4},{id:"in_2",name:"smoothK",defval:3,type:"integer",min:1,max:1e4},{id:"in_3",name:"smoothD",defval:3,type:"integer",min:1,max:1e4}],id:"Stochastic RSI@tv-basicstudies-1",scriptIdPart:"",name:"Stochastic RSI"},constructor:function(){this.f_1=function(e,t,i){var n=i.new_var(o.Std.max(o.Std.change(e),0));return o.Std.rma(n,t,i)},this.f_2=function(e,t,i){
var n=i.new_var(-o.Std.min(o.Std.change(e),0));return o.Std.rma(n,t,i)},this.main=function(e,t){var i,n,r,s,a,l,c,h,u,d,p,_,f,m,g,y,v;return this._context=e,this._input=t,i=o.Std.close(this._context),n=this._input(0),r=this._input(1),s=this._input(2),a=this._input(3),l=this._context.new_var(i),c=o.Std.rsi(this.f_1(l,n,this._context),this.f_2(l,n,this._context)),h=this._context.new_var(c),u=this._context.new_var(c),d=this._context.new_var(c),p=o.Std.stoch(h,u,d,r,this._context),_=this._context.new_var(p),f=o.Std.sma(_,s,this._context),m=this._context.new_var(f),g=o.Std.sma(m,a,this._context),y=f,v=g,[y,v]}}},{name:"TRIX",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#800000"}},precision:4,bands:[{color:"#808080",linestyle:2,linewidth:1,visible:!0,value:0}],inputs:{in_0:18}},plots:[{id:"plot_0",type:"line"}],styles:{plot_0:{title:"TRIX",histogramBase:0,joinPoints:!1}},description:"TRIX",shortDescription:"TRIX",is_price_study:!1,bands:[{id:"hline_0",name:"Zero"}],inputs:[{id:"in_0",name:"length",defval:18,type:"integer",min:1,max:2e3}],id:"TRIX@tv-basicstudies-1",scriptIdPart:"",name:"TRIX"},constructor:function(){this.f_0=function(e){return o.Std.log(e)},this.f_1=function(e){return 1e4*e},this.main=function(e,t){var i,n,r,s,a,l,c,h,u,d,p,_;return this._context=e,this._input=t,i=this._input(0),n=this.f_0(o.Std.close(this._context)),r=this._context.new_var(n),s=o.Std.ema(r,i,this._context),a=this._context.new_var(s),l=o.Std.ema(a,i,this._context),c=this._context.new_var(l),h=o.Std.ema(c,i,this._context),u=this._context.new_var(h),d=o.Std.change(u),p=this.f_1(d),_=p,[_]}}},{name:"Triple EMA",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#008000"}},precision:4,inputs:{in_0:9}},plots:[{id:"plot_0",type:"line"}],styles:{plot_0:{title:"Plot",histogramBase:0,joinPoints:!1}},description:"Triple EMA",shortDescription:"TEMA",is_price_study:!0,inputs:[{id:"in_0",name:"length",defval:9,type:"integer",min:1,max:1e4}],id:"Triple EMA@tv-basicstudies-1",scriptIdPart:"",name:"Triple EMA"},constructor:function(){this.f_0=function(e,t,i){return 3*(e-t)+i},this.main=function(e,t){var i,n,r,s,a,l,c,h,u,d;return this._context=e,this._input=t,i=this._input(0),n=o.Std.close(this._context),r=this._context.new_var(n),s=o.Std.ema(r,i,this._context),a=this._context.new_var(s),l=o.Std.ema(a,i,this._context),c=this._context.new_var(l),h=o.Std.ema(c,i,this._context),u=this.f_0(s,l,h),d=u,[d]}}},{name:"True Strength Indicator",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#000080"},plot_1:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#FF0000"}},precision:4,bands:[{color:"#808080",
linestyle:2,linewidth:1,visible:!0,value:0}],inputs:{in_0:25,in_1:13,in_2:13}},plots:[{id:"plot_0",type:"line"},{id:"plot_1",type:"line"}],styles:{plot_0:{title:"Plot",histogramBase:0,joinPoints:!1},plot_1:{title:"Plot",histogramBase:0,joinPoints:!1}},description:"True Strength Indicator",shortDescription:"True Strength Indicator",is_price_study:!1,bands:[{id:"hline_0",name:"Zero"}],inputs:[{id:"in_0",name:"long",defval:25,type:"integer",min:1,max:4999},{id:"in_1",name:"short",defval:13,type:"integer",min:1,max:4999},{id:"in_2",name:"siglen",defval:13,type:"integer",min:1,max:4999}],id:"True Strength Indicator@tv-basicstudies-1",scriptIdPart:"",name:"True Strength Indicator"},constructor:function(){this.main=function(e,t){var i,n,r,s,a,l,c,h;return this._context=e,this._input=t,i=this._input(0),n=this._input(1),r=this._input(2),s=o.Std.close(this._context),a=this._context.new_var(s),l=o.Std.tsi(a,n,i,this._context),c=l,h=this._context.new_var(c),[c,o.Std.ema(h,r,this._context)]}}},{name:"Ultimate Oscillator",metainfo:{_metainfoVersion:41,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#FF0000"}},precision:4,inputs:{in_0:7,in_1:14,in_2:28}},plots:[{id:"plot_0",type:"line"}],styles:{plot_0:{title:"UO",histogramBase:0,joinPoints:!1,isHidden:!1}},description:"Ultimate Oscillator",shortDescription:"UO",is_price_study:!1,inputs:[{id:"in_0",name:"length7",defval:7,type:"integer",min:1,max:1e12},{id:"in_1",name:"length14",defval:14,type:"integer",min:1,max:1e12},{id:"in_2",name:"length28",defval:28,type:"integer",min:1,max:1e12}],id:"ultimate_oscillator@tv-basicstudies-1",scriptIdPart:"",name:"Ultimate Oscillator"},constructor:function(){this.f_0=function(e,t,i){var n=this._context.new_var(e),r=this._context.new_var(t);return[o.Std.sum(n,i,this._context)/o.Std.sum(r,i,this._context)]},this.f_1=function(){var e=this._input(0),t=this._input(1),i=this._input(2),n=this._context.new_var(o.Std.close(this._context)),r=o.Std.max(o.Std.high(this._context),n.get(1)),s=this._context.new_var(o.Std.close(this._context)),a=o.Std.min(o.Std.low(this._context),s.get(1)),l=o.Std.close(this._context)-a,c=r-a,h=this.f_0(l,c,e),u=this.f_0(l,c,t),d=this.f_0(l,c,i);return[100*(4*h[0]+2*u[0]+d[0])/7]},this.main=function(e,t){return this._context=e,this._input=t,this.f_1()}}},{name:"VWAP",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:0,transparency:0,visible:!0,color:"#3A6CA8"}},precision:4},plots:[{id:"plot_0",type:"line"}],styles:{plot_0:{title:"VWAP",histogramBase:0,joinPoints:!1,isHidden:!1}},description:"VWAP",shortDescription:"VWAP",is_price_study:!0,inputs:[],id:"VWAP@tv-basicstudies-1",scriptIdPart:"",name:"VWAP"},constructor:function(){this.f_1=function(e){e.hist=null,e.add_hist()},this.init=function(e,t){this._isNewSession=o.Std.createNewSessionCheck(e)},this.main=function(e,t){var i,n,r,s;return this._context=e,
this._input=t,i=e.new_var(),n=e.new_var(),this._context.symbol.time&&(r=this._context.symbol.time,this._isNewSession(r)&&(this.f_1(i),this.f_1(n))),i.set(o.Std.nz(i.get(1))+o.Std.hlc3(this._context)*o.Std.volume(this._context)),n.set(o.Std.nz(n.get(1))+o.Std.volume(this._context)),s=i.get(0)/n.get(0),[s]}}},{name:"VWMA",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#0000FF"}},precision:4,inputs:{in_0:20}},plots:[{id:"plot_0",type:"line"}],styles:{plot_0:{title:"Plot",histogramBase:0,joinPoints:!1}},description:"VWMA",shortDescription:"VWMA",is_price_study:!0,inputs:[{id:"in_0",name:"len",defval:20,type:"integer",min:1,max:1e4}],id:"VWMA@tv-basicstudies-1",scriptIdPart:"",name:"VWMA"},constructor:function(){this.main=function(e,t){var i,n,r,s,a;return this._context=e,this._input=t,i=o.Std.close(this._context),n=this._input(0),r=this._context.new_var(i),s=o.Std.vwma(r,n,this._context),a=s,[a]}}},{name:"Volume Oscillator",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#000080"}},precision:4,bands:[{color:"#808080",linestyle:2,linewidth:1,visible:!0,value:0}],inputs:{in_0:5,in_1:10}},plots:[{id:"plot_0",type:"line"}],styles:{plot_0:{title:"Plot",histogramBase:0,joinPoints:!1}},description:"Volume Oscillator",shortDescription:"Volume Osc",is_price_study:!1,bands:[{id:"hline_0",name:"Zero"}],inputs:[{id:"in_0",name:"shortlen",defval:5,type:"integer",min:1,max:4999},{id:"in_1",name:"longlen",defval:10,type:"integer",min:1,max:4999}],id:"Volume Oscillator@tv-basicstudies-1",scriptIdPart:"",name:"Volume Oscillator"},constructor:function(){this.f_0=function(e,t){return 100*(e-t)/t},this.main=function(e,t){var i,n,r,s,a,l,c,h,u;return this._context=e,this._input=t,i=this._input(0),n=this._input(1),r=o.Std.volume(this._context),s=this._context.new_var(r),a=o.Std.ema(s,i,this._context),l=this._context.new_var(r),c=o.Std.ema(l,n,this._context),h=this.f_0(a,c),u=h,[u]}}},{name:"Vortex Indicator",metainfo:{_metainfoVersion:42,isTVScript:!1,isTVScriptStub:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#0000FF"},plot_1:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#FF0000"}},precision:4,inputs:{in_0:14}},plots:[{id:"plot_0",type:"line"},{id:"plot_1",type:"line"}],styles:{plot_0:{title:"VI +",histogramBase:0,joinPoints:!1,isHidden:!1},plot_1:{title:"VI -",histogramBase:0,joinPoints:!1,isHidden:!1}},description:"Vortex Indicator",shortDescription:"VI",is_price_study:!1,is_hidden_study:!1,id:"vortex_indicator@tv-basicstudies-1",inputs:[{id:"in_0",name:"Period",defval:14,type:"integer",min:2,max:1e12}],scriptIdPart:"",name:"Vortex Indicator"},constructor:function(){this.f_0=function(){
var e=this._input(0),t=this._context.new_var(o.Std.low(this._context)),i=this._context.new_var(o.Std.abs(o.Std.high(this._context)-t.get(1))),n=o.Std.sum(i,e,this._context),r=this._context.new_var(o.Std.high(this._context)),s=this._context.new_var(o.Std.abs(o.Std.low(this._context)-r.get(1))),a=o.Std.sum(s,e,this._context),l=this._context.new_var(o.Std.atr(1,this._context)),c=o.Std.sum(l,e,this._context);return[n/c,a/c]},this.main=function(e,t){return this._context=e,this._input=t,this.f_0()}}},{name:"Willams %R",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#000080"}},precision:4,bands:[{color:"#808080",linestyle:2,linewidth:1,visible:!0,value:-20},{color:"#808080",linestyle:2,linewidth:1,visible:!0,value:-80}],filledAreasStyle:{fill_0:{color:"#000080",transparency:90,visible:!0}},inputs:{in_0:14}},plots:[{id:"plot_0",type:"line"}],styles:{plot_0:{title:"Plot",histogramBase:0,joinPoints:!1}},description:"Williams %R",shortDescription:"%R",is_price_study:!1,bands:[{id:"hline_0",name:"UpperLimit"},{id:"hline_1",name:"LowerLimit"}],filledAreas:[{id:"fill_0",objAId:"hline_0",objBId:"hline_1",type:"hline_hline",title:"Hlines Background"}],inputs:[{id:"in_0",name:"length",defval:14,type:"integer",min:1,max:2e3}],id:"Willams %R@tv-basicstudies-1",scriptIdPart:"",name:"Willams %R"},constructor:function(){this.f_0=function(e,t,i){return 100*(e-t)/(t-i)},this.main=function(e,t){var i,n,r,s,a,l,c,h,u;return this._context=e,this._input=t,i=this._input(0),n=o.Std.high(this._context),r=this._context.new_var(n),s=o.Std.highest(r,i,this._context),a=o.Std.low(this._context),l=this._context.new_var(a),c=o.Std.lowest(l,i,this._context),h=this.f_0(o.Std.close(this._context),s,c),u=h,[u]}}},{name:"Williams Alligator",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#0000FF"},plot_1:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#FF0000"},plot_2:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#008000"}},precision:4,inputs:{in_0:21,in_1:13,in_2:8}},plots:[{id:"plot_0",type:"line"},{id:"plot_1",type:"line"},{id:"plot_2",type:"line"}],styles:{plot_0:{title:"Jaw",histogramBase:0,joinPoints:!1},plot_1:{title:"Teeth",histogramBase:0,joinPoints:!1},plot_2:{title:"Lips",histogramBase:0,joinPoints:!1}},description:"Williams Alligator",shortDescription:"Alligator",is_price_study:!0,inputs:[{id:"in_0",name:"jawLength",defval:21,type:"integer",min:1,max:2e3},{id:"in_1",name:"teethLength",defval:13,type:"integer",min:1,max:2e3},{id:"in_2",name:"lipsLength",defval:8,type:"integer",min:1,max:2e3}],id:"Williams Alligator@tv-basicstudies-1",scriptIdPart:"",name:"Williams Alligator"},constructor:function(){this.main=function(e,t){var i,n,r,s,a,l,c,h,u,d,p,_,f;return this._context=e,this._input=t,
i=this._input(0),n=this._input(1),r=this._input(2),s=o.Std.hl2(this._context),a=this._context.new_var(s),l=o.Std.ema(a,i,this._context),c=this._context.new_var(s),h=o.Std.ema(c,n,this._context),u=this._context.new_var(s),d=o.Std.ema(u,r,this._context),p=l,_=h,f=d,[{value:p,offset:8},{value:_,offset:5},{value:f,offset:3}]}}},{name:"Williams Fractals",metainfo:{_metainfoVersion:42,isTVScript:!1,isTVScriptStub:!1,defaults:{styles:{plot_0:{plottype:"shape_triangle_down",visible:!0,location:"BelowBar",transparency:0,color:"#800000"},plot_1:{plottype:"shape_triangle_up",visible:!0,location:"AboveBar",transparency:0,color:"#808000"}},precision:4,inputs:{in_0:2}},plots:[{id:"plot_0",type:"shapes"},{id:"plot_1",type:"shapes"}],styles:{plot_0:{title:"Down fractals",isHidden:!1},plot_1:{title:"Up fractals",isHidden:!1}},description:"Williams Fractal",shortDescription:"Fractals",is_price_study:!0,is_hidden_study:!1,id:"Williams Fractals@tv-basicstudies-1",inputs:[{id:"in_0",name:"Periods",defval:2,type:"integer",min:2,max:1e12}],scriptIdPart:"",name:"Williams Fractals",isCustomIndicator:!0},constructor:function(){this.f_0=function(){var e=this._input(0),t=this._context.new_var(o.Std.high(this._context)),i=o.Std.or(o.Std.and(o.Std.and(o.Std.lt(t.get(e+2),t.get(e)),o.Std.lt(t.get(e+1),t.get(e))),o.Std.and(o.Std.lt(t.get(e-1),t.get(e)),o.Std.lt(t.get(e-2),t.get(e)))),o.Std.or(o.Std.or(o.Std.and(o.Std.lt(t.get(e+3),t.get(e)),o.Std.and(o.Std.and(o.Std.lt(t.get(e+2),t.get(e)),o.Std.eq(t.get(e+1),t.get(e))),o.Std.and(o.Std.lt(t.get(e-1),t.get(e)),o.Std.lt(t.get(e-2),t.get(e))))),o.Std.and(o.Std.and(o.Std.lt(t.get(e+4),t.get(e)),o.Std.lt(t.get(e+3),t.get(e))),o.Std.and(o.Std.and(o.Std.eq(t.get(e+2),t.get(e)),o.Std.le(t.get(e+1),t.get(e))),o.Std.and(o.Std.lt(t.get(e-1),t.get(e)),o.Std.lt(t.get(e-2),t.get(e)))))),o.Std.or(o.Std.and(o.Std.and(o.Std.lt(t.get(e+5),t.get(e)),o.Std.and(o.Std.lt(t.get(e+4),t.get(e)),o.Std.eq(t.get(e+3),t.get(e)))),o.Std.and(o.Std.and(o.Std.eq(t.get(e+2),t.get(e)),o.Std.le(t.get(e+1),t.get(e))),o.Std.and(o.Std.lt(t.get(e-1),t.get(e)),o.Std.lt(t.get(e-2),t.get(e))))),o.Std.and(o.Std.and(o.Std.and(o.Std.lt(t.get(e+6),t.get(e)),o.Std.lt(t.get(e+5),t.get(e))),o.Std.and(o.Std.eq(t.get(e+4),t.get(e)),o.Std.le(t.get(e+3),t.get(e)))),o.Std.and(o.Std.and(o.Std.eq(t.get(e+2),t.get(e)),o.Std.le(t.get(e+1),t.get(e))),o.Std.and(o.Std.lt(t.get(e-1),t.get(e)),o.Std.lt(t.get(e-2),t.get(e)))))))),n=this._context.new_var(o.Std.low(this._context))
;return[o.Std.or(o.Std.and(o.Std.and(o.Std.gt(n.get(e+2),n.get(e)),o.Std.gt(n.get(e+1),n.get(e))),o.Std.and(o.Std.gt(n.get(e-1),n.get(e)),o.Std.gt(n.get(e-2),n.get(e)))),o.Std.or(o.Std.or(o.Std.and(o.Std.gt(n.get(e+3),n.get(e)),o.Std.and(o.Std.and(o.Std.gt(n.get(e+2),n.get(e)),o.Std.eq(n.get(e+1),n.get(e))),o.Std.and(o.Std.gt(n.get(e-1),n.get(e)),o.Std.gt(n.get(e-2),n.get(e))))),o.Std.and(o.Std.and(o.Std.gt(n.get(e+4),n.get(e)),o.Std.gt(n.get(e+3),n.get(e))),o.Std.and(o.Std.and(o.Std.eq(n.get(e+2),n.get(e)),o.Std.ge(n.get(e+1),n.get(e))),o.Std.and(o.Std.gt(n.get(e-1),n.get(e)),o.Std.gt(n.get(e-2),n.get(e)))))),o.Std.or(o.Std.and(o.Std.and(o.Std.gt(n.get(e+5),n.get(e)),o.Std.and(o.Std.gt(n.get(e+4),n.get(e)),o.Std.eq(n.get(e+3),n.get(e)))),o.Std.and(o.Std.and(o.Std.eq(n.get(e+2),n.get(e)),o.Std.ge(n.get(e+1),n.get(e))),o.Std.and(o.Std.gt(n.get(e-1),n.get(e)),o.Std.gt(n.get(e-2),n.get(e))))),o.Std.and(o.Std.and(o.Std.and(o.Std.gt(n.get(e+6),n.get(e)),o.Std.gt(n.get(e+5),n.get(e))),o.Std.and(o.Std.eq(n.get(e+4),n.get(e)),o.Std.ge(n.get(e+3),n.get(e)))),o.Std.and(o.Std.and(o.Std.eq(n.get(e+2),n.get(e)),o.Std.ge(n.get(e+1),n.get(e))),o.Std.and(o.Std.gt(n.get(e-1),n.get(e)),o.Std.gt(n.get(e-2),n.get(e)))))))),i]},this.main=function(e,t){this._context=e,this._input=t;var i=this.f_0();return[{value:i[0],offset:-2},{value:i[1],offset:-2}]}}}]},function(e,t,i){"use strict";var o,n,r;Object.defineProperty(t,"__esModule",{value:!0}),i.d(t,"dur",function(){return o}),i.d(t,"easingFunc",function(){return n}),i.d(t,"color",function(){return r}),o=350,n={linear:function(e){return e},easeInQuad:function(e){return e*e},easeOutQuad:function(e){return e*(2-e)},easeInOutQuad:function(e){return e<.5?2*e*e:(4-2*e)*e-1},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return--e*e*e+1},easeInOutCubic:function(e){return e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return 1- --e*e*e*e},easeInOutQuart:function(e){return e<.5?8*e*e*e*e:1-8*--e*e*e*e},easeInQuint:function(e){return e*e*e*e*e},easeOutQuint:function(e){return 1+--e*e*e*e*e},easeInOutQuint:function(e){return e<.5?16*e*e*e*e*e:1+16*--e*e*e*e*e}},r={black0:"#000",black20:"#2b2d36",black25:"#2b2e37",black30:"#212121",black70:"#4A4A4A",black80:"#535353",black100:"#646464",black110:"#757575",black140:"#8A8A8A",black170:"#ADAEB0",black180:"#b4b4b4",black200:"#C8C8C8",black220:"#DADDE0",black230:"#ECECEC",black240:"#F2F2F2",black248:"#F8F8F8",black255:"#FFF",brand:"#3BB3E4",brandHover:"#3BABD8",brandActive:"#3898C2",brandDown:"#049DDC",brand220:"#3BB3E0",brand255:"#3BB3FF",brandNew:"#37A6EF",spinner:"#00A2E2",brandMedium80:"#3C4650",brandMedium90:"#465a6e",brandMedium100:"#627384",brandMedium120:"#758696",brandMedium150:"#94959C",brandMedium190:"#9DB2BD",brandMedium220:"#E9EFF2",brandMedium230:"#EAECEF",brandMedium240:"#F1F3F6",brandDark:"#2A2C39",brandDark50:"#252733",brandDark45:"#20222D",brandDarkText:"#6A6B74",danger:"#FF4A68",dangerHover:"#F24965",dangerDown:"#FF173E",success:"#3CBC98",success55:"#37BC9B",
success250:"#00FFC0",successHover:"#38B395",successDown:"#00A97F",attention:"#FFC84A",attention50:"#F89E30",growing:"#37bc9b",falling:"#ff4a68"}},function(e,t,i){function o(){this._data=null,this._hittest=new n(n.MOVEPOINT)}var n,r,s,a;i(63),n=i(9).HitTestResult,r=i(100).LineEnd,s=i(31).distanceToSegment,a=i(29).extendAndClipLineSegment,o.prototype.setData=function(e){this._data=e},o.prototype.setHitTest=function(e){this._hittest=e},o.prototype.drawArrow=function(e,t,i,o){var n,r,s,a,l,c,h,u,d;t.subtract(e).length()<1||(n=t.subtract(e).normalized(),r=5*o,s=n.scaled(r),a=t.subtract(s),l=n.transposed(),c=3*o,h=l.scaled(c),u=a.add(h),d=a.subtract(h),CanvasEx.drawLine(i,Math.round(u.x),Math.round(u.y),t.x,t.y),CanvasEx.drawLine(i,Math.round(d.x),Math.round(d.y),t.x,t.y))},o.prototype.extendAndClipLineSegment=function(e,t){return a(e,t,this._data.width,this._data.height,this._data.extendleft,this._data.extendright)},o.prototype.drawCircle=function(e,t,i,o){o=$.extend({fillStyle:"#000000"},o),t.save(),t.fillStyle=o.fillStyle,t.beginPath(),t.arc(e.x,e.y,i,0,2*Math.PI,!1),t.fill(),o.strokeWidth&&(t.lineWidth=o.strokeWidth,t.stroke()),t.restore()},o.prototype.draw=function(e){var t,i,o,n,r;null===this._data||this._data.points&&this._data.points.length<2||this._data.floatPoints&&this._data.floatPoints.length<2||(e.lineCap="butt",e.strokeStyle=this._data.color,e.lineWidth=this._data.linewidth,e.lineStyle=this._data.linestyle,t=this._data.floatPoints||this._data.points,i=t[0],o=t[1],this._data.overlayLineEndings?n=[$.extend(!0,{},i),$.extend(!0,{},o)]:this.drawEnds(e,[i,o]),r=this.extendAndClipLineSegment(i,o),null!==r&&this._data.linewidth>0&&CanvasEx.drawLine(e,r[0].x,r[0].y,r[1].x,r[1].y),this._data.overlayLineEndings&&this.drawEnds(e,n))},o.prototype.drawEnds=function(e,t){var i=t[0],o=t[1];switch(this._data.leftend){case r.Arrow:this.drawArrow(o,i,e,e.lineWidth);break;case r.Circle:this.drawCircle(i,e,e.lineWidth,this._data.endstyle)}switch(this._data.rightend){case r.Arrow:this.drawArrow(i,o,e,e.lineWidth);break;case r.Circle:this.drawCircle(o,e,e.lineWidth,this._data.endstyle)}},o.prototype.hitTest=function(e){var t,i,o,n,r,a;return null===this._data||this._data.points&&this._data.points.length<2?null:this._data.floatPoints&&this._data.floatPoints.length<2?null:(t=TradingView.isMobile.any()?24:3,i=this._data.floatPoints||this._data.points,o=i[0],n=i[1],r=this.extendAndClipLineSegment(o,n),null!==r&&(a=s(r[0],r[1],e),a.distance<=t)?this._hittest:null)},t.TrendLineRenderer=o},function(e,t,i){function o(e,t){this._linesMaxWidth=null,this._hittest=t||new n(n.MOVEPOINT),this._data={},this._fontSize=0,this.setData(e)}var n=i(9).HitTestResult,r=i(72).calcTextHorizontalShift,s=i(51).drawRoundRect;o.prototype.setData=function(e){var t,i,o,n=this._data,r=this.fontStyle();this._data=e,this._fontSize=e.fontsize||e.fontSize||30,t=e.text===n.text,i=e.wordWrapWidth===n.wordWrapWidth,o=r===this.fontStyle(),t&&i&&o?(this._data.lines=n.lines,this._lines=n.lines):(this._linesMaxWidth=null,e.lines=this.wordWrap(e.text,e.wordWrapWidth),
this._lines=e.lines)},function(){function e(){var e=document.createElement("canvas");e.width=0,e.height=0,t=e.getContext("2d"),e=null}var t;o.prototype.setPoints=function(e,t){this._data.points=e,this._hittest=t||new n(n.MOVEPOINT)},o.prototype._getLinesMaxWidth=function(){var i,o;if(null!==this._linesMaxWidth)return this._linesMaxWidth;if(t||e(),t.textBaseline="alphabetic",t.font=this.fontStyle(),this._data.wordWrapWidth)return this._data.wordWrapWidth;for(i=0,o=0;o<this._lines.length;o++)i=Math.max(i,t.measureText(this._lines[o]).width);return this._linesMaxWidth=i,i},o.prototype.measure=function(){var e=this._fontSize,t=this._getLinesMaxWidth(),i=e*this._lines.length,o=~~(e/6);return this._data.backgroundHorzInflate&&(t+=2*this._data.backgroundHorzInflate),this._data.backgroundVertInflate&&(i+=2*this._data.backgroundVertInflate),t=Math.ceil(t+2*o),i=Math.ceil(i+2*o),t%2!=0&&t++,this._data.padding&&(i+=this._data.padding),{width:t,height:i,textBgPadding:o}},o.prototype.wordWrap=function(i,o,n){var r,s,a,l,c,h,u,d,p;if(t||e(),o=+o,i+="",r=i.split(/[^\S\r\n]*(?:\r\n|\r|\n|$)/),r[r.length-1]||r.pop(),!isFinite(o)||o<=0)return r;for(t.font=n||this.fontStyle(),s=[],a=0;a<r.length;a++)if(l=r[a],(c=t.measureText(l).width)<=o)s.push(l);else for(h=l.split(/([-\)\]\},.!?:;])|(\s+)/);h.length;){if((u=~~(o/c*(h.length+2)/3))<=0||t.measureText(h.slice(0,3*u-1).join("")).width<=o)for(;t.measureText(h.slice(0,3*(u+1)-1).join("")).width<=o;)u++;else for(;u>0&&t.measureText(h.slice(0,3*--u-1).join("")).width>o;);if(u>0)s.push(h.slice(0,3*u-1).join("")),h.splice(0,3*u);else{if(d=h[0]+(h[1]||""),p=1===p?1:~~(o/t.measureText(d)*d.length),t.measureText(d.substr(0,p)).width<=o)for(;t.measureText(d.substr(0,p+1)).width<=o;)p++;else for(;p>1&&t.measureText(d.substr(0,--p)).width>o;);p<1&&(p=1),s.push(d.substr(0,p)),h[0]=d.substr(p),h[1]=""}if((c=t.measureText(h.join("")).width)<=o){s.push(h.join(""));break}}return s}}(),o.prototype._x=function(){return this._data.points[0].x+this._data.offsetX},o.prototype._y=function(){var e,t=this._fontSize*this._lines.length;switch(this._data.scaleY&&(t*=this._data.scaleY),e=this._data.points[0].y+this._data.offsetY+t,this._data.vertAlign){case"top":break;case"bottom":e-=t;break;case"middle":e-=t/2}return e},o.prototype.fontStyle=function(){return(this._data.bold?"bold ":"")+(this._data.italic?"italic ":"")+this._fontSize+"px "+this._data.font},o.prototype.draw=function(e){var t,i,o,n,a,l,c,h,u,d,p,_,f,m,g,y;if(0!==this._data.points.length){switch(t=this._x(),i=this._y(),o=this._fontSize,this._data.scaleY&&(o*=this._data.scaleY),i-=o*(this._lines.length-1),e.textBaseline="alphabetic",e.font=this.fontStyle(),this._data.horzAlign){case"left":e.textAlign="start";break;case"right":e.textAlign="end";break;case"center":e.textAlign="center"}if(e.translate(t+.5,i+.5),t=0,i=0,o=this._fontSize,this._data.scaleX&&this._data.scaleY&&(n=Math.min(this._data.scaleX,this._data.scaleY),e.scale(n,n)),a=this._getLinesMaxWidth(),l=r(e,a),c=0,
this._data.backgroundColor||this._data.borderColor||this._data.highlightBorder&&this._data.wordWrapWidth){switch(h=t,this._data.horzAlign){case"left":break;case"right":h-=a;break;case"center":h-=a/2}u=o*this._lines.length,d=~~(o/6),this._data.backgroundHorzInflate&&(a+=2*this._data.backgroundHorzInflate,h-=this._data.backgroundHorzInflate),this._data.backgroundVertInflate&&(u+=2*this._data.backgroundVertInflate,i+=this._data.backgroundVertInflate),p={x:Math.floor(h-d),y:Math.floor(i-o),w:Math.ceil(a+2*d),h:Math.ceil(u+2*d)},p.w%2!=0&&p.w++,this._data.padding&&(p.h+=this._data.padding,c=this._data.padding),this._data.backgroundVertInflate&&(i+=this._data.backgroundVertInflate),this._data.backgroundRoundRect?(s(e,p.x,p.y,p.w,p.h,this._data.backgroundRoundRect),this._data.backgroundColor&&(e.fillStyle=this._data.backgroundColor,e.fill()),this._data.borderColor&&(_=~~Math.max(o/12,1),e.strokeStyle=this._data.borderColor,e.lineWidth=_,e.stroke())):(this._data.backgroundColor&&(e.fillStyle=this._data.backgroundColor,e.fillRect(p.x,p.y,p.w,p.h)),this._data.borderColor?(_=~~Math.max(o/12,1),e.strokeStyle=this._data.borderColor,e.lineWidth=_,e.strokeRect(p.x-_/2,p.y-_/2,p.w+_,p.h+_)):this._data.highlightBorder&&(e.strokeStyle=this._data.color,e.lineWidth=1,e.beginPath(),g=[3,1],e.dashedLineTo(p.x-.5,m=p.y-.5,f=p.x+p.w+.5,m,g),e.dashedLineTo(f,m,f,m=p.y+p.h+.5,g),e.dashedLineTo(f=p.x-.5,m,p.x+p.w+.5,m,g),e.dashedLineTo(f,p.y-.5,f,m,g),e.stroke()))}for(this._data.backgroundVertInflate&&!this._data.backgroundColor&&(i+=2*this._data.backgroundVertInflate),e.fillStyle=this._data.color,this._data.forceTextAlign&&(e.textAlign=this._data.horzAlign?this._data.horzAlign:"left"),this._data.forceTextAlign||(t+=l),y=0;y<this._lines.length;y++)e.fillText(this._lines[y],t,i),i+=o+c}},o.prototype.hitTest=function(e){var t,i,o,n,r,s;return 0===this._data.points.length?null:(t=this._fontSize,this._data.scaleY&&(t*=this._data.scaleY),i=this._getLinesMaxWidth(),this._data.scaleX&&(i*=this._data.scaleX),o=this._data.points[0].x+this._data.offsetX,n=this._data.points[0].y+this._data.offsetY,"bottom"===this._data.vertAlign&&(n-=this._lines.length*this._fontSize),"middle"===this._data.vertAlign&&(n-=this._lines.length*this._fontSize/2),"right"===this._data.horzAlign?o-=i:"center"===this._data.horzAlign&&(o-=i/2),r=this._data.backgroundColor||this._data.borderColor?~~(t/6):0,s=this._data.borderColor?~~Math.max(t/12,1):0,e.x>=o-r-s&&e.x<=o+i+r+s&&e.y>=n-s&&e.y<=n+this._lines.length*this._fontSize+2*r+s?this._hittest:null)},t.TextRenderer=o},,,function(e,t,i){"use strict";function o(e){return"."+e.replace(/\+/g,"")}function n(e,t,i,n){var r,s;void 0===i&&(i="keydown"),r=o(e),s=n?$(n):u,s.unbind(i+r).bind(i+r,e,function(e){$(e.target).is("input[type=password]")||d||t.apply(null,Array.prototype.slice.call(arguments))}),h[e]=t}function r(e,t,i){void 0===t&&(t="keydown"),(i?$(i):u).unbind(t+o(e)),delete h[e]}function s(){return d?null:d=Object(c.randomHashN)(4)}function a(e){if(e!==d)throw Error("Lock id is outdated");d=null}var l,c,h,u,d
;Object.defineProperty(t,"__esModule",{value:!0}),t.bind=n,t.unbind=r,t.disable=s,t.enable=a,l=i(13),i.n(l),c=i(37),h={},u=$(document),d=null},function(e,t,i){"use strict";function o(e){this._data=e}function n(e,t){this._data=e,this._model=t,this.radius=this._data.radius||n.OUTER_RADIUS}function r(e){o.call(this,e)}var s=i(9).HitTestResult,a=i(169).PaneRendererArrowsUpDown;i(63),o.RADIUS=3.5,o.prototype.tolerance=2,o.prototype.draw=function(e){function t(e){return void 0===e.x||TradingView.isNaN(e.x)||null===e.x||void 0===e.y||TradingView.isNaN(e.y)||null===e.y}var i,o,n;if(this._data)for(e.strokeStyle="#6B6B6B",e.fillStyle="#D6D6D6",i=this._data.vertOffset||0,o=0;o<this._data.points.length;o++)n=this._data.points[o],t(n)||this._drawMarker(e,n,i)},o.prototype._drawMarker=function(e,t,i){e.beginPath(),e.arc(t.x+.5,t.y+.5+i,o.RADIUS,0,2*Math.PI,!0),e.closePath(),e.fill(),e.stroke()},o.prototype.hitTest=function(e){var t,i;if(!this._data)return null;for(t=0;t<this._data.points.length;t++)if(i=this._data.points[t],i.subtract(e).length()<=o.RADIUS+this.tolerance)return new s(this._data.hittestResult,i.data);return null},n.OUTER_RADIUS=TradingView.isMobile.any()?16:8,n.prototype.tolerance=2,n.prototype.draw=function(e){var t,i,o,n,r,s,a,l,c,h=this._data.currentPoint,u=this._data.outerStrokeWidth||1;for(t=0;t<this._data.points.length;t++)i=this._data.points[t],o=i.subtract(h).length(),n=TradingView.isInteger(i.data)&&this._data.linePointBeingEdited===i.data,r=this.radius,s=this._data.strokeWidth||2,a=o<=r+this.tolerance,l=a?1:0,r+=l,s+=l,n||(i.square?(e.fillStyle=this._data.backgroundColor,e.fillRect(i.x-r,i.y-r,2*r,2*r),e.fillStyle=this._data.color,c=r-u,e.fillRect(i.x-c,i.y-c,2*c,2*c),c=r-u-s,e.fillStyle=this._data.backgroundColor,e.fillRect(i.x-c,i.y-c,2*c,2*c)):(e.beginPath(),e.arc(i.x,i.y,r,0,2*Math.PI,!0),e.closePath(),e.fillStyle=this._data.backgroundColor,e.fill(),e.beginPath(),e.arc(i.x,i.y,r-u,0,2*Math.PI,!0),e.closePath(),e.fillStyle=this._data.color,e.fill(),e.beginPath(),e.arc(i.x,i.y,r-u-s,0,2*Math.PI,!0),e.closePath(),e.fillStyle=this._data.backgroundColor,e.fill()))},n.prototype.hitTest=function(e){var t,i,o;for(t=0;t<this._data.points.length;t++)if(i=this._data.points[t],o=i.subtract(e).length(),o<=this.radius+this.tolerance)return new s(this._data.hittestResult,i.data);return null},inherit(r,o),r.prototype._drawMarker=function(e,t,i){var n=t.isUp?1:-1,r=a.prototype._calculateVerticalOffset(this._data.barSpacing),s=a.prototype._calculateMinHeight(this._data.barSpacing),l=i+n*r+n*s;e.beginPath(),e.arc(t.x+.5,t.y+.5+l,o.RADIUS,0,2*Math.PI,!0),e.closePath(),e.fill(),e.stroke()},t.SelectionRenderer=o,t.LineAnchor=n,t.SelectionRendererArrowsUpDown=r},,,function(e,t,i){"use strict";var o,n,r,s,a;Object.defineProperty(t,"__esModule",{value:!0}),i.d(t,"LINESTYLE_SOLID",function(){return o}),i.d(t,"LINESTYLE_DOTTED",function(){return n}),i.d(t,"LINESTYLE_DASHED",function(){return r}),i.d(t,"LINESTYLE_LARGE_DASHED",function(){return s}),i.d(t,"LINESTYLE_SPARSE_DOTTED",function(){return a}),o=0,n=1,r=2,s=3,a=4
},function(e,t,i){"use strict";var o,n,r,s;Object.defineProperty(t,"__esModule",{value:!0}),i.d(t,"TimePointIndexSearchMode",function(){return r}),i.d(t,"SeriesData",function(){return s}),o=i(7),i.n(o),n=i(20),function(e){e[e.FromLeft=-1]="FromLeft",e[e.FromRight=1]="FromRight"}(r||(r={})),s=function(){function e(e){this.m_bars=new n.PlotList(e),this.m_nsBars=new n.PlotList(e)}return e.prototype.bars=function(){return this.m_bars},e.prototype.nsBars=function(){return this.m_nsBars},e.prototype.size=function(){return this.m_bars.size()+this.m_nsBars.size()},e.prototype.each=function(e){this.m_bars.each(e),this.m_nsBars.each(e)},e.prototype.clear=function(){this.m_bars.clear(),this.m_nsBars.clear(),this.lastProjectionPrice=void 0},e.prototype.isEmpty=function(){return this.m_bars.isEmpty()&&this.m_nsBars.isEmpty()},e.prototype.first=function(){return this.m_bars.isEmpty()?this.m_nsBars.first():this.m_bars.first()},e.prototype.last=function(){return this.m_nsBars.isEmpty()?this.m_bars.last():this.m_nsBars.last()},e.prototype.search=function(e,t){return this.nsBars().isEmpty()?this.bars().search(e,t):this.bars().isEmpty()?this.nsBars().search(e,t):Object(o.ensureNotNull)(this.nsBars().firstIndex())<=e?this.nsBars().search(e,t):this.bars().search(e,t)},e.prototype.valueAt=function(e){var t=this.search(e);return null!==t?t.value:null},e.prototype.plotValueToTimePointIndex=function(e,t,i){var o,n,s,a;if(i===r.FromRight)return o=function(i,o){var n=o[t];return void 0!==n&&null!==n&&e>=n},null!==(n=this.m_bars.findLast(o))?n.index:(s=this.m_nsBars.findLast(o),null!==s?s.index:this.m_bars.firstIndex());if(i===r.FromLeft)return a=function(i,o){var n=o[t];return void 0!==n&&null!==n&&e<=n},null!==(n=this.m_bars.findFirst(a))?n.index:(s=this.m_nsBars.findFirst(a),null!==s?s.index:this.m_bars.lastIndex());throw Error("plotValueToTimePointIndex: unsupported search mode")},e}()},function(e,t,i){"use strict";var o,n;Object.defineProperty(t,"__esModule",{value:!0}),i.d(t,"LimitedPrecisionNumericFormatter",function(){return n}),o=i(14),i.n(o),n=function(){function e(e){void 0===e&&(e=1),this._precision=e}return e.prototype.format=function(e){var t,i;return Object(o.isNumber)(e)||(e=parseFloat(e)),t=e.toFixed(this._precision),i=Math.pow(10,-this._precision),Math.max(parseFloat(t),i)+""},e}()},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 11 9" width="11px" height="9px"><path fill="none" fill-rule="evenodd" stroke-width="2" d="M1 3.22l3.415 3.496L10 1"/></svg>'},function(e,t,i){"use strict";var o,n,r,s,a;Object.defineProperty(t,"__esModule",{value:!0}),o=i(598),Object.defineProperty(t,"AutocompleteField",{enumerable:!0,get:function(){return o.AutocompleteField}}),n=i(602),Object.defineProperty(t,"CheckboxField",{enumerable:!0,get:function(){return n.CheckboxField}}),r=i(255),Object.defineProperty(t,"InputField",{enumerable:!0,get:function(){return r.InputField}}),s=i(603),Object.defineProperty(t,"InputFieldRegExp",{enumerable:!0,get:function(){return s.InputFieldRegExp}}),a=i(254),
Object.defineProperty(t,"SaveRenameDialog",{enumerable:!0,get:function(){return a.SaveRenameDialog}})},function(e,t,i){"use strict";var o,n,r;Object.defineProperty(t,"__esModule",{value:!0}),i.d(t,"HEADER_TOOLBAR_HEIGHT_EXPANDED",function(){return n}),i.d(t,"HEADER_TOOLBAR_HEIGHT_COLLAPSED",function(){return r}),o=i(492),i.n(o),n=parseInt(o["css-value-header-toolbar-height"]),r=3},function(e,t,i){"use strict";var o,n,r,s,a;i.d(t,"a",function(){return s}),i.d(t,"b",function(){return a}),o=i(3),n=i(8),r=i.n(n),s=function(){function e(e,t,i,o,n){var s=this;this._onChange=new r.a,this._handleChange=function(){s._onChange.fire(s.get())},this._crossTabEvents=e,this._jsonKeyValueStore=t,this.CROSSTAB_EVENT_NAME=i,this.JSON_STORE_KEY=o,this.defaultStoreValue=this._serialize(n),this._subscribe()}return e.prototype.get=function(){var e=this._jsonKeyValueStore.getJSON(this.JSON_STORE_KEY,this.defaultStoreValue);return this._deserialize(e)},e.prototype.set=function(e,t){var i=this._serialize(e);this._jsonKeyValueStore.setJSON(this.JSON_STORE_KEY,i,t),this._crossTabEvents.emit(this.CROSSTAB_EVENT_NAME),this._onChange.fire(e)},e.prototype.getOnChange=function(){return this._onChange},e.prototype.destroy=function(){this._unsubscribe(),this._onChange.destroy(),delete this._onChange},e.prototype._subscribe=function(){this._crossTabEvents.on(this.CROSSTAB_EVENT_NAME,this._handleChange),this._jsonKeyValueStore.onSync.subscribe(this,this._handleChange)},e.prototype._unsubscribe=function(){this._crossTabEvents.off(this.CROSSTAB_EVENT_NAME,this._handleChange),this._jsonKeyValueStore.onSync.unsubscribe(this,this._handleChange)},e}(),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.c(t,e),t.prototype._serialize=function(e){return e},t.prototype._deserialize=function(e){return e},t}(s)},function(e,t,i){"use strict";function o(e){for(var t=0;t<u.length;t++)if(e===u[t].id)return!0;return!1}var n,r,s,a,l,c,h,u;for(Object.defineProperty(t,"__esModule",{value:!0}),i.d(t,"availableTimezones",function(){return u}),t.timezoneIsAvailable=o,i(11),n=i(342),r=[{id:"Etc/UTC",title:$.t("UTC")},{id:"exchange",title:$.t("Exchange")}],s=[{id:"Africa/Cairo",title:$.t("Cairo"),offset:0},{id:"Africa/Johannesburg",title:$.t("Johannesburg"),offset:0},{id:"Africa/Lagos",title:$.t("Lagos"),offset:0},{id:"America/Argentina/Buenos_Aires",title:$.t("Buenos Aires"),offset:0},{id:"America/Bogota",title:$.t("Bogota"),offset:0},{id:"America/Caracas",title:$.t("Caracas"),offset:0},{id:"America/Chicago",title:$.t("Chicago"),offset:0},{id:"America/El_Salvador",title:$.t("San Salvador"),offset:0},{id:"America/Juneau",title:$.t("Juneau"),offset:0},{id:"America/Lima",title:$.t("Lima"),offset:0},{id:"America/Los_Angeles",title:$.t("Los Angeles"),offset:0},{id:"America/Mexico_City",title:$.t("Mexico City"),offset:0},{id:"America/New_York",title:$.t("New York"),offset:0},{id:"America/Phoenix",title:$.t("Phoenix"),offset:0},{id:"America/Santiago",title:$.t("Santiago"),offset:0},{id:"America/Sao_Paulo",title:$.t("Sao Paulo"),offset:0},{
id:"America/Toronto",title:$.t("Toronto"),offset:0},{id:"America/Vancouver",title:$.t("Vancouver"),offset:0},{id:"Asia/Almaty",title:$.t("Almaty"),offset:0},{id:"Asia/Ashkhabad",title:$.t("Ashkhabad"),offset:0},{id:"Asia/Bahrain",title:$.t("Bahrain"),offset:0},{id:"Asia/Bangkok",title:$.t("Bangkok"),offset:0},{id:"Asia/Chongqing",title:$.t("Chongqing"),offset:0},{id:"Asia/Dubai",title:$.t("Dubai"),offset:0},{id:"Asia/Ho_Chi_Minh",title:$.t("Ho Chi Minh"),offset:0},{id:"Asia/Hong_Kong",title:$.t("Hong Kong"),offset:0},{id:"Asia/Jakarta",title:$.t("Jakarta"),offset:0},{id:"Asia/Jerusalem",title:$.t("Jerusalem"),offset:0},{id:"Asia/Kolkata",title:$.t("Kolkata"),offset:0},{id:"Asia/Kuwait",title:$.t("Kuwait"),offset:0},{id:"Asia/Muscat",title:$.t("Muscat"),offset:0},{id:"Asia/Qatar",title:$.t("Qatar"),offset:0},{id:"Asia/Riyadh",title:$.t("Riyadh"),offset:0},{id:"Asia/Seoul",title:$.t("Seoul"),offset:0},{id:"Asia/Shanghai",title:$.t("Shanghai"),offset:0},{id:"Asia/Singapore",title:$.t("Singapore"),offset:0},{id:"Asia/Taipei",title:$.t("Taipei"),offset:0},{id:"Asia/Tehran",title:$.t("Tehran"),offset:0},{id:"Asia/Tokyo",title:$.t("Tokyo"),offset:0},{id:"Atlantic/Reykjavik",title:$.t("Reykjavik"),offset:0},{id:"Australia/Adelaide",title:$.t("Adelaide"),offset:0},{id:"Australia/Brisbane",title:$.t("Brisbane"),offset:0},{id:"Australia/Sydney",title:$.t("Sydney"),offset:0},{id:"Europe/Athens",title:$.t("Athens"),offset:0},{id:"Europe/Belgrade",title:$.t("Belgrade"),offset:0},{id:"Europe/Berlin",title:$.t("Berlin"),offset:0},{id:"Europe/Copenhagen",title:$.t("Copenhagen"),offset:0},{id:"Europe/Helsinki",title:$.t("Helsinki"),offset:0},{id:"Europe/Istanbul",title:$.t("Istanbul"),offset:0},{id:"Europe/London",title:$.t("London"),offset:0},{id:"Europe/Luxembourg",title:$.t("Luxembourg"),offset:0},{id:"Europe/Madrid",title:$.t("Madrid"),offset:0},{id:"Europe/Moscow",title:$.t("Moscow"),offset:0},{id:"Europe/Paris",title:$.t("Paris"),offset:0},{id:"Europe/Riga",title:$.t("Riga"),offset:0},{id:"Europe/Rome",title:$.t("Rome"),offset:0},{id:"Europe/Stockholm",title:$.t("Stockholm"),offset:0},{id:"Europe/Tallinn",title:$.t("Tallinn"),offset:0},{id:"Europe/Vilnius",title:$.t("Vilnius"),offset:0},{id:"Europe/Warsaw",title:$.t("Warsaw"),offset:0},{id:"Europe/Zurich",title:$.t("Zurich"),offset:0},{id:"Pacific/Auckland",title:$.t("New Zealand"),offset:0},{id:"Pacific/Chatham",title:$.t("Chatham Islands"),offset:0},{id:"Pacific/Fakaofo",title:$.t("Tokelau"),offset:0},{id:"Pacific/Honolulu",title:$.t("Honolulu"),offset:0},{id:"Pacific/Norfolk",title:$.t("Norfolk Island"),offset:0}],a=0,l=s;a<l.length;a++)c=l[a],h=Object(n.a)(c.id),c.title="("+h.string+") "+c.title,c.offset=h.offset;s.sort(function(e,t){var i=e.offset-t.offset;return 0!==i?i:e.title.localeCompare(t.title)}),u=r.concat(s)},function(e,t,i){"use strict";i(73);e.exports=TradingView.templates={dialogs:{},
miniWidgetWizardAddSymbol:'<tr class="tv-external-tools__symbol-item"><td class="tv-external-tools__symbol-item-cell">{{symbol}}</td><td class="tv-external-tools__symbol-item-cell{{#descriptionShortening}} apply-common-tooltip" title="{{description}}"{{/descriptionShortening}}">{{#descriptionShortening}}{{descriptionShortening}}{{/descriptionShortening}}{{^descriptionShortening}}{{description}}{{/descriptionShortening}}</td>{{#timeframeSelectAllow}}<td class="tv-external-tools__symbol-item-cell">{{timeframe}}</td>{{/timeframeSelectAllow}}<td class="tv-external-tools__remove-cell"><div class="tv-external-tools__remove-symbol"></div></td></tr>',textNotesWidgetLayout:'<div class="notes-block"><div class="textnotes-search-header"><div class="search-input-block">'+i(477)+'<div class="search-clean"></div><input type="text" class="search-input" placeholder="'+$.t("Search Note")+'" maxlength="1000" autocomplete="off"></div><div class="new-note-btn">'+i(478)+$.t("NEW")+'</div></div><div class="notes-wrapper"><div class="notes"></div></div></div><div class="notes-desc-block"><div class="notes-desc-wrapper"><div class="notes-desc-inner"><div class="remove-note-btn" title="'+$.t("Delete Text Note")+'">'+i(479)+'</div><div class="title-wrap"><input type="text" maxlength="100" value="" class="title"></div><div class="date"><span class="created">'+$.t("Created ")+'<span class="created-val"></span>. </span><span class="modified">'+$.t("Last edited ")+'<span class="modified-val"></span></span></div><textarea></textarea></div></div></div>',textNotesWidgetItem:'<div class="note"><div class="note-header"><div {{#symbol}}title="'+$.t("Open {{symbol}} Text Note")+'"{{/symbol}} class="title {{#symbol}}title_with-badge{{/symbol}}">{{title}}</div>{{#symbol}}<div class="symbol-badge">'+i(480)+'<span class="symbol">{{symbol}}</span></div>{{/symbol}}</div><div class="note-desc">{{description}}</div><span class="favorite"></span></div>',tvDataTable:'<table class="tv-data-table {{className}}"><thead class="tv-data-table__thead"><tr class="tv-data-table__stroke">{{#columns}}<th class="tv-data-table__cell tv-data-table__cell--bold {{className}}"><span class="tv-data-table__cell-text{{^notSortable}} tv-data-table__sortable{{/notSortable}}{{#help}} apply-common-tooltip{{/help}}{{#htmlHelp}} common-tooltip-html{{/htmlHelp}}" {{#help}}title="{{help}}"{{/help}}>{{{label}}}</span></th>{{/columns}}</tr></thead>{{#bodies}}<tbody class="tv-data-table__tbody {{className}}">{{#strokes}}<tr class="tv-data-table__stroke">{{#cells}}<td class="tv-data-table__cell {{className}}"{{#colspan}}colspan="{{colspan}}"{{/colspan}}>{{#contain}}{{{contain}}}{{/contain}}</td>{{/cells}}</tr>{{/strokes}}</tbody>{{/bodies}}</table>',tvDataTableRow:'<tr class="tv-data-table__stroke {{rowClassName}}">{{#columns}}<td class="tv-data-table__cell {{className}}">{{#contain}}{{{contain}}}{{/contain}}</td>{{/columns}}</tr>',tvDataTableCell:'<td class="tv-data-table__cell {{className}}">{{#contain}}{{{contain}}}{{/contain}}</td>'}},function(e,t,i){"use strict"
;Object.defineProperty(t,"__esModule",{value:!0}),i.d(t,"LineToolBarsPatternMode",function(){return o});var o;!function(e){e[e.Bars=0]="Bars",e[e.Line=1]="Line",e[e.OpenClose=2]="OpenClose",e[e.LineOpen=3]="LineOpen",e[e.LineHigh=4]="LineHigh",e[e.LineLow=5]="LineLow",e[e.LineHL2=6]="LineHL2"}(o||(o={}))},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.reduce(function(e,t,i){return~e.indexOf(t)||e.push(t),e},[])},e.exports=t.default},function(e,t,i){"use strict";function o(e,t,i){var o,n,r,s,a=null,l=0;return i=i||{},s=function(){l=!1===i.leading?0:Date.now(),a=null,r=e.apply(o,n),a||(o=n=null)},function(){var c,h=Date.now();return l||!1!==i.leading||(l=h),c=t-(h-l),o=this,n=arguments,c<=0||c>t?(a&&(clearTimeout(a),a=null),l=h,r=e.apply(o,n),a||(o=n=null)):a||!1===i.trailing||(a=setTimeout(s,c)),r}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o,e.exports=t.default},function(e,t,i){"use strict";var o,n,r,s,a,l,c;Object.defineProperty(t,"__esModule",{value:!0}),i.d(t,"isDrawingToolbarVisible",function(){return c}),o=i(45),i.n(o),n=i(4),i.n(n),r=i(15),s=i.n(r),a=!n.enabled("hide_left_toolbar_by_default"),l=o.getBool("ChartDrawingToolbarWidget.visible",a),c=new s.a(l)},function(e,t){e.exports={inputWrapper:"inputWrapper-6bNZbTW4-",textInput:"textInput-3WRWEmm7-",error:"error-v0663AtN-",success:"success-7iP8kTY5-",textInputLeftDirection:"textInputLeftDirection-mlAXPh8V-",xsmall:"xsmall-3Ah_Or2--",small:"small-2bmxiJCE-",large:"large-1JDowW2I-",iconed:"iconed-3ZQvxTot-",inputIcon:"inputIcon-W_Bse-a1-",clearable:"clearable-2tabt_rj-",clearIcon:"clearIcon-389FR5J4-",grouped:"grouped-34HX1lDr-"}},function(e,t,i){"use strict";i(606),function(e){function t(e,t,i){for(var o=0;o<a.length;o++)a[o]||(t=t.toLowerCase()),e.addEventListener(a[o]+t,i,!1)}function i(t){var i=t.data(h).complete;o(t),i&&e.isFunction(i)&&i()}function o(e){e.stop(!0),e.css("background-color",""),e.removeData(c),e.removeData(h)}function n(e){var t=e.data(c);t&&(!0!==t?(t--,t?(r(e),e.data(c,t)):i(e)):r(e))}function r(e){var t=e.css("background-color"),i=e.data(h),o=i.highlightColor||u,r=i.duration||d,s=i.easing||p;e.animate({"background-color":o},r,s).animate({"background-color":t},r,s,n.bind(e,e))}var s,a,l,c,h,u,d,p,_=!1,f=document.body||document.documentElement,m="animation",g="Webkit Moz O ms Khtml".split(" "),y="";if(void 0!==f.style.animationName&&(_=!0),!1===_)for(s=0;s<g.length;s++)if(void 0!==f.style[g[s]+"AnimationName"]){y=g[s],m=y+"Animation","-"+y.toLowerCase()+"-",_=!0;break}a=["webkit","moz","MS","o",""],l="flicker-",c=l+"enable",h=l+"options",u="#fbf8e9",d=400,p="swing",e.fn.highlight=function(i,n){switch(i){default:return i=void 0===i||i,this.each(function(){var o,s;_?(i=!0===i?"infinite":i,t(this,"AnimationEnd",function(){this.style[m]=""}),o=document.getElementsByTagName("html")[0].classList,
o.contains("theme-dark")?this.style[m]="highlight-animation-theme-dark 0.4s ease-in-out "+i+" alternate":this.style[m]="highlight-animation 0.4s ease-in-out "+i+" alternate"):(s=e(this),s.data(c,i),s.data(h,e.extend({},n||{})),s.is(":animated")||r(s))});case!1:return this.each(function(){_?this.style[m]="":o(e(this))})}}}(jQuery)},function(e,t,i){"use strict";function o(e){return new Promise(function(t){i.e(2).then(function(o){var n=i(190).createDialog;t(n(r.a({},a,e)))}.bind(null,i)).catch(i.oe)})}function n(e){o(e).then(function(e){return e.open()})}var r,s,a;Object.defineProperty(t,"__esModule",{value:!0}),t.createNoticeDialog=o,t.showNoticeDialog=n,r=i(3),s=i(13),i.n(s),i(11),a={width:400,destroyOnClose:!0,title:window.t("Notification"),content:window.t("You are notified"),contentWrapTemplate:'<div class="tv-dialog__section tv-dialog__section--no-border"><div class="tv-text"><p></p></div></div>',actionsWrapTemplate:'<div class="tv-dialog__section tv-dialog__section--actions tv-dialog__section--no-border">',actions:[{name:"ok",type:"primary",text:window.t("Ok"),method:"close",key:[13,32]}]}},function(e,t,i){"use strict";function o(e){this._data=e,this.bars=e.bars,this._barWidth=n.optimalBarWidth(e.barSpacing),this._barBorderWidth=1}var n=i(29),r=i(9).HitTestResult;o.prototype.draw=function(e){var t,i,o,n,r,s,a,l,c,h,u,d,p,_,f=this.bars,m=this._data.barSpacing,g=this._data.drawWick,y=this._data.drawBorder,v=this._data.wickColor,b=this._barBorderWidth,S=this._barWidth;if(e.lineCap="square",e.lineStyle=this._data.lineStyle,m<1){if(g){for(e.strokeStyle=v,e.lineWidth=1,e.beginPath(),h=f.length;h-- >0;)u=f[h],e.moveTo(u.time,u.low),e.lineTo(u.time,u.high);e.stroke()}for(e.lineWidth=1,d="",p=!1,e.beginPath(),h=f.length;h-- >0;)u=f[h],c=u.time,d!==u.color&&(p&&(e.stroke(),e.beginPath(),p=!1),e.strokeStyle=u.color,d=u.color),e.moveTo(u.time,u.open),e.lineTo(u.time,u.close),p=!0;p&&e.stroke()}else{if(f=f.slice().sort(function(e,t){return e.color>t.color?-1:e.color<t.color?1:0}),e.translate(-.5,-.5),e.lineWidth=b,g)for(_=v,e.fillStyle=v,h=f.length;h--;)u=f[h],c=u.time,t=u.open,i=u.high,o=u.low,n=u.close,u.wickColor&&u.wickColor!==_&&(e.fillStyle=u.wickColor,_=u.wickColor),a=Math.min(t,n),l=Math.max(t,n),u.hollow?(e.fillRect(c,i,1,a-i),e.fillRect(c,l,1,o-l)):e.fillRect(c,i,1,o-i);if(y)for(h=f.length;h--;)u=f[h],f[h+1]&&u.borderColor===f[h+1].borderColor||(e.fillStyle=u.borderColor),u.hollow||(c=u.time,t=u.open,n=u.close,r=Math.round(c-S),s=Math.round(c+S),a=Math.min(t,n),l=Math.max(t,n),e.fillRect(r,a,s-r+1,l-a+1));for(h=f.length;h--;)u=f[h],c=u.time,t=u.open,i=u.high,o=u.low,n=u.close,r=Math.round(c-S),s=Math.round(c+S),a=Math.min(t,n),l=Math.max(t,n),f[h+1]&&u.color===f[h+1].color||(e.strokeStyle=u.color),e.fillStyle=u.color,Math.abs(a-l)<=1&&(e.fillStyle=u.borderColor),u.hollow?(e.translate(-.5,-.5),e.strokeRect(r+1,a+1,s-r,l-a),e.translate(.5,.5)):(y&&(r+=1,a+=1,s-=1,l-=1),e.fillRect(r,a,s-r+1,l-a+1))}},o.prototype.hitTest=function(e){var t,i,o,s,a=this.bars,l=.5*this._data.barSpacing;if(0===a.length)return null
;if(e.x<a[0].time-l)return null;if(e.x>a[a.length-1].time+l)return null;for(t=null,i=0;i<a.length;++i)if(o=a[i],e.x<=o.time+l){t=o;break}return s=n.selectionTolerance(this._barBorderWidth),t&&t.high-s<=e.y&&e.y<=t.low+s?this._data.hittest||new r(r.REGULAR):null},t.PaneRendererCandles=TradingView.PaneRendererCandles=o},function(e,t,i){"use strict";var o,n;Object.defineProperty(t,"__esModule",{value:!0}),i.d(t,"ScaleType",function(){return o}),i.d(t,"plotShapesData",function(){return n}),i(11),function(e){e[e.Right=0]="Right",e[e.Left=1]="Left",e[e.None=2]="None"}(o||(o={})),n={shape_arrow_down:{guiName:$.t("Arrow Down"),id:"shape_arrow_down",paneRendererClass:"PaneRendererArrowDown",pineName:"shape.arrowdown"},shape_arrow_up:{guiName:$.t("Arrow Up"),id:"shape_arrow_up",paneRendererClass:"PaneRendererArrowUp",pineName:"shape.arrowup"},shape_circle:{guiName:$.t("Circle"),id:"shape_circle",paneRendererClass:"PaneRendererCircleShape",pineName:"shape.circle"},shape_cross:{guiName:$.t("Cross"),id:"shape_cross",paneRendererClass:"PaneRendererCrossShape",pineName:"shape.cross"},shape_diamond:{guiName:$.t("Diamond"),id:"shape_diamond",paneRendererClass:"PaneRendererDiamond",pineName:"shape.diamond"},shape_flag:{guiName:$.t("Flag"),id:"shape_flag",paneRendererClass:"PaneRendererFlagShape",pineName:"shape.flag"},shape_label_down:{guiName:$.t("Label Down"),id:"shape_label_down",paneRendererClass:"PaneRendererLabelDown",pineName:"shape.labeldown"},shape_label_up:{guiName:$.t("Label Up"),id:"shape_label_up",paneRendererClass:"PaneRendererLabelUp",pineName:"shape.labelup"},shape_square:{guiName:$.t("Square"),id:"shape_square",paneRendererClass:"PaneRendererSquare",pineName:"shape.square"},shape_triangle_down:{guiName:$.t("Triangle Down"),id:"shape_triangle_down",paneRendererClass:"PaneRendererTriangleApexDown",pineName:"shape.triangledown"},shape_triangle_up:{guiName:$.t("Triangle Up"),id:"shape_triangle_up",paneRendererClass:"PaneRendererTriangleApexUp",pineName:"shape.triangleup"},shape_xcross:{guiName:$.t("X Cross"),id:"shape_xcross",paneRendererClass:"PaneRendererXCross",pineName:"shape.xcross"}}},function(e,t,i){"use strict";var o,n,r,s;Object.defineProperty(t,"__esModule",{value:!0}),i.d(t,"MarkLocation",function(){return o}),i.d(t,"HAlign",function(){return n}),i.d(t,"VAlign",function(){return r}),i.d(t,"LineStyle",function(){return s}),function(e){e.AboveBar="AboveBar",e.BelowBar="BelowBar",e.Top="Top",e.Bottom="Bottom",e.Right="Right",e.Left="Left",e.Absolute="Absolute",e.AbsoluteUp="AbsoluteUp",e.AbsoluteDown="AbsoluteDown"}(o||(o={})),function(e){e.Left="left",e.Center="center",e.Right="right"}(n||(n={})),function(e){e.Top="top",e.Middle="middle",e.Bottom="bottom"}(r||(r={})),function(e){e[e.Solid=0]="Solid",e[e.Dotted=1]="Dotted",e[e.Dashed=2]="Dashed"}(s||(s={}))},function(e,t,i){"use strict";function o(e){return"alwaysOn"===e||"alwaysOff"===e?e:"visibleOnMouseOver"}function n(){if(!u){var e="NavigationButtons.visibility";u=new c.a,u.setValue(o(h.getValue(e))),u.subscribe(u,function(t){h.setValue(e,o(t.value()))})}
return u}function r(){return[{value:"visibleOnMouseOver",title:window.t("Visible on Mouse Over")},{value:"alwaysOn",title:window.t("Always Visible")},{value:"alwaysOff",title:window.t("Always Invisible")}]}function s(){var e,t;return d||(d=new c.a,e=n(),t=function(){var t=e.value();"alwaysOn"!==t&&"alwaysOff"!==t&&(t=Modernizr.touch?"alwaysOn":"visibleOnMouseOver"),d&&d.setValue(t)},e.subscribe(d,t),t()),d}var a,l,c,h,u,d;Object.defineProperty(t,"__esModule",{value:!0}),t.property=n,t.availableValues=r,t.actualBehavior=s,i(11),a=i(104),i.n(a),l=i(12),c=i.n(l),h=i(45),i.n(h)},,function(e,t,i){"use strict";var o,n;Object.defineProperty(t,"__esModule",{value:!0}),i.d(t,"BarsRange",function(){return n}),o=i(7),i.n(o),n=function(){function e(e,t){Object(o.assert)(e<=t,"The last bar in the bars range should be greater than or equal to the first bar"),this._firstBar=e,this._lastBar=t}return e.prototype.firstBar=function(){return this._firstBar},e.prototype.lastBar=function(){return this._lastBar},e.prototype.count=function(){return this._lastBar-this._firstBar+1},e.prototype.contains=function(e){return this._firstBar<=e&&e<=this._lastBar},e.prototype.equals=function(e){return this._firstBar===e.firstBar()&&this._lastBar===e.lastBar()},e}()},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,i){"use strict";!function(e){if(document.createElement("canvas")&&document.createElement("canvas").getContext){var t=function(t){var i=t.backingStorePixelRatio||t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;return(e.devicePixelRatio||1)/i}(document.createElement("canvas").getContext("2d"));t<=1||(e.hidpiCanvasRatio=t,function(e){var i,o,n=function(e,t){for(var i in e)e.hasOwnProperty(i)&&t(e[i],i)},r={fillRect:"all",clearRect:"all",strokeRect:"all",moveTo:"all",lineTo:"all",arc:[0,1,2],arcTo:"all",bezierCurveTo:"all",isPointinPath:"all",isPointinStroke:"all",quadraticCurveTo:"all",rect:"all",translate:"all",createRadialGradient:"all",createLinearGradient:"all",drawImagePatchedSource:[1,2,3,4]};e.drawImagePatchedSource=e.drawImage,i=e.drawImage,e.drawImagePatchedSourceAndDest=function(e){var o,n=Array.prototype.slice.call(arguments);for(o=1;o<n.length;++o)n[o]&&(n[o]*=t);return n.length>5&&("width"in e&&(n[3]=Math.min(e.width,Math.max(1,n[3]))),"height"in e&&(n[4]=Math.min(e.height,Math.max(1,n[4])))),i.apply(this,n)},n(r,function(i,o){var n=e[o];e[o]=function(){var e,o;if("all"===i)for(o=[],e=arguments.length;0<e--;)o[e]=arguments[e]*t;else for(o=Array.prototype.slice.call(arguments),e=i.length;0<e--;)o[i[e]]&&(o[i[e]]=o[i[e]]*t);return n.apply(this,o)}}),e.drawImage=function(e){return function(){return arguments[0]instanceof HTMLCanvasElement?e.drawImagePatchedSourceAndDest.apply(this,arguments):e.drawImagePatchedSource.apply(this,arguments)}}(e),o=/(\d+(?:\.\d+)?)(px|em|rem|pt)/g,e.fillText=function(e){return function(){var i=Array.prototype.slice.call(arguments);i[1]*=t,i[2]*=t,this.font=this.font.replace(o,function(e,i,o){return i*t+o}),
e.apply(this,i),this.font=this.font.replace(o,function(e,i,o){return i/t+o})}}(e.fillText),e.strokeText=function(e){return function(){var i=Array.prototype.slice.call(arguments);i[1]*=t,i[2]*=t,this.font=this.font.replace(o,function(e,i,o){return i*t+o}),e.apply(this,i),this.font=this.font.replace(o,function(e,i,o){return i/t+o})}}(e.strokeText)}(CanvasRenderingContext2D.prototype),function(e){e.getContext=function(e){return function(i){var o=e.call(this,i);return"2d"===i&&this.width!==Math.floor(parseInt(this.style.width)*t)&&(this.style.height=this.height+"px",this.style.width=this.width+"px",this.width*=t,this.height*=t),o}}(e.getContext)}(HTMLCanvasElement.prototype))}}(window)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i.d(t,"LineToolPitchforkStyle",function(){return o});var o;!function(e){e[e.Original=0]="Original",e[e.Schiff=1]="Schiff",e[e.Inside=2]="Inside",e[e.Schiff2=3]="Schiff2"}(o||(o={}))},function(e,t,i){"use strict";function o(e,t){var i,o;return void 0===e&&(e=[]),void 0===t&&(t=[]),i=document.createElement("div"),o=document.createElement("div"),i.appendChild(o),i.classList.add(n.container),o.classList.add(n.inner),e.forEach(function(e){i.classList.add(n[e])}),t.forEach(function(e){i.classList.add(n[e])}),i}var n;t.a=o,n=i(493),i.n(n)},function(e,t,i){"use strict";function o(e){return Object(j.fetch)("/theme/?themeName="+encodeURIComponent(e),{credentials:"include",method:"GET"}).then(function(e){return e.json()}).then(function(e){var t={};return e.content&&(t.content=JSON.parse(e.content)),t})}function n(){return $||Object(j.fetch)("/themes/",{credentials:"include",method:"GET"}).then(function(e){return $=e.json()})}function r(e,t){var i=new FormData;return i.append("content",JSON.stringify(t)),i.append("name",e),$=null,Object(j.fetch)("/save-theme/",{credentials:"include",method:"POST",body:i}).then(function(e){return e.json()},function(e){return q.logError(e)})}function s(e){var t=new FormData;return t.append("name",e),$=null,Object(j.fetch)("/remove-theme/",{credentials:"include",method:"POST",body:t}).then(function(e){return e.json()},function(e){return q.logError(e)})}function a(e){return o(e).then(function(e){return!!e.content})}function l(){return Z||(Z=new Promise(function(e){i.e(20).then(function(t){var o,n=i(1201),r=i(1202);e((o={},o[K.Light]=r,o[K.Dark]=n,o))}.bind(null,i)).catch(i.oe)})),Z}function c(){return[K.Light,K.Dark]}function h(){return l().then(function(e){var t;return t={},t[K.Light]=JSON.parse(e[K.Light]),t[K.Dark]=JSON.parse(e[K.Dark]),t})}function u(e){return h().then(function(t){return t[e]})}function d(e){return X[e]||e}function p(e){return h().then(function(t){return c().some(function(i){return _(t[i],e)})})}function _(e,t){var i=e.content===t.content;return m(e.content,function(e,o){var n=y(e,t.content);return!(i=f(o,n))}),i}function f(e,t){if("string"==typeof e&&"string"==typeof t)try{return Object(Y.areEqualRgb)(Object(Y.parseRgb)(e),Object(Y.parseRgb)(t))}catch(i){return e===t}return e===t}function m(e,t){void 0===e&&(e={});try{
g(e,[],t)}catch(e){return}}function g(e,t,i){var o,n;for(o in e)if(e.hasOwnProperty(o))if(n=t.concat(o),"object"==typeof e[o])g(e[o],n,i);else if(i(n,e[o]))throw Error("exit")}function y(e,t){void 0===t&&(t={});var i=Function("obj","return obj."+e.join(".")+";");try{return i(t)}catch(e){return}}function v(e,t){var i,o;return void 0===t&&(t=[]),(i=Q[e])?oe.test(i)?i:(o=i,t.push(e),-1!==t.indexOf(o)?(console.warn("Colors definitions cycled"),i):t.length>ie?(console.warn("Too many variables-link in HEX-color search: "+t[0]),null):v(o,t)):null}function b(e,t){var i=ne[e];if(!i)throw Error("No such color "+e);return i}function S(e,t){var i,o;t||(t=window),i=t.document.documentElement;for(o in se)se[o].className&&i.classList.toggle(se[o].className,o===e)}function w(e){return!e.isPrivate}function T(){return se[le.value()]||se[ae]}function P(e){return T().getThemedColor(e)}function x(e){le.setValue(e)}function C(){x(Object(H.getValue)(ce)||ae)}function L(){Object(H.setValue)(ce,T().name,{forceFlush:!0})}function I(e){return o(e)}function M(){return n()}function k(){return c()}function A(e){return u(e).then(function(e){return e||{content:void 0}})}function E(){return h()}function D(e,t){return r(e,t)}function V(e){return s(e)}function O(e){return a(e)}function R(e){return d(e)}function B(e){return p(e)}function z(e){return{content:{chartProperties:{paneProperties:e.m_model.properties().paneProperties.state(),scalesProperties:e.m_model.properties().scalesProperties.state()},mainSourceProperties:e.m_model.m_mainSeries.properties().state()}}}var N,F,W,H,j,U,q,$,Y,G,K,Z,X,J,Q,ee,te,ie,oe,ne,re,se,ae,le,ce;Object.defineProperty(t,"__esModule",{value:!0}),N=i(589),i(11),F=i(15),W=i.n(F),H=i(45),j=i(338),U=i(5),q=Object(U.getLogger)("Themes.Provider"),$=null,Y=i(27),function(e){e.Light="light",e.Dark="dark"}(K||(K={})),Z=null,G={},G[K.Light]=window.t("Light",{context:"colorThemeName"}),G[K.Dark]=window.t("Dark",{context:"colorThemeName"}),G.Black=window.t("Black",{context:"colorThemeName"}),G.Blue=window.t("Blue",{context:"colorThemeName"}),G.Grey=window.t("Grey",{context:"colorThemeName"}),G.White=window.t("White",{context:"colorThemeName"}),X=G,J=i(590),Q=i(591),ee=i(7),te={},ie=Object.keys(Q).length,oe=/^#[0-9A-F]{6}$/i,Object.keys(Q).forEach(function(e){var t=v(e);te[e]=Object(ee.ensureNotNull)(t)}),ne=te,i.d(t,"themes",function(){return se}),i.d(t,"DEFAULT_THEME",function(){return ae}),i.d(t,"watchedTheme",function(){return le}),t.applyTheme=S,t.isPublicTheme=w,t.getCurrentTheme=T,t.setThemedColor=P,t.setTheme=x,t.restoreTheme=C,t.syncTheme=L,t.getTheme=I,t.getThemeNames=M,t.getStdThemeNames=k,t.getStdTheme=A,t.getStdThemes=E,t.saveTheme=D,t.removeTheme=V,t.isThemeExist=O,t.translateStdThemeName=R,t.isStdTheme=B,t.extractThemeFromModel=z,re={},re[K.Light]={name:K.Light,label:window.t("Light",{context:"colorThemeName"}),className:"theme-light",order:2,getThemedColor:function(e){return b(e)}},re[K.Dark]={name:K.Dark,label:window.t("Dark",{context:"colorThemeName"}),className:"theme-dark",order:1,getThemedColor:function(e){
return b(J[e])}},se=re,ae="light",le=new W.a,le.subscribe(function(e){S(e,window)}),ce="current_theme.name"},function(e,t,i){"use strict";var o=i(38),n=i(14).parseJSONorNot,r=i(5).getLogger("Chart.SaveloadAdapter.Library"),s=function(){var e,t,i,s,a={},l=null;return a.setCustomAdapter=function(e){l=e,r.logNormal("Use custom save-load adapter")},a.initialize=function(o,n,r,a){e=o,t=n,i=r,s=a},a.updateUser=function(e){t=e},a.getCharts=function(o,a){function c(e){e=e.map(function(e){return{id:e.id,name:e.name,image_url:e.id,modified_iso:e.timestamp,short_symbol:e.symbol,interval:e.resolution}}),o(e)}return l?void l.getAllCharts().then(c).catch(a):$.ajax({url:"{0}/{1}/charts?client={2}&user={3}".format(i,encodeURIComponent(s),encodeURIComponent(e),encodeURIComponent(t)),type:"GET",crossDomain:!0}).done(function(e){var t=n(e);if("ok"!==t.status)return r.logWarn("Charts list request failed: "+t.message),void a();c(t.data)}).fail(a)},a.removeChart=function(o,a){if(l)return void l.removeChart(o).then(a);$.ajax({url:"{0}/{1}/charts?client={2}&user={3}&chart={4}".format(i,encodeURIComponent(s),encodeURIComponent(e),encodeURIComponent(t),encodeURIComponent(o)),type:"DELETE",crossDomain:!0}).done(function(e){var t=n(e);"ok"!==t.status&&r.logWarn("Chart delete request failed: "+t.message),a()})},a.saveChart=function(o,a,c,h,u,d,p){var _,f=u.id.value(),m={name:o,content:JSON.stringify(h),symbol:a,resolution:c};if(l)return m.id=f,void l.saveChart(m).then(d).catch(p);_="{0}/{1}/charts?client={2}&user={3}".format(i,encodeURIComponent(s),encodeURIComponent(e),encodeURIComponent(t)),void 0!==f&&null!==f&&(_+="&chart="+encodeURIComponent(f)),$.ajax({url:_,data:m,type:"POST",crossDomain:!0}).done(function(e){var t=n(e);if("ok"!==t.status)return r.logWarn("Chart save request failed: "+t.message),void p();d(t.id)}).fail(function(){p()})},a.getChartContent=function(o,a,c){function h(e){var t=JSON.parse(e);return t.uid=o.id,t}if(l)return void l.getChartContent(o.id).then(function(e){var t=h(e);a(t)}).catch(c);$.ajax({url:"{0}/{1}/charts?client={2}&user={3}&chart={4}".format(i,encodeURIComponent(s),encodeURIComponent(e),encodeURIComponent(t),encodeURIComponent(o.id)),type:"GET",crossDomain:!0}).done(function(e){var t,i=n(e);if("ok"!==i.status)return void r.logWarn("Chart load request failed: "+i.message);t=h(i.data.content),a(t)}).fail(function(){c&&c()})},a.loadChart=function(e){a.getChartContent(e,function(e){o.emit("chart_load_requested",e)},function(){r.logWarn("Error loading chart")})},a.removeStudyTemplate=function(o,a){if(l)return void l.removeStudyTemplate({name:o}).then(a);$.ajax({url:"{0}/{1}/study_templates?client={2}&user={3}&template={4}".format(i,encodeURIComponent(s),encodeURIComponent(e),encodeURIComponent(t),encodeURIComponent(o)),type:"DELETE",crossDomain:!0}).done(function(e){var t=n(e);"ok"!==t.status&&r.logWarn("Chart delete request failed: "+t.message),a()})},a.getStudyTemplateContent=function(o,r){if(l)return void l.getStudyTemplateContent({name:o}).then(function(e){r({content:e})});$.ajax({
url:"{0}/{1}/study_templates?client={2}&user={3}&template={4}".format(i,encodeURIComponent(s),encodeURIComponent(e),encodeURIComponent(t),encodeURIComponent(o)),type:"GET",crossDomain:!0}).done(function(e){r(n(e).data)})},a.saveStudyTemplate=function(o,a){var c={name:o.name,content:o.content};if(l)return void l.saveStudyTemplate(c).then(a.bind(null,{error:""})).catch(function(e){a({error:null!=e?""+e:"error"})});$.ajax({url:"{0}/{1}/study_templates?client={2}&user={3}".format(i,encodeURIComponent(s),encodeURIComponent(e),encodeURIComponent(t)),type:"POST",crossDomain:!0,data:c}).done(function(e){var t=n(e);"ok"!==t.status&&r.logWarn("Template save request failed: "+t.message),a({error:"ok"===t.status?"":t.status})})},a._templatesCache=null,a.getStudyTemplatesList=function(o){function c(e){e=e.map(function(e){return{is_default:!1,name:e.name}}),a._templatesCache=e,o(e)}return a._templatesCache?void o(a._templatesCache):(a._templatesCache=[],l?void l.getAllStudyTemplates().then(c):void $.ajax({url:"{0}/{1}/study_templates?client={2}&user={3}".format(i,encodeURIComponent(s),encodeURIComponent(e),encodeURIComponent(t)),type:"GET",crossDomain:!0}).done(function(e){if(null!==a._templatesCache){var t=n(e);if("ok"!==t.status)return void r.logWarn("Templates list request failed: "+t.message);c(t.data)}}))},a.invalidateStudyTemplatesList=function(){a._templatesCache=null},a}();e.exports=s},function(e,t,i){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n,r,s,a;Object.defineProperty(t,"__esModule",{value:!0}),t.SaveRenameDialog=void 0,n=function(){function e(e,t){var i,o;for(i=0;i<t.length;i++)o=t[i],o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}(),i(594),r=i(83),s={YES:"yes",CLOSE:"close"},a=0,t.SaveRenameDialog=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=t.fields,n=t.confirm,r=t.title,s=void 0===r?"":r,a=t.destroyOnClose,l=void 0===a||a,c=t.modal,h=void 0!==c&&c;o(this,e),this._$form=$("<div></div>"),this._fields=i,this._appendFieldsToForm(),this._title=s,this._destroyOnClose=l,this._modal=h,this._isConfirmDialogOpened=!1,n&&(this._needCheckConfirm=!0,this._shouldShowConfirm=n.shouldShowDialog,this._getConfirmMessage=n.getMessage)}return n(e,[{key:"setField",value:function(e,t){this._fields.find(function(t){return t.name===e}).value=t}},{key:"show",value:function(){var e=this,t=this._createDialog();return new Promise(function(i){t.then(function(t){t.on("action:submit",function(t){return e._onSubmit(t,i)}),t.open(),t.on("beforeClose",e._unmountFields.bind(e)),e._fields[a].select()})})}},{key:"_appendFieldsToForm",value:function(){var e=this;this._fields.forEach(function(t){t.appendTo(e._$form)})}},{key:"_createDialog",value:function(){var e=this;return new Promise(function(t){i.e(2).then(function(o){var n=i(190).createDialog;t(n({type:e._modal?"modal":"popup",title:e._title,content:e._$form,
actionsWrapTemplate:'<div class="tv-dialog__section tv-dialog__section--actions i-align_right tv-dialog__section--no-border">',width:470,destroyOnClose:e._destroyOnClose,isClickOutFn:function(){if(e._isConfirmDialogOpened)return!1},actions:[{name:"submit",type:"primary",text:$.t("Save"),key:13,addClass:"js-submit-button"},{name:"cancel",type:"default",text:$.t("Cancel"),method:"close",addClass:"js-cancel-button"}]}))}.bind(null,i)).catch(i.oe)})}},{key:"_onSubmit",value:function(e,t){var i=this,o=this._validate();if(o)e.error(o.error),o.focus();else{if(!this._needCheckConfirm)return t(this._collectValues(),e),void e.close();Promise.resolve(this._shouldShowConfirm(this._collectValues())).then(function(o){if(!o)return t(i._collectValues(),e),void e.close();i._showConfirmDialog().then(function(o){o===s.CLOSE&&(e.focus(),i._fields[a].focus()),o===s.YES&&(t(i._collectValues(),e),e.close())})})}}},{key:"_showConfirmDialog",value:function(){var e=this;return new Promise(function(t){Promise.resolve(e._getConfirmMessage(e._collectValues())).then(function(i){e._isConfirmDialogOpened=!0,(0,r.createConfirmDialog)({type:"modal",content:i}).then(function(i){i.on("action:yes",function(e){t(s.YES),e.close()}),i.on("afterClose",function(){t(s.CLOSE),e._isConfirmDialogOpened=!1}),i.open()})})})}},{key:"_validate",value:function(){return this._fields.find(function(e){return!e.valid})}},{key:"_collectValues",value:function(){return this._fields.reduce(function(e,t){return e[t.name]=t.value,e},{})}},{key:"_unmountFields",value:function(){this._fields.forEach(function(e){e.unmount&&e.unmount()})}}]),e}()},function(e,t,i){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n;Object.defineProperty(t,"__esModule",{value:!0}),n=function(){function e(e,t){var i,o;for(i=0;i<t.length;i++)o=t[i],o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}(),t.InputField=function(){function e(t){var i=t.label,n=t.name,r=t.maxLength,s=t.error,a=void 0===s?"":s;o(this,e),this._name=n,this._$field=$('<label class="tv-rename-chart-dialog__field">\n\t\t\t\t<span class="tv-rename-chart-dialog__label">'+i+'</span>\n\t\t\t\t<input class="tv-control-input" type="text" name="'+n+'" maxlength="'+r+'"/>\n\t\t\t</label>'),this._$input=this._$field.find("input"),this._error=a}return n(e,[{key:"appendTo",value:function(e){e.append(this._$field)}},{key:"focus",value:function(){return this._$input.focus()}},{key:"select",value:function(){return this.focus().select()}},{key:"value",set:function(e){this._$input.val(e)},get:function(){return this._$input.val()}},{key:"name",get:function(){return this._name}},{key:"valid",get:function(){return!!this._$input.val().trim()}},{key:"error",set:function(e){this._error=e},get:function(){return this._error}}]),e}()},function(e,t,i){"use strict";var o,n,r;Object.defineProperty(t,"__esModule",{value:!0}),i.d(t,"ChartChangesWatcher",function(){return r}),
o=i(8),n=i.n(o),r=function(){function e(e,t,i){this._hasChanges=!1,this._undoHistory=e,this._chartSaver=t,this._globalEvents=i,this._onValueChanged=new n.a,this._subscribe()}return e.prototype.destroy=function(){this._unsubscribe(),this._onValueChanged.destroy()},e.prototype.hasChanges=function(){return this._hasChanges},e.prototype.getOnChange=function(){return this._onValueChanged},e.prototype._subscribe=function(){this._globalEvents.subscribe("chart_loaded",this._handleChartLoaded,this),this._undoHistory.undoStack().onChange().subscribe(this,this._handleChangeUndoStack),this._chartSaver.chartSaved().subscribe(this,this._handleChartSaved)},e.prototype._unsubscribe=function(){this._globalEvents.unsubscribe("chart_loaded",this._handleChartLoaded,this),this._undoHistory.undoStack().onChange().unsubscribe(this,this._handleChangeUndoStack),this._chartSaver.chartSaved().unsubscribe(this,this._handleChartSaved)},e.prototype._setChanges=function(e){this._hasChanges=e,this._onValueChanged.fire(e)},e.prototype._handleChartLoaded=function(){this._setChanges(!1)},e.prototype._handleChangeUndoStack=function(){var e=this._undoHistory.undoStack().head();e&&!e.customFlag("doesnt_affect_save")&&this._setChanges(!0)},e.prototype._handleChartSaved=function(e){e&&this._setChanges(!1)},e}()},function(e,t,i){"use strict";function o(e,t){n.enabled("saveload_requires_authentication")?window.runOrSignIn(e,t):e()}var n;t.a=o,n=i(4),i.n(n)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i.d(t,"debounce",function(){return o});var o=function(e,t){function i(){e.apply(n,o)}var o,n,r=0;return function(){n=this,o=arguments,clearTimeout(r),r=setTimeout(i,t)}}},function(e,t,i){"use strict";var o,n,r;Object.defineProperty(t,"__esModule",{value:!0}),i.d(t,"UndoMacroCommand",function(){return r}),o=i(3),n=i(41),r=function(e){function t(t){var i=e.call(this,t,!1)||this;return i._subcommands=[],i}return o.c(t,e),t.prototype.addCommand=function(e){this._subcommands.push(e)},t.prototype.isEmpty=function(){return 0===this._subcommands.length},t.prototype.redo=function(){for(var e=0;e<this._subcommands.length;e++)this._subcommands[e].redo()},t.prototype.undo=function(){for(var e=this._subcommands.length-1;e>=0;e--)this._subcommands[e].undo()},t}(n.UndoCommand)},function(e,t,i){"use strict";function o(e){var t,i;if(""===e)return Promise.resolve(null);if(t=JSON.parse(e),!Object(n.isObject)(t)||"function"==typeof t)return Promise.reject(Error("Non-object content in the non-series envelope"));if(Object(n.hasProperty)(t,"indexes_replace"))return Promise.resolve({indexes_replace:!0});if(i={indexes_replace:!1},Object(n.hasProperty)(t,"offsets")&&(i.offsets=t.offsets),Object(n.hasProperty)(t,"isUpdate")){if("boolean"!=typeof t.isUpdate)return Promise.reject(Error('Invalid type of "isUpdate" field'));i.isUpdate=t.isUpdate}return Object(n.hasProperty)(t,"data")&&(i.data=t.data),Object(n.hasProperty)(t,"graphicsCmds")&&(i.graphicsCmds=Object(r.b)(t.graphicsCmds)),Promise.resolve(i)}var n,r;Object.defineProperty(t,"__esModule",{value:!0
}),t.unpackNonSeriesData=o,n=i(261),i.n(n),r=i(262)},function(e,t,i){"use strict";function o(e){var t=typeof e;return null!==e&&("object"===t||"function"===t)}function n(e,t){return t in e}Object.defineProperty(t,"__esModule",{value:!0}),t.isObject=o,t.hasProperty=n},function(e,t,i){"use strict";function o(e){var t,i,o,n;if(Object(a.hasProperty)(e,"create"),Object(a.hasProperty)(e,"erase"))for(t=e.erase,Object(s.assert)(Array.isArray(t),"Collection of erase commands should be array"),i=0,o=t;i<o.length;i++)n=o[i],Object(s.assert)("all"===n.action||"one"===n.action,"Erase command action should be 'all' or 'one'");return e}function n(e,t){e.forEach(function(e){var i,o,n;for(i=0,o=e;i<o.length;i++)n=o[i],n.indexes=t})}function r(e,t){for(var i=0;i<e.length;++i)if(e[i].id===t)return i;return-1}var s,a,l,c,h;t.b=o,i.d(t,"a",function(){return h}),s=i(7),i.n(s),a=i(261),i.n(a),l=i(167),c=i(263),h=function(){function e(){this.indexes=[],this._horizlines=new Map,this._vertlines=new Map,this._lines=new Map,this._hlines=new Map,this._textmarks=new Map,this._shapemarks=new Map,this._backgrounds=new Map,this._polygons=new Map,this._trendchannels=new Map,this._hhists=new Map,this._hhistsByTimePointIndex=new Map}return e.prototype.horizlines=function(){return this._horizlines},e.prototype.vertlines=function(){return this._vertlines},e.prototype.lines=function(){return this._lines},e.prototype.hlines=function(){return this._hlines},e.prototype.textmarks=function(){return this._textmarks},e.prototype.shapemarks=function(){return this._shapemarks},e.prototype.backgrounds=function(){return this._backgrounds},e.prototype.polygons=function(){return this._polygons},e.prototype.trendchannels=function(){return this._trendchannels},e.prototype.hhists=function(){return this._hhists},e.prototype.hhistsByTimePointIndex=function(){return this._hhistsByTimePointIndex},e.prototype.clear=function(){this.indexes=[],this._clearPrimitives()},e.prototype.extract=function(){var e={indexes:this.indexes,horizlines:this._horizlines,vertlines:this._vertlines,lines:this._lines,hlines:this._hlines,textmarks:this._textmarks,shapemarks:this._shapemarks,backgrounds:this._backgrounds,polygons:this._polygons,trendchannels:this._trendchannels,hhists:this._hhists};return this.indexes=[],this._horizlines=new Map,this._vertlines=new Map,this._lines=new Map,this._hlines=new Map,this._textmarks=new Map,this._shapemarks=new Map,this._backgrounds=new Map,this._polygons=new Map,this._trendchannels=new Map,this._hhists=new Map,this._hhistsByTimePointIndex.clear(),new c.a("data",e)},e.prototype.replaceIndexesTo=function(e){this.indexes=e,n(this._horizlines,e),n(this._vertlines,e),n(this._lines,e),n(this._hlines,e),n(this._textmarks,e),n(this._shapemarks,e),n(this._backgrounds,e),n(this._polygons,e),n(this._trendchannels,e),n(this._hhists,e),this._postProcess()},e.prototype.processCommands=function(e,t){void 0!==e.erase&&this._processEraseCommands(e.erase),void 0!==e.create&&this._processCreateCommands(e.create,t)},e.prototype._processCreateCommands=function(e,t){var i,o
;for(i in e)if(e.hasOwnProperty(i))switch(o=i,Object(s.assert)(o in t,"There is a '"+o+"' in study response, but it doesn't present in graphics info!"),o){case"horizlines":Object(l.b)(this._horizlines,e[o],t[o],this.indexes);break;case"vertlines":Object(l.b)(this._vertlines,e[o],t[o],this.indexes);break;case"lines":Object(l.b)(this._lines,e[o],t[o],this.indexes);break;case"hlines":Object(l.b)(this._hlines,e[o],t[o],this.indexes);break;case"textmarks":Object(l.b)(this._textmarks,e[o],t[o],this.indexes);break;case"shapemarks":Object(l.b)(this._shapemarks,e[o],t[o],this.indexes);break;case"backgrounds":Object(l.b)(this._backgrounds,e[o],t[o],this.indexes);break;case"polygons":Object(l.b)(this._polygons,e[o],t[o],this.indexes);break;case"trendchannels":Object(l.b)(this._trendchannels,e[o],t[o],this.indexes);break;case"hhists":Object(l.b)(this._hhists,e[o],t[o],this.indexes)}this._postProcess()},e.prototype._processEraseCommands=function(e){var t,i,o,n=function(e){if("all"===e.action)s._clearPrimitives();else{({horizlines:s._horizlines,vertlines:s._vertlines,lines:s._lines,hlines:s._hlines,textmarks:s._textmarks,shapemarks:s._shapemarks,backgrounds:s._backgrounds,polygons:s._polygons,trendchannels:s._trendchannels,hhists:s._hhists})[e.type].forEach(function(t){var i=r(t[0].items,e.id);i>=0&&t[0].items.splice(i,1)})}},s=this;for(t=0,i=e;t<i.length;t++)o=i[t],n(o)},e.prototype._postProcess=function(){this._hhists.size>0&&Object(l.e)(this)},e.prototype._clearPrimitives=function(){this._horizlines=new Map,this._vertlines=new Map,this._lines=new Map,this._hlines=new Map,this._textmarks=new Map,this._shapemarks=new Map,this._backgrounds=new Map,this._polygons=new Map,this._trendchannels=new Map,this._hhists=new Map,this._hhistsByTimePointIndex.clear()},e}()},function(e,t,i){"use strict";function o(){return new c}function n(e){return new c("state",e)}function r(e){var t,i,o,n,r,c=new Set;for(t=0,i=l.d;t<i.length;t++)o=i[t],s(c,e[o]());return n=[],c.forEach(function(e){return n.push(e)}),n.sort(function(e,t){return e-t}),r={indexes:n},e.horizlines().forEach(function(e,t){var i,o,s,c,h,u,d;for(i=0,o=e;i<o.length;i++)for(s=o[i],c=s.indexes,h=0,u=s.items;h<u.length;h++)d=u[h],r.horizlines=r.horizlines||[],Object(l.a)(r.horizlines,a.a({},d,{startIndex:n.indexOf(c[d.startIndex]),endIndex:n.indexOf(c[d.endIndex])}),t)}),e.vertlines().forEach(function(e,t){var i,o,s,c,h,u,d;for(i=0,o=e;i<o.length;i++)for(s=o[i],c=s.indexes,h=0,u=s.items;h<u.length;h++)d=u[h],r.vertlines=r.vertlines||[],Object(l.a)(r.vertlines,a.a({},d,{index:n.indexOf(c[d.index])}),t)}),e.lines().forEach(function(e,t){var i,o,s,c,h,u,d;for(i=0,o=e;i<o.length;i++)for(s=o[i],c=s.indexes,h=0,u=s.items;h<u.length;h++)d=u[h],r.lines=r.lines||[],Object(l.a)(r.lines,a.a({},d,{startIndex:n.indexOf(c[d.startIndex]),endIndex:n.indexOf(c[d.endIndex])}),t)}),e.hlines().forEach(function(e,t){var i,o,n,s,a,c;for(i=0,o=e;i<o.length;i++)for(n=o[i],s=0,a=n.items;s<a.length;s++)c=a[s],r.hlines=r.hlines||[],Object(l.a)(r.hlines,c,t)}),e.textmarks().forEach(function(e,t){var i,o,s,c,h,u,d
;for(i=0,o=e;i<o.length;i++)for(s=o[i],c=s.indexes,h=0,u=s.items;h<u.length;h++)d=u[h],r.textmarks=r.textmarks||[],Object(l.a)(r.textmarks,a.a({},d,{time:n.indexOf(c[d.time])}),t)}),e.shapemarks().forEach(function(e,t){var i,o,s,c,h,u,d;for(i=0,o=e;i<o.length;i++)for(s=o[i],c=s.indexes,h=0,u=s.items;h<u.length;h++)d=u[h],r.shapemarks=r.shapemarks||[],Object(l.a)(r.shapemarks,a.a({},d,{time:n.indexOf(c[d.time])}),t)}),e.backgrounds().forEach(function(e,t){var i,o,s,c,h,u,d;for(i=0,o=e;i<o.length;i++)for(s=o[i],c=s.indexes,h=0,u=s.items;h<u.length;h++)d=u[h],r.backgrounds=r.backgrounds||[],Object(l.a)(r.backgrounds,a.a({},d,{start:n.indexOf(c[d.start]),stop:n.indexOf(c[d.stop])}),t)}),e.polygons().forEach(function(e,t){var i,o,s,c=function(e){var i,o,s,c,h=e.indexes;for(i=0,o=e.items;i<o.length;i++)s=o[i],c=s.points.map(function(e){return a.a({},e,{index:n.indexOf(h[e.index])})}),r.polygons=r.polygons||[],Object(l.a)(r.polygons,a.a({},s,{points:c}),t)};for(i=0,o=e;i<o.length;i++)s=o[i],c(s)}),e.trendchannels().forEach(function(e,t){var i,o,s,c,h,u,d;for(i=0,o=e;i<o.length;i++)for(s=o[i],c=s.indexes,h=0,u=s.items;h<u.length;h++)d=u[h],r.trendchannels=r.trendchannels||[],Object(l.a)(r.trendchannels,a.a({},d,{startIndex:n.indexOf(c[d.startIndex]),endIndex:n.indexOf(c[d.endIndex])}),t)}),e.hhists().forEach(function(e,t){var i,o,s,c,h,u,d;for(i=0,o=e;i<o.length;i++)for(s=o[i],c=s.indexes,h=0,u=s.items;h<u.length;h++)d=u[h],r.hhists=r.hhists||[],Object(l.a)(r.hhists,a.a({},d,{firstBarTime:n.indexOf(c[d.firstBarTime]),lastBarTime:n.indexOf(c[d.lastBarTime])}),t)}),r}function s(e,t){t.forEach(function(t,i){var o,n,r,s,a,l;for(o=0,n=t;o<n.length;o++)for(r=n[o],s=0,a=r.indexes;s<a.length;s++)l=a[s],e.add(l)})}var a,l,c;i.d(t,"a",function(){return c}),t.b=o,t.c=n,t.d=r,a=i(3),l=i(167),c=function(){function e(e,t){var i,o;this.indexes=[],this._horizlines=new Map,this._vertlines=new Map,this._lines=new Map,this._hlines=new Map,this._textmarks=new Map,this._shapemarks=new Map,this._backgrounds=new Map,this._polygons=new Map,this._trendchannels=new Map,this._hhists=new Map,this._hhistsByTimePointIndex=new Map,"data"===e?(i=t,this.indexes=i.indexes,this._horizlines=i.horizlines,this._vertlines=i.vertlines,this._lines=i.lines,this._hlines=i.hlines,this._textmarks=i.textmarks,this._shapemarks=i.shapemarks,this._backgrounds=i.backgrounds,this._polygons=i.polygons,this._trendchannels=i.trendchannels,this._hhists=i.hhists,this._postProcess()):"state"===e&&(o=t,this.indexes=o.indexes||[],Object(l.b)(this._horizlines,o.horizlines,void 0,this.indexes),Object(l.b)(this._vertlines,o.vertlines,void 0,this.indexes),Object(l.b)(this._lines,o.lines,void 0,this.indexes),Object(l.b)(this._hlines,o.hlines,void 0,this.indexes),Object(l.b)(this._textmarks,o.textmarks,void 0,this.indexes),Object(l.b)(this._shapemarks,o.shapemarks,void 0,this.indexes),Object(l.b)(this._backgrounds,o.backgrounds,void 0,this.indexes),Object(l.b)(this._polygons,o.polygons,void 0,this.indexes),Object(l.b)(this._trendchannels,o.trendchannels,void 0,this.indexes),
Object(l.b)(this._hhists,o.hhists,void 0,this.indexes),this._postProcess())}return e.prototype.horizlines=function(){return this._horizlines},e.prototype.vertlines=function(){return this._vertlines},e.prototype.lines=function(){return this._lines},e.prototype.hlines=function(){return this._hlines},e.prototype.textmarks=function(){return this._textmarks},e.prototype.shapemarks=function(){return this._shapemarks},e.prototype.backgrounds=function(){return this._backgrounds},e.prototype.polygons=function(){return this._polygons},e.prototype.trendchannels=function(){return this._trendchannels},e.prototype.hhists=function(){return this._hhists},e.prototype.hhistsByTimePointIndex=function(){return this._hhistsByTimePointIndex},e.prototype._postProcess=function(){this._hhists.size>0&&Object(l.e)(this)},e}()},function(e,t,i){"use strict";function o(e){this.bars=e.bars,this.barSpacing=e.barSpacing,this.barWidth=n.optimalBarWidth(e.barSpacing),this.barLineWidth=Math.max(1,Math.round(this.barWidth)),this.dontDrawOpen=e.dontDrawOpen}var n=i(29),r=i(9).HitTestResult;o.prototype.draw=function(e){var t,i,o;for(e.save(),e.translate(.5,.5),i=0;i<this.bars.length;++i)o=this.bars[i],t!==o.color&&(e.fillStyle=o.color,t=o.color),e.fillRect(Math.round(o.time-this.barLineWidth/2),Math.round(o.high-this.barWidth/2),Math.round(this.barLineWidth),Math.round(o.low-o.high+this.barWidth)),this.barLineWidth<this.barSpacing-1&&(this.dontDrawOpen||e.fillRect(Math.round(o.time-1.5*this.barWidth),Math.round(o.open-this.barWidth/2),Math.round(1.5*this.barWidth),Math.round(this.barWidth)),e.fillRect(Math.round(o.time),Math.round(o.close-this.barWidth/2),Math.round(1.5*this.barWidth),Math.round(this.barWidth)));e.restore()},o.prototype.hitTest=function(e){var t,i,o,s,a=this.bars,l=.5*this.barSpacing;if(0===a.length)return null;if(e.x<a[0].time-l)return null;if(e.x>a[a.length-1].time+l)return null;for(t=null,i=0;i<a.length;++i)if(o=a[i],e.x<=o.time+l){t=o;break}return s=n.selectionTolerance(this.barLineWidth),t&&t.high-s<=e.y&&e.y<=t.low+s?new r(r.REGULAR):null},t.PaneRendererBars=TradingView.PaneRendererBars=o},function(e,t,i){"use strict";function o(e){e.forceLineColor=!1,r.call(this,e),this.color1=e.color1,this.color2=e.color2,this.bottom=e.bottom,this.isSeries=!!e.isSeries,this._simpleMode=e.simpleMode}var n=i(29).coordinateIsValid,r=i(135).PaneRendererLine;inherit(o,r),o.prototype.draw=function(e){var t,i,o,s,a,l,c,h,u,d,p,_;if(0!==this.items.length){for(e.lineCap="square",e.strokeStyle=this.lineColor,e.lineWidth=this.lineWidth,e.lineStyle=this.lineStyle,e.lineWidth=1,t=0;t<this.items.length&&!n(this.items[t].y);)t++;for(i=this.items.length-1;i>=0&&!n(this.items[i].y);)i--;if(!(t>=i)){for(e.translate(.5,.5),o={},s=this.items,a=t;a<=i;a++)l=s[a],c=l.style?l.style.color:this.lineColor,a<i&&s[a+1].style&&(h=s[a+1].style.color,c!==h&&(u=o[h]||[],u.push(l),o[h]=u)),d=o[c]||[],d.push(l),o[c]=d;for(c in o){for(d=o[c],e.beginPath(),p=0,a=0;a<d.length;a++)d[a].style&&d[a].style.color!==c&&(e.moveTo(d[p].x,this.bottom),
this.walkLine(e,d.slice(p,a),!0,this.bottom),p=a);e.moveTo(d[p].x,this.bottom),this.walkLine(e,d.slice(p,d.length),!0,this.bottom),e.closePath(),this.isSeries?(_=e.createLinearGradient(0,0,0,this.bottom),_.addColorStop(0,this.color1),_.addColorStop(1,this.color2),e.fillStyle=_,this._simpleMode=!0):e.fillStyle=c,e.fill()}e.lineWidth=this.lineWidth,r.prototype.draw.call(this,e)}}},t.PaneRendererArea=TradingView.PaneRendererArea=o},function(e,t,i){"use strict";function o(e,t,i,o,n){var r,s,a,l,c;for(this._canvasesMap={},this._lines=e.split(/[^\S\r\n]*(?:\r\n|\r|\n)/),this._font=this._fontStyle(t,i,o,n),this._fontSize=n,r=$("<canvas>"),s=r.get(0).getContext("2d"),s.font=this._font,a=0,l=0;l<this._lines.length;l++)c=s.measureText(this._lines[l]).width,a=Math.max(a,c);this.textImageWidth=a+1,this.textImageHeight=this._lines.length*n}o.prototype.paintTo=function(e,t,i,o,n,r){var s=this._getTextImage(t),a=this._x(i,n,this.textImageWidth),l=this._y(o,r,this.textImageHeight);e.drawImage(s,a-.5,l-.5)},o.prototype._getTextImage=function(e){var t,i,o,n,r;if(this._canvasesMap[e])return this._canvasesMap[e].get(0);for(t=$("<canvas>").attr("width",this.textImageWidth).attr("height",this.textImageHeight),i=t.get(0).getContext("2d"),i.textBaseline="top",i.font=this._font,i.textAlign="center",i.fillStyle=e,o=Math.round(this.textImageWidth/2),n=0,r=0;r<this._lines.length;r++)i.fillText(this._lines[r],o,n),n+=this._fontSize;return this._canvasesMap[e]=t,t.get(0)},o.prototype._x=function(e,t,i){var o=e;switch(t){case"left":break;case"right":o-=i;break;case"center":o-=i/2}return Math.round(o)},o.prototype._y=function(e,t,i){var o=e;switch(t){case"top":break;case"bottom":o-=i;break;case"middle":o-=i/2}return Math.round(o)},o.prototype._fontStyle=function(e,t,i,o){return(e?"bold ":"")+(t?"italic ":"")+o+"px "+i},e.exports=o},function(e,t,i){"use strict";e.exports=function(e,t){var i,o=10,n=e%o;for(n&&(e=e-n+o),i=[];e<=t;e+=o)i.push(e);return i}},function(e,t,i){"use strict";function o(e){this._props=e,this._text="",this._size="12px",this._bold=!1}o.prototype.text=function(){return this._text},o.prototype.setText=function(e){this._text=e},o.prototype.color=function(){return this._props.scalesProperties.textColor.value()},o.prototype.bold=function(){return this._bold},o.prototype.size=function(){return this._size},e.exports=o},function(e,t,i){"use strict";function o(e,t){this.handler=e,this.customId=t}function n(){}var r=i(14).declareClassAsPureInterface;TradingView.WEB_SOCKET_WAS_CONNECTED=!1,n.REBIND_STUDY_STANDALONE_TO_CHILD=1,n.REBIND_STUDY_CHILD_TO_STANDALONE=2,n.prototype.defaultWatchlistSymbols=function(){},n.prototype.defaultResolutions=function(){},n.prototype.supportedSymbolsTypes=function(){},n.prototype.supportedExchangesList=function(){},n.prototype.futuresRegex=function(){},n.prototype.quoteCreateSession=function(e){},n.prototype.quoteDeleteSession=function(e){},n.prototype.quoteSetFields=function(e,t){},n.prototype.quoteAddSymbols=function(e,t){},n.prototype.quoteRemoveSymbols=function(e,t){},
n.prototype.quoteFastSymbols=function(e,t){},n.prototype.depthCreateSession=function(e,t,i){},n.prototype.depthDeleteSession=function(e){},n.prototype.depthSetSymbol=function(e,t){},n.prototype.depthClearSymbol=function(e){},n.prototype.depthSetScale=function(e,t){},n.prototype.chartCreateSession=function(e,t){},n.prototype.chartDeleteSession=function(e){},n.prototype.createSession=function(e,t){},n.prototype.removeSession=function(e){},n.prototype.connected=function(){},n.prototype.connect=function(){},n.prototype.disconnect=function(){},n.prototype.switchTimezone=function(e,t){},n.prototype.resolveSymbol=function(e,t,i,o,n){},n.prototype.createSeries=function(e,t,i,o,n,r,s){},n.prototype.removeSeries=function(e,t,i){},n.prototype.modifySeries=function(e,t,i,o,n,r){},n.prototype.requestMoreData=function(e,t,i,o){},n.prototype.requestMetadata=function(e,t,i){},n.prototype.isCanCreateStudy=function(e,t){},n.prototype.createStudy=function(e,t,i,o,n,r,s){},n.prototype.rebindStudy=function(e,t,i,o,n,r,s,a){},n.prototype.removeStudy=function(e,t,i){},n.prototype.modifyStudy=function(e,t,i,o,n){},n.prototype.createPointset=function(e,t,i,o,n,r,s){},n.prototype.modifyPointset=function(e,t,i,o,n){},n.prototype.removePointset=function(e,t,i){},n.prototype.requestMoreTickmarks=function(e,t,i,o){},n.prototype.requestFirstBarTime=function(e,t,i,o){},n.prototype._invokeHandler=function(e,t){},n.prototype._sendRequest=function(e,t){},n.prototype._onMessage=function(e){},n.prototype._convertTimescaleResponse=function(e){},n.prototype._dispathNotification=function(e){},n.prototype._invokeNotificationHandler=function(e,t,i){},n.prototype._notifySessions=function(e){},n.prototype.unpack=function(e){},n.prototype.searchSymbols=function(e,t,i,o,n,r,s,a,l){},n.prototype.serverTimeOffset=function(){},n.prototype.getMarks=function(e,t,i,o,n){},n.prototype.getTimescaleMarks=function(e,t,i,o,n){},r(n,"ChartApiInterface"),e.exports.HandlerInfo=o,e.exports.ChartApiInterface=n},function(e,t,i){"use strict";function o(){a.call(this)}function n(e,t){this._constructor="LineToolFibSpeedResistanceArcs";var n=t||this.createPropertiesObject("linetoolfibwedge");r.call(this,e,n),e._fibWedgeLabelsCache||(e._fibWedgeLabelsCache=new o),i.e(0).then(function(e){var t=i(820).FibWedgePaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var r=i(0).LineDataSource,s=i(17),a=i(71),l=i(1).propertyPages;inherit(o,a),o.prototype.levelsCount=function(){return n.LevelsCount},inherit(n,r),n.LevelsCount=11,n.prototype.getCache=function(){return this._model._fibWedgeLabelsCache||(this._model._fibWedgeLabelsCache=new o),this._model._fibWedgeLabelsCache},n.prototype.pointsCount=function(){return 3},n.prototype.title=function(){return"Fib Wedge"},n.prototype.setPoint=function(e,t){var i,o,n,s,a,l,c;r.prototype.setPoint.call(this,e,t),this._recursiveGuard||(this._recursiveGuard=!0,2===e?(i=this.pointToScreenPoint(this._points[0])[0],o=this.pointToScreenPoint(this._points[1])[0],n=this.pointToScreenPoint(this._points[2])[0],
s=n.subtract(i).length(),a=o.subtract(i).normalized(),o=i.add(a.scaled(s)),l=this.screenPointToPoint(o),this._properties.points[1].price.setValue(l.price),this._properties.points[1].bar.setValue(l.index)):(i=this.pointToScreenPoint(this._points[0])[0],o=this.pointToScreenPoint(this._points[1])[0],n=this.pointToScreenPoint(this._points[2])[0],c=o.subtract(i).length(),a=n.subtract(i).normalized(),n=i.add(a.scaled(c)),l=this.screenPointToPoint(n),this._properties.points[2].price.setValue(l.price),this._properties.points[2].bar.setValue(l.index)),this._recursiveGuard=!1)},n.prototype.addPoint=function(e){var t,i,o,n,s,a,l,c;return 2===this._points.length&&(t=this.pointToScreenPoint(this._points[0])[0],i=this.pointToScreenPoint(this._points[1])[0],o=this.pointToScreenPoint(e)[0],n=i.subtract(t).length(),s=o.subtract(t).normalized(),o=t.add(s.scaled(n)),a=this.ownerSource().firstValue(),l=this.priceScale().coordinateToPrice(o.y,a),c=Math.round(this._model.timeScale().coordinateToIndex(o.x)),e={index:c,price:l}),r.prototype.addPoint.call(this,e)},n.prototype.processErase=function(e,t){var i="level"+t,o=this.properties()[i].visible;e.setProperty(o,!1,"Erase level line")},n.prototype.createPropertiesObject=function(e,t,i){return new s(e,t,i,{range:[1,11]})},n.prototype.getInputsPropertyPage=function(){return null},n.prototype.getStylesPropertyPage=function(){return l.LineToolFibWedgeStylesPropertyPage},t.LineToolFibWedge=n},function(e,t,i){"use strict";var o,n,r,s,a;Object.defineProperty(t,"__esModule",{value:!0}),i.d(t,"LineToolVertLineTimeAxisView",function(){return a}),o=i(3),n=i(173),r=i(174),s=i(175),a=function(e){function t(t,i){var o=e.call(this)||this;return o._source=t,o._model=i,o._invalidated=!0,o._renderer=new r.TimeAxisViewRenderer,o}return o.c(t,e),t.prototype.update=function(){this._invalidated=!0},t.prototype.updateImpl=function(){var e,t;this._model.timeScale().isEmpty()||0!==this._source.points().length&&(this._text="",this._background=this._source.properties().linecolor.value(),e=this._source.points()[0].index,this._coordinate=this._model.timeScale().indexToCoordinate(e),t=this._model.timeScale().indexToUserTime(e),t&&(this._text=new s.AbbreviatedDateTimeFormatter(this._model.mainSeries().isDWM()).format(t)),this._invalidated=!1)},t.prototype.renderer=function(){return this._invalidated&&this.updateImpl(),this._renderer.setData({width:this._model.timeScale().width(),text:this._text,coordinate:this._coordinate,color:this.color(),background:this._background,visible:!0}),this._renderer},t}(n.TimeAxisView)},function(e,t,i){"use strict";(function(e){function o(e,t){this._pane=e,this._timeScale=t}function n(e){this._line=e}function r(e,t){this._adapter=new n(this),this._constructor="LineToolExecution";var o=t||new l("linetoolexecution");this.customization={forcePriceAxisLabel:!1,disableSelection:!0,disableErasing:!0},s.call(this,e,o),i.e(0).then(function(e){var t=i(896).ExecutionPaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}
var s=i(0).LineDataSource,a=i(130),l=i(2).DefaultProperty,c=i(20).PlotRowSearchMode;o.prototype._cachedByBarIndexOrderedExecutions={},o.recreateOrderedByBarsSourcesCache=function(e){var t,i,n,r,s;for(o.clearOrderedByBarsSourcesCache(),t=o.prototype,i=e.orderedSources(),n=0;n<i.length;++n)r=i[n],r._adapter&&void 0!==r._adapter._index&&(s=t._cachedByBarIndexOrderedExecutions[r._adapter._index],t._cachedByBarIndexOrderedExecutions[r._adapter._index]=s||[],t._cachedByBarIndexOrderedExecutions[r._adapter._index].push(r))},o.clearOrderedByBarsSourcesCache=function(){o.prototype._cachedByBarIndexOrderedExecutions={}},o.prototype.getXYCoordinate=function(e,t,i){var o,n,s,a,l,h,u,d,p,_,f=0,m=e.getDirection(),g="buy"===m,y=this._pane.model().mainSeries();if(y.bars&&(o=g?10:-10,null!==(n=y.bars().search(i,c.NearestLeft))&&(i=n.index,s=g?n.value[TradingView.LOW_PLOT]:n.value[TradingView.HIGH_PLOT],a=y.priceScale(),l=y.firstValue(),f=a.priceToCoordinate(s,l)+o)),e._index=i,h=t.visibleBars(),!isFinite(i)||null===h||i>h.lastBar()||i<h.firstBar())return{x:-1,y:-1};for(u=this._cachedByBarIndexOrderedExecutions[i]||this._pane.orderedSources(),d=u.length-1;d>=0;--d)if((p=u[d])instanceof r&&p._adapter._index===i&&p._adapter.getDirection()===m){if(p===e._line)break;_=p._adapter._height(),f=g?f+_:f-_}return{x:t.indexToCoordinate(i),y:f}},n.prototype._height=function(){var e,t=this.getArrowHeight(),i=this.getArrowSpacing();return this.getText()&&a.fontHeight(this.getFont()),e=10,t+i+0+e},n.prototype.getIndex=function(){return this._line._model.timeScale().baseIndex()-this._line.points()[0].index},n.prototype.setIndex=function(e){var t,i=this._line._model.timeScale(),o=i.baseIndex(),n=o-Math.abs(e);return this._line.startMoving(this._line.points()[0]),t=TradingView.merge({},this._line.points()[0]),t.index=n,this._line.move(t),this._line.endMoving(),this},n.prototype.getTime=function(){return this._unixtime},n.prototype.setTime=function(e){var t=this._line._model.mainSeries();return this._unixtime=ChartApiInstance.alignTimePoint?ChartApiInstance.alignTimePoint(e,t.interval(),t.symbolInfo()):e,this._line.restorePoints([{offset:0,price:this.getPrice(),time_t:this._unixtime}],[]),this._line.createServerPoints(),this},n.prototype.getPrice=function(){return this._line.points().length>0?this._line.points()[0].price:this._line._timePoint.length>0?this._line._timePoint[0].price:void 0},n.prototype.setPrice=function(e){return this._line.points().length>0&&(this._line.points()[0].price=e),this._line._timePoint.length>0&&(this._line._timePoint[0].price=e),this},n.prototype.getText=function(){return this._line.properties().text.value()},n.prototype.setText=function(e){return this._line.properties().text.setValue(e||""),this._line.updateAllViewsAndRedraw(),this},n.prototype.getArrowHeight=function(){return this._line.properties().arrowHeight.value()},n.prototype.setArrowHeight=function(e){return this._line.properties().arrowHeight.setValue(e||5),this},n.prototype.getArrowSpacing=function(){return this._line.properties().arrowSpacing.value()},
n.prototype.setArrowSpacing=function(e){return this._line.properties().arrowSpacing.setValue(e||1),this},n.prototype.getDirection=function(){return this._line.properties().direction.value()},n.prototype.setDirection=function(e){return this._line.properties().direction.setValue(e||"buy"),this},n.prototype.getArrowColor=function(){return a.getColorFromProperties(this._line.properties().arrowColor,this._line.properties().arrowTransparency)},n.prototype.setArrowColor=function(e){return a.setColorToProperties(e,this._line.properties().arrowColor,this._line.properties().arrowTransparency),this},n.prototype.getTextColor=function(){return a.getColorFromProperties(this._line.properties().textColor,this._line.properties().textTransparency)},n.prototype.setTextColor=function(e){return a.setColorToProperties(e,this._line.properties().textColor,this._line.properties().textTransparency),this},n.prototype.getFont=function(){return a.getFontFromProperties(this._line.properties().fontFamily,this._line.properties().fontSize,this._line.properties().fontBold,this._line.properties().fontItalic)},n.prototype.setFont=function(e){return a.setFontToProperties(e,this._line.properties().fontFamily,this._line.properties().fontSize,this._line.properties().fontBold,this._line.properties().fontItalic),this},n.prototype.setTooltip=function(e){return null==e?e="":e+="",this._line.properties().tooltip.setValue(e),this},n.prototype.getTooltip=function(){return this._line.properties().tooltip.value()},n.prototype.remove=function(){this._line._model.removeSource(this._line),delete this._line},inherit(r,s),r.POINTS_COUNT=1,r.skipMagnetting=!0,r.prototype.pointsCount=function(){return r.POINTS_COUNT},r.prototype.title=function(){return"Execution"},r.prototype.hasContextMenu=function(){return!1},r.prototype.state=function(){return null},r.prototype.updateAllViews=function(){return this._isVisible()?s.prototype.updateAllViews.call(this):null},r.prototype.priceAxisViews=function(e,t){return this._isVisible()?s.prototype.priceAxisViews.call(this,e,t):null},r.prototype._isVisible=function(){return this._model.properties().tradingProperties.showExecutions.value()},r.prototype.paneViews=function(t){return TradingView.printing&&!e.enabled("snapshot_trading_drawings")?null:this._model.properties().tradingProperties.showExecutions.value()?s.prototype.paneViews.call(this,t):null},r.prototype.userEditEnabled=function(){return!1},r.prototype.showInObjectTree=function(){return!1},r.prototype.getInputsPropertyPage=function(){return null},t.ExecutionsPositionController=o,t.LineToolExecution=r}).call(t,i(4))},function(e,t,i){"use strict";function o(e,t,i){return new l(e,t,i)}var n,r,s,a,l;t.a=o,n=i(3),r=i(14),i.n(r),s=i(17),a=i.n(s),l=function(e){function t(t,i,o){return e.call(this,t,i,o,{names:["width","color","visible"]})||this}return n.c(t,e),t.prototype._iterateLevels=function(e,t){var i,o,n;for(i in e.levels)if(e.levels[i]&&Object(r.isSameType)(e.levels[i],t.typecheck())){o=t.tpl()
;for(n in this._map.names)this._map.names.hasOwnProperty(n)&&(o=t.fill(n,this._map.names[n],e.levels[i],o));e.levels[i]=o}return e},t}(a.a)},function(e,t,i){"use strict";function o(e,t){this._constructor="LineTool5PointsPattern";var o=t||new r("linetool5pointspattern");n.call(this,e,o),i.e(0).then(function(e){var t=i(821).Pattern5PaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var n=i(0).LineDataSource,r=i(2).DefaultProperty,s=i(275).DateTimeFormatter,a=i(1).propertyPages;inherit(o,n),o.prototype.pointsCount=function(){return 5},o.prototype.title=function(){return"XABCD Pattern"},o.prototype._tooltipFieldsHash={time0:{title:"Date 1",value:null},price0:{title:"Price 1",value:null},time1:{title:"Date 2",value:null},price1:{title:"Price 2",value:null},time2:{title:"Date 3",value:null},price2:{title:"Price 3",value:null},time3:{title:"Date 4",value:null},price3:{title:"Price 4",value:null},time4:{title:"Date 5",value:null},price4:{title:"Price 5",value:null}},o.prototype._updateTooltip=function(){var e,t,i,o,n,r=this._tooltipFieldsHash,a=this.points().m_values;a[0]&&(t=this._model.timeScale().indexToUserTime(a[0].index),r.time0.value=t?new s(this._model.mainSeries().isDWM()).format(t):0,r.price0.value=this._model.mainSeries()._formatter.format(a[0].price)),a[1]&&(e=this._model.timeScale().indexToUserTime(a[1].index),r.time1.value=e?new s(this._model.mainSeries().isDWM()).format(e):0,r.price1.value=this._model.mainSeries()._formatter.format(a[1].price)),a[2]&&(i=this._model.timeScale().indexToUserTime(a[2].index),r.time2.value=i?new s(this._model.mainSeries().isDWM()).format(i):0,r.price2.value=this._model.mainSeries()._formatter.format(a[2].price)),a[3]&&(o=this._model.timeScale().indexToUserTime(a[3].index),r.time3.value=o?new s(this._model.mainSeries().isDWM()).format(o):0,r.price3.value=this._model.mainSeries()._formatter.format(a[3].price)),a[4]&&(n=this._model.timeScale().indexToUserTime(a[4].index),r.time4.value=e?new s(this._model.mainSeries().isDWM()).format(n):0,r.price4.value=this._model.mainSeries()._formatter.format(a[4].price))},o.prototype.tooltip=function(){return this._updateTooltip(),this._formatTooltip()},o.prototype.getStylesPropertyPage=function(){return a.LineToolLineTool5PointsPatternStylesPropertyPage},t.LineTool5PointsPattern=o},function(e,t,i){"use strict";var o,n,r;Object.defineProperty(t,"__esModule",{value:!0}),i.d(t,"DateTimeFormatter",function(){return r}),o=i(110),n=i(136),r=function(){function e(e){void 0===e&&(e=!1),this._dwm=e}return e.prototype.format=function(e){var t=(new n.DateFormatter).format(e);return this._dwm||(t+=" "+(new o.TimeFormatter).format(e)),t},e.prototype.formatLocal=function(e){var t=(new n.DateFormatter).formatLocal(e);return this._dwm||(t+=" "+(new o.TimeFormatter).formatLocal(e)),t},e}()},function(e,t,i){"use strict";function o(e,t){this._constructor="LineToolNote";var n=t||new a("linetoolnote");n.hasChild("text")||n.addChild("text",new s($.t("Text"))),n.addExclusion("text"),r.call(this,e,n),this.version=o.version,
i.e(0).then(function(e){var t=i(918).NotePaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}function n(e,t){var i=t||new a("linetoolnoteabsolute");i.locked.value()||i.locked.setValue(!0),o.call(this,e,i)}var r=i(0).LineDataSource,s=i(12),a=i(2).DefaultProperty,l=i(1).propertyPages;inherit(o,r),o.TOOLTIP_WIDTH=300,o.TOOLTIP_PADDING=10,o.TOOLTIP_LINESPACING=5,o.version=1,o.prototype.pointsCount=function(){return 1},o.prototype.title=function(){return $.t("Note")},o.prototype.applyTemplate=function(e){delete e.locked,delete e.text,r.prototype.applyTemplate.call(this,e)},o.prototype.getTooltipWidth=function(){return o.TOOLTIP_WIDTH},o.prototype.getTooltipPadding=function(){return o.TOOLTIP_PADDING},o.prototype.getTooltipLineSpacing=function(){return o.TOOLTIP_LINESPACING},inherit(n,o),n.prototype.title=function(){return $.t("Anchored Note")},o.prototype.state=function(e){var t=r.prototype.state.call(this,e);return e&&(t.state.fixedSize=!1),t},o.prototype.getStylesPropertyPage=function(){return l.LineToolNotePropertyPage},t.LineToolNote=o,t.LineToolNoteAbsolute=n},function(e,t,i){"use strict";function o(e,t){this._constructor="LineToolText";var o=t||new l("linetooltext");o.hasChild("text")||o.addChild("text",new a($.t("Text"))),o.addExclusion("text"),r.call(this,e,o),this._timeScale=e.timeScale(),this._barSpacing=e.timeScale().barSpacing(),i.e(0).then(function(e){var t=i(351).TextPaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}function n(e,t){var i=t||new l("linetooltextabsolute");i.locked.value()||i.locked.setValue(!0),o.call(this,e,i)}var r=i(0).LineDataSource,s=i(30).DataSource,a=i(12),l=i(2).DefaultProperty,c=i(1).propertyPages;inherit(o,r),o.MIN_WIDTH=100,o.prototype.setPoint=function(e,t){var i,n,r=this.properties();if(0===e&&r.wordWrapWidth&&r.wordWrapWidth.value()){if(i=r.locked&&r.locked.value()?this.fixedPoints()[0].x:this._timeScale.indexToCoordinate(this.points()[0].index),n=this._timeScale.indexToCoordinate(t.index)-i-~~(r.fontsize.value()/6),!isFinite(n))return;r.wordWrapWidth.setValue(Math.max(o.MIN_WIDTH,n))}},o.prototype.pointsCount=function(){return 1},o.prototype.title=function(){return $.t("Text",{context:"tool"})},o.prototype.setPriceScale=function(e){s.prototype.setPriceScale.call(this,e),e&&e.priceRange()&&(this._priceDencity=e.height()/e.priceRange().length(),this._isPriceDencityLog=e.isLog())},o.prototype.restoreSize=function(){this._barSpacing=this._model.timeScale().barSpacing(),this._priceDencity=this.priceScale().height()/this.priceScale().priceRange().length(),this.updateAllViews(),this._model.updateSource(this)},o.prototype.applyTemplate=function(e){delete e.locked,delete e.text,r.prototype.applyTemplate.call(this,e)},inherit(n,o),n.prototype.title=function(){return $.t("Anchored Text")},o.prototype.state=function(e){var t=r.prototype.state.call(this,e);return e&&(t.state.fixedSize=!1),t},o.prototype.getInputsPropertyPage=function(){return null},o.prototype.getStylesPropertyPage=function(){
return c.LineToolTextStylesPropertyPage},t.LineToolText=o,t.LineToolTextAbsolute=n},function(e,t,i){"use strict";function o(e){return e.description||""}Object.defineProperty(t,"__esModule",{value:!0}),t.getTranslatedSymbolDescription=o},function(e,t,i){"use strict";var o,n,r,s,a,l,c,h,u,d;Object.defineProperty(t,"__esModule",{value:!0}),i.d(t,"SeriesPriceAxisView",function(){return d}),o=i(3),n=i(7),i.n(n),r=i(21),s=i(59),a=i(4),i.n(a),l=i(39),c=a.enabled("countdown"),h=a.enabled("price_scale_always_last_bar_value"),u=[l.STYLE_BARS,l.STYLE_CANDLES,l.STYLE_LINE,l.STYLE_AREA,l.STYLE_HOLLOW_CANDLES,l.STYLE_HEIKEN_ASHI],d=function(e){function t(t,i){var o=e.call(this)||this;return o._source=t,o._data=i,o}return o.c(t,e),t.prototype._getSource=function(){return this._source},t.prototype._getData=function(){return this._data},t.prototype._isCountdownEnabled=function(){return c},t.prototype._countdownText=function(){var e,t,i,o,s,a,l,c,h,u,d;return this._source.isDWM()?"":(e=1e3*Object(n.ensure)(Object(n.ensureNotNull)(this._source.data().bars().last()).value[0]),t=1e3*this._source.serverTimeOffset(),i=r.Interval.parse(this._source.interval()),o=i.multiplier()||0,s=i.isSeconds()?o:60*o,a=e.valueOf()+1e3*s,l=(new Date).valueOf()+t,(c=Math.round((a-l)/1e3))<=0?"":(c=Math.min(c,s),h=null,c>=3600&&(h=this._addLeadingZero(Math.floor(c/3600))),c%=3600,u=this._addLeadingZero(Math.floor(c/60)),c%=60,d=this._addLeadingZero(Math.floor(c)),null!==h?h+":"+u+":"+d:u+":"+d))},t.prototype._updateRendererData=function(e){var t,i,o,n,r,s,a,d;e.visible=!1,t=this._source.properties(),i=this._data.model.properties().scalesProperties.showSeriesLastValue.value(),o=c&&-1!==u.indexOf(t.style.value())&&t.showCountdown.value(),(i||o)&&(n=this._source.lastValueData(void 0,h),n.noData||t.style.value()===l.STYLE_HEIKEN_ASHI&&t.haStyle.showRealLastPrice.value()&&(r=this._source.lastValueData(void 0,!1),s=this._source.lastValueData(void 0,!0),!r.noData&&!s.noData&&r.index===s.index)||(a=i?n.text:"",d=o?this._countdownText():"",0===a.length?(e.text=d,e.secondLine=""):(e.text=a,e.secondLine=d),0===a.length&&0===d.length||(e.visible=!0,e.background=this._source.priceLineColor(n.color),e.color=this.generateTextColor(e.background),e.coordinate=n.coordinate,e.floatCoordinate=n.floatCoordinate)))},t.prototype._addLeadingZero=function(e){return("0"+e).slice(-2)},t}(s.a)},function(e,t,i){"use strict";function o(e,t){this.m_series=e,this.m_model=t,this.m_bars=[],this._invalidated=!0,this._isMarkersEnabled=C.enabled("source_selection_markers")}function n(e,t){o.call(this,e,t)}function r(e,t){o.call(this,e,t)}function s(e,t){o.call(this,e,t)}function a(e,t){o.call(this,e,t)}function l(e,t){this.m_series=e,this.m_model=t,this.m_items=[]}function c(e,t){l.call(this,e,t),this._invaidated=!0}function h(e,t){l.call(this,e,t),this._invaidated=!0}function u(e,t){l.call(this,e,t),this._invaidated=!0,this._renderer=new b}function d(e,t){this._source=e,this._model=t,this._points=[new p(0,0)],this._invalidated=!0,this._renderer=new S;var i={cursorType:L.VerticalResize,
pressedMouseMoveHandler:function(e){var t,i,o,n,r=this._source.priceScale();null!==r&&(t=this._source.properties().baselineStyle,i=r.height(),o=100-e.y/i*100,n=o<0?0:Math.round(10*o)/10,t.baseLevelPercentage.setValue(Math.max(Math.min(n,100),0)))}.bind(this)};this._renderer.setHitTest(new f(f.CUSTOM_MOVE,i))}var p=i(6).Point,_=i(192).SelectionRenderer,f=i(9).HitTestResult,m=i(264).PaneRendererBars,g=i(135).PaneRendererLine,y=i(265).PaneRendererArea,v=i(211).PaneRendererCandles,b=i(716).PaneRendererBaseline,S=i(84).HorizontalLineRenderer,w=i(50).CompositeRenderer,T=i(267),P=i(24),x=i(20).PlotRowSearchMode,C=i(4),L=i(281).PaneCursorType;o.prototype.update=function(){this._invalidated=!0},o.prototype._updateImpl=function(){var e,t,i,o,n,r,s,a,l,c,h,u,d,_,m=this;if(this.m_bars=[],!this.m_model.timeScale().isEmpty()&&!this.m_series.priceScale().isEmpty()&&null!==(e=this.m_model.timeScale().visibleBars())&&0!==this.m_series.bars().size()){for(t=this.m_series.nearestIndex(e.firstBar(),x.NearestRight),i=this.m_series.nearestIndex(e.lastBar(),x.NearestLeft);t<=i&&null===this.m_series.bars().valueAt(t);t++);if(!(t>i)&&(e=this.m_series.bars().range(t,i),o=this.m_series.priceScale(),n=this.m_series.barColorer(),r={},e.each(function(e,t){var i,o;void 0!==t[TradingView.OPEN_PLOT]&&void 0!==t[TradingView.HIGH_PLOT]&&void 0!==t[TradingView.LOW_PLOT]&&void 0!==t[TradingView.CLOSE_PLOT]&&(i={},i.time=Math.round(e),i.open=t[TradingView.OPEN_PLOT],i.high=t[TradingView.HIGH_PLOT],i.low=t[TradingView.LOW_PLOT],i.close=t[TradingView.CLOSE_PLOT],r.value=t,o=t[TradingView.STYLE_PLOT]?t[TradingView.STYLE_PLOT]:n.barStyle(e,!1,r),t[TradingView.STYLE_PLOT]=o,r.previousValue=t,i.color=o.barColor,i.borderColor=o.barBorderColor,i.wickColor=o.barWickColor,i.hollow=o.isBarHollow,m.m_bars.push(i))},this),0!==this.m_bars.length&&(s=this.m_bars[0].close,o.barPricesToCoordinates(this.m_bars,s)),this.m_model.timeScale().barIndexesToCoordinates(this.m_bars),this.m_series===this.m_model.selectedSource()))for(a=T(t,i),this._selectionData={points:[]},this._selectionData.hittestResult=f.REGULAR,l=0;l<a.length;l++)c=a[l],null!==(h=this.m_series.bars().valueAt(c))&&(u=.5*(h[TradingView.OPEN_PLOT]+h[TradingView.CLOSE_PLOT]),d=this.m_model.timeScale().indexToCoordinate(c),_=this.m_series.priceScale().priceToCoordinate(u,s),this._selectionData.points.push(new p(d,_)))}},o.prototype.items=function(){return this.m_bars},o.prototype.dump=function(){var e={};return e.bars=this.m_bars,e},inherit(n,o),n.prototype.renderer=function(){var e,t;return this._invalidated&&(this._updateImpl(),this._invalidated=!1),e={},e.bars=this.m_bars,e.barSpacing=this.m_model.timeScale().barSpacing(),e.dontDrawOpen=this.m_series.properties().barStyle.dontDrawOpen.value(),t=new w,t.append(new m(e)),this.m_series===this.m_model.selectedSource()&&this._isMarkersEnabled&&t.append(new _(this._selectionData)),t},inherit(r,o),r.prototype.renderer=function(){var e,t;return this._invalidated&&(this._updateImpl(),this._invalidated=!1),e={},e.bars=this.m_bars,
e.barSpacing=this.m_model.timeScale().barSpacing(),e.drawWick=this.m_series.properties().candleStyle.drawWick.value(),e.drawBorder=this.m_series.properties().candleStyle.drawBorder.value(),e.borderColor=this.m_series.properties().candleStyle.borderColor.value(),e.wickColor=this.m_series.properties().candleStyle.wickColor.value(),t=new w,t.append(new v(e)),this.m_series===this.m_model.selectedSource()&&this._isMarkersEnabled&&t.append(new _(this._selectionData)),t},inherit(s,o),s.prototype.renderer=function(){var e,t;return this._invalidated&&(this._updateImpl(),this._invalidated=!1),e={},e.bars=this.m_bars,e.barSpacing=this.m_model.timeScale().barSpacing(),e.drawWick=this.m_series.properties().haStyle.drawWick.value(),e.drawBorder=this.m_series.properties().haStyle.drawBorder.value(),e.borderColor=this.m_series.properties().haStyle.borderColor.value(),e.wickColor=this.m_series.properties().haStyle.wickColor.value(),t=new w,t.append(new v(e)),this.m_series===this.m_model.selectedSource()&&this._isMarkersEnabled&&t.append(new _(this._selectionData)),t},inherit(a,o),a.prototype.renderer=function(){var e,t;return this._invalidated&&(this._updateImpl(),this._invalidated=!1),e={},e.bars=this.m_bars,e.barSpacing=this.m_model.timeScale().barSpacing(),e.drawWick=this.m_series.properties().hollowCandleStyle.drawWick.value(),e.drawBorder=this.m_series.properties().hollowCandleStyle.drawBorder.value(),e.borderColor=this.m_series.properties().hollowCandleStyle.borderColor.value(),e.wickColor=this.m_series.properties().hollowCandleStyle.wickColor.value(),t=new w,t.append(new v(e)),this.m_series===this.m_model.selectedSource()&&this._isMarkersEnabled&&t.append(new _(this._selectionData)),t},l.prototype.update=function(){var e,t,i,o,n,r,s,a,l,c,h,u,d,_;if(this.m_items=[],!this.m_model.timeScale().isEmpty()&&this.m_series.priceScale()&&!this.m_series.priceScale().isEmpty()&&null!==(e=this.m_model.timeScale().visibleBars())&&0!==this.m_series.bars().size()&&(t=this.m_series.nearestIndex(e.firstBar(),x.NearestRight),i=this.m_series.nearestIndex(e.lastBar(),x.NearestLeft),e=this.m_series.bars().range(t,i),n=this.m_series.priceScale(),r={color:this.m_series.properties().lineStyle.color.value()},s=this.m_series.barFunction(),e.each(function(e,t){var i,n=s(t);return void 0!==n&&null!==n&&(void 0===o&&(o=n),i=new p(e,n),i.style=r,this.m_items.push(i),!1)}.bind(this)),n.pointsArrayToCoordinates(this.m_items,o),this.m_model.timeScale().indexesToCoordinates(this.m_items),this.m_series===this.m_model.selectedSource()))for(a=T(t,i),this._selectionData={points:[]},this._selectionData.hittestResult=f.REGULAR,l=0;l<a.length;l++)c=a[l],h=this.m_series.data().valueAt(c),u=s(h),d=this.m_model.timeScale().indexToCoordinate(c),_=this.m_series.priceScale().priceToCoordinate(u,o),this._selectionData.points.push(new p(d,_))},inherit(c,l),c.prototype.update=function(){this._invalidated=!0},c.prototype.renderer=function(){var e,t,i,o;return this._invalidated&&(l.prototype.update.call(this),this._invalidated=!1),e=this.m_series.properties().lineStyle,t={
barSpacing:this.m_model.timeScale().barSpacing(),items:this.m_items,lineColor:e.color.value(),lineStyle:e.linestyle.value(),withMarkers:e.styleType.value()===TradingView.Series.STYLE_LINE_TYPE_MARKERS,withSteps:e.styleType.value()===TradingView.Series.STYLE_LINE_TYPE_STEP,lineWidth:e.linewidth.value(),simpleMode:!0},i=new g(t),this.m_series===this.m_model.selectedSource()?(o=new w,o.append(i),this._isMarkersEnabled&&o.append(new _(this._selectionData))):o=i,o},inherit(h,l),h.prototype.update=function(){this._invalidated=!0},h.prototype.renderer=function(){var e,t,i;return this._invalidated&&(l.prototype.update.call(this),this._invalidated=!1),e={},e.simpleMode=!1,e.barSpacing=this.m_model.timeScale().barSpacing(),e.items=this.m_items,e.lineColor=this.m_series.properties().areaStyle.linecolor.value(),e.lineStyle=this.m_series.properties().areaStyle.linestyle.value(),e.lineWidth=this.m_series.properties().areaStyle.linewidth.value(),t=this.m_series.properties().areaStyle.transparency.value(),e.isSeries=!0,e.color1=P.generateColor(this.m_series.properties().areaStyle.color1.value(),t),e.color2=P.generateColor(this.m_series.properties().areaStyle.color2.value(),t),e.bottom=this.m_series.priceScale().height(),i=new w,i.append(new y(e)),this.m_series===this.m_model.selectedSource()&&this._isMarkersEnabled&&i.append(new _(this._selectionData)),i},inherit(u,l),u.prototype.update=function(){this._invalidated=!0},u.prototype._updateImpl=function(){var e,t;l.prototype.update.call(this),e=this.m_series.properties().baselineStyle,t=e.transparency.value(),this._topFillColor1=P.generateColor(e.topFillColor1.value(),t),this._topFillColor2=P.generateColor(e.topFillColor2.value(),t),this._bottomFillColor1=P.generateColor(e.bottomFillColor1.value(),t),this._bottomFillColor2=P.generateColor(e.bottomFillColor2.value(),t),this._topLineColor=e.topLineColor.value(),this._bottomLineColor=e.bottomLineColor.value(),this._topLineWidth=e.topLineWidth.value(),this._bottomLineWidth=e.bottomLineWidth.value(),this._barSpacing=this.m_model.timeScale().barSpacing(),this._bottom=this.m_series.priceScale().height(),this._baseLevelCoordinate=Math.round(this._bottom*(Math.abs(100-e.baseLevelPercentage.value())/100))},u.prototype.renderer=function(){this._invalidated&&(this._updateImpl(),this._invalidated=!1),this._renderer.setData({items:this.m_items,topFillColor1:this._topFillColor1,topFillColor2:this._topFillColor2,bottomFillColor1:this._bottomFillColor1,bottomFillColor2:this._bottomFillColor2,topLineColor:this._topLineColor,bottomLineColor:this._bottomLineColor,topLineWidth:this._topLineWidth,bottomLineWidth:this._bottomLineWidth,lineStyle:CanvasEx.LINESTYLE_SOLID,barSpacing:this._barSpacing,baseLevelCoordinate:this._baseLevelCoordinate,bottom:this._bottom});var e=new w;return e.append(this._renderer),this.m_series===this.m_model.selectedSource()&&e.append(new _(this._selectionData)),e},d.prototype.update=function(){this._invalidated=!0},d.prototype._updateImpl=function(e){
var t=this._source.properties().baselineStyle,i=Math.abs(100-t.baseLevelPercentage.value());this._visible=!0,this._points=[new p(0,Math.round(e*(i/100)))],this._color=t.baselineColor.value()},d.prototype.renderer=function(e){return this._invalidated&&(this._updateImpl(e),this._invalidated=!1),this._renderer.setData({visible:this._visible,width:this._model.timeScale().width(),height:e,points:this._points,color:this._color,linewidth:1,linestyle:CanvasEx.LINESTYLE_SPARSE_DOTTED}),this._renderer},t.SeriesBarsPaneView=n,t.SeriesCandlesPaneView=r,t.SeriesHollowCandlesPaneView=a,t.SeriesLinePaneView=c,t.SeriesAreaPaneView=h,t.SeriesHeikenAshiPaneView=s,t.SeriesBaselinePaneView=u,t.SeriesBaselineLinePaneView=d},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i.d(t,"PaneCursorType",function(){return o});var o;!function(e){e[e.Default=0]="Default",e[e.Pointer=1]="Pointer",e[e.Eraser=2]="Eraser",e[e.Dot=3]="Dot",e[e.Grabbing=4]="Grabbing",e[e.ZoomIn=5]="ZoomIn",e[e.VerticalResize=6]="VerticalResize"}(o||(o={}))},function(e,t,i){"use strict";var o,n,r,s,a,l,c,h,u,d,p,_;Object.defineProperty(t,"__esModule",{value:!0}),o=i(3),n=i(8),r=i.n(n),s=i(7),a=i(15),l=i.n(a),c=i(37),h=i(5),u=Object(h.getLogger)("ChartApi.AbstractSession"),d="",p=function(){function e(e,t,i){this._isConnected=new l.a(!1),this._state=0,this._isConnectForbidden=!1,this._sessionId=d,this._sessionIdChanged=new r.a,this._chartApi=e,this._sessionPrefix=t,this._shouldReconnectAfterCriticalError=i}return e.prototype.destroy=function(){this._logNormal("Destroying session"),this._isConnected.unsubscribe(),this.disconnect(),this._sessionIdChanged.destroy(),delete this._chartApi,this._logNormal("Session has been destroyed")},e.prototype.isConnected=function(){return this._isConnected},e.prototype.sessionId=function(){return this._sessionId},e.prototype.onSessionIdChanged=function(){return this._sessionIdChanged},e.prototype.connect=function(){0===this._state&&(Object(s.assert)(!this._isConnectForbidden,"Cannot call connect because it is forbidden at this moment"),this._setSessionId(this._sessionPrefix+"_"+Object(c.randomHash)()),this._logNormal("Connecting session - wait until transport stay connected"),this._state=1,this._chartApi.createSession(this._sessionId,this))},e.prototype.disconnect=function(){var e=this;0!==this._state&&(Object(s.assert)(this._sessionId!==d,"sessionId must not be invalid"),this._logNormal("Disconnecting session..."),this._forbidConnectWhile(function(){e._chartApi.connected()&&e._sendRemoveSession(),e._processDestroyingOnServer()}))},e.prototype.onMessage=function(e){var t,i;switch(e.method){case"connected":return void this._onChartApiConnected();case"disconnected":return void this._onChartApiDisconnected();case"critical_error":return t=e.params[0]+"",i=e.params[1]+"",void this._onCriticalError(t,i)}this._onMessage(e)},e.prototype._getChartApi=function(){return this._chartApi},e.prototype._generateLogMessage=function(e){return"["+this._sessionId+"] "+e},e.prototype._onCriticalError=function(e,t){var i=this
;this._logError("Critical error. Reason="+e+", info="+t+"."),this._forbidConnectWhile(function(){i._processDestroyingOnServer()}),this._shouldReconnectAfterCriticalError?(this._logNormal("Reconnecting after critical error..."),this.connect()):this._logNormal("Reconnecting after critical error skipped")},e.prototype._onChartApiConnected=function(){Object(s.assert)(1===this._state,"Session is not registered"),this._logNormal("Transport is connected. Creating session on the server"),this._sendCreateSession(),this._state=2,this._isConnected.setValue(!0)},e.prototype._onChartApiDisconnected=function(){var e=this;this._logNormal("Transport is disconnected. Reconnecting..."),this._forbidConnectWhile(function(){e._processDestroyingOnServer()}),this.connect()},e.prototype._setSessionId=function(e){var t=this._sessionId;this._logNormal("Changing sessionId: old="+t+", new="+e),this._sessionId=e,this._sessionIdChanged.fire(e,t)},e.prototype._logNormal=function(e){u.logNormal(this._generateLogMessage(e))},e.prototype._logError=function(e){u.logError(this._generateLogMessage(e))},e.prototype._processDestroyingOnServer=function(){this._state=0,this._isConnected.setValue(!1),this._chartApi.removeSession(this._sessionId),this._setSessionId(d)},e.prototype._forbidConnectWhile=function(e){this._isConnectForbidden=!0,e(),this._isConnectForbidden=!1},e}(),i.d(t,"ChartSession",function(){return _}),_=function(e){function t(t,i){void 0===i&&(i=!1);var o=e.call(this,t,"cs",!1)||this;return o._sessionDisabled=!1,o._handler=null,o._criticalError=new r.a,o._disableStatistics=i,o}return o.c(t,e),t.prototype.destroy=function(){this._criticalError.destroy(),this._handler=null,e.prototype.destroy.call(this)},t.prototype.serverTimeOffset=function(){return this._getChartApi().serverTimeOffset()},t.prototype.switchTimezone=function(e){return this._getChartApi().switchTimezone(this.sessionId(),e)},t.prototype.resolveSymbol=function(e,t,i){return this._getChartApi().resolveSymbol(this.sessionId(),e,t,i)},t.prototype.requestFirstBarTime=function(e,t,i){return this._getChartApi().requestFirstBarTime(this.sessionId(),e,t,i)},t.prototype.createSeries=function(e,t,i,o,n,r){return this._getChartApi().createSeries(this.sessionId(),e,t,i,o,n,r)},t.prototype.modifySeries=function(e,t,i,o,n){return this._getChartApi().modifySeries(this.sessionId(),e,t,i,o,n)},t.prototype.removeSeries=function(e,t){return!!this.isConnected().value()&&this._getChartApi().removeSeries(this.sessionId(),e,t)},t.prototype.requestMoreData=function(e,t,i){return this._getChartApi().requestMoreData(this.sessionId(),e,t,i)},t.prototype.requestMoreTickmarks=function(e,t,i){return this._getChartApi().requestMoreTickmarks(this.sessionId(),e,t,i)},t.prototype.requestMetadata=function(e,t){this._getChartApi().requestMetadata(this.sessionId(),e,t)},t.prototype.isCanCreateStudy=function(e){return this._getChartApi().isCanCreateStudy(e)},t.prototype.createStudy=function(e,t,i,o,n,r,s){return this._getChartApi().createStudy(this.sessionId(),e,t,i,o,n,r,s)},
t.prototype.rebindStudy=function(e,t,i,o,n,r,s){return this._getChartApi().rebindStudy(this.sessionId(),e,t,i,o,n,r,s)},t.prototype.modifyStudy=function(e,t,i,o){return this._getChartApi().modifyStudy(this.sessionId(),e,t,i,o)},t.prototype.removeStudy=function(e,t,i){return this._getChartApi().removeStudy(this.sessionId(),e,t,i)},t.prototype.createPointset=function(e,t,i,o,n,r){return this._getChartApi().createPointset(this.sessionId(),e,t,i,o,n,r)},t.prototype.modifyPointset=function(e,t,i,o){return this._getChartApi().modifyPointset(this.sessionId(),e,t,i,o)},t.prototype.removePointset=function(e){return this._getChartApi().removePointset(this.sessionId(),e)},t.prototype.setVisibleTimeRange=function(e,t,i,o){this._getChartApi().setVisibleTimeRange(e,this.sessionId(),t,i,o)},t.prototype.criticalError=function(){return this._criticalError},t.prototype.connect=function(t){void 0===t&&(t=null),null!==t&&(this._handler=t),e.prototype.connect.call(this)},t.prototype.setHandler=function(e){this._handler=e},t.prototype.connected=function(){return this.isConnected().value()&&!this._sessionDisabled},t.prototype.disable=function(){this._sessionDisabled=!0},t.prototype.chartApi=function(){return this._getChartApi()},t.prototype._sendCreateSession=function(){var e=this;Object.keys(this).forEach(function(t){/^(s|st|symbol_)\d+$/.test(t)&&delete e[t]}),this._getChartApi().chartCreateSession(this.sessionId(),this._disableStatistics)},t.prototype._sendRemoveSession=function(){this._getChartApi().chartDeleteSession(this.sessionId())},t.prototype._onMessage=function(e){this._handler&&this._handler(e)},t.prototype._onCriticalError=function(t,i){this._criticalError.fire(t,i),e.prototype._onCriticalError.call(this,t,i)},t}(p)},function(e,t,i){"use strict";function o(e){return e+"("+new Date(1e3*e).toUTCString()+")"}function n(e){var t,i,o,n;return e+="",t=e.slice(0),i=!1,o=t[t.length-1],-1==="DWM".indexOf(o)&&"S"!==o&&(i=!0,o=""),n=parseInt(i?t:t.length>1?t.slice(0,t.length-1):1),{resolution:o,interval:n}}var r,s=i(44),a=i(34),l=i(21).Interval,c=!1,h=null,u=0,d=function(e,t){this._session=new s.Session,this._session.init(e.timezone,e.session),this._symbolInfo=e,this._resolution=t,this._extrapolatedData=[],this._modelId=u++,this._valid=!!e.timezone&&!!e.session,c&&console.log('Created model "{0}", interval "{1}", session "{2}", tz "{3}"'.format(this._modelId,this._resolution,e.session,e.timezone))};d.prototype.uniqueId=function(){return this._modelId},d.prototype.isValid=function(){return this._valid},d.prototype._barBuilder=function(){if(!this._builderCache){var e=n(this._resolution);this._builderCache=s.newBarBuilder(e.resolution,e.interval,this._session,this._session)}return this._builderCache},d.prototype.distance=function(e,t){var i,n,r,a,l;return isNumber(e)&&isNumber(t)&&this.isValid()?(i=this._extrapolatedData.length>0?this._extrapolatedData[0]:null,n=i&&this._extrapolatedData[this._extrapolatedData.length-1],1e3*e!==i&&(this._extrapolatedData=[1e3*e],i=null,n=null),(null===i||1e3*t>n)&&(r=500,
a=s.extrapolateBarsFrontToTime(this._barBuilder(),n||1e3*e,1e3*t,r),this._extrapolatedData=this._extrapolatedData.concat(a)),(n=this._extrapolatedData[this._extrapolatedData.length-1])<1e3*t?{success:!1}:(l=this._extrapolatedData.indexOf(1e3*t),-1!==l?(c&&console.log('Model "{0}" "{1}", distance between "{2}" and "{3}" is "{4}"'.format(this._modelId,this._resolution,o(e),o(t),l)),{success:!0,result:l}):{success:!1})):{success:!1}},d.prototype.projectTime=function(e,t){var i,n,r,a;return isNumber(e)&&isNumber(t)&&this.isValid()?(i=this._extrapolatedData.length>0?this._extrapolatedData[0]:null,n=i&&this._extrapolatedData[this._extrapolatedData.length-1],1e3*e!==i&&(this._extrapolatedData=[1e3*e],i=null,n=null),(null===i||t>=this._extrapolatedData.length)&&(r=s.extrapolateBarsFrontByCount(this._barBuilder(),n||1e3*e,t-this._extrapolatedData.length+1),this._extrapolatedData=this._extrapolatedData.concat(r)),t<this._extrapolatedData.length?(a=this._extrapolatedData[t]/1e3,c&&console.log('Model "{0}" "{1}", proj.time from "{2}" offset "{3}" is "{4}"'.format(this._modelId,this._resolution,o(e),t,o(a))),a):e):e},r=function(e,t){this._source=e,this._target=t,this._isSessionTheSame=e._symbolInfo.timezone===t._symbolInfo.timezone&&e._symbolInfo.session===t._symbolInfo.session,this._isResolutionTheSame=e._resolution===t._resolution,this._shouldCorrectTradingDay=l.isDWM(e._resolution)&&!this._isSessionTheSame,this._cache={},null===h&&(h=new s.Session,h.init("Etc/UTC","24x7"))},r.prototype._sourceTargetBuilder=function(){var e,t;return this._sourceTargetBuilderCache||(e=n(this._target._resolution),t=this._isSessionTheSame?this._target._session:h,this._sourceTargetBuilderCache=s.newBarBuilder(e.resolution,e.interval,this._target._session,t)),this._sourceTargetBuilderCache},r.prototype.sourceTimeToTargetTime=function(e){var t,i,n,r,s,l;return this._isSessionTheSame&&this._isResolutionTheSame?e:isNumber(e)&&this._source.isValid()&&this._target.isValid()?(t=this._cache[e],t||(i=1e3*e,this._shouldCorrectTradingDay&&(n=a.utc_to_cal(this._source._session.timezone,i),n=this._source._session.spec.correctTradingDay(n,this._source._session.timezone),r=new Date(n),a.set_hms(r,0,0,0,0),i=r.valueOf()),s=this._sourceTargetBuilder(),s.moveTo(i),l=s.indexOfBar(i),t=s.startOfBar(Math.max(0,l))/1e3,this._cache[e]=t),c&&console.log('Model "{0}" "{1}" sourceTime "{2}" => model "{3}" "{4}" targetTime "{5}"'.format(this._source.uniqueId(),this._source._resolution,o(e),this._target.uniqueId(),this._target._resolution,o(t))),t):e},e.exports.SyncPoint=r,e.exports.SyncModel=d},function(e,t,i){"use strict";function o(e,t,i,o){var n;return r.a.isScriptStrategy(o)?new l.a(e,t,i,o):(n="study_"+(o.classId||o.shortId),new(n in f?f[n]:s.Study)(e,t,i,o))}var n,r,s,a,l,c,h,u,d,p,_,f,m;Object.defineProperty(t,"__esModule",{value:!0}),n=i(28),r=i.n(n),s=i(25),a=i(730),l=i.n(a),c=i(733),h=i(736),u=i(738),d=i(3),p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return d.c(t,e),t.prototype.hasContextMenu=function(){return!1},
t.prototype.showInObjectTree=function(){return!1},t.prototype.isSavedInStudyTemplates=function(){return!1},t.prototype.isRemovedByStudyTemplates=function(){return!1},t.prototype.removeByRemoveAllStudies=function(){return!1},t.prototype.isUserDeletable=function(){return!1},t.prototype.statusView=function(){return null},t.prototype.isDraggable=function(){return!1},t.prototype.applyPreferences=function(e){this._properties.merge(e),void 0!==this._properties.graphics.vertlines&&this._properties.graphics.vertlines.sessBreaks.visible.listeners().fire(this._properties.graphics.vertlines.sessBreaks.visible),void 0!==this._properties.graphics.backgrounds&&(this._properties.graphics.backgrounds.inSession.visible.listeners().fire(this._properties.graphics.backgrounds.inSession.visible),this._properties.graphics.backgrounds.outOfSession.visible.listeners().fire(this._properties.graphics.backgrounds.outOfSession.visible))},t}(s.Study),p.prototype.superclass=s.Study,_=i(739),t.createStudy=o,f={study_PivotPointsStandard:c.study_PivotPointsStandard,study_Overlay:h.study_Overlay,study_Compare:u.study_Compare,study_Sessions:p,study_ScriptWithDataOffset:_.study_ScriptWithDataOffset},TradingView.StudyStrategy=l.a;for(m in f)f.hasOwnProperty(m)&&(TradingView[m]=f[m])},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="-2.4 120.9 14 14" width="14" height="14" enable-background="new -2.4 120.9 600 600"><path d="M-2.4 120.9v14h14v-14zm3.34 2.123l3.66 3.66 3.66-3.66 1.217 1.22-3.66 3.658 3.66 3.66-1.22 1.22-3.658-3.66-3.66 3.66-1.22-1.22 3.66-3.66-3.66-3.66z"/></svg>'},function(e,t,i){"use strict";function o(e){var t,i=[],n=e.m_items;for(t=0;t<n.length;t++)n[t]._menu&&(i.push(n[t]._menu),i=i.concat(o(n[t]._menu)));return i}function n(e,t,i){var o,n;this.options={},this._parentMenuItem=i,$.extend(this.options,t),this.options.class&&(this.options.attributes.class=this.options.class),this.jqMenu=null,this.m_wrapper=null,this.m_items=[];for(o in e)n=e[o],this.addItem(n)}var r,s,a,l,c,h,u,d,p;i(209),r=i(287),s=i(40).ActionPlaceholder,a=i(749),l=a.Item,c=a.ItemPlaceholder,h=i(750),u=i(182),d=i(36).IS_RTL,p=i(751).setOffset,n.prototype.addItem=function(e){var t;return t=e instanceof s?new c(e,this):new l(e,this),this.m_items.push(t),t},n.renderItem=function(e,t){e.append(t.render(e))},n.prototype.closeOtherSubmenus=function(e){for(var t=0;t<this.m_items.length;++t)this.m_items[t].highlight(!1),this.m_items[t]._menu&&(this.m_items[t]._menu.destroy(),this.m_items[t]._menu=null)},n.prototype.isShown=function(){return null!==this.jqMenu},n.prototype.render=function(){var e,t,i,o=this.getAttributes();if(this._parentMenuItem){e=$("<table>"),this.jqMenu=e,e.attr("cellspacing","0"),e.attr("cellpadding","0"),e.addClass("context-menu"),e.addClass("submenu");for(t in this.m_items)i=this.m_items[t],n.renderItem(e,i)}else{e=u.create(r.MENU_TAG,o),this.jqMenu=e;for(t in this.m_items)i=this.m_items[t],n.renderItem(e,i)}return this.jqMenu},n.prototype.getAttributes=function(){var e={},t=["context-menu"]
;return this.options.attributes&&this.options.attributes.class&&t.push(this.options.attributes.class),e.cellspacing=0,e.cellpadding=0,e.class=t.join(),e},n.prototype.deploy=function(e,t){var i,n=this,r=e.target&&e.target.ownerDocument||document,s=this.wrapper();return this.jqMenu=s.append(this.render()),t?($(t).data("submenu",this.jqMenu),$(r.body).append(this.jqMenu),this.jqMenu.data("parent-menu",t),this.jqMenu.data("parent-item",e.currentTarget)):($(r.body).append(this.jqMenu),i=function(e){var t,s;if(!n.m_wrapper[0].contains(e.target)){for(t=o(n),s=0;s<t.length;s++)if(t[s].m_wrapper[0].contains(e.target))return;n.hide(),r.removeEventListener("mousedown",i,!1),r.removeEventListener("touchstart",i,!1)}},r.addEventListener("mousedown",i,!1),r.addEventListener("touchstart",i,!1)),h.unbindContextMenu(this.jqMenu),this._setCoords(e),this.jqMenu},n.prototype.show=function(e,t){this.deploy(e,t).show()},n.prototype.hide=function(){this.isShown()&&this.destroy()},n.prototype.destroy=function(){this.m_items.forEach(function(e){e._menu&&e._menu.destroy()}),this.jqMenu&&(this.jqMenu.remove(),this.jqMenu=null),this.m_wrapper.empty()},n.prototype._setCoords=function(e){var t,i,o,n,r,s,a,l,c,h=e.target.ownerDocument,u=h.defaultView,_=5,f=this.jqMenu,m=$(this.jqMenu.data("parent-item")),g={width:$(u).width(),height:Math.min($(u).height(),$(h.body).height())},y={top:$(h).scrollTop(),left:$(h).scrollLeft()};for(this.jqMenu.css({maxWidth:g.width-2*_,maxHeight:g.height-2*_}),t={width:f.outerWidth(),height:f.outerHeight()},o=d?t.width:0,m.size()?(n=m.offset(),i={top:n.top-1,left:n.left+m.outerWidth()}):i={top:e.pageY,left:e.pageX-o},p(this.jqMenu[0],i),r=!1,s={},s.top=Math.min(i.top,g.height+y.top-t.height-_),a=d?i.left+_<y.left:i.left+t.width+_>g.width+y.left,a||this.options.reverse?d?s.left=i.left+t.width:(r=!0,s.left=i.left-t.width):s.left=i.left,l=e.target;l&&1===l.nodeType;l=l.parentNode)if("fixed"===$(l).css("position")){this.jqMenu.css("position","fixed");break}p(this.jqMenu[0],s),r&&(c=t.width-this.jqMenu.outerWidth())&&(s.left+=c,p(this.jqMenu[0],s))},n.prototype._wrapper=function(){var e=r.WRAPPER_ATTRIBUTES;return this.m_wrapper=u.create(r.WRAPPER_TAG,e),this._parentMenuItem||this.m_wrapper.addClass("topmenu"),this.m_wrapper},n.prototype.wrapper=function(e){return this.m_wrapper||this._wrapper()},e.exports=n},function(e,t,i){"use strict";e.exports={INSERT_AT_END:0,INSERT_AT_START:1,INSERT_AT_POS:2,WRAPPER_TAG:"div",WRAPPER_ATTRIBUTES:{class:"context-menu-wrapper"},MENU_TAG:"table",ITEM_ROW_TAG:"tr",ICON_CELL_TAG:"td",TEXT_CELL_TAG:"td",RIGHT_CELL_TAG:"td",SUBMENU_CELL_TAG:"td"}},function(e,t,i){"use strict";function o(){null===a&&i.e(3).then(function(e){if(null===a){var t=i(936).FavoriteDrawingToolbar;a=new t({left:window.innerWidth/2,top:r.HEADER_TOOLBAR_HEIGHT_EXPANDED+61})}}.bind(null,i)).catch(i.oe)}function n(){var e,t;return null===l&&null!==a&&(e=new s.Action({text:window.t("Favorite Drawings Toolbar"),checkable:!0,statName:"ToggleFavoriteDrawingsToolbar"}),t=a,t.canBeShown().subscribe(function(t){e.setEnabled(t)},{
callWithLast:!0}),t.visibility().subscribe(function(t){e.setChecked(t)},{callWithLast:!0}),e.callbacks().subscribe(null,function(){t.isVisible()?t.hide():t.show()}),l=e),l}var r,s,a,l;Object.defineProperty(t,"__esModule",{value:!0}),t.createFavoriteDrawingToolbar=o,t.createToolbarAction=n,i(11),r=i(200),s=i(40),i.n(s),a=null,l=null},function(e,t,i){"use strict";function o(e){"number"!=typeof e&&(e=TradingView.STUDY_COUNT_LIMIT),(0,n.showNoticeDialog)({title:$.t("Warning"),content:$.t("Studies limit exceeded: {0} studies per layout.<br>\nPlease, remove some studies.").format(e)})}Object.defineProperty(t,"__esModule",{value:!0}),t.showTooManyStudiesNotice=o;var n=i(210)},function(e,t,i){"use strict";var o,n,r,s,a,l;Object.defineProperty(t,"__esModule",{value:!0}),i.d(t,"UndoStack",function(){return l}),o=i(41),n=i(8),r=i.n(n),s=i(5),a=Object(s.getLogger)("Common.UndoStack"),l=function(){function e(){this._commands=[],this._onChange=new r.a}return e.prototype.onChange=function(){return this._onChange},e.prototype.isEmpty=function(){return 0===this._commands.length},e.prototype.clear=function(){this._commands.length=0,this._onChange.fire()},e.prototype.push=function(e){if(!(e instanceof o.UndoCommand))throw new TypeError("argument must be an instance of UndoCommand");this._commands.push(e),this._onChange.fire()},e.prototype.pop=function(){if(this.isEmpty())return void a.logDebug("pop: undo stack is empty");var e=this._commands.pop();return this._onChange.fire(),e},e.prototype.head=function(){if(!this.isEmpty())return this._commands[this._commands.length-1]},e}()},function(e,t,i){"use strict";var o,n,r,s,a;Object.defineProperty(t,"__esModule",{value:!0}),i.d(t,"RestoreDefaultsUndoCommand",function(){return r}),i.d(t,"RestoreUserDefaultsUndoCommand",function(){return s}),i.d(t,"RestoreFactoryDefaultsUndoCommand",function(){return a}),o=i(3),n=i(41),r=function(e){function t(t,i,o){var n=e.call(this,o)||this;return n._chartModel=t,n._defaultProperty=i,n._state=i.state(),n}return o.c(t,e),t.prototype.undo=function(){this._defaultProperty.mergeAndFire(this._state),this._chartModel.mainSeries().onChartStyleChanged()},t}(n.UndoCommand),s=function(e){function t(t,i,o){return void 0===o&&(o="Restore User Defaults"),e.call(this,t,i,o)||this}return o.c(t,e),t.prototype.redo=function(){this._chartModel.restoreDefaults(this._defaultProperty)},t}(r),a=function(e){function t(t,i,o){return void 0===o&&(o="Restore Defaults"),e.call(this,t,i,o)||this}return o.c(t,e),t.prototype.redo=function(){this._chartModel.restoreFactoryDefaults(this._defaultProperty)},t}(r)},function(e,t,i){"use strict";var o,n,r,s,a;i.d(t,"a",function(){return a}),o=i(5),n=i(37),r=i(134),i(132),s=Object(o.getLogger)("GUI.Blocks.AbstractIndicator"),a=function(){function e(e){this._classSuffix="",this._quoteSessionPrefix="abstract-indicator",this._shortMode=!1,this._showTooltip=!0,this._subscribed=!1,this._tooltipType="custom",this._quoteSession=e.quoteSession}return e.prototype.getValue=function(){return this._value},e.prototype.getTooltipText=function(){
return this.getLabel()},e.prototype.getLabel=function(){return this._labelMap[this._value]||""},e.prototype.getElement=function(){return this._el},e.prototype.update=function(e,t){this._updateValue(e,t),this._render()},e.prototype.setTooltipEnabled=function(e){void 0===e&&(e=!1),this._showTooltip!==e&&(this._showTooltip=e,this._renderTooltip())},e.prototype.enableShortMode=function(){!0!==this._shortMode&&(this._shortMode=!0,this._render())},e.prototype.disableShortMode=function(){!1!==this._shortMode&&(this._shortMode=!1,this._render())},e.prototype.isShortModeEnabled=function(){return this._shortMode},e.prototype.start=function(){!this._subscribed&&this._symbolName&&(this._quoteSession||(this._quoteSession=Object(r.getQuoteSessionInstance)("simple")),this._quoteSession.subscribe(this._getQuoteSessionId(),this._symbolName,this.update.bind(this)),this._subscribed=!0)},e.prototype.stop=function(){this._subscribed&&this._quoteSession&&this._symbolName&&(this._quoteSession.unsubscribe(this._getQuoteSessionId(),this._symbolName),this._subscribed=!1)},e.prototype._init=function(e){this._el=e.el?e.el:document.createElement("span"),this._el.innerHTML="",this._classMap=e.classMap,this._labelMap=e.labelMap,this._showTooltip=e.showTooltip,this._classSuffix=e.classSuffix,this._symbolName=e.symbol,e.tooltipType&&(this._tooltipType=e.tooltipType),this._quoteSessionGUID=Object(n.guid)(),!0===e.short&&this.enableShortMode(),e.data&&this._updateValue(e.data)},e.prototype._clearClasses=function(){var e=this;Object.values(this._classMap).map(function(t){e._el.classList.remove(""+t),e._el.classList.remove(""+t+e._classSuffix)})},e.prototype._render=function(){this._renderClasses(),this._renderTooltip(),this._renderLabel()},e.prototype._renderLabel=function(){this._el.textContent=this.getLabel()},e.prototype._updateValue=function(e,t){var i=this._getValueFromData(e);(t||i!==this._value)&&(this._value=i)},e.prototype._renderClasses=function(){var e,t,i,o=this._el.classList;o.add(this._componentClass,this._componentClass+this._classSuffix),e=this._classMap[this._value];for(t in this._classMap)(i=this._classMap[t])&&(i===e?o.add(i,i+this._classSuffix):o.remove(i,i+this._classSuffix));!e&&this._value&&s.logWarn("no className for status "+this._value)},e.prototype._renderTooltip=function(){this._el.setAttribute("title",this._showTooltip?this.getTooltipText():""),"custom"===this._tooltipType&&this._el.classList.toggle("apply-common-tooltip",this._showTooltip)},e.prototype._getQuoteSessionId=function(){return this._quoteSessionPrefix+"."+this._quoteSessionGUID},e}(),window.AbstractIndicator=a},function(e,t,i){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){var i=new Date(e+t),o=Math.round(Math.abs(t)/6e4),n="UTC";return 0!==o&&(n+=t>0?"+":"-",n+=Math.floor(o/60),o%60&&(n+=":"+o%60)),i.getUTCFullYear()+"-"+("0"+(i.getUTCMonth()+1)).slice(-2)+"-"+("0"+i.getUTCDate()).slice(-2)+" "+("0"+i.getUTCHours()).slice(-2)+":"+("0"+i.getUTCMinutes()).slice(-2)+" ("+n+")"}
function r(e){return"string"==typeof e&&0!==e.trim().length}function s(e){var t,i,o,n,s;if(!e||0===e.length)return!0;for(t=0;t<e.length;t++){if(r(e[t])||e[t].id||r(e[t].title))return!1;if(e[t].lines)for(i=e[t].lines,o=i.length,n=0;n<o;n++)if(s=i[n],r(s)||r(s.line))return!1}return!0}function a(e,t){var i,o,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return e.hasOwnProperty("text")?(i=r&&(0,d.forceLTRStr)(e.text)||e.text,e.hasOwnProperty("color")&&n?t.append($("<span>",{style:"color: "+e.color}).text(i)):t.text(i)):(o=r&&(0,d.forceLTRStr)(e)||e,t.text(o))}function l(e,t){if(Array.isArray(e)&&2===e.length)$("<dl>").append(a(e[0],$("<dt>")),a(e[1],$("<dd>"),!0,!0)).appendTo(t);else if(e.hasOwnProperty("br")&&e.br)$("<br>").appendTo(t);else{var i=$("<dl>").append(a(e,$("<dt>"))).appendTo(t);e.hasOwnProperty("listItem")&&i.addClass("list-item")}}function c(e,t){var i=(0,d.forceLTRStr)(e.text);$("<a>").attr("href",e.href).text(i).addClass(e.class).appendTo(t)}function h(e,t){var i,o,r,s,a,h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if("string"==typeof e)i=(0,d.forceLTRStr)(e),$("<h2>").text(i).appendTo(t);else if(e.hasOwnProperty("lines"))for(o=0;o<e.lines.length;o++)e.lines[o].hasOwnProperty("line")?0===o?e.lines[o].line.isEmpty||$("<h2>").text(e.lines[o].line).appendTo(t):l(e.lines[o].line,t):e.lines[o].hasOwnProperty("link")&&c(e.lines[o].link,t);else e.hasOwnProperty("title")&&$("<h2>").text(e.title).appendTo(t),e.hasOwnProperty("actual")&&(r=e.actual&&(0,d.forceLTRStr)(e.actual),$("<dl>").append($("<dt>").text($.t("Actual")+": "),$("<dd>").text(r||"")).appendTo(t)),e.hasOwnProperty("forecast")&&(s=e.forecast&&(0,d.forceLTRStr)(e.forecast),$("<dl>").append($("<dt>").text($.t("Forecast")+": "),$("<dd>").text(s||"")).appendTo(t)),e.hasOwnProperty("previous")&&(a=e.previous&&(0,d.forceLTRStr)(e.previous),$("<dl>").append($("<dt>").text($.t("Previous")+": "),$("<dd>").text(a||"")).appendTo(t)),e.hasOwnProperty("timestamp")&&$("<dl>").append($("<dt>").text($.t("Date")+": "),$("<dd>").text(n(e.timestamp,h)||"")).appendTo(t)}var u,d;Object.defineProperty(t,"__esModule",{value:!0}),t.Tooltip=void 0,u=function(){function e(e,t){var i,o;for(i=0;i<t.length;i++)o=t[i],o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}(),i(792),d=i(36),t.Tooltip=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=t.direction,n=void 0===i?"top":i,r=t.clickable,s=void 0!==r&&r,a=t.wide,l=void 0!==a&&a;o(this,e),this._direction=n,this._tooltipShown=!1,this._tooltipX=void 0,this._tooltipY=void 0,this._tooltipItems=null,this._width=l?250:200,this._$tooltip=$("<div>").addClass("tv-chart-events-source__tooltip").css({position:"absolute",width:this._width+"px"}),this._$tooltipContent=$("<div>").addClass("tv-chart-events-source__tooltip__content").appendTo(this._$tooltip),
s&&this._$tooltip.addClass("tv-chart-events-source__tooltip--clickable")}return u(e,[{key:"show",value:function(){var e,t,i,o,n,r,a,l,c,u,d,p,_,f,m,g,y,v,b,S=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},w=S.items,T=void 0===w?[]:w,P=S.x,x=void 0===P?0:P,C=S.y,L=void 0===C?0:C,I=S.wrapElement,M=void 0===I?null:I,k=S.timeOffset,A=void 0===k?"":k,E=S.leftBorderColor,D=void 0===E?null:E;if(M&&!s(T)){if(e=$(M).width(),t=$(M).height(),i=!1,o=!1,this._tooltipShown||(this._$tooltip.appendTo(M),this._tooltipShown=!0,i=!0,o=!0),x===this._tooltipX&&L===this._tooltipY||(i=!0),i&&(n=Math.max(Math.min(x-this._width/2,e-this._width-10),0),this._$tooltip.css({left:Math.round(n),bottom:Math.round(t-L+10)})),this._tooltipItems||(o=!0),!o)for(r=T.length;r--;)if(this._tooltipItems[r]!==T[r]){o=!0;break}if(o){if(a=void 0,T.length<=1)a=T;else{for(l={},c=T.length;c--;)u=T[c].importance,null==u&&(u=-1),l[u]||(l[u]=[]),l[u].push(T[c]);if(d=Object.keys(l).sort(function(e,t){return e-t}),d.length<=1)a=l[d[0]];else for(a=[],p=d.length;p--;)for(_=l[d[p]],f=_.length;f--;)a.push(_[f])}for(this._$tooltipContent.empty(),m=a.length;m--;)g=a[m],y="",g.hasOwnProperty("importance")?("string"==typeof g.importance&&("earnings"===g.importance?y="--importance-earnings":"splits"===g.importance?y="--importance-splits":"dividends"===g.importance?y="--importance-dividends":"list"===g.importance&&(y="--importance-list")),0===g.importance?y="--importance-normal":g.importance>0&&(y="--importance-high")):D||(y="--importance-none"),v="tv-chart-events-source__tooltip__item",y&&(v+=" "+v+y),b=$("<div>").attr("class",v),D&&b.css("border-left-color",D),h(g,b,A),b.appendTo(this._$tooltipContent);this._tooltipItems=T}"bottom"===this._direction&&this._$tooltip.css({bottom:Math.round(t-L-this._$tooltipContent.height()+10)})}}},{key:"hide",value:function(){this._tooltipShown&&(this._$tooltip.detach(),this._tooltipShown=!1)}},{key:"isOpened",value:function(){return this._tooltipShown}}]),e}()},function(e,t,i){"use strict";(function(t){var o=i(44),n=i(21).Interval,r=i(8),s=i(4),a=function(e,t){this._server=e,this._session=t,this._timezone=null,this._timezoneId="",this._isDWM=!1,this._resolution=null,this.seriesCompleted=new r,this._lastBarTimes={}};a.prototype.lastBarTime=function(e){return this._lastBarTimes[e]},a.prototype._userTimezone=function(){return this._timezone},a.prototype.setTimezone=function(e){this._timezone="exchange"===e?"exchange":t.get_timezone(e),this._timezoneId=e},a.prototype.timezone=function(){return this._timezoneId},a.prototype.setResolution=function(e){this._isDWM=n.isDWM(e),this._resolution=e},a.prototype.onRequestMetadata=function(e,t){this._server.receiveLocalResponse({method:"studies_metadata",params:[this._session,e,{errors:[],hash:"",metainfo:t,migrations:[]}]})},a.prototype.onSymbolResolved=function(e,t){this._server.receiveLocalResponse({method:"symbol_resolved",params:[this._session,e,t]})},a.prototype.onSymbolError=function(e,t){this._server.receiveLocalResponse({method:"symbol_error",params:[this._session,e,t]})},
a.prototype.onStudyError=function(e,t){this._server.receiveLocalResponse({method:"study_error",params:[this._session,e,t]})},a.prototype.onSeriesLoading=function(e,t){this._server.receiveLocalResponse({method:"series_loading",params:[this._session,e,t]})},a.prototype.onSeriesCompleted=function(e,t,i){this._server.receiveLocalResponse({method:"series_completed",params:[this._session,e,i,t]}),this.seriesCompleted.fire(e)},a.prototype.onSeriesError=function(e,t){this._server.receiveLocalResponse({method:"series_error",params:[this._session,e,t]})},a.prototype.onSeriesClearData=function(e,t){var i={};i[e]={series:[],turnaround:t},this._server.receiveLocalResponse({method:"timescale_update",params:[this._session,i,{index:0,zoffset:0,changes:[],marks:[],index_diff:[]}]})},a.prototype.onStudyCompleted=function(e,t){this._server.receiveLocalResponse({method:"study_completed",params:[this._session,e,t]})},a.prototype.onStudyLoading=function(e,t){this._server.receiveLocalResponse({method:"study_loading",params:[this._session,e,t]})},a.prototype._calcMarksTime=function(e,i,n,r,a){var l,c,h,u,d,p=t.get_timezone(i),_=this;if(this._isDWM&&!s.enabled("disable_resolution_rebuild"))for(d=new o.Session,d.init(p,n),u=0;u<e.length;u++)h=e[u],l=r(h),c=t.utc_to_cal(p,1e3*l),c=d.spec.correctTradingDay(c,p),t.set_hms(c,0,0,0,0),e[u]=a(h,parseInt(c.valueOf()/1e3));else for(u=0;u<e.length;u++)e[u]=a(e[u],_.timeInTimezone(r(e[u]),p))},a.prototype.onTickmarksUpdated=function(e,t,i,o){var r,s,a,l,c,h,u;if(n.isEqual(o,this._resolution)){for(r=t.slice(0),this._calcMarksTime(r,i.timezone,i.session,function(e){return e},function(e,t){return t}),s=[],a=[],c=0;c<r.length;++c)h=r[c],s.push([this._spanByTime(h,l),h,e+c]),a.push(h),l=h;u={method:"tickmark_update",params:[this._session,{index:e,zoffset:0,changes:a,marks:s,index_diff:[]}]},this._server.receiveLocalResponse(u)}},a.prototype.onTimescaleUpdate=function(e,t,i,o,n,r){var s,a,l,c,h,u,d,p,_=r&&r.slice(0);for(this._lastBarTimes[e]=_?_&&_[_.length-1]:i&&i[i.length-1].value[0],this._calcMarksTime(i,o.timezone,o.session,function(e){return e.value[0]},function(e,t){return e.exTime=t,e}),_&&this._calcMarksTime(_,o.timezone,o.session,function(e){return e},function(e,t){return{markTime:t,time:e}}),s={},s[e]={series:i,turnaround:t},a=[],l=[],h=i.map(function(e){return{markTime:e.exTime,time:e.value[0]}}),_&&(h=h.concat(_)),u=0;u<h.length;++u)d=h[u].markTime,a.push([this._spanByTime(d,c),d,n+u]),l.push(h[u].time),c=d;p={method:"timescale_update",params:[this._session,s,{index:n,zoffset:0,changes:l,marks:a,index_diff:[]}]},this._server.receiveLocalResponse(p)},a.prototype.onSeriesTimeframeUpdate=function(e,t,i,o,n){var r={method:"series_timeframe",params:[this._session,e,t,i,o,n]};this._server.receiveLocalResponse(r)},a.prototype.onPointsetDataUpdate=function(e,t,i,o){this._onDataUpdate(e,t,i,null,o,1)},a.prototype.onDataUpdate=function(e,t,i,o,n){this._onDataUpdate(e,t,i,o,n,0)},a.prototype._onDataUpdate=function(e,t,i,o,n,r){var s,a={},l="",c=[];null!==o&&(l=JSON.stringify(o.data),c=o.indexes||[]),a[e]={
s:i,ns:{d:l,indexes:c},turnaround:t},s={method:"data_update",params:[this._session,a]},this._server.receiveLocalResponse(s)},a.prototype.onQuotesData=function(e){this._server.receiveLocalResponse({method:"quote_symbol_data",params:e})},a.prototype.onDepthData=function(e){this._server.receiveLocalResponse({method:"dd",params:e})},a.prototype.onDepthUpdate=function(e){this._server.receiveLocalResponse({method:"dpu",params:e})},a.prototype.onProjectionUpdate=function(e,t,i,o){var n,r=i.data,s=r[r.length-1],a={data:{reversalAmount:i.reversalAmount,boxSize:i.boxSize,price:s?s[4]:i.price,bars:r.map(function(e,t){return{time:t,open:e[1],high:e[2],low:e[3],close:e[4],volume:e[5],factor:e[6],additionalPrice:e[6]}})}},l={};l[e]={s:o||[],ns:{d:JSON.stringify(a),indexes:r.map(function(e,t){return i.barsetSize+(e[0]||0)})},turnaround:t},n={method:"data_update",params:[this._session,l]},this._server.receiveLocalResponse(n)},a.prototype.timeInTimezone=function(e,i){return"exchange"===this._userTimezone()?parseInt(t.utc_to_cal(i,1e3*e).valueOf()/1e3):parseInt(t.utc_to_cal(this._userTimezone(),1e3*e).valueOf()/1e3)},a.prototype._spanByTime=function(e,t){function i(e){return 60*e*60*1e3}function o(e){return 60*e*1e3}function n(e){return 1e3*e}var r,s,a,l=[{divisor:1,span:20},{divisor:n(1),span:19},{divisor:o(5),span:21},{divisor:o(30),span:22},{divisor:i(1),span:30},{divisor:i(3),span:31},{divisor:i(6),span:32},{divisor:i(12),span:33}];if(!t)return 20;if(r=new Date(1e3*t),s=new Date(1e3*e),s.getYear()!==r.getYear())return 70;if(s.getUTCMonth()!==r.getUTCMonth())return 60;if(s.getUTCDate()!==r.getUTCDate())return 50;for(a=l.length-1;a>=0;--a)if(Math.floor(r/l[a].divisor)!==Math.floor(s/l[a].divisor))return l[a].span},TradingView.ChartapiMessagerInstances=[],e.exports=a}).call(t,i(34))},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i.d(t,"supportedLineTools",function(){return o});var o={cursor:{name:"cursor",onlySelectable:!0},dot:{name:"dot",onlySelectable:!0},arrow_cursor:{name:"arrow",onlySelectable:!0},eraser:{name:"eraser",onlySelectable:!0},measure:{name:"measure",onlySelectable:!0},zoom:{name:"zoom",onlySelectable:!0},brush:{name:"LineToolBrush",onlySelectable:!0},text:{name:"LineToolText",supportsText:!0},anchored_text:{name:"LineToolTextAbsolute",supportsText:!0},note:{name:"LineToolNote",supportsText:!0},anchored_note:{name:"LineToolNoteAbsolute",supportsText:!0},callout:{name:"LineToolCallout",supportsText:!0},balloon:{name:"LineToolBalloon",supportsText:!0},arrow_up:{name:"LineToolArrowMarkUp",supportsText:!0},arrow_down:{name:"LineToolArrowMarkDown",supportsText:!0},arrow_left:{name:"LineToolArrowMarkLeft",supportsText:!0},arrow_right:{name:"LineToolArrowMarkRight",supportsText:!0},price_label:{name:"LineToolPriceLabel"},flag:{name:"LineToolFlagMark"},vertical_line:{name:"LineToolVertLine"},horizontal_line:{name:"LineToolHorzLine"},cross_line:{name:"LineToolCrossLine"},horizontal_ray:{name:"LineToolHorzRay"},trend_line:{name:"LineToolTrendLine"},trend_angle:{name:"LineToolTrendAngle"},arrow:{
name:"LineToolArrow"},ray:{name:"LineToolRay"},extended:{name:"LineToolExtended"},parallel_channel:{name:"LineToolParallelChannel"},disjoint_angle:{name:"LineToolDisjointAngle"},flat_bottom:{name:"LineToolFlatBottom"},pitchfork:{name:"LineToolPitchfork"},schiff_pitchfork_modified:{name:"LineToolSchiffPitchfork"},schiff_pitchfork:{name:"LineToolSchiffPitchfork2"},inside_pitchfork:{name:"LineToolInsidePitchfork"},pitchfan:{name:"LineToolPitchfan"},gannbox:{name:"LineToolGannSquare"},gannbox_square:{name:"LineToolGannComplex"},gannbox_fixed:{name:"LineToolGannFixed"},gannbox_fan:{name:"LineToolGannFan"},fib_retracement:{name:"LineToolFibRetracement"},fib_trend_ext:{name:"LineToolTrendBasedFibExtension"},fib_speed_resist_fan:{name:"LineToolFibSpeedResistanceFan"},fib_timezone:{name:"LineToolFibTimeZone"},fib_trend_time:{name:"LineToolTrendBasedFibTime"},fib_circles:{name:"LineToolFibCircles"},fib_spiral:{name:"LineToolFibSpiral"},fib_speed_resist_arcs:{name:"LineToolFibSpeedResistanceArcs"},fib_wedge:{name:"LineToolFibWedge"},fib_channel:{name:"LineToolFibChannel"},xabcd_pattern:{name:"LineTool5PointsPattern"},cypher_pattern:{name:"LineToolCypherPattern"},abcd_pattern:{name:"LineToolABCD"},triangle_pattern:{name:"LineToolTrianglePattern"},"3divers_pattern":{name:"LineToolThreeDrivers"},head_and_shoulders:{name:"LineToolHeadAndShoulders"},elliott_impulse_wave:{name:"LineToolElliottImpulse"},elliott_triangle_wave:{name:"LineToolElliottTriangle"},elliott_triple_combo:{name:"LineToolElliottTripleCombo"},elliott_correction:{name:"LineToolElliottCorrection"},elliott_double_combo:{name:"LineToolElliottDoubleCombo"},cyclic_lines:{name:"LineToolCircleLines"},time_cycles:{name:"LineToolTimeCycles"},sine_line:{name:"LineToolSineLine"},long_position:{name:"LineToolRiskRewardLong"},short_position:{name:"LineToolRiskRewardShort"},forecast:{name:"LineToolPrediction"},date_range:{name:"LineToolDateRange"},price_range:{name:"LineToolPriceRange"},date_and_price_range:{name:"LineToolDateAndPriceRange"},bars_pattern:{name:"LineToolBarsPattern"},ghost_feed:{name:"LineToolGhostFeed"},projection:{name:"LineToolProjection"},rectangle:{name:"LineToolRectangle"},rotated_rectangle:{name:"LineToolRotatedRectangle"},ellipse:{name:"LineToolEllipse"},triangle:{name:"LineToolTriangle"},polyline:{name:"LineToolPolyline"},curve:{name:"LineToolBezierQuadro"},double_curve:{name:"LineToolBezierCubic"},arc:{name:"LineToolArc"},icon:{name:"LineToolIcon"}}},function(e,t,i){"use strict";var o,n,r,s,a,l;i.d(t,"a",function(){return n}),i.d(t,"b",function(){return r}),i.d(t,"c",function(){return s}),i.d(t,"d",function(){return a}),i.d(t,"e",function(){return l}),o=i(26),i.n(o),n=function(){function e(){}return e.prototype.init=function(e,t){e.new_sym(t(1),o.Std.period(e),o.Std.period(e)),this._source=t(0),this._scaleFactor1=1,this._scaleFactor2=1},e.prototype.main=function(e,t){var i,n,r,s,a,l,c=e.symbol.time,h=o.Std[this._source](e);return e.select_sym(1),i=o.Std[this._source](e),n=e.new_var(i),r=e.new_var(e.symbol.time),isNaN(e.symbol.time)&&(n.indexOf(0),
r.indexOf(0)),e.select_sym(0),isNaN(c)?null:(s=r.indexOf(c),-1!==s&&r.get(s)!==c&&(s=-1),a=s<0?NaN:n.get(s),l=this._doCalculation(this._scaleFactor1,h,this._scaleFactor2,a),[l])},e}(),r={styles:{plot1:{linestyle:0,linewidth:2,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#800080"}},precision:2,inputs:{source:"close",symbol2:""}},s=[{defval:"close",id:"source",name:"Source",options:["open","high","low","close","hl2","hlc3","ohlc4"],type:"text"},{id:"symbol2",name:"Symbol",type:"symbol",confirm:!0}],a=[{id:"plot1",type:"line"}],l={plot1:{title:"Plot",histogramBase:0}}},function(e,t,i){"use strict";function o(e){var t=e.className,i=e.icon,o=void 0===i?"":i,r=e.onClick,s=e.title;return n.createElement("span",{title:s,className:t,dangerouslySetInnerHTML:{__html:o},onClick:r})}var n;t.a=o,n=i(18),i.n(n)},function(e,t,i){var o;!function(t){"use strict";function n(){}function r(e,t){for(var i=e.length;i--;)if(e[i].listener===t)return i;return-1}function s(e){return function(){return this[e].apply(this,arguments)}}function a(e){return"function"==typeof e||e instanceof RegExp||!(!e||"object"!=typeof e)&&a(e.listener)}var l=n.prototype,c=t.EventEmitter;l.getListeners=function(e){var t,i,o=this._getEvents();if(e instanceof RegExp){t={};for(i in o)o.hasOwnProperty(i)&&e.test(i)&&(t[i]=o[i])}else t=o[e]||(o[e]=[]);return t},l.flattenListeners=function(e){var t,i=[];for(t=0;t<e.length;t+=1)i.push(e[t].listener);return i},l.getListenersAsObject=function(e){var t,i=this.getListeners(e);return i instanceof Array&&(t={},t[e]=i),t||i},l.addListener=function(e,t){var i,o,n;if(!a(t))throw new TypeError("listener must be a function");i=this.getListenersAsObject(e),o="object"==typeof t;for(n in i)i.hasOwnProperty(n)&&-1===r(i[n],t)&&i[n].push(o?t:{listener:t,once:!1});return this},l.on=s("addListener"),l.addOnceListener=function(e,t){return this.addListener(e,{listener:t,once:!0})},l.once=s("addOnceListener"),l.defineEvent=function(e){return this.getListeners(e),this},l.defineEvents=function(e){for(var t=0;t<e.length;t+=1)this.defineEvent(e[t]);return this},l.removeListener=function(e,t){var i,o,n=this.getListenersAsObject(e);for(o in n)n.hasOwnProperty(o)&&-1!==(i=r(n[o],t))&&n[o].splice(i,1);return this},l.off=s("removeListener"),l.addListeners=function(e,t){return this.manipulateListeners(!1,e,t)},l.removeListeners=function(e,t){return this.manipulateListeners(!0,e,t)},l.manipulateListeners=function(e,t,i){var o,n,r=e?this.removeListener:this.addListener,s=e?this.removeListeners:this.addListeners;if("object"!=typeof t||t instanceof RegExp)for(o=i.length;o--;)r.call(this,t,i[o]);else for(o in t)t.hasOwnProperty(o)&&(n=t[o])&&("function"==typeof n?r.call(this,o,n):s.call(this,o,n));return this},l.removeEvent=function(e){var t,i=typeof e,o=this._getEvents();if("string"===i)delete o[e];else if(e instanceof RegExp)for(t in o)o.hasOwnProperty(t)&&e.test(t)&&delete o[t];else delete this._events;return this},l.removeAllListeners=s("removeEvent"),l.emitEvent=function(e,t){var i,o,n,r,s=this.getListenersAsObject(e)
;for(r in s)if(s.hasOwnProperty(r))for(i=s[r].slice(0),n=0;n<i.length;n++)o=i[n],!0===o.once&&this.removeListener(e,o.listener),o.listener.apply(this,t||[])===this._getOnceReturnValue()&&this.removeListener(e,o.listener);return this},l.trigger=s("emitEvent"),l.emit=function(e){var t=Array.prototype.slice.call(arguments,1);return this.emitEvent(e,t)},l.setOnceReturnValue=function(e){return this._onceReturnValue=e,this},l._getOnceReturnValue=function(){return!this.hasOwnProperty("_onceReturnValue")||this._onceReturnValue},l._getEvents=function(){return this._events||(this._events={})},n.noConflict=function(){return t.EventEmitter=c,n},void 0!==(o=function(){return n}.call(t,i,t,e))&&(e.exports=o)}(this||{})},,function(e,t,i){"use strict";function o(e){return e in $.fn?Promise.resolve():(s||(s=new Promise(function(e){i.e(16).then(function(t){i(331),e()}.bind(null,i)).catch(i.oe)})),s)}function n(e){return new a(e)}var r,s,a;Object.defineProperty(t,"__esModule",{value:!0}),i.d(t,"LazyJqueryUI",function(){return a}),t.lazyJqueryUI=n,r=i(13),i.n(r),a=function(){function e(e){this._$elem=e}return e.prototype.draggable=function(){var e=arguments,t=this._$elem;return o("draggable").then(function(){return t.draggable.apply(t,e)})},e.prototype.resizable=function(){var e=arguments,t=this._$elem;return o("resizable").then(function(){return t.resizable.apply(t,e)})},e.prototype.sortable=function(){var e=arguments,t=this._$elem;return o("sortable").then(function(){return t.sortable.apply(t,e)})},e.prototype.datepicker=function(){var e=arguments,t=this._$elem;return o("datepicker").then(function(){return t.datepicker.apply(t,e)})},e}()},function(e,t,i){"use strict";var o,n,r,s,a,l,c,h;Object.defineProperty(t,"__esModule",{value:!0}),i.d(t,"RectangleRenderer",function(){return h}),o=i(9),n=i(31),i.n(n),r=i(61),i.n(r),s=i(6),i.n(s),a=i(24),l=i(7),i.n(l),c=i(51),i.n(c),h=function(){function e(e,t,i){this._data=null,this._hitTestResult=e||new o.HitTestResult(o.HitTestResult.MOVEPOINT),this._backHitTestResult=t||new o.HitTestResult(o.HitTestResult.MOVEPOINT_BACKGROUND),this._forceOverrideTransparency=!!i}return e.prototype.setData=function(e){this._data=e},e.prototype.draw=function(e){var t,i,o,n;null===this._data||this._data.points.length<2||(e.lineCap="butt",e.strokeStyle=this._data.color,e.lineWidth=this._data.linewidth,void 0!==this._data.linestyle&&Object(c.setLineStyle)(e,this._data.linestyle),t=this._data.points,i=t[0],o=t[1],n=o.subtract(i),e.beginPath(),e.rect(i.x,i.y,n.x,n.y),this._data.linewidth>0&&e.stroke(),this._data.fillBackground&&(e.fillStyle=this.getColor(),e.fill()))},e.prototype.hitTest=function(e){var t,i,o,a,l,c,h,u,d,p;return null===this._data||this._data.points.length<2||this._data.nohittest?null:(t=this._data.points,i=t[0],o=t[1],a=new s.Point(o.x,i.y),l=new s.Point(i.x,o.y),c=Object(n.distanceToSegment)(i,a,e),c.distance<=3?this._hitTestResult:(c=Object(n.distanceToSegment)(a,o,e),c.distance<=3?this._hitTestResult:(c=Object(n.distanceToSegment)(o,l,e),
c.distance<=3?this._hitTestResult:(c=Object(n.distanceToSegment)(l,i,e),c.distance<=3?this._hitTestResult:this._data.fillBackground&&(h=Math.min(i.x,o.x),u=Math.max(i.x,o.x),d=Math.min(i.y,o.y),p=Math.max(i.y,o.y),i=new s.Point(h,d),o=new s.Point(u,p),Object(r.pointInRectangle)(e,i,o))?this._backHitTestResult:null))))},e.prototype.getColor=function(){var e=Object(l.ensure)(this._data);return Object(a.generateColor)(e.backcolor,e.transparency,this._forceOverrideTransparency)},e}()},function(e,t,i){"use strict";var o,n,r,s;i.d(t,"a",function(){return s}),o=i(3),n=i(18),i.n(n),r=i(60),i.n(r),s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._handleOutsideEvent=function(e){t.props.handler&&!r.findDOMNode(t).contains(e.target)&&t.props.handler(e)},t}return o.c(t,e),t.prototype.componentDidMount=function(){this.props.click&&document.addEventListener("click",this._handleOutsideEvent,!1),this.props.mouseDown&&document.addEventListener("mousedown",this._handleOutsideEvent,!1),this.props.touchEnd&&document.addEventListener("touchend",this._handleOutsideEvent,!1),this.props.touchStart&&document.addEventListener("touchstart",this._handleOutsideEvent,!1)},t.prototype.componentWillUnmount=function(){this.props.click&&document.removeEventListener("click",this._handleOutsideEvent,!1),this.props.mouseDown&&document.removeEventListener("mousedown",this._handleOutsideEvent,!1),this.props.touchEnd&&document.removeEventListener("touchend",this._handleOutsideEvent,!1),this.props.touchStart&&document.removeEventListener("touchstart",this._handleOutsideEvent,!1)},t.prototype.render=function(){var e=this.props,t=(e.click,e.handler,e.mouseDown,e.touchEnd,e.touchStart,e.ctor),i=void 0===t?"span":t,r=o.e(e,["click","handler","mouseDown","touchEnd","touchStart","ctor"]);return n.createElement(i,o.a({},r))},t}(n.Component)},function(e,t,i){"use strict";function o(e){return void 0===e&&(e=""),'\n\t\t<div class="tv-spinner" role="progressbar">\n\t\t\t<div class="tv-spinner__spinner-layer">\n\t\t\t\t<div class="tv-spinner__background tv-spinner__width_element"></div>\n\t\t\t\t<div class="tv-spinner__circle-clipper tv-spinner__width_element tv-spinner__circle-clipper--left"></div>\x3c!--\n\t\t\t\t--\x3e<div class="tv-spinner__circle-clipper tv-spinner__width_element tv-spinner__circle-clipper--right"></div>\n\t\t\t</div>\n\t\t</div>\n\t'}var n,r,s,a,l;Object.defineProperty(t,"__esModule",{value:!0}),i.d(t,"DEFAULT_SIZE",function(){return s}),t.renderSpinnerTemplate=o,i.d(t,"Spinner",function(){return l}),n=i(333),i.n(n),r=i(160),s="large",a=Object(r.b)(o()),l=function(){function e(e){this._shown=!1,this._el=a.cloneNode(!0),this.setSize(e||s)}return e.prototype.spin=function(e){return this._el.classList.add("tv-spinner--shown"),void 0===this._container&&(this._container=e,e.appendChild(this._el)),this._shown=!0,this},e.prototype.stop=function(e){return e&&void 0!==this._container&&this._container.removeChild(this._el),this._el.classList.remove("tv-spinner--shown"),this._shown=!1,this},e.prototype.setStyle=function(e){
var t=this;return Object.keys(e).forEach(function(i){var o=e[i];void 0!==o&&t._el.style.setProperty(i,o)}),this},e.prototype.setSize=function(e){var t=void 0!==e?"tv-spinner--size_"+e:"";return this._el.className="tv-spinner "+t+" "+(this._shown?"tv-spinner--shown":""),this},e.prototype.getEl=function(){return this._el},e.prototype.destroy=function(){this.stop(),delete this._el,delete this._container},e}()},function(e,t,i){"use strict";(function(o){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r,s,a,l,c,h;Object.defineProperty(t,"__esModule",{value:!0}),r=function(){function e(e,t){var i,o;for(i=0;i<t.length;i++)o=t[i],o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}(),s=i(306),i(339),a=i(5).getLogger("Ui.TvControlCheckbox"),l={labelWrapper:'{{#hasLabel}}<label>{{#labelLeft}}<span class="tv-control-checkbox__label {{#labelAddClass}}{{labelAddClass}}{{/labelAddClass}}">{{labelLeft}}</span>{{/labelLeft}}{{> inputWrapper }}{{#labelRight}}<span class="tv-control-checkbox__label {{#labelAddClass}}{{labelAddClass}}{{/labelAddClass}}">{{labelRight}}</span>{{/labelRight}}</label>{{/hasLabel}}{{^hasLabel}}{{> inputWrapper }}{{/hasLabel}}',inputWrapper:'<{{ tag }} class="{{ customClass }}{{#disabled}} i-disabled{{/disabled}}">{{^hasCheckbox}}{{> checkbox }}{{/hasCheckbox}}{{> box }}{{> ripple }}</{{ tag }}>',checkbox:'<input{{#id}} id="{{ id }}"{{/id}} class="{{> checkboxClass }}" type="checkbox"{{#name}} name="{{ name }}"{{/name}}{{#checked}} checked{{/checked}}{{#disabled}} disabled{{/disabled}}>',checkboxClass:"{{ customClass }}__input",box:'<span class="{{ customClass }}__box {{#boxAddClass}}{{boxAddClass}}{{/boxAddClass}}">'+i(198)+"</span>",ripple:'<span class="{{ customClass }}__ripple js-ripple"></span>'},c="i-inited",h=function(){function e(t){var i,o=t.customClass,r=void 0===o?"tv-control-checkbox":o,s=t.$checkbox,l=t.tag,h=t.id,u=t.name,d=t.checked,p=t.disabled,_=t.labelLeft,f=t.labelRight,m=t.labelAddClass,g=t.boxAddClass;if(n(this,e),this.$el=null,void 0===l&&(l=_||f?"span":"label"),i=s instanceof $&&!!s.length){if(!s.is("input[type=checkbox]"))return void a.logError("`$checkbox` need to be input[type=checkbox]");if(s.hasClass(c))return;this._setInputId(s,h),this._setInputClass(s,r),this._setInputName(s,u),this._setInputChecked(s,d),this._setInputDisabled(s,p),d=!!s.prop("checked"),p=!!s.attr("disabled")}this.$el=this.render({$checkbox:s,hasCheckbox:i,customClass:r,tag:l,id:h,name:u,checked:d,disabled:p,labelLeft:_,labelRight:f,hasLabel:_||f,labelAddClass:m,boxAddClass:g}),this.$checkbox=i?s:this.$el.find("input[type=checkbox]")}return r(e,[{key:"_setInputId",value:function(e,t){void 0!==t&&e.attr("id",t)}},{key:"_setInputClass",value:function(e,t){var i=o.render(l.checkboxClass,{customClass:t});e.addClass(i)}},{key:"_setInputName",value:function(e,t){void 0!==t&&e.attr("name",t)}},{key:"_setInputChecked",value:function(e,t){
void 0!==t&&e.prop("checked",!!t)}},{key:"_setInputDisabled",value:function(e,t){void 0!==t&&(t?e.setAttribute("disabled","disabled"):e.removeAttr("disabled"))}},{key:"render",value:function(e){var t,i=e.$checkbox,n=$(o.render(l.labelWrapper,e,l));return e.hasCheckbox&&(n.insertBefore(i),t=n.find("."+e.customClass).andSelf().filter("."+e.customClass).eq(0),t.prepend(i.detach()),i.addClass(c)),n}},{key:"checked",set:function(e){this._setInputChecked(this.$checkbox,!!e)},get:function(){return!!this.$checkbox.prop("checked")}}]),e}(),$.fn.tvControlCheckbox=(0,s.createTvBlockWithInstance)("tv-control-checkbox",function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new h(TradingView.mergeObj(t,{$checkbox:e}))}),t.default=h,e.exports=t.default}).call(t,i(103))},function(e,t,i){"use strict";var o,n,r,s,a;Object.defineProperty(t,"__esModule",{value:!0}),i.d(t,"lineToolsInfo",function(){return a}),i(11),o=i(126),n={keys:["Shift"],text:window.t("{0}  drawing a straight line at angles of 45")},r={keys:["Shift"],text:window.t("{0}  circle")},s={keys:["Shift"],text:window.t("{0}  square")},a={LineTool5PointsPattern:{icon:i(495),localizedName:window.t("XABCD Pattern")},LineToolABCD:{icon:i(496),localizedName:window.t("ABCD Pattern")},LineToolArc:{icon:i(497),localizedName:window.t("Arc")},LineToolArrow:{icon:i(498),localizedName:window.t("Arrow")},LineToolArrowMarkDown:{icon:i(499),localizedName:window.t("Arrow Mark Down")},LineToolArrowMarkLeft:{icon:i(500),localizedName:window.t("Arrow Mark Left")},LineToolArrowMarkRight:{icon:i(501),localizedName:window.t("Arrow Mark Right")},LineToolArrowMarkUp:{icon:i(502),localizedName:window.t("Arrow Mark Up")},LineToolBalloon:{icon:i(503),localizedName:window.t("Balloon")},LineToolBarsPattern:{icon:i(504),localizedName:window.t("Bars Pattern")},LineToolBezierCubic:{icon:i(505),localizedName:window.t("Double Curve")},LineToolBezierQuadro:{icon:i(506),localizedName:window.t("Curve")},LineToolBrush:{icon:i(507),localizedName:window.t("Brush")},LineToolCallout:{icon:i(508),localizedName:window.t("Callout")},LineToolCircleLines:{icon:i(509),localizedName:window.t("Cyclic Lines")},LineToolCypherPattern:{icon:i(510),localizedName:window.t("Cypher Pattern")},LineToolDateAndPriceRange:{icon:i(511),localizedName:window.t("Date and Price Range")},LineToolDateRange:{icon:i(512),localizedName:window.t("Date Range")},LineToolDisjointAngle:{icon:i(513),localizedName:window.t("Disjoint Angle"),hotKey:Object(o.b)(n)},LineToolElliottCorrection:{icon:i(514),localizedName:window.t("Elliott Correction Wave (ABC)")},LineToolElliottDoubleCombo:{icon:i(515),localizedName:window.t("Elliott Double Combo Wave (WXY)")},LineToolElliottImpulse:{icon:i(516),localizedName:window.t("Elliott Impulse Wave (12345)")},LineToolElliottTriangle:{icon:i(517),localizedName:window.t("Elliott Triangle Wave (ABCDE)")},LineToolElliottTripleCombo:{icon:i(518),localizedName:window.t("Elliott Triple Combo Wave (WXYXZ)")},LineToolEllipse:{icon:i(519),localizedName:window.t("Ellipse"),hotKey:Object(o.b)(r)},
LineToolExtended:{icon:i(520),localizedName:window.t("Extended")},LineToolFibChannel:{icon:i(521),localizedName:window.t("Fib Channel")},LineToolFibCircles:{icon:i(522),localizedName:window.t("Fib Circles"),hotKey:Object(o.b)(r)},LineToolFibRetracement:{icon:i(523),localizedName:window.t("Fib Retracement")},LineToolFibSpeedResistanceArcs:{icon:i(524),localizedName:window.t("Fib Speed Resistance Arcs")},LineToolFibSpeedResistanceFan:{icon:i(525),localizedName:window.t("Fib Speed Resistance Fan"),hotKey:Object(o.b)(s)},LineToolFibSpiral:{icon:i(526),localizedName:window.t("Fib Spiral")},LineToolFibTimeZone:{icon:i(527),localizedName:window.t("Fib Time Zone")},LineToolFibWedge:{icon:i(528),localizedName:window.t("Fib Wedge")},LineToolFlagMark:{icon:i(529),localizedName:window.t("Flag Mark")},LineToolFlatBottom:{icon:i(530),localizedName:window.t("Flat Top/Bottom"),hotKey:Object(o.b)(n)},LineToolGannComplex:{icon:i(531),localizedName:window.t("Gann Square")},LineToolGannFixed:{icon:i(532),localizedName:window.t("Gann Square Fixed")},LineToolGannFan:{icon:i(533),localizedName:window.t("Gann Fan")},LineToolGannSquare:{icon:i(534),localizedName:window.t("Gann Box"),hotKey:Object(o.b)({keys:["Shift"],text:window.t("{0}  fixed increments")})},LineToolGhostFeed:{icon:i(535),localizedName:window.t("Ghost Feed")},LineToolHeadAndShoulders:{icon:i(536),localizedName:window.t("Head and Shoulders")},LineToolHorzLine:{icon:i(537),localizedName:window.t("Horizontal Line"),hotKey:Object(o.b)({keys:["Alt","H"],text:"{0} + {1}"})},LineToolHorzRay:{icon:i(538),localizedName:window.t("Horizontal Ray")},LineToolIcon:{icon:"icon",localizedName:window.t("Font Icons")},LineToolInsidePitchfork:{icon:i(539),localizedName:window.t("Inside Pitchfork")},LineToolNote:{icon:i(540),localizedName:window.t("Note")},LineToolNoteAbsolute:{icon:i(541),localizedName:window.t("Anchored Note")},LineToolParallelChannel:{icon:i(542),localizedName:window.t("Parallel Channel"),hotKey:Object(o.b)(n)},LineToolPitchfan:{icon:i(543),localizedName:window.t("Pitchfan")},LineToolPitchfork:{icon:i(544),localizedName:window.t("Pitchfork")},LineToolPolyline:{icon:i(545),localizedName:window.t("Polyline")},LineToolPrediction:{icon:i(546),localizedName:window.t("Forecast")},LineToolPriceLabel:{icon:i(547),localizedName:window.t("Price Label")},LineToolPriceRange:{icon:i(548),localizedName:window.t("Price Range")},LineToolProjection:{icon:i(549),localizedName:window.t("Projection")},LineToolRay:{icon:i(550),localizedName:window.t("Ray")},LineToolRectangle:{icon:i(551),localizedName:window.t("Rectangle"),hotKey:Object(o.b)({keys:["Shift"],text:window.t("{0}  square")})},LineToolRegressionTrend:{icon:i(552),localizedName:window.t("Regression Trend")},LineToolRiskRewardLong:{icon:i(553),localizedName:window.t("Long Position")},LineToolRiskRewardShort:{icon:i(554),localizedName:window.t("Short Position")},LineToolRotatedRectangle:{icon:i(555),localizedName:window.t("Rotated Rectangle"),hotKey:Object(o.b)(n)},LineToolSchiffPitchfork:{icon:i(556),
localizedName:window.t("Modified Schiff Pitchfork")},LineToolSchiffPitchfork2:{icon:i(557),localizedName:window.t("Schiff Pitchfork")},LineToolSineLine:{icon:i(558),localizedName:window.t("Sine Line")},LineToolText:{icon:i(559),localizedName:window.t("Text",{context:"tool"})},LineToolTextAbsolute:{icon:i(560),localizedName:window.t("Anchored Text")},LineToolThreeDrivers:{icon:i(561),localizedName:window.t("Three Drives Pattern")},LineToolTimeCycles:{icon:i(562),localizedName:window.t("Time Cycles")},LineToolTrendAngle:{icon:i(563),localizedName:window.t("Trend Angle"),hotKey:Object(o.b)(n)},LineToolTrendBasedFibExtension:{icon:i(564),localizedName:window.t("Trend-Based Fib Extension")},LineToolTrendBasedFibTime:{icon:i(565),localizedName:window.t("Trend-Based Fib Time")},LineToolTrendLine:{icon:i(566),localizedName:window.t("Trend Line"),hotKey:Object(o.b)(n)},LineToolTriangle:{icon:i(567),localizedName:window.t("Triangle")},LineToolTrianglePattern:{icon:i(568),localizedName:window.t("Triangle Pattern")},LineToolVertLine:{icon:i(569),localizedName:window.t("Vertical Line"),hotKey:Object(o.b)({keys:["Alt","V"],text:"{0} + {1}"})},LineToolCrossLine:{icon:i(570),localizedName:$.t("Cross Line")},SyncDrawing:{icon:i(571),iconActive:i(572),localizedName:window.t("Sync drawings to all charts")},arrow:{icon:i(573),localizedName:window.t("Arrow")},cursor:{icon:i(574),localizedName:window.t("Cross")},dot:{icon:i(575),localizedName:window.t("Dot")},drawginmode:{icon:i(576),iconActive:i(577),localizedName:window.t("Stay in Drawing Mode")},eraser:{icon:i(578),localizedName:window.t("Eraser")},group:{icon:i(579),localizedName:window.t("Show Hidden Tools")},hideAllDrawings:{icon:i(335),iconActive:i(580),localizedName:window.t("Hide All Drawing Tools")},lockAllDrawings:{icon:i(581),iconActive:i(582),localizedName:window.t("Lock All Drawing Tools")},magnet:{icon:i(583),localizedName:window.t("Magnet Mode snaps drawings placed near price bars to the closest OHLC value")},measure:{icon:i(584),localizedName:window.t("Measure"),hotKey:Object(o.b)({keys:["Shift"],text:window.t("{0} + Click on the chart")})},removeAllDrawingTools:{icon:i(585),localizedName:window.t("Remove All Drawing Tools")},showObjectsTree:{icon:i(586),localizedName:window.t("Show Objects Tree")},zoom:{icon:i(587),localizedName:window.t("Zoom In")},"zoom-out":{icon:i(588),localizedName:window.t("Zoom Out")}}},function(e,t,i){"use strict";function o(e){if(e)return function(t,i,o){function n(t,i){return i?e[t](a,i):e[t](a)}var r,s,a=$(this);return"get"===t?(r=i,"function"==typeof e[r]?n(r,o):e[r]):e[t]?a.each(function(){return n(t,s)}):a}}function n(e,t){function i(e,t,i){return void 0===i?e[t]():e[t](i)}if(e&&t)return e=""+e,function(o,n,a){var l,c,h;return"get"===o?l=n:(c=n,"object"===(void 0===o?"undefined":r(o))&&void 0===n?(c=o,o="init"):"string"!=typeof o&&(o="init")),"getInstance"===o?$(this).eq(0).data(e):"destroy"===o?(h=$(this).eq(0).data(e))?void("function"==typeof h.destroy?(i(h,"destroy",c),
$(this).eq(0).removeData(e)):s.logError("[Block Plugin] "+e+" does not support destroy command")):void console.warn("[Block Plugin] Trying to execute destroy method of "+e+" but it has not been inited"):"get"===o?(h=$(this).eq(0).data(e),h?"function"==typeof h[l]?i(h,l,a):h[l]:void console.warn("[Block Plugin] Trying to get prop or execute method of "+e+" but it has not been inited")):$(this).each(function(){var n=$(this),r=n.data(e);void 0===r&&(r=void 0===c?t(n):t(n,c),n.data(e,r)),"init"!==o&&("function"==typeof r[o]?i(r,o,c):s.logError("[Block Plugin] "+e+" does not support command "+o))})}}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=i(5).getLogger("CommonUI.CreateTVBlockPlugin");e.exports.createTvBlockPlugin=o,e.exports.createTvBlockWithInstance=n},,function(e,t,i){"use strict";function o(e,t,i){this._cache=e,this._cacheRect=t,this._targetRect=i}var n=i(6).Point,r=i(61).pointInRectangle,s=i(9).HitTestResult;o.prototype.draw=function(e){e.translate(.5,.5),e.drawImage(this._cache,this._cacheRect.left,this._cacheRect.top,this._cacheRect.width,this._cacheRect.height,this._targetRect.left,this._targetRect.top,this._targetRect.width,this._targetRect.height),e.translate(-.5,-.5)},o.prototype.hitTest=function(e){var t=new n(this._targetRect.left,this._targetRect.top),i=t.add(new n(this._targetRect.width,this._targetRect.height));return r(e,t,i)?new s(s.REGULAR):null},e.exports=o},,function(e,t,i){"use strict";function o(e){var t,i,o=(e+"").match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return null===o?0:(t=o[1]?o[1].length:0,i=o[2]?parseInt(o[2],0):0,Math.max(0,t-i))}function n(e){return e=Math.abs(e),!Object(h.isInteger)(e)&&e>1&&(e=parseFloat((""+e).replace(/^.+\./,"0."))),0<e&&e<1?Math.pow(10,o(e)):1}function r(e,t){var i,o,r,s,a,l;e.trigger("tvticker-beforechange"),i=e.data("TVTicker"),o=i&&i.step,r=0,r=i.parser?i.parser(e.val()):Object(h.isInteger)(o)?parseInt(e.val(),10):parseFloat(e.val()),isNaN(r)&&(r=0),s=n(o),a=Math.max(s,n(r)),l=t(r,a),i.formatter&&(l=i.formatter(l)),e.val(l),e.change()}function s(e){var t=e.data("TVTicker"),i=t&&t.step,o=t&&t.max;r(e,function(e,t){var n=(Math.round(e*t)+Math.round(i*t))/t;return void 0!==o&&null!==o&&o<n&&(n=e),n})}function a(e){var t=e.data("TVTicker"),i=t&&t.step,o=t&&t.min;r(e,function(e,t){var n=(Math.round(e*t)-Math.round(i*t))/t;return void 0!==o&&null!==o&&n<o&&(n=e),n})}var l,c,h,u;Object.defineProperty(t,"__esModule",{value:!0}),l=i(13),i.n(l),c=i(243),i.n(c),h=i(14),i.n(h),u=i(321),i.n(u),$.fn.TVTicker=function(e){return void 0===e&&(e={}),this.each(function(){var t,i,o,n=!1,r=$(this),l=r.data("TVTicker");l?n=!0:l={step:+r.data("step")||1},"step"in e&&(l.step=+e.step||l.step),"min"in e&&(l.min=e.min),"max"in e&&(l.max=e.max),"formatter"in e&&(l.formatter=e.formatter),"parser"in e&&(l.parser=e.parser),r.data("TVTicker",l),n||(t=$('<div class="tv-ticker">').appendTo(r.parent()),
i=$('<div class="tv-ticker__btn tv-ticker__btn--up">').html(u).appendTo(t),o=$('<div class="tv-ticker__btn tv-ticker__btn--down">').html(u).appendTo(t),t.on("mousedown",function(e){e.preventDefault(),r.focus()}),i.click(function(){r.is(":disabled")||s(r)}),o.click(function(){r.is(":disabled")||a(r)}),r.keydown(function(e){r.is(":disabled")||(38===e.keyCode?i.addClass("i-active"):40===e.keyCode&&o.addClass("i-active"))}),r.keyup(function(e){r.is(":disabled")||(38===e.keyCode?(s(r),i.removeClass("i-active")):40===e.keyCode&&(a(r),o.removeClass("i-active")))}),r.mousewheel(function(e,t){t>0?i.click():o.click()}))})}},function(e,t,i){"use strict";var o,n,r;Object.defineProperty(t,"__esModule",{value:!0}),i.d(t,"PipFormatter",function(){return r}),o=i(3),n=i(19),r=function(e){function t(t,i,o,n){var r=this;return i||(i=1),"forex"!==o&&"cfd"!==o||!n?(r=e.call(this,1)||this,r._isForex=!1):(r=e.call(this,n)||this,r._isForex=!0),r._pipPriceScale=t,r._pipMinMove=i,r._pipMinMove2=n,r}return o.c(t,e),t.prototype.format=function(t,i,o){var n=this._isForex?this._pipMinMove2:this._pipMinMove;return void 0===n&&(n=NaN),e.prototype.format.call(this,t*this._pipPriceScale/n,i,o)},t}(n.PriceFormatter)},,function(e,t,i){function o(e,t,i,o,r,s){if(!e)return void n.logDebug("Missing control");this._control=e,this._property=t,this._applyOnFly=i,this._undoModel=o,this._undoText=r,t&&(this._formatters=[],this._changed=!1,this.setValue(t.value()),t.listeners().subscribe(this,this.propertyChanged))}var n=i(5).getLogger("Chart.PropertyPage.Binding");o.prototype.addFormatter=function(e){this._formatters.push(e),this.setValue(this._property.value())},o.prototype._formatValue=function(e){return this._formatters.reduce(function(e,t){return t(e)},e)},o.prototype._setValueToProperty=function(e){this._setter?this._setter.call(this,e):this.setValueToProperty(e)},o.prototype._attachToControl=function(e,t){var i=this;t?e.on("keyup change input",function(e){var t=i.value();i._setValueToProperty(t),i.setValue(t)}):(e.keypress(function(e){if(i._changed=!0,13===e.which){var t=i.value();i._setValueToProperty(t),i.setValue(t)}}),e.focusout(function(e){var t=i.value();i.changed()&&(i._setValueToProperty(t),i.setValue(t))}),e.change(function(e){var t=i.value();$(e.target).is(".ticker")?(void 0!==i._changeTimerId&&clearTimeout(i._changeTimerId),i._changeTimerId=setTimeout(function(){i._setValueToProperty(t)},250)):i._setValueToProperty(t),i.setValue(t)}))},o.prototype.control=function(){return this._control},o.prototype.changed=function(){return this._changed},o.prototype.setValueToProperty=function(e){this._undoModel.setProperty(this._property,e,this._undoText),this._changed=!1},o.prototype.property=function(){return this._property},o.prototype.propertyChanged=function(e){this.setValue(e.value())},o.prototype.destroy=function(){this._property&&this._property.listeners().unsubscribe(this,this.propertyChanged)},t.Binding=o},function(e,t,i){"use strict";var o;Object.defineProperty(t,"__esModule",{value:!0}),i.d(t,"TimeSpanFormatter",function(){return o}),i(11),
o=function(){function e(){}return e.prototype.format=function(e){var t,i,o,n,r=e<0;return e=Math.abs(e),t=Math.floor(e/86400),e-=86400*t,i=Math.floor(e/3600),e-=3600*i,o=Math.floor(e/60),e-=60*o,n="",t&&(n+=t+$.t("d",{context:"dates"})+" "),i&&(n+=i+$.t("h",{context:"dates"})+" "),o&&(n+=o+$.t("m",{context:"dates"})+" "),e&&(n+=e+$.t("s",{context:"dates"})+" "),r&&(n="-"+n),n.trim()},e}()},,function(e,t,i){"use strict";function o(e,t,i){return e*(1-i)+t*i}function n(e,t,i,r){var s,a,l,c,h;if(r=!r||r<1e12?Date.now():r,s=r-e,a=s>=i.duration,l=o(i.from,i.to,i.easing(s/i.duration)),c=a?i.to:l,h=c-t,i.onStep(h,c),a)return void(i.onComplete&&i.onComplete());requestAnimationFrame(n.bind(null,e,c,i))}function r(e){e.from=e.from||0,e.duration=e.duration||250,e.easing=e.easing||s.easingFunc.easeOutCubic,requestAnimationFrame(n.bind(null,Date.now(),e.from,e))}Object.defineProperty(t,"__esModule",{value:!0}),t.doAnimate=r;var s=i(186)},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14 14" width="14" height="14"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M8.5 1.5L3.5 7l5 5.5"/></svg>'},,function(e,t,i){"use strict";function o(){return[[1,0,0],[0,1,0],[0,0,1]]}function n(e,t){var i,o,n,r=[[0,0,0],[0,0,0],[0,0,0]];for(i=0;i<3;i++)for(o=0;o<3;o++)for(n=0;n<3;n++)r[i][o]+=e[i][n]*t[n][o];return r}function r(e){var t=Math.cos(e),i=Math.sin(e);return[[t,-i,0],[i,t,0],[0,0,1]]}function s(e,t){return[[e,0,0],[0,t,0],[0,0,1]]}function a(e,t){return[[1,0,e],[0,1,t],[0,0,1]]}function l(e,t){var i,o,n=[t.x,t.y,1],r=[0,0,0];for(i=0;i<3;i++)for(o=0;o<3;o++)r[i]+=n[o]*e[i][o];return new c.Point(r[0],r[1])}Object.defineProperty(t,"__esModule",{value:!0});var c=i(6);t.identityMatrix=o,t.multiplyMatrices=n,t.rotationMatrix=r,t.scalingMatrix=s,t.translationMatrix=a,t.transformPoint=l},function(e,t,i){"use strict";function o(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}Object.defineProperty(t,"__esModule",{value:!0}),t.regExpEscape=o},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 8" width="16" height="8"><path d="M0 1.475l7.396 6.04.596.485.593-.49L16 1.39 14.807 0 7.393 6.122 8.58 6.12 1.186.08z"/></svg>'},function(e,t,i){"use strict";var o,n;i.d(t,"a",function(){return n}),i(3),o=i(18),i.n(o),function(e){e[e.Enter=13]="Enter",e[e.Space=32]="Space",e[e.Backspace=8]="Backspace",e[e.DownArrow=40]="DownArrow",e[e.UpArrow=38]="UpArrow",e[e.RightArrow=39]="RightArrow",e[e.LeftArrow=37]="LeftArrow",e[e.Escape=27]="Escape",e[e.Tab=9]="Tab"}(n||(n={})),function(){function e(){this._handlers=new Map}e.prototype.registerHandlers=function(e){var t=this;Object.keys(e).forEach(function(i){var o,n=parseInt(i),r=e[n];Array.isArray(r)||(r=[r]),t._handlers.has(n)?(o=t._handlers.get(n))&&r.forEach(function(e){return o.add(e)}):t._handlers.set(n,new Set(r))})},e.prototype.unregisterHandlers=function(e){var t=this;Object.keys(e).forEach(function(i){var o,n=parseInt(i),r=e[n];Array.isArray(r)||(r=[r]),
t._handlers.has(n)&&(o=t._handlers.get(n))&&r.forEach(function(e){return o.delete(e)})})},e.prototype.deleteAllHandlers=function(){this._handlers=new Map},e.prototype.registerHandler=function(e,t){if(this._handlers.has(e)){var i=this._handlers.get(e);i&&i.add(t)}else this._handlers.set(e,new Set([t]))},e.prototype.unregisterHandler=function(e,t){if(this._handlers.has(e)){var i=this._handlers.get(e);i&&i.delete(t)}},e.prototype.listen=function(e){if(this._handlers.has(e.keyCode)){var t=this._handlers.get(e.keyCode);t&&t.forEach(function(t){return t(e)})}}}()},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 95.939 95.939" width="95.939" height="95.939"><path d="M62.82 47.97l32.53-32.534a2 2 0 0 0 0-2.828L83.332.586a2 2 0 0 0-2.827 0L47.97 33.12 15.435.587c-.75-.75-2.078-.75-2.828 0L.587 12.607a2 2 0 0 0 0 2.83L33.12 47.97.588 80.504a2 2 0 0 0 0 2.828l12.02 12.02a1.997 1.997 0 0 0 2.83 0L47.97 62.818l32.535 32.535a2 2 0 0 0 2.827 0l12.02-12.02c.78-.783.78-2.05 0-2.83L62.82 47.97z"/></svg>'},function(e,t,i){"use strict";function o(e){var t,i=e.className,o=e.icon,u=e.clearable,d=e.onClear,p=e.size,_=e.strictLeftDirectionInput,f=n.e(e,["className","icon","clearable","onClear","size","strictLeftDirectionInput"]),m=s(c.inputWrapper,(t={},t[i]=!!i,t[c.iconed]=!!o,t[c.clearable]=u,t));return r.createElement(h,n.a({theme:c,className:m,leftComponent:o?r.createElement(a.a,{key:"inputIcon",icon:o,className:c.inputIcon}):void 0,rightComponent:u?r.createElement(a.a,{className:c.clearIcon,icon:l,key:"clearIcon",onClick:d}):void 0,sizeMode:p,strictLeftDirectionInput:_},f))}var n,r,s,a,l,c,h;i.d(t,"a",function(){return h}),t.b=o,n=i(3),r=i(18),i.n(r),s=i(99),i.n(s),a=i(297),l=i(323),i.n(l),c=i(208),i.n(c),h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.c(t,e),t.prototype.render=function(){var e,t,i,o,a=this.props,l=a.theme,h=a.error,u=a.success,d=a.sizeMode,p=a.leftComponent,_=a.rightComponent,f=a.grouped,m=a.fontSize,g=a.reference,y=a.className,v=(a.strictLeftDirectionInput,n.e(a,["theme","error","success","sizeMode","leftComponent","rightComponent","grouped","fontSize","reference","className","strictLeftDirectionInput"])),b={fontSize:m},S=s(l.textInput,this.props.strictLeftDirectionInput&&c.textInputLeftDirection,(e={},e[l.error]=h,e[l.success]=u,e[l[d]]=!!d,e)),w=s(l.inputWrapper,(t={},t[y]=!!y,t[l.grouped]=f,t)),T=[],P=r.createElement("input",n.a({ref:g,className:S,key:"textInput",style:b},v));return p&&(i={className:s(l.leftComponent,p.props.className),key:"leftComponent"},T.push(r.cloneElement(p,i))),T.push(P),_&&(o={className:s(l.rightComponent,_.props.className),key:"rightComponent"},T.push(r.cloneElement(_,o))),r.createElement("div",{className:w},T)},t}(r.PureComponent)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i.d(t,"LabelSettings",function(){return o});var o;!function(e){e.offset=8,e.font="Arial",e.fontSize=12,e.lineSpacing=10,e.bgColor="rgba(255,255,255,.8)",e.borderColor="#e3e3e3",e.padding=8}(o||(o={}))},function(e,t,i){
"use strict";function o(e){i.e(8).then(function(t){i(359).showGoToDateDialog(e)}.bind(null,i)).catch(i.oe)}Object.defineProperty(t,"__esModule",{value:!0}),t.showGoToDateDialog=o},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14 14" width="14" height="14"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M5.5 1.5l5 5.5-5 5.5"/></svg>'},,,function(e,t,i){"use strict";!function(e){e.fn.selectable=function(t){return this.each(function(){var i=e(this);i.css("user-select",t?"text":"none"),i.css("-moz-user-select",t?"text":"-moz-none"),i.css("-webkit-user-select",t?"auto":"none"),(e.browser.msie||e.browser.opera)&&i.attr("unselectable",t?"off":"on")})}}(jQuery)},,function(e,t,i){"use strict";var o,n,r,s,a,l,c,h,u,d;Object.defineProperty(t,"__esModule",{value:!0}),i.d(t,"SERIES_ICONS",function(){return d}),o=i(39),n=i(484),i.n(n),r=i(485),i.n(r),s=i(486),i.n(s),a=i(487),i.n(a),l=i(488),i.n(l),c=i(489),i.n(c),h=i(490),i.n(h),u={},u[o.STYLE_AREA]=n,u[o.STYLE_BARS]=r,u[o.STYLE_CANDLES]=s,u[o.STYLE_HEIKEN_ASHI]=a,u[o.STYLE_HOLLOW_CANDLES]=l,u[o.STYLE_LINE]=c,u[o.STYLE_BASELINE]=h,d=u},function(e,t){},function(e,t,i){"use strict";function o(e){this._options=e||{},this._setInput(),this._caption=$('<i class="interval-caption">').html("&nbsp;"),this._helpTooltipTrigger=$('<i class="help-tooltip-trigger apply-common-tooltip common-tooltip-below">').text("?").attr("title",$.t("Type the interval number for minute charts (i.e. 5 if it is going to be a five minute chart). Or number plus letter for H (Hourly), D (Daily), W (Weekly), M (Monthly) intervals (i.e. D or 2H)")),this._dialogTitle=$.t("Change Interval")}function n(e){var t=/[\dhdwms]/i,i=/[\dhdwm]/i;return c.enabled("seconds_resolution")?t.test(e):i.test(e)}var r=i(64).linking,s=i(129).parseIntervalValue,a=i(129).intervalIsSupported,l=i(129).sanitizeIntervalValue,c=i(4),h=i(62);o.prototype._setInput=function(){this._input=$('<input type="text" class="change-interval-input" autocomplete="off" maxlength="5">'),this._input.on("keypress",this._handleInput.bind(this)).on("input",function(){this._validate(),this._updateCaption()}.bind(this)).on("blur",function(){setTimeout(this._submit.bind(this),0)}.bind(this))},o.prototype._validate=function(){var e,t=this._input.val();this._parsed=s(t),this._valid=!this._parsed.error,this._supported=!this._parsed.error&&a(t),e=this._parsed.unit,this._supported&&("R"===e&&this._parsed.qty>h.getMaxResolutionValue("R")?this._supported=!1:null!==e&&"H"!==e||this._parsed.qty*("H"===e?60:1)>1440&&(this._supported=!1))},o.prototype._updateCaption=function(){var e,t,i;this._valid&&this._supported?(t=this._parsed.qty||1,i=this._parsed.unit||"",e=h.getTranslatedResolutionModel(t+i).hint,this._input.add(this._caption).removeClass("error")):(e=this._parsed.error?"&nbsp;":$.t("Not applicable"),this._input.add(this._caption).addClass("error")),this._caption.html(e)},o.prototype._handleInput=function(e){if(13===e.which)return void this._submit()
;e.ctrlKey||e.metaKey||!e.charCode||!e.which||e.which<=32||n(String.fromCharCode(e.charCode))||e.preventDefault()},o.prototype._submit=function(){var e,t;TVDialogs.isOpen(this._dialogTitle)&&(this._valid&&this._supported&&(e=l(this._input.val()),t=r.interval.value(),e&&t!==e&&"function"==typeof this._options.callback&&this._options.callback(e)),TVDialogs.destroy(this._dialogTitle))},o.prototype._setInitialValue=function(e){var t,i;e=e||this._options.initialValue,t="",i=!1,e&&","!==e?t=l(e)||"":(e=r.interval.value(),t=e,i=!0),this._input.val(t),i&&this._input.select()},o.prototype.isValid=function(){return!!this._valid},o.prototype.show=function(e){var t=TVDialogs.createDialog(this._dialogTitle,{hideCloseCross:!0,addClass:"change-interval-dialog",ownerDocument:this._options.ownerDocument}),i=t.find("._tv-dialog-content");return t.css("min-width",0),i.css("min-width",0).mousedown(function(e){this._input.is(e.target)||e.preventDefault()}.bind(this)).append(this._input.add(this._caption).add(this._helpTooltipTrigger)),TVDialogs.applyHandlers(t),TVDialogs.positionDialog(t),this._setInitialValue(e),this._validate(),this._updateCaption(),t},e.exports=o},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g><path fill-rule="nonzero" d="M4.034 14.18l-.07-.18.07-.18c1.535-3.975 5.645-6.82 9.966-6.82 4.32 0 8.431 2.845 9.966 6.82l.07.18-.07.18c-1.535 3.975-5.646 6.82-9.966 6.82-4.321 0-8.431-2.845-9.966-6.82zm9.966 5.82c3.84 0 7.521-2.503 8.962-6-1.441-3.497-5.122-6-8.962-6-3.841 0-7.521 2.503-8.962 6 1.441 3.497 5.121 6 8.962 6z"/><path d="M11 14.001c0 1.66 1.341 2.999 3.001 2.999s2.999-1.339 2.999-2.999c0-1.66-1.339-3.001-2.999-3.001-1.66 0-3.001 1.341-3.001 3.001z"/></g></svg>'},function(e,t,i){"use strict";var o,n;i.d(t,"b",function(){return o}),i.d(t,"a",function(){return n}),o=52,n=5},function(e,t,i){"use strict";function o(){var e,t,i=[];for(i=i.concat([61536,61537,61538,61539]),i=i.concat([61725,61726]),i=i.concat([61575,61576,61796,61797]),i=i.concat([61779,61780,61781,61782,61783,61784,61785,61786]),e=i.slice(0),t=61440;t<=61846;t++)-1===i.indexOf(t)&&(t%16==15&&61487!==t||t>=61620&&t<=61630||61718!==t&&61719!==t&&61472!==t&&61619!==t&&e.push(t));return e}Object.defineProperty(t,"__esModule",{value:!0}),i.d(t,"availableIcons",function(){return n});var n=o()},function(e,t,i){"use strict";function o(e,t){return window.fetch(e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.fetch=o},function(e,t){},function(e,t,i){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n;Object.defineProperty(t,"__esModule",{value:!0}),n=function(){function e(e,t){var i,o;for(i=0;i<t.length;i++)o=t[i],o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}(),t.KeyboardListener=function(){function e(){
var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"keydown",i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];o(this,e),this._event=t,this._preventDefault=i}return n(e,[{key:"regHandlers",value:function(e){this._handlers=e}},{key:"watchOn",value:function(e){this._listener=this._regListener(),this._watchingEl=e,e.addEventListener(this._event,this._listener)}},{key:"stopWatching",value:function(){this._watchingEl.removeEventListener(this._event,this._listener)}},{key:"_regListener",value:function(){var e=this;return function(t){var i=t.which,o=e._getHandler(i);t.stopPropagation(),o(t)}}},{key:"_getHandler",value:function(e){var t=this,i=t._handlers[e],o=function(){},n=function(e){t._preventDefault&&e.preventDefault(),i(e)};return i?n:o}}]),e}()},function(e,t,i){"use strict";function o(e){l.call(this,e),this.ch=e.char[0]||" ",this.fontFamily=e.fontFamily||"Arial",this._charCache=new a(this.ch,!1,!1,this.fontFamily,this.height)}var n=i(6).Point,r=i(29).selectionTolerance,s=i(9).HitTestResult,a=i(266),l=i(42).PaneRendererAbstractShape;inherit(o,l),o.prototype.drawShape=function(e){var t,i,o,n,r,s,a=this._vertOffset>0?1:-1;for(t=0,i=this.items.length;t<i;t++)o=this.items[t],n=o.x,r=o.y+this._vertOffset-a*Math.round(this.height/2),s=o.style&&null!=o.style.color?o.style.color:this._color,this._charCache.paintTo(e,s,n,r,"center",this._vertOffset>0?"middle":"bottom")},o.prototype.hitTest=function(e){var t,i,o,a=this._vertOffset,l=r(this.height);for(t=0;t<this.items.length;++t)if((i=this.items[t])&&(o=new n(i.x,i.y+a),o.subtract(e).length()<=l))return new s(s.REGULAR);return null},t.PaneRendererUnicodeChar=TradingView.PaneRendererUnicodeChar=o},function(e,t,i){"use strict";function o(e){var t,i=Object(n.get_timezone)(e).offset_utc(Date.now()),o="",r=i/1e3/60/60;return r%1&&(o=":"+r%1*60),t="",t=r>0?"+"+(r-r%1)+o:0===r?"":r-r%1+o+"",{offset:i,string:"UTC"+t}}var n;t.a=o,n=i(34),i.n(n)},,,,,,,function(e,t,i){"use strict";function o(e){var t,i;return void 0===e&&(e=location.host),t=["i18n.tradingview.com","partial.tradingview.com","www.tradingview.com","wwwcn.tradingview.com"],i=["d33t3vvu2t2yu5.cloudfront.net","dwq4do82y8xi7.cloudfront.net","s.tradingview.com","s3.tradingview.com"],-1!==t.indexOf(e)||-1!==i.indexOf(e)||e.match(/^[a-z]{2}\.tradingview\.com/)||e.match(/prod-[^.]+.tradingview.com/)?"battle":-1!==e.indexOf("tradingview.com")?"staging":e.match(/webcharts/)?"staging_local":(e.match(/^localhost(:\d+)?$/),"local")}function n(){return"local"===o()}function r(){return"battle"===o()}function s(){return!r()}Object.defineProperty(t,"__esModule",{value:!0}),t.environment=o,t.isLocal=n,t.isProd=r,t.isDebug=s},function(e,t,i){"use strict";function o(e,t,i){this._textSizeCache=t,this._data=e,this._fontSize=e.fontsize?e.fontsize:e.fontSize?e.fontSize:12,this._lineSpacing="number"==typeof this._data.lineSpacing&&this._data.lineSpacing?this._data.lineSpacing:0,e.lines=this._lines=l.prototype.wordWrap.call(this,e.text,e.wordWrapWidth),this._hittest=i||new c(c.MOVEPOINT)}function n(){
var e=document.createElement("canvas");e.width=0,e.height=0,r=e.getContext("2d"),e=null}var r,s=i(6).Point,a=i(61).pointInRectangle,l=i(188).TextRenderer,c=i(9).HitTestResult,h=i(51).drawRoundRect,u={priceRange:{width:15,height:14,data:[134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,134,134,138,255,134,134,138,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,134,134,138,255,134,134,138,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255]},barsRange:{width:16,height:15,
data:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,0,0,0,0,0,0,0,0,134,134,138,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,0,0,0,0,0,0,0,0,134,134,138,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,134,134,138,255,134,134,138,255,0,0,0,0,134,134,138,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,136,136,136,56,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,0,0,0,0,0,0,0,0,134,134,138,255,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,136,136,136,56,134,134,138,255,134,134,138,255,136,136,136,56,134,134,138,255,0,0,0,0,0,0,0,0,134,134,138,255,134,134,138,255,0,0,0,0,0,0,0,0,134,134,138,255,134,134,138,255,0,0,0,0,0,0,0,0,134,134,138,255,136,136,136,56,134,134,138,255,134,134,138,255,136,136,136,56,134,134,138,255,0,0,0,0,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,0,0,0,0,134,134,138,255,136,136,136,56,134,134,138,255,134,134,138,255,136,136,136,56,134,134,138,255,0,0,0,0,0,0,0,0,134,134,138,255,134,134,138,255,0,0,0,0,0,0,0,0,134,134,138,255,134,134,138,255,0,0,0,0,0,0,0,0,134,134,138,255,136,136,136,56,134,134,138,255,134,134,138,255,137,137,137,74,134,134,138,255,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,0,0,0,0,0,0,0,0,134,134,138,255,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,137,137,137,74,134,134,138,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,0,0,0,0,134,134,138,255,134,134,138,255,134,134,138,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,0,0,0,0,0,0,0,0,134,134,138,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,0,0,0,0,0,0,0,0,134,134,138,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},angle:{width:14,height:12,
data:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,130,130,134,76,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,130,130,134,76,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,130,130,134,76,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,130,130,134,76,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,130,130,134,76,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,130,130,134,76,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,130,130,134,76,134,134,138,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,130,130,134,76,0,0,0,0,0,0,0,0,134,134,138,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,130,130,134,76,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,130,130,134,76,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255]}};o.prototype._preRender=function(){var e,t,i,o,a,l,c,h,u,d,p,_,f,m,g,y,v,b,S,w,T,P,x;if(!this._preRendered){if(r||n(),e=this._data.points[0].x+(this._data.offsetX||0),t=e,i=this._data.points[0].y+(this._data.offsetY||0),o=i,a=this._fontSize,l=this._lineSpacing,c=a+l,h=c*this._lines.length-l,r.textBaseline="top",r.font=this.fontStyle(),u=[],this._data.wordWrapWidth)for(d=this._data.wordWrapWidth,p=0;p<this._lines.length;p++)u.push(this._data.wordWrapWidth);else for(d=0,p=0;p<this._lines.length;p++)_=r.measureText(this._lines[p]).width,u.push(_),d=Math.max(d,_);if(this._data.backgroundColor||this._data.borderColor||this._data.highlightBorder&&this._data.wordWrapWidth){f={top:this._data.paddingTop||0,right:this._data.paddingRight||0,bottom:this._data.paddingBottom||0,left:this._data.paddingLeft||0},m={x:0,y:0},this._data.backgroundHorzInflate&&(g=this._data.backgroundHorzInflate/2,f.left+=g,f.right+=g,m.x=-g),this._data.backgroundVertInflate&&(y=this._data.backgroundVertInflate/2,f.top+=y,f.bottom+=y,m.y=-y),v="number"==typeof this._data.padding?this._data.padding:~~(a/6);for(p in f)f[p]||(f[p]=v);b={x:Math.floor(e+m.x),y:Math.floor(i+m.y),w:Math.ceil(d+f.left+f.right),h:Math.ceil(h+f.top+f.bottom)},t+=f.left+m.x,o+=f.top+m.y,"bottom"!==this._data.vertAlign&&"middle"!==this._data.vertAlign||(S="middle"===this._data.vertAlign?i-b.h/2:i-b.h-(b.y-i),w=S-b.y,o+=w,b.y=S),
"right"!==this._data.horzAlign&&"center"!==this._data.horzAlign||(T="center"===this._data.horzAlign?e-b.w/2:e-b.w-(b.x-e),P=T-b.x,t+=P,b.x=T,!0!==this._data.doNotAlignText&&("right"===this._data.horzAlign?(r.textAlign="end",t+=d):(r.textAlign="center",t+=d/2))),b.w%2!=0&&b.w++,b.x+=.5,b.y+=.5,this._boundingRect=[new s(b.x,b.y),new s(b.x+b.w,b.y+b.h)],this._rect=b,this._padding=f,this._defaultPadding=v}else"bottom"!==this._data.vertAlign&&"middle"!==this._data.vertAlign||(o-=Math.round(h*("middle"===this._data.vertAlign?.5:1))),x=t,"right"!==this._data.horzAlign&&"center"!==this._data.horzAlign||(x-=Math.round(d*("center"===this._data.horzAlign?.5:1))),this._boundingRect=[new s(x,o),new s(x+d,o+h)];this._textPoint={x:t,y:o},this._textSizeCache&&(this._textSizeCache.widths=u),this._preRendered=!0,this._maxWidth=d}},o.prototype._drawIcon=function(e,t,i,o){var n,r,s,a;if(u.hasOwnProperty(o)){if(n=u[o],!n.src){for(n.src=document.createElement("canvas"),n.src.width=n.width,n.src.height=n.height,r=n.src.getContext("2d"),s=r.createImageData(n.width,n.height),a=0;a<n.data.length;a++)s.data[a]=n.data[a];r.putImageData(s,0,0)}e.drawImage(n.src,t,i)}},o.prototype.fontStyle=function(){return(this._data.bold?"bold ":"")+(this._data.italic?"italic ":"")+this._fontSize+"px "+this._data.font},o.prototype.draw=function(e){var t,i,o,n,r,s,a,l,c,u,d;if(0!==this._data.points.length){for(this._preRender(),t=this._fontSize,i=this._lineSpacing,o=t+i,e.textBaseline="top",e.font=this.fontStyle(),n=this._rect,(this._data.backgroundColor||this._data.borderColor||this._data.highlightBorder&&this._data.wordWrapWidth)&&this._rect?("right"!==this._data.horzAlign&&"center"!==this._data.horzAlign||!0!==this._data.doNotAlignText&&(e.textAlign="right"===this._data.horzAlign?"end":"center"),this._data.backgroundRoundRect?(h(e,n.x,n.y,n.w,n.h,this._data.backgroundRoundRect),this._data.backgroundColor&&(e.fillStyle=this._data.backgroundColor,e.globalAlpha=this._data.backgroundTransparency,e.fill(),e.globalAlpha=1),this._data.borderColor&&(r="number"==typeof this._data.borderWidth?this._data.borderWidth:~~Math.max(t/12,1),e.strokeStyle=this._data.borderColor,e.lineWidth=r,e.stroke())):(this._data.backgroundColor&&(e.fillStyle=this._data.backgroundColor,e.globalAlpha=this._data.backgroundTransparency,e.fillRect(n.x,n.y,n.w,n.h),e.globalAlpha=1),this._data.borderColor?(r="number"==typeof this._data.borderWidth?this._data.borderWidth:~~Math.max(t/12,1),e.strokeStyle=this._data.borderColor,e.lineWidth=r,e.strokeRect(n.x-r/2,n.y-r/2,n.w+r,n.h+r)):this._data.highlightBorder&&(e.strokeStyle=this._data.color,e.lineWidth=1,e.beginPath(),l=[3,1],e.dashedLineTo(n.x-.5,a=n.y-.5,s=n.x+n.w+.5,a,l),e.dashedLineTo(s,a,s,a=n.y+n.h+.5,l),e.dashedLineTo(s=n.x-.5,a,n.x+n.w+.5,a,l),e.dashedLineTo(s,n.y-.5,s,a,l),e.globalAlpha=.5,e.stroke(),e.globalAlpha=1)),this._data.icons&&this._data.icons.forEach(function(t,i){var r=n.x+this._defaultPadding,s=n.y+this._padding.top+o*i;this._drawIcon(e,r,s,t)
},this)):"right"===this._data.horzAlign?e.textAlign="end":"center"===this._data.horzAlign&&(e.textAlign="center"),c=this._textPoint.x,u=this._textPoint.y,e.fillStyle=this._data.color,this._data.forceTextAlign&&(e.textAlign=this._data.horzAlign?this._data.horzAlign:"left"),d=0;d<this._lines.length;d++)e.fillText(this._lines[d],c,u),u+=o;return{width:n.w+2}}},o.prototype.hitTest=function(e){return 0===this._data.points.length?null:(this._preRender(),this._boundingRect&&a(e,this._boundingRect[0],this._boundingRect[1])?this._hittest:null)},t.TrendLineStatsRenderer=o},,,function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i.d(t,"RiskRewardPointIndex",function(){return o});var o;!function(e){e[e.Entry=0]="Entry",e[e.Close=1]="Close",e[e.ActualEntry=2]="ActualEntry",e[e.ActualClose=3]="ActualClose"}(o||(o={}))},function(e,t,i){"use strict";var o,n;Object.defineProperty(t,"__esModule",{value:!0}),i.d(t,"AlertStatus",function(){return o}),i.d(t,"Direction",function(){return n}),function(e){e[e.Waiting=0]="Waiting",e[e.Success=1]="Success",e[e.Failure=2]="Failure"}(o||(o={})),function(e){e[e.Up=1]="Up",e[e.Down=2]="Down"}(n||(n={}))},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i.d(t,"CalloutConsts",function(){return o});var o;!function(e){e[e.RoundRadius=8]="RoundRadius",e[e.TextMargins=2]="TextMargins",e[e.MinWidth=100]="MinWidth"}(o||(o={}))},function(e,t,i){"use strict";function o(e,t){return e.compareTo(t)}function n(e){return Array.from(e).reduce(function(e,t){var i=+t;return-1===e.indexOf(i)&&e.push(i),e},[])}function r(e,t,i){var o=6e4,n=new Date(t.valueOf()+e*o);return e+(i.offset_loc(t)/o-i.offset_loc(n)/o)}var s,a,l,c,h,u,d,p;Object.defineProperty(t,"__esModule",{value:!0}),i.d(t,"SessionEntry",function(){return d}),i.d(t,"ExchangeSession",function(){return p}),s=i(34),i.n(s),a=i(78),l=i(5),c=Object(l.getLogger)("Chart.Model.ExchangeSession"),h=[s.MONDAY,s.TUESDAY,s.WEDNESDAY,s.THURSDAY,s.FRIDAY],u=[s.SUNDAY,s.MONDAY,s.TUESDAY,s.WEDNESDAY,s.THURSDAY,s.FRIDAY,s.SATURDAY],d=function(){function e(e,t,i){this._dayOfWeek=e,this._start=t,this._length=i}return e.prototype.start=function(){return this._start},e.prototype.alignedStart=function(){return this._start<0?this._start+s.minutesPerDay:this._start},e.prototype.isOvernight=function(){return this._start<0},e.prototype.dayOfWeek=function(){return this._dayOfWeek},e.prototype.length=function(){return this._length},e.prototype.weight=function(){return this._dayOfWeek*s.minutesPerDay+this._start},e.prototype.compareTo=function(e){var t=this.weight(),i=t+this._length,o=e.weight();return t<=o&&o<i?0:t>o?1:-1},e}(),p=function(){function e(e){void 0===e&&(e="0000-0000");var t=this;this._entries=[],this._firstDayOfWeek=s.MONDAY,this._weekEndsCount=null,"24x7"===e.toLowerCase()?u.forEach(function(e){t.addSessionEntry(e,0,0)}):this._parseSpec(e),this._entries.sort(o)}return e.prototype.entries=function(){return this._entries},e.prototype.firstDayOfWeek=function(){return this._firstDayOfWeek},
e.prototype.addSessionEntry=function(e,t,i){i<=t&&0!==t&&(t-=s.minutesPerDay);var o=i===t?s.minutesPerDay:i-t;this._entries.push(new d(e,t,o))},e.prototype.isWeekEnd=function(e){var t=Object(a.lowerbound)(this._entries,new d(e,0,0),function(e,t){return e.dayOfWeek()<t.dayOfWeek()});return t>this._entries.length-1||this._entries[t].dayOfWeek()!==e},e.prototype.weekEndsCount=function(){if(null===this._weekEndsCount){var e={};this._entries.forEach(function(t){e[t.dayOfWeek()]=1}),this._weekEndsCount=7-Object.keys(e).reduce(function(t,i){return t+(e[+i]||0)},0)}return this._weekEndsCount},e.prototype.hasWeekEnds=function(){return this.weekEndsCount()>0},e.prototype.indexOfSessionEntry=function(e,t){var i=Object(a.lowerbound)(this._entries,new d(e,t,0),function(e,t){return e.compareTo(t)<0});return i>this._entries.length-1?0:i},e.prototype.findSessionEntry=function(e,t){return this._entries[this.indexOfSessionEntry(e,t)]},e.prototype.correctTradingDay=function(e,t){var i=s.get_day_of_week(e),o=60*s.get_hours(e)+s.get_minutes(e),n=this.findSessionEntry(i,o),r=n.dayOfWeek(),a=(r-i+7)%7;return 0!==a?s.add_days_considering_dst(t,e,a):e},e.prototype.alignToSessionStart=function(e,t){var i=s.get_day_of_week(e),o=s.get_minutes_from_midnight(e),n=this.findSessionEntry(i,o),a=n.alignedStart(),l=n.dayOfWeek(),c=n.isOvernight(),h=(l-i+7)%7-(c?1:0);return 0!==h&&s.add_date(e,h),s.set_hms(e,a/60|0,a%60,0,0),r(n.length(),e,t)},e.prototype._parseSpec=function(e){var t=this,i={},o=!1;e=this._parseFirstDayOfWeek(e),e.split("|").forEach(function(e){var t,r,s=e.split(":");if(1!==s.length&&2!==s.length)return void c.logError("Bad session section: "+e);if(t=1===s.length){if(o)return void c.logError("Duplicated default section: "+e);o=!0}r=t?h:n(s[1]),r.forEach(function(e){t&&i[e]||(i[e]=s[0])})}),u.forEach(function(o){var n=i[o];void 0!==n&&n.split(",").forEach(function(i){var n,r,a=i.split("-");2!==a.length&&(c.logError("Bad sessions spec: "+e),a=["0000","0000"]),n=a[0],r=a[1],t.addSessionEntry(o,s.get_minutes_from_hhmm(n),s.get_minutes_from_hhmm(r))})})},e.prototype._parseFirstDayOfWeek=function(e){var t,i,o,n=e.split(";");return n.length>2?(c.logError("Only one `first day` specification expected @ session "+e),e):1===n.length?e:(t=n[0].indexOf("-")>=0,i=t?NaN:parseInt(n[0]),o=1,isNaN(i)&&(o=0,i=parseInt(n[1])),i<s.SUNDAY||i>s.SATURDAY?(c.logError("Unexpected day index @ session: "+e+"; day index "+i),e):(this._firstDayOfWeek=i,n[o]))},e}()},,function(e,t,i){var o;!function(n,r,s,a){"use strict";function l(e,t,i){return setTimeout(p(e,i),t)}function c(e,t,i){return!!Array.isArray(e)&&(h(e,i[t],i),!0)}function h(e,t,i){var o;if(e)if(e.forEach)e.forEach(t,i);else if(e.length!==a)for(o=0;o<e.length;)t.call(i,e[o],o,e),o++;else for(o in e)e.hasOwnProperty(o)&&t.call(i,e[o],o,e)}function u(e,t,i){var o="DEPRECATED METHOD: "+t+"\n"+i+" AT \n";return function(){
var t=Error("get-stack-trace"),i=t&&t.stack?t.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",r=n.console&&(n.console.warn||n.console.log);return r&&r.call(n.console,o,i),e.apply(this,arguments)}}function d(e,t,i){var o,n=t.prototype;o=e.prototype=Object.create(n),o.constructor=e,o._super=n,i&&fe(o,i)}function p(e,t){return function(){return e.apply(t,arguments)}}function _(e,t){return typeof e==Tt?e.apply(t?t[0]||a:a,t):e}function f(e,t){return e===a?t:e}function m(e,t,i){h(b(t),function(t){e.addEventListener(t,i,!1)})}function g(e,t,i){h(b(t),function(t){e.removeEventListener(t,i,!1)})}function y(e,t){for(;e;){if(e==t)return!0;e=e.parentNode}return!1}function v(e,t){return e.indexOf(t)>-1}function b(e){return e.trim().split(/\s+/g)}function S(e,t,i){if(e.indexOf&&!i)return e.indexOf(t);for(var o=0;o<e.length;){if(i&&e[o][i]==t||!i&&e[o]===t)return o;o++}return-1}function w(e){return Array.prototype.slice.call(e,0)}function T(e,t,i){for(var o,n=[],r=[],s=0;s<e.length;)o=t?e[s][t]:e[s],S(r,o)<0&&n.push(e[s]),r[s]=o,s++;return i&&(n=t?n.sort(function(e,i){return e[t]>i[t]}):n.sort()),n}function P(e,t){for(var i,o,n=t[0].toUpperCase()+t.slice(1),r=0;r<St.length;){if(i=St[r],(o=i?i+n:t)in e)return o;r++}return a}function x(){return ye++}function C(e){var t=e.ownerDocument||e;return t.defaultView||t.parentWindow||n}function L(e,t){var i=this;this.manager=e,this.callback=t,this.element=e.element,this.target=e.options.inputTarget,this.domHandler=function(t){_(e.options.enable,[e])&&i.handler(t)},this.init()}function I(e){var t=e.options.inputClass;return new(t||(Se?H:we?q:be?Y:W))(e,M)}function M(e,t,i){var o=i.pointers.length,n=i.changedPointers.length,r=t&Ie&&o-n==0,s=t&(ke|Ae)&&o-n==0;i.isFirst=!!r,i.isFinal=!!s,r&&(e.session={}),i.eventType=t,k(e,i),e.emit("hammer.input",i),e.recognize(i),e.session.prevInput=i}function k(e,t){var i,o,n,r,s,a,l=e.session,c=t.pointers,h=c.length;l.firstInput||(l.firstInput=D(t)),h>1&&!l.firstMultiple?l.firstMultiple=D(t):1===h&&(l.firstMultiple=!1),i=l.firstInput,o=l.firstMultiple,n=o?o.center:i.center,r=t.center=V(c),t.timeStamp=Ct(),t.deltaTime=t.timeStamp-i.timeStamp,t.angle=z(n,r),t.distance=B(n,r),A(l,t),t.offsetDirection=R(t.deltaX,t.deltaY),s=O(t.deltaTime,t.deltaX,t.deltaY),t.overallVelocityX=s.x,t.overallVelocityY=s.y,t.overallVelocity=xt(s.x)>xt(s.y)?s.x:s.y,t.scale=o?F(o.pointers,c):1,t.rotation=o?N(o.pointers,c):0,t.maxPointers=l.prevInput?t.pointers.length>l.prevInput.maxPointers?t.pointers.length:l.prevInput.maxPointers:t.pointers.length,E(l,t),a=e.element,y(t.srcEvent.target,a)&&(a=t.srcEvent.target),t.target=a}function A(e,t){var i=t.center,o=e.offsetDelta||{},n=e.prevDelta||{},r=e.prevInput||{};t.eventType!==Ie&&r.eventType!==ke||(n=e.prevDelta={x:r.deltaX||0,y:r.deltaY||0},o=e.offsetDelta={x:i.x,y:i.y}),t.deltaX=n.x+(i.x-o.x),t.deltaY=n.y+(i.y-o.y)}function E(e,t){var i,o,n,r,s,l,c,h=e.lastInterval||t,u=t.timeStamp-h.timeStamp
;t.eventType!=Ae&&(u>Le||h.velocity===a)?(s=t.deltaX-h.deltaX,l=t.deltaY-h.deltaY,c=O(u,s,l),o=c.x,n=c.y,i=xt(c.x)>xt(c.y)?c.x:c.y,r=R(s,l),e.lastInterval=t):(i=h.velocity,o=h.velocityX,n=h.velocityY,r=h.direction),t.velocity=i,t.velocityX=o,t.velocityY=n,t.direction=r}function D(e){for(var t=[],i=0;i<e.pointers.length;)t[i]={clientX:Pt(e.pointers[i].clientX),clientY:Pt(e.pointers[i].clientY)},i++;return{timeStamp:Ct(),pointers:t,center:V(t),deltaX:e.deltaX,deltaY:e.deltaY}}function V(e){var t,i,o,n=e.length;if(1===n)return{x:Pt(e[0].clientX),y:Pt(e[0].clientY)};for(t=0,i=0,o=0;o<n;)t+=e[o].clientX,i+=e[o].clientY,o++;return{x:Pt(t/n),y:Pt(i/n)}}function O(e,t,i){return{x:t/e||0,y:i/e||0}}function R(e,t){return e===t?Ee:xt(e)>=xt(t)?e<0?De:Ve:t<0?Oe:Re}function B(e,t,i){i||(i=Fe);var o=t[i[0]]-e[i[0]],n=t[i[1]]-e[i[1]];return Math.sqrt(o*o+n*n)}function z(e,t,i){i||(i=Fe);var o=t[i[0]]-e[i[0]],n=t[i[1]]-e[i[1]];return 180*Math.atan2(n,o)/Math.PI}function N(e,t){return z(t[1],t[0],We)+z(e[1],e[0],We)}function F(e,t){return B(t[0],t[1],We)/B(e[0],e[1],We)}function W(){this.evEl=je,this.evWin=Ue,this.pressed=!1,L.apply(this,arguments)}function H(){this.evEl=Ye,this.evWin=Ge,L.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function j(){this.evTarget=Ze,this.evWin=Xe,this.started=!1,L.apply(this,arguments)}function U(e,t){var i=w(e.touches),o=w(e.changedTouches);return t&(ke|Ae)&&(i=T(i.concat(o),"identifier",!0)),[i,o]}function q(){this.evTarget=Qe,this.targetIds={},L.apply(this,arguments)}function $(e,t){var i,o,n,r,s,l=w(e.touches),c=this.targetIds;if(t&(Ie|Me)&&1===l.length)return c[l[0].identifier]=!0,[l,l];if(n=w(e.changedTouches),r=[],s=this.target,o=l.filter(function(e){return y(e.target,s)}),t===Ie)for(i=0;i<o.length;)c[o[i].identifier]=!0,i++;for(i=0;i<n.length;)c[n[i].identifier]&&r.push(n[i]),t&(ke|Ae)&&delete c[n[i].identifier],i++;return r.length?[T(o.concat(r),"identifier",!0),r]:a}function Y(){L.apply(this,arguments);var e=p(this.handler,this);this.touch=new q(this.manager,e),this.mouse=new W(this.manager,e),this.primaryTouch=null,this.lastTouches=[]}function G(e,t){e&Ie?(this.primaryTouch=t.changedPointers[0].identifier,K.call(this,t)):e&(ke|Ae)&&K.call(this,t)}function K(e){var t,i,o,n=e.changedPointers[0];n.identifier===this.primaryTouch&&(t={x:n.clientX,y:n.clientY},this.lastTouches.push(t),i=this.lastTouches,o=function(){var e=i.indexOf(t);e>-1&&i.splice(e,1)},setTimeout(o,et))}function Z(e){var t,i,o,n,r=e.srcEvent.clientX,s=e.srcEvent.clientY;for(t=0;t<this.lastTouches.length;t++)if(i=this.lastTouches[t],o=Math.abs(r-i.x),n=Math.abs(s-i.y),o<=tt&&n<=tt)return!0;return!1}function X(e,t){this.manager=e,this.set(t)}function J(e){var t,i;return v(e,at)?at:(t=v(e,lt),i=v(e,ct),t&&i?at:t||i?t?lt:ct:v(e,st)?st:rt)}function Q(){var e,t;return!!ot&&(e={},t=n.CSS&&n.CSS.supports,["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(i){e[i]=!t||n.CSS.supports("touch-action",i)}),e)}function ee(e){this.options=fe({},this.defaults,e||{}),this.id=x(),
this.manager=null,this.options.enable=f(this.options.enable,!0),this.state=ut,this.simultaneous={},this.requireFail=[]}function te(e){return e&mt?"cancel":e&_t?"end":e&pt?"move":e&dt?"start":""}function ie(e){return e==Re?"down":e==Oe?"up":e==De?"left":e==Ve?"right":""}function oe(e,t){var i=t.manager;return i?i.get(e):e}function ne(){ee.apply(this,arguments)}function re(){ne.apply(this,arguments),this.pX=null,this.pY=null}function se(){ne.apply(this,arguments)}function ae(){ee.apply(this,arguments),this._timer=null,this._input=null}function le(){ne.apply(this,arguments)}function ce(){ne.apply(this,arguments)}function he(){ee.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function ue(e,t){return t=t||{},t.recognizers=f(t.recognizers,ue.defaults.preset),new de(e,t)}function de(e,t){this.options=fe({},ue.defaults,t||{}),this.options.inputTarget=this.options.inputTarget||e,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=e,this.input=I(this),this.touchAction=new X(this,this.options.touchAction),pe(this,!0),h(this.options.recognizers,function(e){var t=this.add(new e[0](e[1]));e[2]&&t.recognizeWith(e[2]),e[3]&&t.requireFailure(e[3])},this)}function pe(e,t){var i,o=e.element;o.style&&(h(e.options.cssProps,function(n,r){i=P(o.style,r),t?(e.oldCssProps[i]=o.style[i],o.style[i]=n):o.style[i]=e.oldCssProps[i]||""}),t||(e.oldCssProps={}))}function _e(e,t){var i=r.createEvent("Event");i.initEvent(e,!0,!0),i.gesture=t,t.target.dispatchEvent(i)}var fe,me,ge,ye,ve,be,Se,we,Te,Pe,xe,Ce,Le,Ie,Me,ke,Ae,Ee,De,Ve,Oe,Re,Be,ze,Ne,Fe,We,He,je,Ue,qe,$e,Ye,Ge,Ke,Ze,Xe,Je,Qe,et,tt,it,ot,nt,rt,st,at,lt,ct,ht,ut,dt,pt,_t,ft,mt,gt,yt,vt,bt,St=["","webkit","Moz","MS","ms","o"],wt=r.createElement("div"),Tt="function",Pt=Math.round,xt=Math.abs,Ct=Date.now;fe="function"!=typeof Object.assign?function(e){var t,i,o,n;if(e===a||null===e)throw new TypeError("Cannot convert undefined or null to object");for(t=Object(e),i=1;i<arguments.length;i++)if((o=arguments[i])!==a&&null!==o)for(n in o)o.hasOwnProperty(n)&&(t[n]=o[n]);return t}:Object.assign,me=u(function(e,t,i){for(var o=Object.keys(t),n=0;n<o.length;)(!i||i&&e[o[n]]===a)&&(e[o[n]]=t[o[n]]),n++;return e},"extend","Use `assign`."),ge=u(function(e,t){return me(e,t,!0)},"merge","Use `assign`."),ye=1,ve=/mobile|tablet|ip(ad|hone|od)|android/i,be="ontouchstart"in n,Se=P(n,"PointerEvent")!==a,we=be&&ve.test(navigator.userAgent),Te="touch",Pe="pen",xe="mouse",Ce="kinect",Le=25,Ie=1,Me=2,ke=4,Ae=8,Ee=1,De=2,Ve=4,Oe=8,Re=16,Be=De|Ve,ze=Oe|Re,Ne=Be|ze,Fe=["x","y"],We=["clientX","clientY"],L.prototype={handler:function(){},init:function(){this.evEl&&m(this.element,this.evEl,this.domHandler),this.evTarget&&m(this.target,this.evTarget,this.domHandler),this.evWin&&m(C(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&g(this.element,this.evEl,this.domHandler),this.evTarget&&g(this.target,this.evTarget,this.domHandler),this.evWin&&g(C(this.element),this.evWin,this.domHandler)}},He={mousedown:Ie,
mousemove:Me,mouseup:ke},je="mousedown",Ue="mousemove mouseup",d(W,L,{handler:function(e){var t=He[e.type];t&Ie&&0===e.button&&(this.pressed=!0),t&Me&&1!==e.which&&(t=ke),this.pressed&&(t&ke&&(this.pressed=!1),this.callback(this.manager,t,{pointers:[e],changedPointers:[e],pointerType:xe,srcEvent:e}))}}),qe={pointerdown:Ie,pointermove:Me,pointerup:ke,pointercancel:Ae,pointerout:Ae},$e={2:Te,3:Pe,4:xe,5:Ce},Ye="pointerdown",Ge="pointermove pointerup pointercancel",n.MSPointerEvent&&!n.PointerEvent&&(Ye="MSPointerDown",Ge="MSPointerMove MSPointerUp MSPointerCancel"),d(H,L,{handler:function(e){var t=this.store,i=!1,o=e.type.toLowerCase().replace("ms",""),n=qe[o],r=$e[e.pointerType]||e.pointerType,s=r==Te,a=S(t,e.pointerId,"pointerId");n&Ie&&(0===e.button||s)?a<0&&(t.push(e),a=t.length-1):n&(ke|Ae)&&(i=!0),a<0||(t[a]=e,this.callback(this.manager,n,{pointers:t,changedPointers:[e],pointerType:r,srcEvent:e}),i&&t.splice(a,1))}}),Ke={touchstart:Ie,touchmove:Me,touchend:ke,touchcancel:Ae},Ze="touchstart",Xe="touchstart touchmove touchend touchcancel",d(j,L,{handler:function(e){var t,i=Ke[e.type];i===Ie&&(this.started=!0),this.started&&(t=U.call(this,e,i),i&(ke|Ae)&&t[0].length-t[1].length==0&&(this.started=!1),this.callback(this.manager,i,{pointers:t[0],changedPointers:t[1],pointerType:Te,srcEvent:e}))}}),Je={touchstart:Ie,touchmove:Me,touchend:ke,touchcancel:Ae},Qe="touchstart touchmove touchend touchcancel",d(q,L,{handler:function(e){var t=Je[e.type],i=$.call(this,e,t);i&&this.callback(this.manager,t,{pointers:i[0],changedPointers:i[1],pointerType:Te,srcEvent:e})}}),et=2500,tt=25,d(Y,L,{handler:function(e,t,i){var o=i.pointerType==Te,n=i.pointerType==xe;if(!(n&&i.sourceCapabilities&&i.sourceCapabilities.firesTouchEvents)){if(o)G.call(this,t,i);else if(n&&Z.call(this,i))return;this.callback(e,t,i)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}}),it=P(wt.style,"touchAction"),ot=it!==a,nt="compute",rt="auto",st="manipulation",at="none",lt="pan-x",ct="pan-y",ht=Q(),X.prototype={set:function(e){e==nt&&(e=this.compute()),ot&&this.manager.element.style&&ht[e]&&(this.manager.element.style[it]=e),this.actions=e.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var e=[];return h(this.manager.recognizers,function(t){_(t.options.enable,[t])&&(e=e.concat(t.getTouchAction()))}),J(e.join(" "))},preventDefaults:function(e){var t,i,o,n,r,s,l,c=e.srcEvent,h=e.offsetDirection;return this.manager.session.prevented?void c.preventDefault():(t=this.actions,i=v(t,at)&&!ht[at],o=v(t,ct)&&!ht[ct],n=v(t,lt)&&!ht[lt],i&&(r=1===e.pointers.length,s=e.distance<2,l=e.deltaTime<250,r&&s&&l)||n&&o?a:i||o&&h&Be||n&&h&ze?this.preventSrc(c):a)},preventSrc:function(e){this.manager.session.prevented=!0,e.preventDefault()}},ut=1,dt=2,pt=4,_t=8,ft=_t,mt=16,gt=32,ee.prototype={defaults:{},set:function(e){return fe(this.options,e),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(e){if(c(e,"recognizeWith",this))return this;var t=this.simultaneous;return e=oe(e,this),
t[e.id]||(t[e.id]=e,e.recognizeWith(this)),this},dropRecognizeWith:function(e){return c(e,"dropRecognizeWith",this)?this:(e=oe(e,this),delete this.simultaneous[e.id],this)},requireFailure:function(e){if(c(e,"requireFailure",this))return this;var t=this.requireFail;return e=oe(e,this),-1===S(t,e)&&(t.push(e),e.requireFailure(this)),this},dropRequireFailure:function(e){if(c(e,"dropRequireFailure",this))return this;e=oe(e,this);var t=S(this.requireFail,e);return t>-1&&this.requireFail.splice(t,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(e){return!!this.simultaneous[e.id]},emit:function(e){function t(t){i.manager.emit(t,e)}var i=this,o=this.state;o<_t&&t(i.options.event+te(o)),t(i.options.event),e.additionalEvent&&t(e.additionalEvent),o>=_t&&t(i.options.event+te(o))},tryEmit:function(e){if(this.canEmit())return this.emit(e);this.state=gt},canEmit:function(){for(var e=0;e<this.requireFail.length;){if(!(this.requireFail[e].state&(gt|ut)))return!1;e++}return!0},recognize:function(e){var t=fe({},e);if(!_(this.options.enable,[this,t]))return this.reset(),void(this.state=gt);this.state&(ft|mt|gt)&&(this.state=ut),this.state=this.process(t),this.state&(dt|pt|_t|mt)&&this.tryEmit(t)},process:function(e){},getTouchAction:function(){},reset:function(){}},d(ne,ee,{defaults:{pointers:1},attrTest:function(e){var t=this.options.pointers;return 0===t||e.pointers.length===t},process:function(e){var t=this.state,i=e.eventType,o=t&(dt|pt),n=this.attrTest(e);return o&&(i&Ae||!n)?t|mt:o||n?i&ke?t|_t:t&dt?t|pt:dt:gt}}),d(re,ne,{defaults:{event:"pan",threshold:10,pointers:1,direction:Ne},getTouchAction:function(){var e=this.options.direction,t=[];return e&Be&&t.push(ct),e&ze&&t.push(lt),t},directionTest:function(e){var t=this.options,i=!0,o=e.distance,n=e.direction,r=e.deltaX,s=e.deltaY;return n&t.direction||(t.direction&Be?(n=0===r?Ee:r<0?De:Ve,i=r!=this.pX,o=Math.abs(e.deltaX)):(n=0===s?Ee:s<0?Oe:Re,i=s!=this.pY,o=Math.abs(e.deltaY))),e.direction=n,i&&o>t.threshold&&n&t.direction},attrTest:function(e){return ne.prototype.attrTest.call(this,e)&&(this.state&dt||!(this.state&dt)&&this.directionTest(e))},emit:function(e){this.pX=e.deltaX,this.pY=e.deltaY;var t=ie(e.direction);t&&(e.additionalEvent=this.options.event+t),this._super.emit.call(this,e)}}),d(se,ne,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[at]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.scale-1)>this.options.threshold||this.state&dt)},emit:function(e){if(1!==e.scale){var t=e.scale<1?"in":"out";e.additionalEvent=this.options.event+t}this._super.emit.call(this,e)}}),d(ae,ee,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[rt]},process:function(e){var t=this.options,i=e.pointers.length===t.pointers,o=e.distance<t.threshold,n=e.deltaTime>t.time;if(this._input=e,!o||!i||e.eventType&(ke|Ae)&&!n)this.reset();else if(e.eventType&Ie)this.reset(),this._timer=l(function(){this.state=ft,this.tryEmit()
},t.time,this);else if(e.eventType&ke)return ft;return gt},reset:function(){clearTimeout(this._timer)},emit:function(e){this.state===ft&&(e&&e.eventType&ke?this.manager.emit(this.options.event+"up",e):(this._input.timeStamp=Ct(),this.manager.emit(this.options.event,this._input)))}}),d(le,ne,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[at]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.rotation)>this.options.threshold||this.state&dt)}}),d(ce,ne,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:Be|ze,pointers:1},getTouchAction:function(){return re.prototype.getTouchAction.call(this)},attrTest:function(e){var t,i=this.options.direction;return i&(Be|ze)?t=e.overallVelocity:i&Be?t=e.overallVelocityX:i&ze&&(t=e.overallVelocityY),this._super.attrTest.call(this,e)&&i&e.offsetDirection&&e.distance>this.options.threshold&&e.maxPointers==this.options.pointers&&xt(t)>this.options.velocity&&e.eventType&ke},emit:function(e){var t=ie(e.offsetDirection);t&&this.manager.emit(this.options.event+t,e),this.manager.emit(this.options.event,e)}}),d(he,ee,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[st]},process:function(e){var t,i,o=this.options,n=e.pointers.length===o.pointers,r=e.distance<o.threshold,s=e.deltaTime<o.time;if(this.reset(),e.eventType&Ie&&0===this.count)return this.failTimeout();if(r&&s&&n){if(e.eventType!=ke)return this.failTimeout();if(t=!this.pTime||e.timeStamp-this.pTime<o.interval,i=!this.pCenter||B(this.pCenter,e.center)<o.posThreshold,this.pTime=e.timeStamp,this.pCenter=e.center,i&&t?this.count+=1:this.count=1,this._input=e,0===this.count%o.taps)return this.hasRequireFailures()?(this._timer=l(function(){this.state=ft,this.tryEmit()},o.interval,this),dt):ft}return gt},failTimeout:function(){return this._timer=l(function(){this.state=gt},this.options.interval,this),gt},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==ft&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),ue.VERSION="2.0.7",ue.defaults={domEvents:!1,touchAction:nt,enable:!0,inputTarget:null,inputClass:null,preset:[[le,{enable:!1}],[se,{enable:!1},["rotate"]],[ce,{direction:Be}],[re,{direction:Be},["swipe"]],[he],[he,{event:"doubletap",taps:2},["tap"]],[ae]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},yt=1,vt=2,de.prototype={set:function(e){return fe(this.options,e),e.touchAction&&this.touchAction.update(),e.inputTarget&&(this.input.destroy(),this.input.target=e.inputTarget,this.input.init()),this},stop:function(e){this.session.stopped=e?vt:yt},recognize:function(e){var t,i,o,n,r=this.session;if(!r.stopped)for(this.touchAction.preventDefaults(e),i=this.recognizers,o=r.curRecognizer,(!o||o&&o.state&ft)&&(o=r.curRecognizer=null),n=0;n<i.length;)t=i[n],r.stopped===vt||o&&t!=o&&!t.canRecognizeWith(o)?t.reset():t.recognize(e),
!o&&t.state&(dt|pt|_t)&&(o=r.curRecognizer=t),n++},get:function(e){var t,i;if(e instanceof ee)return e;for(t=this.recognizers,i=0;i<t.length;i++)if(t[i].options.event==e)return t[i];return null},add:function(e){if(c(e,"add",this))return this;var t=this.get(e.options.event);return t&&this.remove(t),this.recognizers.push(e),e.manager=this,this.touchAction.update(),e},remove:function(e){var t,i;return c(e,"remove",this)?this:(e=this.get(e),e&&(t=this.recognizers,-1!==(i=S(t,e))&&(t.splice(i,1),this.touchAction.update())),this)},on:function(e,t){if(e!==a&&t!==a){var i=this.handlers;return h(b(e),function(e){i[e]=i[e]||[],i[e].push(t)}),this}},off:function(e,t){if(e!==a){var i=this.handlers;return h(b(e),function(e){t?i[e]&&i[e].splice(S(i[e],t),1):delete i[e]}),this}},emit:function(e,t){var i,o;if(this.options.domEvents&&_e(e,t),(i=this.handlers[e]&&this.handlers[e].slice())&&i.length)for(t.type=e,t.preventDefault=function(){t.srcEvent.preventDefault()},o=0;o<i.length;)i[o](t),o++},destroy:function(){this.element&&pe(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},fe(ue,{INPUT_START:Ie,INPUT_MOVE:Me,INPUT_END:ke,INPUT_CANCEL:Ae,STATE_POSSIBLE:ut,STATE_BEGAN:dt,STATE_CHANGED:pt,STATE_ENDED:_t,STATE_RECOGNIZED:ft,STATE_CANCELLED:mt,STATE_FAILED:gt,DIRECTION_NONE:Ee,DIRECTION_LEFT:De,DIRECTION_RIGHT:Ve,DIRECTION_UP:Oe,DIRECTION_DOWN:Re,DIRECTION_HORIZONTAL:Be,DIRECTION_VERTICAL:ze,DIRECTION_ALL:Ne,Manager:de,Input:L,TouchAction:X,TouchInput:q,MouseInput:W,PointerEventInput:H,TouchMouseInput:Y,SingleTouchInput:j,Recognizer:ee,AttrRecognizer:ne,Tap:he,Pan:re,Swipe:ce,Pinch:se,Rotate:le,Press:ae,on:m,off:g,each:h,merge:ge,extend:me,assign:fe,inherit:d,bindFn:p,prefixed:P}),bt=a!==n?n:"undefined"!=typeof self?self:{},bt.Hammer=ue,(o=function(){return ue}.call(t,i,t,e))!==a&&(e.exports=o)}(window,document)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,i){"use strict";(function(e){function t(){var e,t,i=$.Deferred();return urlParams.theme?(e=urlParams.theme.toLowerCase(),t=_.themes[e],t?(_.setTheme(t.name),_.getStdTheme(t.name).then(function(e){i.resolve(e.content)}).catch(function(e){console.warn("Cannot load theme {0}, reason: {1}".format(t.name,e)),i.resolve()})):i.resolve()):i.resolve(),i.promise()}function o(e){var t=/(\d+)(\w+)/;return e.map(function(e){var i=t.exec(e.text),o=i[2].toLowerCase(),n=parseInt(i[1]),r="y"===o?12*n+"m":n+o,s=U.Symbol.parsePeriod(e.resolution);return{text:window.t(e.title)||n+window.t(o,{context:"dates",count:n}),description:e.description||"",value:r,targetResolution:e.resolution,requiresIntraday:s.isIntraday}})}function n(){JSON.parse(urlParams.disabledFeatures).forEach(function(t){e.setEnabled(t,!1)}),JSON.parse(urlParams.enabledFeatures).forEach(function(t){e.setEnabled(t,!0)})}function r(){
e.enabled("saveload_storage_customization")&&(window.parent[urlParams.uid].saveLoadAdapter?f.setCustomAdapter(window.parent[urlParams.uid].saveLoadAdapter):void 0!==urlParams.chartsStorageUrl&&urlParams.chartsStorageUrl&&void 0!==urlParams.clientId&&urlParams.clientId?f.initialize(urlParams.clientId,urlParams.userId,urlParams.chartsStorageUrl,urlParams.chartsStorageVer||"1.0"):(e.setEnabled("saveload_storage_customization",!1),e.setEnabled("header_saveload",!1)))}function s(){Q.resolve()}function a(t){var o,n,r,s,a,l;return e.enabled("header_widget")?(o=R.allocate({areaName:"top"}),n=i(256).ChartChangesWatcher,r=new n(t.chartWidgetCollection.undoHistory,window.saver,T),s=JSON.parse(urlParams.favorites),s.intervals=s.intervals.map(function(e){var t=""+e;return t.match(/1[DWMYdwmy]/)&&(t=t.slice(1)),t}),a=null,e.enabled("study_templates")&&(a=new S(I,TVSettings),window.studyTemplates=new b({chartWidgetCollection:t.chartWidgetCollection,favoriteStudyTemplatesService:a})),l=Modernizr.touch?["full"]:e.enabled("caption_buttons_text_if_possible")?void 0:["medium"],new u(new h,{chartSaver:window.saver,chartApiInstance:ChartApiInstance,chartWidgetCollection:t.chartWidgetCollection,defaultIntervals:Object.keys(ChartApiInstance.defaultResolutions()),defaultFavoriteStyles:s.chartTypes,defaultFavoriteIntervals:s.intervals,hideStudyTemplates:!0,resizerBridge:o,studyMarket:window.studyMarket,studyTemplates:window.studyTemplates,favoriteStudyTemplatesService:a,allowedModes:l,saveChartService:t.saveChartService,loadChartService:t.loadChartService,chartChangesWatcher:r})):null}function l(e){if(K){var t=urlParams.toolbarbg&&/^[0-9a-f]+$/i.test(urlParams.toolbarbg)?urlParams.toolbarbg+"":void 0;return t&&$("<style>").text("body,.chart-controls-bar,#footer-chart-panel{background-color:#"+t+" !important}").appendTo($("head")),new d({bgColor:t,chartWidgetCollection:e,drawingsAccess:urlParams.drawingsAccess?JSON.parse(urlParams.drawingsAccess):void 0,resizerBridge:R.allocate({areaName:"left"})})}return null}var c,h,u,d,p,_,f,m,g,y,v,b,S,w,T,P,x,C,L,I,M,k,A,E,D,V,O,R,B,z,N,F,W,H,j,U,q,Y,G,K,Z,X,J,Q,ee;i(465),i(11),c=i(466).i18nReady,i(467),i(133),i(482),n(),h=i(483).RestrictedToolsetBootloader,u=i(491).HeaderToolbarBootloader,d=i(494).DrawingToolbarBootloader,p=i(207).isDrawingToolbarVisible,_=i(252),f=i(253),m=i(40).Action,g=i(592).ChartSaver,y=i(593).SaveChartService,v=i(595).LoadChartService,b=i(597).StudyTemplates,S=i(604).FavoriteStudyTemplateService,w=i(64).linking,T=i(38),P=i(19),x=P.formatterOptions,C=P.customFormatters,L=i(605).StudyMarket,I=i(108).TVXWindowEvents,M=i(607).createDeferredPromise,k=i(206),A=i(21).Interval,E=i(608).Root,D=i(610).ChartPage,V=i(134).destroyQuoteSessions,O=new E(window),R=new D(O.allocate()),i(613),B=i(614),z=i(288).createFavoriteDrawingToolbar,N=i(794),F=i(28),W=i(803),i(185),i(810),H=i(125).setSearchRequestDelay,j=i(39),U=i(26),q=window.parent[urlParams.uid].customIndicatorsUrl,Y=$.Deferred(),G=$.Deferred(),K=e.enabled("left_toolbar"),$.when(Y,G).done(function(){window.ChartApiInstance.start()}),
q?$.getScript(q).done(function(){void 0!==window.__customIndicators&&window.isArray(window.__customIndicators)&&(window.PineJS=i(26),JSServer.studyLibrary=JSServer.studyLibrary.concat(window.__customIndicators),console.log("{0} custom indicators loaded.".format(window.__customIndicators.length)),Y.resolve())}).fail(function(e){console.warn("Error loading custom indicators @ `{0}`: {1} ({2}) ".format(q,e.statusText,e.status)),Y.resolve()}):Y.resolve(),window.widgetReady=function(e){T.subscribe("onChartReady",e)},window.customizeUI=function(e){null!=e.studiesOverrides&&F.setDefaultsOverrides(e.studiesOverrides),window.__defaultsOverrides=e.defaultsOverrides},window.applyStudiesOverrides=function(e){e&&window.chartWidgetCollection.applyStudiesOverrides(e)},window.applyOverrides=function(e){$.extend(!0,window.__defaultsOverrides,e),window.applyDefaultsOverrides(TradingView.defaultProperties.chartproperties),window.applyDefaultOverridesToLinetools(),window.chartWidgetCollection.applyOverrides(e)},window.changeTheme=function(e){var t=_.themes[e.toLowerCase()];t&&window.tradingViewApi.themes().setStdTheme(t.name).then(function(){window.applyOverrides(window.__defaultsOverrides)})},window.is_authenticated=!1,window.parent[urlParams.uid].brokerFactory,JSON.parse(window.urlParams.brokerConfig),window.t("charts by TradingView"),window.t("powered by TradingView"),Z=null,X=M(),J=function(t){function n(){I&&I.load(),M&&M.load().then(function(e){TradingView.bottomWidgetBar=e}),E&&E.load().then(function(e){window.footerWidget=e}),D&&D.load().then(function(e){window.widgetbar=e,null==window.tradingViewApi.watchlist()&&window.tradingViewApi.setWatchlistManager(null)})}var r,s,c,h,u,d,_,f,m,b,S,P,I,M,E,D;if(!Modernizr.canvas||!Modernizr.canvastext)throw Error("Charting library cannot be running under this browser");e.setEnabled("charting_library_debug_mode","true"===urlParams.debug),e.setEnabled("chart_property_page_trading",!1),e.setEnabled("chart_property_page_template_button",!1),r=$("#library-container"),e.enabled("remove_library_container_border")&&(r.css("border","0px"),r.css("padding","1px")),window.customizeUI({studiesOverrides:urlParams.studiesOverrides?JSON.parse(urlParams.studiesOverrides):void 0,defaultsOverrides:JSON.parse(urlParams.overrides)}),urlParams.numeric_formatting=urlParams.numeric_formatting&&JSON.parse(urlParams.numeric_formatting),urlParams.numeric_formatting&&"string"==typeof urlParams.numeric_formatting.decimal_sign&&(x.decimalSign=urlParams.numeric_formatting.decimal_sign[0]),window.ChartApiInstance=new N(window.parent[urlParams.uid].datafeed),window.parent[urlParams.uid].customFormatters&&(window.parent[urlParams.uid].customFormatters.timeFormatter&&(C.timeFormatter=window.parent[urlParams.uid].customFormatters.timeFormatter),window.parent[urlParams.uid].customFormatters.dateFormatter&&(C.dateFormatter=window.parent[urlParams.uid].customFormatters.dateFormatter)),window.ChartApiInstance.setStudiesAccessController(window.ChartApiInstance.createStudiesAccessController(urlParams.studiesAccess)),
s=window.parent[window.urlParams.uid].settingsAdapter,null!=s?(TVSettings.setSettingsAdapter(s),TVSettings.sync()):e.enabled("use_localstorage_for_settings")&&TVSettings.sync(),c=urlParams.chartContent?JSON.parse(urlParams.chartContent).json:void 0,h=urlParams.interval||"D",u=o(JSON.parse(urlParams.timeFrames)),d=function(e,t){return e?t!==j.STATUS_DELAYED&&t!==j.STATUS_DELAYED_STREAMING&&t!==j.STATUS_READY?[]:u.filter(function(t){return!(t.requiresIntraday&&!e.has_intraday)&&!(e.supported_resolutions&&e.supported_resolutions.indexOf(A.normalize(t.targetResolution))<0)}):[]},_={resizerBridge:R.allocate({areaName:"center"}),padding:e.enabled("border_around_the_chart")?5:0,edge:e.enabled("border_around_the_chart")?4:0,content:c,widgetOptions:{hideIdeas:!0,addVolume:!0,handleSessionErrors:!0,muteSessionErrors:!0,timezone:urlParams.timezone,defSymbol:urlParams.symbol,defInterval:h,defTimeframe:urlParams.timeframe&&urlParams.timeframe.toLowerCase(),crossHairMenuEnabled:e.enabled("chart_crosshair_menu"),paneContextMenuEnabled:e.enabled("pane_context_menu"),priceScaleContextMenuEnabled:e.enabled("scales_context_menu"),timeScaleWidget:{contextMenuEnabled:e.enabled("scales_context_menu"),timezoneMenuEnabled:e.enabled("timezone_menu")},goToDateEnabled:e.enabled("go_to_date"),seriesControlBarEnabled:e.enabled("timeframes_toolbar"),seriesControlBar:{timeFramesWidgetEnabled:!0,timeFramesWidget:{goToDateEnabled:e.enabled("go_to_date"),availableTimeFrames:d},timeWidgetEnabled:!0,timeWidget:{timezoneMenuEnabled:e.enabled("timezone_menu")},adjustForDividendsButtonEnabled:!1,extendedHoursButtonEnabled:!1,percentageScaleButtonEnabled:!0,logScaleButtonEnabled:!0,autoScaleButtonEnabled:!0,scalePropertiesButtonEnabled:e.enabled("main_series_scale_menu"),fullscreenButtonEnabled:!0}},globalEvents:!0,snapshotUrl:urlParams.snapshotUrl},K&&(z(),_.widgetOptions.isDrawingToolbarVisible=p),c&&void 0!==c.extendedData&&(f=c.extendedData,_.metaInfo={id:f.uid,name:f.name,description:f.description,uid:f.uid,username:"",tags:""}),m=window.chartWidgetCollection=new B(_),window.studyMarket=new L(m),"undefined"!=typeof serviceLocator&&serviceLocator.registerService(CHART_WIDGET_COLLECTION_SERVICE,m),m.activeChartWidget.subscribe(function(e){T.emit("activeChartChanged",m.getAll().indexOf(e))}),window.saver=new g(m),b=new y(m,window.saver),S=new v(m),window.chartWidget=m.activeChartWidget.value(),window.pro=new TradingView.Pro,P=a({chartWidgetCollection:m,saveChartService:b,loadChartService:S}),null!==P?P.load().then(function(e){Z=e,X.resolve()}):(X.promise.catch(function(){}),X.reject("header widget is not loaded")),I=l(m),M=null,E=null,D=null,window.tradingViewApi=new W(m,window.ChartApiInstance,b,S),w.bindToChartWidgetCollection(m),TradingView.isNaN(urlParams.studyCountLimit)||(TradingView.STUDY_COUNT_LIMIT=Math.max(2,+urlParams.studyCountLimit)),TradingView.isNaN(urlParams.ssreqdelay)||H(Math.max(0,+urlParams.ssreqdelay)),window.ChartApiInstance.connect(),i.e(3).then(function(e){var t=i(942);window.lineToolPropertiesToolbar=new t(m)
}.bind(null,i)).catch(i.oe),$(".tv-content").bind("contextmenu",function(e){var t=$(e.originalEvent.target);if(!t.is("input")&&!t.is("textarea"))return!1}),G.resolve(),m.undoHistory.undoStack().onChange().subscribe(null,k(function(){T.emit("onAutoSaveNeeded")},1e3*(urlParams.autoSaveDelay||5),{leading:!0,trailing:!0})),chartWidget.withModel(null,function(){ChartApiInstance.on("realtime_tick",function(e){T.emit("onTick",e)}),t&&(m.applyTheme(t),window.applyOverrides(window.__defaultsOverrides)),e.enabled("charting_library_debug_mode")&&T.subscribeToAll(function(){var e=Array.prototype.slice.call(arguments);console.log('Event "{0}", arguments: {1}'.format(e[0],JSON.stringify(e.slice(1))))})}),m.firstWidgetInitialized?n():chartWidget.chartWidgetInitialized.subscribe(null,n,!0),T.subscribe("chart_load_requested",function(e){window.tradingViewApi.loadChart({json:JSON.parse(e.content),extendedData:e})})},window.destroyChart=function(){window.chartWidgetCollection&&(window.chartWidgetCollection.destroy(),window.chartWidgetCollection=null),V(),window.ChartApiInstance&&(window.ChartApiInstance.destroy(),window.ChartApiInstance=null)},r(),Q=$.Deferred(),window.parent[urlParams.uid].loadLastChart&&e.enabled("saveload_storage_customization")?f.getCharts(function(e){if(0===e.length)return void s();var t=e.sort(function(e,t){return t.modified_iso-e.modified_iso})[0];f.getChartContent(t,function(e){var t=JSON.parse(e.content);t.extendedData=e,urlParams.chartContent=JSON.stringify({json:t}),s()},s)},s):s(),ee=$.Deferred(),$.when(t(),c,ee,Q).done(function(t){if($(window).resize(),$(".loading-indicator").hide(),setTimeout(J.bind(null,t),0),e.enabled("14851")&&(Math.random()<=.02||e.enabled("cqg_terminal")||e.enabled("amp_terminal"))){!function(e,t,i,o,n,r,s){e.GoogleAnalyticsObject=n,e[n]=e[n]||function(){(e[n].q=e[n].q||[]).push(arguments)},e[n].l=1*new Date,r=t.createElement(i),s=t.getElementsByTagName(i)[0],r.async=1,r.src=o,s.parentNode.insertBefore(r,s)}(window,document,"script","//www.google-analytics.com/analytics.js","ga");var i=document.URL.match(RegExp("(:?.*://)([^/]+)/.*"))[2];ga("create","UA-112911840-1","auto"),ga("set","anonymizeIp",!0),ga("set",{hostname:i,page:i,referrer:i}),ga("send","pageview")}}),function(){var e=!0;window.parent[urlParams.uid].datafeed.onReady(function(t){e&&console.warn("`onReady` should return result asynchronously. Use `setTimeout` with 0 interval to execute the callback function."),window.configurationData=t,ee.resolve()}),e=!1}(),window.getFunctionFromArguments=function(e){return window.parent[urlParams.uid][e]},window.createShortcutAction=function(){var e={};return function(t,i){void 0===e[t]&&(e[t]=new m({shortcut:t})),e[t].callbacks().subscribe(null,i)}}(),window.initializationFinished=function(){window.chartWidgetCollection.undoHistory.clearStack()},window.resizeWindow=function(){$(window).resize()},window.headerReady=function(){return X.promise},window.createButton=function(e){
if(null===Z)throw Error("Cannot create button: header widget is not ready or is not loaded - use `headerReady` to wait until header is ready");e=e||{};var t=e.align||"left";return Z.addButton(t)}}).call(t,i(4))},function(e,t){e.exports={14851:{},custom_items_in_context_menu:{},websocket_connection:{},countdown:{},symbol_search_parser_mixin:{},show_pro_features:{},daily_timeframe_suffix:{},symbollist_context_menu:{},pay_attention_to_ticker_not_symbol:{},graying_disabled_tools_enabled:{},update_study_formatter_on_symbol_resolve:{},constraint_dialogs_movement:{},same_data_requery:{},phone_verification:{},show_trading_notifications_history:{},show_interval_dialog_on_key_press:{},header_interval_dialog_button:{subsets:["show_interval_dialog_on_key_press"]},header_fullscreen_button:{},header_symbol_search:{},symbol_search_hot_key:{},header_resolutions:{subsets:["header_interval_dialog_button"]},header_chart_type:{},header_settings:{},header_indicators:{},header_compare:{},header_undo_redo:{},header_screenshot:{},header_saveload:{},study_on_study:{},header_widget:{subsets:["header_widget_dom_node","header_symbol_search","header_resolutions","header_chart_type","header_settings","header_indicators","header_compare","header_undo_redo","header_fullscreen_button","compare_symbol","header_screenshot"]},compare_symbol:{subsets:["header_compare"]},property_pages:{subsets:["show_chart_property_page","chart_property_page"]},show_chart_property_page:{},chart_property_page:{subsets:["chart_property_page_style","chart_property_page_scales","chart_property_page_background","chart_property_page_timezone_sessions","chart_property_page_events_alerts","chart_property_page_trading","chart_property_page_template_button"]},disable_userlink_popup:{},left_toolbar:{},hide_left_toolbar_by_default:{},control_bar:{},widget_logo:{},timeframes_toolbar:{},edit_buttons_in_legend:{subsets:["show_hide_button_in_legend","format_button_in_legend","study_buttons_in_legend","delete_button_in_legend"]},hide_legend_by_default:{},show_hide_button_in_legend:{},format_button_in_legend:{},study_buttons_in_legend:{},delete_button_in_legend:{},pane_context_menu:{},scales_context_menu:{},legend_context_menu:{},context_menus:{subsets:["pane_context_menu","scales_context_menu","legend_context_menu","objects_tree_context_menu"]},items_favoriting:{},save_chart_properties_to_local_storage:{},use_localstorage_for_settings:{subsets:["items_favoriting","save_chart_properties_to_local_storage"]},plain_studymarket:{},trading_watch_positions:{},disable_resolution_rebuild:{},border_around_the_chart:{},charting_library_debug_mode:{},cl_feed_return_all_data:{},log_data_request_time:{},saveload_requires_authentication:{},saveload_storage_customization:{},new_chart_creation_available:{},volume_force_overlay:{},create_volume_indicator_by_default:{},create_volume_indicator_by_default_once:{},saved_charts_count_restriction:{},lean_chart_load:{},stop_study_on_restart:{},star_some_intervals_by_default:{},predefined_items_only_may_be_starred:{},move_logo_to_main_pane:{},
show_logo_on_all_charts:{},link_to_tradingview:{},logo_without_link:{},right_bar_stays_on_scroll:{},chart_content_overrides_by_defaults:{},show_dialog_on_snapshot_ready:{},snapshot_trading_drawings:{},allow_supported_resolutions_set_only:{},study_market_minimized:{},widgetbar_tabs:{},collapsible_header:{},show_extension_popup:{},study_templates:{},side_toolbar_in_fullscreen_mode:{},remove_library_container_border:{},whotrades_auth_only:{},support_multicharts:{},display_market_status:{},display_data_mode:{},show_chart_warn_message:{},datasource_copypaste:{},line_tool_templates:{},expand_symbolsearch_items:{},symbol_search_three_columns_exchanges:{},symbol_search_flags:{},symbol_search_limited_exchanges:{},footer_bugreport_button:{},footer_publish_idea_button:{},footer_showdom_button:{},text_notes:{},symbol_info:{},no_bars_status:{},clear_bars_on_series_error:{},hide_loading_screen_on_series_error:{},seconds_resolution:{},dont_show_boolean_study_arguments:{},hide_last_na_study_output:{},price_scale_always_last_bar_value:{},study_dialog_search_control:{},study_dialog_fundamentals_economy_addons:{},uppercase_instrument_names:{},cqg_trading_confirm_risks:{},trading_notifications:{},chart_crosshair_menu:{},japanese_chart_styles:{},hide_series_legend_item:{},hide_study_overlay_legend_item:{},hide_study_compare_legend_item:{},linetoolpropertieswidget_template_button:{},use_overrides_for_overlay:{},timezone_menu:{},main_series_scale_menu:{},show_login_dialog:{},remove_img_from_rss:{},bars_marks:{},chart_scroll:{},chart_zoom:{},source_selection_markers:{},high_density_bars:{},open_account_manager:{},multiple_watchlists:{},onchart_messages:{},custom_resolutions_box:{},referral_program_for_widget_owners:{},referral_program_policy_aggressive:{subsets:["referral_program_policy_passive","referral_program_policy_normal"]},referral_program_policy_normal:{subsets:["referral_program_policy_passive","header_fake_features_buttons","custom_resolutions_box"]},tv_production:{
subsets:["show_pro_features","countdown","symbol_search_parser_mixin","symbollist_context_menu","websocket_connection","header_fullscreen_button","header_widget","dont_show_boolean_study_arguments","left_toolbar","control_bar","symbol_search_hot_key","context_menus","edit_buttons_in_legend","uppercase_instrument_names","use_localstorage_for_settings","saveload_requires_authentication","volume_force_overlay","new_chart_creation_available","saved_charts_count_restriction","create_volume_indicator_by_default","create_volume_indicator_by_default_once","charts_auto_save","right_bar_stays_on_scroll","save_old_chart_before_save_as","chart_content_overrides_by_defaults","alerts","show_dialog_on_snapshot_ready","show_extension_popup","header_saveload","header_layouttoggle","datasource_copypaste","show_saved_watchlists","watchlists_from_to_file","add_to_watchlist","property_pages","support_multicharts","display_market_status","display_data_mode","show_chart_warn_message","support_manage_drawings","widgetbar_tabs","study_templates","collapsible_header","line_tool_templates","caption_buttons_text_if_possible","footer_publish_idea_button","text_notes","trading_watch_positions","symbol_info","linetoolpropertieswidget_template_button","cqg_trading_confirm_risks","trading_notifications","symbol_search_three_columns_exchanges","symbol_search_flags","symbol_search_limited_exchanges","phone_verification","chart_events","onchart_messages","custom_resolutions_box","compare_symbol","study_on_study","japanese_chart_styles","show_login_dialog","dome_widget","bars_marks","chart_scroll","chart_zoom","show_trading_notifications_history","source_selection_markers","study_dialog_fundamentals_economy_addons","multiple_watchlists","marked_symbols"]},browser_extension:{subsets:["disable_userlink_popup","show_pro_features","show_saved_watchlists","display_market_status","display_data_mode","show_chart_warn_message","widgetbar_tabs","show_login_dialog"]},widget:{subsets:["show_pro_features","countdown","symbol_search_parser_mixin","symbollist_context_menu","websocket_connection","uppercase_instrument_names","left_toolbar","control_bar","symbol_search_hot_key","context_menus","edit_buttons_in_legend","use_localstorage_for_settings","saveload_requires_authentication","volume_force_overlay","create_volume_indicator_by_default","create_volume_indicator_by_default_once","right_bar_stays_on_scroll","show_dialog_on_snapshot_ready","dont_show_boolean_study_arguments","header_widget_dom_node","header_symbol_search","header_resolutions","header_chart_type","header_compare","header_indicators","star_some_intervals_by_default","display_market_status","display_data_mode","show_chart_warn_message","symbol_info","linetoolpropertieswidget_template_button","symbol_search_three_columns_exchanges","symbol_search_flags","symbol_search_limited_exchanges","widgetbar_tabs","compare_symbol","show_login_dialog","plain_studymarket","japanese_chart_styles","bars_marks","chart_scroll","chart_zoom","source_selection_markers","property_pages"]},bovespa_widget:{
subsets:["widget","header_settings","chart_property_page_timezone_sessions","linetoolpropertieswidget_template_button"]},charting_library_base:{subsets:["14851","allow_supported_resolutions_set_only","border_around_the_chart","collapsible_header","constraint_dialogs_movement","context_menus","control_bar","create_volume_indicator_by_default","custom_items_in_context_menu","datasource_copypaste","daily_timeframe_suffix","uppercase_instrument_names","display_market_status","edit_buttons_in_legend","graying_disabled_tools_enabled","header_widget","header_saveload","dont_show_boolean_study_arguments","lean_chart_load","left_toolbar","trading_watch_positions","link_to_tradingview","pay_attention_to_ticker_not_symbol","plain_studymarket","predefined_items_only_may_be_starred","refresh_saved_charts_list_on_dialog_show","right_bar_stays_on_scroll","saveload_storage_customization","show_dialog_on_snapshot_ready","stop_study_on_restart","study_market_minimized","timeframes_toolbar","symbol_search_hot_key","update_study_formatter_on_symbol_resolve","update_timeframes_set_on_symbol_resolve","use_localstorage_for_settings","volume_force_overlay","widget_logo","countdown","use_overrides_for_overlay","trading_notifications","compare_symbol","symbol_info","timezone_menu","main_series_scale_menu","study_dialog_search_control","chart_crosshair_menu","create_volume_indicator_by_default_once","bars_marks","chart_scroll","chart_zoom","source_selection_markers","property_pages","go_to_date","adaptive_logo","caption_buttons_text_if_possible"]},charting_library:{subsets:["charting_library_base"]},static_charts_service:{subsets:["charting_library","disable_resolution_rebuild","log_data_request_time","same_data_requery"]},trading_terminal:{subsets:["charting_library_base","footer_showdom_button","support_multicharts","header_layouttoggle","japanese_chart_styles","chart_property_page_trading","add_to_watchlist","open_account_manager","show_dom_first_time","multiple_watchlists","show_trading_notifications_history"]},cqg_terminal:{subsets:["charting_library_base","chart_property_page_trading","expand_symbolsearch_items","clear_bars_on_series_error","no_bars_status","hide_loading_screen_on_series_error","support_multicharts","header_layouttoggle","same_data_requery","footer_bugreport_button","footer_showdom_button","dome_widget","show_dom_first_time","japanese_chart_styles","remove_img_from_rss","add_to_watchlist","show_trading_notifications_history"]},amp_terminal:{subsets:["cqg_terminal"]}}},function(e,t){},function(e,t,i){"use strict";var o,n,r;Object.defineProperty(t,"__esModule",{value:!0}),i.d(t,"i18nReady",function(){return n}),o=i(13),i.n(o),n=$.Deferred(),r=function(){n.resolve(),document.body.removeEventListener("tradingview-i18next-initialized",r)},window.__tradingviewI18nextInited?r():document.body.addEventListener("tradingview-i18next-initialized",r)},function(e,t,i){"use strict";function o(e){return e.keys().map(e)}window.TradingView=window.TradingView||{},window.requireAll=o,i(468),i(330),i(63),i(469),i(14),i(51),i(73),i(470),
i(158),i(159),i(471),i(45),i(475),i(106),i(249)},function(e,t,i){"use strict";!function(e){e.fn.contextMenu=function(t){e(this).bind("contextmenu",function(e){return t(e),!1})}}(jQuery)},function(e,t,i){"use strict";!function(e,t,i){"$:nomunge";function o(o,n){function r(t){e(s).each(function(){var i=e(this);this===t.target||i.has(t.target).length||i.triggerHandler(n,[t.target])})}n=n||o+i;var s=e(),a=o+"."+n+"-special-event";e.event.special[n]={setup:function(){s=s.add(this),delete s.prevObject,1===s.length&&e(t).bind(a,r)},teardown:function(){s=s.not(this),delete s.prevObject,0===s.length&&e(t).unbind(a)},add:function(e){var t=e.handler;e.handler=function(e,i){e.target=i,t.apply(this,arguments)}}}}e.map("click dblclick mousemove mousedown mouseup mouseover mouseout change select submit keydown keypress keyup".split(" "),function(e){o(e)}),o("focusin","focus"+i),o("focusout","blur"+i),Modernizr.touch&&(o("touchstart","mousedown"+i),o("touchmove","mousemove"+i),o("touchend","mouseup"+i)),e.addOutsideEvent=o}(jQuery,document,"outside")},function(e,t,i){"use strict";function o(e){var t,i;if(3===e.nodeType&&e.data.trim())return e;if(e.childNodes)for(t=e.childNodes.length;t--;)if(i=o(e.childNodes[t]))return i;return null}function n(e,t){var i,o=t.parentNode;o&&(i=t.nextSibling,i?o.insertBefore(e,i):o.appendChild(e))}function r(e){var t,i,r,s=o(e);if(s){if(t=s.data,s.parentNode&&s.parentNode.tagName&&"sup"===s.parentNode.tagName.toLowerCase())return;i=/^([^]*)(\S)(\s*)$/.exec(t),i&&(s.data=i[1],r=document.createElement("sup"),r.textContent=i[2],n(r,s),i[3]&&n(document.createTextNode(i[3]),r))}}Object.defineProperty(t,"__esModule",{value:!0}),$.fn.lastCharSup=function(){for(var e=0;e<this.size();e++)r(this.get(e));return this}},function(module,exports,__webpack_require__){"use strict";(function(Delegate,_,Featuresets){function reloadPageOnSingOut(){var e=[/^\/chart\//],t=!0;e.forEach(function(e){e.test(window.location.pathname)&&(t=!1)}),t&&window.location.reload(!0)}function loginUser(e,t){window.TVDialogs&&window.TVDialogs.signModal&&window.TVDialogs.signModal.close(),user=$.extend(!0,{},e),TradingView.changeLoginState(!0),"function"==typeof t&&window.TVDialogs&&window.TVDialogs.signModal?window.TVDialogs.signModal.on("signinSuccess",function(){t()}):"function"==typeof t&&t()}function onLoginStateChange(is_initial){window.iframeAuthWidget&&user.is_first_login&&(window.iframeAuthWidget.preventClose=!0);var available_offers=user.available_offers
;$("html").toggleClass("is-authenticated",is_authenticated).toggleClass("is-not-authenticated",!is_authenticated).toggleClass("is-pro",is_authenticated&&user&&!!user.is_pro).toggleClass("is-not-pro",!(is_authenticated&&user&&user.is_pro)).toggleClass("is-trial",is_authenticated&&user&&!!user.is_trial).toggleClass("is-not-trial",!(is_authenticated&&user&&user.is_trial)).toggleClass("is-not-trial-available",void 0===available_offers[OFFERS.trial]).toggleClass("is-trial-available",void 0!==available_offers[OFFERS.trial]).toggleClass("is-upsale-available",is_authenticated&&void 0!==available_offers[OFFERS.upsale]),window.TVSettings&&window.TVSettings.sync(user.settings),$(".js-header__gopro-button").attr("href",is_authenticated?"/gopro/":""),is_authenticated?($(".saved_charts_count").html(user.saved_charts),$(".treated_charts_count").html(user.treated_charts_count),$(".js-trial-days-left").html(user.trial_days_left_text||""),$(".js-header-gopro-button").attr("href","/gopro/"),user.fastpass_script&&eval(user.fastpass_script),user.is_first_login&&($(function(){}),trackEvent("Conversion","First login"),user.prort_trial_started&&delete user.prort_trial_started,delete user.is_first_login),TradingView.setTrialAvailiable(void 0!==user.available_offers[OFFERS.trial])):(Object.keys(available_offers).forEach(function(e){available_offers[e].available_for_anons||delete available_offers[e]}),user={username:"Guest",following:"0",followers:"0",ignore_list:{},available_offers:available_offers},$(".user-info-username").html(user.username),TVLocalStorage.removeItem("trial_availiable"))}var loginStateChange,djangoLogoutFinished,TVXWindowEvents=__webpack_require__(108).TVXWindowEvents,trackEvent=__webpack_require__(32).trackEvent,OFFERS={};__webpack_require__(472),$(document).ajaxSend(function(e,t,i){"POST"!==i.type||i.crossDomain||t.setRequestHeader("X-CSRFToken",$.cookie("csrftoken")),i.crossDomain&&!i.forceLanguageHeader||(window.locale?t.setRequestHeader("X-Language",window.locale):console.warn("window.locale is not defined"))}),loginStateChange=window.loginStateChange?window.loginStateChange:window.loginStateChange=new Delegate,djangoLogoutFinished=window.djangoLogoutFinished?window.djangoLogoutFinished:window.djangoLogoutFinished=new Delegate,loginStateChange.subscribe(null,onLoginStateChange),TVXWindowEvents.on("loginStateChange",function(){var e=JSON.parse(this);window.user=e.user,window.is_authenticated=!!e.is_authenticated,loginStateChange.fire()}),TVXWindowEvents.on("signOut",function(){reloadPageOnSingOut()}),function(){var e="user-obj-changed",t={};window.crossTabSyncUserAttr=function(t){var i={};t instanceof Array?t.forEach(function(e){i[e]=window.user[e]}):i[t]=window.user[t],TVXWindowEvents.emit(e,JSON.stringify(i))},window.onChangeUserAttrInAnotherTab=function(e){var i=new Delegate;return t[e]||(t[e]=[]),t[e].push(i),i},TVXWindowEvents.on(e,function(e){var i,o;e=JSON.parse(e);for(i in e)if(window.user[i]=e[i],t[i])for(o=0;o<t[i].length;o++)t[i][o].fire(e[i])})}(),TradingView.changeLoginState=function(e){
window.is_authenticated=!!e,TVXWindowEvents.emit("loginStateChange",JSON.stringify({is_authenticated:is_authenticated,user:user})),loginStateChange.fire()},window.loginUser=loginUser,TradingView.signOut=function(){var e=_.clone(window.user);TradingView.changeLoginState(!1),$.ajax({type:"POST",url:"/accounts/logout/",dataType:"html"}).done(function(){TVXWindowEvents.emit("djangoLogoutFinished"),djangoLogoutFinished.fire(),TVXWindowEvents.emit("signOut"),reloadPageOnSingOut()}).fail(function(){window.user=e,TradingView.changeLoginState(!0)})},window.loginRequiredDelegate=new Delegate,window.runOrSignIn=function(e,t){t||(t={}),t.verifiedPhoneRequired,(is_authenticated||Featuresets.enabled("charting_library_base"))&&e()},TradingView.runOrGoPro=function(e,t,i){isProductFeatureEnabled(t)&&e()},window.onLoginStateChange=onLoginStateChange,TradingView.isPro=function(){return is_authenticated&&user.is_pro},TradingView.setTrialAvailiable=function(e){TVLocalStorage.setItem("trial_availiable",e?1:0)},$.fn.reverse=[].reverse,$(window).load(function(){window.loaded=!0}),TradingView.notificationsChanged=new Delegate}).call(exports,__webpack_require__(8),__webpack_require__(189),__webpack_require__(4))},function(e,t,i){"use strict";function o(e){$(e).attr("title")||e.offsetWidth+a>=e.scrollWidth||$(e).attr("title",$(e).text())}function n(e){return e.offsetWidth+a<e.scrollWidth}var r,s,a;Object.defineProperty(t,"__esModule",{value:!0}),r=i(13),i.n(r),s=i(132),a=$.browser.msie||/\btrident\b/i.test(navigator.userAgent)?1:0,$(function(){$(document).on("mouseenter",".apply-overflow-title",function(){o(this)}),$(document).on("mouseenter",".apply-overflow-tooltip",function(){function e(){Object(s.hide)(),a.off("mouseleave mousedown",e)}var t,i,o,r,a=$(this);if(a.is(".apply-overflow-tooltip--check-children")){for(t=!1,i=a.children(),o=0;o<i.length;o++)if(n(i[o])){t=!0;break}if(!t)return}else if(!n(a[0]))return;r="",r=a.is(".apply-overflow-tooltip--allow-text")?a.text():a.clone().children().remove().end().text().trim(),Object(s.showOnElement)(a[0],{text:r}),a.on("mouseleave mousedown",e)})})},function(e,t,i){"use strict";function o(e){l=e}function n(){if(l)return l;if(!a||!window.document.body)return"indeterminate";var e=window.document.createElement("div");return e.appendChild(document.createTextNode("ABCD")),e.dir="rtl",e.style.fontSize="14px",e.style.width="4px",e.style.height="1px",e.style.position="absolute",e.style.top="-1000px",e.style.overflow="scroll",document.body.appendChild(e),l="reverse",e.scrollLeft>0?l="default":(e.scrollLeft=1,0===e.scrollLeft&&(l="negative")),document.body.removeChild(e),l}function r(e,t){var i,o=e.scrollLeft;if("rtl"!==t)return o;if("indeterminate"===(i=n()))return Number.NaN;switch(i){case"negative":return e.scrollWidth-e.clientWidth+o;case"reverse":return e.scrollWidth-e.clientWidth-o}return o}function s(e,t,i){if("rtl"!==i)return void(e.scrollLeft=t);var o=n();if("indeterminate"!==o)switch(o){case"negative":e.scrollLeft=e.clientWidth-e.scrollWidth+t;break;case"reverse":
e.scrollLeft=e.scrollWidth-e.clientWidth-t;break;default:e.scrollLeft=t}}var a,l;Object.defineProperty(t,"__esModule",{value:!0}),a=!("undefined"==typeof window||!window.document||!window.document.createElement),t._setScrollType=o,t.detectScrollType=n,t.getNormalizedScrollLeft=r,t.setNormalizedScrollLeft=s},function(e,t){e.exports={"common-tooltip":"common-tooltip-s2GEoMlT-","common-tooltip--hidden":"common-tooltip--hidden-Z0EAvXgv-","common-tooltip--horizontal":"common-tooltip--horizontal-13imOC5w-","common-tooltip--farther":"common-tooltip--farther-2yXMAkHF-","common-tooltip--vertical":"common-tooltip--vertical-mcRoucek-","common-tooltip-farther":"common-tooltip-farther-XoKytD99-","common-tooltip--no-pointer-events":"common-tooltip--no-pointer-events-3nL0Vygu-","common-tooltip--direction_normal":"common-tooltip--direction_normal-3u9ejKM2-","common-tooltip__body":"common-tooltip__body-356XFpBj-","common-tooltip__button-container":"common-tooltip__button-container-3EjyKV3s-","common-tooltip__body--no-buttons":"common-tooltip__body--no-buttons-3quqi1Sv-","common-tooltip__button":"common-tooltip__button-1rnQgujz-","common-tooltip--direction_reversed":"common-tooltip--direction_reversed-XN-JUTdr-","common-tooltip__ear-holder":"common-tooltip__ear-holder-yIJjpvgu-","common-tooltip__ear-holder--below":"common-tooltip__ear-holder--below-1rmzWejA-","common-tooltip__ear-holder--above":"common-tooltip__ear-holder--above-1D8FkNkw-","common-tooltip__ear-holder--before":"common-tooltip__ear-holder--before-oXq5sFXr-","common-tooltip__ear-holder--after":"common-tooltip__ear-holder--after-BnAcuW1N-","common-tooltip__body--with-hotkey":"common-tooltip__body--with-hotkey-2wXRtgYZ-","common-tooltip__body--width_wide":"common-tooltip__body--width_wide-3oG604Li-","common-tooltip__body--width_narrow":"common-tooltip__body--width_narrow-34hrFTFo-","common-tooltip__hotkey-block":"common-tooltip__hotkey-block-2gS_uAOl-","common-tooltip__hotkey-block--divider":"common-tooltip__hotkey-block--divider-rQ38KmpQ-","common-tooltip__hotkey-text":"common-tooltip__hotkey-text-1eb7dyCg-","common-tooltip__hotkey-button":"common-tooltip__hotkey-button-1XJ40e4D-","common-tooltip__plus-sign":"common-tooltip__plus-sign-3CKSupKp-"}},function(e,t,i){"use strict";(function(e,t,o){var n,r=i(46).max,s=i(300).lazyJqueryUI;i(310),n=window.TVDialogs={modalDialog:null,dialogs:[],NOTIFICATION_ANIMATION_START_OFFSET:"-33px",_constrainDraggableOptionsIfNeeded:function(t){return e.enabled("constraint_dialogs_movement")&&(t.containment=".chart-page"),t},showBrowserExtensionDialog:function(e){var o,r;if(e)return o={chrome:{logo:"/static/images/svg/google-chrome-logo.svg",name:"Google Chrome",href:"https://chrome.google.com/webstore/detail/tradingview-free-quotes-a/ommjfbdmijjlbhlhnnnfkmbnkpnjpipj"}},r=i(203),n.createModalDialog("Browser Extension",{noHeader:!0,width:"730px",content:t.render(r.dialogs.browserExtension,{browser:o[e]})}),n.modalDialog.find(".install-extension, ._tv-dialog-title-close").click(function(e){n.destroy()}),n.positionDialog(),n.modalDialog},
showGoProDialog:function(){},showSignInDialog:function(e,t){},showNotice:function(e,i,o){var r,s,a,l,c,h;return"object"==typeof i&&(o=i,i=""),o=o||{},r=o.doNotCloseOnBgClick||!1,s=o.html||"",a=o.width||"400px",l={},l.noClose=o.noClose||null,l.addClass=o.modalDialogClass||null,n.createModalDialog(e,l),c=o.centerCaption?"caption-big-center":"caption-big",n.modalDialog.find("._tv-dialog").css("width",a),h=o.customButtonCaption?o.customButtonCaption:$.t("OK"),n.modalDialog.find("._tv-dialog-content").html(t.render('<div class="main"><div class="{{captionClassName}} {{classSuffix}}">{{text}}'+s+'</div>{{^removeOkButton}}<div class="buttons"><input type="button" class="_tv-button ok" value="'+h+'"/></div>{{/removeOkButton}}</div>',{captionClassName:c,classSuffix:o.classSuffix||"",text:i,removeOkButton:o&&o.removeOkButton})),n.modalDialog.find("._tv-button.ok").on("click",function(){n.destroy(),o.onOkButtonClick&&o.onOkButtonClick()}),n.positionDialog(),n.applyHandlers(!1,{doNotCloseOnBgClickIfShadowbox:r,beforeDestroy:o.onClose}),n.modalDialog},showConfirm:function(e,i,o,r,s){var a,l;return s=s||{},s.dontAskSetting&&TVSettings.getBool(s.dontAskSetting)?void o():(a=n.createModalDialog(e,s),n.modalDialog.find("._tv-dialog").css("width",s.customWidth?s.customWidth:"400px"),n.modalDialog.find("._tv-dialog-content").html(t.render('<div class="main"><div class="caption-big">{{{text}}}</div>{{#dontAskSetting}}<input type="checkbox" id="confirm-dialog-checkbox" style="margin: 0; vertical-align: middle;"> <label for="confirm-dialog-checkbox" style="font-size: 11px;">'+$.t("Do not ask again")+'</label>{{/dontAskSetting}}</div><div class="_tv-dialogs-bottom _tv-dialog-center"><input class="_tv-button wide ok" type="button" value="'+$.t("YES")+'" style="margin-right: 10px;"/><input class="_tv-button wide cancel" type="button" value="'+$.t("NO")+'"/></div>',{text:i,dontAskSetting:!!s.dontAskSetting})),s.okButtonText&&n.modalDialog.find(".ok").val(s.okButtonText),s.cancelButtonText&&n.modalDialog.find(".cancel").val(s.cancelButtonText),l=n.modalDialog.find(".ok"),l.click(function(){s.dontAskSetting&&$("#confirm-dialog-checkbox").is(":checked")&&TVSettings.setValue(s.dontAskSetting,!0),o(),s.manualClose||n.destroy()}),n.modalDialog.find(".cancel").click(function(){r&&r(),s.manualCloseOnCancel||n.destroy()}),n.positionDialog(),n.applyHandlers(a,{processEnterButton:l}),a)},showCustomDialog:function(e){function t(t){var i=e.action(n.modalDialog),o=i&&!i.error,r=void 0===i,s=i&&i.notClose;!o&&!r||s?i.error&&n.showError(i.error):n.destroy(),t.preventDefault()}function i(t){"function"==typeof e.onCancel?e.onCancel():n.destroy()}return n.createModalDialog(e.title||$.t("Dialog"),{addClass:e.addClass||""}),n.modalDialog.find("._tv-dialog").css("width",e.width||"400px"),
n.modalDialog.find("._tv-dialog-content").html('<div class="main">'+(e.html||$.t("Content"))+"</div>"+(e.noButtons?"":'<div class="_tv-dialogs-bottom _tv-dialog-center">'+(e.noButtonOk?"":'<input class="_tv-button wide ok" type="button" value="'+$.t("OK")+'" style="margin-right: 10px;"/>')+(e.noButtonCancel?"":'<input class="_tv-button wide cancel" type="button" value="'+$.t("Cancel")+'"/>')+"</div>")),e.okButtonText&&n.modalDialog.find(".ok").val(e.okButtonText),e.cancelButtonText&&n.modalDialog.find(".cancel").val(e.cancelButtonText),n.modalDialog.find(".ok").click(t),n.modalDialog.find("form").submit(t),n.modalDialog.find(".cancel").click(i),n.modalDialog.find("._tv-dialog-title-close").click(i),n.positionDialog(),n.applyHandlers(),n.modalDialog},createModalDialog:function(e,t){var i,o;return t=t||{},null!==n.modalDialog&&n.destroy(),n.modalDialog=$('<div class="_tv-dialog-shadowbox"><div class="_tv-dialog _tv-dialog-modal'+(t.addClass?" "+t.addClass:"")+'">'+(t.noHeader?"":'<div class="_tv-dialog-title">'+(t.noClose?"":'<a class="_tv-dialog-title-close"></a>')+'<span class="_tv-dialog-title-text">'+e+"</span></div>")+'<div class="_tv-dialog-error"><span class="message"></span></div><div class="_tv-dialog-message"><span class="message"></span></div><div class="_tv-dialog-content"></div></div></div>').appendTo($("body")).data("title",e),n._addMessageCloseButton(n.modalDialog.find("._tv-dialog-error")),n._addMessageCloseButton(n.modalDialog.find("._tv-dialog-message")),t.noShadowBox&&n.modalDialog.addClass("transparent"),t.addClass&&n.modalDialog.addClass(t.addClass),t.width&&n.modalDialog.find("._tv-dialog").css({width:t.width}),t.content&&n.modalDialog.find("._tv-dialog-content").html(t.content),i=$(".fancybox-overlay"),i.length&&(o=i.css("z-index"),$("._tv-dialog-shadowbox").css("z-index",o+1)),t.draggable&&s(n.modalDialog).draggable(n._constrainDraggableOptionsIfNeeded({handle:n.modalDialog.find("._tv-dialog-title")})),t.zIndex&&n.modalDialog.css("z-index",t.zIndex),n.modalDialog},_addMessageCloseButton:function(e){var t=$(i(481)).attr({class:"close",title:$.t("Close message")});e.append(t),$(t).on("click",function(){e.animate({marginTop:n.NOTIFICATION_ANIMATION_START_OFFSET,opacity:0},"fast",function(){e.hide()})})},createDialog:function(e,i){var o,a,l,c;return n.isOpen(e)?(o=n.get(e),o.find("._tv-dialog-content").html(""),o.data("new",!1),o):(i=i||{},a=i.ownerDocument||document,o=$(t.render('<div class="_tv-dialog _tv-dialog-nonmodal {{&addClass}}"><div class="_tv-dialog-title{{#hideTitle}} _tv-dialog-title-hidden{{/hideTitle}}{{#hideCloseCross}} _tv-dialog-title-no-close{{/hideCloseCross}}">{{^hideTitle}} {{&title}}{{/hideTitle}}{{^hideCloseCross}}<a class="_tv-dialog-title-close"></a>{{/hideCloseCross}}</div><div class="_tv-dialog-error"><span class="message"></span></div><div class="_tv-dialog-message"><span class="message"></span></div><div class="_tv-dialog-content"></div></div>',{addClass:i.addClass||"",hideTitle:i.hideTitle,hideCloseCross:i.hideCloseCross,title:e}),a).appendTo(a.body),
n._addMessageCloseButton(o.find("._tv-dialog-error")),n._addMessageCloseButton(o.find("._tv-dialog-message")),i.width&&o.css({width:i.width}),i.content&&o.find("._tv-dialog-content").html(i.content),l=0,l=i.zIndex?i.zIndex:n.dialogs&&n.dialogs.length?r($.map(n.dialogs,function(e){return parseInt((e.dialog||e).css("z-index"),10)}))+1:110,o.css("z-index",l),o.data("new",!0),o.data("title",e),o.data("id",n.dialogs.length+1),n.dialogs.push({title:e,dialog:o,id:n.dialogs.length+1}),c={start:function(e,t){var i,o,r=t.helper.css("z-index"),s=0,a=null;for(i=0;i<n.dialogs.length;i++)(o=n.dialogs[i].dialog.css("z-index"))>s&&(s=o,a=n.dialogs[i].dialog);t.helper.css("z-index",s),a.css("z-index",r)}},i.dragHandle?c.handle=i.dragHandle:i.hideTitle||(c.handle="._tv-dialog-title"),i.dragOptions&&$.extend(c,i.dragOptions),s(o).draggable(n._constrainDraggableOptionsIfNeeded(c)),o)},positionDialog:function(e,t,i){function o(){r.css("margin-left",-Math.round(r.outerWidth()/2)+"px"),r.css("margin-top",-Math.round(r.outerHeight()/2)+"px")}var r,s,a,l,c,h,u,d,p,_;i=i||{},t=t||i.position,e?(s=e.prop("ownerDocument"),a=s.defaultView,l=e.width(),c=e.height(),h=$(a).width(),u=$(a).height(),t&&t.top&&t.left?(p=i.forcePosition?t.left:Math.max(2,Math.min(h-l-4,t.left))+"px",d=i.forcePosition?t.top:Math.max(2,Math.min(u-c-4,t.top))+"px"):t&&t.considerScroll?(_=$(s),p=Math.round((h-l)/2+_.scrollLeft())+"px",d=Math.round((u-c)/2+_.scrollTop())+"px"):(p=Math.round((h-l)/2)+"px",d=Math.round((u-c)/2)+"px"),i.fadeIn?e.css({left:p,top:d}).hide().fadeIn("fast"):i.smooth?e.animate({left:p,top:d}):e.css({left:p,top:d})):(e=n.modalDialog,r=e.find("._tv-dialog"),o(),r.resize(o))},applyHandlers:function(e,t){var i,o,r,s=!e||e===this.modalDialog;t=t||{},i=s?function(){n.destroy()}:function(){n.destroy(e.data("title"))},e=e||n.modalDialog.find("._tv-dialog"),o=e.prop("ownerDocument"),t.beforeDestroy&&e.on("destroy",t.beforeDestroy),e.find("._tv-dialog-title ._tv-dialog-title-close, .js-dialog-close").on("click",function(e){t.closeHandler&&"function"==typeof t.closeHandler?t.closeHandler(e):i()}),t.doNotCloseOnBgClick||setTimeout(function(){$(o).on("mousedown.closeDialog",function(n){var r=$(n.target).parents().andSelf();r.is(e)||t.doNotCloseOnBgClickIfShadowbox&&r.is("._tv-dialog-shadowbox, .tv-dialog__modal-wrap")||r.is(".colorpicker, .charts-popup-list, ._tv-dialog, .tvcolorpicker-popup, .symbol-edit-popup, .ui-datepicker, .clockpicker-popover, .pac-container")||($(o).off("mousedown.closeDialog"),i())})},0),e.find('input[type="checkbox"]').change(function(){var e=$(this);e.next("._tv-dialog-checkbox-mask").toggleClass("disabled",e.prop("disabled")).toggleClass("_tv-dialog-checkbox-mask-active",e.is(":checked"))}),r=e.find('input[type="text"]').focus(function(){$(this).addClass("_tv-dialog-content-textactive")}).blur(function(){$(this).removeClass("_tv-dialog-content-textactive")}).first(),Modernizr.touch||t.notFocusFirst||r.focus(),e.find('input[type="password"]').focus(function(){$(this).addClass("_tv-dialog-content-textactive")}).blur(function(){
$(this).removeClass("_tv-dialog-content-textactive")}),e.find("textarea").focus(function(){$(this).addClass("_tv-dialog-content-textareaactive")}).blur(function(){$(this).removeClass("_tv-dialog-content-textareaactive")}),e.find("._tv-dialog-checkbox-mask").click(function(){var e=$(this).prev();e.prop("disabled")||(e.prop("checked",!e[0].checked),e.change())}),t.doNotCloseOnEsc||$(o).bind("keyup.hideDialog",function(t){if(27===t.keyCode)return e?n.destroy(e.data("title")):n.destroy(),!1}),t.processEnterButton&&$(o).bind("keyup.confirmAndCloseDialog",function(e){13===e.keyCode&&"textarea"!==e.target.tagName.toLowerCase()&&(t.processEnterButton.click(),$(o).unbind("keyup.confirmAndCloseDialog"))})},showError:function(e,t,i){n.showMessage(e,t,$.extend(i||{},{isError:!0}))},showMessage:function(e,t,i){var o,r,s;t||(t=$("._tv-dialog")),i=i||{},o=i.isError&&"_tv-dialog-error"||"_tv-dialog-message",r=t.find("."+o),s=r.find(".message"),i.html?s.html("string"==typeof i.html?i.html:e):s.text(e),s.css("width",t.width()).toggleClass("selectable",!!i.selectable),r.toggleClass("with-close",!!i.withClose).css({marginTop:n.NOTIFICATION_ANIMATION_START_OFFSET,opacity:"0"}).show().animate({marginTop:0,opacity:1},"fast"),i.withClose||(i.hideWithoutAnimation?r.on("touchstartoutside mousedownoutside keydownoutside",function e(){r.hide(),r.off("touchstartoutside mousedownoutside keydownoutside",e)}):r.on("touchstartoutside mousedownoutside keydownoutside",function e(){r.animate({marginTop:n.NOTIFICATION_ANIMATION_START_OFFSET,opacity:0},"fast",function(){r.hide()}),r.off("touchstartoutside mousedownoutside keydownoutside",e)}))},isOpen:function(e){for(var t=0;t<n.dialogs.length;t++)if(n.dialogs[t].title===e)return!0;return!1},get:function(e){for(var t=0;t<n.dialogs.length;t++)if(n.dialogs[t].title===e)return n.dialogs[t].dialog},submit:function(e,t){var i=t?$(t):$("._tv-dialog form").first(),o=i.serialize(),n=i.attr("action");$.post(n,o,function(t){void 0!==e&&e(t)},"json")},destroy:function(e,t){var i,o;if(void 0!==n.chart&&(n.chart.destroy(),delete n.chart),i=null,e&&"string"==typeof e)for(o=0;o<n.dialogs.length;o++)n.dialogs[o].title===e&&(i=n.dialogs[o].dialog.prop("ownerDocument"),n.dialogs[o].dialog.find(".apply-common-tooltip").mouseout(),n.dialogs[o].dialog.trigger("destroy",t),$(document).unbind("mouseup.hideDialog"+n.dialogs[o].id),$("input",n.dialogs[o].dialog).blur(),n.dialogs[o].dialog.remove(),n.dialogs.splice(o,1));else n.modalDialog&&(i=n.modalDialog.prop("ownerDocument"),n.modalDialog.find(".apply-common-tooltip").mouseout(),n.modalDialog.find("._tv-dialog").trigger("destroy"),n.modalDialog.remove(),n.modalDialog=null);$(i).unbind("keyup.hideDialog"),$(i).unbind("keyup.confirmAndCloseDialog")},changeTitle:function(e,t){e&&n.dialogs.forEach(function(i){var o,r;if(i.title===e)return o=i.dialog,r=o.find("._tv-dialog-title"),i.title=t,o.data("title",t),r.html(r.html().replace(e,t)),r.find("a").on("click",function(){n.destroy(t)}),!0})},toggleTitleEl:function(e,t){n.dialogs.filter(function(t){return t.title===e
}).map(function(e){return e.dialog}).forEach(function(e){var i=e.find("._tv-dialog-title");"boolean"!=typeof t&&(t=i.hasClass("_tv-dialog-title-hidden")),i.toggleClass("_tv-dialog-title-hidden",!t)})},resizeContent:function(e,t,i){var o,n;null==i&&(i=20),e+=i,o=parseInt($("body").height(),10),n=t.height(),e>o&&(n-=e-o,n=Math.max(0,n),t.height(n))}},void 0!==o&&o&&o.exports&&(o.exports=n)}).call(t,i(4),i(103),i(47)(e))},function(e,t){},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 973.125"><path d="M960 832L710.875 582.875C746.438 524.812 768 457.155 768 384 768 171.97 596 0 384 0 171.97 0 0 171.97 0 384c0 212 171.97 384 384 384 73.156 0 140.812-21.562 198.875-57L832 960c17.5 17.5 46.5 17.375 64 0l64-64c17.5-17.5 17.5-46.5 0-64zM384 640c-141.375 0-256-114.625-256-256s114.625-256 256-256 256 114.625 256 256-114.625 256-256 256z"/></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28"><path fill="#ffffff" d="M18 10V0h-8v10H0v8h10v10h8V18h10v-8"/></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg"><line x2="100%" y2="100%"/><line x2="100%" y1="100%"/></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 14" width="25" height="14" style="position:relative;top:3px"><path d="M10.43 8.683L9.345 8.68c-.943-.005-1.712-.774-1.716-1.717-.003-.452.172-.877.49-1.195.32-.32.744-.493 1.196-.492l4.002.016c.83.004 2.22.18 2.225 1.316.002.522.427.943.95.942.52-.002.942-.427.94-.95-.007-1.932-1.62-3.188-4.107-3.198l-4.003-.016c-.96-.003-1.862.368-2.54 1.045-.677.68-1.048 1.58-1.044 2.54.003.99.41 1.887 1.06 2.54.652.65 1.55 1.056 2.54 1.06l1.086.004c.522.002.947-.42.948-.942.002-.52-.42-.946-.942-.947zm13.832-1.655c-.008-2.076-1.41-3.59-3.33-3.597l-1.357-.003c-.522-.002-.947.42-.948.942-.002.52.42.946.94.947l1.356.006c.996.003 1.445.863 1.448 1.714.004.453-.17.878-.49 1.196-.317.32-.742.493-1.195.492l-4.27-.017c-1.952-.008-1.955-.924-1.957-1.315-.002-.522-.426-.943-.948-.942-.523.003-.945.428-.943.95.004.896.296 1.63.834 2.17.66.66 1.69 1.023 3.01 1.028l4.27.017c.96.003 1.86-.368 2.54-1.046.675-.678 1.046-1.58 1.043-2.54z"/></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 9 9" width="9px" height="9px"><path d="M2 1L1 2l2.5 2.5L1 7l1 1 2.5-2.5L7 8l1-1-2.5-2.5L8 2 7 1 4.5 3.5z"/></svg>'},function(e,t,i){"use strict";TradingView.PublishedChartsTimeline=function(){},TradingView.LinearRegressionPaneView=function(){},TradingView.study_PivotPointsStandard=function(){},TradingView.study_PivotPointsHighLow=function(){},TradingView.study_ZigZag=function(){},TradingView.study_LinearRegression=function(){},TradingView.study_ElliottWave=function(){},TradingView.ESDStudyBase=function(){},TradingView.Pro=function(){this.hasPackage=function(){return!1}},window.user={is_pro:!1,settings:{}},TradingView.Pro.prototype.getStudies=function(){return[]},TradingView.Pro.prototype.getProduct=function(){return{}},TradingView.Pro.prototype.getStudiesOrder=function(){return[]},
TradingView.templates=i(203),TradingView.templates.dialogs={symbolSearch:'<div class="symbol-block"><div class="spread-actions"></div><div class="symbol-block-inputspacer"><input maxlength="'+TradingView.SYMBOL_SEARCH_MAX_LENGTH+'" /><div class="search-icon"></div></div></div><div class="filter"></div><div class="results"></div>'},TradingView.AlertLabel=function(){},TradingView.getDataVendorString=function(){},TradingView.study_VbPVisible=function(){},TradingView.study_VbPSessions=function(){},TradingView.study_ESD$TV_DIVIDENDS=function(){},TradingView.study_ESD$TV_SPLITS=function(){},TradingView.study_ESD$TV_EARNINGS=function(){},TradingView.MockupRequestedCache=function(e){e&&e([])},TradingView.MockupRequestedCache.invalidate=function(){},TradingView.StudyStrategy=function(){},TradingView.LinetoolTemplatesList=function(){},window.PublishedScript={suggest:function(){var e=$.Deferred();return e.resolve(null),e}}},function(e,t,i){"use strict";var o,n,r;Object.defineProperty(t,"__esModule",{value:!0}),i.d(t,"RestrictedToolsetBootloader",function(){return r}),o=i(3),n=i(162),r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.c(t,e),t.prototype._startLoading=function(){return i.e(6).then(i.bind(null,822)).then(function(e){return e.getRestrictedToolSet()})},t}(n.a)},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><path d="M12.5 17.207L18.707 11h2l3.647-3.646-.708-.708L20.293 10h-2L12.5 15.793l-3-3-4.854 4.853.708.708L9.5 14.207z"/><path d="M9 16h1v1H9zm1 1h1v1h-1zm-1 1h1v1H9zm2 0h1v1h-1zm-1 1h1v1h-1zm-1 1h1v1H9zm2 0h1v1h-1zm-3-3h1v1H8zm-1 1h1v1H7zm-1 1h1v1H6zm2 0h1v1H8zm-1 1h1v1H7zm-2 0h1v1H5zm17-9h1v1h-1zm1-1h1v1h-1zm0 2h1v1h-1zm-1 1h1v1h-1zm-1 1h1v1h-1zm2 0h1v1h-1zm-1 1h1v1h-1zm-1 1h1v1h-1zm2 0h1v1h-1zm-1 1h1v1h-1zm-1 1h1v1h-1zm2 0h1v1h-1zm-1 1h1v1h-1zm-1 1h1v1h-1zm2 0h1v1h-1zm-5-7h1v1h-1zm2 0h1v1h-1zm1-1h1v1h-1zm-2 2h1v1h-1zm-1 1h1v1h-1zm2 0h1v1h-1zm-1 1h1v1h-1zm-1 1h1v1h-1zm2 0h1v1h-1zm-1 1h1v1h-1zm-1 1h1v1h-1zm2 0h1v1h-1zm-1 1h1v1h-1zm-2-6h1v1h-1zm-1 1h1v1h-1zm-1 1h1v1h-1zm2 0h1v1h-1zm-1 1h1v1h-1zm-1 1h1v1h-1zm2 0h1v1h-1zm-1 1h1v1h-1zm-1 1h1v1h-1zm2 0h1v1h-1zm-3-3h1v1h-1zm-1 1h1v1h-1zm-1 1h1v1h-1zm2 0h1v1h-1zm-1 1h1v1h-1z"/></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g fill="none" stroke="currentColor" stroke-linecap="square"><path d="M10.5 7.5v15M7.5 20.5H10M13.5 11.5H11M19.5 6.5v15M16.5 9.5H19M22.5 16.5H20"/></g></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><path d="M17 11v6h3v-6h-3zm-.5-1h4a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-.5.5h-4a.5.5 0 0 1-.5-.5v-7a.5.5 0 0 1 .5-.5z"/><path d="M18 7h1v3.5h-1zm0 10.5h1V21h-1z"/><path d="M9 8v12h3V8H9zm-.5-1h4a.5.5 0 0 1 .5.5v13a.5.5 0 0 1-.5.5h-4a.5.5 0 0 1-.5-.5v-13a.5.5 0 0 1 .5-.5z"/><path d="M10 4h1v3.5h-1zm0 16.5h1V24h-1z"/></svg>'},function(e,t){
e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><path d="M9 8v12h3V8H9zm-1-.502C8 7.223 8.215 7 8.498 7h4.004c.275 0 .498.22.498.498v13.004a.493.493 0 0 1-.498.498H8.498A.496.496 0 0 1 8 20.502V7.498z"/><path d="M10 4h1v3.5h-1z"/><path d="M17 6v6h3V6h-3zm-1-.5c0-.276.215-.5.498-.5h4.004c.275 0 .498.23.498.5v7c0 .276-.215.5-.498.5h-4.004a.503.503 0 0 1-.498-.5v-7z"/><path d="M18 2h1v3.5h-1z"/></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><path d="M17 11v6h3v-6h-3zm-.5-1h4a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-.5.5h-4a.5.5 0 0 1-.5-.5v-7a.5.5 0 0 1 .5-.5z"/><path d="M18 7h1v3.5h-1zm0 10.5h1V21h-1z"/><path d="M9 8v11h3V8H9zm-.5-1h4a.5.5 0 0 1 .5.5v12a.5.5 0 0 1-.5.5h-4a.5.5 0 0 1-.5-.5v-12a.5.5 0 0 1 .5-.5z"/><path d="M10 4h1v5h-1zm0 14h1v5h-1zM8.5 9H10v1H8.5zM11 9h1.5v1H11zm-1 1h1v1h-1zm-1.5 1H10v1H8.5zm2.5 0h1.5v1H11zm-1 1h1v1h-1zm-1.5 1H10v1H8.5zm2.5 0h1.5v1H11zm-1 1h1v1h-1zm-1.5 1H10v1H8.5zm2.5 0h1.5v1H11zm-1 1h1v1h-1zm-1.5 1H10v1H8.5zm2.5 0h1.5v1H11z"/></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><path d="M11.982 16.689L17.192 12h3.033l4.149-4.668-.748-.664L19.776 11h-2.968l-4.79 4.311L9 12.293l-4.354 4.353.708.708L9 13.707z"/></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g fill="none" stroke="currentColor"><path stroke-dasharray="1,1" d="M4 14.5h22"/><path stroke-linecap="round" stroke-linejoin="round" d="M7.5 12.5l2-4 1 2 2-4 3 6"/><path stroke-linecap="round" d="M5.5 16.5l-1 2"/><path stroke-linecap="round" stroke-linejoin="round" d="M17.5 16.5l2 4 2-4m2-4l1-2-1 2z"/></g></svg>'},function(e,t,i){"use strict";var o,n,r,s,a,l,c;Object.defineProperty(t,"__esModule",{value:!0}),i.d(t,"HeaderToolbarBootloader",function(){return c}),o=i(3),n=i(18),i.n(n),r=i(60),i.n(r),s=i(200),a=i(251),l=i(162),c=function(e){function t(t,i){var o=e.call(this)||this;return o._toolsBootloader=t,o._headerProps=i,o._headerProps.resizerBridge.negotiateHeight(s.HEADER_TOOLBAR_HEIGHT_EXPANDED),o._headerProps.resizerBridge.body.value()[0].appendChild(Object(a.a)(["border-right","border-left"],["bottom-left-radius","bottom-right-radius"])),o}return o.c(t,e),t.prototype._startLoading=function(){var e=this;return Promise.all([this._toolsBootloader.load(),this._loadHeaderToolbar()]).then(function(t){var i=t[0],s=t[1];return r.render(n.createElement(s,o.a({},e._headerProps,{tools:i})),e._headerProps.resizerBridge.body.value()[0])})},t.prototype._loadHeaderToolbar=function(){return i.e(17).then(i.bind(null,823)).then(function(e){return e.HeaderToolbar})},t}(l.a)},function(e,t){e.exports={"css-value-header-toolbar-height":"38px"}},function(e,t){e.exports={container:"container-3GsVqUrQ-",inner:"inner-1a0WTAmL-","border-left":"border-left-3jmw9PsE-","border-right":"border-right-1fBrjP5Q-","border-top":"border-top-1o194NZX-","border-bottom":"border-bottom-3Epigsgy-",
"top-right-radius":"top-right-radius-3NSNE4nY-","top-left-radius":"top-left-radius-1b4UOCjq-","bottom-right-radius":"bottom-right-radius-2eel14ZO-","bottom-left-radius":"bottom-left-radius-3tJHcqCz-"}},function(e,t,i){"use strict";var o,n,r,s,a,l,c,h;Object.defineProperty(t,"__esModule",{value:!0}),i.d(t,"DrawingToolbarBootloader",function(){return h}),o=i(3),n=i(18),i.n(n),r=i(60),i.n(r),s=i(207),a=i(336),l=i(162),c=i(251),h=function(e){function t(t){var i=e.call(this)||this;return i._opts=t,s.isDrawingToolbarVisible.value()&&(i._opts.resizerBridge.negotiateWidth(a.b),i._opts.resizerBridge.body.value()[0].appendChild(Object(c.a)())),i}return o.c(t,e),t.prototype._startLoading=function(){var e=this;return i.e(14).then(i.bind(null,824)).then(function(t){return r.render(n.createElement(t.DrawingToolbar,o.a({},e._opts)),e._opts.resizerBridge.body.value()[0])})},t}(l.a)},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g fill-rule="nonzero"><path d="M20.449 8.505l2.103 9.112.974-.225-2.103-9.112zM13.943 14.011l7.631 4.856.537-.844-7.631-4.856zM14.379 11.716l4.812-3.609-.6-.8-4.812 3.609zM10.96 13.828l-4.721 6.744.819.573 4.721-6.744zM6.331 20.67l2.31-13.088-.985-.174-2.31 13.088zM9.041 7.454l1.995 3.492.868-.496-1.995-3.492z"/><path d="M8.5 7c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM5.5 24c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM12.5 14c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM20.5 8c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM23.5 21c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"/></g></svg>'},function(e,t){
e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g fill-rule="nonzero"><path d="M21.487 5.248l-12.019 1.502.124.992 12.019-1.502zM6.619 9.355l-2.217 11.083.981.196 2.217-11.083zM6.534 22.75l12.071-1.509-.124-.992-12.071 1.509zM21.387 18.612l2.21-11.048-.981-.196-2.21 11.048zM8.507 9.214l10.255 10.255.707-.707-10.255-10.255z"/><path d="M7.5 9c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM4.5 24c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM23.5 7c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM20.5 22c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"/></g></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g fill-rule="nonzero"><path d="M8.013 23.846c4.923 2.247 9.792 2.626 13.448-.517l-.652-.758c-3.277 2.817-7.775 2.467-12.381.365l-.415.91z"/><path d="M24.035 20.056c2.262-4.176 1.814-8.73-.13-12.98l-.909.416c1.826 3.993 2.244 8.24.16 12.088l.879.476z"/><path d="M8.221 21.401l13.249-14.077-.728-.685-13.249 14.077z"/><path d="M6.5 24c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM22.5 7c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM22.5 23c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"/></g></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g><path fill-rule="nonzero" d="M7.354 21.354l14-14-.707-.707-14 14z"/><path d="M21 7l-8 3 5 5z"/><path fill-rule="nonzero" d="M22.5 7c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM5.5 24c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"/></g></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><path fill-rule="nonzero" d="M17 12v-6h-6v6h-4.865l7.865 9.438 7.865-9.438h-4.865zm-7-7h8v6h6l-10 12-10-12h6v-6z"/></svg>'},function(e,t){
e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><path fill-rule="nonzero" d="M16 17h6v-6h-6v-4.865l-9.438 7.865 9.438 7.865v-4.865zm7 1h-6v6l-12-10 12-10v6h6v8z"/></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><path fill-rule="nonzero" d="M12 11h-6v6h6v4.865l9.438-7.865-9.438-7.865v4.865zm-7 7v-8h6v-6l12 10-12 10v-6h-6z"/></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><path fill-rule="nonzero" d="M11 16v6h6v-6h4.865l-7.865-9.438-7.865 9.438h4.865zm7 7h-8v-6h-6l10-12 10 12h-6v6z"/></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><path fill-rule="nonzero" d="M9.586 18h7.414c3.309 0 6-2.689 6-6 0-3.309-2.687-6-5.994-6h-5.012c-3.306 0-5.994 2.686-5.994 5.994v9.592l3.586-3.586zm-4.586 6v-12.006c0-3.863 3.137-6.994 6.994-6.994h5.012c3.863 0 6.994 3.142 6.994 7 0 3.866-3.142 7-7 7h-7l-5 5z"/></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g fill-rule="nonzero"><path d="M6 6v6.5h1v-6.5zM7 22v-2.5h-1v2.5zM11 11v2.5h1v-2.5zM12 24v-7.5h-1v7.5zM16 5v5.5h1v-5.5zM17 21v-2.5h-1v2.5zM21 7v4.5h1v-4.5zM22 19v-2.5h-1v2.5z"/><path d="M6 13v6h1v-6h-1zm-1-1h3v8h-3v-8z"/><path d="M11 16h1v-2h-1v2zm-1-3h3v4h-3v-4z"/><path d="M16 18h1v-7h-1v7zm-1-8h3v9h-3v-9z"/><path d="M21 16h1v-4h-1v4zm-1-5h3v6h-3v-6z"/></g></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g fill-rule="nonzero"><path d="M17.605 19.584c.295-2.304-.584-3.586-3.274-5.959-2.462-2.172-3.191-3.241-2.94-5.111l-.991-.133c-.312 2.322.567 3.61 3.269 5.994 2.452 2.163 3.181 3.227 2.943 5.083l.992.127z"/><path d="M6.053 24.868c3.772 1.644 7.307 1.643 9.712-1.249l-.769-.64c-2.045 2.458-5.133 2.459-8.544.972l-.4.917z"/><path d="M12.949 5.087c2.044-2.525 5.157-2.54 8.602-1.036l.4-.917c-3.81-1.663-7.376-1.646-9.779 1.324l.777.629z"/><path d="M4.5 25c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM16.5 23c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM11.5 8c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM23.5 6c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"/></g></svg>'},function(e,t){
e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g fill-rule="nonzero"><path d="M6.256 20.652c.548-3.024 1.607-5.962 3.329-8.312l-.807-.591c-1.825 2.493-2.933 5.565-3.506 8.725l.984.178z"/><path d="M12.243 9.657c2.365-1.764 5.345-2.846 8.416-3.402l-.178-.984c-3.21.581-6.326 1.712-8.836 3.584l.598.802z"/><path d="M10.5 12c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM22.5 7c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM5.5 24c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"/></g></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g fill-rule="nonzero"><path d="M1.789 23l.859-.854.221-.228c.18-.19.38-.409.597-.655.619-.704 1.238-1.478 1.815-2.298.982-1.396 1.738-2.776 2.177-4.081 1.234-3.667 5.957-4.716 8.923-1.263 3.251 3.785-.037 9.38-5.379 9.38h-9.211zm9.211-1c4.544 0 7.272-4.642 4.621-7.728-2.45-2.853-6.225-2.015-7.216.931-.474 1.408-1.273 2.869-2.307 4.337-.599.852-1.241 1.653-1.882 2.383l-.068.078h6.853z"/><path d="M18.182 6.002l-1.419 1.286c-1.031.935-1.075 2.501-.096 3.48l1.877 1.877c.976.976 2.553.954 3.513-.045l5.65-5.874-.721-.693-5.65 5.874c-.574.596-1.507.609-2.086.031l-1.877-1.877c-.574-.574-.548-1.48.061-2.032l1.419-1.286-.672-.741z"/></g></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><path fill-rule="nonzero" d="M6 21.586l3.586-3.586h13.407c.004 0 .007-11.993.007-11.993 0-.007-17-.007-17-.007v15.586zm-1 2.414v-18.005c0-.549.451-.995.995-.995h17.01c.549 0 .995.45.995 1.007v11.986c0 .556-.45 1.007-1.007 1.007h-12.993l-5 5z"/></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g fill-rule="nonzero"><path d="M23 4v21h1v-21z"/><path d="M17 4v21h1v-21z"/><path d="M5 16.5v8.5h1v-8.5z"/><path d="M5 4v8.5h1v-8.5z"/><path d="M5.5 16c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"/><path d="M11 16.5v8.5h1v-8.5z"/><path d="M11 4v8.5h1v-8.5z"/><path d="M11.5 16c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"/></g></svg>'},function(e,t){
e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g><path d="M15.246 21.895l1.121.355c-.172.625-.458 1.089-.857 1.393-.4.303-.907.455-1.521.455-.76 0-1.385-.26-1.875-.779-.49-.52-.734-1.23-.734-2.131 0-.953.246-1.693.738-2.221.492-.527 1.139-.791 1.941-.791.701 0 1.27.207 1.707.621.26.245.456.596.586 1.055l-1.145.273c-.068-.297-.209-.531-.424-.703-.215-.172-.476-.258-.783-.258-.424 0-.769.152-1.033.457-.264.305-.396.798-.396 1.48 0 .724.13 1.24.391 1.547.26.307.599.461 1.016.461.307 0 .572-.098.793-.293.221-.195.38-.503.477-.922z"/><path fill-rule="nonzero" d="M20.449 8.505l2.103 9.112.974-.225-2.103-9.112zM13.943 14.011l7.631 4.856.537-.844-7.631-4.856zM14.379 11.716l4.812-3.609-.6-.8-4.812 3.609zM10.96 13.828l-4.721 6.744.819.573 4.721-6.744zM6.331 20.67l2.31-13.088-.985-.174-2.31 13.088zM9.041 7.454l1.995 3.492.868-.496-1.995-3.492z"/><path fill-rule="nonzero" d="M8.5 7c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM5.5 24c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM12.5 14c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM20.5 8c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM23.5 21c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"/></g></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g><path fill-rule="nonzero" d="M6.5 23v1h17.5v-17.5h-1v16.5z"/><path fill-rule="nonzero" d="M21.5 5v-1h-17.5v17.5h1v-16.5z"/><path fill-rule="nonzero" d="M4.5 25c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM23.5 6c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"/><path fill-rule="nonzero" d="M13 9v13h1v-13z" id="Line"/><path d="M13.5 6l2.5 3h-5z"/><path fill-rule="nonzero" d="M19 14h-13v1h13z"/><path d="M19 17v-5l3 2.5z"/></g></svg>'},function(e,t){
e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g><path fill-rule="nonzero" d="M20 14h-14v1h14z" id="Line"/><path d="M20 17v-5l3 2.5z"/><path fill-rule="nonzero" d="M24 8.5v16.5h1v-16.5zM4 4v16.5h1v-16.5z"/><path fill-rule="nonzero" d="M4.5 24c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM24.5 8c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"/></g></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g fill-rule="nonzero"><path d="M20.534 4.664l-13.318 4.701.333.943 13.318-4.701zM20.802 22.371l-13.285-4.689-.333.943 13.285 4.689z"/><path d="M5.5 12c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM22.5 6c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM5.5 19c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM22.5 25c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"/></g></svg>'},function(e,t){
e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g><path fill-rule="nonzero" d="M5.238 18.469l4.17-4.17-.707-.707-4.17 4.17zM16.47 17.763l-.707.707-4.265-4.265.707-.707zM22.747 13.546l-4.192 4.192.707.707 4.192-4.192z"/><path fill-rule="nonzero" d="M10.5 14c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM17.5 21c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM24.5 14c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM3.5 21c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"/><path d="M13.746 7h-1.258l-.5-1.301h-2.289l-.473 1.301h-1.227l2.23-5.727h1.223l2.293 5.727zm-2.129-2.266l-.789-2.125-.773 2.125h1.563z"/><path d="M26.246 4.895l1.121.355c-.172.625-.458 1.089-.857 1.393-.4.303-.907.455-1.521.455-.76 0-1.385-.26-1.875-.779-.49-.52-.734-1.23-.734-2.131 0-.953.246-1.693.738-2.221.492-.527 1.139-.791 1.941-.791.701 0 1.27.207 1.707.621.26.245.456.596.586 1.055l-1.145.273c-.068-.297-.209-.531-.424-.703-.215-.172-.476-.258-.783-.258-.424 0-.769.152-1.033.457-.264.305-.396.798-.396 1.48 0 .724.13 1.24.391 1.547.26.307.599.461 1.016.461.307 0 .572-.098.793-.293.221-.195.38-.503.477-.922z"/></g></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g><path fill-rule="nonzero" d="M5.238 18.469l4.17-4.17-.707-.707-4.17 4.17zM16.47 17.763l-.707.707-4.265-4.265.707-.707zM22.747 13.546l-4.192 4.192.707.707 4.192-4.192z"/><path fill-rule="nonzero" d="M10.5 14c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM17.5 21c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM24.5 14c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM3.5 21c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"/><path d="M8.395 7l-1.367-5.727h1.184l.863 3.934 1.047-3.934h1.375l1.004 4 .879-4h1.164l-1.391 5.727h-1.227l-1.141-4.281-1.137 4.281z"/><path d="M24.086 7v-2.41l-2.098-3.316h1.355l1.348 2.266 1.32-2.266h1.332l-2.105 3.324v2.402z"/></g></svg>'},function(e,t){
e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g><path fill-rule="nonzero" d="M5.238 18.469l4.17-4.17-.707-.707-4.17 4.17zM16.47 17.763l-.707.707-4.265-4.265.707-.707zM22.747 13.546l-4.192 4.192.707.707 4.192-4.192z"/><path fill-rule="nonzero" d="M10.5 14c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM17.5 21c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM24.5 14c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM3.5 21c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"/><path d="M11.148 7h-1.098v-4.137c-.401.375-.874.652-1.418.832v-.996c.286-.094.598-.271.934-.533.336-.262.566-.567.691-.916h.891v5.75z"/><path d="M23.355 5.527l1.094-.113c.031.247.124.443.277.588.154.145.331.217.531.217.229 0 .423-.093.582-.279.159-.186.238-.467.238-.842 0-.352-.079-.615-.236-.791-.158-.176-.363-.264-.615-.264-.315 0-.598.139-.848.418l-.891-.129.563-2.98h2.902v1.027h-2.07l-.172.973c.245-.122.495-.184.75-.184.487 0 .9.177 1.238.531.339.354.508.814.508 1.379 0 .471-.137.892-.41 1.262-.372.505-.889.758-1.551.758-.529 0-.96-.142-1.293-.426-.333-.284-.533-.665-.598-1.145z"/></g></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g><path fill-rule="nonzero" d="M5.238 18.469l4.17-4.17-.707-.707-4.17 4.17zM16.47 17.763l-.707.707-4.265-4.265.707-.707zM22.747 13.546l-4.192 4.192.707.707 4.192-4.192z"/><path fill-rule="nonzero" d="M10.5 14c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM17.5 21c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM24.5 14c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM3.5 21c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"/><path d="M13.746 7h-1.258l-.5-1.301h-2.289l-.473 1.301h-1.227l2.23-5.727h1.223l2.293 5.727zm-2.129-2.266l-.789-2.125-.773 2.125h1.563z"/><path d="M22.582 7v-5.727h4.246v.969h-3.09v1.27h2.875v.965h-2.875v1.559h3.199v.965z"/></g></svg>'},function(e,t){
e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g><path fill-rule="nonzero" d="M5.238 18.469l4.17-4.17-.707-.707-4.17 4.17zM16.47 17.763l-.707.707-4.265-4.265.707-.707zM22.747 13.546l-4.192 4.192.707.707 4.192-4.192z"/><path fill-rule="nonzero" d="M10.5 14c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM17.5 21c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM24.5 14c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM3.5 21c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"/><path d="M8.395 7l-1.367-5.727h1.184l.863 3.934 1.047-3.934h1.375l1.004 4 .879-4h1.164l-1.391 5.727h-1.227l-1.141-4.281-1.137 4.281z"/><path d="M22.086 7v-1.043l3.008-3.715h-2.668v-.969h4.191v.898l-3.137 3.863h3.258v.965z"/></g></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g fill-rule="nonzero"><path d="M12.435 6.136c-4.411.589-7.983 3.039-9.085 6.27l.946.323c.967-2.836 4.209-5.059 8.271-5.602l-.132-.991zM3.347 16.584c1.101 3.243 4.689 5.701 9.117 6.283l.13-.991c-4.079-.537-7.335-2.767-8.301-5.613l-.947.321zM16.554 22.865c4.381-.582 7.94-3 9.071-6.2l-.943-.333c-.994 2.811-4.224 5.006-8.26 5.542l.132.991zM25.646 12.394c-1.107-3.225-4.675-5.668-9.078-6.257l-.133.991c4.056.542 7.293 2.76 8.265 5.591l.946-.325z"/><path d="M14.5 8c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM14.5 24c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM3.5 16c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM25.5 16c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"/></g></svg>'},function(e,t){
e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g fill-rule="nonzero"><path d="M4.354 25.354l5-5-.707-.707-5 5z"/><path d="M12.354 17.354l5-5-.707-.707-5 5z"/><path d="M20.354 9.354l5-5-.707-.707-5 5z"/><path d="M18.5 12c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM10.5 20c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"/></g></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g fill-rule="nonzero"><path d="M7.463 12.026l13.537-7.167-.468-.884-13.537 7.167z"/><path d="M22.708 16.824l-17.884 9.468.468.884 17.884-9.468z"/><path d="M22.708 9.824l-15.839 8.386.468.884 15.839-8.386z"/><path d="M5.5 14c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM5.5 21c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM22.5 5c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"/></g></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g fill-rule="nonzero"><path d="M23.868 7.825c2.791 3.916 2.918 9.33-.065 13.435-3.733 5.138-10.925 6.277-16.063 2.544l.721-.714c4.682 3.294 11.157 2.229 14.534-2.418 2.641-3.635 2.657-8.502.153-12.133l.721-.714z"/><path d="M8.477 5.899c3.584-2.509 8.298-2.514 11.865-.127l.718-.721c-3.845-2.669-9.099-2.813-13.157.028-5.203 3.643-6.467 10.814-2.824 16.016l.718-.721c-3.201-4.737-2.022-11.185 2.68-14.476z"/><path d="M14.5 22c4.142 0 7.5-3.358 7.5-7.5 0-4.142-3.358-7.5-7.5-7.5-4.142 0-7.5 3.358-7.5 7.5 0 4.142 3.358 7.5 7.5 7.5zm0 1c-4.694 0-8.5-3.806-8.5-8.5s3.806-8.5 8.5-8.5 8.5 3.806 8.5 8.5-3.806 8.5-8.5 8.5z"/><path d="M14.5 19c2.485 0 4.5-2.015 4.5-4.5s-2.015-4.5-4.5-4.5-4.5 2.015-4.5 4.5 2.015 4.5 4.5 4.5zm0 1c-3.038 0-5.5-2.462-5.5-5.5s2.462-5.5 5.5-5.5 5.5 2.462 5.5 5.5-2.462 5.5-5.5 5.5z"/><path d="M22.5 8c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM6.5 24c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"/></g></svg>'},function(e,t){
e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g fill-rule="nonzero"><path d="M3 5h22v-1h-22z"/><path d="M3 17h22v-1h-22z"/><path d="M3 11h19.5v-1h-19.5z"/><path d="M5.5 23h19.5v-1h-19.5z"/><path d="M3.5 24c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM24.5 12c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"/></g></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g fill-rule="nonzero"><path d="M8 9.5c0 3.038 2.462 5.5 5.5 5.5s5.5-2.462 5.5-5.5v-.5h-1v.5c0 2.485-2.015 4.5-4.5 4.5s-4.5-2.015-4.5-4.5v-.5h-1v.5z"/><path d="M0 9.5c0 7.456 6.044 13.5 13.5 13.5s13.5-6.044 13.5-13.5v-.5h-1v.5c0 6.904-5.596 12.5-12.5 12.5s-12.5-5.596-12.5-12.5v-.5h-1v.5z"/><path d="M4 9.5c0 4.259 2.828 7.964 6.86 9.128l.48.139.277-.961-.48-.139c-3.607-1.041-6.137-4.356-6.137-8.167v-.5h-1v.5z"/><path d="M16.141 18.628c4.032-1.165 6.859-4.869 6.859-9.128v-.5h-1v.5c0 3.811-2.53 7.125-6.136 8.167l-.48.139.278.961.48-.139z"/><path d="M13.5 20c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM13.5 11c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"/></g></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g fill-rule="nonzero"><path d="M4 2v19.5h1v-19.5zM15.5 10h-11v1h11zM17 12.5v11h1v-11zM6.29 22.417l10.162-10.162-.707-.707-10.162 10.162z" id="Line"/><path d="M19.264 9.443l6.589-6.589-.707-.707-6.589 6.589z"/><path d="M6.577 23.381l19.071-5.903-.296-.955-19.071 5.903z"/><path d="M5.573 21.724l5.905-19.076-.955-.296-5.905 19.076z"/><path d="M6.5 24h19.5v-1h-19.5z"/><path d="M4.5 25c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM17.5 12c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"/></g></svg>'},function(e,t){
e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g fill-rule="nonzero"><path d="M4.395 10.18c3.432-4.412 10.065-4.998 13.675-.973l.745-.668c-4.044-4.509-11.409-3.858-15.209 1.027l.789.614z"/><path d="M19.991 12.494c.877 2.718.231 5.487-1.897 7.543-2.646 2.556-6.752 2.83-9.188.477-1.992-1.924-2.027-5.38-.059-7.281 1.582-1.528 3.78-1.587 5.305-.115 1.024.99 1.386 2.424.876 3.491l.902.431c.709-1.482.232-3.37-1.084-4.641-1.921-1.855-4.734-1.78-6.695.115-2.378 2.297-2.337 6.405.059 8.719 2.846 2.749 7.563 2.435 10.577-.477 2.407-2.325 3.147-5.493 2.154-8.569l-.952.307z"/><path d="M21.01 9.697l3.197-3.197-.707-.707-3.197 3.197z"/><path d="M14.989 15.719l3.674-3.674-.707-.707-3.674 3.674z"/><path d="M13.5 18c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM19.5 12c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"/></g></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g fill-rule="nonzero"><path d="M17 4v21h1v-21z"/><path d="M23 4v21h1v-21z"/><path d="M5 16.5v8.5h1v-8.5z"/><path d="M5 4v8.5h1v-8.5z"/><path d="M11 16.5v8.5h1v-8.5z"/><path d="M11 4v8.5h1v-8.5z"/><path d="M5.5 16c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM11.5 16c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"/></g></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g fill-rule="nonzero"><path d="M21.5 23h-14v1h14zM5 7.5v14h1v-14z"/><path d="M12 23c0-3.314-2.686-6-6-6h-.5v1h.5c2.761 0 5 2.239 5 5v.5h1v-.5z"/><path d="M20 23c0-7.732-6.268-14-14-14h-.5v1h.5c7.18 0 13 5.82 13 13v.5h1v-.5z"/><path d="M16 23c0-5.523-4.477-10-10-10h-.5v1h.5c4.971 0 9 4.029 9 9v.5h1v-.5z"/><path d="M5.5 7c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM23.5 25c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM5.5 25c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"/></g></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><path fill-rule="nonzero" d="M7.382 16h14.483l-4.167-5 4.167-5h-15.865v12.764l1.382-2.764zm-2.382 7v-18h19l-5 6 5 6h-16l-3 6z"/></svg>'},function(e,t){
e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g fill-rule="nonzero"><path d="M7.5 23h13v-1h-13z"/><path d="M7.55 13.088l13.29-6.254-.426-.905-13.29 6.254z"/><path d="M5.5 24c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM5.5 15c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM22.5 24c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM22.5 7c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"/></g></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g fill-rule="nonzero"><path d="M22.5 4v-1h-19.5v19.5h1v-18.5z"/><path d="M5.493 24v1h19.507v-19.5h-1v18.5z"/><path d="M5.275 23.432l18.213-18.213-.707-.707-18.213 18.213z"/><path d="M5.568 24.383l19.079-5.906-.296-.955-19.079 5.906z" id="Line-Copy-18"/><path d="M4.587 22.68l5.891-19.032-.955-.296-5.891 19.032z"/><path d="M3.5 11h21v-1h-21z"/><path d="M3.5 18h21v-1h-21z"/><path d="M10 3.5v21h1v-21z"/><path d="M17 3.5v21h1v-21z"/><path d="M23.975 23.475l1.025 1.025c0-11.874-9.626-21.5-21.5-21.5l1.025 1.025c10.506.517 18.932 8.944 19.45 19.45z"/><path d="M3.5 26c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM24.5 5c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"/></g></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="28" height="28"><g fill="none" stroke="currentColor" transform="translate(1 3)"><path d="M4.5 21.5h19V.5h-21v19m0-5h5m4 0h12M3 7.5h20M16.5 1v20"/><path d="M9.5.5v12m0 4v5m-5.6-1.4l4.2-4.2M11 13L23 1M4.4 21l19.1-6M3.1 19.6L9 .5m14.5 21a21 21 0 0 0-21-21"/><circle cx="2.5" cy="21.5" r="2"/><circle cx="9.5" cy="14.5" r="2"/></g></svg>'},function(e,t){
e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g fill-rule="nonzero"><path d="M7.354 21.354l7.097-7.097-.707-.707-7.097 7.097z"/><path d="M17.249 11.458l7.105-7.105-.707-.707-7.105 7.105z"/><path d="M7.542 22.683l17.296-2.739-.156-.988-17.296 2.739z" id="Line"/><path d="M7.538 22.062l15.708-7.661-.438-.899-15.708 7.661z"/><path d="M6.802 20.97l7.695-15.777-.899-.438-7.695 15.777z"/><path d="M6.285 20.741l2.76-17.423-.988-.156-2.76 17.423z"/><path d="M5.5 24c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM15.5 14c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"/></g></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g fill-rule="nonzero"><path d="M3.5 11h21v-1h-21z"/><path d="M3.5 18h21v-1h-21z"/><path d="M10 3.5v21h1v-21z"/><path d="M17 3.5v21h1v-21z"/><path d="M22.5 4v-1h-19.5v19.5h1v-18.5z"/><path d="M24 24h-18.507v1h19.507v-19.5h-1z"/><path d="M3.5 26c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM24.5 5c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"/></g></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g><path fill-rule="nonzero" d="M4.529 18.21l3.157-1.292-.379-.926-3.157 1.292z"/><path fill-rule="nonzero" d="M9.734 16.081l2.97-1.215-.379-.926-2.97 1.215z"/><path fill-rule="nonzero" d="M14.725 14.039l2.957-1.21-.379-.926-2.957 1.21z"/><path fill-rule="nonzero" d="M19.708 12.001l3.114-1.274-.379-.926-3.114 1.274z"/><path d="M8 18h1v3h-1z" id="Path"/><path d="M8 9h1v5h-1z"/><path fill-rule="nonzero" d="M8 18h1v-4h-1v4zm-1-5h3v6h-3v-6z" id="Rectangle-44"/><path d="M18 16h1v3h-1z" id="Path"/><path d="M18 3h1v6h-1z"/><path fill-rule="nonzero" d="M18 16h1v-7h-1v7zm-1-8h3v9h-3v-9z" id="Rectangle-44"/><path d="M13 6h1v5h-1z"/><path d="M13 15h1v5h-1z"/><path fill-rule="nonzero" d="M13 15h1v-4h-1v4zm-1-5h3v6h-3v-6z"/><path fill-rule="nonzero" d="M2.5 20c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM24.5 11c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"/></g></svg>'},function(e,t){
e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g fill-rule="nonzero"><path d="M4.436 21.667l2.083-9.027-.974-.225-2.083 9.027zM10.046 16.474l-2.231-4.463-.894.447 2.231 4.463zM13.461 6.318l-2.88 10.079.962.275 2.88-10.079zM18.434 16.451l-2.921-10.224-.962.275 2.921 10.224zM21.147 12.089l-2.203 4.405.894.447 2.203-4.405zM25.524 21.383l-2.09-9.055-.974.225 2.09 9.055z"/><path d="M1 19h7.5v-1h-7.5z"/><path d="M12.5 19h4v-1h-4z"/><path d="M20.5 19h6.5v-1h-6.5z"/><path d="M6.5 12c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM3.5 25c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM10.5 20c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM18.5 20c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM22.5 12c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM25.5 25c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM14.5 6c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"/></g></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g fill-rule="nonzero"><path d="M4 15h8.5v-1h-8.5zM16.5 15h8.5v-1h-8.5z"/><path d="M14.5 16c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"/></g></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g fill-rule="nonzero"><path d="M8.5 15h16.5v-1h-16.5z"/><path d="M6.5 16c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"/></g></svg>'},function(e,t){
e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g fill-rule="nonzero"><path d="M6.5 23h12v-1h-12z" id="Line"/><path d="M21.596 20.715l3.091-9.66-.952-.305-3.091 9.66z"/><path d="M8.413 22.664l1.95-6.094-.952-.305-1.95 6.094z"/><path d="M11.602 12.695l3.085-9.641-.952-.305-3.085 9.641z"/><path d="M11.783 16.167l6.817 5.454.625-.781-6.817-5.454z"/><path d="M15.976 18.652l3.711-11.598-.952-.305-3.711 11.598z"/><path d="M4.5 24c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM10.5 16c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM20.5 24c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"/></g></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><path d="m20 11a6 6 0 1 0-12 0c0 2.91 2.87 8.11 6 11.55 3.13-3.44 6-8.64 6-11.55zm-6 13c-3-3-7-9.13-7-13a7 7 0 1 1 14 0c0 3.87-4 10-7 13zm0-15a1 1 0 0 0 0 4 1 1 0 0 0 0-4"/></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><path d="m16 11a6 6 0 1 0-12 0c0 2.91 2.87 8.11 6 11.55 3.13-3.44 6-8.64 6-11.55zm-6 13c-3-3-7-9.13-7-13a7 7 0 1 1 14 0c0 3.87-4 10-7 13zm0-15a2 2 0 0 0 0 4 2 2 0 0 0 0-4m15 11c0 2.48-2.02 4-4.5 4S16 22.49 16 20h1c0 1.8 1.42 3 3.5 3s3.5-1.2 3.5-3m-6-2h5v1h-5m3-3.5v8h-1v-8m.5.5a1.5 1.5 0 0 1 0-3 1.5 1.5 0 0 1 0 3"/></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g fill-rule="nonzero"><path d="M8.354 18.354l10-10-.707-.707-10 10zM12.354 25.354l5-5-.707-.707-5 5z"/><path d="M20.354 17.354l5-5-.707-.707-5 5z"/><path d="M19.5 8c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM6.5 21c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM18.5 20c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"/></g></svg>'},function(e,t){
e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g fill-rule="nonzero"><path d="M20.349 20.654l4.489-.711-.156-.988-4.489.711z"/><path d="M7.254 22.728l9.627-1.525-.156-.988-9.627 1.525z"/><path d="M7.284 22.118l15.669-8.331-.469-.883-15.669 8.331z"/><path d="M6.732 21.248l8.364-15.731-.883-.469-8.364 15.731z"/><path d="M17.465 18.758l-8.188-8.188-.707.707 8.188 8.188z"/><path d="M6.273 20.818l1.499-9.467-.988-.156-1.499 9.467z"/><path d="M8.329 7.834l.715-4.516-.988-.156-.715 4.516z"/><path d="M7.354 21.354l17-17-.707-.707-17 17z"/><path d="M5.5 24c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM7.5 11c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM18.5 22c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"/></g></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g fill-rule="nonzero"><path d="M7.275 21.432l12.579-12.579-.707-.707-12.579 12.579z"/><path d="M6.69 13.397l7.913 7.913.707-.707-7.913-7.913zM7.149 10.558l7.058-7.058-.707-.707-7.058 7.058z"/><path d="M18.149 21.558l7.058-7.058-.707-.707-7.058 7.058z"/><path d="M5.5 24c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM5.5 13c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM16.5 24c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"/></g></svg>'},function(e,t){
e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g fill-rule="nonzero"><path d="M16.5 6h4v-1h-4z" id="Line"/><path d="M16.5 15h4v-1h-4z"/><path d="M8.5 23h4v-1h-4z"/><path d="M8.298 11.591l5.097-4.46-.659-.753-5.097 4.46zM22 7.5v5h1v-5z"/><path d="M14 16.5v4h1v-4z"/><path d="M6 14.5v6h1v-6z"/><path d="M6.5 14c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM14.5 7c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM22.5 7c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM14.5 16c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM22.5 16c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM6.5 24c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM14.5 24c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"/></g></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g><path d="M19 11h5l-2.5 3z"/><circle cx="21.5" cy="16.5" r="1.5"/><path fill-rule="nonzero" d="M22 11v-6h-1v6z"/><path d="M14 18h1v3h-1z" id="Path"/><path d="M14 5h1v6h-1z"/><path d="M7 19h1v3h-1z"/><path d="M7 6h1v7h-1z"/><path fill-rule="nonzero" d="M7 13v6h1v-6h-1zm-1-1h3v8h-3v-8zM14 18h1v-7h-1v7zm-1-8h3v9h-3v-9z"/></g></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g fill-rule="nonzero"><path d="M6.995 5c.008 0 .005 15.5.005 15.5h-1v-15.493c0-.556.451-1.007.995-1.007h17.01c.549 0 .995.45.995 1.007v11.986c0 .556-.45 1.007-1.007 1.007h-12.993l-3.104 3.104-.707-.707 3.397-3.397h13.407c.004 0 .007-11.993.007-11.993 0-.007-17.005-.007-17.005-.007z"/><path d="M6.5 24c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"/></g></svg>'},function(e,t){
e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g><path fill-rule="nonzero" d="M4 5h16.5v-1h-16.5zM25 24h-16.5v1h16.5z" id="Line"/><path fill-rule="nonzero" d="M6.5 26c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM22.5 6c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"/><path fill-rule="nonzero" d="M14 9v14h1v-14z"/><path d="M14.5 6l2.5 3h-5z"/></g></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g fill-rule="nonzero"><path d="M23.886 21.431c-.953-8.558-7.742-15.354-16.299-16.315l-.112.994c8.093.909 14.516 7.338 15.417 15.432l.994-.111z"/><path d="M5 7.5v14h1v-14zM21.5 23h-14v1h14z"/><path d="M5.5 7c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM23.5 25c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM5.5 25c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"/></g></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g fill-rule="nonzero"><path d="M8.354 20.354l5-5-.707-.707-5 5z"/><path d="M16.354 12.354l8-8-.707-.707-8 8z"/><path d="M14.5 15c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM6.5 23c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"/></g></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g fill-rule="nonzero"><path d="M7.5 6h13v-1h-13z" id="Line"/><path d="M7.5 23h13v-1h-13z"/><path d="M5 7.5v13h1v-13z"/><path d="M22 7.5v13h1v-13z"/><path d="M5.5 7c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM22.5 7c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM22.5 24c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM5.5 24c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"/></g></svg>'},function(e,t){
e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g fill-rule="nonzero"><path d="M7.551 17.98l13.284-7.033-.468-.884-13.284 7.033z"/><path d="M6 11.801l16-8.471v4.17h1v-5.83l-18 9.529v5.301h1z"/><path d="M6 24.67v-4.17h-1v5.83l18-9.529v-5.301h-1v4.699z"/><path d="M5.5 20c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM22.5 11c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"/></g></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g><path fill-rule="nonzero" d="M6 6h19v-1h-19z" id="Line"/><path fill-rule="nonzero" d="M6 24h19v-1h-19z"/><path fill-rule="nonzero" d="M6 17h17v-1h-17z"/><path d="M14.5 7l2.5 3h-5z"/><path d="M14.5 22l2.5-3h-5z"/><path fill-rule="nonzero" d="M14 10v10h1v-10z"/><path fill-rule="nonzero" d="M4.5 18c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM4.5 7c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM4.5 25c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM24.5 18c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"/></g></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g><path fill-rule="nonzero" d="M6 6h19v-1h-19z" id="Line"/><path fill-rule="nonzero" d="M6 24h19v-1h-19z"/><path fill-rule="nonzero" d="M6 13h17v-1h-17z"/><path d="M14.5 7l2.5 3h-5z"/><path d="M14.5 22l2.5-3h-5z"/><path fill-rule="nonzero" d="M14 10v10h1v-10z"/><path fill-rule="nonzero" d="M4.5 14c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM4.5 7c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM4.5 25c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM24.5 14c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"/></g></svg>'},function(e,t){
e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g fill-rule="nonzero"><path d="M14.743 3.55l-4.208 4.208.707.707 4.208-4.208zM7.71 10.583l-4.187 4.187.707.707 4.187-4.187zM3.536 18.244l6.171 6.171.707-.707-6.171-6.171zM13.232 24.475l4.22-4.22-.707-.707-4.22 4.22zM20.214 17.494l4.217-4.217-.707-.707-4.217 4.217zM24.423 9.716l-6.218-6.218-.707.707 6.218 6.218z"/><path d="M2.5 18c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM9.5 11c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM16.5 4c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM11.5 27c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM18.5 20c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM25.5 13c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"/></g></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g fill-rule="nonzero"><path d="M7.854 22.854l14-14-.707-.707-14 14z"/><path d="M8.336 13.043l8.621 8.621.707-.707-8.621-8.621zM9.149 10.558l7.058-7.058-.707-.707-7.058 7.058z" id="Line"/><path d="M20.149 21.558l7.058-7.058-.707-.707-7.058 7.058z"/><path d="M5.5 23h11v-1h-11z"/><path d="M7.5 13c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM18.5 24c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM3.5 24c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"/></g></svg>'},function(e,t){
e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g fill-rule="nonzero"><path d="M10.275 20.432l11.579-11.579-.707-.707-11.579 11.579z"/><path d="M8.336 13.043l8.621 8.621.707-.707-8.621-8.621zM9.149 10.558l7.058-7.058-.707-.707-7.058 7.058z" id="Line"/><path d="M20.149 21.558l7.058-7.058-.707-.707-7.058 7.058z"/><path d="M6.5 23h10v-1h-10z"/><path d="M4.5 24c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM7.5 13c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM18.5 24c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"/></g></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g fill-rule="nonzero"><path d="M5.205 14.111l-.013-.172c-.054-.906.022-1.966.327-2.961.395-1.289 1.111-2.215 2.221-2.666l-.377-.926c-1.42.578-2.324 1.746-2.8 3.3-.346 1.128-.429 2.299-.369 3.313l.017.219.994-.106z"/><path d="M11.051 8.554c1.12.893 1.766 2.343 2.973 6.099 1.274 3.963 1.947 5.48 3.28 6.557l.629-.778c-1.112-.899-1.754-2.345-2.956-6.085-1.28-3.982-1.957-5.503-3.302-6.575l-.623.782z"/><path d="M21.722 21.558c1.439-.634 2.428-1.886 3.046-3.551.311-.836.509-1.726.618-2.616.066-.539.088-.967.088-1.227l-1 .002-.01.304c-.012.241-.035.51-.071.798-.101.818-.282 1.634-.563 2.39-.533 1.434-1.354 2.474-2.512 2.985l.403.915z"/><path d="M9.5 9c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM19.5 23c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"/></g></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><path d="m9.5 5C8.68 5 8 5.67 8 6.5v2h1v-2c0-.27.23-.5.5-.5H14v16h-2v1h5v-1h-2V6h4.5c.28 0 .5.22.5.5v2h1v-2c0-.83-.67-1.5-1.5-1.5h-10z"/></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><path d="m6.5 5C5.68 5 5 5.67 5 6.5v2h1v-2c0-.27.23-.5.5-.5H11v16H9v1h5v-1h-2V6h4.5c.28 0 .5.22.5.5v2h1v-2c0-.83-.67-1.5-1.5-1.5h-10zM25 19c0 2.48-2.02 4-4.5 4S16 21.49 16 19h1c0 1.8 1.42 3 3.5 3s3.5-1.2 3.5-3m-6-2h5v1h-5m3-3.5v8h-1v-8m.5.5a1 1 0 0 1 0-3 1 1 0 0 1 0 3"/></svg>'},function(e,t){
e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g fill-rule="nonzero"><path d="M.303 17.674l1.104.473.394-.919-1.104-.473z"/><path d="M5.133 19.744l3.335 1.429.394-.919-3.335-1.429z"/><path d="M12.134 22.744l3.352 1.436.394-.919-3.352-1.436z"/><path d="M19.203 25.774l1.6.686.394-.919-1.6-.686z"/><path d="M.3 4.673l1.13.484.394-.919-1.13-.484-.394.919zm.394-.919l1.13.484-.394.919-1.13-.484.394-.919z"/><path d="M5.141 6.747l3.325 1.425.394-.919-3.325-1.425z"/><path d="M12.133 9.744l3.353 1.437.394-.919-3.353-1.437z"/><path d="M19.221 12.782l5.838 2.502.394-.919-5.838-2.502z"/><path d="M3 7.473v8.969h1v-8.969zM8.93 9.871l-4.616 6.594.819.573 4.616-6.594zM11 19.5v-9h-1v9zM15.898 12.916l-4.616 6.594.819.573 4.616-6.594zM18 22.5v-9h-1v9zM24.313 5.212l-6.57 17.247.934.356 6.57-17.247z"/><path d="M3.5 7c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM3.5 20c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM10.5 23c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM17.5 13c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM25.5 5c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM17.5 26c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM10.5 10c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"/></g></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g><path fill-rule="nonzero" d="M27.186 9.411c-.691-.27-1.429-.411-2.186-.411-3.314 0-6 2.686-6 6h1c0-2.761 2.239-5 5-5 .632 0 1.246.117 1.821.342l.364-.931z"/><path fill-rule="nonzero" d="M9 15c0-3.314-2.686-6-6-6-.754 0-1.489.139-2.177.407l.363.932c.573-.223 1.185-.339 1.814-.339 2.761 0 5 2.239 5 5h1z"/><path d="M8 15h1v1h-1v-1zm11 0h1v1h-1v-1zm1 0h-1c0-2.761-2.239-5-5-5s-5 2.239-5 5h-1c0-3.314 2.686-6 6-6s6 2.686 6 6z"/><path fill-rule="nonzero" d="M8.5 19c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM19.5 19c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"/></g></svg>'},function(e,t){
e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g fill-rule="nonzero"><path d="M15.5 22.5c0-2.697-1.073-5.225-2.947-7.089l-.705.709c1.687 1.679 2.652 3.952 2.652 6.38h1z"/><path d="M7.354 21.354l14-14-.707-.707-14 14z"/><path d="M7.5 23h16.5v-1h-16.5z"/><path d="M22.5 7c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM5.5 24c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"/></g></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g fill-rule="nonzero"><path d="M4 25h22v-1h-22z" id="Line"/><path d="M4 21h22v-1h-22z"/><path d="M6.5 17h19.5v-1h-19.5z"/><path d="M5 14.5v-3h-1v3zM6.617 9.275l10.158-3.628-.336-.942-10.158 3.628z"/><path d="M18.5 6c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM4.5 11c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM4.5 18c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"/></g></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g fill-rule="nonzero"><path d="M20 2v22h1v-22z"/><path d="M24 2v22h1v-22z"/><path d="M4.673 11.471l3.69 10.333.942-.336-3.69-10.333z"/><path d="M17 21.535v-19.535h-1v19.535z"/><path d="M11.5 24h3v-1h-3z"/><path d="M4.5 11c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM9.5 25c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM16.5 25c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"/></g></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g fill-rule="nonzero"><path d="M7.354 21.354l14-14-.707-.707-14 14z"/><path d="M22.5 7c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM5.5 24c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"/></g></svg>'},function(e,t){
e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g fill-rule="nonzero"><path d="M8.5 23h11v-1h-11zM6 8.5v12h1v-12zM7.483 8.28l12.293 13.112.73-.684-12.293-13.112z"/><path d="M6.5 8c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM6.5 24c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM21.5 24c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"/></g></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g fill-rule="nonzero"><path d="M9.457 18.844l-5.371 2.4.408.913 5.371-2.4z"/><path d="M13.13 17.203l.408.913 13.688-6.116-6.736-3.01-.408.913 4.692 2.097z"/><path d="M11.077 5.88l5.34 2.386.408-.913-5.34-2.386z"/><path d="M7.401 4.237l.408-.913-5.809-2.595v19.771h1v-18.229z"/><path d="M3.708 20.772l5.51-14.169-.932-.362-5.51 14.169zM9.265 6.39l1.46 10.218.99-.141-1.46-10.218zM13.059 17.145l4.743-6.775-.819-.573-4.743 6.775z"/><path d="M9.5 6c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM11.5 20c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM18.5 10c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM2.5 24c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"/></g></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g fill-rule="nonzero"><path d="M15 12.5v-8.5h-1v8.5zM14 16.5v8.5h1v-8.5z"/><path d="M14.5 16c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"/></g></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g fill-rule="nonzero"><path d="M4 15h8.5v-1h-8.5zM16.5 15h8.5v-1h-8.5z"/><path d="M15 12v-8.5h-1v8.5zM14 16.5v8.5h1v-8.5z"/><path d="M14.5 16c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"/></g></svg>'},function(e,t){
e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g><path fill-rule="nonzero" d="M15.039 5.969l-.019-.019-2.828 2.828.707.707 2.474-2.474c1.367-1.367 3.582-1.367 4.949 0s1.367 3.582 0 4.949l-2.474 2.474.707.707 2.828-2.828-.019-.019c1.415-1.767 1.304-4.352-.334-5.99-1.638-1.638-4.224-1.749-5.99-.334zM5.97 15.038l-.019-.019 2.828-2.828.707.707-2.475 2.475c-1.367 1.367-1.367 3.582 0 4.949s3.582 1.367 4.949 0l2.474-2.474.707.707-2.828 2.828-.019-.019c-1.767 1.415-4.352 1.304-5.99-.334-1.638-1.638-1.749-4.224-.334-5.99z"/><path d="M10.485 16.141l5.656-5.656.707.707-5.656 5.656z"/></g></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g><path fill-rule="nonzero" d="M14.039 6.969l-.019-.019-2.828 2.828.707.707 2.474-2.474c1.367-1.367 3.582-1.367 4.949 0s1.367 3.582 0 4.949l-2.474 2.474.707.707 2.828-2.828-.019-.019c1.415-1.767 1.304-4.352-.334-5.99-1.638-1.638-4.224-1.749-5.99-.334zM6.968 14.039l-.019-.019 2.828-2.828.707.707-2.475 2.475c-1.367 1.367-1.367 3.582 0 4.949s3.582 1.367 4.949 0l2.474-2.474.707.707-2.828 2.828-.019-.019c-1.767 1.415-4.352 1.304-5.99-.334-1.638-1.638-1.749-4.224-.334-5.99z"/><path d="M10.485 16.141l5.656-5.656.707.707-5.656 5.656z"/></g></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><path d="M11.682 16.09l3.504 6.068 1.732-1-3.497-6.057 3.595-2.1L8 7.74v10.512l3.682-2.163zm-.362 1.372L7 20V6l12 7-4.216 2.462 3.5 6.062-3.464 2-3.5-6.062z"/></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g><path d="M18 15h8v-1h-8z"/><path d="M14 18v8h1v-8zM14 3v8h1v-8zM3 15h8v-1h-8z"/></g></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><circle cx="14" cy="14" r="3"/></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M23.002 23C23 23 23 18.003 23 18.003L15.998 18C16 18 16 22.997 16 22.997l7.002.003zM15 18.003A1 1 0 0 1 15.998 17h7.004c.551 0 .998.438.998 1.003v4.994A1 1 0 0 1 23.002 24h-7.004A.993.993 0 0 1 15 22.997v-4.994z"/><path d="M19 20h1v2h-1z"/><path fill-rule="nonzero" d="M22 14.5a2.5 2.5 0 0 0-5 0v3h1v-3a1.5 1.5 0 0 1 3 0v.5h1v-.5z"/><g fill-rule="nonzero"><path d="M3 14.707A1 1 0 0 1 3.293 14L14.439 2.854a1.5 1.5 0 0 1 2.122 0l2.585 2.585a1.5 1.5 0 0 1 0 2.122L8 18.707a1 1 0 0 1-.707.293H4a1 1 0 0 1-1-1v-3.293zm1 0V18h3.293L18.439 6.854a.5.5 0 0 0 0-.708l-2.585-2.585a.5.5 0 0 0-.708 0L4 14.707z"/><path d="M13.146 4.854l4 4 .708-.708-4-4zm-9 9l4 4 .708-.708-4-4z"/><path d="M15.146 6.146l-9 9 .708.708 9-9z"/></g></g></svg>'},function(e,t){
e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M23.002 23C23 23 23 18.003 23 18.003L15.998 18C16 18 16 22.997 16 22.997l7.002.003zM15 18.003A1 1 0 0 1 15.998 17h7.004c.551 0 .998.438.998 1.003v4.994A1 1 0 0 1 23.002 24h-7.004A.993.993 0 0 1 15 22.997v-4.994z"/><path d="M19 20h1v2h-1z"/><path fill-rule="nonzero" d="M22 17.5v-2a2.5 2.5 0 0 0-5 0v2h1v-2a1.5 1.5 0 0 1 3 0v2h1z"/><g fill-rule="nonzero"><path d="M3 14.707A1 1 0 0 1 3.293 14L14.439 2.854a1.5 1.5 0 0 1 2.122 0l2.585 2.585a1.5 1.5 0 0 1 0 2.122L8 18.707a1 1 0 0 1-.707.293H4a1 1 0 0 1-1-1v-3.293zm1 0V18h3.293L18.439 6.854a.5.5 0 0 0 0-.708l-2.585-2.585a.5.5 0 0 0-.708 0L4 14.707z"/><path d="M13.146 4.854l4 4 .708-.708-4-4zm-9 9l4 4 .708-.708-4-4z"/><path d="M15.146 6.146l-9 9 .708.708 9-9z"/></g></g></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 29 31" width="29" height="31"><g fill-rule="nonzero"><path d="M15.3 22l8.187-8.187c.394-.394.395-1.028.004-1.418l-4.243-4.243c-.394-.394-1.019-.395-1.407-.006l-11.325 11.325c-.383.383-.383 1.018.007 1.407l1.121 1.121h7.656zm-9.484-.414c-.781-.781-.779-2.049-.007-2.821l11.325-11.325c.777-.777 2.035-.78 2.821.006l4.243 4.243c.781.781.78 2.048-.004 2.832l-8.48 8.48h-8.484l-1.414-1.414z"/><path d="M13.011 22.999h7.999v-1h-7.999zM13.501 11.294l6.717 6.717.707-.707-6.717-6.717z"/></g></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30.000001 29.999999" width="30" height="30" enable-background="new 0 0 595.3 841.9"><path d="M5.5 13A2.5 2.5 0 0 0 3 15.5 2.5 2.5 0 0 0 5.5 18 2.5 2.5 0 0 0 8 15.5 2.5 2.5 0 0 0 5.5 13zm9.5 0a2.5 2.5 0 0 0-2.5 2.5A2.5 2.5 0 0 0 15 18a2.5 2.5 0 0 0 2.5-2.5A2.5 2.5 0 0 0 15 13zm9.5 0a2.5 2.5 0 0 0-2.5 2.5 2.5 2.5 0 0 0 2.5 2.5 2.5 2.5 0 0 0 2.5-2.5 2.5 2.5 0 0 0-2.5-2.5z"/></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><path fill-rule="nonzero" d="M17.537 7.635l-.789.789c-.886-.275-1.812-.424-2.748-.424-3.841 0-7.521 2.503-8.962 6 .562 1.364 1.465 2.577 2.585 3.549l-.709.709c-1.265-1.112-2.274-2.506-2.881-4.077l-.07-.18.07-.18c1.535-3.975 5.645-6.82 9.966-6.82 1.213 0 2.409.224 3.537.635zm3.549 2.108c1.265 1.112 2.274 2.506 2.881 4.077l.07.18-.07.18c-1.535 3.975-5.646 6.82-9.966 6.82-1.213 0-2.409-.224-3.537-.635l.789-.789c.886.275 1.812.424 2.748.424 3.84 0 7.521-2.503 8.962-6-.562-1.364-1.465-2.577-2.585-3.549l.709-.709zm-6.049.392l-4.902 4.902c-.088-.33-.135-.677-.135-1.036 0-2.213 1.788-4.001 4.001-4.001.358 0 .705.047 1.036.135zm2.828 2.829c.088.331.135.679.135 1.038 0 2.213-1.786 3.999-3.999 3.999-.359 0-.707-.047-1.038-.135l4.901-4.901zm-12.365 10.243l-.707-.707 17.707-17.707.707.707-17.707 17.707z"/></svg>'},function(e,t){
e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><path d="m6 13a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H8a2 2 0 0 1-2-2m1 0a2 2 0 0 0 1 1h12a2 2 0 0 0 1-1v-9a2 2 0 0 0-1-1H8a2 2 0 0 0-1 1m6 5a1 1 0 0 1 2 0v2a1 1 0 0 1-2 0m-3-9V7a1 1 0 0 1 8 0h-1a1 1 0 0 0-6 0v4"/></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><path d="m6 13a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H8a2 2 0 0 1-2-2m1 0a2 2 0 0 0 1 1h12a2 2 0 0 0 1-1v-9a2 2 0 0 0-1-1H8a2 2 0 0 0-1 1m6 5a1 1 0 0 1 2 0v2a1 1 0 0 1-2 0m-3-9V8a1 1 0 0 1 8 0v3h-1V8a1 1 0 0 0-6 0v3"/></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M14 10a2 2 0 0 0-2 2v11H6V12c0-4.416 3.584-8 8-8s8 3.584 8 8v11h-6V12a2 2 0 0 0-2-2zm-3 2a3 3 0 0 1 6 0v10h4V12c0-3.864-3.136-7-7-7s-7 3.136-7 7v10h4V12z"/><path d="M6.5 18h5v1h-5zm10 0h5v1h-5z"/></g></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="28" height="28"><path d="M2 9.75a1.5 1.5 0 0 0-1.5 1.5v5.5a1.5 1.5 0 0 0 1.5 1.5h24a1.5 1.5 0 0 0 1.5-1.5v-5.5a1.5 1.5 0 0 0-1.5-1.5zm0 1h3v2.5h1v-2.5h3.25v3.9h1v-3.9h3.25v2.5h1v-2.5h3.25v3.9h1v-3.9H22v2.5h1v-2.5h3a.5.5 0 0 1 .5.5v5.5a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5v-5.5a.5.5 0 0 1 .5-.5z" transform="rotate(-45 14 14)"/></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g><path fill-rule="nonzero" d="M8 21c0 1.1.825 2 1.833 2h7.333c1.008 0 1.833-.9 1.833-2v-12h-11v12zm-1 0v-13h13v13c0 1.634-1.252 3-2.833 3h-7.333c-1.581 0-2.833-1.366-2.833-3z"/><path d="M17 6l-1-1h-5l-1 1h-3v1h13v-1z"/><path fill-rule="nonzero" d="M10 11v9.062h1v-9.062z"/><path fill-rule="nonzero" d="M13 11v9.062h1v-9.062z"/><path fill-rule="nonzero" d="M16 11v9.062h1v-9.062z"/></g></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g><path fill-rule="nonzero" d="M14 18.634l-.307-.239-7.37-5.73-2.137-1.665 9.814-7.633 9.816 7.634-.509.394-1.639 1.269-7.667 5.969zm7.054-6.759l1.131-.876-8.184-6.366-8.186 6.367 1.123.875 7.063 5.491 7.054-5.492z"/><path d="M7 14.5l-1 .57 8 6.43 8-6.5-1-.5-7 5.5z"/><path d="M7 17.5l-1 .57 8 6.43 8-6.5-1-.5-7 5.5z"/></g></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><path d="M17.646 18.354l4 4 .708-.708-4-4z"/><path d="M12.5 21a8.5 8.5 0 1 1 0-17 8.5 8.5 0 0 1 0 17zm0-1a7.5 7.5 0 1 0 0-15 7.5 7.5 0 0 0 0 15z"/><path d="M9 13h7v-1H9z"/><path d="M13 16V9h-1v7z"/></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><path d="M17.646 18.354l4 4 .708-.708-4-4z"/><path d="M12.5 21a8.5 8.5 0 1 1 0-17 8.5 8.5 0 0 1 0 17zm0-1a7.5 7.5 0 1 0 0-15 7.5 7.5 0 0 0 0 15z"/><path d="M9 13h7v-1H9z"/></svg>'},function(e,t){},function(e,t){e.exports={
"color-active-hover-text":"color-gull-gray","color-alert-bg":"color-mirage-1","color-alert-text":"color-loblolly","color-border":"color-bright-gray","color-border-chat-fields":"color-bright-gray","color-border-hover":"color-trout-1","color-border-table":"color-bright-gray","color-brand":"color-picton-blue-1","color-brand-active":"color-curious-blue","color-brand-hover":"color-scooter","color-button-hover-bg":"color-mirage-3","color-chart-page-bg":"color-charade","color-common-tooltip-text":"color-loblolly","color-common-tooltip-bg":"color-trout-2","color-depthrenderer-fill-style":"color-catskill-white","color-depthrenderer-stroke-style":"color-trout-1","color-disabled-border-and-color":"color-ebony-clay","color-disabled-input":"color-bright-gray","color-empty-container-message":"color-slate-gray","color-footer-chart-panel-bg":"color-mirage-3","color-highlight-new":"color-dark-slate-blue","color-icons":"color-slate-gray","color-input-bg":"color-charade","color-input-textarea-readonly":"color-trout-1","color-input-publish-bg":"color-mirage-1","color-item-active-blue":"color-blue-dianne","color-item-hover-active-bg":"color-charade","color-item-hover-bg":"color-ebony-clay","color-item-hover-blue":"color-blue-dianne","color-item-selected-blue":"color-blue-dianne","color-link":"color-curious-blue","color-list-item":"color-slate-gray","color-list-nth-child-bg":"color-mirage-3","color-news-highlight":"color-charade","color-pane-bg":"color-mirage-1","color-placeholder":"color-trout-2","color-popup-bg":"color-mirage-3","color-popup-menu-item-hover-bg":"color-ebony-clay","color-popup-menu-separator":"color-bright-gray","color-row-hover-active-bg":"color-ebony-clay","color-sb-scrollbar-body-bg":"color-trout-2","color-screener-header-bg":"color-mirage-3","color-screener-header-bg-hover":"color-ebony-clay","color-screener-description":"color-loblolly","color-section-separator-border":"color-bright-gray","color-separator-table-chat":"color-bright-gray","color-tag-active-bg":"color-bright-gray","color-tag-hover-bg":"color-charade","color-text-regular":"color-loblolly","color-text-secondary":"color-trout-1","color-toolbar-button-text-active":"color-picton-blue-1","color-toolbar-interactive-element-text-normal":"color-slate-gray","color-toolbar-interactive-element-text-hover":"color-gull-gray","color-toolbar-opened-element-bg":"color-mirage-3","color-tooltip-bg":"color-bright-gray","color-tv-button-checked":"color-slate-gray","color-tv-dialog-caption":"color-athens-gray-2","color-tv-dropdown-item-hover-bg":"color-charade","color-underlined-text":"color-gull-gray","color-widget-pages-bg":"color-mirage-2","color-forex-icon":"color-white","color-list-item-active-bg":"color-medium-blue","color-list-item-hover-bg":"color-ebony-clay","color-list-item-text":"color-loblolly"}},function(e,t){e.exports={"color-aqua-spring":"#ebf9f5","color-army-green":"#3d2c12","color-army-green-2":"#31230d","color-athens-gray-1":"#f2f3f5","color-athens-gray-2":"#f7f8fa","color-athens-gray-3":"#eceff2","color-black":"#000000","color-blue-dianne":"#21384d",
"color-bright-gray":"#363c4e","color-carnation":"#f04561","color-catskill-white":"#e1ecf2","color-charade":"#2f3241","color-charcoal-grey":"#323337","color-curious-blue":"#299dcd","color-dark-blue-grey":"#123440","color-dark-grey":"#292a2d","color-dark-grey-blue":"#28415a","color-dark-sky-blue":"#37a6ef","color-dark-slate-blue":"#194453","color-deep-sea-blue":"#016087","color-medium-blue":"#2e7bb2","color-ebony-clay":"#262b3e","color-foam":"#d7f0fb","color-gull-gray":"#9db2bd","color-humming-bird":"#d3eef9","color-keppel-1":"#37bc9b","color-keppel-2":"#34b293","color-lavender-blush":"#ffedf0","color-loblolly":"#c5cbce","color-manatee":"#878ca8","color-mandy":"#eb4d5c","color-milk-chocolate":"#6f2626","color-mirage-1":"#131722","color-mirage-2":"#171b29","color-mirage-3":"#1c2030","color-mischka":"#d6d8e0","color-morning-glory":"#9addcc","color-oslo-gray":"#8b8e95","color-pale":"#fff2cf","color-pale-grey-2":"#e7ebee","color-pale-sky":"#6b7988","color-picton-blue-1":"#3bb3e4","color-picton-blue-2":"#41bef1","color-puerto-rico":"#3bc2a1","color-purple-brown":"#4e2934","color-purple-brown-2":"#3d2028","color-radical-red":"#ff4a68","color-regent-gray":"#8797a5","color-scooter":"#38acdb","color-silver-tree":"#53b987","color-slate-gray":"#758696","color-sundown":"#ffa4b3","color-sunglow":"#ffca3b","color-tan-hide":"#ff9850","color-trout-1":"#4c525e","color-trout-2":"#4f5966","color-violet-1":"#332738","color-violet-2":"#271d2b","color-water-blue":"#1592e6","color-white":"#ffffff","color-white-ice":"#ebf7fc","color-wild-watermelon":"#ff5773","color-brownish-grey":"#8d6e63","color-lightish-purple":"#a75ee8","color-active-hover-text":"color-black","color-alert-bg":"color-white","color-alert-text":"color-black","color-border-table":"color-athens-gray-3","color-brand":"color-picton-blue-1","color-brand-active":"color-curious-blue","color-brand-hover":"color-scooter","color-brand-light":"color-picton-blue-2","color-chart-page-bg":"color-pale-grey-2","color-common-tooltip-bg":"color-ebony-clay","color-common-tooltip-text":"color-athens-gray-1","color-danger":"color-radical-red","color-depthrenderer-stroke-style":"color-athens-gray-1","color-highlight-new":"color-pale","color-input-bg":"color-white","color-input-publish-bg":"color-white","color-link":"color-brand","color-list-nth-child-bg":"color-athens-gray-2","color-pane-bg":"color-white","color-popup-bg":"color-white","color-popup-menu-item-hover-bg":"color-white-ice","color-popup-menu-separator":"color-catskill-white","color-replay-data-mode":"color-radical-red","color-screener-header-bg":"color-athens-gray-2","color-screener-description":"color-trout-2","color-success":"color-keppel-1","color-toolbar-button-text-active":"color-water-blue","color-toolbar-interactive-element-text-normal":"color-trout-1","color-toolbar-interactive-element-text-hover":"color-mirage-1","color-toolbar-opened-element-bg":"color-athens-gray-2","color-tooltip-bg":"color-ebony-clay","color-tv-dialog-caption":"color-trout-2","color-tv-dropdown-item-hover-bg":"color-athens-gray-1",
"color-underlined-text":"color-slate-gray","color-widget-pages-bg":"color-white","color-growing":"color-keppel-1","color-falling":"color-radical-red","color-label-long":"color-success","color-label-short":"color-danger","color-label-education":"color-sunglow","color-label-neutral":"color-gull-gray","color-collapse-tabs-border":"color-athens-gray-3","color-forex-icon":"color-bright-gray","color-list-item-active-bg":"color-dark-sky-blue","color-list-item-hover-bg":"color-white-ice","color-list-item-text":"color-ebony-clay","color-border":"#dadde0","color-border-chat-fields":"#c9cbcd","color-border-hover":"#c8c8c8","color-button-hover-bg":"#f2f2f2","color-depthrenderer-fill-style":"#555555","color-disabled-border-and-color":"#ececec","color-disabled-input":"#ececec","color-readonly-input":"#b4b4b4","color-empty-container-message":"#8a8a8a","color-footer-chart-panel-bg":"#f1f3f6","color-icons":"#7d7d7d","color-input-textarea-readonly":"#555555","color-item-active-blue":"#eff9ff","color-item-hover-active-bg":"#f1f3f6","color-item-hover-bg":"#edf1f2","color-item-hover-blue":"#c6e9f8","color-item-selected-blue":"#eafafe","color-list-item":"#888989","color-news-highlight":"#f2f5f8","color-placeholder":"#adaeb0","color-row-hover-active-bg":"#f1f3f6","color-sb-scrollbar-body-bg":"#d8d8d8","color-screener-header-bg-hover":"#f1f3f6","color-section-separator-border":"#b5b7b9","color-separator-table-chat":"#eaecef","color-tag-active-bg":"#cfdce3","color-tag-hover-bg":"#dce6ea","color-text-regular":"#4a4a4a","color-text-secondary":"#b4b4b4","color-tv-button-checked":"#757575","color-white-theme-tooltip-text":"#333333","color-white-theme-tooltip-border":"#d6d6d6","color-seeking-alpha-brand":"#ff7200"}},function(e,t,i){"use strict";(function(e,o){function n(t){this._chartWidgetCollection=t,this._chartAboutToBeSavedDelegate=new e,this._chartSavedDelegate=new e,this._prevChartState=null}var r=i(14).deepEquals,s=i(70),a=window.t("The publication preview could not be loaded. Please disable your browser extensions and try again.");n.prototype.chartAboutToBeSaved=function(){return this._chartAboutToBeSavedDelegate},n.prototype.chartSaved=function(){return this._chartSavedDelegate},n.prototype.whenReadyToSave=function(e){var t,i,o=this._chartWidgetCollection,n=o.activeChartWidget.value(),r=n.model().mainSeries();r.symbolInfo()&&!r.hasDelayedSymbolIntervalChange()?e():(t=null,i=null,t=function(){r.onSymbolError().unsubscribe(null,i,!0),e()},i=function(){r.onSymbolResolved().unsubscribe(null,t,!0)},r.onSymbolResolved().subscribe(null,t,!0),r.onSymbolError().subscribe(null,i,!0))},n.prototype.saveToJSON=function(){return this._fillSavingInfo(!1,!0)},n.prototype._fillAsyncInfo=function(e,t,i){function o(t){e.content=JSON.stringify($.extend(!0,r,t)),n.resolve(e)}var n,r=JSON.parse(e.content),s=this._chartWidgetCollection;return t||(i=!0),n=$.Deferred(),i?s.asyncState(!!t).then(o):s.activeChartWidget.value().asyncState(!!t).then(o),n.promise()},n.prototype._fillSavingInfo=function(e,t,i){var o,n,r,s,a,l,c,h,u,d,p,_;if(e||(t=!0),o={
publish_request_id:Math.random().toString(36).substring(2)},n=this._chartWidgetCollection,r=n.activeChartWidget.value(),s=n.metaInfo,a=r.model().mainSeries(),l=a.properties(),c=a.symbolInfo(),s.id.value()&&(o.id=s.id.value()),o.name=s.name.value()||"",o.description=s.description.value()||"",o.resolution=a.properties().interval.value(),o.symbol_type=null!==c&&c.type||"",o.exchange=null!==c&&c.exchange||"",o.listed_exchange=null!==c&&c.listed_exchange||"",null!==c&&a.isSpread()?(h=c.legs[0],u=c.base_name[0],u=u.split(":")[1],o.symbol=h,o.short_name=u,o.expression=c.full_name):(o.symbol=null!==c&&c.ticker||l.symbol.value(),o.short_name=l.shortName.value()),null!==c){for(d=[],p=0,_=c.legs.length;p<_;p++)d.push({symbol:c.legs[p],pro_symbol:c.base_name[p]});o.legs=JSON.stringify(d)}else o.legs=JSON.stringify([]);return o.content=t?JSON.stringify(n.state(!!e,i)):JSON.stringify(r.state(!!e,i)),e&&(o.image=JSON.stringify(n.images({onlyActiveChart:!t}))),o.is_realtime=e?"0":"1",o},n.prototype.publishChart=function(e){},n.prototype.publishScript=function(e,t,i){var o,n,r,s,l=this;l._scriptPublisher?l._scriptPublisher.openPublication(e,t):(o=i.ScriptPublisher,n=i.ScriptsProvider,r=i.CategoriesProvider,s=new n({publish:function(e){return new Promise(function(t,i){var o={closeForm:function(){if(e&&e.scriptPublication&&e.scriptPublication.updateScriptIdPart){var i=e.scriptPublication.updateScriptIdPart;publishedScripts.invalidateCache([i]),window.studyMarket&&(window.studyMarket.resetAllPages(),window.studyMarket.updateFavorites())}t()},showError:function(e){i(e)}};try{l.onPublish(e,o)}catch(e){i(a)}})}}),l._scriptPublisher=new o({scriptsProvider:s,categoriesProvider:new r}),l._scriptPublisher.openPublication(e,t))},n.prototype.onPublish=function(e,t){function i(e){return e.returnValue=$.t("Script may be not updated if you leave the page."),e.returnValue}function n(n){var r,s,a,c,h,u;window.removeEventListener("beforeunload",i),l.publishInProgress=!1,r=n.responseText||n,"ok:"===r.substr(0,3)?(s=!1,t.savePrivacySetting&&(s=!e.is_public,TVSettings.setValue("publishchart.private",s)),kmRecord("Chart","{0} Published".format(void 0===e.script_type?"Chart":"Script"),{is_private:s}),a=r.substr(3),c=JSON.parse(a),l._chartWidgetCollection.metaInfo.id.value()||l._chartWidgetCollection.metaInfo.id.setValue(c.id),t.closeForm&&t.closeForm(),l._lastPublishUrl=c.publishUrl,l.hWnd&&(h=c.publishUrl,t.ideaUrl&&(h=o.render(t.ideaUrl,{idea:c.idea})),l.hWnd.location=h)):(t.showError&&((413===n.status||/^[\d\s]*request.+large/i.test(r.trim()))&&(r=window.t("This Chart Layout has a lot of objects and can't be published. Please remove the unused objects (drawings/indicators) through the Object Tree to continue publishing.")),u={html:!0},t.showError(r||$.t("Error occurred while publishing"),u)),l.hWnd&&(l.hWnd.close(),l.hWnd=null))}var r,s,a,l=this;l.publishInProgress||(r=l._fillSavingInfo(!0,t&&t.publishAllLayout,!0),l._fillAsyncInfo(r,!0,t&&t.publishAllLayout).then(function(t){
var o=e.scriptPublication,r=!(!o||!o.updateScriptIdPart),s=new Promise(function(e,t){if(o){var n;r?(window.addEventListener("beforeunload",i),n=ScriptLib.publishNext(o.scriptSource,o.updateScriptIdPart)):n=ScriptLib.publishNew(o.scriptSource,o.scriptProtection),n.done(function(t){r||o.scriptProtection!==TVScript.Access.ACCESS_CLOSED_NEEDS_AUTH||PinePerm.add(window.user.username,t.pineId),e(t.publishedstudyscript_id)}).fail(t)}else e()});r?s.then(function(i){var o={publishedstudyscript_id:i,description:e.description,tags:e.tags};$.ajax({url:"/script-update/",type:"post",dataType:"text",data:$.extend({},t,o),complete:n})},n):s.then(function(i){i&&(e.publishedstudyscript_id=i),$.ajax({url:"/publishchart/",type:"post",dataType:"text",data:$.extend({},t,e),complete:n})},n)}),l.publishInProgress=!0,t.onWidget&&!t.ideaUrl||""!==e.name&&""!==e.description&&e.description.length<=7e4&&e.name.length<=64&&($.cookie("publish_request_id",r.publish_request_id,{path:"/"}),s="/loading/",t.ideaUrl&&(a=urlParams.createUrlParams({ideaUrl:t.ideaUrl}),s="/loading?"+a),l.hWnd=window.open(s,"_blank")))},n.prototype._saveChart=function(e,t,i,o,n){var r=i,a=o;return r=function(e){t.id.value()||(t.id.setValue(e),t.uid.setValue(e)),"function"==typeof i&&i()},s.saveChart(e.name,e.short_name,e.resolution,e,t,r.bind(this),a.bind(this))},n.prototype.saveChartSilently=function(e,t,i,o){var n,s;return r(this._prevChartState,this._chartWidgetCollection.state())[0]?void this._chartSavedDelegate.fire(!0):(n=this._chartWidgetCollection.metaInfo,s=this._fillSavingInfo(t),o=o||{},o.chartName&&(s.name=o.chartName),s.name&&0!==s.name.length||!o.defaultChartName||(s.name=o.defaultChartName),s.name?($(window).on("beforeunload.savechart",function(){return $.t("Your chart is being saved, please wait a moment before you leave this page.")}),this._isSaveInProcess=!0,this._chartAboutToBeSavedDelegate.fire(),this._saveChart(s,n,function(){this._chartWidgetCollection.metaInfo.name.setValue(s.name),this._prevChartState=this._chartWidgetCollection.state(),this._chartSavedDelegate.fire(!0),this._isSaveInProcess=!1,e&&e(n)}.bind(this),function(){this._chartSavedDelegate.fire(!1),this._isSaveInProcess=!1,i&&i.apply(null,arguments)}.bind(this),o),void $(window).off("beforeunload.savechart")):void console.warn("Saving chart with empty name is not allowed"))},n.prototype.isSaveInProcess=function(){return this._isSaveInProcess},t.ChartSaver=n}).call(t,i(8),i(103))},function(e,t,i){"use strict";function o(e,t,i,o){return c.b(this,void 0,void 0,function(){var n;return c.d(this,function(r){return n=new h.SaveRenameDialog({fields:[new u.InputField({name:w,label:e+":",error:t,maxLength:64})],title:i}),void 0!==o&&n.setField(w,o),[2,n.show().then(function(e){return e[w]})]})})}function n(e){return c.b(this,void 0,void 0,function(){return c.d(this,function(t){return[2,o(S.labelRename,S.error,S.titleRename,e)]})})}function r(e){return c.b(this,void 0,void 0,function(){return c.d(this,function(t){return[2,o(S.labelRename,S.error,S.titleCopy,S.valueCopy.format(e))]})})}function s(e){
return c.b(this,void 0,void 0,function(){return c.d(this,function(t){return[2,o(S.labelRename,S.error,S.titleNew,e)]})})}function a(e){"/chart/"===location.pathname&&(location.href="/chart/"+e)}function l(){return c.b(this,void 0,void 0,function(){return c.d(this,function(e){return[2,new Promise(function(e){p.enabled("saved_charts_count_restriction")&&!window.user.is_pro?Object(d.getCharts)(function(t){e(t.length<5)}):e(!0)})]})})}var c,h,u,d,p,_,f,m,g,y,v,b,S,w,T,P;Object.defineProperty(t,"__esModule",{value:!0}),i.d(t,"SaveChartService",function(){return P}),c=i(3),h=i(254),i.n(h),u=i(255),i.n(u),d=i(70),i.n(d),p=i(4),i.n(p),_=i(32),f=i(15),m=i.n(f),g=i(256),y=i(38),v=i(106),i.n(v),b=i(257),S={labelName:window.t("Chart layout name"),labelRename:window.t("Enter a new chart layout name"),error:window.t("Please enter chart layout name"),titleNew:window.t("Save New Chart Layout"),titleRename:window.t("Rename Chart Layout"),titleCopy:window.t("Copy Chart Layout"),valueCopy:window.t("{0} copy",{context:"ex: AAPL chart copy"})},w="chart-title",T=6e4,P=function(){function e(e,t){this._autosaveTimer=null,this._watchedAutoSaveEnabled=new m.a,this._chartWidgetCollection=e,this._chartSaver=t,this._chartChangesWatcher=new g.ChartChangesWatcher(e.undoHistory,t,y),e.saveKeysPressed().subscribe(this,this.saveChartOrShowTitleDialog),this._chartChangesWatcher.getOnChange().subscribe(this,this._onStateChanged)}return e.prototype.autoSaveEnabled=function(){return this._watchedAutoSaveEnabled},e.prototype.destroy=function(){},e.prototype.cloneChart=function(){return c.b(this,void 0,void 0,function(){var e,t,i;return c.d(this,function(o){switch(o.label){case 0:return e=this._chartWidgetCollection,[4,l()];case 1:return t=o.sent(),t?[4,r(e.metaInfo.name.value())]:[3,3];case 2:return i=o.sent(),this._saveCurrentChartAsNewWithTitle(i),[3,3];case 3:return[2]}})})},e.prototype.saveChartAs=function(){Object(b.a)(this.cloneChart.bind(this),{source:"Clone chart"})},e.prototype.renameChart=function(){var e=this;Object(b.a)(function(){return c.b(e,void 0,void 0,function(){var e,t,i;return c.d(this,function(o){switch(o.label){case 0:return e=this._chartWidgetCollection,t=e.metaInfo.name.value(),[4,n(t)];case 1:return i=o.sent(),e.metaInfo.name.setValue(i),this._doSave(),[2]}})})},{source:"Rename chart"})},e.prototype.saveNewChart=function(e,t,i){return c.b(this,void 0,void 0,function(){var o,n,r,a;return c.d(this,function(c){switch(c.label){case 0:return o=this._chartWidgetCollection,n=o.metaInfo.name.value(),[4,l()];case 1:return r=c.sent(),r?[4,s(n)]:[3,3];case 2:return a=c.sent(),o.metaInfo.name.setValue(a),this._doSave(e,t,i),[3,3];case 3:return[2]}})})},e.prototype.saveExistentChart=function(e,t,i){this._doSave(e,t,i)},e.prototype.saveChartOrShowTitleDialog=function(e,t,i){var o=this,n=window.saver.isSaveInProcess(),r=this._chartChangesWatcher.hasChanges(),s=!!this._chartWidgetCollection.metaInfo.id.value();window.is_authenticated&&(n||!r&&s)||Object(b.a)(function(){
null!==o._chartWidgetCollection.metaInfo.id.value()?o.saveExistentChart(e,t,i):o.saveNewChart(e,t,i)},{source:"Save chart",sourceMeta:"Chart"})},e.prototype.whenReadyToSave=function(e){this._chartSaver.whenReadyToSave(e)},e.prototype.saveToJSON=function(){return this._chartSaver.saveToJSON()},e.prototype.saveChartSilently=function(e,t,i,o){this._chartSaver.saveChartSilently(e,t,i,o)},e.prototype.setAutoSaveEnabled=function(e){var t=this;window.is_authenticated&&window.saver.isSaveInProcess()||Object(b.a)(function(){e?Object(_.trackEvent)("Autosave","On"):Object(_.trackEvent)("Autosave","Off"),t._watchedAutoSaveEnabled.setValue(e)},{source:"AutoSave chart"})},e.prototype._onStateChanged=function(e){e?Object(v.isFeatureEnabled)("save_every_minute")?this._startAutosave():this._restartAutosave():this._stopAutosave()},e.prototype._saveCurrentChartAsNewWithTitle=function(e){var t=this._chartWidgetCollection;p.enabled("saveload_storage_customization")?(t.metaInfo.uid.deleteValue(),t.metaInfo.id.deleteValue(),t.metaInfo.name.setValue(e),this._doSave()):window.open("/chart/?clone="+t.metaInfo.uid.value()+"&name="+encodeURIComponent(e),"_blank")},e.prototype._doSave=function(e,t,i){var o=this._chartWidgetCollection;void 0!==e&&e(),this._chartSaver.saveChartSilently(function(e){Object(_.trackEvent)("GUI","Save Chart Layout"),a(o.metaInfo.uid.value()),void 0!==t&&t(e)},!1,function(){void 0!==i&&i()})},e.prototype._restartAutosave=function(){this._stopAutosave(),this._startAutosave()},e.prototype._startAutosave=function(){var e=this;p.enabled("charts_auto_save")&&null===this._autosaveTimer&&(this._autosaveTimer=setTimeout(function(){e._autosaveTimer=null,e._chartWidgetCollection.metaInfo.id.value()&&e._doSave()},T))},e.prototype._stopAutosave=function(){null!==this._autosaveTimer&&(clearInterval(this._autosaveTimer),this._autosaveTimer=null)},e}()},function(e,t){},function(e,t,i){"use strict";function o(){return new Promise(function(e){i.e(9).then(function(t){var o=i(1203).LoadChartDialog;e(new o)}.bind(null,i)).catch(i.oe)})}function n(){return r.enabled("saveload_requires_authentication")&&!window.is_authenticated?Promise.resolve([]):new Promise(function(e){Object(c.getCharts)(function(t){e(t)})})}var r,s,a,l,c,h,u,d,p,_;Object.defineProperty(t,"__esModule",{value:!0}),r=i(4),s=i(3),a=i(201),l=function(e){function t(t,i){return e.call(this,t,i,"FAVORITE_CHARTS_CHANGED","loadChartDialog.favorites",{})||this}return s.c(t,e),t}(a.b),c=i(70),h=i(596),u=i(108),d=i(45),p=i(257),i.d(t,"LoadChartService",function(){return _}),_=function(){function e(e){void 0===e&&(e=null);var t=this;this._favoriteChartsService=new l(u.TVXWindowEvents,d),this._chartWidgetCollection=null,this._dialogPromise=null,this._getChartEntry=function(e){return{id:e.id,url:e.url,title:e.name,symbol:e.short_symbol,interval:e.interval,toolsCount:0,modified:e.modified_iso,active:function(){return t._isActiveChart(e.id)},openAction:function(){return Object(c.loadChart)(e)},deleteAction:function(i,o){Object(h.deleteChart)(o,e.image_url,function(){t._deleteChart(e.id),
i.resolve()},i.reject.bind(i))},favoriteAction:t._updateFavorites}},this._updateFavorites=function(e){return t._favoriteChartsService.set(e)},this._isActiveChart=function(e){return null!==t._chartWidgetCollection&&e===t._chartWidgetCollection.metaInfo.id.value()},this._deleteChart=function(e){t._isActiveChart(e)&&(r.enabled("saveload_storage_customization")?null!==t._chartWidgetCollection&&t._chartWidgetCollection.clearChartMetaInfo():location.href="/chart/"+location.search)},this._chartWidgetCollection=e}return e.prototype.showLoadDialog=function(){Object(p.a)(this._showLoadDialog.bind(this),{source:"Load chart",sourceMeta:"Chart"})},e.prototype._showLoadDialog=function(){var e=this;n().then(function(t){return t.map(e._getChartEntry)}).then(function(t){null===e._dialogPromise&&(e._dialogPromise=o()),e._dialogPromise.then(function(i){return i.show(t,e._favoriteChartsService.get())})})},e}()},function(e,t,i){"use strict";function o(e,t,i,o){(0,n.createConfirmDialog)({type:"modal",content:document.createTextNode($.t("Do you really want to delete Chart Layout '{0}' ?").format(e)),addClass:"delete-chart-dialog"}).then(function(e){var n=function(){var e=o;o=null,e&&e()};e.on("action:yes",function(){o=null,r.removeChart(t,i),e.close()}),e.on("action:no",n),e.on("afterClose",n),e.open()})}var n,r;Object.defineProperty(t,"__esModule",{value:!0}),t.deleteChart=o,n=i(83),r=i(70)},function(e,t,i){"use strict";function o(e,t){Object(l.saveStudyTemplate)(e,function(i){i.error||(r.setValue("defaultStudyTemplate",e.name),Object(l.invalidateStudyTemplatesList)(),Object(l.getStudyTemplatesList)(t))})}var n,r,s,a,l,c,h,u,d,p,_,f,m,g,y,v,b;Object.defineProperty(t,"__esModule",{value:!0}),n=i(3),r=i(45),s=i(159),a=i(199),l=i(70),c="text",h="bool",u={saveRenameDialog:{dialogTitle:window.t("Save Indicator Template As"),titleFieldLabel:window.t("Template name"),titleFieldError:window.t("Please enter template name"),intervalFieldLabel:window.t("Save Interval"),intervalFieldHint:window.t("When selecting this checkbox the study template will set {0} interval on a chart")},confirmDialog:{message:window.t("Study Template '{0}' already exists. Do you really want to replace it?")}},d=function(){function e(e){var t=this;this._showSaveDialog=function(){return n.b(t,void 0,void 0,function(){var e,t;return n.d(this,function(i){switch(i.label){case 0:return e=this._chartWidget.model().model().mainSeries().interval(),[4,this._getActualTemplateList()];case 1:return t=i.sent(),[4,this._showTemplateSaveRenameDialog(t,e)];case 2:return i.sent(),[2]}})})},this._chartWidget=e.chartWidget,e.onSave&&(this._onSave=e.onSave)}return e.prototype.show=function(){window.runOrSignIn(this._showSaveDialog,{source:"Study templates save as",sourceMeta:"Chart"})},e.prototype._doSave=function(e,t){var i,n,r;e=Object(s.clean)(e),i=this._chartWidget.model().model().studyTemplate(t),n=JSON.stringify(i),r={name:e,content:n},o(r,this._onSave)},e.prototype._getActualTemplateList=function(){return Object(l.invalidateStudyTemplatesList)(),new Promise(function(e){
Object(l.getStudyTemplatesList)(e)})},e.prototype._showTemplateSaveRenameDialog=function(e,t){var i=this;new a.SaveRenameDialog({fields:[new a.AutocompleteField({name:c,label:u.saveRenameDialog.titleFieldLabel+":",error:u.saveRenameDialog.titleFieldError,source:e,valueField:"name",textField:"name",maxLength:64}),new a.CheckboxField({name:h,label:u.saveRenameDialog.intervalFieldLabel,hint:u.saveRenameDialog.intervalFieldHint.format(t)})],title:u.saveRenameDialog.dialogTitle,confirm:{shouldShowDialog:function(t){var i=Object(s.clean)(t[c]);return e.map(function(e){return e.name}).includes(i)},getMessage:function(e){return u.confirmDialog.message.format(Object(s.clean)(e[c]))}}}).show().then(function(e){var t=e[c],o=!!e[h];i._doSave(t,o)})},e}(),p=i(32),_=i(8),f=i.n(_),m=i(15),g=i.n(m),y=i(83),i.d(t,"StudyTemplates",function(){return b}),v={confirmDelete:window.t("Do you really want to delete Study Template '{0}' ?")},b=function(){function e(e){var t=this;this._chartWidgetCollection=e.chartWidgetCollection,this._favoriteStudyTemplatesService=e.favoriteStudyTemplatesService,window.loginStateChange.subscribe(null,l.invalidateStudyTemplatesList),this._list=new g.a([]),this._onChange=new f.a,this._list.subscribe(function(){return t._onChange.fire()})}return e.prototype.showSaveAsDialog=function(){var e=this,t=this._chartWidgetCollection.activeChartWidget.value();new d({chartWidget:t,onSave:function(t){e._list.setValue(t)}}).show()},e.prototype.applyTemplate=function(e){var t=this._chartWidgetCollection.activeChartWidget.value();r.setValue("defaultStudyTemplate",e),Object(l.getStudyTemplateContent)(e,function(i){Object(p.trackEvent)("GUI","Load Study Template"),t.model().model().restoreStudyTemplate(JSON.parse(i.content),e),t.updateSeriesControlUI()})},e.prototype.deleteStudyTemplate=function(e){var t=this;window.runOrSignIn(function(){Object(y.createConfirmDialog)({type:"modal",content:v.confirmDelete.format(e)}).then(function(i){i.on("action:yes",function(i){i.actionLoader("yes","start"),Object(l.invalidateStudyTemplatesList)(),Object(l.removeStudyTemplate)(e,function(){var o,n=t.list();t._list.setValue(n.filter(function(t){return t.name!==e})),t._favoriteStudyTemplatesService&&(o=t._favoriteStudyTemplatesService.get(),t._favoriteStudyTemplatesService.set(o.filter(function(t){return t!==e}))),setTimeout(function(){i.actionLoader("yes","stop"),i.close()},0)})}),i.open()})},{source:"Study templates delete"})},e.prototype.list=function(){return this._list.value()},e.prototype.plainList=function(e){var t,i=this.list();return t="default"===e?i.filter(function(e){return!!e.is_default}):i.filter(function(e){return!e.is_default}),t.map(function(e){return e.name})},e.prototype.getOnChange=function(){return this._onChange},e.prototype.refreshStudyTemplateList=function(e){var t=this;Object(l.getStudyTemplatesList)(function(i){t._list.setValue(i),void 0!==e&&e()})},e}()},function(e,t,i){"use strict";function o(e){var t,i;if(e&&e.__esModule)return e;if(t={},null!=e)for(i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])
;return t.default=e,t}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r,s,a,l,c,h;Object.defineProperty(t,"__esModule",{value:!0}),t.AutocompleteField=void 0,r=function(){function e(e,t){var i,o;for(i=0;i<t.length;i++)o=t[i],o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}(),s=i(18),a=o(s),l=i(60),c=o(l),h=i(599),t.AutocompleteField=function(){function e(t){var i,o=this,r=t.label,s=t.name,l=(t.maxLength,t.error),u=void 0===l?"":l,d=t.source;n(this,e),this._name=s,this._error=u,this._$field=$('<label class="tv-rename-chart-dialog__field">\n\t\t\t\t<span class="tv-rename-chart-dialog__label">'+r+"</span>\n\t\t\t</label>"),this._autocompleteContainer=document.createElement("div"),this._$field[0].appendChild(this._autocompleteContainer),i=a.createElement(h.Autocomplete,{source:d.map(function(e){return e.name}),allowUserDefinedValues:!0,preventOnFocusOpen:!0,noEmptyText:!0,preventSearchOnEmptyQuery:!0,setupHTMLInput:function(e){o._autocompleteInput=e},filter:function(e,t){return""===e||e&&-1!==t.toLowerCase().indexOf(e.toLowerCase())}}),c.render(i,this._autocompleteContainer)}return r(e,[{key:"appendTo",value:function(e){e.append(this._$field)}},{key:"focus",value:function(){this._autocompleteInput.focus()}},{key:"select",value:function(){this._autocompleteInput.focus(),this._autocompleteInput.select()}},{key:"unmount",value:function(){c.unmountComponentAtNode(this._autocompleteContainer)}},{key:"value",get:function(){return this._autocompleteInput.value}},{key:"name",get:function(){return this._name}},{key:"valid",get:function(){return!!this._autocompleteInput.value}},{key:"error",get:function(){return this._error}}]),e}()},function(e,t,i){"use strict";function o(e){var t,i=e.dropped,o=void 0!==i&&i,n=e.small,r=void 0!==n&&n,c=e.colorTransition,h=void 0!==c&&c,u=e.style,d=void 0===u?{}:u,p=e.className,_=void 0===p?"":p,f=l(_,a.caret,(t={},t[a.caretRotate]=o,t[a.caretSmall]=r,t[a.caretColorTransition]=h,t));return s.createElement("i",{className:f,style:d})}function n(e,t){return""===e||-1!==t.toLowerCase().indexOf(e.toLowerCase())}var r,s,a,l,c,h,u,d,p,_,f;Object.defineProperty(t,"__esModule",{value:!0}),r=i(3),i(11),s=i(18),a=i(600),l=i(99),c=i(324),h=i(302),u=i(322),d=i(601),p=i(208),i.d(t,"Autocomplete",function(){return f}),_=function(e){return Array.isArray(e.source)||!e.allowUserDefinedValues},f=function(e){function t(t){var i=e.call(this,t)||this;if(i._setInputRef=function(e){e&&(i._inputElement=e,i.props.setupHTMLInput&&i.props.setupHTMLInput(e),i._inputElement.addEventListener("keyup",i._handleKeyUpEnter))},i._handleCaretClick=function(){i.state.isOpened?i._close():i.props.preventOnFocusOpen?i._open():i._focus()},i._handleOutsideClick=function(){var e=i.props,t=e.allowUserDefinedValues,o=e.value,n=e.onChange,r=i.state.queryValue;t&&r!==o?n&&n(r):i.setState(i._valueToQuery(o)),i._close()},i._handleFocus=function(e){
i.props.preventOnFocusOpen||i._open(),i.props.onFocus&&i.props.onFocus(e)},i._handleChange=function(e){var t,o=e.currentTarget.value;i.props.preventSearchOnEmptyQuery&&""===o?i.setState({queryValue:o,isOpened:!1,active:void 0}):(t=i._suggestions(o),i.setState({queryValue:o,isOpened:Object.keys(t).length>0,active:i.props.allowUserDefinedValues?void 0:i._getActiveKeyByValue(o)}))},i._handleItemClick=function(e){var t=e.currentTarget.id;i.setState({queryValue:i._source()[t]}),i._close(),i.props.onChange&&i.props.onChange(t)},i._handleKeyDown=function(e){var t,o,n,r,s,a,l,c,h,d,p,_,f,m;if(-1!==[u.a.DownArrow,u.a.UpArrow,u.a.Enter,u.a.Escape].indexOf(e.which))switch(e.preventDefault(),e.stopPropagation(),t=i.props,o=t.allowUserDefinedValues,n=t.value,r=t.onChange,s=i.state,a=s.active,l=s.isOpened,c=s.queryValue,h=i._suggestions(c),e.which){case u.a.DownArrow:case u.a.UpArrow:if(d=Object.keys(h),!l&&d.length&&e.which===u.a.DownArrow){i.setState({isOpened:!0,active:d[0]});break}if(p=void 0,void 0===a){if(e.which===u.a.UpArrow){i._close();break}p=0}else p=d.indexOf(a)+(e.which===u.a.UpArrow?-1:1);p<0&&(p=0),p>d.length-1&&(p=d.length-1),_=d[p],i.setState({active:_}),(f=document.getElementById(_))&&i._scrollIfNotVisible(f,i._suggestionsElement);break;case u.a.Escape:i._close(),l||i._blur();break;case u.a.Enter:m=a,o&&(l&&m?i.setState(i._valueToQuery(m)):m=c),void 0!==m&&(i._close(),l||i._blur(),m!==n?r&&r(m):i.setState(i._valueToQuery(m)))}},i._setSuggestionsRef=function(e){e&&(i._suggestionsElement=e)},i._scrollIfNotVisible=function(e,t){var i=t.scrollTop,o=t.scrollTop+t.clientHeight,n=e.offsetTop,r=e.clientHeight,s=n+r;return n<=i?void e.scrollIntoView(!0):s>=o?void e.scrollIntoView(!1):void 0},!_(t))throw Error("allowUserDefinedProps === true cay only be used if source is array");return i.state=r.a({isOpened:!1,active:t.value},i._valueToQuery(t.value)),i}return r.c(t,e),t.prototype.componentWillReceiveProps=function(e){this.setState({queryValue:""===e.value?"":this._source()[e.value]||this.state.queryValue,active:e.value})},t.prototype.componentWillUnmount=function(){this._inputElement&&this._inputElement.removeEventListener("keyup",this._handleKeyUpEnter)},t.prototype.render=function(){var e;return s.createElement(h.a,{ctor:"div",className:l(d.autocomplete,(e={},e[d.opened]=this.state.isOpened,e),"js-dialog-skip-escape"),handler:this._handleOutsideClick,click:!0},s.createElement(c.a,{rightComponent:Object.keys(this._suggestions(this.state.queryValue)).length?s.createElement("div",{className:d.caret,onClick:this._handleCaretClick},s.createElement(o,{className:d.icon,dropped:this.state.isOpened})):void 0,theme:p,reference:this._setInputRef,className:d.textInput,placeholder:this.props.placeholder,value:this.state.queryValue,error:this.props.error,onChange:this._handleChange,onFocus:this._handleFocus,onBlur:this.props.onBlur,onMouseOver:this.props.onMouseOver,onMouseOut:this.props.onMouseOut,onKeyDown:this._handleKeyDown}),this._renderSuggestions())},t.prototype._focus=function(){this._inputElement.focus()},
t.prototype._blur=function(){this._inputElement.blur()},t.prototype._open=function(){this.setState({isOpened:!0})},t.prototype._close=function(){this.setState({isOpened:!1,active:void 0})},t.prototype._source=function(){var e={};return Array.isArray(this.props.source)?this.props.source.forEach(function(t){e[t]=t}):e=this.props.source,e},t.prototype._suggestions=function(e){var t=this.props,i=t.value,o=t.filter,r=void 0===o?n:o,s=this._source(),a={},l=Object.keys(s);return e!==s[i]&&(l=l.filter(function(t){return r(e,s[t])})),l.forEach(function(e){return a[e]=s[e]}),a},t.prototype._renderSuggestions=function(){var e=this,t=this._suggestions(this.state.queryValue),i=Object.keys(t).map(function(i){var o,n=l(d.suggestion,(o={},o[d.selected]=e.state.active===i,o));return s.createElement("li",{id:i,key:i,className:n,onClick:e._handleItemClick},t[i])}),o=s.createElement("li",{className:d.noResults},window.t("No results found"));return!i.length&&this.props.noEmptyText?null:s.createElement("ul",{className:d.suggestions,ref:this._setSuggestionsRef},i.length?i:o)},t.prototype._handleKeyUpEnter=function(e){e.which===u.a.Enter&&e.stopImmediatePropagation()},t.prototype._getActiveKeyByValue=function(e){var t,i,o,r=this.props.filter,s=void 0===r?n:r,a=this._suggestions(e),l=Object.keys(a);for(t=0,i=l;t<i.length;t++)if(o=i[t],s(e,a[o]))return o;return l[0]},t.prototype._valueToQuery=function(e){return{queryValue:this._source()[e]||""}},t}(s.PureComponent)},function(e,t){e.exports={caret:"caret-3_GTxtct-",caretRotate:"caretRotate-98O6Gi4f-",caretSmall:"caretSmall-1vg6w8eZ-",caretColorTransition:"caretColorTransition-1y-c2tgp-"}},function(e,t){e.exports={autocomplete:"autocomplete-S6SpJGmW-",caret:"caret-3fqF_ykE-",icon:"icon-1POgzoN_-",textInput:"textInput-1mZnCCcA-",suggestions:"suggestions-NOVMFmSY-",suggestion:"suggestion-3xakscNf-",noResults:"noResults-1pgHgvGL-",selected:"selected-3wOAQHl8-",opened:"opened-2C-bn3cP-"}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r,s,a;Object.defineProperty(t,"__esModule",{value:!0}),t.CheckboxField=void 0,r=function(){function e(e,t){var i,o;for(i=0;i<t.length;i++)o=t[i],o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}(),s=i(304),a=o(s),t.CheckboxField=function(){function e(t){var i=t.label,o=t.name,r=t.error,s=void 0===r?"":r,l=t.hint;n(this,e),this._name=o,this._error=s,this._checkboxView=new a.default({labelRight:i,name:o}),this._checkboxView.$el.addClass("tv-rename-chart-dialog__field"),l&&this._checkboxView.$el.append('<span class="tv-rename-chart-dialog__hint apply-common-tooltip" title=\''+l+"'></span>")}return r(e,[{key:"appendTo",value:function(e){e.append(this._checkboxView.$el)}},{key:"focus",value:function(){}},{key:"select",value:function(){}},{key:"value",set:function(e){this._checkboxView.checked=e},get:function(){
return this._checkboxView.checked}},{key:"name",get:function(){return this._name}},{key:"valid",get:function(){return!0}},{key:"error",get:function(){return this._error}}]),e}()},function(e,t,i){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s,a;Object.defineProperty(t,"__esModule",{value:!0}),t.InputFieldRegExp=void 0,s=function(){function e(e,t){var i,o;for(i=0;i<t.length;i++)o=t[i],o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}(),a=i(199),t.InputFieldRegExp=function(e){function t(e){var i,r;return o(this,t),i=e.regExp,delete e.regExp,r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),r._regExp=i,r}return r(t,e),s(t,[{key:"valid",get:function(){return this._regExp.test(this._$input.val())}}]),t}(a.InputField)},function(e,t,i){"use strict";var o,n,r;Object.defineProperty(t,"__esModule",{value:!0}),i.d(t,"FavoriteStudyTemplateService",function(){return r}),o=i(3),n=i(201),r=function(e){function t(t,i){return e.call(this,t,i,"FAVORITE_STUDY_TEMPLATES_CHANGED","StudyTemplates.quicks",[])||this}return o.c(t,e),t}(n.b)},function(e,t,i){"use strict";var o,n,r,s;Object.defineProperty(t,"__esModule",{value:!0}),i.d(t,"StudyMarket",function(){return s}),o=i(8),n=i.n(o),r=i(163),s=function(){function e(e,t){this.visibilityChanged=new n.a,this._dialogPromise=null,this._dialog=null,this._chartWidgetCollection=e,this._options=t}return e.prototype.isVisible=function(){return null!==this._dialog&&this._dialog.isVisible()},e.prototype.show=function(e){var t=this;if(null===this._dialog)return void this._requestDialog().then(function(){return t.show(e)});this._dialog.show(e)},e.prototype.hide=function(){null!==this._dialog&&this._dialog.hide()},e.prototype.onCustomScriptModified=function(){null!==this._dialog&&this._dialog.onCustomScriptModified()},e.prototype.resetAllPages=function(){null!==this._dialog&&this._dialog.resetAllPages()},e.prototype.updateFavorites=function(){null!==this._dialog&&this._dialog.updateFavorites()},e.prototype._requestDialog=function(){var e=this,t=function(t,o){i.e(13).then(function(o){var n=i(825).StudyMarketDialog;t(new n(e._chartWidgetCollection,e._options))}.bind(null,i)).catch(o)};return null===this._dialogPromise&&(this._dialogPromise=Object(r.retries)(function(){return new Promise(t)},2).then(function(t){e._dialogPromise=null,e._dialog=t,e._dialog.visibilityChanged.subscribe(null,function(t){e.visibilityChanged.fire(t)})})),
this._dialogPromise},e}()},function(e,t){},function(e,t,i){"use strict";function o(){var e,t;return{promise:new Promise(function(i,o){e=i,t=o}),reject:t,resolve:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.createDeferredPromise=o},function(e,t,i){"use strict";var o,n,r,s,a,l,c;Object.defineProperty(t,"__esModule",{value:!0}),o=i(13),i(11),n=i(15),r=i.n(n),s=i(166),a=function(){function e(e){var t,i,o,n,s=this;this._document=e,this.isFullscreen=new r.a,(t=function(){var e,t,i=["fullscreenElement","webkitFullscreenElement","mozFullscreenElement","mozFullScreenElement","msFullscreenElement"];for(e=0;e<i.length;e++)if((t=i[e])in s._document){s.isFullscreen.setValue(!!s._document[t]);break}})();for(i=0,o=["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"];i<o.length;i++)n=o[i],e.addEventListener(n,t,!1)}return e.prototype.enter=function(){var e,t,i,o=this._document.documentElement;for(e=0,t=["requestFullscreen","mozRequestFullScreen","webkitRequestFullscreen","msRequestFullscreen"];e<t.length;e++)if(i=t[e],"function"==typeof o[i]){o[i]();break}this.isFullscreen.setValue(!0)},e.prototype.exit=function(){var e,t,i,o=this._document;for(e=0,t=["exitFullscreen","mozCancelFullScreen","mozExitFullscreen","webkitExitFullscreen","msExitFullscreen"];e<t.length;e++)if(i=t[e],"function"==typeof o[i]){o[i]();break}this.isFullscreen.setValue(!1)},e}(),l=function(){function e(e){var t,i,o,n,s,a,l=this;this.isVisible=new r.a(!0),i=null,o=function(o){var n=o?o+"Hidden":"hidden";if(n in e)return t=o+"visibilitychange",i=function(){l.isVisible.setValue(!e[n])},i(),e.addEventListener(t,i,!1),"break"};for(n=0,s=["","moz","ms","webkit"];n<s.length&&(a=s[n],"break"!==o(a));n++);this.destroy=function(){i&&(e.removeEventListener(t,i,!1),i=null)}}return e}(),i.d(t,"Root",function(){return c}),c=function(){function e(e){this._window=e,this._fullscreenApi=new a(e.document),this._initFullscreen()}return e.prototype.allocate=function(){var e,t,i,o=this;return this.free(),e=this._window.document,t=$("<div>",e).addClass("js-rootresizer__contents").css({position:"relative",width:"100%",height:"100%"}).prependTo(e.body),this._visibilityApi=new l(this._window.document),i={alive:new r.a(!0),fullscreenable:new r.a(!0),body:new r.a(t),width:new r.a,height:new r.a,availWidth:new r.a,availHeight:new r.a,visible:this._visibilityApi.isVisible,fullscreen:this._fullscreenApi.isFullscreen,remove:function(){i.alive.setValue(!1)},attach:function(){i.alive.setValue(!1),o._window.close()},requestFullscreen:function(){o._requestFullscreen()},exitFullscreen:function(){o._exitFullscreen()}},i.alive.subscribe(function(e){e||i!==o._area||o.free()}),this._area=i,this._resizeHandler=function(){var e=i.body.value()[0],t=e.clientWidth,o=e.clientHeight;i.availHeight.setValue(o),i.availWidth.setValue(t),i.height.setValue(o),i.width.setValue(t)},this._resizeHandler(),$(this._window).on("resize",this._resizeHandler),new s.ResizerDetacherState(i).bridge()},e.prototype.free=function(){
if(this._resizeHandler&&($(this._window).off("resize",this._resizeHandler),this._resizeHandler=void 0),this._visibilityApi&&(this._visibilityApi.destroy(),this._visibilityApi=void 0),this._area){var e=this._area;this._area=void 0,e.alive.setValue(!1),e.body.value().remove()}},e.prototype._requestFullscreen=function(){this._fullscreenApi.enter()},e.prototype._exitFullscreen=function(){this._fullscreenApi.exit()},e.prototype._initFullscreen=function(){var e=this,t=this._window.document;this._fullscreenApi.isFullscreen.subscribe(function(i){i?(e._$exitFullscreenButton=$("<div>",t).addClass("tv-exit-fullscreen-button").text($.t("Exit Full Screen (ESC)")).on("click",function(t){t.preventDefault(),e._exitFullscreen()}).appendTo(t.body),e._onExitFullscreenEsc=function(t){27===t.keyCode&&(t.preventDefault(),e._exitFullscreen())},$(t).on("keyup",e._onExitFullscreenEsc)):(e._$exitFullscreenButton&&(e._$exitFullscreenButton.remove(),e._$exitFullscreenButton=void 0),e._onExitFullscreenEsc&&($(t).off("keyup",e._onExitFullscreenEsc),e._onExitFullscreenEsc=void 0)),e._resizeHandler&&e._resizeHandler()})},e}()},function(e,t){},function(e,t,i){"use strict";function o(e,t){var i,o,n,r,s,a,l=0;for(i=0,o=t;i<o.length&&(n=o[i],r=n.min,s=n.max,e<r||s<r||(a=Math.min(e,s),l=Math.max(l,a),e!==l));i++);return l}function n(e){var t,i,o,n,r,s=[];if(void 0===e)return[];for(Array.isArray(e)||(e=[e]),t=0,i=e;t<i.length;t++)o=i[t],n=void 0,r=void 0,isFinite(o)?n=r=+o:(n=+o.min,r=+o.max),(n<0||isNaN(n))&&(n=0),isNaN(r)&&(r=1/0),n<=r&&r>0&&s.push({min:n,max:r});return s.sort(function(e,t){return e.min-t.min||e.max-t.max}),s}function r(e,t){if(e.length!==t.length)return!1;for(var i=e.length;i--;){if(e[i].min!==t[i].min)return!1;if(e[i].max!==t[i].max)return!1}return!0}function s(e){var t=u.enabled("side_toolbar_in_fullscreen_mode");return"center"===e||"left"===e&&t}var a,l,c,h,u,d;Object.defineProperty(t,"__esModule",{value:!0}),a=i(13),l=i(15),c=i.n(l),h=i(166),u=i(4),i.d(t,"ChartPage",function(){return d}),d=function(){function e(e){var t=this;if(this._$body=$(e.body.value()),0===this._$body.size())throw Error("bridge.body.value() must be an element or not empty jQuery object");this._availableAreas=["left","dompanel","right","top","footer","bottom","center"],this._areas={},this._bridge=e,this._width=e.width,this._height=e.height,this._width.subscribe(function(){return t.recalculate()}),this._height.subscribe(function(){return t.recalculate()}),this._bridge.visible.subscribe(function(){return t._updateVisibility()}),this._bridge.fullscreen.subscribe(function(){return t._onParentFullscreenChange()}),this.recalculate()}return e.prototype.allocate=function(e){var t,i,o=this,s=e&&e.areaName;if(-1===this._availableAreas.indexOf(s))throw Error("unknown options.areaName");return this.free(s),t=this._createDOM(s),i={canNegotiate:{width:"left"===s||"right"===s||"dompanel"===s,height:"top"===s||"bottom"===s||"footer"===s},negotiations:{width:[],height:[]},remove:function(){for(var e in o._areas)o._areas[e]===i&&o.free(e)},negotiateWidth:function(e){
if(i.canNegotiate.width){var t=n(e);r(i.negotiations.width,t)||(i.negotiations.width=t,o.recalculate())}},negotiateHeight:function(e){if(i.canNegotiate.height){var t=n(e);r(i.negotiations.height,t)||(i.negotiations.height=t,o.recalculate())}},requestFullscreen:function(){o._fullscreenArea||("right"!==s&&"center"!==s||(o._fullscreenArea=s),"center"===s&&o._bridge.requestFullscreen(),o._updateFullscreen())},exitFullscreen:function(){s===o._fullscreenArea&&(o._fullscreenArea=void 0,"center"===s&&o._bridge.exitFullscreen(),o._updateFullscreen())},width:new c.a,height:new c.a,availWidth:new c.a,availHeight:new c.a,alive:new c.a(!0),body:new c.a(t),visible:new c.a(!0),fullscreen:new c.a(!0),rdState:new h.ResizerDetacherState},i.rdState.pushOwner(i),this._areas[s]=i,i.rdState.owner.subscribe(function(e){var t,n,r,a=i.body.value();if(e!==i)a.empty().detach();else{for(t=null,n=o._availableAreas.indexOf(s);n--;)if(r=o._availableAreas[n],o._affectsLayout(r)){t=o._areas[r].body.value();break}t?a.insertAfter(t):a.appendTo(o._$body)}o.recalculate()},{callWithLast:!0}),i.rdState.bridge()},e.prototype.free=function(e){var t=this._areas[e];t&&(this._areas[e]=void 0,$(t.body.value()).remove(),t.alive.setValue(!1))},e.prototype.recalculate=function(){var e,t,i,n,r,s,a,l,c,h,u,d,p,_={};for(this._recalcSingleRunToken=_,e={width:this._width.value(),height:this._height.value()},t=0;t<this._availableAreas.length;t++)if(i=this._availableAreas[t],(n=this._areas[i])&&this._affectsLayout(i)){for("center"===i?(r=0,this._affectsLayout("left")&&(r+=this._areas.left.width.value()),s=0,this._affectsLayout("top")&&(s+=this._areas.top.height.value()),n.body.value().css({left:r,top:s})):"top"!==i&&"bottom"!==i&&"footer"!==i||(r=0,this._affectsLayout("left")&&(r+=this._areas.left.width.value()),n.body.value().css({left:r})),a=void 0,a=n.canNegotiate.width&&!n.canNegotiate.height?["height","width"]:["width","height"],l=0;l<2;l++){if(c=a[l],h=void 0,u=e[c],this._fullscreenArea===i)h=u;else{if("bottom"===i&&"height"===c&&(u-=5),"right"!==i&&"dompanel"!==i||"width"!==c||(u-=300),"width"===c?n.availWidth.setValue(u):"height"===c&&n.availHeight.setValue(u),_!==this._recalcSingleRunToken)return;n.canNegotiate[c]?(h=o(u,n.negotiations[c]),e[c]-=h):h=u}if(n.body.value().css(c,h),n[c].setValue(h),_!==this._recalcSingleRunToken)return}n.body.value().toggleClass("js-hidden",!1)}else n&&n.body.value().toggleClass("js-hidden",!0);this._affectsLayout("footer")&&(n=this._areas.footer,d=this._height.value()-n.height.value(),this._affectsLayout("bottom")&&(d-=this._areas.bottom.height.value()),n.body.value().css({top:d})),this._affectsLayout("dompanel")&&(n=this._areas.dompanel,p=0,this._affectsLayout("right")&&(p+=this._areas.right.width.value()),n.body.value().css({right:p}))},e.prototype._affectsLayout=function(e){var t,i=this._areas[e];return!!i&&(i.rdState.owner.value()===i&&(this._fullscreenArea&&this._fullscreenArea!==e?s(e):!((this._width.value()<=567||this._height.value()<=450)&&(t=["center","top","left"],!t.includes(e)))))},
e.prototype._updateVisibility=function(){var e,t,i,o=this._bridge.visible.value();for(e=0;e<this._availableAreas.length;e++)t=this._availableAreas[e],(i=this._areas[t])&&(o&&this._affectsLayout(t)?i.visible.setValue(!0):i.visible.setValue(!1))},e.prototype._onParentFullscreenChange=function(){this._bridge.fullscreen.value()||(this._fullscreenArea=void 0,this._updateFullscreen())},e.prototype._updateFullscreen=function(){var e,t,i,o=void 0!==this._fullscreenArea;for(e=0;e<this._availableAreas.length;e++)t=this._availableAreas[e],(i=this._areas[t])&&(t!==this._fullscreenArea?i.body.value().toggleClass("js-hidden",o&&!s(t)):i.fullscreen.setValue(!0));this._updateVisibility(),this.recalculate()},e.prototype._createDOM=function(e){var t=$("<div>").addClass("layout__area--"+e).css("position","absolute");return"bottom"===e?t.css("bottom",0):t.css("top",0),"right"===e||"dompanel"===e?t.css("right",0):t.css("left",0),t},e}()},function(e,t,i){"use strict";(function(e,t){function o(t,i){this.options=$.extend({throttleTimeout:125},i),this._connected=!1,this._symbol_data={},this._subscriptions={},this._delayed_subscriptions=[],this.fieldsSent=new $.Deferred,this.onConnect=new e,this.onDisconnect=new e,this._quoteApi=new n(window.ChartApiInstance),this._type=t||"full",this.fieldsSent=new $.Deferred,this._delayUpdateFastSymbols=s(this._updateFastSymbols,250),this._throttledSymbolData={},this._formatterValuesCache={},this._waitingForFormatters={},this._snapshotValuesCache={},this._waitingForSnapshot={},this.connect()}var n,r=i(19).PriceFormatter,s=i(258).debounce,a=i(206),l=i(205),c=i(37);n=i(612),o.prototype.destroy=function(){this._quoteApi.destroy(),this._quoteApi=null,this._connected=!1,this.onDisconnect.fire()},o.prototype.typeFields={},o.prototype.typeFields.simple=["ch","chp","current_session","description","local_description","language","exchange","fractional","is_tradable","lp","minmov","minmove2","original_name","pricescale","pro_name","short_name","type","update_mode","volume"],o.prototype.typeFields.simpleDetailed=[].concat(o.prototype.typeFields.simple,["ask","bid","fundamentals","high_price","is_tradable","low_price","open_price","prev_close_price","rch","rchp","rtc","status","basic_eps_net_income","beta_1_year","earnings_per_share_basic_ttm","industry","market_cap_basic","price_earnings_ttm","sector","volume","dividends_yield"]),o.prototype.typeFields.full=[],o.prototype.connect=function(e){this._quoteApi.connect(this.quoteHandler.bind(this))},o.prototype.quoteHandler=function(e){var t=e.method,i=e.params;switch(t){case"connected":this._connected||(this._connected=!0,this.onConnected());break;case"quote_list_fields":break;case"quote_symbol_data":this._connected&&this.onSymbolData(i[0]);break;case"disconnected":this._connected&&(this._connected=!1,this.onDisconnect.fire())}},o.prototype.onConnected=function(){this.setFields();var e=Object.keys(this._symbol_data);e.length&&this._quoteApi.quoteAddSymbols(e,{forcePermission:!0}),this._delayed_subscriptions.forEach(function(e){this.subscribe.apply(this,e)},this),
this._delayed_subscriptions=[],this.onConnect.fire()},o.prototype.setFields=function(){var e=o.prototype.typeFields[this._type];e&&e.length&&this._quoteApi.quoteSetFields(e),this.fieldsSent.resolve()},o.prototype.onSymbolData=function(e){var t=e.symbolname,i=this._throttledSymbolData[t];i||(i=this._throttledSymbolData[t]={fnDispatch:a(this.dipatchSymbolData.bind(this),this.options.throttleTimeout)}),i.cache?$.extend(!0,i.cache,e):i.cache=e,i.fnDispatch(t)},o.prototype._parseUpdateMode=function(e){var t=e.update_mode;t&&(t=t.match(/(delayed_streaming){1}(?:_([\d]+))?/))&&t[1]&&(t[2]&&(e.update_mode_seconds=+t[2]),e.update_mode=t[1])},o.prototype.dipatchSymbolData=function(e){var t,i,o=this._symbol_data[e],n=this._throttledSymbolData[e].cache;if(delete this._throttledSymbolData[e].cache,this._symbol_data[e]){$.extend(!0,o,n),o.values&&this._parseUpdateMode(o.values);for(t in this._subscriptions)i=this._subscriptions[t],i[e]&&i[e].forEach(function(e){e(o,n)})}},o.prototype.subscribe=function(e,t,i){var o,n;if(!this._connected)return void this._delayed_subscriptions.push(arguments);this._subscriptions[e]=this._subscriptions[e]||{},o=this._subscriptions[e],t=[].concat(t),n=[],t.forEach(function(e){this._symbol_data[e]?o&&o[e]||this._symbol_data[e].subscribers_count++:(this._symbol_data[e]={subscribers_count:1},n.push(e)),o[e]=o[e]||[],o[e].push(i),o[e].fast=!0,this._symbol_data[e]&&this._symbol_data[e].values&&i(this._symbol_data[e],this._symbol_data[e])},this),n.length&&(this._quoteApi.quoteAddSymbols(n,{forcePermission:!0}),this._delayUpdateFastSymbols())},o.prototype.unsubscribe=function(e,t,i){var o,n=this._subscriptions[e];n&&(n[t]&&i?(o=n[t].indexOf(i),~o&&n[t].splice(o,1),n[t].length||delete n[t]):delete n[t]),n&&0===Object.keys(n).length&&delete this._subscriptions[e],this._symbol_data.hasOwnProperty(t)&&(n&&!n[t]&&this._symbol_data[t].subscribers_count--,this._symbol_data[t].subscribers_count||(delete this._symbol_data[t],this._quoteApi.quoteRemoveSymbols([t]),this._delayUpdateFastSymbols()))},o.prototype.setFastSymbols=function(e,t){var i,o;if(this._subscriptions[e]){i=this._subscriptions[e];for(o in i)i[o].fast=-1!==t.indexOf(o)}this._delayUpdateFastSymbols()},o.prototype._updateFastSymbols=function(){if(this._connected){var e=this._fastSymbols();0===e.length?this._quoteApi.quoteHibernateAll():this._quoteApi.quoteFastSymbols(e)}},o.prototype._delayUpdateFastSymbols=o.prototype._updateFastSymbols,o.prototype._fastSymbols=function(){var e,t,i,o=[];for(e in this._subscriptions){t=this._subscriptions[e];for(i in t)t[i].fast&&o.push(i)}return o=l(o)},o.prototype.formatter=function(e,t){function i(e){var i=t&&!e.fractional?1:e.minmov;return new r(e.pricescale,i,e.fractional,e.minmove2)}function o(e){return e&&null!=e.pricescale&&null!=e.minmov}var n,s=this;return this._waitingForFormatters[e]?this._waitingForFormatters[e]:(n=new Promise(function(t,n){if(s._formatterValuesCache[e])t(i(s._formatterValuesCache[e]));else{var r=c.guid();s.subscribe(r,[e],function(a){a.error&&(s._waitingForFormatters[e]=null,n(a.error)),
o(a.values)&&(s._waitingForFormatters[e]=null,s._formatterValuesCache[e]=a.values,t(i(a.values)),s.unsubscribe(r,e))})}}),this._waitingForFormatters[e]=n,n)},o.prototype.snapshot=function(e){var t,i=this;return this._waitingForSnapshot[e]?this._waitingForSnapshot[e]:(t=new Promise(function(t,o){if(i._snapshotValuesCache[e])t(i._snapshotValuesCache[e]);else{var n=c.guid();i.subscribe(n,[e],function(r){r.error&&(i._waitingForSnapshot[e]=null,o(r.error));var s=r.values;s&&s.minmov&&s.pricescale&&s.description&&(i._waitingForSnapshot[e]=null,i._snapshotValuesCache[e]=s,t(s),i.unsubscribe(n,e))})}}),this._waitingForSnapshot[e]=t,t)},TradingView.QuoteSessionMultiplexer=o,void 0!==t&&t&&t.exports&&(t.exports=o)}).call(t,i(8),i(47)(e))},function(e,t,i){"use strict";(function(e){function t(e){this._chartApi=e,this._sessionid="qs_"+o(),this._sessionstarted=!1}var o=i(37).randomHash;t.prototype.destroy=function(){this._sessionstarted&&(this._chartApi.quoteDeleteSession(this._sessionid),this._sessionid=null,this._sessionstarted=!1)},t.prototype.connected=function(){return this._chartApi.connected()},t.prototype.connect=function(e){this._globalHandler=e,this._chartApi.createSession(this._sessionid,this),this._chartApi.connect()},t.prototype.disconnect=function(){this._chartApi.disconnect()},t.prototype.quoteAddSymbols=function(e,t){e=[].concat(e),t&&t.forcePermission&&(e=e.concat({flags:["force_permission"]})),this._chartApi.quoteAddSymbols(this._sessionid,e)},t.prototype.quoteRemoveSymbols=function(e){this._chartApi.quoteRemoveSymbols(this._sessionid,e)},t.prototype.quoteFastSymbols=function(e){this._chartApi.quoteFastSymbols(this._sessionid,e)},t.prototype.quoteSetFields=function(e){this._chartApi.quoteSetFields(this._sessionid,e)},t.prototype.onMessage=function(e){switch(e.method){case"connected":this._sessionstarted||(this._chartApi.quoteCreateSession(this._sessionid),this._sessionstarted=!0);break;case"disconnected":this._sessionstarted=!1}this._globalHandler(e)},t.prototype.quoteHibernateAll=function(e){this._chartApi.quoteHibernateAll(this._sessionid)},TradingView.QuoteSession=t,void 0!==e&&e&&e.exports&&(e.exports=t)}).call(t,i(47)(e))},function(e,t,i){"use strict";var o=i(4);window.onload=function(){function e(){var e=0;return JSON.parse(urlParams.logo).image&&(e="C",o.enabled("link_to_tradingview")||(e="D")),e}function t(){try{return/^(192|172|10)\.[0-9][0-9][0-9]\.[0-9][0-9][0-9]\.[0-9][0-9][0-9]/.test(location.hostname)||/^.*((?:\.local)|localhost)$/.test(location.hostname)}catch(e){return!1}}location.hostname.indexOf(".")>=0&&!t()&&setTimeout(function(){try{var t=e();window.ga&&0!==t&&window.ga("send","event","s",t)}catch(e){}},3e4)}},function(e,t,i){"use strict";(function(t){function o(e){function o(e,t){var i,o,r=[],s=n[ft].count;for(i=0;i<s;i++)r.push(lt[i].chartWidget.state(e,t));return o={layout:ft,charts:r},yt.value()&&(o.symbolLock=1),vt.value()&&(o.intervalLock=1),bt.value()&&(o.trackTimeLock=1),o}function x(e){var t,i=$.Deferred(),o=[],r=n[ft].count;for(t=0;t<r;t++)o.push(lt[t].chartWidget.asyncState(e))
;return $.when.apply($,o).then(function(){var e,t={charts:[]};for(e=0;e<arguments.length;e++)t.charts.push(arguments[e]);i.resolve(t)}),i}function C(){var e,t;for(e=Re?[Re]:lt.slice(0,_t.count).filter(function(e){return!e.hiddenInLayout.value()}),t=0;t<e.length;t++)L(e[t],t,e.length);We.trigger("chart-rect-update",We[0].getBoundingClientRect())}function L(e,t,i){var o=_t.sizer(t,{width:Ve.value(),height:Oe.value()},ot,nt,i),n={width:Math.max(Math.round(o.width||0)-2*rt,0),height:Math.max(Math.round(o.height||0)-2*rt,0),top:Math.max(Math.round(o.top||0),0),left:Math.max(Math.round(o.left||0),0)};e.metrics=n,e.body.value().css(n),e.width.setValue(n.width),e.height.setValue(n.height)}function I(){for(var e=0;e<lt.length;e++)lt[e].chartWidget.resizeSeriesControlUI()}function M(){for(var e=0;e<lt.length;e++)lt[e].chartWidget.tickSeriesControlClock()}function k(e){return e.rdState.owner.value()!==e}function A(e){var t,i=0,o=0;for(t=0;t<_t.count;t++)lt[t]&&k(lt[t])||(lt[t]===e&&(o=i),i++);L(e,o,i)}function E(e){function t(){n.visible.setValue(!n.hiddenInLayout.value()&&it.resizerBridge.visible.value())}var i,o,n;return e=Object.assign({chartWidgetCollection:tt,isActive:0===lt.length,barsMarksContainersFactory:D,undoHistory:Fe,readOnly:at},e||{}),o=$(document.createElement("div")).addClass("chart-container").appendTo(We).css({position:"absolute",overflow:"hidden"}),n={alive:new _(!0),body:new _(o),width:new _,height:new _,hiddenInLayout:new _(!1),visible:new _,rdState:new f,requestFullscreen:function(){dt.value()&&(st.setValue(n.chartWidget),V(n))},exitFullscreen:function(){st.value()===n.chartWidget&&V(null)},detachable:dt,fullscreenable:dt,fullscreen:new _},n.rdState.pushOwner(n),lt.push(n),n.hiddenInLayout.subscribe(t),it.resizerBridge.visible.subscribe(t),t(),A(n),Object.assign(e,n.rdState.bridge()),n.chartWidget=i=new r.ChartWidget(e),tt.firstWidgetInitialized||i.chartWidgetInitialized.subscribe(null,function(){tt.firstWidgetInitialized=!0,I()},!0),(1===lt.length||d.enabled("show_logo_on_all_charts"))&&i.createBranding(),e.containsData?i.finishInitWithoutConnect():i.connect(),B(),N(),je.fire(i),i}function D(e){var t,i,o=[];return d.enabled("charting_library_base")&&(t=new b(e),o.push(t),i=new S(e),o.push(i)),o}function V(e){Re!==e&&(Re=e,ct=F(),R(ft))}function O(){V(null);for(var e=0;e<lt.length;e++)lt[e].rdState.bridge().attach()}function R(e){function t(){0===u&&(B(),h.emit("layout_changed"))}function i(){u--,t()}var o,r,s,a,l,c,u=0;e in n||(e="s"),o=n[e].count,h.emit("layout_about_to_be_changed",e),ft=e,_t=n[e];for(r=o;r<lt.length;r++)s=lt[r],k(s)&&s.rdState.bridge().attach();for(r=0;r<o||r<lt.length;r++)s=lt[r],a=Re?Re===s:r<o&&(!s||!k(s)),a?(s?(We.append(s.body.value()),s.hiddenInLayout.setValue(!1),(l=mt.shift())&&(gt=!0,s.chartWidget.loadContent(l.content),gt=!1)):(u++,c=E(Object.assign({},Be,mt.shift()||(st.value()?{content:st.value().state()}:null)||{},0===r||yt.value()?{}:{defSymbol:null})),s=lt[r],c.modelCreated().subscribe(null,i,!0)),s.body.value().toggleClass("multiple",o>1),
s.fullscreen.setValue(Re===s)):s&&(s.hiddenInLayout.setValue(!0),s.body.value().detach(),s.fullscreen.setValue(!1));return C(),B(),z(),t(),pt.value()<1&&o>0&&lt[o-1].rdState.bridge().attach(),!0}function B(){var e,t=Math.min(_t.count,lt.length)-1;if(t<0)return void st.deleteValue();e=ut,e<0&&(e=0),e>t&&(e=t),st.setValue(lt[e].chartWidget)}function z(){var e,t=_t.count,i=t;for(e=0;e<t;e++)lt[e]&&k(lt[e])&&i--;pt.setValue(i),dt.setValue(i>1)}function N(){var e,t;for(e=lt.length;e--;)t=e===ut,lt[e].body.value().toggleClass("active",t).toggleClass("inactive",!t)}function F(){return lt.filter(function(e){return!e.hiddenInLayout.value()}).sort(function(e,t){return e.metrics.top-t.metrics.top||e.metrics.left-t.metrics.left})}function W(){var e,t,i,o=De.value();"s"!==o&&(e=n[o].count,Re||(ct=F()),t=ht+1,i=ct[t],!i||t>e?(i=ct[0],ht=0):ht=t,st.setValue(i.chartWidget),Re&&R(o))}function H(){return Ue}function j(){T("GUI","Save"),Ue.fire()}function U(){var e,t=st.value();t&&(e=t.model())&&e.model().setSelectedSource(null)}function q(e){var t=st.value();return!!t&&t.trySetChartStyle(e)}function Y(e){var t,i,o,n;Ye!==e&&(Ye&&(Ye.modelCreated().unsubscribe(null,G),(t=Ye.model())&&(i=t.mainSeries().properties(),i.style.unsubscribe(null,K),o=t.model(),o.onSelectedSourceChanged().unsubscribe(null,Z),Ye=null)),e&&(n=e.model(),n?G(n):e.modelCreated().subscribe(null,G),Ye=e))}function G(e){var t,i=e.mainSeries().properties();i.style.subscribe(null,K),K(i.style),t=e.model(),t.onSelectedSourceChanged().subscribe(null,Z),Z(e.selectedSource())}function K(e){qe.setValue(e.value())}function Z(e){$e.setValue(e)}function X(e){var t,i,o,n;if(e!==yt.value()){if(Fe.beginUndoMacro("Symbol Lock"),e)for(t=st.value(),i=t.getSymbol(),o=0;o<lt.length;o++)(n=lt[o].chartWidget)!==t&&n.getSymbol()!==i&&n.setSymbol(i);Fe.setWatchedValue(yt,e,"Symbol Lock"),Fe.endUndoMacro()}}function J(e){var t,i,o,n;if(e!==vt.value()){if(Fe.beginUndoMacro("Interval Lock"),e)for(t=st.value(),i=t.getResolution(),o=0;o<lt.length;o++)(n=lt[o].chartWidget)!==t&&n.getResolution()!==i&&n.setResolution(i);Fe.setWatchedValue(vt,e,"Resolution Lock"),Fe.endUndoMacro()}}function Q(e){bt.value()!==e&&Fe.setWatchedValue(bt,e,"Track Time")}function ee(e){return e=Ie(e),De.value()!==e&&(Fe.pushUndoCommand(new p(tt,e)),!0)}function te(e){yt.value()?ie(e):st.value().setSymbol(e)}function ie(e){var t,i,o=!1;for(t=0;t<lt.length;t++)i=lt[t].chartWidget,(i.model().mainSeries().properties().symbol.value()!==e||d.enabled("same_data_requery"))&&(o||(Fe.beginUndoMacro("Change Symbol"),o=!0),i.setSymbol(e));o&&Fe.endUndoMacro()}function oe(e){var t,i,o;if(!gt)if(vt.value()){for(t=!1,i=0;i<lt.length;i++)o=lt[i].chartWidget,o.model().mainSeries().properties().interval.value()!==e&&(t||(Fe.beginUndoMacro("Change Resolution"),t=!0),o.setResolution(e));t&&Fe.endUndoMacro()}else st.value().setResolution(e)}function ne(e){var t,i,o;if(e&&e.onlyActiveChart||Re)return{layout:"s",hidpiRatio:window.hidpiCanvasRatio||1,charts:[st.value().images()]};for(t=[],i=_t.count,
o=0;o<lt.length&&o<i;o++)t.push(lt[o].chartWidget.images());return{layout:ft,hidpiRatio:window.hidpiCanvasRatio||1,charts:t}}function re(){var e,t=[];for(e=0;e<lt.length&&e<_t.count;e++)t=t.concat(lt[e].chartWidget.tags());return t=$.unique(t),t=$.map(t,function(e){return e.toLowerCase().replace(/\W+/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,"")})}function se(e,t,i,o){var n,r,s,a;if(i||wt)for(n=_t.count,r=0;r<lt.length&&r<n;r++)(s=lt[r].chartWidget)!==t&&lt[r].rdState.bridge().visible.value()&&(a=s.model())&&a.model().setExternalPosition(e,o)}function ae(e,t){var i,o,n,r;if(bt.value()){for(i=_t.count,Fe.beginUndoMacro("Sync Time"),o=0;o<lt.length&&o<i;o++)if(n=lt[o].chartWidget,r=n.model()){if(r.model()===t)continue;r.gotoTime(e,{centerIfVisible:!1,model:t})}Fe.endUndoMacro()}}function le(){Pe(!1),lt.forEach(function(e){void 0!==e.timingsMeter&&e.timingsMeter.destroy(),e.chartWidget.destroy()}),it.resizerBridge.remove(),Je&&clearInterval(Je),$(window).off("resize",C),$(document).off("onUpdate",C),He.resolve(),We.remove(),Xe=null}function ce(){return He.promise()}function he(){return je}function ue(){Ne.id.setValue(void 0),Ne.uid.setValue(void 0),Ne.name.setValue(void 0)}function de(){var e={snapshotUrl:it.snapshotUrl};(d.enabled("show_dialog_on_snapshot_ready")?u.getImageOfChart:u.getImageOfChartSilently)(tt,e,function(e){h.emit("onScreenshotReady",e)})}function pe(){for(var e=n[ft].count;e<lt.length;e++)lt[e].chartWidget.destroy();lt.splice(n[ft].count)}function _e(e){for(var t=0;t<lt.length;t++)lt[t].chartWidget.applyOverrides(e)}function fe(e){for(var t=0;t<lt.length;t++)lt[t].chartWidget.applyStudiesOverrides(e)}function me(){it.resizerBridge.requestFullscreen()}function ge(){it.resizerBridge.exitFullscreen()}function ye(){return We}function ve(e,t){(t?[{chartWidget:st.value()}]:lt).forEach(function(t){t.chartWidget._model.model().restoreTheme(e)})}function be(e,t){g.bind(e,function(e){e.preventDefault(),t()})}function Se(){for(var e in Ke)be(e,Ke[e]);Xe.watchOn(window)}function we(){for(var e in Ke)g.unbind(e);Xe.stopWatching(window)}function Te(e){Be.onWidget||Ge===e||(Ge=e,e?Se():we())}function Pe(e){if(Te(e),0!==lt.length){for(var t=lt.length;t--;)lt[t].chartWidget.setActive(!1);lt[ut].chartWidget.setActive(e)}}function xe(){return lt.map(function(e){return e.chartWidget.getMarketStatusTooltip()})}function Ce(){return lt.map(function(e){var t=e.chartWidget.model(),i=t?t.mainSeries().status():null;return(null===i?"":e.chartWidget.getDataTextStatus(i))+" ("+i+")"})}function Le(){var e=this;return new Promise(function(t){i.e(12).then(function(){var o=i(940).AddCompareDialog,n=new o(e);t(n.show())}.bind(null,i)).catch(i.oe)})}function Ie(e){return d.enabled("charting_library_base")?e:"s"===e||isProductFeatureEnabled(ProductFeatures.MULTIPLE_CHARTS)&&getProductFeatureConfig(ProductFeatures.MULTIPLE_CHARTS).layout.indexOf(e)>=0||Be.containsData||at?e:"s"}function Me(e){if(mt=[],e){e.charts||(e={layout:"s",charts:[e]}),ft=Ie(e.layout||"s");for(var t=0;t<e.charts.length;t++)mt.push({content:e.charts[t]})
;e.symbolLock&&yt.setValue(!0),e.intervalLock&&vt.setValue(!0),e.trackTimeLock&&bt.setValue(!0)}De.setValue(ft),R(ft)&&(l.init(),mt.splice(0,mt.length))}function ke(){0===--Qe&&h.emitOnce("onChartReady")}function Ae(){return Promise.all(lt.map(function(e){return m(e.chartWidget.modelCreated())}))}function Ee(){return Promise.all(lt.map(function(e){return m(e.chartWidget.model().mainSeries().onSymbolResolved())}))}var De,Ve,Oe,Re,Be,ze,Ne,Fe,We,He,je,Ue,qe,$e,Ye,Ge,Ke,Ze,Xe,Je,Qe,et,tt=this,it=Object.assign({},P,e),ot=2,nt=0,rt=0,st=new _,at=it.readOnly||!1,lt=[],ct=[],ht=0,ut=0,dt=new _,pt=new _,_t=null,ft="s",mt=[],gt=!1,yt=new _(!1),vt=new _(!1),bt=new _(!1),St=new _(TVSettings.getBool("chart.syncCrosshair",!0)),wt=St.value();St.subscribe(function(e){e=!!e,wt=e,TVSettings.setValue("chart.syncCrosshair",e)}),De=new _(ft),Ve=it.resizerBridge.width,Oe=it.resizerBridge.height,Re=null,"padding"in it&&(ot=it.padding),"edge"in it&&(nt=it.edge),"border"in it&&(rt=it.border),Be=it.widgetOptions||{},ze=it.metaInfo||{},Ne={id:new _(ze.id||null),name:new _(ze.name),description:new _(ze.description),username:new _(ze.username),uid:new _(ze.uid),lastModified:new _(ze.lastModified)},Fe=a(),We=$(it.resizerBridge.body.value()).eq(0),He=$.Deferred(),je=new t,Ve.subscribe(C),Oe.subscribe(C),this.updateLayout=C,Ue=new t,qe=new _,$e=new _,Ye=null,st.subscribe(function(e){var t,i;if(e){for(i=lt.length;i--;)if(lt[i].chartWidget===e){t=i;break}if(!isFinite(t))throw Error("Cannot make detached ChartWidget active");if(ut!==t){for(Re&&(k(lt[t])||(Re=lt[t])),ut=t,N(),ct.length&&(ht=ct.indexOf(lt[ut])),i=lt.length;i--;)lt[i].chartWidget.setActive(!1);e.setActive(!0)}Y(e)}},{callWithLast:!0}),Ge=!1,Ke={Tab:W},it.takeScreenshotEnabled&&(Ke["Alt+s"]=de),it.saveChartEnabled&&(Ke["Ctrl+s"]=j),Ze={},Ze[v]=U,Xe=new y("keydown",!1),Xe.regHandlers(Ze),Te(!0),Object.assign(this,{createChartWidget:E,getAll:function(){return lt.map(function(e){return e.chartWidget})},destroy:le,layout:De,activeChartWidget:st,activeChartStyle:qe.readonly(),trySetChartStyleToActiveWidget:q,selectedSource:$e.readonly(),metaInfo:Ne,state:o,asyncState:x,readOnly:function(){return at},lock:{symbol:yt,setSymbolLockWithUndo:X,interval:vt,setIntervalLockWithUndo:J,crosshair:St,trackTime:bt,setTrackTimeWithUndo:Q},setSymbol:te,setResolution:oe,updateLayout:C,setChartLayoutWithUndo:ee,resizeWidgetsUI:I,images:ne,tags:re,syncCrosshair:se,syncScroll:ae,setSymbolAll:ie,clearChartMetaInfo:ue,onfeatures:it.onfeatures,takeScreenshot:de,loadContent:Me,purgeUnusedWidgets:pe,applyOverrides:_e,applyStudiesOverrides:fe,switchChart:W,startFullscreen:me,exitFullscreen:ge,destroyPromise:ce,chartWidgetCreated:he,saveKeysPressed:H,getContainer:ye,onWidget:Be.onWidget,applyTheme:ve,setActive:Pe,inlineChartsCount:pt.readonly(),revertToInline:O,chartMarketStatuses:xe,chartSeriesStatuses:Ce,undoHistory:Fe,showAddCompareDialog:Le}),Me(it.onfeatures?void 0:it.content),De.subscribe(function(e){N(),R(e,!1)&&(ct=F(),ht=ct.indexOf(lt[ut]))}),De.hook=function(e){return e===this.value()?e:Ie(e)},
at&&(De.writeLock=!0),Je=setInterval(M,1e3),$(window).on("resize",C),$(document).on("onUpdate",C),d.enabled("datasource_copypaste")&&(c.init(),it.globalEvents&&($(window).on("appclip:paste",function(e){st.value().onAppClipboardPaste(),e.preventDefault()}),$(window).on("appclip:copy",function(e){st.value().onAppClipboardCopy(),e.preventDefault()}),$(window).on("appclip:cut",function(e){st.value().onAppClipboardCut(),e.preventDefault()}))),Qe=0,lt.forEach(function(e){if(e){Qe++;var t=e.chartWidget;t.withModel(null,function(){if(t.model().mainSeries().bars().size()>0)ke();else{var e=function(){ke(),t.model().mainSeries().onBarReceived().unsubscribe(null,e),t.model().mainSeries().onCompleted().unsubscribe(null,e)};t.model().mainSeries().onBarReceived().subscribe(null,e),t.model().mainSeries().onCompleted().subscribe(null,e)}})}}),s()&&(et=l.tool.setValue,l.tool.setValue=function(){tt.selectedSource.value()&&tt.activeChartWidget.value().model().lineBeingCreated()&&tt.activeChartWidget.value().model().cancelCreatingLine(),et.apply(l.tool,arguments)}),Ae().then(Ee).then(function(){window.saver&&window.is_authenticated&&it.widgetOptions.justCloned&&window.saver.saveChartSilently()}).catch(w.logError.bind(w))}var n=i(109).layouts,r=i(615),s=i(63).supportTouch,a=i(785).createUndoHistory,l=i(33),c=i(184),h=i(38),u=i(786),d=i(4),p=i(787).SetChartLayoutCommand,_=i(15),f=i(166).ResizerDetacherState,m=i(788).delegateToPromise,g=i(191),y=i(340).KeyboardListener,v=i(194).ESC,b=i(789),S=i(790),w=i(5).getLogger("Chart.ChartWidgetCollection"),T=i(32).trackEvent,P={publishChartEnabled:!0,saveChartEnabled:!0,takeScreenshotEnabled:!0};e.exports=o}).call(t,i(8))},function(e,t,i){"use strict";(function(t){function o(e){var i,o,n,r,s,a,l,c,h,u,d,p,_,f,m,g,y,v,b,S;this._options=Object.assign({},ae,e),i=this,this._guid=Z(),this._startSpinner(this._options.body.value()),o=this._options.content,n=this._options.readOnly,n||(C.init(),C.tool.subscribe(function(){i._updateCrossHairPositionIfNeeded()}),r=function(e,t,i){var o,n=t.mainSeries().syncModel(),r=e.mainSeries().syncModel(),s=i;return n&&r&&(o=e._createSyncPoint(n,r),s=o.sourceTimeToTargetTime(i)),e.timeScale().points().roughIndex(s,r&&r.distance.bind(r))},C.createdLineTool.subscribe(null,function(e){var t,o,n;i._model&&(t=i._model.model(),e.model!==t&&(o=t.paneForSource(i._model.model().mainSeries()),n={index:r(t,e.model,e.point.timeStamp),price:e.point.price},i._model.createLineTool(o,n,e.linetool,e.properties,e.linkKey)))}),C.continuedLineTool.subscribe(null,function(e){var t,o,n;i._model&&(t=i._model.model(),e.model!==t&&(o={index:r(t,e.model,e.point.timeStamp),price:e.point.price},(n=i._model.lineBeingCreated())&&i._model.model().coninueCreatingLine(o,e.envState,!!e.finalState)&&e.finalState&&n.restoreExternalPoints(e.finalState)))}),C.cancelledLineTool.subscribe(null,function(e){if(i._model){var t=i._model.model();e.model!==t&&i._model.model().cancelCreatingLine()}}),C.startedMovingLineTool.subscribe(null,function(e){var t,o,n;i._model&&(t=i._model.model(),
e.model!==t&&(o=t.dataSources().filter(function(t){return t.linkKey===e.linkKey})[0])&&(n={index:r(t,e.model,e.point.timeStamp),price:e.point.price},i._model.model().startMovingSource(o,n)))}),C.movedLineTool.subscribe(null,function(e){var t,o;i._model&&(t=i._model.model(),e.model!==t&&t.sourceBeingMoved()&&t.sourceBeingMoved().linkKey===e.linkKey&&(o={index:r(t,e.model,e.point.timeStamp),price:e.point.price},i._model.model().moveSource(o)))}),C.finishedMovingLineTool.subscribe(null,function(e){var t,o;i._model&&(t=i._model.model(),e.model!==t&&(o=t.sourceBeingMoved())&&(i._model.model().endMovingSource(!!e.finalState),e.finalState&&o.restoreExternalPoints(e.finalState)))}),C.startedChangingLineTool.subscribe(null,function(e){var t,o,n;i._model&&(t=i._model.model(),e.model!==t&&(o=t.dataSources().filter(function(t){return t.linkKey===e.linkKey})[0])&&(n={index:r(t,e.model,e.point.timeStamp),price:e.point.price},i._model.model().startChangingLinetool(o,n,e.pointIndex,e.envState)))}),C.changedLineTool.subscribe(null,function(e){var t,o;i._model&&(t=i._model.model(),e.model!==t&&t.lineBeingEdited()&&t.lineBeingEdited().linkKey===e.linkKey&&(o={index:r(t,e.model,e.point.timeStamp),price:e.point.price},i._model.model().changeLinePoint(o,e.envState)))}),C.finishedChangingLineTool.subscribe(null,function(e){var t,o;i._model&&(t=i._model.model(),e.model!==t&&(o=t.dataSources().filter(function(t){return t.linkKey===e.linkKey})[0],t.lineBeingEdited()&&i._model.model().endChangingLinetool(!!e.finalState),o&&e.finalState&&o.restoreExternalPoints(e.finalState)))}),C.removedLineTool.subscribe(null,function(e){var t,o;i._model&&(t=i._model.model(),e.model!==t&&(o=t.dataSources().filter(function(t){return t.linkKey===e.linkKey})[0])&&i._model.model().removeSource(o))}),C.finishedLineTool.subscribe(null,function(e){var t;i._model&&(t=i._model.model(),e.model!==t&&t.dataSources().filter(function(t){return t.linkKey===e.linkKey})[0]&&i._model.model().finishLineTool())}),C.changedLineStyle.subscribe(null,function(e){var t,o;i._model&&(t=i._model.model(),e.model!==t&&(o=t.dataSources().filter(function(t){return t.linkKey===e.linkKey})[0])&&(o.properties().merge(e.state),o.propertiesChanged()))}),C.restoredLineToolState.subscribe(null,function(e){var t,o,n;i._model&&(t=i._model.model(),e.model!==t&&(o=t.dataSources().filter(function(t){return t.linkKey===e.linkKey})[0])&&(n=$.extend({},e.state),n.indexes=n.points.map(function(i){return{index:r(t,e.model,i.time_t),price:i.price}}),t.restoreLineToolState(o,n)))}),C.restoredLineTool.subscribe(null,function(e){if(i._model){var t=i._model.model();e.model!==t&&t.restoreSource(e.state.restorePane,e.state.paneIndex,e.state.paneState,e.state.sourceState,e.state.priceScaleName)}}),C.copiedLineTool.subscribe(null,function(e){var t,o,n,s,a,l;if(i._model&&(t=i._model.model(),e.model!==t)){if(o=t.paneForSource(t.mainSeries()),n=e.points.map(function(i){return{index:r(t,e.model,i.timeStamp),price:i.price}}),s=n[0],a=t.createLineTool(o,s,e.linetool,null,e.linkKey),
t.lineBeingCreated())for(l=1;l<n.length;l++)l!==n.length-1||"LineToolBrush"!==e.linetool&&"LineToolGhostFeed"!==e.linetool||t.finishLineTool(!0),t.coninueCreatingLine(n[l],{},l<n.length-1,!0);a.properties().interval.setValue(e.state.interval),a.properties().merge(e.state),a.restoreData&&a.restoreData(e),a.propertiesChanged(),a&&e.finalState&&(a.calcIsActualSymbol(),a.restoreExternalPoints(e.finalState))}})),s=this._options.containsData,a=this._options.onWidget,l=this._options.onCmeWidget,l&&ie.logWarn("[ChartWidget] 'onCmeWidget' option is depricated"),c=this._options.widgetCustomer,h=this._options.timezone,u=this._options.hideSymbolSearch,d=this._options.defSymbol,p=L.isValid(this._options.defInterval)?this._options.defInterval:void 0,_=parseInt(this._options.defStyle),f=A.isValidStyle(_)?_:void 0,m=this._options.defExtendedHours,g=this._options.defTimeframe,this._chartWidgetCollection=this._options.chartWidgetCollection||null,this._setContent(o),this._readOnly=n,this._containsData=s,this._showChartEvents=!s&&this._options.chartEventsEnabled,this._defSymbol=d,this._defInterval=p,this._defTimeframe=g,this._defStyle=f,this._onWidget=!!a,this._onWidget&&(l?this._widgetCustomer="cme":c&&(this._widgetCustomer=c)),this.controlBarHeight=33,this._hideSymbolSearch=u,this._paneWidgets=[],this._paneSeparators=[],this._timeAxisWidget=null,this._frameTime=30,this._model=null,this._metaInfo={},this._drawRafId=0,y=this._contentSeriesProperties(),y&&(d=y.symbol,p=y.interval),void 0===this._options.useUserChartPreferences&&(this._options.useUserChartPreferences=!0),this._properties=new W("chartproperties",void 0,void 0,this._options.useUserChartPreferences),v="chartproperties.mainSeriesProperties",b=this._options.useUserChartPreferences?te.defaults(v):te.factoryDefaults(v),this._properties.mainSeriesProperties.merge(b),p=p||b.interval||"D",f=f||b.style||D(L.isRange(p)),this._properties.mainSeriesProperties.merge({visible:!0,symbol:d||DEFAULT_SYMBOL,shortName:"",timeframe:"",onWidget:this._onWidget,interval:p,style:f,extendedHours:m,lineStyle:{styleType:te.factoryDefaults("chartproperties.mainSeriesProperties.lineStyle.styleType")}}),this._containsData&&this._properties.mainSeriesProperties.merge({showCountdown:!1}),h&&U(h)&&this._properties.timezone.setValue(h),this._tagsChanged=new t,this._modelCreated=new t,this._disconnected=new t,this._reconnectBailout=new t,this._connected=new t,this._redrawPanes=new t,this._onScroll=new t,this.chartWidgetInitialized=new t,this._chartSession=new q(ChartApiInstance),this._metaInfoRepository=new ne(this._chartSession),this.lhsPriceAxisWidthChanged=new t,this.rhsPriceAxisWidthChanged=new t,this._timingsMeter=null,this._isActive=this._options.isActive,this._options.body.subscribe(function(e){i._setElement(e)},{callWithLast:!0}),S=function(){i.resize()},this._options.width.subscribe(S),this._options.height.subscribe(S),this._options.visible.subscribe(this._updateTimingsMeterState.bind(this))}function n(e){return{UTC:"Etc/UTC",EST:"America/New_York",CST:"America/Chicago",PST:"America/Los_Angeles"
}[e]||"exchange"}var r,s,a,l,c,h,u,d,p,_,f,m,g,y,v,b,S,w,T,P,x,C,L,I,M,k,A,E,D,V,O,R,B,z,N,F,W,H,j,U,q,Y,G,K,Z,X,J,Q,ee,te,ie,oe,ne,re,se,ae;i(11),r=i(7).assert,s=i(616),a=i(759),l=i(761),c=i(124).PriceAxisWidget,h=i(767).TimeAxisWidget,u=i(85).BarsMarksContainer,d=i(65).Series,p=i(4),_=i(106).isFeatureEnabled,f=i(183).ActionBinder,m=i(131).showEditObjectDialog,g=i(326).showGoToDateDialog,y=i(242).CustomEvent,v=i(25).Study,b=i(123),S=i(0).LineDataSource,w=i(79).isLineToolName,T=i(40),P=T.Action,x=T.ActionSeparator,C=i(33),L=i(21).Interval,I=i(62),M=I.setLastUsedResolution,k=I.getDefaultResolution,A=i(48),E=A.isRangeStyle,D=A.getDefaultStyle,V=i(769).ControlBarNavigation,O=i(778).showSymbolInfoDialog,R=i(16),B=i(64).linking,z=i(334),N=i(125).showDialog,F=i(125).activateKeyPressHandler,W=i(2).DefaultProperty,H=i(202),j=H.availableTimezones,U=H.timezoneIsAvailable,q=i(282).ChartSession,Y=i(28),G=i(303).Spinner,K=i(32).trackEvent,Z=i(37).guid,X=i(72).Size,J=i(83).createConfirmDialog,Q=i(779).MarketStatusIndicator,ee=i(781).DataModeIndicator,te=i(133),ie=i(5).getLogger("ChartWidget",{color:"#606"}),oe=i(36).IS_RTL,ne=i(783).StudyMetaInfoRepository,re=i(109).isMultipleLayout,se=i(784).addPerfMark,ae={addToWatchlistEnabled:!0,sourceSelectionEnabled:!0,propertyPagesEnabled:!0,paneContextMenuEnabled:!0,priceScaleContextMenuEnabled:!0,verticalTouchScroll:!1,seriesControlBarEnabled:!0,goToDateEnabled:!1,marketStatusWidgetEnabled:!0,chartWarningWidgetEnabled:!0,isSymbolAvailable:function(e){return Promise.resolve(!0)},legendWidgetEnabled:!0,chartEventsEnabled:!0,esdEnabled:!1,noMouseWheelScroll:!1},o.prototype._updateCrossHairPositionIfNeeded=function(){var e,t,i,o;this._model&&(e=C.tool.value(),this._model.model().setCurrentTool(e),TradingView.isMobile.any()&&(t=this._maximizedPaneWidget||this._paneWidgets[0],w(e)&&"LineToolBrush"!==e&&!this.selectBarMode().value()?(i=.5*this._model.model().timeScale().width(),o=.5*t._state.defaultPriceScale().height(),this._model.model().setAndSaveCurrentPosition(i,o,t._state),t._updateTooltip(i,o)):t._hideTooltip()),this._model&&TradingView.isMobile.any()&&this._model.model().crossHairSource().updateAllViews())},o.prototype._setElement=function(e){var t,o;this._jqMainDiv&&(this._jqMainDiv.remove(),this._jqParent.empty()),this._controlBarNavigation&&this._controlBarNavigation.destroy(),this._seriesControlWidget&&this._seriesControlWidget.destroy(),t=e.prop("ownerDocument"),this._jqParent=$(t.createElement("div")).addClass("chart-container-border").prependTo(e),this._jqMainDiv=$('<div class="chart-widget"/>',t),this._elTooltipDiv=t.createElement("div"),this._elTooltipDiv.className="tooltip-wrapper",this._jqMainDiv.append(this._elTooltipDiv),this._elMainTable=t.createElement("table"),this._elMainTable.className="chart-markup-table",this._elMainTable.setAttribute("cellpading","0"),this._elMainTable.setAttribute("cellspacing","0"),this._jqMainDiv.append(this._elMainTable),o=this._options.seriesControlBarEnabled&&(!p.enabled("lean_chart_load")||!this._chartControlsBar),
o&&(this._chartControlsBar=t.createElement("div"),this._chartControlsBar.className="chart-controls-bar",this._chartControlsBar.classList.toggle("chart-controls-bar--inactive",!this._isActive),this._jqParent.append(this._chartControlsBar),i.e(10).then(function(e){var t=i(937).BottomToolbarRenderer;this._isDestroyed||(this._seriesControlWidget=new t(this._chartControlsBar,this,this._chartWidgetCollection,ChartApiInstance,this._options,this._options.seriesControlBar))}.bind(this).bind(null,i)).catch(i.oe)),(this._options.controlBar||p.enabled("control_bar"))&&(this._controlBarNavigation=new V(this,this._jqMainDiv[0])),this._containsData||this.createIndicatorImage(),this._options.noMouseWheelScroll||this._jqMainDiv.mousewheel(this._onMousewheel.bind(this)),this.resize(),this.withModel(this,function(){this._jqParent.append(this._jqMainDiv),this._jqMainDiv.on("mousedown",this._requestActive.bind(this)),this._jqMainDiv.on("touchstart",this._requestActive.bind(this))}),this._inited&&(this._timeAxisWidget=null,this._paneWidgets.length=0,this._update(new R(R.FULL_UPDATE)))},o.prototype._requestActive=function(){this._chartWidgetCollection&&this._chartWidgetCollection.activeChartWidget.setValue(this)},o.prototype._onMousewheel=function(e,t,i,o){var n,r,s,a,l;if((TradingView.onWidget()||!parent||parent===window||!parent.IS_DEMO_PAGE)&&this.model()&&!this.noScroll&&!this.model().timeScale().isEmpty())return n=e.pageX-5,r=this._paneWidgets[0].lhsPriceAxisWidget.size.w,s=this._timeAxisWidget.size.w,r&&(n=Math.max(0,n-r)),n=Math.min(n,s),a=p.enabled("right_bar_stays_on_scroll")?1:2*(n/s-.5),l=Math.min(1,Math.abs(o)),o>0?this.model().zoomIn(a,l):o<0&&this.model().zoomOut(a,l),i&&this.model().scrollChart(-80*i),!1},o.prototype.getStudyScriptingPkgVers=function(e){return this._metaInfoRepository.getStudyScriptingPkgVers()},o.prototype.setTimezone=function(e){e&&U(e)?this._properties.timezone.setValue(e):console.warn("Incorrect timezone: "+JSON.stringify(e))},o.prototype.refreshMarks=function(){this.model().barsMarksSources().forEach(function(e){e.refreshData()})},o.prototype.clearMarks=function(){this.model().barsMarksSources().forEach(function(e){e.clearMarks()})},o.prototype._init=function(){var e,t,i=this;this.model()&&this.model().mainSeries().clearData(),this.initColors(),this._makeDefaultGui(),e=function(){i._checkObsoleteTimezone(),i._chartSession&&i._chartSession.connected()&&this._model.restart(),this._content&&(this.initColors(),this._updateGui(),this.update());var e=i._model.mainSeries();e.marketStatus.subscribe(function(t){i.indicatorImage&&i._updateDataAndMarketStatus(t,e.status(),e.quoteData.update_mode_seconds)},{callWithLast:!0}),this._resizeHandler=function(){this._adjustSize(),this._model&&this._model.mainSeries().requestMoreData(),this.paint(),this.resizeSeriesControlUI(),this.checkCompactMode(),this.resizeIndicator()}.bind(this),this._resizeHandler(),this._jqParent.append(this._jqMainDiv),this._spinner&&(this._spinner.stop(),delete this._spinner),
_("chrome_canvas_fix")&&navigator.userAgent.match(/windows.+chrome/i)&&$(window).on("visibilitychange:chart_"+this._guid,function(e,t){if(t){for(var o=0;o<i._paneWidgets.length;o++)i._paneWidgets[o].hardResetCanvas();i._timeaxiswidget&&i._timeaxiswidget.hardResetCanvas(),i.paint(new R(R.LIGHT_UPDATE))}}),$(window).on("keydown:chart_"+this._guid,function(e){27===e.which&&e.preventDefault()}),this._initBarsMarksSources(),this._activateSymbolSearchHotkeys(),this.model().timeScale().onScroll().subscribe(this,function(){this._onScroll.fire()}),this._inited=!0}.bind(this),t=this._makeDefaultModel(),void 0===t?e():t.then(e)},o.prototype._activateSymbolSearchHotkeys=function(){this.readOnly()||this._hideSymbolSearch||F()},o.prototype._checkObsoleteTimezone=function(){var e=this._properties.timezone.value();U(e)||this._properties.timezone.setValue(n(e))},o.prototype._initBarsMarksSources=function(){var e=this;this.withModel(this,function(){this.model().barsMarksSources().forEach(function(t){t.onNeedRepaint.subscribe(e,e.paint)})})},o.prototype.initESDTimelineWidget=function(){new ESDTimelineWidget(this)},o.prototype.initColors=function(){this._properties.paneProperties.background.listeners().subscribe(this,o.prototype.setBackgroundColor),this._properties.paneProperties.vertGridProperties.color.listeners().subscribe(this,o.prototype.redrawPanes),this._properties.paneProperties.horzGridProperties.color.listeners().subscribe(this,o.prototype.redrawPanes),this._properties.scalesProperties.lineColor.listeners().subscribe(this,o.prototype.setScaleLineColor),this._properties.scalesProperties.textColor.listeners().subscribe(this,o.prototype.setScaleTextColor)},o.prototype.paneWidgets=function(){return this._paneWidgets},o.prototype.paneByCanvas=function(e){for(var t=0;t<this._paneWidgets.length;t++)if(this._paneWidgets[t].canvas===e||this._paneWidgets[t].top_canvas===e)return this._paneWidgets[t];return null},o.prototype.paneByState=function(e){for(var t=0;t<this._paneWidgets.length;t++)if(this._paneWidgets[t]._state===e)return this._paneWidgets[t];return null},o.prototype.priceAxisByCanvas=function(e){var t,i,o;for(t=0;t<this._paneWidgets.length;t++)if(i=this._paneWidgets[t],o=i.priceAxisByCanvas(e))return o;return null},o.prototype.timeAxisByCanvas=function(e){return e===this._timeAxisWidget.canvas||e===this._timeAxisWidget.top_canvas?this._timeAxisWidget:null},o.prototype.properties=function(){return this._properties},o.prototype.emulateCriticalError=function(){this._chartSession.removeSeries("-1",null)},o.prototype.readOnly=function(){return this._readOnly},o.prototype.onDisconnected=function(){return this._disconnected},o.prototype.onReconnectBailout=function(){return this._reconnectBailout},o.prototype.onConnected=function(){return this._connected},o.prototype.onRedrawPanes=function(){return this._redrawPanes},o.prototype.onScroll=function(){return this._onScroll},o.prototype.modelCreated=function(){return this._modelCreated},o.prototype.setResolution=function(e){var t,i
;if(!this._model)return void this._properties.mainSeriesProperties.merge({interval:e});t=this._model.mainSeries().properties(),i=window.t("Change Resolution"),this._model.setResolutionProperty(t.interval,e,this,i)},o.prototype.getResolution=function(){return this._model?this._model.mainSeries().properties().interval.value():this._properties.mainSeriesProperties.interval.value()},o.prototype._addSymbol=function(e,t){var i=this.model(),o=i.studiesMetaData(),n="study_Overlay@tv-basicstudies",r=p.enabled("use_overrides_for_overlay")&&TradingView.defaultProperties[n]&&TradingView.defaultProperties[n].style,s=r||(i.mainSeries().properties().style.value()===d.STYLE_CANDLES?d.STYLE_BARS:d.STYLE_CANDLES),a={inputs:{symbol:e},style:s},l=o.filter(function(e){return"Overlay@tv-basicstudies"===e.id})[0];i.insertStudy(l,a,t)},o.prototype.addSymbol=function(e,t){var i=Array.prototype.slice.call(arguments),o=function(){this._addSymbol.apply(this,i)}.bind(this);this._options.isSymbolAvailable(e).then(function(e){e&&o()})},o.prototype.updateActions=function(){function e(){var e,t,i=studyTemplates.plainList("custom"),o=studyTemplates.plainList("default");l.applyStudyTemplate.subActions||(l.applyStudyTemplate.subActions=[]),e=l.applyStudyTemplate.subActions,e.splice(0,e.length),t=new P({text:$.t("Save Indicator Template As..."),statName:"Save"}),t.callbacks().subscribe(studyTemplates,studyTemplates.showSaveAsDialog),e.push(t,new x),i.length||o.length?(i.length&&($.each(i,function(t,i){function o(e){return function(){return studyTemplates.deleteStudyTemplate(e),this._parentMenu._parentMenuItem._parentMenu.destroy(),!1}}var n=new P({text:i,statName:"SetStudyTemplate"});n.callbacks().subscribe(studyTemplates,function(){this.applyTemplate(i)}),n.deleteButton={action:o(n.text)},e.push(n)}),o.length&&e.push(new x)),$.each(o,function(t,i){var o=new P({text:i,statName:"SetStudyTemplateFromDefaults"});o.callbacks().subscribe(studyTemplates,function(){this.applyTemplate(i)}),e.push(o)})):e.push(new P({text:window.t("No study templates saved"),enabled:!1}))}var t,i,o,n,r,s,a,l=this.actions(),c=this._model.dataSources(),h=!1,u=!1;for(t=0,i=c.length;t<i;t++)o=c[t],TradingView.isInherited(o.constructor,S)&&o.isUserDeletable()&&(h=!0),TradingView.isInherited(o.constructor,v)&&o.removeByRemoveAllStudies()&&(u=!0),TradingView.isInherited(o.constructor,b)&&(u=!0);this._readOnly||(l.paneRemoveAllStudies&&l.paneRemoveAllStudies.setEnabled(u),l.paneRemoveAllDrawingTools&&l.paneRemoveAllDrawingTools.setEnabled(h),l.paneRemoveAllStudiesDrawingTools&&l.paneRemoveAllStudiesDrawingTools.setEnabled(u||h)),window.studyTemplates&&(e(),studyTemplates.refreshStudyTemplateList(e)),n=this,r=[],s=j,a=function(e){return e.id===n.model().model().properties().timezone.value()},s.forEach(function(e){if(!e.separator){var t=new P({text:e.title,checkable:!0,checked:a(e),statName:"SetTimeZone"});t.callbacks().subscribe(this,function(){n.model().setProperty(n.model().model().properties().timezone,e.id,"Changed Time Zone")}),r.push(t)}},this),l.applyTimeZone.subActions=r,
l.addToWatchlist&&(l.addToWatchlist.text=window.t("Add {0} to Watchlist").format(this.getSymbol(!0))),l.addToTextNotes&&(l.addToTextNotes.text=window.t("Add Text Note for {0}").format(this.getSymbol(!0))),this.updateActionForIntradayOnly(l.sessionBreaks)},o.prototype.actions=function(){return this._actions||this._setActions(),this._actions},o.prototype._setActions=function(){var e,t,i,n,r,s,a,l,c,h,u,d,m,y,v,b,S,w,T,L,I,k,A,E,D,V,F,W,H,j,U,q,$,Y,G,Z,X,J,Q,ee,te,ie,oe,ne,re,se,ae,le,ce,he,ue,de,pe,_e,fe=this,me=[];if(!this._readOnly){for(me=[new P({text:window.t("Eraser"),callbackContext:"eraser",statName:"Eraser"}),new x,new P({text:window.t("Trend Line"),callbackContext:"LineToolTrendLine",statName:"LineToolTrendLine"}),new P({text:window.t("Horizontal Line"),callbackContext:"LineToolHorzLine",statName:"LineToolHorzLine"}),new P({text:window.t("Vertical Line"),callbackContext:"LineToolVertLine",statName:"LineToolVertLine"}),new P({text:window.t("Arrow"),callbackContext:"LineToolArrow",statName:"LineToolArrow"}),new P({text:window.t("Ray"),callbackContext:"LineToolRay",statName:"LineToolRay"}),new P({text:window.t("Extended"),callbackContext:"LineToolExtended",statName:"LineToolExtended"}),new P({text:window.t("Parallel Channel"),callbackContext:"LineToolParallelChannel",statName:"LineToolParallelChannel"}),new x,new P({text:window.t("Pitchfork"),callbackContext:"LineToolPitchfork",statName:"LineToolPitchfork"}),new P({text:window.t("Schiff Pitchfork"),callbackContext:"LineToolSchiffPitchfork",statName:"LineToolSchiffPitchfork"}),new P({text:window.t("Pitchfan"),callbackContext:"LineToolPitchfan",statName:"LineToolPitchfan"}),new P({text:window.t("Gann Square"),callbackContext:"LineToolGannSquare",statName:"LineToolGannSquare"}),new P({text:window.t("Gann Fan"),callbackContext:"LineToolGannFan",statName:"LineToolGannFan"}),new P({text:window.t("Fib Retracement"),callbackContext:"LineToolFibRetracement",statName:"LineToolFibRetracement"}),new P({text:window.t("Trend-Based Fib Extension"),callbackContext:"LineToolTrendBasedFibExtension",statName:"LineToolTrendBasedFibExtension"}),new P({text:window.t("Fib Speed Resistance Fan"),callbackContext:"LineToolFibSpeedResistanceFan",statName:"LineToolFibSpeedResistanceFan"}),new P({text:window.t("Fib Time Zone"),callbackContext:"LineToolFibTimeZone",statName:"LineToolFibTimeZone"}),new P({text:window.t("Circle Lines"),callbackContext:"LineToolCircleLines",statName:"LineToolCircleLines"}),new P({text:window.t("Fib Circles"),callbackContext:"LineToolFibCircles",statName:"LineToolFibCircles"}),new P({text:window.t("Fib Speed Resistance Arcs"),callbackContext:"LineToolFibSpeedResistanceArcs",statName:"LineToolFibSpeedResistanceArcs"}),new x,new P({text:window.t("Rectangle"),callbackContext:"LineToolRectangle",statName:"LineToolRectangle"}),new P({text:window.t("Ellipse"),callbackContext:"LineToolEllipse",statName:"LineToolEllipse"}),new P({text:window.t("Triangle"),callbackContext:"LineToolTriangle",statName:"LineToolTriangle"}),new P({text:window.t("Polyline"),
callbackContext:"LineToolPolyline",statName:"LineToolPolyline"}),new P({text:window.t("Arc"),callbackContext:"LineToolArc",statName:"LineToolArc"}),new x,new P({text:window.t("Text",{context:"tool"}),callbackContext:"LineToolText",statName:"LineToolText"}),new P({text:window.t("Anchored Text"),callbackContext:"LineToolTextAbsolute",statName:"LineToolTextAbsolute"}),new P({text:window.t("Balloon"),callbackContext:"LineToolBalloon",statName:"LineToolBalloon"}),new P({text:window.t("Price Label"),callbackContext:"LineToolPriceLabel",statName:"LineToolPriceLabel"}),new x,new P({text:window.t("Elliott Wave Subminuette"),callbackContext:"LineToolElliottSubminuette",statName:"LineToolElliottSubminuette"}),new P({text:window.t("Elliott Wave Minor"),callbackContext:"LineToolElliottMinor",statName:"LineToolElliottMinor"}),new P({text:window.t("Elliott Wave Circle"),callbackContext:"LineToolElliottCircle",statName:"LineToolElliottCircle"}),new P({text:window.t("Elliott Minor Retracement"),callbackContext:"LineToolElliottMinorRetr",statName:"LineToolElliottMinorRetr"}),new P({text:window.t("Elliott Major Retracement"),callbackContext:"LineToolElliottMajorRetr",statName:"LineToolElliottMajorRetr"}),new x,new P({text:window.t("Brush"),callbackContext:"LineToolBrush",statName:"LineToolBrush"}),new x,new P({text:window.t("Forecast"),callbackContext:"LineToolPrediction",statName:"LineToolPrediction"})],fe=this,i=function(e){C.tool.setValue(e.callbackContext())},n=0;n<me.length;n++)me[n].callbacks().subscribe(null,i);e=new P({text:window.t("Scales Properties..."),statName:"ScalesProperties"}),t=new P({text:window.t("Timezone/Sessions Properties..."),statName:"TimezoneSessionsProperties"})}r=new P({text:window.t("Reset Chart"),shortcut:"Alt+R",statName:"ResetChart"}),r.callbacks().subscribe(this,this.GUIResetScales),s=new P({text:window.t("Undo"),shortcut:"ctrl+z"}),s.callbacks().subscribe(null,function(){K("GUI","Undo"),fe._model.undoHistory.undo()}),s.disable(),a=new P({text:window.t("Redo"),shortcut:"ctrl+y"}),a.callbacks().subscribe(null,function(){K("GUI","Redo"),fe._model.undoHistory.redo()}),a.disable(),fe.withModel(null,function(){fe._model.undoHistory.undoStack().onChange().subscribe(fe,fe.updateUndoRedo),fe._model.undoHistory.redoStack().onChange().subscribe(fe,fe.updateUndoRedo)}),l=new P({text:window.t("Loading")}),c=[l],h=new P({text:window.t("Color Theme"),subActions:c,statName:"ColorTheme"}),u=new P({text:window.t("TimeZone"),statName:"TimeZone"}),d=new P({text:window.t("Change Symbol..."),shortcut:window.t("Any Symbol"),doNotBindShortcut:!0,statName:"ChangeSymbol"}),TVSettings.setValue("symboledit.dialog_last_entry",""),d.callbacks().subscribe(this,function(){N({callback:this.setSymbol.bind(this),ownerDocument:this._jqParent.prop("ownerDocument")})}),m=new P({text:window.t("Change Interval..."),shortcut:window.t("Any Number"),doNotBindShortcut:!0,statName:"ChangeInterval"}),m.callbacks().subscribe(this,function(){new z({callback:function(e){M(e),B.interval.setValue(e)},ownerDocument:this._jqParent.prop("ownerDocument")
}).show()}),TradingView.onWidget()||(this._options.addToWatchlistEnabled&&(y=new P({text:window.t("Add To Watchlist"),shortcut:"Alt+W",statName:"AddToWatchlist"}),y.callbacks().subscribe(this,function(){var e,t,i;if(window.widgetbar){for(e=window.widgetbar.setPage("base"),i=0;i<e.widgets.length;i++)if("watchlist"===e.widgets[i].type){t=e.widgets[i].widgetObject;break}if(!t)return;t.addHighlight(this.getSymbol())}})),_("text_notes")&&(v=new P({text:window.t("Add To Text Notes"),shortcut:"Alt+N",statName:"AddToTextNotes"}),v.callbacks().subscribe(this,function(){var e=this;runOrSignIn(function(){TradingView.bottomWidgetBar&&(TradingView.bottomWidgetBar.toggleWidget("text_notes",!0),TradingView.bottomWidgetBar._widgets.text_notes.addNote(null,e.getSymbol(!0),e.getSymbol()))},{source:"Add text note in chart context menu"})}))),b=new P({text:window.t("Insert Study Template"),statName:"InserStudyTemplate"}),S=new P({shortcut:"Ctrl+Alt+Q",text:window.t("Reset Scale"),statName:"ResetScale"}),S.callbacks().subscribe(null,function(e){fe.model().resetTimeScale()}),w=new P({text:window.t("Insert Drawing Tool"),subActions:me,statName:"InsertDravingTool"}),T=new P({text:window.t("Remove All Indicators"),statName:"RemoveAllIndicators"}),L=new P({text:window.t("Remove All Drawing Tools"),statName:"RemoveAllDrawingTools"}),I=new P({text:window.t("All Indicators And Drawing Tools"),statName:"RemoveAllIndicatorsAndDrawingTools"}),k=new P({text:window.t("Insert Indicator..."),shortcut:"/",statName:"InsertIndicator"}),A=new P({text:window.t("Script Editor..."),statName:"ScriptEditor"}),E=new P({text:window.t("Compare or Add Symbol..."),statName:"CompareOrAddSymbol"}),D=new P({text:window.t("Compare..."),statName:"Compare"}),V=new P({text:window.t("Objects Tree..."),statName:"ObjectsTree"}),F=new P({text:window.t("Properties..."),statName:"ChartProperties",callback:function(e,t){fe.showChartProperties()}}),W=new P({text:window.t("Lock/Unlock"),statName:"ToggleLockSelectedObject"}),W.callbacks().subscribe(this,o.prototype.toggleLockSelectedObject),H=new P({text:window.t("Hide"),statName:"HideSelectedObject"}),H.callbacks().subscribe(this,o.prototype.hideSelectedObject),p.enabled("property_pages")&&(j=new P({text:window.t("Format..."),statName:"EditSelectedObject"}),j.callbacks().subscribe(this,o.prototype.editSelectedObject)),U=new P({text:window.t("Source Code..."),statName:"OpenSelectedObjectSource"}),U.callbacks().subscribe(this,this.openSelectedObjectSource),q=new P({text:window.t("Left Axis"),checkable:!0,statName:"ToggleLeftAxis"}),q.binder=new f(q,this._properties.scalesProperties.showLeftScale,this.model(),window.t("Show Left Scale")),$=new P({text:window.t("Right Axis"),checkable:!0,statName:"ToggleRightAxis"}),$.binder=new f($,this._properties.scalesProperties.showRightScale,this.model(),window.t("Show Right Scale")),this._properties.scalesProperties.showLeftScale.listeners().subscribe(this,o.prototype._updateScalesActions),
this._properties.scalesProperties.showRightScale.listeners().subscribe(this,o.prototype._updateScalesActions),Y=new P({text:window.t("Scale Price Chart Only"),checkable:!0,statName:"ScalePriceChartOnly"}),Y.binder=new f(Y,this._properties.scalesProperties.scaleSeriesOnly,this.model(),window.t("Scale Price Chart Only")),G=this.model().model(),this._properties.scalesProperties.scaleSeriesOnly.listeners().subscribe(null,function(){G.recalculateAllPanes(),G.invalidate(new R(R.FULL_UPDATE))}),Z=new P({text:window.t("Drawings Toolbar"),checkable:!0,statName:"ToggleDrawingToolbar"}),X=this._options.isDrawingToolbarVisible,X&&(X.subscribe(function(e){Z.setChecked(e)},{callWithLast:!0}),Z.callbacks().subscribe(null,function(){X.setValue(!X.value())})),J=new P({text:window.t("Magnet Mode"),checkable:!0,statName:"ToggleMagnetMode"}),J.binder=new f(J,C.properties().magnet,this.model(),"Magnet"),Q=new P({text:window.t("Stay in Drawing Mode"),checkable:!0,statName:"ToggleStayInDrawingMode"}),Q.binder=new f(Q,C.properties().stayInDrawingMode,this.model(),window.t("Stay In Drawing Mode")),ee=new P({text:window.t("Sync drawings to all charts"),checkable:!0,statName:"ToggleSyncDrawings"}),ee.binder=new f(ee,C.properties().drawOnAllCharts,this.model(),"SyncDrawings"),te=new P({text:window.t("Lock All Drawing Tools"),checkable:!0,statName:"ToggleLockDrawings"}),te.binder=new f(te,C.lockDrawings(),this.model(),window.t("Lock drawings"),function(e){e||this.binder.setValue(!this.binder.value()),C.lockDrawings().setValue(this.binder.value())}.bind(te)),ie=new P({text:window.t("Hide All Drawing Tools"),checkable:!0,statName:"ToggleHideAllDrawingTools"}),ie.binder=new f(ie,C.hideAllDrawings(),this.model(),window.t("Hide All Drawing Tools"),function(e){e||this.binder.setValue(!this.binder.value()),C.hideAllDrawings().setValue(this.binder.value())}.bind(ie)),oe=new P({text:window.t("Hide Marks On Bars"),checkable:!0,statName:"ToggleHideMarksOnBars"}),oe.binder=new f(oe,C.hideMarksOnBars(),this.model(),window.t("Hide Marks On Bars"),function(e){e||this.binder.setValue(!this.binder.value()),C.hideMarksOnBars().setValue(this.binder.value())}.bind(oe)),ne=new P({text:window.t("Extended Hours"),checkable:!0,statName:"ToggleExtendedHours"}),ne.binder=new f(ne,this.model().mainSeries().properties().extendedHours,this.model(),window.t("Change Extended Hours")),re=new P({text:window.t("Symbol Last Value"),checkable:!0,checked:!1,statName:"ToggleSymbolLastValue"}),re.binder=new f(re,this.properties().scalesProperties.showSeriesLastValue,this.model(),window.t("Show Symbol Last Value")),se=new P({text:window.t("Symbol Labels"),checkable:!0,checked:!1,statName:"ToggleSymbolLabels"}),se.binding=new f(se,this.properties().scalesProperties.showSymbolLabels,this.model(),"Undo Show Symbol Labels"),ae=new P({text:window.t("Indicator Last Value"),checkable:!0,checked:!1,statName:"ToggleStudyLastValue"}),ae.binder=new f(ae,this.properties().scalesProperties.showStudyLastValue,this.model(),window.t("Show Indicator Last Value")),le=new P({
text:window.t("Indicator Labels"),checkable:!0,checked:!1,statName:"ToggleIndicatorsLabels"}),le.binding=new f(le,this.properties().scalesProperties.showStudyPlotLabels,this.model(),"Undo Show Indicator Labels"),ce=new P({text:window.t("Countdown"),checkable:!0,checked:!1,statName:"ToggleCountdown"}),ce.binder=new f(ce,this.model().mainSeries().properties().showCountdown,this.model(),window.t("Show Countdown")),he=null,this._options.goToDateEnabled&&(he=new P({text:window.t("Go to Date..."),shortcut:"Alt+G",statName:"GoToDate"}),he.callbacks().subscribe(null,function(){var e=fe._chartWidgetCollection.activeChartWidget.value();g(e.model())})),ue=new P({text:window.t("Symbol Info..."),checkable:!1,statName:"SymbolInfo"}),ue.callbacks().subscribe(null,function(){var e=fe.model().mainSeries().symbol(),t=fe.model().mainSeries().symbolInfo();O(e,{symbolInfo:t})}),this._actions={chartProperties:F,timeScaleReset:S,chartReset:r,compareOrAdd:E,compare:D,paneObjectTree:V,insertIndicator:k,insertDrawingTool:w,applyColorTheme:h,applyStudyTemplate:b,symbolSearch:d,showSymbolInfoDialog:ue,changeInterval:m,seriesHide:H,studyHide:H,lineToggleLock:W,lineHide:H,showLeftAxis:q,showRightAxis:$,scaleSeriesOnly:Y,drawingToolbarAction:Z,magnetAction:J,stayInDrawingModeAction:Q,syncModeAction:ee,lockDrawingsAction:te,hideAllDrawingsAction:ie,hideAllMarks:oe,applyTimeZone:u,extendedHours:ne,showCountdown:ce,showSeriesLastValue:re,showSymbolLabelsAction:se,showStudyLastValue:ae,showStudyPlotNamesAction:le,undo:s,redo:a,viewSourceCode:U},e&&(this._actions.scalesProperties=e),t&&(this._actions.tmzProperties=t),y&&(this._actions.addToWatchlist=y),!TradingView.onWidget()&&p.enabled("text_notes")&&_("text_notes")&&(this._actions.addToTextNotes=v),null!==he&&(this._actions.gotoDate=he),p.enabled("charting_library_base")||(this._actions.scriptEditor=A),this.createSessionBreaksActions(),this.readOnly()||(de=new P({text:window.t("Remove"),shortcut:"Del",statName:"RemoveSelectedObject"}),de.callbacks().subscribe(this,function(){var e;this._chartWidgetCollection&&(e=this._chartWidgetCollection.activeChartWidget.value()),e||(e=this),e.removeSelectedSource()}),pe=new P({text:window.t("Stop syncing drawing"),statName:"StopSyncingDrawing"}),pe.callbacks().subscribe(this,function(){var e;this._chartWidgetCollection&&(e=this._chartWidgetCollection.activeChartWidget.value()),e||(e=this),e.unlinkSelectedLine()}),_e=new P({text:window.t("Sync drawing to all charts"),statName:"SyncDrawingToAllCharts"}),_e.callbacks().subscribe(this,function(){var e;this._chartWidgetCollection&&(e=this._chartWidgetCollection.activeChartWidget.value()),e||(e=this),e.copyLineToOtherCharts()}),this._actions.insertDrawingTool=w,this._actions.paneRemoveAllStudies=T,this._actions.paneRemoveAllDrawingTools=L,this._actions.paneRemoveAllStudiesDrawingTools=I,this._actions.seriesRemove=de,this._actions.studyRemove=de,this._actions.lineRemove=de,this._actions.lineUnlink=pe,this._actions.lineCopyToCharts=_e,p.enabled("property_pages")&&(this._actions.format=j),
this._actions.lockDrawingsAction=te,this._actions.hideAllDrawingsAction=ie,this._actions.hideAllMarks=oe,this._actions.paneRemoveAllStudies.callbacks().subscribe(this,o.prototype.removeAllStudies),this._actions.paneRemoveAllDrawingTools.callbacks().subscribe(this,o.prototype.removeAllDrawingTools),this._actions.paneRemoveAllStudiesDrawingTools.callbacks().subscribe(this,o.prototype.removeAllStudiesDrawingTools)),this._actions.paneObjectTree.callbacks().subscribe(this,o.prototype.showObjectsTreeDialog),this._actions.chartProperties.callbacks().subscribe(this,o.prototype.showChartProperties),this._actions.insertIndicator.callbacks().subscribe(this,o.prototype.showIndicators),this._actions.scriptEditor&&this._actions.scriptEditor.callbacks().subscribe(this,o.prototype.showScriptEditor),this._actions.compareOrAdd.callbacks().subscribe(this,o.prototype.showCompareOrAdd),this._actions.compare.callbacks().subscribe(this,o.prototype.showCompareOrAdd),this._actions.scalesProperties&&this._actions.scalesProperties.callbacks().subscribe(this,o.prototype.showScalesProperties),this._actions.tmzProperties&&this._actions.tmzProperties.callbacks().subscribe(this,o.prototype.showTimezoneProperties),this._updateScalesActions()},o.prototype.executeActionById=function(e){if("takeScreenshot"===e)return console.warn('Action "takeScreenshot" is deprecated. Use method "takeScreenshot" instead'),void this._chartWidgetCollection.takeScreenshot();if("lockDrawingsAction"===e&&console.warn('Action "lockDrawingsAction" is deprecated. Use method "lockAllDrawingTools" instead'),"hideAllDrawingsAction"===e&&console.warn('Action "hideAllDrawingsAction" is deprecated. Use method "hideAllDrawingTools" instead'),e in this._actions){var t=this._actions[e];t.checkable&&t.setChecked(!t.checked),this._actions[e].callbacks().fire(t)}else console.warn("Unknown action id: "+e)},o.prototype.getCheckableActionState=function(e){if("lockDrawingsAction"===e)return console.warn('Action "lockDrawingsAction" is deprecated. Use method "lockAllDrawingTools" instead'),null;if("hideAllDrawingsAction"===e)return console.warn('Action "hideAllDrawingsAction" is deprecated. Use method "hideAllDrawingTools" instead'),null;if(e in this._actions){var t=this._actions[e];if(t.checkable)return t.checked;console.warn("Action "+e+" has no state")}else console.warn("Unknown action id: "+e);return null},o.prototype._updateScalesActions=function(){if(this._actions){for(var e=0;e<this._paneWidgets.length;e++)this._paneWidgets[e].updateScalesVisibility();this._timeAxisWidget.updatePriceScalesVisibility()}},o.prototype.removeAllStudies=function(){this._model.removeAllStudies()},o.prototype.removeAllDrawingTools=function(){this._model.removeAllDrawingTools()},o.prototype.removeAllStudiesDrawingTools=function(){this._model.removeAllStudies(),this._model.removeAllDrawingTools()},o.prototype.model=function(){return this._model},o.prototype.defaultSymbol=function(){return this._defSymbol},o.prototype.connect=function(){this._handler=function(e){this._onData(e)}.bind(this),
this._boundOnChartSessionIsConnectedChanged=this._onChartSessionIsConnectedChanged.bind(this),this._chartSession.isConnected().subscribe(this._boundOnChartSessionIsConnectedChanged),this._chartSession.criticalError().subscribe(this,this._onChartSessionCriticalError),this._chartSession.connect(this._handler)},o.prototype.finishInitWithoutConnect=function(){this._chartSession.disable(),this._init(),this.chartWidgetInitialized.fire()},o.prototype.reconnect=function(){this._chartSession.disconnect(),this._chartSession.connect()},o.prototype.update=function(){if(this._model){for(var e=0;e<this._paneWidgets.length;e++)this._paneWidgets[e].update();this._timeAxisWidget.update()}},o.prototype.paint=function(e){e||(e=new R(R.FULL_UPDATE));for(var t=0;t<this._paneWidgets.length;t++)this._paneWidgets[t].paint(e.invalidateForPane(t),!1);this._timeAxisWidget&&this._timeAxisWidget.paint(e.fullInvalidation()),this._redrawPanes.fire()},o.prototype._makeDefaultGui=function(){this._makeChartWidget(),this._makeLoadingScreen(),this._model&&this._makePaneWidgetsAndSeparators(),this._makeTimeAxisWidget(),this._adjustSize(),this._updateScalesActions(),$(this._elMainTable).selectable(!1),this.update(),this.paint()},o.prototype.widget=function(){return this._jqMainDiv},o.prototype.restoreState=function(e,t){this._adjustSize();this._model.restoreState(this._content,t);this._setActions()},o.prototype.redrawPanes=function(e){for(var t=0;t<this._paneWidgets.length;t++)this._paneWidgets[t].paint();this._redrawPanes.fire()},o.prototype.setBackgroundColor=function(e){this.scaleBackgroundColor=e.value();for(var t=0;t<this._paneWidgets.length;t++)this._paneWidgets[t].paint(),this._paneWidgets[t].setCursorForTool();this.update(),this.paint()},o.prototype.setScaleLineColor=function(e){this.scaleLineColor=e.value(),$.each(this._paneSeparators,function(){this.update()}),this.update(),this.paint()},o.prototype.setScaleTextColor=function(e){this.scaleTextColor=e.value(),this.update(),this.paint()},o.prototype.setTimingsMeter=function(e){this._timingsMeter=e,this._updateTimingsMeterState()},o.prototype._updateTimingsMeterState=function(){var e=this._options.visible.value();null!==this._timingsMeter&&(e?this._timingsMeter.startCollect():this._timingsMeter.stopCollect())},o.prototype._update=function(e){var t,i=e?e.fullInvalidation():R.FULL_UPDATE;if(null!==this._timingsMeter&&this._timingsMeter.startDraw(i),i===R.FULL_UPDATE){for(this._model?this._updateGui():this._adjustSize(),this._timeAxisWidget.update(),t=0;t<this._paneWidgets.length;t++)this._paneWidgets[t]._state=this._model.panes()[t],null!==this._paneWidgets[t].statusWidget()&&this._paneWidgets[t].statusWidget().updateLayout();this._dataWindowWidget&&this._dataWindowWidget.fullUpdate()}else if(i===R.LIGHT_UPDATE){for(this._timeAxisWidget.update(),t=0;t<this._paneWidgets.length;t++)null!==this._paneWidgets[t].statusWidget()&&this._paneWidgets[t].statusWidget().update();this._dataWindowWidget&&this._dataWindowWidget.update()}else if(i===R.UPDATE_CURSOR_ONLY){
for(t=0;t<this._paneWidgets.length;t++)null!==this._paneWidgets[t].statusWidget()&&this._paneWidgets[t].statusWidget().update();this._dataWindowWidget&&this._dataWindowWidget.update()}this.paint(e),null!==this._timingsMeter&&this._timingsMeter.stopDraw()},o.prototype._createVolumeIfNeeded=function(){var e=p.enabled("create_volume_indicator_by_default")&&this._options.addVolume,t=!this._content,i=p.enabled("charting_library_base"),o=p.enabled("create_volume_indicator_by_default_once"),n=this._content&&!this._content.loading;e&&(t||i&&n&&!o)&&this._model.mainSeries().onSymbolResolved().subscribe(this,function(){var e=this;setTimeout(function(){var t,i,o,n,r=e._model.model().mainSeries().symbolInfo();r&&(t=!r.has_no_volume,!e.containsVolume()&&t?(i=te.factoryDefaults("chartproperties.volumePaneSize"),o={paneSize:i},p.enabled("hide_volume_ma")&&(o.styles={vol_ma:{visible:!1}}),e.insertStudy("Volume@tv-basicstudies",!1,p.enabled("volume_force_overlay"),void 0,o)):!t&&e.containsVolume()&&(n=e.model().dataSources().filter(function(e){return e instanceof v&&"Volume"===e.metaInfo().shortId})[0],e._model.model().removeSource(n)))},0)},o)},o.prototype._makeDefaultModel=function(){function e(){var e={readOnly:c.readOnly(),isSnapshot:!!c._containsData,preserveBarSpacing:c._onWidget};return void 0!==c._options.watermarkEnabled&&(e.watermarkEnabled=c._options.watermarkEnabled),void 0!==c._options.crossHairMenuEnabled&&(e.crossHairMenuEnabled=c._options.crossHairMenuEnabled),l(c._chartSession,function(e){if(!(e instanceof R))throw Error("Invalid mask");c._invalidateMask?c._invalidateMask.merge(e):c._invalidateMask=e,c._draw_planned||(c._draw_planned=!0,c._options.visible.when(function(){var e=!document.hidden,i=c.screen&&c.screen.isShown();null!==c._timingsMeter&&e&&!i&&c._timingsMeter.startWaitingDraw(),c._drawRafId=c._jqParent.prop("ownerDocument").defaultView.requestAnimationFrame(t)}))},c._properties,n,c._metaInfoRepository,c,c._options.undoHistory,c._options.barsMarksContainersFactory,e)}function t(){c._draw_planned=!1,c._drawRafId=0,c._inLoadingState||c._invalidateMask&&(c._invalidateMask=c._update(c._invalidateMask))}var i,n,r,s,a,c=this;if(this._content&&this._content.timeScale.points&&(i=this._content.timeScale.points.items[0],n={startDate:i}),!this._metaInfoRepository.getInternalMetaInfoArray())throw Error("Cannot create chart model: studies metainfo is absent");if(p.enabled("lean_chart_load")?this._model=this._model||e():this._model=e(),this._createVolumeIfNeeded(),r=function(){var e,t;this._model.onTagsChanged().subscribe(this,o.prototype.onModelTagsChanged),this._updateGui(),this._modelCreated.fire(this._model),this._tagsChanged.fire(),e=this._model.mainSeries(),this._defTimeframe&&e.setDefaultTimeframe(this._defTimeframe),this._model.lineCancelled().subscribe(this,this.onLineCancelled),e.onSymbolNotPermitted().subscribe(null,function(t){e.properties().symbol.setValue(t)}),e.properties().style.unsubscribe(this,this._onChartStyleChanged),e.properties().style.subscribe(this,this._onChartStyleChanged),
e.onCompleted().subscribe(this,function(){this._addPerfMark("SeriesCompleted")},!0),e.onBarReceived().subscribe(this,function(){this._addPerfMark("SeriesFirstDataReceived")},!0),t=this._options,t.handleSessionErrors&&(e.chartTypeNotPermitted.subscribe(null,function(){e.properties().interval.setValue("D")}),e.intradaySpreadNotPermitted.subscribe(null,function(){e.properties().interval.setValue("D")}),e.customIntervalNotPermitted.subscribe(null,function(){e.properties().interval.setValue(k(E(e.properties().style.value())))}),e.intradayExchangeNotPermitted.subscribe(null,function(){e.properties().interval.setValue("D")}),c._options.muteSessionErrors||e.onExtendedHoursNotPermitted().subscribe(null,function(){})),this._options.handleSessionErrors&&(e.requestingIntradayWhenNotSupported.subscribe(null,function(){e.properties().interval.setValue("D"),c._options.muteSessionErrors}),e.requestingResolutionWhenNotSupported.subscribe(null,function(t){e.properties().interval.setValue(t)}))}.bind(this),this._content){if(this.restoreState(this._content,this._containsData),p.enabled("chart_content_overrides_by_defaults"))return this._defSymbol&&(s=this.setSymbol(this._defSymbol),this.model().model().setPriceAutoScaleForAllMainSources()),a=function(){return this._defInterval&&this.setResolution(this._defInterval),void 0!==this._defStyle&&this.setSeriesStyle(this._model.mainSeries(),this._defStyle),r()}.bind(this),void 0===s?a():s.then(a)}else this._setActions();return r()},o.prototype._onChartStyleChanged=function(){K("Chart","Chart Style "+this._model.mainSeries().getStyleShortName().toUpperCase())},o.prototype._updateGui=function(){this._model&&(this._makePaneWidgetsAndSeparators(),this._makeTimeAxisWidget(),$(this._elMainTable).selectable(!1),this._adjustSize())},o.prototype.setVisibleTimeRange=function(e,t,i){this._chartSession.setVisibleTimeRange(this._model.mainSeries(),e,t,i)},o.prototype._makeChartWidget=function(){},o.prototype._makeLoadingScreen=function(){if(p.enabled("lean_chart_load")){if(this.screen)return;this.screen=new o.LoadingScreen(this,this._jqParent)}else this.screen=new o.LoadingScreen(this,this._jqMainDiv)},o.prototype._setSymbol=function(e,t){if(this._model){var i=this._model.mainSeries();if(!t&&i.symbolSameAsCurrent(e)&&!p.enabled("same_data_requery"))return;this._model.setSelectedSource(null),this._model.setScreenChartProperty(i.properties().symbol,e,this,"Change Symbol",p.enabled("same_data_requery"))}else this._properties.mainSeriesProperties.merge({symbol:e})},o.prototype.setSymbol=function(e,t){return this._setSymbol.apply(this,arguments)},o.prototype.getSymbol=function(e){var t;return t=this._model?this._model.mainSeries().properties():this._properties.mainSeriesProperties,t?e&&t.shortName&&t.shortName.value()?t.shortName.value():t.symbol.value():""},o.LoadingScreen=function(e,t){this._cw=e,this.$element=$('<div class="chart-loading-screen">'),this.$shield=$('<div class="chart-loading-screen-shield">').appendTo(this.$element),this.$element.appendTo(t),this._showed=!1,
this._cw.withModel(this,this._connectToModel)},o.LoadingScreen.prototype._connectToModel=function(){this._cw.model().mainSeries().onDataLoaded().subscribe(this,function(e){switch(e.method){case"symbol_error":e.params[1]!==d.PERMISSION_DENIED&&this.hide();break;case"series_error":p.enabled("hide_loading_screen_on_series_error")&&this.hide();break;case"series_completed":this.hide()}})},o.LoadingScreen.prototype.show=function(){this._cw._inLoadingState=!0,this._showed||(this._showed=!0,this._show())},o.LoadingScreen.prototype._show=function(){var e=this._cw.properties().paneProperties.background.value();this.$shield.css("background",e),this.$element.addClass("fade")},o.LoadingScreen.prototype.hide=function(){delete this._cw._inLoadingState,this._showed&&this._hide()},o.LoadingScreen.prototype._hide=function(){this._showed=!1,this.$element.removeClass("fade")},o.LoadingScreen.prototype.$canvas=null,o.LoadingScreen.prototype.context=null,o.LoadingScreen.prototype.isShown=function(){return this._showed},o.prototype.unsetActivePaneWidget=function(){this.activePaneWidget=!1},o.prototype.setActivePaneWidget=function(e){this.activePaneWidget=e},o.prototype.isMaximizedPane=function(){return!!this._maximizedPaneWidget},o.prototype.toggleMaximizePane=function(e){if(!(this._paneWidgets.length<2)){this._maximizedPaneWidget?(this._maximizedPaneWidget.state().setMaximized(!1),this._maximizedPaneWidget=null,this._paneSeparators.forEach(function(e){e.show()})):(this._maximizedPaneWidget=e,this._maximizedPaneWidget.state().setMaximized(!0),this._paneSeparators.forEach(function(e){e.hide()}));for(var t=this._paneWidgets.length;t--;)this._paneWidgets[t].updateControls();this._adjustSize(),this.updateIndicatorImagePosition(),this._updateCrossHairPositionIfNeeded()}},o.prototype._makePaneWidgetsAndSeparators=function(){var e,t,i,o,n=this._model.panes(),r=n.length,l=this._paneWidgets.length;for(e=r;e<l;e++)t=this._paneWidgets.pop(),t.destroy(),(i=this._paneSeparators.pop())&&i.jqRow.remove();for(e=l;e<r;e++)t=new s(this,n[e],{contextMenuEnabled:this._options.paneContextMenuEnabled,verticalTouchScroll:this._options.verticalTouchScroll,priceScaleContextMenuEnabled:this._options.priceScaleContextMenuEnabled,symbolMarkerEnabled:this._options.symbolMarkerEnabled,legendWidgetEnabled:this._options.legendWidgetEnabled,legendWidget:this._options.legendWidget,propertyPagesEnabled:this._options.propertyPagesEnabled,sourceSelectionEnabled:this._options.sourceSelectionEnabled}),t.onMouseLeave=this.unsetActivePaneWidget.bind(this),t.onMouseEnter=this.setActivePaneWidget.bind(this),this._paneWidgets.push(t),e>0&&(i=new a(this,e-1,e),this._paneSeparators.push(i),this._timeAxisWidget?i.jqRow.insertBefore(this._timeAxisWidget.jqRow):i.jqRow.appendTo(this._elMainTable)),this._timeAxisWidget?t.jqRow.insertBefore(this._timeAxisWidget.jqRow):t.jqRow.appendTo(this._elMainTable);for(e=0;e<r;e++)o=n[e],t=this._paneWidgets[e],t.state()!==o&&t.setState(o);for(e=r;e--;)this._paneWidgets[e].updateControls()},o.prototype._makeTimeAxisWidget=function(){
this._timeAxisWidget||(this._timeAxisWidget=new h(this,this._options.timeScaleWidget),this._timeAxisWidget.jqRow.appendTo(this._elMainTable))},o.prototype.insertStudyOrShowDialog=function(e,t,o){var n,r,s,a;this.isSymbolicStudy(e)?(n=te.defaults("study_"+e.id).description,r=this.model(),i.e(18).then(function(s){(0,i(938).showConfirmSymbolInputDialog)(function(i){var o={inputs:{}};o.inputs[e.symbolInputId()]=i,r.insertStudy(e,o,!1,t)},n,o)}.bind(null,i)).catch(i.oe)):this.hasConfirmInputs(e)?(n=te.defaults("study_"+e.id).description,i.e(15).then(function(){i(819).show(this,e,{title:n,callback:function(i){this.model().insertStudy(e,i,!1,t)}.bind(this)})}.bind(this).bind(null,i)).catch(i.oe)):v.isPointsBasedStudy(e.id)?(s=v.lineToolNameForPointsBasedStudy(e.id),C.tool.setValue(s)):(a="Volume@tv-basicstudies"===e.id,this.insertStudy(e.id,!0,a,null,null,t))},o.prototype.hasConfirmInputs=function(e){var t,i,o=e.inputs;if(void 0===o)return!1;for(t=0;t<o.length;++t)if(i=o[t],void 0!==i.confirm&&i.confirm)return!0;return!1},o.prototype.isSymbolicStudy=function(e){switch(e.id){case"Overlay@tv-basicstudies":case"CorrelationCoefficient@tv-basicstudies":case"Correlation Coeff@tv-basicstudies":return!0;default:return!1}},o.prototype.isPointsBasedStudy=function(e){return v.isPointsBasedStudy(e.id)},o.prototype.insertStudy=function(e,t,i,o,n,s){var a,l=Y.findStudyMetaInfo(this._metaInfoRepository.getInternalMetaInfoArray(),e);l=TradingView.clone(l),r(!l.isTVScriptStubToCompile,"MetaInfo stub is unexpected here!"),a=o?{inputs:o}:{},n&&(a=$.extend(a,n)),t?this._model.insertStudy(l,a,i,s):this._model.model().insertStudy(l,a,i,s)},o.prototype.insertStudyStub=function(e){return this.model().insertStudyStub(e)},o.prototype.removeStudyStub=function(e){return this.model().removeStudyStub(e)},o.prototype.getPriceAxisMaxWidthByName=function(e){return"left"===e?this.maxLhsPriceAxisWidth:this.maxRhsPriceAxisWidth},o.prototype.getPriceAxisWidthChangedByName=function(e){return"left"===e?this.lhsPriceAxisWidthChanged:this.rhsPriceAxisWidthChanged},o.prototype._adjustSize=function(){var e,t,i,o,n,r,s,l,h=this,u=0,d=0,p=0;$.each(this._paneWidgets,function(){h._maximizedPaneWidget&&h._maximizedPaneWidget!==this||(u=Math.max(this.lhsPriceAxisWidget.optimalWidth(),u),d=Math.max(this.rhsPriceAxisWidget.optimalWidth(),d),p+=this.stretchFactor())}),e=this._width(),t=this._height(),i=e-u-d,o=this._paneSeparators.length,n=a.HEIGHT,r=this._timeAxisWidget.optimalHeight(),s=t-n*o-r,l=s/p,$.each(this._paneWidgets,function(e){h._model&&(this._state=h._model.panes()[e]);var t=h._maximizedPaneWidget?h._maximizedPaneWidget===this?s:0:Math.max(Math.round(this.stretchFactor()*l),2);this.setPriceAxisSize(c.LHS,new X(u,t)),this.setPriceAxisSize(c.RHS,new X(d,t)),this.setSize(new X(i,t)),h._model&&this.state()&&h._model.setPaneHeight(this.state(),t)}),this._timeAxisWidget.setSize(new X(i,r),new X(u,r),new X(d,r)),this._model&&this._model.setWidth(i),this._controlBarNavigation&&this._controlBarNavigation.updatePosition(i),
this.maxLhsPriceAxisWidth!==u&&(this.maxLhsPriceAxisWidth=u,this.lhsPriceAxisWidthChanged.fire(u)),this.maxRhsPriceAxisWidth!==d&&(this.maxRhsPriceAxisWidth=d,this.rhsPriceAxisWidthChanged.fire(d))},o.prototype._onChartSessionIsConnectedChanged=function(e){e?this._onConnection():this._onDisconnect()},o.prototype._onChartSessionCriticalError=function(e,t){this._disconnected.fire(!0)},o.prototype._onData=function(e){switch(e.method){case"reconnect_bailout":this._reconnectBailout.fire();break;default:this._model.onData(e)}},o.prototype._onConnection=function(){this._online=!0,this._model?(this._model.restart(),this._updateGui(),this.update(),this.paint(),this._connected.fire()):this.requestMetadata()},o.prototype._onDisconnect=function(){this._model&&this._model.disconnect(),this._online=!1,this.update(),this.paint(),this._disconnected.fire()},o.prototype._applyStudiesOverrides=function(){Y.overrideDefaults(this._metaInfoRepository.getInternalMetaInfoArray())},o.prototype.requestMetadata=function(){this._addPerfMark("RequestMetadataStart"),this._metaInfoRepository.requestMetaInfo().then(function(){this._addPerfMark("RequestMetadataEnd"),this._inited?this.model().model().setStudiesMetaData(this._metaInfoRepository.getInternalMetaInfoArray(),this._metaInfoRepository.getMigrations()):(this._init(),this.chartWidgetInitialized.fire(),p.enabled("charting_library_base")||ie.logDebug("initialized"))}.bind(this))},o.prototype.studiesMetaData=function(){return this._model.studiesMetaData()},o.prototype.getTimeScale=function(){return this._timeAxisWidget},o.prototype.chartWidgetCollection=function(){return this._chartWidgetCollection},o.prototype.setSeriesStyle=function(e,t){this._model.setProperty(e.properties().style,t)},o.prototype.showObjectsTreeDialog=function(e){var t=this;i.e(7).then(function(o){new(0,i(939).ObjectTreeDialog)({chartWidget:t,activeTab:e},t._model).show()}.bind(null,i)).catch(i.oe)},o.prototype.showChartProperties=function(e){if(!p.enabled("show_chart_property_page"))return Promise.resolve();e&&e.text===window.t("Properties...")&&TVSettings.setValue("properties_dialog.active_tab.chart",window.t("Style"));var t=this;return new Promise(function(e){m(t._model.mainSeries(),t._model,{doNotCloseOnBgClick:!0}).then(function(t){return e(t.isVisible()?t._dialog:null),t}).then(function(e){if(e.isVisible()){var i=function(){e.hide(),t._chartWidgetCollection.activeChartWidget.unsubscribe(i)};t._chartWidgetCollection.activeChartWidget.subscribe(i)}})})},o.prototype.showScriptEditor=function(){TradingView.bottomWidgetBar&&TradingView.bottomWidgetBar.activateScriptEditorTab()},o.prototype.showCompareOrAdd=function(){this._chartWidgetCollection.showAddCompareDialog()},o.prototype.showIndicators=function(e){if(window.studyMarket)return window.studyMarket.isVisible()?void window.studyMarket.hide():(window.studyMarket.show(e),window.studyMarket)},o.prototype.showScalesProperties=function(e){m(this._model.mainSeries(),this._model,{selectScales:!0})},o.prototype.showTimezoneProperties=function(){
m(this._model.mainSeries(),this._model,{selectTmz:!0})},o.prototype.removeSelectedSource=function(){var e=this,t=e._model.selectedSource();!t||t===e._model.mainSeries()||t===e._model.lineBeingCreated()||t instanceof u||(t.hasAlert.value()&&t.isUserDeletable()?J({type:"modal",content:window.t("This drawing is used in alert. If you remove the drawing, the alert will be also removed. Do you want to remove the drawing anyway?")}).then(function(t){t.on("action:yes",function(t){e._model.removeSelectedSource(),t.close()}),t.open()}):t instanceof v&&t.hasChildren()?showDeleteStudyTreeConfirm(e._model.removeSelectedSource.bind(e._model)):e._model.removeSelectedSource())},o.prototype.unlinkSelectedLine=function(){var e=this._model.selectedSource();e instanceof S&&this._model.unlinkLine(e)},o.prototype.copyLineToOtherCharts=function(){var e=this._model.selectedSource();e instanceof S&&this._model.copyToOtherCharts(e)},o.prototype.hideSelectedObject=function(){var e=this._model.selectedSource();e&&this._model.setProperty(e.properties().visible,!1,"Hide "+e.title())},o.prototype.toggleLockSelectedObject=function(){var e,t=this._model.selectedSource();t&&(e=t.properties().frozen.value(),this._model.setProperty(t.properties().frozen,!e,(e?window.t("Unlock"):window.t("Lock"))+" "+t.title()))},o.prototype.editSelectedObject=function(e){var t=this._model.selectedSource();t&&m(t,this._model)},o.prototype.openSelectedObjectSource=function(e){},o.prototype.resetPriceAxisOptimalWidth=function(e){$.each(this._paneWidgets,function(){this.resetPriceAxisOptimalWidth(e)}),this._redrawPanes.fire()},o.prototype.adjustPriceAxisWidth=function(e){this.resetPriceAxisOptimalWidth(e),this._adjustSize()},o.prototype.setPriceAxisVisible=function(e,t){$.each(this._paneWidgets,function(){this.setPriceAxisVisible(e,t)}),this._timeAxisWidget.setStubVisible(e,t),this._adjustSize(),this._redrawPanes.fire()},o.prototype.setTimeAxisVisible=function(e){this._timeAxisWidget.setVisible(e),this._adjustSize()},o.prototype.isTextTool=function(e){switch(e){case"LineToolBalloon":case"LineToolText":case"LineToolTextAbsolute":case"LineToolCallout":case"LineToolNote":case"LineToolNoteAbsolute":return!0}return!1},o.prototype.tags=function(){return this._model?this._model.calculateDefaultTags():[]},o.prototype.state=function(e,t){return this._model.state(e,t)},o.prototype.asyncState=function(e){return this._model.asyncState(e)},o.prototype.metaInfo=function(){var e=this._metaInfo;return this._model&&(e.systemTags=this._model.calculateDefaultTags()),e},o.prototype.image=function(){var e,t,i,o,n,r,s,a,l=document.createElement("canvas"),c=l.getContext("2d"),h=0,u=this._timeAxisWidget.size.h,d=this.properties().scalesProperties.lineColor.value();for(t=0;t<this._paneWidgets.length;t++)(e=this._paneWidgets[t])&&e.state()&&(e.state().recalculate(!0),0===t&&(h=e.lhsPriceAxisWidget.size.w+e.size.w+e.rhsPriceAxisWidget.size.w),u+=e.size.h);for(u+=this._paneWidgets.length-1,this._update(),i=25,o=5,l.width=h+2*o,l.height=u+i+2*o,c.fillStyle="#F2F5F8",c.fillRect(0,0,l.width,l.height),
n=i+o,r=o,s=this.mainSeriesQuotesAndMetainfo(),s.ohlc&&(a="{0} O:{1} H:{2} L:{3} C:{4}".format(s.meta.symbol,s.ohlc[0],s.ohlc[1],s.ohlc[2],s.ohlc[3]),c.fillStyle="#000",c.font="12px Verdana, Arial",c.fillText(a,r,o+15)),t=0;t<this._paneWidgets.length;t++)e=this._paneWidgets[t],c.drawImage(e.lhsPriceAxisWidget.canvas,r,n),c.drawImage(e.canvas,r+e.lhsPriceAxisWidget.size.w,n),e.statusWidget().renderTo(c,r+5,n+5),c.drawImage(e.rhsPriceAxisWidget.canvas,r+e.lhsPriceAxisWidget.size.w+e.size.w,n),n+=e.size.h,t<this._paneWidgets.length-1&&(c.fillStyle=d,c.fillRect(r,n,h,1),n++);return c.drawImage(this._timeAxisWidget.lhsCanvas,r,n),c.drawImage(this._timeAxisWidget.canvas,r+e.lhsPriceAxisWidget.size.w,n),c.drawImage(this._timeAxisWidget.rhsCanvas,r+e.lhsPriceAxisWidget.size.w+e.size.w,n),c.lineWidth=1,c.strokeStyle="#000",c.strokeRect(o+.5,i+o+.5,h-1,u-1),l},o.prototype.images=function(){function e(e){var t,o,n,r,s,a;for(e.paint(R.LIGHT_UPDATE,i._onWidget),t=e.image(i._onWidget),t.containsMainSeries=e.containsMainSeries(),t.studies=[],o=e.state().dataSources(),n=0;n<o.length;n++)r=o[n],s=i.properties().paneProperties.legendProperties,a=r.statusView(),r instanceof v?r.properties().visible.value()&&a&&s.showStudyTitles.value()&&s.showLegend.value()&&t.studies.push(r.statusView().text()):r instanceof d&&a&&s.showLegend.value()&&s.showSeriesTitle.value()&&(t.mainSeriesText=r.statusView().text());return t}var t,i,o,n,r,s,a;if(TradingView.printing=!0,t=this._model&&this._model.selectedSource(),this._model&&this._model.setSelectedSource(null),i=this,o=[],this.isMaximizedPane())o.push(e(this._maximizedPaneWidget));else for(n=0;n<this._paneWidgets.length;n++)r=this._paneWidgets[n],o.push(e(r)),n<this._paneWidgets.length-1&&o.push(this._paneSeparators[n].image());return s=null,this._timeAxisWidget&&(this._timeAxisWidget.paint(R.LIGHT_UPDATE),s=this._timeAxisWidget.image()),TradingView.printing=!1,this._model&&(this._model.setSelectedSource(t),this._model.invalidate(new R(R.LIGHT_UPDATE))),a=this.mainSeriesQuotesAndMetainfo(),{panes:o,timeAxis:s,colors:{text:this.properties().scalesProperties.textColor.value(),bg:this.properties().paneProperties.background.value(),scales:this.properties().scalesProperties.lineColor.value()},meta:a.meta,ohlc:a.ohlc,quotes:a.quotes}},o.prototype.mainSeriesQuotesAndMetainfo=function(){var e,t,i,o,n,r,s,a=this._model&&this._model.mainSeries();return a&&(o=function(e){return null==e?"":a.formatter().format(e)+""},n=function(e){return null==e?"":e+""},e={resolution:a.interval(),symbol:a.symbol()},r=a.symbolInfo(),r&&(e.symbol=r.full_name,e.description=r.description,e.exchange=r.exchange),s=a.bars().last(),null!==s&&(t=s.value.slice(1,5).map(o)),a.quoteData&&(i={change:o(a.quoteData.change),changePercent:n(a.quoteData.change_percent),last:o(a.quoteData.last_price)})),{meta:e,ohlc:t,quotes:i}},o.prototype.onTagsChanged=function(){return this._tagsChanged},o.prototype.onModelTagsChanged=function(){this._tagsChanged.fire()},o.prototype.destroy=function(){var e,t,i
;for(0!==this._drawRafId&&this._jqParent.prop("ownerDocument").defaultView.cancelAnimationFrame(this._drawRafId),this._model.model().destroy(),null!==this._timingsMeter&&(this._timingsMeter.stopCollect(),this._timingsMeter=null),this._chartSession.criticalError().unsubscribe(this,this._onChartSessionCriticalError),this._chartSession.isConnected().unsubscribe(this._boundOnChartSessionIsConnectedChanged),this._chartSession.destroy(),e=0;e<this._paneWidgets.length;e++)this._paneWidgets[e].destroy();this._paneWidgets.length=0,this._controlBarNavigation&&(this._controlBarNavigation.destroy(),this._controlBarNavigation=void 0),this._seriesControlWidget&&(this._seriesControlWidget.destroy(),this._seriesControlWidget=null),$(window).off("visibilitychange:chart_"+this._guid),$(window).off("keydown:chart_"+this._guid),this._jqMainDiv&&this._jqMainDiv.remove();for(t in this._actions)i=this._actions[t],i.setActive(!1),i.binder&&i.binder.destroy();this._isDestroyed=!0},o.prototype.title=function(){return window.t("Chart Properties")},o.prototype.symbolProperty=function(){return this._model.mainSeries().properties().shortName?this._model.mainSeries().properties().shortName:this._model.mainSeries().properties().symbol},o.prototype.loadContent=function(e,t){var i,o,n,r,s,a;for(this.screen.show(),i=this,this.isMaximizedPane()&&this.toggleMaximizePane(),o=i._model.model().dataSources(),n=0;n<o.length;n++)(r=o[n])!==i._model.mainSeries()&&i._model.model().removeSource(r,!0);for(this._model.disconnect(),i.activePaneWidget=!1,i._model.mainSeries().purgeSymbolInfo(),e.loading=!0,i._setContent(e),n=0;n<e.panes.length;++n)for(a=0;a<e.panes[n].sources.length;++a)if(e.panes[n].sources[a].state.symbol){s=e.panes[n].sources[a].state;break}if(!s)throw Error("An error occured while determining main series ion the chart");i._properties.mainSeriesProperties.merge({visible:!0,symbol:s.symbol,timeframe:"",onWidget:i._onWidget,interval:s.interval||"D",style:s.style}),i._init(),B.interval.setValue(s.interval),i._model.undoHistory.clearStack(),i.updateSeriesControlUI()},o.prototype._setContent=function(e){e&&e.panes.forEach(function(e){e.sources=e.sources.filter(function(e){return!!e&&("MainSeries"===e.type||(!e.points||!e.points.some(function(e){return null===e.time_t||!isFinite(e.time_t)})||(ie.logNormal("Dropped invalid "+e.type+". Reason: non-numeric point time"),!1)))});var t=function(t){return e.sources&&e.sources.some(function(e){return e.id===t})};e.leftAxisSources&&(e.leftAxisSources=e.leftAxisSources.filter(t)),e.rightAxisSources&&(e.rightAxisSources=e.rightAxisSources.filter(t))}),this._content=e},o.prototype._contentSeriesProperties=function(){var e,t,i;if(this._content)for(e=this._content.panes.length;e-- >0;)for(t=this._content.panes[e].sources,i=t.length;i-- >0;)if("MainSeries"===t[i].type)return t[i].state},o.prototype.updateSeriesControlUI=function(){this._seriesControlWidget&&this._seriesControlWidget.updateUI()},o.prototype.tickSeriesControlClock=function(){this._seriesControlWidget&&this._seriesControlWidget.tickClock()},
o.prototype.resizeSeriesControlUI=function(){this._seriesControlWidget&&this._seriesControlWidget.resizeUI()},o.prototype.updateUndoRedo=function(){this._model&&(this.actions().undo.setEnabled(!this._model.undoHistory.undoStack().isEmpty()),this.actions().redo.setEnabled(!this._model.undoHistory.redoStack().isEmpty()))},o.prototype.createSessionBreaksActions=function(e){var t,i=this,o=function(){t=new P({text:window.t("Session Breaks"),checkable:!0,statName:"ToggleSessionBreaks"}),t.binder=new f(t,i.model().mainSeries().sessionsStudy().properties().graphics.vertlines.sessBreaks.visible,i.model(),"Session Breaks"),i._actions.sessionBreaks=t};i.model().mainSeries().sessionsStudy()?o():i.model().mainSeries().onSessionsStudyCreated().subscribe(i,function(){o()})};o.prototype.updateActionForIntradayOnly=function(e){!e||!e instanceof P||e.setEnabled(!!this.model().mainSeries().isIntradayInterval())},o.prototype.withModel=function(e,t){this.model()?t.call(e):this.modelCreated().subscribe(e,t,!0)},o.prototype.containsVolume=function(){return this.model().dataSources().some(function(e){return e instanceof v&&"Volume"===e.metaInfo().shortId})},o.prototype.containsStudyByPredicate=function(e){return!!this._model&&this._model.dataSources().some(function(t){if(!(t instanceof v))return!1;var i=t.metaInfo();return e(i)})},o.prototype.containsStudy=function(e){return this.containsStudyByPredicate(function(t){return t.id===e||t.fullId===e})},o.prototype.containsSessions=function(){return this.model().dataSources().some(function(e){return e instanceof v&&"Sessions"===e.metaInfo().shortId})},o.prototype.isSmall=function(){return this._width()<550||this._height()<300},o.prototype.onWidget=function(){return this._onWidget},o.prototype.onCmeWidget=function(){return"cme"===this.widgetCustomer()},o.prototype.widgetCustomer=function(){return this._widgetCustomer},o.prototype._width=function(){return this._options.width.value()},o.prototype._height=function(){var e=this._options.height.value();return this._chartControlsBar&&(e=Math.max(e-this.controlBarHeight,0)),e},o.prototype.resize=function(){var e={height:this._height()+"px",width:this._width()+"px"};this._jqMainDiv.css(e),this._elMainTable.style.height=e.height,this._elMainTable.style.width=e.width,this._resizeHandler&&this._jqMainDiv&&this._resizeHandler()},o.prototype.chartSession=function(){return this._chartSession},o.prototype.maxLhsPriceAxisWidth=0,o.prototype.maxRhsPriceAxisWidth=0,o.prototype.GUIResetScales=function(){K("GUI","Reset Scales");var e=this.model();e&&e.resetScales()},o.prototype.onLineCancelled=function(){C.resetToCursor()},o.prototype.createIndicatorImage=function(){var e=this;this._indicatorBindingPriceAxisName="right",this._indicatorImageMargin="marginRight",this.indicatorImage=this._jqParent[0].getElementsByClassName("chart-status-picture")[0],this.indicatorImage?this.indicatorImage.innerHTML="":(this.indicatorImage=this._jqParent.prop("ownerDocument").createElement("span"),this.indicatorImage.className="chart-status-picture",
this._jqParent.append(this.indicatorImage)),this._options.marketStatusWidgetEnabled&&(this.indicatorText=$('<span class="series-status-text apply-common-tooltip"><span class="js-market-status tv-market-status--series-status"></span></span>'),this.indicatorText.appendTo(this.indicatorImage),this.indicatorDot&&this.indicatorDot.stop(),this.indicatorDot=new Q({el:this.indicatorText.find(".js-market-status")[0],classSuffix:"--for-chart"}),this.indicatorDot.start(),p.enabled("display_data_mode")&&($('<span class="js-data-mode tv-data-mode--series-status"></span>').appendTo(this.indicatorText),this.dataModeIndicator&&this.dataModeIndicator.stop(),this.dataModeIndicator=new ee({el:this.indicatorText.find(".js-data-mode")[0],classSuffix:"--for-chart"}),this.dataModeIndicator.start())),e.withModel(null,function(){var t=e._model.mainSeries();t.onStatusChanged().subscribe(null,e.updateIndicatorImage.bind(e)),t.marketStatus.subscribe(e.updateIndicatorImage.bind(e)),e.updateIndicatorImage(),e.checkCompactMode(),e._model.onRearrangePanes().subscribe(null,function(){e.resetIndicatorSize(),e.resizeIndicator()})}),this._indicatorPriceAxisWidthChanged=this.getPriceAxisWidthChangedByName(this._indicatorBindingPriceAxisName),this._indicatorPriceAxisWidthChanged.subscribe(this,this.updateIndicatorImagePosition),this.updateIndicatorImagePosition()},o.prototype.updateIndicatorImage=function(){var e,t,i,o=this,n=this._model;n&&(e=n.mainSeries(),t=e.status(),i=e.quoteData?e.quoteData.update_mode_seconds:null,o._updateDataAndMarketStatus(e.marketStatus.value(),t,i))},o.prototype.checkCompactMode=function(){this._jqMainDiv.toggleClass("i-compact",this._width()<=400),this.indicatorImage&&(this._indicatorWidth=this.indicatorImage.clientWidth)},o.prototype.getDataTextStatus=function(e){var t;switch(e){case d.STATUS_LOADING:case d.STATUS_RESOLVING:t="loading";break;case d.STATUS_INVALID_SYMBOL:t="invalid";break;case d.STATUS_NO_BARS:t="forbidden";break;case d.STATUS_DELAYED:t="delayed";break;case d.STATUS_DELAYED_STREAMING:t="delayed_streaming";break;case d.STATUS_EOD:case d.STATUS_PULSE:t="endofday";break;case d.STATUS_OFFLINE:t="connecting";break;case d.STATUS_SNAPSHOT:t="snapshot";break;case d.STATUS_READY:t="realtime";break;case d.STATUS_REPLAY:t="replay";break;default:t=e}return t},o.prototype._updateDataAndMarketStatus=function(e,t){var i,o;void 0!==this.indicatorText&&(i=this.getDataTextStatus(t),t===d.STATUS_LOADING||t===d.STATUS_RESOLVING?this.indicatorDot.setStatus("loading"):t===d.STATUS_INVALID_SYMBOL?this.indicatorDot.reset():i===t&&ie.logWarn("unhandled data mode "+i),p.enabled("display_data_mode")&&this.dataModeIndicator.setMode(i),o=["loading","invalid","replay"],!o.includes(i)&&e?this.indicatorDot.setStatus(e,!0):"invalid"===i?this.indicatorDot.setStatus("invalid",!0):"replay"===i&&this.indicatorDot.setStatus("replay"),this.resizeIndicator())},o.prototype.resetIndicatorSize=function(){
if(this._paneWidgets[0]&&this._paneWidgets[0].legendWidget&&oe)for(var e=0;e<this._paneWidgets.length;e++)this._paneWidgets[e].legendWidget.firstTitle().css("padding-right","")},o.prototype.resizeIndicator=function(){var e,t,i,o,n=this._getMainSeriesPaneWidget();null!==n&&null!==(e=n.statusWidget())&&e.firstTitle().css("padding-right",this._indicatorWidth+10),this._options.marketStatusWidgetEnabled&&p.enabled("display_data_mode")&&this.indicatorDot&&this.dataModeIndicator&&(this.indicatorDot.isShortModeEnabled()&&this.dataModeIndicator.isShortModeEnabled()?(t=[this.indicatorDot.getTooltipText(),this.dataModeIndicator.getTooltipText()],t=t.filter(function(e){return e}),i=t.join(", "),this.indicatorText.attr("title",i)):this.indicatorText.attr("title",""),this.indicatorText.get(0).dispatchEvent(new y("common-tooltip-update"))),this.indicatorImage&&(this._indicatorWidth=this.indicatorImage.clientWidth),o=this._width(),this._options.marketStatusWidgetEnabled&&this.indicatorDot&&(o>650?(this.indicatorDot.setTooltipEnabled(!1),this.indicatorDot.disableShortMode()):o>550?(this.indicatorDot.setTooltipEnabled(!1),this.indicatorDot.disableShortMode()):(this.indicatorDot.setTooltipEnabled(!1),this.indicatorDot.enableShortMode())),p.enabled("display_data_mode")&&this.dataModeIndicator&&(o>650?(this.dataModeIndicator.setTooltipEnabled(!1),this.dataModeIndicator.disableShortMode()):o>550?(this.dataModeIndicator.setTooltipEnabled(!0),this.dataModeIndicator.enableShortMode()):(this.dataModeIndicator.setTooltipEnabled(!1),this.dataModeIndicator.enableShortMode()))},o.prototype.updateIndicatorImagePosition=function(){this.indicatorImage&&(this.indicatorImage.style[this._indicatorImageMargin]=this.getPriceAxisMaxWidthByName(this._indicatorBindingPriceAxisName)+"px")},o.prototype._getMainSeriesPaneWidget=function(){for(var e=0;e<this._paneWidgets.length;e++)if(this._paneWidgets[e].containsMainSeries())return this._paneWidgets[e];return null},o.prototype.getMarketStatusTooltip=function(){return this._options.marketStatusWidgetEnabled&&this.indicatorDot?this.indicatorDot.getTooltipText():"-"},o.prototype._startSpinner=function(e){if(!this._spinner){var t=$(e).get(0);t&&(this._spinner=(new G).spin(t))}},o.prototype.isJustClonedChart=function(){return!!(this._options||{}).justCloned},o.prototype.getLastPaneLeftBottom=function(){var e=this._paneWidgets[this._paneWidgets.length-1].jqPane,t=e.offset();return{left:t.left,bottom:$(document.body).height()-t.top-e.height()}},o.prototype.setDataWindowWidget=function(e){this._dataWindowWidget=e},o.prototype.removeDataWindowWidget=function(){this._dataWindowWidget=null},p.enabled("datasource_copypaste")&&(o.prototype.onAppClipboardPaste=function(e,t){ie.logDebug("[[paste]]"),this._model&&this._model.pasteSourceFromClip(e,t)},o.prototype.onAppClipboardCopy=function(e){if(e||(e=this._model.selectedSource()),e instanceof v&&e.isChildStudy())return void ie.logDebug("Can not copy child study");ie.logDebug("[[copy]]"),this._model&&this._model.copySourceToClip(e)},o.prototype.onAppClipboardCut=function(e){
ie.logDebug("[[cut]]"),this._model&&this._model.cutSourceToClip(e||this._model.selectedSource())}),o.prototype.applyOverrides=function(e){applyPropertiesOverrides(this.properties(),null,!1,e),this._model&&(applyPropertiesOverrides(this._model.model().properties(),null,!1,e),applyPropertiesOverrides(this._model.mainSeries().properties(),null,!1,e,"mainSeriesProperties"))},o.prototype.applyStudiesOverrides=function(e){Y.setDefaultsOverrides(e),this._applyStudiesOverrides()},o.prototype._setActionsActive=function(e){var t,i=this.actions();for(t in i)i.hasOwnProperty(t)&&this.actions()[t].setActive(e)},o.prototype.setActive=function(e){this._setActionsActive(e),this._isActive=e,this._paneWidgets.forEach(function(e){e.update()}),this._chartControlsBar&&this._chartControlsBar.classList.toggle("chart-controls-bar--inactive",!e)},o.prototype.isActive=function(){return this._isActive},o.prototype.trackTime=function(){return this._chartWidgetCollection.lock.trackTime},o.prototype.isMultipleLayout=function(){return re(this._chartWidgetCollection.layout.value())},o.prototype.id=function(){return this._guid},o.prototype.createBranding=function(){this._modelCreated.subscribe(this,function(){this._model.model().createBrandingSource()},!0)},o.prototype.selectBarMode=function(){return this._model.model().selectBarMode()},o.prototype.toggleSelectBarMode=function(){this._model.model().toggleSelectBarMode()},o.prototype.onBarSelected=function(){return this._model.model().onBarSelected()},o.prototype.trySetChartStyle=function(e){var t=this.model();return!!t&&(t.mainSeries().properties().style.value()===e||!!p.enabled("charting_library_base")&&(this._setChartStyle(e),!0))},o.prototype._setChartStyle=function(e){var t=this.model(),i=t.mainSeries().properties().style;t.setChartStyleProperty(i,e,"Change Series Style")},o.prototype._addPerfMark=function(e){se("ChartWidget."+this._guid+"."+e)},e.exports.ChartWidget=o}).call(t,i(8))},function(e,t,i){"use strict";(function(t){function o(e,t,i){this._options=Object.assign({},G,i),this._chart=e,this.dialog=e.dialog,this._state=t,this._state&&this._state.onDestroyed().subscribe(this,o.prototype._onStateDestroyed,!0);var n={contextMenuEnabled:this._options.priceScaleContextMenuEnabled};this.lhsPriceAxisWidget=new l(this,l.LHS,n),this.rhsPriceAxisWidget=new l(this,l.RHS,n),this.jqPane=$(document.createElement("td")),this.jqPane.addClass("chart-markup-table"),this.jqPane.addClass("pane"),this._dv=$("<div>"),this._dv.css("width","100%"),this._dv.css("height","100%"),this._dv.css("position","relative"),this._dv.css("overflow","hidden"),this._dv.appendTo(this.jqPane),this.canvas=N(this._dv,new F(16,16)),$(this.canvas).css("position","absolute"),$(this.canvas).css("z-order","2"),$(this.canvas).css("left",0),$(this.canvas).css("top",0),this.ctx=this.canvas.getContext("2d"),this.top_canvas=N(this._dv,new F(16,16)),$(this.top_canvas).css("position","absolute"),$(this.top_canvas).css("z-order","1"),$(this.top_canvas).css("left",0),$(this.top_canvas).css("top",0),this.top_ctx=this.top_canvas.getContext("2d"),
this._zoomSelector=$("<div>"),this._zoomSelector.addClass("zoom-selector"),this._zoomSelector.css("display","none"),this._zoomSelector.appendTo(this._dv),this._tooltipSelector=$("<div>"),this._tooltipSelector.addClass("tooltip tooltip-selector tooltip-selector-hidden"),this._tooltipSelector.appendTo(this._dv),this.jqRow=$(document.createElement("tr")),this.lhsPriceAxisWidget.jqCell.appendTo(this.jqRow),this.jqPane.appendTo(this.jqRow),this._options.legendWidgetEnabled?(this.legendWidget=new a(this,this._chart.model(),this._chart._jqMainDiv,this._options.legendWidget),this.legendWidget.$el.appendTo(this._dv)):this.legendWidget=null,this.rhsPriceAxisWidget.jqCell.appendTo(this.jqRow),this.setCursorForTool(),W($(this.top_canvas),this,!0,this._options.verticalTouchScroll),t&&!this._chart.readOnly()&&(this.paneControls=new E(this,this._chart.model(),this._dv)),this.updateScalesVisibility(),this.actions=[],this.readonlyActions=[],this._onKeyUpListener=this._onKeyUpListener.bind(this),this._lineCancelledCallback=this._lineCancelledCallback.bind(this),$(window).on("keyup.panewidget",this._onKeyUpListener),this._chart.withModel(this,this._lineCancelledCallback),this._overlays={},this._contextMenuX=0,this._contextMenuY=0,this._lockDrawingsProperty=k.lockDrawings(),this._chart.withModel(this,function(){var e=this._chart.model();e.onSimpleZoomIn().subscribe(this,this._updateCrosshairOnZoom),e.onSimpleZoomOut().subscribe(this,this._updateCrosshairOnZoom)})}var n,r,s,a,l,c,h,u,d,p,_,f,m,g,y,v,b,S,w,T,P,x,C,L,I,M,k,A,E,D,V,O,R,B,z,N,F,W,H,j,U,q,Y,G;i(617),i(11),n=i(6).Point,r=i(259).UndoMacroCommand,s=i(25).Study,a=i(743).LegendWidget,l=i(124).PriceAxisWidget,c=i(124).scaleRatioForContextMenuTransformer(7),h=i(43).LineToolOrder,u=i(43).LineToolPosition,d=i(0).LineDataSource,p=i(43).LineToolBrush,_=i(79),f=_.isLineToolName,m=_.isStudyLineToolName,g=i(85).BarsMarksContainer,y=i(32).trackEvent,v=i(106).isFeatureEnabled,b=i(131).showEditObjectDialog,S=i(183).ActionBinder,i(753).makeTimeLimited,w=i(288).createToolbarAction,T=i(7).ensureNotNull,P=i(30).PriceDataSource,x=i(40),C=x.Action,L=x.ActionPlaceholder,I=x.ActionSeparator,M=i(86),k=i(33),A=i(9).HitTestResult,E=i(754),D=i(16),V=i(38),O=i(72),R=O.resizeCanvas,B=O.hardResizeCanvas,z=O.clearRect,N=O.addCanvasTo,F=O.Size,W=i(81).setMouseEventHandler,H=i(184),j=i(132),U=i(281).PaneCursorType,q=i(5).getLogger("Chart.PaneWidget"),Y=["LineToolOrder","LineToolPosition","AlertLabel"],G={contextMenuEnabled:!0,priceScaleContextMenuEnabled:!0,legendWidgetEnabled:!0,legendWidget:{},verticalTouchScroll:!1,propertyPagesEnabled:!0,sourceSelectionEnabled:!0},o.prototype.destroy=function(){$(window).off("keyup.panewidget",this._onKeyUpListener),this.legendWidget&&(this.legendWidget.destroy(),this.legendWidget.$el.remove(),delete this.legendWidget),this.paneControls&&(this.paneControls.destroy(),delete this.paneControls),this.lhsPriceAxisWidget.destroy(),this.rhsPriceAxisWidget.destroy(),this._chart.withModel({chart:this._chart,instance:this,callback:this._hideTooltip},function(){
this.chart.model().lineCancelled().unsubscribe(this.instance,this.callback)}),this.jqRow.remove(),this.jqRow.find("*").remove();for(var e in this)delete this[e];this._state&&this._state.onDestroyed().unsubscribe(this,o.prototype._onStateDestroyed)},o.prototype.cancelZoom=function(){this._zoomSelector.css("display","none"),delete this._firstZoomPoint},o.prototype._onKeyUpListener=function(e){if(27===e.keyCode){this._chart.model().lineBeingCreated()&&this._chart.model().cancelCreatingLine(),this._firstZoomPoint&&this.cancelZoom();this._chart.model().model().crossHairSource().clearMeasure(),this.setCursorForTool(),this._hideTooltip()}},o.prototype._lineCancelledCallback=function(){try{this._chart.model().lineCancelled().subscribe(this,this._hideTooltip)}catch(e){}},o.prototype.backgroundColor=function(){return this._chart.properties().paneProperties.background.value()},o.prototype.priceAxisByCanvas=function(e){return e===this.lhsPriceAxisWidget.canvas||e===this.lhsPriceAxisWidget.top_canvas?this.lhsPriceAxisWidget:e===this.rhsPriceAxisWidget.canvas||e===this.rhsPriceAxisWidget.top_canvas?this.rhsPriceAxisWidget:null},o.prototype.updateScalesVisibility=function(){this.lhsPriceAxisWidget.setVisible(this._chart.properties().scalesProperties.showLeftScale.value()),this.rhsPriceAxisWidget.setVisible(this._chart.properties().scalesProperties.showRightScale.value())},o.prototype.chart=function(){return this._chart},o.prototype._chartModel=function(){return this._chart.model().model()},o.prototype.state=function(){return this._state},o.prototype.setState=function(e){this._state&&this._state.onDestroyed().unsubscribe(this,o.prototype._onStateDestroyed),this._state=e,this._state&&this._state.onDestroyed().subscribe(this,o.prototype._onStateDestroyed,!0)},o.prototype._onStateDestroyed=function(){this._state&&this._state.onDestroyed().unsubscribe(this,o.prototype._onStateDestroyed),this._state=null},o.prototype.stretchFactor=function(){return this._state?this._state._stretchFactor:0},o.prototype.setStretchFactor=function(e){this._state&&(this._state._stretchFactor=e)},o.prototype.mouseEnterEvent=function(e){var t=this._chart.model();t&&(t.crossHairSource().visible=!0,"function"==typeof this.onMouseEnter&&this.onMouseEnter(this))},o.prototype.hideInplaceEditor=function(){return!!this._inplaceEditor&&(this._inplaceEditor.remove(),this._inplaceEditor=void 0,!0)},o.prototype._processMouseMoveWhileZoom=function(e){var t=Math.floor(this._chart.model().timeScale().coordinateToIndex(e.localX)),i=this._chart.model().timeScale().indexToCoordinate(t)-.5*this._chart.model().timeScale().barSpacing(),o=e.localY,n=Math.abs(i-this._firstZoomPoint.x),r=Math.abs(o-this._firstZoomPoint.y);i<this._firstZoomPoint.x?this._zoomSelector.css("left",i):this._zoomSelector.css("left",this._firstZoomPoint.x),e.localY<this._firstZoomPoint.y?this._zoomSelector.css("top",e.localY):this._zoomSelector.css("top",this._firstZoomPoint.y),this._zoomSelector.width(n),this._zoomSelector.height(r)},o.prototype._finishZoom=function(e){
var t=T(this._state),i=t.defaultPriceScale(),o=t.mainDataSource().firstValue(),n=i.coordinateToPrice(e.localY,o),r=Math.round(this._chart.model().timeScale().coordinateToIndex(e.localX));r!==this._firstZoomPoint.index&&this._chart.model().zoomToViewport(this._firstZoomPoint.index,r,this._firstZoomPoint.price,n,t),this._zoomSelector.css("display","none"),this._firstZoomPoint=null,k.resetToCursor()},o.EvironmentState=function(e){e.shiftKey&&(this.shift=!0),e.ctrlKey&&(this.control=!0)},o.prototype.checkMovepoint=function(e){return e===A.MOVEPOINT||e===A.MOVEPOINT_BACKGROUND&&TradingView.isMobile.any()},o.prototype.mouseDownEvent=function(e){var i,r,a,l,c,h,u,p,_,m,g,y,v,b,S;if(this._state&&(document.activeElement!==document.body&&document.activeElement!==document.documentElement?document.activeElement&&document.activeElement.blur?document.activeElement.blur():document.body.focus():document.getSelection?document.getSelection().removeAllRanges():document.selection&&document.selection.clear(),V.emit("mouse_down",{clientX:e.clientX,clientY:e.clientY,pageX:e.pageX,pageY:e.pageY,screenX:e.screenX,screenY:e.screenY}),this._updateCommonTooltip(null),i=this._chart.model(),r=new o.EvironmentState(e),i.mainSeries().setGotoDateResult(),this.hideInplaceEditor(),TradingView.supportTouch()&&(this._skipFirstMove=!0),a=this._state.defaultPriceScale(),!a.isEmpty()&&!i.timeScale().isEmpty())){if(l=i.crossHairSource(),TradingView.supportTouch()&&"LineToolBrush"!==k.tool.value()||i.setAndSaveCurrentPosition(e.localX,e.localY,this._state),c=l.price,h=l.index,l.startMeasurePoint()&&l.endMeasurePoint()&&l.clearMeasure(),r.shift&&k.toolIsCursor(k.tool.value())&&k.tool.setValue("measure"),"measure"===k.tool.value()&&!l.startMeasurePoint())return void l.startMeasuring({price:c,index:h,x:e.localX,y:e.localY},this._state);if(l.startMeasurePoint()&&!l.endMeasurePoint())return l.finishMeasure({price:c,index:h,x:e.localX,y:e.localY}),void k.resetToCursor();if(this._firstZoomPoint)return void this._finishZoom(e);if("zoom"===k.tool.value()&&t.enabled("chart_zoom"))return u=i.timeScale().indexToCoordinate(h)-.5*i.timeScale().barSpacing(),this._firstZoomPoint={price:c,index:h,x:u,y:e.localY},this._zoomSelector.css("display","block"),this._zoomSelector.css("left",u),this._zoomSelector.css("top",e.localY),this._zoomSelector.width(0),void this._zoomSelector.height(0);if(!this._isSelectBarModeEnabled()&&(f(k.tool.value())||i.lineBeingCreated()))return void((!t.enabled("charting_library_base")||h>=0)&&this._mouseDownEventForLineTool(e,r,h,c));if(p=this.dataSourceAtPoint(e.localX,e.localY),_=p&&p.source&&p.source.customization?p.source.customization:{},p.hittest&&p.hittest.result()===A.CUSTOM&&(m=p.hittest.data().mouseDownHandler)&&m(e),!this._chart.readOnly()){if(p&&p.hittest&&p.hittest.result()===A.CUSTOM_MOVE&&(m=p.hittest.data().pressedMouseMoveHandler))return void i.startCustomMoving(p.source,new n(e.localX,e.localY),m);if(p&&!_.disableSelection&&(g=p.hittest&&p.hittest.result()>A.MOVEPOINT_BACKGROUND,
g=g||p.hittest&&p.hittest.result()===A.MOVEPOINT_BACKGROUND&&TradingView.isMobile.any(),g?i.setSelectedSource(p.source,p.hittest&&p.hittest.data()):i.setSelectedSource(null)),p.source&&"eraser"===k.tool.value()&&!_.disableErasing&&(TradingView.isInherited(p.source.constructor,d)||TradingView.isInherited(p.source.constructor,s)))return y=p.hittest.eraseMarker(),void(e.ctrlKey&&void 0!==y&&p.source.processErase?p.source.processErase(i,y):i.removeSource(p.source));if(v=p.source&&TradingView.isInherited(p.source.constructor,d)&&p.source.isLocked(),!(this._lockDrawingsProperty.value()||v)){if(p.source&&p.source.userEditEnabled&&!p.source.userEditEnabled())return;if(p.hittest&&p.hittest.result()===A.CHANGEPOINT)return b=this._state.mainDataSource().firstValue(),a=p.source.priceScale(),c=a.coordinateToPrice(e.localY,b),i.startChangingLinetool(p.source,{index:h,price:c},p.hittest.data(),r),void this._updateTooltip(e.localX,e.localY);if(p.hittest&&this.checkMovepoint(p.hittest.result()))return S=p.source.properties(),r.control&&S.clonable&&S.clonable.value()?void(this._clonningAtMoveLineTool=p.source):void(p.source.isFixed&&p.source.isFixed()?i.startMovingSource(p.source,new n(e.localX,e.localY),p.hittest.data()):(b=this._state.mainDataSource().firstValue(),a=p.source.priceScale(),c=a.coordinateToPrice(e.localY,b),i.startMovingSource(p.source,{index:h,price:c},p.hittest.data())))}if(p.source&&TradingView.isInherited(p.source.constructor,P)&&p.source.isDraggable())return void(this._chart.draggingSource=p.source)}p.hittest&&p.hittest.result()===A.REGULAR||(this._processing=!0)}},o.prototype.drawRightThere=function(e){var t,i;f(e)&&(t=this._chart.model(),i=t.crossHairSource(),t.createLineTool(T(this._state),{index:i.index,price:i.price},e))},o.prototype._finishTool=function(e){var t,i=this._chart.model(),o=k.tool.value();k.resetToCursor(),this._hideTooltip(),i.setSelectedSource(e),this._chart.isTextTool(o)&&(t=i.createUndoCheckpoint(),b(e,i,null,t).then(function(e){e.focusOnText()}))},o.prototype._mouseDownEventForLineTool=function(e,t,i,o){var r,s,a,l,c,h,u,d,_,m,g,y,v,b,S,w,T;if(this._state){if(r=this._chart.model(),s=!1,a=null,l=e.localX,c=e.localY,h=this._chart.model().model().crossHairSource(),u=k.tool.value(),k.hideAllDrawings().setValue(!1),k.lockDrawings().setValue(!1),TradingView.supportTouch()&&f(u)&&"LineToolBrush"!==u&&!r.lineBeingCreated()&&(this._startTouchPoint=new n(l,c),this._initCrossHairPosition=h.currentPoint(),this._skipFirstMove=!0),!r.lineBeingCreated()||r.lineBeingCreated()instanceof p)TradingView.supportTouch()&&"LineToolBrush"!==u||(T={index:i,price:o},a=r.createLineTool(this._state,T,u),r.lineBeingCreated()||(s=!0));else if(d=r.lineBeingCreated().ownerSource().firstValue(),TradingView.supportTouch()){if(this._skipFirstMove=!0,!this._startTouchPoint)return this._startTouchPoint=new n(l,c),_=r.lineBeingCreated().points(),m=_[_.length-1],g=r.timeScale().indexToCoordinate(m.index),o=m.price,y=r.lineBeingCreated().priceScale(),v=y.priceToCoordinate(o,d),void(this._lastDrawingPoint=new n(g,v))
}else a=r.lineBeingCreated(),b=r.paneForSource(a),b!==this._state?(S=this._dv.offset(),l=e.localX+S.left,c=e.localY+S.top,w=this._chart.paneByState(b),S=w._dv.offset(),l-=S.left,c-=S.top,o=a.priceScale().coordinateToPrice(c,d),i=Math.round(r.timeScale().coordinateToIndex(l)),s=r.coninueCreatingLine({index:i,price:o},t)):s=r.coninueCreatingLine({index:i,price:o},t);r.setSelectedSource(a),s?this._finishTool(a):TradingView.supportTouch()&&"LineToolBrush"!==u||this._updateTooltip(e.localX,e.localY)}},o.prototype._equalsCursorCache=function(e,t){return k.toolIsCursor(e.tool)?e.tool===t.tool&&e.theme===t.theme&&e.crosshair===t.crosshair:e.tool===t.tool&&e.theme===t.theme},o.prototype._setCursorClassName=function(e){var t="";e&&(t="pane--cursor-"+e),this._currentCursorClassName!==t&&(this._currentCursorClassName&&this.jqPane.removeClass(this._currentCursorClassName),t&&this.jqPane.addClass(t),this._currentCursorClassName=t,this.jqPane.css("cursor"))},o.prototype.setCursorForTool=function(e,t){var i,o=k.tool.value();if(k.toolIsCursor(o)){if(this._chart.draggingSource||this._isScrolling||this._chart.model()&&this._chart.model().sourceBeingMoved())return void this._setCursorClassName("grabbing");if(e&&this._options.sourceSelectionEnabled)return void this._setCursorClassName("pointer")}return"eraser"===o?void this._setCursorClassName("eraser"):"zoom"===o?void this._setCursorClassName("zoom-in"):"dot"===(i=k.cursorTool.value())?void this._setCursorClassName("dot"):"arrow"===i?void this._setCursorClassName("default"):void this._setCursorClassName("")},o.prototype.setDragToAnotherPaneCursor=function(){this._setCursorClassName("grabbing")},o.prototype.gestureStartEvent=function(e){this._prev_pinch_scale=1,this._pinching=!0},o.prototype.gestureChangeEvent=function(e){var t,i,o=e.center.x-5,n=this._chart.paneWidgets()[0].lhsPriceAxisWidget.size.w,r=this._chart.model().timeScale().width();n&&(o=Math.max(0,o-n)),o=Math.min(o,r),t=2*(o/r-.5),i=5*(e.scale-this._prev_pinch_scale),i>0?this._chart.model().zoomIn(t,i):i<0&&this._chart.model().zoomOut(t,-i),this._prev_pinch_scale=e.scale},o.prototype.gestureEndEvent=function(e){this._pinching=!1},o.prototype._updateCommonTooltip=function(e){var t,i,o,n=this._lastCommonTooltipData,r=null;if(e&&e.hittest&&e.hittest.result()===A.CUSTOM&&(t=e.hittest.data())&&(r=t.tooltip||null),null!=n||null!=r)return null==r?(this._lastCommonTooltipData=null,void j.hide()):void(n&&r.text===n.text&&r.rect.x===n.rect.x&&r.rect.y===n.rect.y&&r.rect.w===n.rect.w&&r.rect.h===n.rect.h||(this._lastCommonTooltipData=r,i=TradingView.clone(r),o=this.jqPane.offset(),i.rect.x+=o.left,i.rect.y+=o.top,j.show(i)))},o.prototype._processMouseMoveForCustomHandler=function(e){var t,i=this.dataSourceAtPoint(e.localX,e.localY);i.hittest&&i.hittest.result()===A.CUSTOM&&(t=i.hittest.data().mouseMoveHandler)&&t(e)},o.prototype.mouseMoveEvent=function(e){var t,i,n,r,s,a,l,c,h,u,d,p,_,m,g;if(this._state&&(this._processMouseMoveForCustomHandler(e),t=this._chart.model())){if(i=e.localX,n=e.localY,r=new o.EvironmentState(e),
this._firstZoomPoint)return void this._processMouseMoveWhileZoom(e);if(s=!1,!(this._chart.readOnly()||this._editDialog&&this._editDialog.isVisible())&&(a=k.tool.value(),l=null,c=null,h=null,this._processing||!k.toolIsCursor(a)&&"eraser"!==a||(l=this.dataSourceAtPoint(e.localX,e.localY),u=l&&l.source,s=!!u&&-1!==Y.indexOf(u.toolname),l.hittest&&l.hittest.result()>A.MOVEPOINT_BACKGROUND?(c=l.source,h=l.hittest.result(),!l.source||"eraser"===a&&l.source.constructor===TradingView.Series?t.setHoveredSource(null):t.setHoveredSource(l.source,l.hittest.data())):t.setHoveredSource(null)),this._options.sourceSelectionEnabled&&(this._isSelectBarModeEnabled()?this._setCursorClassName("pointer"):this.setCursorForTool(c,h)),this._updateCommonTooltip(l),null!==l&&null!==l.hittest&&l.hittest.result()===A.CUSTOM_MOVE))switch(d=l.hittest.data()||{},d.cursorType){case U.VerticalResize:this._setCursorClassName("ns-resize")}if(this._chart.model().crossHairSource().setLinesShouldBeHidden(s),this._chart.readOnly()&&this._options.sourceSelectionEnabled&&(l=this.dataSourceAtPoint(e.localX,e.localY),null!==l.source?t.setHoveredSource(l.source,l.hittest.data()):t.setHoveredSource(null,null)),this._chart.model().lineBeingCreated()&&(p=this._chart.model().lineBeingCreated(),(_=this._chart.model().paneForSource(p))!==this._state))return m=this._dv.offset(),i+=m.left,n+=m.top,g=this._chart.paneByState(_),m=g._dv.offset(),i-=m.left,n-=m.top,void t.setAndSaveCurrentPosition(i,n,_);a=k.tool.value(),TradingView.supportTouch()&&f(a)||(t.setAndSaveCurrentPosition(i,n,this._state,r),this._updateTooltip(i,n))}},o.prototype.pressedMouseMoveEvent=function(e){var i,r,s,a,l,c,h,u,_,m,g,y,v,b,S,w,T,P,x,C,L,I,M,A,E,D,V,O,R,B,z;if(this._state&&!this._pinching){if(this._skipFirstMove?(delete this._skipFirstMove,delete this._touchMove):this._touchMove=!0,i=new o.EvironmentState(e),r=this._chart.model(),s=e.localX,a=e.localY,this._firstZoomPoint)return this._processMouseMoveWhileZoom(e),void(this._firstZoomPoint.draggingMode=!0);if(l=k.tool.value(),TradingView.supportTouch()&&this._startTouchPoint&&f(l)&&"LineToolBrush"!==l&&!r.lineBeingCreated()&&!this._isSelectBarModeEnabled())return c=this._initCrossHairPosition,h=new n(s,a),u=h.subtract(this._startTouchPoint),_=c.add(u),this._chart.model().setAndSaveCurrentPosition(_.x,_.y,this._state),void this._updateTooltip(_.x,_.y);if(TradingView.supportTouch()&&r.lineBeingCreated()&&!(r.lineBeingCreated()instanceof p))return void(this._startTouchPoint&&(m=r.lineBeingCreated(),g=e.localX-this._startTouchPoint.x,y=e.localY-this._startTouchPoint.y,v=this._lastDrawingPoint.x+g,b=this._lastDrawingPoint.y+y,S=this._chart.model().paneForSource(m),r.setAndSaveCurrentPosition(v,b,S),this._updateTooltip(v,b)));if(r.setAndSaveCurrentPosition(s,a,this._state,i),this._updateTooltip(s,a),w=k.tool.value(),T=this._isSelectBarModeEnabled(),(!f(w)||"LineToolBrush"===l||T)&&(0===e.button||Modernizr.touch)){if("LineToolBrush"===w&&!T){if(P=this._state.defaultPriceScale(),P.isEmpty())return;if(!(x=this._chart.model().lineBeingCreated()))return
;return C=x.ownerSource().firstValue(),L=P.coordinateToPrice(e.localY,C),I=Math.round(this._chart.model().timeScale().coordinateToIndex(e.localX)),void((!t.enabled("charting_library_base")||I>=0)&&this._chart.model().coninueCreatingLine({index:I,price:L}))}if(this._chart.draggingSource&&(M=e.target,A=this._chart.paneByCanvas(M),A&&(A!==this?A.setDragToAnotherPaneCursor():A.setCursorForTool()),E=this._chart.priceAxisByCanvas(M),E&&E.setCursor("grabbing"),(D=this._chart.timeAxisByCanvas(M))&&D.setCursor("grabbing")),r.timeScale().isEmpty())return;if(r.customMoveBeingProcessed())return void r.processCustomMove(new n(s,a));if(r.lineBeingEdited())return I=Math.round(this._chart.model().timeScale().coordinateToIndex(s)),(!t.enabled("charting_library_base")||I>=0)&&r.changeLinePoint({x:s,y:a},i),this._updateTooltip(s,a),void this.setCursorForTool();if(r.sourceBeingMoved()){if(V=r.sourceBeingMoved(),P=V.priceScale(),P.isEmpty())return;if(O=V.ownerSource(),C=(O||this._state.mainDataSource()).firstValue(),I=this._chart.model().timeScale().coordinateToIndex(e.localX),L=P.coordinateToPrice(e.localY,C),this.setCursorForTool(),t.enabled("charting_library_base")&&!V.onlyYMoving()&&(R=V.points(),0!==R.length&&R.reduce(function(e,t){return t.index<e.index?t:e}).index-((V._currentMovingPoint||V._startMovingPoint).index-I)<0))return;return TradingView.isInherited(V.constructor,d)&&V.isFixed()?void r.moveSource(new n(s,a)):void r.moveSource({index:I,price:L},i)}if(i.control&&this._clonningAtMoveLineTool)return m=this._clonningAtMoveLineTool,B=this.cloneLineTool(m,!0),z=this._chart.model().model().dataSourceForId(B),this._chart.model().setSelectedSource(z),C=this._state.mainDataSource().firstValue(),r.startMovingSource(z,{index:this._chart.model().timeScale().coordinateToIndex(e.localX),price:m.priceScale().coordinateToPrice(e.localY,C)}),void(this._clonningAtMoveLineTool=null);P=this._state.defaultPriceScale(),!this._startScrollingPos&&t.enabled("chart_scroll")&&(this._startScrollingPos={x:e.clientX,y:e.clientY}),this._startScrollingPos&&(this._startScrollingPos.x===e.clientX&&this._startScrollingPos.y===e.clientY||this._isScrolling||(r.beginUndoMacro("scroll").setCustomFlag("doesnt_affect_save",!0),P.isEmpty()||r.startScrollPrice(this._state,P,e.localY),r.startScrollTime(e.localX),this._isScrolling=!0,this.setCursorForTool())),this._isScrolling&&(P.isEmpty()||r.scrollPriceTo(this._state,P,e.localY),r.scrollTimeTo(e.localX))}}},o.prototype._processMouseUpForCustomHandler=function(e){var t,i=this.dataSourceAtPoint(e.localX,e.localY);i.hittest&&i.hittest.result()===A.CUSTOM&&(t=i.hittest.data().mouseUpHandler)&&t(e)},o.prototype.mouseUpEvent=function(e){var t,i,o,n,s,a,l,c,h,u,d,_,m,g,y,v,b,S,w,T,P,x,C,L,I,M,A,E,O,R,B,z,N;if(this._state){if(this._processMouseUpForCustomHandler(e),this._clonningAtMoveLineTool=null,t=this,V.emit("mouse_up",{clientX:e.clientX,clientY:e.clientY,pageX:e.pageX,pageY:e.pageY,screenX:e.screenX,screenY:e.screenY}),i=this._chart.model(),o=this._touchMove,delete this._touchMove,n=k.tool.value(),
TradingView.supportTouch()&&!o&&"LineToolBrush"!==n&&f(n)&&!i.lineBeingCreated())return s=i.crossHairSource().currentPoint(),a=this._state.defaultPriceScale(),l=this._state.mainDataSource().firstValue(),c=a.coordinateToPrice(s.y,l),h=Math.round(i.timeScale().coordinateToIndex(s.x)),u={index:h,price:c},d=i.createLineTool(this._state,u,n),i.setSelectedSource(d),i.lineBeingCreated()||this._finishTool(d),this._updateTooltip(s.x,s.y),void delete this._startTouchPoint;if(i.lineBeingCreated()&&!(i.lineBeingCreated()instanceof p)&&this._startTouchPoint)return _=!1,delete this._startTouchPoint,o||(d=i.lineBeingCreated(),m=d.points()[d.points().length-1],c=m.price,_=i.coninueCreatingLine({index:m.index,price:c},{}),delete this._lastDrawingPoint),void(_&&this._finishTool(d));if(this._firstZoomPoint&&this._firstZoomPoint.draggingMode)return void this._finishZoom(e);if(0===e.button||TradingView.supportTouch()){if(this._processing=!1,i=this._chart.model(),i.customMoveBeingProcessed()&&i.endCustomMoving(),i.lineBeingEdited())return i.endChangingLinetool(),void this._hideTooltip();if("LineToolBrush"===n&&!this._isSelectBarModeEnabled()){if(i.finishLineTool(),a=this._state.defaultPriceScale(),a.isEmpty())return;if(!(g=this._chart.model().lineBeingCreated()))return;return l=g.ownerSource().firstValue(),c=a.coordinateToPrice(e.localY,l),h=Math.round(this._chart.model().timeScale().coordinateToIndex(e.localX)),void this._chart.model().coninueCreatingLine({index:h,price:c})}if(y=i.sourceBeingMoved())return i.endMovingSource(),this._hideTooltip(),this.setCursorForTool(y),void i.invalidate(new D(D.UPDATE_CURSOR_ONLY));if(this._chart.readOnly()||(v=this.dataSourceAtPoint(e.localX,e.localY),b=this._chart.model().crossHairSource(),S=e.localX>=0&&e.localX<this.size.w,v&&v.source===b||!S||(w=t._chart.model().timeScale().coordinateToIndex(e.localX),t._chart.model().model().onSyncScrollNeeded(w))),T=this._isScrolling&&this._chart.model().undoHistory.undoStack().head()instanceof r,this._isScrolling&&(a=this._state.defaultPriceScale(),i.endScrollPrice(this._state,a),t=this,P=function(){i.endScrollTime(),i.endUndoMacro(),t._startScrollingPos=void 0,t._isScrolling=!1,t.setCursorForTool()},TradingView.supportTouch()?(x=i.timeScale().m_scrollStartPoint,C=.05*(e.localX-x),L=null,I=function(t){var o,n;null===L&&(L=t),o=.01*Math.min(100,3*(t-L)),o=Math.sqrt(o),n=e.localX+C*o,i.scrollTimeTo(n),o>=1?P():requestAnimationFrame(I)},requestAnimationFrame(I)):P()),this._chart.draggingSource)for(M=e.target,A=this._chart.paneByCanvas(M),A&&A!==this&&(E=A._state.findSuitableScale(this._chart.draggingSource),T&&(T=!1,this._chart.model().undoHistory.undo()),this._chart.model().move(this._chart.draggingSource,A._state,E)),O=this._chart.timeAxisByCanvas(M),O&&(T&&(T=!1,this._chart.model().undoHistory.undo()),this._chart.model().move(this._chart.draggingSource,null,null)),this._chart.draggingSource=null,R=this._chart.getTimeScale(),R&&R.restoreDefaultCursor(),v=this.dataSourceAtPoint(e.localX,e.localY),B=this._chart.paneWidgets(),z=0;z<B.length;z++)N=B[z],
N===this&&v?N.setCursorForTool(v.source,v.hittest||null):N.setCursorForTool(),N.lhsPriceAxisWidget.restoreDefaultCursor(),N.rhsPriceAxisWidget.restoreDefaultCursor()}delete this._touchMove}},o.prototype.mouseLeaveEvent=function(e){if(this._state){var t=this._chart.model();t&&(TradingView.isMobile.any()||t.model().clearCurrentPosition(),t.setHoveredSource(null),this._updateCommonTooltip(null),"function"==typeof this.onMouseLeave&&this.onMouseLeave(this))}},o.prototype.mouseClickEvent=function(e){var t,i,o,n;this._state&&(t=this.dataSourceAtPoint(e.localX,e.localY),i=this._chart.model(),o=t.source,this._lastClickedSource!==o&&(this._lastClickedSource&&(this._lastClickedSource.onClickOutside(e),i.chartModel().updateSource(this._lastClickedSource)),this._lastClickedSource=o),t.hittest&&t.hittest.result()===A.CUSTOM&&(n=t.hittest.data().mouseClickHandler)&&(n(e),i.chartModel().updateSource(o)),i.hoveredSource()instanceof g&&i.hoveredSource().onClicked())},o.prototype.showEditDialogForSource=function(e){if(this._options.propertyPagesEnabled&&(!e.userEditEnabled||e.userEditEnabled())){var t=this;b(e,this._chart.model()).then(function(e){t._editDialog=e})}},o.prototype.mouseDoubleClickEvent=function(e){var t,i,o;this._state&&(t=!this._chart.readOnly()&&!f(k.tool.value())&&this.dataSourceAtPoint(e.localX,e.localY),i=t&&t.hittest&&t.source,i&&t.hittest.result()<=A.MOVEPOINT_BACKGROUND&&!TradingView.isMobile.any()&&(i=null),i&&i.customization&&i.customization.disableSelection&&(i=null),i&&i._metaInfo&&"Sessions@tv-basicstudies"===i._metaInfo.id&&(i=this._chart.model().mainSeries()),i?(o=!1,o?TradingView.alertsDispatcher.openEditDialog(t.source.alert()):this.showEditDialogForSource(i)):this._chart.readOnly()||f(k.tool.value())||this._chart.model().lineBeingCreated()||this._chart.model().selectedSource()||this._chart.toggleMaximizePane(this))},o.prototype.showContextMenuForSource=function(e,t){e.hasContextMenu()&&(this._chart.model().setSelectedSource(e),e.constructor===TradingView.Series?this._seriesContextMenu(e).show(t):TradingView.isInherited(e.constructor,s)?this._studyContextMenu(e).show(t):TradingView.isInherited(e.constructor,h)||TradingView.isInherited(e.constructor,u)?this._tradingDrawingsContextMenu(e).show(t):TradingView.isInherited(e.constructor,d)?this._lineContextMenu(e).then(function(e){e.show(t)}):e===this._chart.model().crossHairSource()&&e.handleContextMenuEvent(t))},o.prototype.contextMenuEvent=function(e,t){var i,o,n,r;if(this._chart.model().crossHairSource().startMeasurePoint())return void this._chart.model().crossHairSource().clearMeasure();if(!this._pinching&&(this._firstZoomPoint&&this.cancelZoom(),!this.hideInplaceEditor())){if(!k.toolIsCursor(k.tool.value())&&!this._isSelectBarModeEnabled()){if(TradingView.isMobile.any())return;return k.resetToCursor(!0),this.setCursorForTool(),this._hideTooltip(),void(this._chart.model().lineBeingCreated()&&this._chart.model().cancelCreatingLine())}this._options.contextMenuEnabled&&(this._chart.model().mainSeries().createSessStudy(),this._contextMenuX=e.localX,
this._contextMenuY=e.localY,i=this.dataSourceAtPoint(e.localX,e.localY),o=i?i.source:null,n=i&&i.hittest?i.hittest.result():0,r=n>=A.REGULAR||n>=A.MOVEPOINT_BACKGROUND&&TradingView.isMobile.any(),this._chart.updateActions(),null!==o&&r?this.showContextMenuForSource(o,e):(this._contextMenu(e).then(function(t){return t.show(e)}),this._chart.model().setSelectedSource(null)),this.paint())}},o.prototype._contextMenu=function(e){function t(e){return null===e.text}var i=this;return Promise.all(this._initActions(e)).then(function(e){var o,n,r=i._customActions();for(e=e.filter(function(e){return null!==e}),r.remove.forEach(function(t){for(var i=0;i<e.length;i++)if(e[i].text===t){e.splice(i,1);break}}),o=r.top.concat(e).concat(r.bottom),n=o.length-1;n>0;n--)t(o[n])&&t(o[n-1])&&o.splice(n,1);return o.length&&t(o[0])&&o.splice(0,1),o.length&&t(o[o.length-1])&&o.splice(o.length-1,1),M.createMenu(o,{statName:"ChartContextMenu"})})},o.prototype.createRemoveMenu=function(){var e,t=this._chart.actions(),i=new C({text:window.t("Remove"),statName:"Remove"});return i.subActions||(i.subActions=[]),e=i.subActions,e.push(t.paneRemoveAllStudies,t.paneRemoveAllDrawingTools,t.paneRemoveAllStudiesDrawingTools),i},o.prototype.createDrawingMenu=function(){var e,i,o=this._chart.actions(),n=new C({text:window.t("Drawing Tools"),statName:"DrawingTools"});return n.subActions||(n.subActions=[]),e=n.subActions,t.enabled("left_toolbar")&&e.push(o.drawingToolbarAction),t.enabled("items_favoriting")&&null!==(i=w())&&e.push(i),0!==n.subActions.length&&e.push(new I),e.push(o.magnetAction,o.stayInDrawingModeAction),this._chart.isMultipleLayout()&&e.push(o.syncModeAction),e.push(new I,o.lockDrawingsAction,o.hideAllDrawingsAction,o.paneRemoveAllDrawingTools),n},o.prototype._initActions=function(e){var i,o,n,r,s,a=this,l=this._chart.actions(),c=[];return t.enabled("datasource_copypaste")&&(!(i=H.get())||"study"!==i.type&&"drawing"!==i.type||(o=new C({text:window.t("Paste %s").replace("%s",window.t(i.title||i.type)),shortcut:"Ctrl-V",statName:"Paste"}),o.callbacks().subscribe(null,function(){a._chart.onAppClipboardPaste(a.state())}),c.push(o))),l.gotoDate&&c.push(l.gotoDate),c.length&&c.push(new I),c.push(l.chartReset,l.symbolSearch,l.changeInterval),n=window.widgetbar&&(!window.widgetbar._customization||window.widgetbar._customization.watchlist),n&&l.addToWatchlist&&c.push(l.addToWatchlist),t.enabled("text_notes")&&v("text_notes")&&c.push(l.addToTextNotes),t.enabled("symbol_info")&&c.push(l.showSymbolInfoDialog),c.push(new I,this._createLockTimeAxisAction(e),new I,l.paneObjectTree,l.insertIndicator),t.enabled("charting_library_base")||c.push(l.applyStudyTemplate),t.enabled("compare_symbol")&&c.push(l.compareOrAdd),c.push(this.createDrawingMenu()),t.enabled("charting_library_base")&&c.push(l.hideAllMarks),c.push(this.createRemoveMenu(),new I),r=this._priceAxisMenu(),r&&c.push(r),s=this._timeAxisMenu(),s&&c.push(s),t.enabled("charting_library_base")||c.push(l.applyColorTheme),t.enabled("show_chart_property_page")&&c.push(l.chartProperties),
pro.hasPackage("mtp-mtpredictor")&&T(this._state).containsMainSeries()&&c.push(new I,this._createMTPredictorActions()),c},o.prototype._customActions=function(){var e,i,o,n={top:[],bottom:[],remove:[]},r=this._chart.model(),s=r.timeScale(),a=this._state&&this._state.defaultPriceScale();return t.enabled("custom_items_in_context_menu")?(e=s.isEmpty()?void 0:s.indexToUserTime(s.coordinateToIndex(this._contextMenuX)),a&&!a.isEmpty()&&(o=this._state.mainDataSource().firstValue(),i=a.coordinateToPrice(this._contextMenuY,o)),V.emit("onContextMenu",{unixtime:e?e/1e3:void 0,price:i,callback:function(e){[].concat(e).forEach(function(e){if(e.text)if(e.text.length>1&&"-"===e.text[0])n.remove.push(e.text.slice(1));else{var t;"-"===e.text?t=new I:(t=new C({text:e.text}),t.callbacks().subscribe(null,e.click)),e.position&&"top"===e.position?n.top.push(t):n.bottom.push(t)}})}}),n):n},o.prototype._timeAxisMenu=function(){if(this._chart.model().timeScale().isEmpty())return null;var e=this._chart.getTimeScale();return new C({text:window.t("Time Scale"),subActions:e.getContextMenuActions(),statName:"TimeScale"})},o.prototype.getDefaultPriceAxisWidget=function(){if(!this._state)return null;var e=this._state.defaultPriceScale();return e.isEmpty()?null:e===this._state.leftPriceScale?this.leftPriceAxisWidget():this.rightPriceAxisWidget()},o.prototype._priceAxisMenu=function(){var e=this.getDefaultPriceAxisWidget();return e?new C({text:window.t("Price Scale"),subActions:e.getContextMenuActions(),statName:"PriceScale"}):null},o.prototype._seriesContextMenu=function(e){var i,o,n,r,s,a=this._chart.actions(),l=e.properties().visible.value(),c=null;if(this._chart.readOnly())i=[l?a.seriesHide:this.createActionShow(e),new I,this.createActionShowCountdown(e),new I,this.createActionScaleLeft(e),this.createActionScaleRight(e),this.createActionNoScale(e)],t.enabled("countdown")||i.splice(3,1),c=M.createMenu(i);else{if(o=this._mergeContentMenuItems(e),n=[a.showSymbolInfoDialog,a.compare,l?a.seriesHide:this.createActionShow(e),this.createVisualOrderAction(e),new I,this.createActionShowCountdown(e),new I],t.enabled("countdown")||n.splice(5,2),t.enabled("compare_symbol")||n.splice(1,1),t.enabled("symbol_info")||n.splice(0,1),!this.chart().onWidget()&&t.enabled("show_chart_property_page")&&n.unshift(a.format),r=this.createActionLockScale(e),r&&n.push(r,new I),o.length>0){for(s=0;s<o.length;s++)n.push(o[s]);n.push(new I)}n.push(this.createActionScaleLeft(e),this.createActionScaleRight(e),this.createActionNoScale(e)),pro.hasPackage("mtp-mtpredictor")&&n.push(new I,this._createMTPredictorActions()),c=M.createMenu(n)}return c},o.prototype.toggleLockTimeAxis=function(e,t){var i,o,n;"boolean"!=typeof t&&(t=!k.lockTimeAxis().value()),t&&(i=this._chart.model().timeScale(),o=i.coordinateToIndex(e),n=i.points().roughTime(o),k.lockTimeAxisTime.setValue(n)),k.lockTimeAxis().setValue(t)},o.prototype._createLockTimeAxisAction=function(e){var t=new C({text:window.t("Lock Cursor in Time"),checkable:!0,statName:"ToggleLockCursorInTime"}),i=k.lockTimeAxis().value()
;return t.setChecked(i),t.callbacks().subscribe(null,this.toggleLockTimeAxis.bind(this,e.localX,!i)),t},o.prototype._createHVLineAction=function(e,t){t="vertical"===t&&"vertical"||"horizontal";var i=new C({text:"vertical"===t?window.t("Create Vertical Line"):window.t("Create Horizontal Line"),statName:"vertical"===t?"CreateVerticalLine":"CreateHorizontalLine"});return i.callbacks().subscribe(this,function(){var i=T(this._state),o=i.mainDataSource().firstValue(),n=this._chart.model().timeScale().coordinateToIndex(e.localX),r=i.defaultPriceScale().coordinateToPrice(e.localY,o),s=this._chart.model().createLineTool(i,{index:n,price:r},"vertical"===t&&"LineToolVertLine"||"LineToolHorzLine");this._finishTool(s)}),i},o.prototype._createMTPredictorActions=function(){var e=this,t=function(t,i,o){var n=new C({text:t});return n.callbacks().subscribe(e,function(){var e,t,n,r=this._chart.model(),s=r.timeScale(),a=T(this._state),l=a.defaultPriceScale();s.isEmpty()||l.isEmpty()||(o?(e=a.mainDataSource().firstValue(),t=l.coordinateToPrice(this._contextMenuY,e),n=Math.round(s.coordinateToIndex(this._contextMenuX)),r.createLineTool(a,{index:n,price:t},i)):k.tool.setValue(i))}),n};return new C({text:window.t("MTPredictor"),subActions:[t(window.t("Apply Manual Risk/Reward"),"LineStudyMtpRiskReward",!1),t(window.t("Apply Manual Decision Point"),"LineStudyMtpDecisionPoint",!0),t(window.t("Analyze Trade Setup"),"LineStudyMtpAnalysis",!0),new C({text:window.t("Apply Elliot Wave"),subActions:[t(window.t("Apply Elliot Wave Intermediate"),"LineStudyMtpElliotWaveMain",!0),t(window.t("Apply Elliot Wave Major"),"LineStudyMtpElliotWaveMajor",!0),t(window.t("Apply Elliot Wave Minor"),"LineStudyMtpElliotWaveMinor",!0)]}),new C({text:window.t("Apply WPT Up Wave"),subActions:[t(window.t("Up Wave 1 or A"),"LineStudyMtpUpWave1OrA",!1),t(window.t("Up Wave 2 or B"),"LineStudyMtpUpWave2OrB",!1),t(window.t("Up Wave C"),"LineStudyMtpUpWaveC",!1),t(window.t("Up Wave 3"),"LineStudyMtpUpWave3",!1),t(window.t("Up Wave 4"),"LineStudyMtpUpWave4",!1),t(window.t("Up Wave 5"),"LineStudyMtpUpWave5",!1)]}),new C({text:window.t("Apply WPT Down Wave"),subActions:[t(window.t("Down Wave 1 or A"),"LineStudyMtpDownWave1OrA",!1),t(window.t("Down Wave 2 or B"),"LineStudyMtpDownWave2OrB",!1),t(window.t("Down Wave C"),"LineStudyMtpDownWaveC",!1),t(window.t("Down Wave 3"),"LineStudyMtpDownWave3",!1),t(window.t("Down Wave 4"),"LineStudyMtpDownWave4",!1),t(window.t("Down Wave 5"),"LineStudyMtpDownWave5",!1)]})]})},o.prototype.createEarningsShow=function(e){var t=this._chart.model().mainSeries().properties().esdShowEarnings,i=new C({checkable:!0,text:window.t("Show Earnings"),enabled:!0,checked:t.value(),statName:"ToggleShowEarnings"});return i.callbacks().subscribe(this,function(e){this._chart.model().setProperty(t,e.checked,"Show Earnings")}),i},o.prototype.createDividendsShow=function(e){var t=this._chart.model().mainSeries().properties().esdShowDividends,i=new C({checkable:!0,text:window.t("Show Dividends"),enabled:!0,checked:t.value(),statName:"ToggleShowDividends"})
;return i.callbacks().subscribe(this,function(e){this._chart.model().setProperty(t,e.checked,"Show Dividends")}),i},o.prototype.createSplitsShow=function(e){var t=this._chart.model().mainSeries().properties().esdShowSplits,i=new C({checkable:!0,text:window.t("Show Splits"),enabled:!0,checked:t.value(),statName:"ToggleShowSplits"});return i.callbacks().subscribe(this,function(e){this._chart.model().setProperty(t,e.checked,"Show Splits")}),i},o.prototype._studyEsdContextMenu=function(e){var t=[];return this._chart.readOnly()||t.push(this.createDividendsShow(e),this.createSplitsShow(e),this.createEarningsShow(e)),M.createMenu(t)},o.prototype._studyContextMenu=function(e){var i,o,n,r,s,a=this._chart.actions(),l=e.properties().visible.value(),c=[];return e.userEditEnabled()?(i=this._chart,this._chart.readOnly()?c=[l?a.studyHide:this.createActionShow(e),new I,this.createActionScaleLeft(e),this.createActionScaleRight(e),this.createActionNoScale(e)]:(o=[],n=e.metaInfo(),n.pine&&(o=[a.viewSourceCode],a.viewSourceCode.setEnabled(!0),ScriptLib.isAuthToGetPineSourceCode(n.scriptIdPart,n.pine.version).done(function(e){e||a.viewSourceCode.setEnabled(!1)}).fail(function(e){q.logError("Failed isAuthToGetPineSourceCode, reason: "+e)})),c=[],t.enabled("study_on_study")&&e.canHaveChildren()&&c.push(this.createActionAddChildStudy(e)),t.enabled("property_pages")&&c.push(a.format),c=c.concat(o),c=c.concat([l?a.studyHide:this.createActionShow(e),this.createVisualOrderAction(e),new I]),r=this._mergeContentMenuItems(e),!r.length||e.properties().linkedToSeries&&e.properties().linkedToSeries.value()||(r.push(new I),c=c.concat(r)),c.push(this.createActionScaleLeft(e),this.createActionScaleRight(e),this.createActionNoScale(e),new I),t.enabled("datasource_copypaste")&&!e.isChildStudy()&&(s=new C({text:window.t("Copy"),shortcut:"Ctrl-C",statName:"Copy"}),s.callbacks().subscribe(null,function(){i.onAppClipboardCopy(e)}),c.push(s)),c.push(a.studyRemove)),M.createMenu(c)):M.createMenu(c)},o.prototype.createLineToolTemplateAction=function(e){var t,i,o,n,r,s,a;return window.lineToolPropertiesToolbar?(t=window.lineToolPropertiesToolbar.templatesList(),i=new C({text:window.t("Templates"),statName:"Templates"}),i.subActions||(i.subActions=[]),o=i.subActions,n=new C({text:window.t("Save As..."),statName:"SaveAs"}),n.callbacks().subscribe(this,function(){t.showSaveDialog(function(i){var o=JSON.stringify(e.template());t.saveTemplate(i,o)})}),o.push(n),r=new C({text:window.t("Apply Default"),statName:"ApplyDefault"}),r.callbacks().subscribe(this,function(){this._chart.model().restoreLineToolFactoryDefaults(e,"Load default drawing template"),window.lineToolPropertiesToolbar.onSourceChanged(e)}),o.push(r),s=$.Deferred(),t.templatesLoaded().then(function(){var e=t.getData(),i=[];0!==e.length&&i.push(new I),$.each(e,function(e,o){function n(e){return function(){var i=this.getTopLevelMenu();return i&&i.hide(),t.deleteAction(e),!0}}var r=new C({text:o,statName:"ApplyTemplate"});r.callbacks().subscribe(this,function(){t.loadTemplate(o)}),r.deleteButton={
action:n(r.text)},i.push(r)}),s.resolve(i)}),a=new L(s),o.push(a),i):null},o.prototype._lineContextMenu=function(e){var n=[],r=this._chart,s=r.actions(),a=this;return new Promise(function(l){i.e(23).then(function(c){var h,u,d,p,_,f,m=i(817).hasStylesPropertyPage;if(r.readOnly())n.push(s.lineHide);else if(e.userEditEnabled()&&(t.enabled("alerts")&&!a.chart().onWidget()&&e.hasAlert.value()&&n.push(a._createEditAlertDrawingAction(e)),t.enabled("property_pages")&&m(e,r.model())&&n.push(s.format),n.push(s.paneObjectTree),t.enabled("charting_library_base")||null!==(h=a.createLineToolTemplateAction(e))&&n.push(h),n.push(a.createVisualOrderAction(e),new I,s.lineHide,s.lineToggleLock),e.properties().clonable&&e.properties().clonable.value()&&(u=new C({text:window.t("Clone"),callbackContext:{target:e},shortcut:"Ctrl+Drag",doNotBindShortcut:!0,statName:"Clone"}),u.callbacks().subscribe(a,o.prototype.cloneLineTool.bind(a,e,!1)),n.push(u)),t.enabled("datasource_copypaste")&&!e.properties().blockCopying&&(d=new C({text:window.t("Copy"),shortcut:"Ctrl-C",statName:"Copy"}),d.callbacks().subscribe(null,function(){r.onAppClipboardCopy(e)}),n.push(d)),t.enabled("support_multicharts")&&(e.linkKey?a.chart().isMultipleLayout()&&n.push(s.lineUnlink):a.chart().isMultipleLayout()&&n.push(s.lineCopyToCharts)),n.push(s.lineRemove),e.additionalActions))for(n.push(new I),p=e.additionalActions(r.model()),_=0;_<p.length;_++)n.push(p[_]);f=M.createMenu(n),l(f)}.bind(null,i)).catch(i.oe)})},o.prototype._tradingDrawingsContextMenu=function(e){return M.createMenu(e.contextMenuItems())},o.prototype._chartEventsContextMenu=function(e){var i,o,n,r=[];return t.enabled("property_pages")&&(i=this._chart,o=new C({text:window.t("Format..."),enabled:!0,statName:"Format"}),o.callbacks().subscribe(this,function(e){TVSettings.setValue("properties_dialog.active_tab.chart",window.t("Events & Alerts")),i.showChartProperties()}),r.push(o)),n=new C({text:window.t("Hide Events on Chart"),enabled:!0,statName:"HideEvents"}),n.callbacks().subscribe(this,function(t){e.properties().visible.setValue(!1)}),r.push(n),M.createMenu(r)},o.prototype._createAlertToggleHorzLineLabelAction=function(e){var t=e.properties().line.visible,i=new C({checkable:!0,text:window.t("Extend Alert Line"),enabled:!0,checked:t.value(),statName:"ToggleExtendAlertLine"});return i.callbacks().subscribe(this,function(e){var i=e.checked,o=i?window.t("Show alert label line"):window.t("Hide alert label line");this._chart.model().setProperty(t,i,o)}),i.setEnabled(e.globalProperties().line.visible.value()),i},o.prototype._createShowGlobalAlertPropertiesLabelAction=function(e){var t=this.chart(),i=new C({text:window.t("Visual settings..."),statName:"VisualSettings"});return i.callbacks().subscribe(this,function(e){t.showChartProperties({selectAlertEvent:!0})}),i},o.prototype._createEditAlertDrawingAction=function(e){if(e.hasAlert.value()){var t=new C({text:window.t("Edit {0} Alert...").format(e.title()),statName:"EditAlert"});return t.callbacks().subscribe(null,function(){runOrSignIn(function(){e.editAlert()
},{source:"Alert edit from pane context menu"})}),t}},o.prototype.cloneLineTool=function(e,t){return this._chart.model().cloneLineTool(e,t)},o.prototype.setPriceAxisSize=function(e,t){this._priceAxisWidget(e).setSize(t)},o.prototype.setPriceAxisVisible=function(e,t){this._priceAxisWidget(e).setVisible(t),this._cachedStatus=null},o.prototype.resetPriceAxisOptimalWidth=function(e){this._priceAxisWidget(e).resetOptimalWidth(),this._cachedStatus=null},o.prototype.setSize=function(e){this.size&&this.size.equals(e)||(this.size=e,R(this.canvas,e),R(this.top_canvas,e),this.ctx=this.canvas.getContext("2d"),this.jqPane.width(e.w),this.jqPane.height(e.h),this._cachedStatus=null,this.jqRow.toggleClass("js-hidden",0===e.h))},o.prototype.dataSourceAtPoint=function(e,t){var i,o,r,s,a,l,c,h,u,d,p,_,f,m,g,y,v,b=null,S=null;if(!this._state)return null;for(i=this._state.hitTestSources(),o=new n(e,t),r=i.length;0<r--;)if(s=i[r],a=s.paneViews(this._state))for(l=a.length;0<l--;)(c=a[l].renderer(t))&&c.hitTest&&(h=c.hitTest(o))&&(u=S?S.result():0,h.result()>u&&(S=h,b=s));if(this.containsMainSeries()){for(d=this._chart.model().barsMarksSources(),r=0;r<d.length;++r)for(s=d[r],a=s.paneViews(),l=0;l<a.length;l++)if(c=a[l].renderer(t),p=c.hitTest(o)){S=p,b=s;break}_=this._chart.model().activeStrategySource().value(),f=_&&_._strategyOrdersPaneView,f&&(m=f.renderer())&&(g=m.hitTest(o))&&(S=g,b=_)}return null===b&&null!==this.legendWidget&&(b=this.legendWidget.dataSourceAtPoint(e,t)),y=this._chart.model().brandingSource(),y&&(v=y.paneViews(this._state),v.forEach(function(e){var t=e.renderer().hitTest(o);t&&(S=t,b=y)})),{source:b,hittest:S}},o.prototype.update=function(){this.lhsPriceAxisWidget.update(),this.rhsPriceAxisWidget.update(),null!==this.legendWidget&&this.legendWidget.update(),this.paneControls&&this.paneControls.update()},o.prototype.updateControls=function(){this.paneControls&&this.paneControls.update()},o.prototype.drawBackground=function(e,t){z(e,0,0,this.size.w,this.size.h,t)},o.prototype.drawGrid=function(e){var t,i,o=T(this._state),n=this._chart.model().gridSource(),r=n.paneViews(o),s=o.height(),a=o.width();for(t=0;t<r.length;t++)e.save(),i=r[t].renderer(s,a),i&&i.draw(e),e.restore()},o.prototype.drawWatermark=function(e){var t,i,o,n,r,s,a=this._chart.model().watermarkSource();if(null!==a)for(t=T(this._state),i=a.paneViews(t),o=t.height(),n=t.width(),r=0;r<i.length;r++)e.save(),s=i[r].renderer(o,n),s&&s.draw(e),e.restore()},o.prototype.drawBranding=function(e){var t,i,o,n,r,s,a=this._chart.model().brandingSource();if(a)for(t=T(this._state),i=a.paneViews(t),o=t.height(),n=t.width(),r=0;r<i.length;r++)(s=i[r].renderer(o,n))&&(e.save(),s.draw(e),e.restore())},o.prototype.drawCrossHair=function(e){var t=this._chart.model().crossHairSource();t.linesShouldBeHidden()||(!t.visible&&k.lockTimeAxis().value()&&(t.setLockedPosition(T(this._state)),t.updateAllViews()),this._drawSource(t,e))},o.prototype._drawSource=function(e,t){var i,o,n,r,s=T(this._state),a=e.paneViews(s);if(a)for(i=s.height(),o=s.width(),
n=0;n<a.length;n++)(r=a[n].renderer(i,o))&&(t.save(),r.draw(t),t.restore())},o.prototype._drawSourceStrategyOrders=function(e,t){var i,o=e._strategyOrdersPaneView;o&&(i=o.renderer())&&(t.save(),i.draw(t),t.restore())},o.prototype._drawSourceBackground=function(e,t){var i,o,n,r,s=T(this._state),a=e.paneViews(s);if(a)for(i=s.height(),o=s.width(),n=0;n<a.length;n++)(r=a[n].renderer(i,o))&&r.drawBackground&&(t.save(),r.drawBackground(t),t.restore())},o.prototype.drawActiveLineTool=function(e){var t,i,o=[this._chart.model().lineBeingCreated(),this._chart.model().sourceBeingMoved(),this._chart.model().lineBeingEdited()];for(t=0;t<o.length;t++)(i=o[t])&&this._chart.model().paneForSource(i)===T(this._state)&&this._drawSource(i,e)},o.prototype.disableDrawOnTop=function(e){return e&&e.hasOwnProperty("_metaInfo")&&"Volume@tv-basicstudies"===e._metaInfo.id},o.prototype.drawSources=function(e){var t,i,o,n,r,s=T(this._state),a=s.orderedSources(),l=s.model(),c=this._chart.model().selectedSource(),h=this._chart.model().hoveredSource(),u=l.crossHairSource(),d=[this._chart.model().lineBeingCreated(),this._chart.model().sourceBeingMoved(),this._chart.model().lineBeingEdited()];for(this.disableDrawOnTop(c)&&(c=void 0),this.disableDrawOnTop(h)&&(h=void 0),t=this._chart.model().model().panes(),i=t.length-1;i>=0;i--)t[i].createDrawingsCaches();for(i=0;i<a.length;i++)this._drawSourceBackground(a[i],e);for(i=0;i<a.length;i++)(o=a[i])!==u&&o!==c&&o!==h&&-1===d.indexOf(o)&&this._drawSource(o,e);for(n=null,c&&-1===d.indexOf(c)&&-1!==a.indexOf(c)&&(n=c,this._drawSource(c,e)),h&&h!==n&&-1===d.indexOf(h)&&-1!==a.indexOf(h)&&this._drawSource(h,e),r=this._chart.model().activeStrategySource().value(),r&&this.containsMainSeries()&&this._drawSourceStrategyOrders(r,e),i=t.length-1;i>=0;i--)t[i].clearDrawingCaches()},o.prototype.recalculatePriceScale=function(){var e,t,i,o=T(this._state);for(o.recalculatePriceScale(o.m_rightPriceScale),o.recalculatePriceScale(o.m_leftPriceScale),e=o.dataSources(),t=0;t<e.length;++t)i=e[t],o.isOverlay(i)&&(i instanceof d||o.recalculatePriceScale(i.priceScale()),i.updateAllViews())},o.prototype.containsMainSeries=function(){return T(this._state).containsMainSeries()},o.prototype.drawBarsMarks=function(e,t){var i,o;this.containsMainSeries()&&!t&&(i=this._chart.model().barsMarksSources(),o=this,i.forEach(function(t){o._drawSource(t,e)}))},o.prototype._syncOverlays=function(){var e,t,i=T(this._state).orderedSources(),o={},n=this;$.each(i,function(){var e,t,i=this.paneViews(n._state);if(i)for(e=0;e<i.length;e++)t=i[e],t.uid&&(o[t.uid()]=t)});for(e in this._overlays)o[e]||(this._dv.remove(this._overlays[e]),this._overlays[e]=void 0);for(e in o)this._overlays[e]||(t=o[e].overlay(),this._dv.append(t),this._overlays[e]=t)},o.prototype.hardResetCanvas=function(){this.size&&(B(this.canvas,this.size),B(this.top_canvas,this.size),this.lhsPriceAxisWidget.hardResetCanvas(),this.rhsPriceAxisWidget.hardResetCanvas())},o.prototype.paint=function(e,t){if(e&&this._chart.model()&&this._state)if(this.lhsPriceAxisWidget.paint(e),
this.rhsPriceAxisWidget.paint(e),e===D.FULL_UPDATE&&(this._cachedStatus=null),e===D.UPDATE_CURSOR_ONLY)this.top_ctx.clearRect(-.5,-.5,this.size.w,this.size.h),this.drawCrossHair(this.top_ctx),this.drawActiveLineTool(this.top_ctx);else{var i=this.ctx;this.top_ctx.clearRect(-.5,-.5,this.size.w,this.size.h),this.drawBackground(i,this.backgroundColor()),this._state&&(this.recalculatePriceScale(),this.drawGrid(i),this.drawWatermark(i),this.drawSources(i),this.drawBarsMarks(i,t),this.drawCrossHair(this.top_ctx),this.drawActiveLineTool(this.top_ctx),this.drawBranding(i))}},o.prototype.leftPriceAxisWidget=function(){return this.lhsPriceAxisWidget},o.prototype.rightPriceAxisWidget=function(){return this.rhsPriceAxisWidget},o.prototype._priceAxisWidget=function(e){return l.isLeft(e)?this.lhsPriceAxisWidget:this.rhsPriceAxisWidget},o.prototype.statusWidget=function(){return this.legendWidget},o.prototype.onScaleLeft=function(e){var t=T(this._state),i=e.callbackContext();-1===t.leftPriceScale().dataSources().indexOf(i)&&this.chart().model().move(i,t,t.leftPriceScale())},o.prototype.onScaleRight=function(e){var t=T(this._state),i=e.callbackContext();-1===t.rightPriceScale().dataSources().indexOf(i)&&this.chart().model().move(i,t,t.rightPriceScale())},o.prototype.onNoScale=function(e){var t=T(this._state),i=e.callbackContext();t.isOverlay(i)||this.chart().model().move(i,t,null)},o.prototype.onRiskReward=function(e){},o.prototype.createActionRiskReward=function(e){var t=new C({checkable:!1,text:window.t("Risk/Reward"),enabled:!0,statName:"RiskReward"});return t.setCallbackContext(e),t.callbacks().subscribe(this,o.prototype.onRiskReward),t},o.prototype.createActionScaleLeft=function(e){var t=new C({checkable:!0,text:window.t("Scale Left"),enabled:!0,statName:"ToggleScaleLeft"});return t.setCallbackContext(e),t.setChecked(-1!==T(this._state).leftPriceScale().dataSources().indexOf(e)),t.callbacks().subscribe(this,o.prototype.onScaleLeft),t},o.prototype.createActionScaleRight=function(e){var t=new C({checkable:!0,text:window.t("Scale Right"),enabled:!0,statName:"ToggleScaleRight"});return t.setCallbackContext(e),t.setChecked(-1!==T(this._state).rightPriceScale().dataSources().indexOf(e)),t.callbacks().subscribe(this,o.prototype.onScaleRight),t},o.prototype.createActionNoScale=function(e){var t=this._chart.model().paneForSource(e),i=t.actionNoScaleIsEnabled(e),n=new C({checkable:!0,text:window.t("Screen (No Scale)"),enabled:i,statName:"ToggleNoScale"});return n.setCallbackContext(e),n.setChecked(T(this._state).isOverlay(e)),n.callbacks().subscribe(this,o.prototype.onNoScale),n},o.prototype.createActionShowCountdown=function(e){var t=new C({checkable:!0,text:window.t("Show Countdown"),enabled:!0,statName:"ToggleShowCountdown"}),i=this._chart.model().mainSeries().properties();return t._binding=new S(t,i.showCountdown,this._chart.model(),t.text),t._binding.setValue(i.showCountdown.value()),t},o.prototype.createActionLockScale=function(e){var t,i,o
;return e instanceof TradingView.Series?(t=c(e.priceScale(),this._chart.model().model().mainSeriesScaleRatio()),i=new C({checkable:e.priceScale().isLockScale(),text:window.t("Lock Scale")+" "+t,enabled:!0,statName:"LockScale"}),o=function(t){var i={lockScale:t.checked};this._undoModel.setPriceScaleMode(i,e.priceScale(),this._undoText)},i._binding=new S(i,e.priceScale().properties().lockScale,this._chart.model(),"Lock Scale",o),i):null},o.prototype.createActionMergeUp=function(e){if(!this._chart.model().model().isMergeUpAvailableForSource(e))return null;var t=new C({checkable:!1,text:window.t("Merge Up"),enabled:!0,statName:"MergeUp"});return t.setCallbackContext(e),t.callbacks().subscribe(this,o.prototype.onMergeUp),t},o.prototype.onMergeUp=function(e){var t=e.callbackContext();this._chart.model().mergeSourceUp(t)},o.prototype.createActionUnmergeUp=function(e){if(!this._chart.model().model().isUnmergeAvailableForSource(e))return null;var t=new C({checkable:!1,text:window.t("Unmerge Up"),enabled:!0,statName:"UnmergeUp"});return t.setCallbackContext(e),t.callbacks().subscribe(this,o.prototype.onUnmergeUp),t},o.prototype.onUnmergeUp=function(e){var t=e.callbackContext();this._chart.model().unmergeSourceUp(t)},o.prototype.createActionMergeDown=function(e){if(!this._chart.model().model().isMergeDownAvailableForSource(e))return null;var t=new C({checkable:!1,text:window.t("Merge Down"),enabled:!0,statName:"MergeDown"});return t.setCallbackContext(e),t.callbacks().subscribe(this,o.prototype.onMergeDown),t},o.prototype.onMergeDown=function(e){var t=e.callbackContext();this._chart.model().mergeSourceDown(t)},o.prototype.createActionUnmergeDown=function(e){if(!this._chart.model().model().isUnmergeAvailableForSource(e))return null;var t=new C({checkable:!1,text:window.t("Unmerge Down"),enabled:!0,statName:"UnmergeDown"});return t.setCallbackContext(e),t.callbacks().subscribe(this,o.prototype.onUnmergeDown),t},o.prototype.onUnmergeDown=function(e){var t=e.callbackContext();this._chart.model().unmergeSourceDown(t)},o.prototype._mergeContentMenuItems=function(e){var t=[],i=this.createActionMergeUp(e);return i&&t.push(i),i=this.createActionUnmergeUp(e),i&&t.push(i),i=this.createActionMergeDown(e),i&&t.push(i),i=this.createActionUnmergeDown(e),i&&t.push(i),t},o.prototype.createActionShow=function(e){var t=new C({checkable:!0,text:window.t("Show"),enabled:!0,statName:"ToggleShow"});return t._binding=new S(t,e.properties().visible,this._chart.model(),t.text),t._binding.setValue(e.properties().visible.value()),t},o.prototype.createActionAddChildStudy=function(e){var t=new C({text:window.t("Apply Indicator on {0} ...").format(e.title(!0)),enabled:!0,statName:"ApplyIndicator"});return t.callbacks().subscribe(this,function(){var t,i,o=this._chart.showIndicators(e);o&&(t=function(){y("SOS","Apply SOS","Apply by RC menu")},i=this._chart.model().model().studyInserted(),i.subscribe(this,t),o.visibilityChanged.subscribe(this,function(e){e||i.unsubscribe(this,t)},!0))}),t},o.prototype.bringObjectForward=function(e){
var t=this._chart.model().selectedSource();t&&this._chart.model().changeZOrder(t,1)},o.prototype.sendObjectToBack=function(e){var t=this._chart.model().selectedSource();t&&this._chart.model().sendToBack(t)},o.prototype.bringObjectToFront=function(e){var t=this._chart.model().selectedSource();t&&this._chart.model().bringToFront(t)},o.prototype.sendObjectBackward=function(e){var t=this._chart.model().selectedSource();t&&this._chart.model().changeZOrder(t,-1)},o.prototype.createVisualOrderAction=function(e){var t,i,n,r,s,a,l=new C({text:window.t("Visual Order"),statName:"VisualOrder"});return l.subActions||(l.subActions=[]),t=new C({text:window.t("Bring to Front"),statName:"BringToFront"}),t.callbacks().subscribe(this,o.prototype.bringObjectToFront),l.subActions.push(t),i=new C({text:window.t("Send to Back"),statName:"SendToBack"}),i.callbacks().subscribe(this,o.prototype.sendObjectToBack),l.subActions.push(i),n=new C({text:window.t("Bring Forward"),statName:"BringForward"}),n.callbacks().subscribe(this,o.prototype.bringObjectForward),l.subActions.push(n),r=new C({text:window.t("Send Backward"),statName:"SendBackward"}),r.callbacks().subscribe(this,o.prototype.sendObjectBackward),l.subActions.push(r),s=this._chart.model().paneForSource(e),a=s.getZOrderMinMax(),i.setEnabled(!0),n.setEnabled(!0),r.setEnabled(!0),t.setEnabled(!0),e.zorder()===a.minZOrder&&(i.setEnabled(!1),r.setEnabled(!1)),e.zorder()===a.maxZOrder&&(n.setEnabled(!1),t.setEnabled(!1)),l},o.prototype.image=function(){var e={};return e.leftAxis=this.leftPriceAxisWidget().image(),e.rightAxis=this.rightPriceAxisWidget().image(),e.content=this.canvas.toDataURL(),e.contentWidth=this.size.w,e.contentHeight=this.size.h,e},o.prototype._updateTooltip=function(e,t){if(!this._rafSet){var i=this;requestAnimationFrame(function(){i._state&&(i._updateTooltipImpl(e,t),i._rafSet=!1)}),this._rafSet=!0}},o.prototype._updateTooltipImpl=function(e,t){function i(i){function n(){return TradingView.isMobile.any()?{left:e-o._tooltipSelector.outerWidth()-16,top:t-o._tooltipSelector.outerHeight()-16}:{left:e+16,top:t+16}}TradingView[r].getTooltipText&&(i=TradingView[r].getTooltipText(a)||i),o._tooltipSelector.html(i).removeClass("tooltip-selector-hidden").css(n())}var o,n,r,s,a,l;if(this._chart){for(o=this,n=this._chart.paneWidgets(),r=k.tool.value(),s=T(this._state).model(),a=s.lineBeingCreated(),l=n.length-1;l>=0;l--)n[l]._hideTooltip();this._isSelectBarModeEnabled()||(m(r)&&!TradingView.isMobile.any()?i(window.t("Click to set a point")):TradingView.isMobile.any()&&"LineToolBrush"!==r&&f(r)&&!o._chart.model().lineBeingCreated()?i(window.t("1. Slide your finger to select location for first anchor<br>2. Tap anywhere to place the first anchor")):TradingView.isMobile.any()&&"LineToolBrush"!==r&&f(r)&&i(window.t("1. Slide your finger to select location for next anchor<br>2. Tap anywhere to place the next anchor")))}},o.prototype._hideTooltip=function(){this._tooltipSelector.addClass("tooltip-selector-hidden")},o.prototype._updateCrosshairOnZoom=function(){var e,t
;k.lockTimeAxis().value()&&(e=this._chart.model(),t=e.crossHairSource(),t.setPosition(t.index,t.price,T(this._state)))},o.prototype._isSelectBarModeEnabled=function(){return this._chart.model().crossHairSource().selectBarMode().value()},e.exports=o}).call(t,i(4))},function(e,t){},function(e,t,i){"use strict";function o(e,t){this._source=t,this._properties=e,this._points=[new l(-1,-1)],this._invalidated=!0,this._lineRenderer=new h}function n(){this._data=null}function r(e){this._source=e,this._points=[],this._bandBgRenderer=new n}function s(e,t,i){this._source=e,this._points=[],a(t.type===u.FilledArea.TYPE_HLINES,"Wrong filledArea type: "+t.type),this._initBandIndexes(t.objAId,t.objBId),this._fillStyleProps=i,this._bandBgRenderer=new n}var a=i(7).assert,l=i(6).Point,c=i(46).clamp,h=i(84).HorizontalLineRenderer,u=i(28),d=i(24);o.prototype.update=function(){this._invalidated=!0},o.prototype.updateImpl=function(){var e,t,i=this._source.priceScale();if(!i||i.isEmpty())return void(this._points[0]=new l(-1,-1));e=this._properties.value.value(),isNumber(e)?(t=this._source.firstValue(),this._points[0]=new l(-1,i.priceToCoordinate(e,t))):this._points[0]=new l(-1,NaN)},o.prototype.renderer=function(){this._invalidated&&(this.updateImpl(),this._invalidated=!1);var e={};return e.width=this._source.model().timeScale().width(),e.height=this._source.priceScale().height(),e.points=this._points,e.color=this._properties.color.value(),e.linewidth=this._properties.linewidth.value(),e.linestyle=this._properties.linestyle.value(),this._lineRenderer.setData(e),this._lineRenderer},n.prototype.setData=function(e){this._data=e},n.prototype.draw=function(e){var t,i,o;null!==this._data&&0!==this._data.points.length&&(t=e.canvas.width,e.fillStyle=d.generateColor(this._data.backcolor,this._data.transparency),i=Math.min(this._data.points[0],this._data.points[1]),o=Math.max(this._data.points[0],this._data.points[1]),e.fillRect(0,i,t,o-i))},n.prototype.hitTest=function(e){return null},r.prototype.update=function(){var e,t,i,o,n;this._points=[],e=this._source.properties().bandsBackground,e.fillBackground.value()&&(t=this._source.properties().bands[0],i=this._source.properties().bands[1],(o=this._source.priceScale())&&!o.isEmpty()&&(n=this._source.firstValue(),this._points.push(o.priceToCoordinate(t.value.value(),n)),this._points.push(o.priceToCoordinate(i.value.value(),n))))},r.prototype.renderer=function(){var e={};return e.points=this._points,e.backcolor=this._source.properties().bandsBackground.backgroundColor.value(),e.transparency=this._source.properties().bandsBackground.transparency.value(),this._bandBgRenderer.setData(e),this._bandBgRenderer},s.prototype._initBandIndexes=function(e,t){var i,o;for(this._bandAKey=null,this._bandBKey=null,i=0;i<this._source.metaInfo().bands.length;++i)o=this._source.metaInfo().bands[i],null!==this._bandAKey||o.id!==e?null!==this._bandBKey||o.id!==t||(this._bandBKey=i):this._bandAKey=i},s.prototype.update=function(){var e,t,i,o;this._points=[],
this._fillStyleProps.visible.value()&&(e=this._source.properties().bands[this._bandAKey],t=this._source.properties().bands[this._bandBKey],(i=this._source.priceScale())&&!i.isEmpty()&&(o=this._source.firstValue(),this._points.push(i.priceToCoordinate(e.value.value(),o)),this._points.push(i.priceToCoordinate(t.value.value(),o))))},s.prototype.renderer=function(){var e,t=this._fillStyleProps.transparency.value();return t=c(t,0,100),e={},e.points=this._points,e.backcolor=d.generateColor(this._fillStyleProps.color.value(),t),e.transparency=this._fillStyleProps.transparency.value(),this._bandBgRenderer.setData(e),this._bandBgRenderer},t.BandPaneView=o,t.BandBackgroundPaneView=r,t.HlineFillPaneView=s},function(e,t,i){"use strict";var o,n,r;Object.defineProperty(t,"__esModule",{value:!0}),i.d(t,"StudyPriceAxisView",function(){return r}),o=i(3),n=i(59),r=function(e){function t(t,i){var o=e.call(this)||this;return o._source=t,o._data=i,o}return o.c(t,e),t.prototype._updateRendererData=function(e){e.visible=!1;var t=this._source.lastValueData(this._data.plotIndex,!1);t.noData||(e.background=t.color,e.color=this.generateTextColor(t.color),e.coordinate=t.coordinate,e.floatCoordinate=t.floatCoordinate,e.text=t.text,e.visible=!0)},t}(n.a)},function(e,t,i){"use strict";function o(e,t,i,o){var n,r;for(this.m_study=e,this.m_series=t,this.m_model=i,this._plotName=o,this.m_items=[],this._invalidated=!0,this._isMarkersEnabled=K.enabled("source_selection_markers"),n=this.m_study.metaInfo().plots,this._colorer=null,this._palette=null,this._paletterProps=null,this._plotIndex=0,r=0;r<n.length;r++)n[r].id===this._plotName&&(this._plotIndex=r),this.m_study.isSelfColorerPlot(r)&&n[r].target===this._plotName&&(this._colorer=r,this._palette=this.m_study.metaInfo().palettes[n[r].palette],this._paletterProps=this.m_study.properties().palettes[n[r].palette])}function n(e,t,i,o){var n,r;for(this._study=e,this._series=t,this._model=i,this._plotName=o,this._items=[],this._invalidated=!0,this._isMarkersEnabled=K.enabled("source_selection_markers"),n=this._study.metaInfo().plots,r=0;r<n.length;r++)n[r].id===this._plotName&&(this._plotIndex=r,d(this._study.isBgColorerPlot(r),"Plot '"+this._plotName+"' is not a background colorer!"))}function r(e,t,i,o){var n,r;for(this.m_study=e,this.m_series=t,this.m_model=i,this.m_plotName=o,this.m_items=[],this.m_invalidated=!0,this._isMarkersEnabled=K.enabled("source_selection_markers"),this.m_selectionData=null,this.m_plotIndex=null,n=this.m_study.metaInfo().plots,r=0;r<n.length;r++)if(n[r].id===this.m_plotName){this.m_plotIndex=r;break}for(n=this.m_study.metaInfo().plots,this._colorer=null,this._textColorer=null,this._palette=null,this._textPalette=null,this._paletterProps=null,this._textPaletterProps=null,this._plotIndex=0,r=0;r<n.length;r++)n[r].id===this.m_plotName&&(this._plotIndex=r),this.m_study.isSelfColorerPlot(r)&&n[r].target===this.m_plotName&&(this._colorer=r,this._palette=this.m_study.metaInfo().palettes[n[r].palette],this._paletterProps=this.m_study.properties().palettes[n[r].palette]),
this.m_study.isTextColorerPlot(r)&&n[r].target===this.m_plotName&&(this._textColorer=r,this._textPalette=this.m_study.metaInfo().palettes[n[r].palette],this._textPaletterProps=this.m_study.properties().palettes[n[r].palette])}function s(e,t,i,o){r.call(this,e,t,i,o)}function a(e,t,i,o){s.call(this,e,t,i,o)}function l(e,t,i,o){r.call(this,e,t,i,o),this._maxAbsValue=0}function c(e,t,i,o){var n,r;for(this.m_study=e,this.m_series=t,this.m_model=i,this.m_plotName=o,this.m_bars=[],this._invalidated=!0,this._isMarkersEnabled=K.enabled("source_selection_markers"),n=this.m_study.metaInfo().plots,this._colorer=null,this._palette=null,this._paletterProps=null,this._ohlcPlotIndexes={},r=0;r<n.length;r++)n[r].target===this.m_plotName&&(this.m_study.isOHLCOpenPlot(r)&&(this._ohlcPlotIndexes[TradingView.OPEN_PLOT]=r),this.m_study.isOHLCHighPlot(r)&&(this._ohlcPlotIndexes[TradingView.HIGH_PLOT]=r),this.m_study.isOHLCLowPlot(r)&&(this._ohlcPlotIndexes[TradingView.LOW_PLOT]=r),this.m_study.isOHLCClosePlot(r)&&(this._ohlcPlotIndexes[TradingView.CLOSE_PLOT]=r),this.m_study.isOHLCColorerPlot(r)&&(this._colorer=r,this._palette=this.m_study.metaInfo().palettes[n[r].palette],this._paletterProps=this.m_study.properties().palettes[n[r].palette]))}function h(e,t,i,o){c.call(this,e,t,i,o)}function u(e,t,i,o){c.call(this,e,t,i,o)}var d=i(7).assert,p=i(6).Point,_=i(27),f=_.rgbToHsl,m=_.hslToRgb,g=_.rgbToHexString,y=_.parseRgb,v=_.parseRgba,b=i(9).HitTestResult,S=i(192),w=S.SelectionRenderer,T=S.SelectionRendererArrowsUpDown,P=i(264).PaneRendererBars,x=i(621).PaneRendererHistogram,C=i(622).PaneRendererColumns,L=i(135).PaneRendererLine,I=i(265).PaneRendererArea,M=i(211).PaneRendererCandles,k=i(623).PaneRendererCross,A=i(624).PaneRendererCircles,E=i(169).PaneRendererArrowsUpDownItem,D=i(169).PaneRendererArrowsUpDown,V=i(341).PaneRendererUnicodeChar,O=i(625).PaneRendererBackground,R=i(626).PaneRendererStepLine,B=i(266),z=i(50).CompositeRenderer,N=i(267),F=i(46).clamp,W=i(212),H=i(107),j=H.PlotType,U=H.PlotSymbolSize,q=i(213).MarkLocation,$=i(627),Y=i(24),G=i(20).PlotRowSearchMode,K=i(4);i(628),i(629),i(630),i(631),i(632),i(633),i(634),i(635),i(636),o.isIndexValid=function(e,t){return null!==e&&e>=0&&e<t._length()},o.prototype.items=function(){return this.m_items},o.prototype.update=function(){this._invalidated=!0},o.prototype._updateImpl=function(){var e,t,i,n,r,s,a,l,c,h,u,d,_,f,m,g,y,v,S,w,T,P,x,C,L,I;if(this._histogramBase=null,this.m_items=[],!(this.m_model.timeScale().isEmpty()||this.m_study.priceScale().isEmpty()||null===(e=this.m_model.timeScale().visibleBars())||(t=this.m_series.nearestIndex(e.firstBar(),G.NearestRight),i=this.m_series.nearestIndex(e.lastBar(),G.NearestLeft),n=this.m_study.offset(this._plotName),n>0?(t-=n,i+=n):(t+=n,i-=n),(r=this.m_study.getMinFirstBarIndexForPlot(this._plotName))>i))){if(t=Math.max(r,t),s=this.m_study.properties().styles[this._plotName],a=s.plottype.value(),l=[j.Line,j.Area,j.Circles,j.Cross].indexOf(a)>=0,c=this.m_study.data(),h=this.m_study.firstValue(),l&&c._length()>0){
for(u=c._bsearch(t);o.isIndexValid(u,c)&&void 0===c._valueAt(u)[this._plotIndex+1];)u-=1;for(t=o.isIndexValid(u,c)?c._indexAt(u):t,d=c._bsearch(i);o.isIndexValid(d,c)&&void 0===c._valueAt(d)[this._plotIndex+1];)d+=1;i=o.isIndexValid(d,c)?c._indexAt(d):i}if(_=c.range(t,i),f=this.m_study.priceScale(),m=F(this._getTranspValue(),0,100),g={},y=function(e,t){var i=e+"@"+t;return g[i]||(this._plotName&&"vol"===this._plotName?g[i]=Y.generateColor(e,t):g[i]=Y.generateColor(e,t,!0)),g[i]}.bind(this),_.each(function(e,t){var i,o,r,a,c,h,u,d,_;return e+=n,e=Math.floor(e),i=t[this._plotIndex+1],o=void 0===i||null===i,i=o?NaN:i,(!l||!o)&&(r=new p(e,i),a=void 0!==t[this._colorer+1]||this._palette&&this._palette.addDefaultColor,this._colorer&&a&&(i=t[this._colorer+1],r.style={},null!=i?(c=this._palette.valToIndex?this._palette.valToIndex[i]:i,h=this._paletterProps.colors[c],u=h.color.value(),r.style.color=Y.isHexColor(u)?y(u,m):u):(u=s.color.value(),r.style.color=y(u,100)),d=void 0!==c?h.width.value():s.linewidth.value(),_=void 0!==c?h.style.value():s.linestyle.value(),r.style.width=d,r.style.style=_),this.m_items.push(r),!1)}.bind(this)),f.pointsArrayToCoordinates(this.m_items,h),this.m_model.timeScale().indexesToCoordinates(this.m_items),s.histogramBase&&(this._histogramBase=this.m_study.priceScale().priceToCoordinate(s.histogramBase.value(),h)),this.m_study===this.m_model.selectedSource())for(v=N(t,i),this._selectionData={points:[]},this._selectionData.hittestResult=b.REGULAR,S=0;S<v.length;S++)w=v[S],T=this.m_study.data().valueAt(w),w+=n,null!==T&&(P=T[this._plotIndex+1],x=this.m_model.timeScale().indexToCoordinate(Math.floor(w)),C=this.m_study.priceScale().priceToCoordinate(P,h),this._selectionData.points.push(new p(x,C)));L=s,this._lineColor=Y.generateColor(L.color.value(),m),this._lineWidth=L.linewidth.value(),I=L.color.value(),this._colorer&&null!=(P=this._paletterProps.colors[0])&&(I=P.color.value(),this._lineWidth=P.width.value(),this._lineColor=Y.generateColor(P.color.value(),m)),this._color2=Y.generateColor(I,m),this._color1=Y.generateColor(o.addHueForColor(I),m)}},o.addHueForColor=$(function(e){var t=f(y(e)),i=t[0]+.05;return t[0]=i-Math.floor(i),g(m(t))}),o.prototype._getTranspValue=function(){var e=this.m_study.properties(),t=e.styles[this._plotName],i=0,o=0,n=this.m_study.metaInfo();return"Volume@tv-basicstudies"===n.id&&n.version<=46&&"transparency"in e?(i=e.transparency.value(),i=isNumber(i)?i:o):(t.transparency&&(i=t.transparency.value(),i=isNumber(i)?i:o),i)},o.prototype.renderer=function(){var e,t,i,o,n,r=this.m_study.properties().styles[this._plotName];if(r.visible.value()&&this.m_study.priceScale()){switch(this._invalidated&&(this._updateImpl(),this._invalidated=!1),e={},e.barSpacing=this.m_model.timeScale().barSpacing(),e.items=this.m_items,e.histogramBase=this._histogramBase?this._histogramBase:this.m_study.priceScale().height(),e.lineIndex=0,e.lineStyle=r.linestyle.value(),e.lineColor=this._lineColor,e.lineWidth=this._lineWidth,e.lineWidth=isNumber(e.lineWidth)?e.lineWidth:1,e.color1=this._color1,
e.color2=this._color2,e.bottom=e.histogramBase,this._colorer||(e.simpleMode=!0),t=new z,i=!!r.joinPoints&&r.joinPoints.value(),r.plottype.value()){case j.Line:case j.LineWithBreaks:t.append(new L(e));break;case j.Area:case j.AreaWithBreaks:t.append(new I(e));break;case j.Histogram:t.append(new x(e));break;case j.Columns:t.append(new C(e));break;case j.Cross:t.append(new k(e)),i&&(o=TradingView.merge({},e),o.lineWidth=1,o.forceLineWidth=!0,t.append(new L(o)));break;case j.Circles:t.append(new A(e)),i&&(o=TradingView.merge({},e),o.lineWidth=1,o.ignorePaletteLineWidth=!0,t.append(new L(o)));break;case j.StepLine:n=new R,n.setData(e),t.append(n);break;default:t.append(new L(e))}return this.m_study===this.m_model.selectedSource()&&this._isMarkersEnabled&&t.append(new w(this._selectionData)),t}},n.prototype.items=function(){return this._items},n.prototype.update=function(){this._invalidated=!0},n.prototype._scalesReady=function(){var e=this._model.timeScale(),t=this._study.priceScale();return e&&t&&!e.isEmpty()&&!t.isEmpty()},n.prototype._getTranspValue=function(){var e=this._study.properties(),t=e.styles[this._plotName],i=0;return t.transparency&&(i=t.transparency.value(),i=isNumber(i)?i:40),i},n.prototype._updateImpl=function(){var e,t,i,o,n,r,s,a,l,c,h,u,_;this._items=[],d(this._scalesReady(),"Scales must be ready!"),null!==(e=this._model.timeScale().visibleBars())&&(t=this._study.metaInfo().plots,i=t[this._plotIndex].palette,o=this._study.properties().palettes[i],n=o.colors,r=this._study.metaInfo().palettes[i],s=this._getTranspValue(),a=this._series.nearestIndex(e.firstBar(),G.NearestRight),l=this._series.nearestIndex(e.lastBar(),G.NearestLeft),c=this._study.offset(this._plotName),c>0?(a-=c,l+=c):(a+=c,l-=c),(h=this._study.getMinFirstBarIndexForPlot(this._plotName))>l||(a=Math.max(h,a),u=this._study.data(),_=u.range(a,l),_.each(function(e,t){var i,o,a,l;return e+=c,i=t[this._plotIndex+1],o=new p(Math.floor(e)-.5),a=isNumber(s)?s:50,a=Math.min(a,100),a=Math.max(a,0),null!=i?(l=r.valToIndex?r.valToIndex[i]:i,o.color=Y.generateColor(n[l].color.value(),a)):o.color=null,this._items.push(o),!1}.bind(this)),this._model.timeScale().indexesToCoordinates(this._items)))},n.prototype.renderer=function(){var e,t;if(this._study.properties().styles[this._plotName].visible&&this._study.properties().styles[this._plotName].visible.value()&&this._scalesReady())return this._invalidated&&(this._updateImpl(),this._invalidated=!1),e={items:this._items,y:0,h:this._study.priceScale().height(),w:Math.ceil(this._model.timeScale().barSpacing())},t=new z,t.append(new O(e)),t},r.prototype.items=function(){return this.m_items},r.prototype.update=function(){this.m_invalidated=!0},r.prototype._scalesReady=function(){var e=this.m_model.timeScale(),t=this.m_study.priceScale();return e&&t&&!e.isEmpty()&&!t.isEmpty()},r.prototype._updateImpl=function(){var e,t,i,o,n,r,s,a,l,c,h,u,d,p,_,f,m;this.m_items=[],this._scalesReady()&&(e=this.m_model.timeScale(),t=this.m_study.priceScale(),
null!==(i=e.visibleBars())&&(o=this.m_series.nearestIndex(i.firstBar(),G.NearestRight),n=this.m_series.nearestIndex(i.lastBar(),G.NearestLeft),r=this.m_study.offset(this.m_plotName),r>0?(o-=r,n+=r):(o+=r,n-=r),(s=this.m_study.getMinFirstBarIndexForPlot(this.m_plotName))>n||(o=Math.max(s,o),a=this.m_study.data(),l=this.m_study.firstValue(),c=a.range(o,n),h=this._getTranspValue(),u=N(o,n),d=this.m_study===this.m_model.selectedSource(),this.m_selectionData=d?{points:[],hittestResult:b.REGULAR,vertOffset:0}:null,p=this.m_series.properties().style.value(),_=p===TradingView.Series.STYLE_LINE?"lineStyle":p===TradingView.Series.STYLE_AREA?"areaStyle":null,_?(f=this.m_series.properties()[_].priceSource.value(),m=f):(f="high",m="low"),this._topCoord=t.coordinateToPrice(t.height()*t.topMargin(),l),this._bottomCoord=t.coordinateToPrice(t.height()*(1-t.bottomMargin()),l),c.each(function(e,t){var i,o,n,s,a,l,c,p=Math.floor(e+r),_=t[this.m_plotIndex+1];return null!==_&&void 0!==_&&(i=this._createItem(p,_,f,m),void 0!==i&&null!==i?(o=void 0!==t[this._colorer+1]||this._palette&&this._palette.addDefaultColor,this._colorer&&o&&(_=t[this._colorer+1],i.style={},null!=_?(s=this._palette.valToIndex?this._palette.valToIndex[_]:_,n=this._paletterProps.colors[s].color.value(),i.style.color=Y.generateColor(n,h)):(n=this.m_study.properties().styles[this.m_plotName].color.value(),i.style.color=Y.generateColor(n,100)),a=h>9?h-10:0,i.style.borderColor=Y.generateColor(n,a)),l=void 0!==t[this._textColorer+1]||this._textPalette&&this._textPalette.addDefaultColor,this._textColorer&&l&&(_=t[this._textColorer+1],i.style||(i.style={}),null!=_?(s=this._textPalette.valToIndex?this._textPalette.valToIndex[_]:_,c=this._textPaletterProps.colors[s].color.value(),i.style.textColor=Y.generateColor(c,h)):(c=this.m_study.properties().styles[this.m_plotName].textColor.value(),i.style.textColor=Y.generateColor(c,100))),d&&-1!==u.indexOf(e)&&this.m_selectionData.points.push(i),this.m_items.push(i),!1):void 0)}.bind(this)),this._convertItemsToCoordinates())))},r.prototype._getSeriesVal=function(e,t){var i;e=e||"close",i=null;try{i=this.m_series[e](t)}catch(e){}return i},r.prototype._getTranspValue=function(){var e,t=0;return this.m_study.properties().transparency&&(t=this.m_study.properties().transparency.value(),t=isNumber(t)?t:50),e=this.m_study.properties().styles[this.m_plotName],e.transparency&&(t=e.transparency.value(),t=isNumber(t)?t:50),F(t,0,100)},r.prototype._createItem=function(e,t,i,o){var n,r,s,a=this.m_study.properties().styles[this.m_plotName].location.value();if(!t&&a!==q.Absolute)return null;switch(a){case q.AboveBar:if(void 0===(n=this._getSeriesVal(i,e))||null==n)return null;r=n;break;case q.BelowBar:if(void 0===(s=this._getSeriesVal(o,e))||null==s)return null;r=s;break;case q.Top:r=this._topCoord;break;case q.Bottom:r=this._bottomCoord;break;case q.Absolute:r=t;break;default:throw Error("Bad value: "+a)}return new p(e,r)},r.prototype._convertItemsToCoordinates=function(){var e=this.m_model.timeScale(),t=this.m_study.priceScale()
;e.indexesToCoordinates(this.m_items),t.pointsArrayToCoordinates(this.m_items,this.m_study.firstValue())},r.prototype._calculateVerticalOffset=function(e,t){var i=0;switch(e){case q.AboveBar:case q.Bottom:i=-t;break;case q.BelowBar:case q.Top:i=t}return i},r.prototype._calculateShapeHeight=function(e,t){var i=e;switch(t){case U.Tiny:i=.3*e;break;case U.Small:i=.6*e;break;case U.Normal:i=e;break;case U.Large:i=1.5*e;break;case U.Huge:i=2*e}return i},r.prototype.renderer=function(){var e,t,i,o,n,r,s,a,l,c;if(this.m_study.properties().styles[this.m_plotName].visible&&this.m_study.properties().styles[this.m_plotName].visible.value()&&this._scalesReady())return e=this.m_model.timeScale(),this.m_invalidated&&(this._updateImpl(),this.m_invalidated=!1),t={},i=this._getTranspValue(),o=e.barSpacing(),n=this._calculateShapeHeight(o),r=this.m_study.properties().styles[this.m_plotName].location.value(),s=this._calculateVerticalOffset(r,n+n/2),t.barSpacing=o,t.items=this.m_items,t.color=Y.generateColor(this.m_study.properties().styles[this.m_plotName].color.value(),i),t.height=n,t.vertOffset=s,a=this.m_study.properties().styles[this.m_plotName].plottype.value(),l=W.plotShapesData[a],c=new z,l&&c.append(new TradingView[l.paneRendererClass](t)),this.m_study===this.m_model.selectedSource()&&this._isMarkersEnabled&&null!==this.m_selectionData&&(this.m_selectionData.vertOffset=s,c.append(new w(this.m_selectionData))),c},inherit(s,r),s.prototype.renderer=function(){var e,t,i,o,n,r,s,a,l,c,h,u,d,p,_,f,m,g,y,v,b=this.m_study.properties().styles[this.m_plotName];if(b.visible&&b.visible.value()&&this._scalesReady())return e=this.m_model.timeScale(),this.m_invalidated&&(this._updateImpl(),this.m_invalidated=!1),t={},i=this._getTranspValue(),o=e.barSpacing(),b.size?(r=b.size.value(),n=this._calculateShapeHeight(25,r)):n=Math.round(o/2),s=b.location.value(),a=Y.generateColor(b.color.value(),i),l=i>19?i-10:0,c=this._calculateVerticalOffset(s,Math.round(1.5*n)),t.barSpacing=o,t.items=this.items(),t.color=a,t.borderColor=Y.generateColor(b.color.value(),l),t.height=n,t.vertOffset=c,h=b.plottype.value(),u=W.plotShapesData[h],d=new z,p=b.text?b.text.value():void 0,void 0!==p&&""!==p.trim()&&(_=p.trim().replace(/\\n/gm,"\n"),_=TradingView.cleanButAmpersand(_,!0),f=!1,m=!1,g="Arial",y=12,t.textCache=new B(_,f,m,g,y),v=b.textColor?b.textColor.value():void 0,t.textColor=v?Y.generateColor(v,i):a),null!=u&&d.append(new TradingView[u.paneRendererClass](t)),this.m_study===this.m_model.selectedSource()&&this._isMarkersEnabled&&null!==this.m_selectionData&&(this.m_selectionData.vertOffset=c,d.append(new w(this.m_selectionData))),d},inherit(a,s),a.prototype.renderer=function(){var e,t,i,o,n,r,s,a,l,c,h,u,d,p,_,f,m,g=this.m_study.properties().styles[this.m_plotName];if(g.visible&&g.visible.value()&&this._scalesReady())return e=this.m_model.timeScale(),this.m_invalidated&&(this._updateImpl(),this.m_invalidated=!1),t={},i=this._getTranspValue(),o=e.barSpacing(),g.size?(r=g.size.value(),n=this._calculateShapeHeight(50,r)):n=Math.round(o),s=g.location.value(),
a=Y.generateColor(g.color.value(),i),l=this._calculateVerticalOffset(s,n),t.items=this.items(),t.char=g.char.value(),t.height=n,t.vertOffset=l,t.color=a,c=new z,h=g.text?g.text.value():void 0,void 0!==h&&""!==h.trim()&&(u=h.trim().replace(/\\n/gm,"\n"),u=TradingView.cleanButAmpersand(u,!0),d=!1,p=!1,_="Arial",f=12,t.textCache=new B(u,d,p,_,f),m=g.textColor?g.textColor.value():void 0,t.textColor=m?Y.generateColor(m,i):a),c.append(new V(t)),this.m_study===this.m_model.selectedSource()&&this._isMarkersEnabled&&null!==this.m_selectionData&&(this.m_selectionData.vertOffset=l,c.append(new w(this.m_selectionData))),c},inherit(l,r),l.prototype.renderer=function(){var e,t,i,o,n,r,s,a,l;if(this.m_study.properties().styles[this.m_plotName].visible&&this.m_study.properties().styles[this.m_plotName].visible.value()&&this._scalesReady())return this.m_invalidated&&(this._updateImpl(),this.m_invalidated=!1),e={},t=F(this._getTranspValue(),0,100),i=this.m_model.timeScale().barSpacing(),e.items=this.m_items,e.barSpacing=i,e.colorup=Y.generateColor(this.m_study.properties().styles[this.m_plotName].colorup.value(),t),e.colordown=Y.generateColor(this.m_study.properties().styles[this.m_plotName].colordown.value(),t),o=v(e.colorup),n=o?100*(1-o[3]):0,r=v(e.colordown),s=r?100*(1-r[3]):0,e.colorBorderUp=Y.generateColor("#000000",n),e.colorBorderDown=Y.generateColor("#000000",s),e.minHeight=this.m_study.properties().styles[this.m_plotName].minHeight.value(),e.maxHeight=this.m_study.properties().styles[this.m_plotName].maxHeight.value(),a=new z,a.append(new D(e)),this.m_study===this.m_model.selectedSource()&&null!==this.m_selectionData&&(l=this.m_selectionData,l.barSpacing=i,a.append(new T(l))),a},l.prototype._createItem=function(e,t,i,o){var n,r,s,a;if(0!==t){if(Math.abs(t)>this._maxAbsValue&&(this._maxAbsValue=Math.abs(t)),n=t>0){if(void 0===(s=this._getSeriesVal(o,e))||null==s)return null;r=s}else{if(void 0===(a=this._getSeriesVal(i,e))||null==a)return null;r=a}return new E(e,r,t,n)}},l.prototype._convertItemsToCoordinates=function(){var e,t,i,o,n,r,s,a,l,c=this.m_model.timeScale(),h=this.m_study.priceScale();for(c.indexesToCoordinates(this.m_items),h.pointsArrayToCoordinates(this.m_items,this.m_study.firstValue()),e=Math.abs(this.m_study.properties().styles[this.m_plotName].minHeight.value()),t=Math.abs(this.m_study.properties().styles[this.m_plotName].maxHeight.value()),e>t&&(i=e,e=t,t=i),o=t-e,n=o/this._maxAbsValue,r=this.m_items,s=0;s<r.length;s++)a=r[s],l=Math.abs(a.height),a.height=l*n+e},c.prototype.update=function(){this._invalidated=!0},c.prototype._updateImpl=function(){var e,t,i,o,n,r,s,a,l,c,h,u,d,_,v,S,w,T,P;if(this.m_bars.length=0,!(this.m_model.timeScale().isEmpty()||this.m_study.priceScale().isEmpty()||null===(e=this.m_model.timeScale().visibleBars())||(t=this.m_series.nearestIndex(e.firstBar(),G.NearestRight),i=this.m_series.nearestIndex(e.lastBar(),G.NearestLeft),(o=this.m_study.getMinFirstBarIndexForPlot(this.m_plotName))>i||(t=Math.max(o,t),n=this.m_study.data(),r=this.m_study.firstValue(),s=n.range(t,i),a=0,
l=this.m_study.properties().ohlcPlots[this.m_plotName],c={},h=function(e,t){var i=e+"@"+t;return c[i]||(c[i]=Y.generateColor(e,t)),c[i]},s.each(function(e,t){var i,o,n,r,s,c,u,d,p,_,v,b,S,w,T,P;for(e=Math.floor(e),i=!0,o={},n=TradingView.OPEN_PLOT;n<=TradingView.CLOSE_PLOT;++n){if(void 0===(r=t[this._ohlcPlotIndexes[n]+1])||null===r){i=!1;break}o[n]=r}return!!i&&(s=o[TradingView.OPEN_PLOT],c=o[TradingView.CLOSE_PLOT],u=Math.max(s,o[TradingView.HIGH_PLOT],o[TradingView.LOW_PLOT],c),d=Math.min(s,o[TradingView.HIGH_PLOT],o[TradingView.LOW_PLOT],c),p={},p.time=Math.round(e),p.open=s,p.high=u,p.low=d,p.close=c,_=l.color.value(),v=void 0!==t[this._colorer+1]||this._palette&&this._palette.addDefaultColor,this._colorer&&v&&null!=(r=t[this._colorer+1])&&(b=this._palette.valToIndex?this._palette.valToIndex[r]:r,S=this._paletterProps.colors[b],_=S.color.value()),p.color=h(_,a),w=f(y(_)),T=w[2]>.25?w[2]-.26:w[2]+.75,P=m(w[0],w[1],T),p.borderColor=h(g(P),a),p.hollow=null,this.m_bars.push(p),!1)}.bind(this)),u=this.m_study.priceScale(),u.barPricesToCoordinates(this.m_bars,r),this.m_model.timeScale().barIndexesToCoordinates(this.m_bars),this.m_study!==this.m_model.selectedSource()))))for(d=N(t,i),this._selectionData={points:[],hittestResult:b.REGULAR},_=0;_<d.length;_++)v=d[_],null!==(S=this.m_study.data().valueAt(v))&&(w=S[this._plotIndex+1],T=this.m_model.timeScale().indexToCoordinate(Math.floor(v)),P=this.m_study.priceScale().priceToCoordinate(w,r),this._selectionData.points.push(new p(T,P)))},c.prototype.items=function(){return this.m_bars},inherit(h,c),h.prototype.renderer=function(){var e,t;if(this.m_study.properties().ohlcPlots[this.m_plotName].visible.value())return this._invalidated&&(this._updateImpl(),this._invalidated=!1),e={},e.bars=this.m_bars,e.barSpacing=this.m_model.timeScale().barSpacing(),e.dontDrawOpen=this.m_series.properties().barStyle.dontDrawOpen.value(),t=new z,t.append(new P(e)),this.m_series===this.m_model.selectedSource()&&this._isMarkersEnabled&&t.append(new w(this._selectionData)),t},inherit(u,c),u.prototype.renderer=function(){var e,t,i,o=this.m_study.properties().ohlcPlots[this.m_plotName];if(o.visible.value())return this._invalidated&&(this._updateImpl(),this._invalidated=!1),e={},e.bars=this.m_bars,e.barSpacing=this.m_model.timeScale().barSpacing(),e.drawWick=o.drawWick.value(),e.drawBorder=o.drawBorder.value(),t=o.wickColor.value(),e.borderColor=t,e.wickColor=t,i=new z,i.append(new M(e)),this.m_series===this.m_model.selectedSource()&&this._isMarkersEnabled&&i.append(new w(this._selectionData)),i},t.StudyPaneView=o,t.StudyBackgroundPaneView=n,t.StudyPlotShapesPaneView=s,t.StudyPlotCharsPaneView=a,t.StudyPlotArrowsPaneView=l,t.StudyPlotCandlesPaneView=u,t.StudyPlotBarsPaneView=h},function(e,t,i){"use strict";function o(e){this.items=e.items,this.barSpacing=e.barSpacing,this.histogramBase=e.histogramBase,this.lineColor=e.lineColor,this.lineWidth=e.lineWidth}var n=i(6).Point,r=i(31).distanceToSegment,s=i(29).selectionTolerance,a=i(9).HitTestResult;o.prototype.draw=function(e){var t,i,o,n,r
;for(e.translate(.5,.5),e.fillStyle=this.lineColor,t=this.lineWidth,i=0;i<this.items.length;++i)o=this.items[i],n=o.x,r=o.y,o.style&&(e.fillStyle=o.style.color,t=o.style.width),e.fillRect(Math.round(n-.5*t),r,t,this.histogramBase-r)},o.prototype.hitTest=function(e){var t,i,o,l,c,h=s(this.lineWidth);for(c=0;c<this.items.length;++c)if(t=this.items[c],i=t.x,o=t.y,l=r(new n(i,o),new n(i,this.histogramBase),new n(e.x,e.y)),l.distance<=h)return new a(a.REGULAR);return null},t.PaneRendererHistogram=TradingView.PaneRendererHistogram=o},function(e,t,i){"use strict";function o(e){this.items=e.items,this.barSpacing=e.barSpacing,this.histogramBase=e.histogramBase,this.lineColor=e.lineColor,this.lineWidth=e.lineWidth}var n=i(9).HitTestResult;o.prototype.draw=function(e){var t,i,o,n,r,s,a,l,c,h,u,d,p,_,f,m;if(0!==this.items.length){for(t=this.barSpacing,i=this.lineColor,o=this.histogramBase,e.translate(.5,.5),n={},r=this.items,s=null,a=0;a<r.length;++a)l=r[a],c=0===a?null:r[a-1],h=l.style?l.style.color:i,u=n[h]||[],d=Math.floor(l.x-.5*t),p=Math.ceil(d+t),s&&(_=p-d>5?1:0,s.right=d-_),f={item:l,prev:c,left:d,right:p},u.push(f),s=f,n[h]=u;for(h in n){for(u=n[h],e.fillStyle=h,e.strokeStyle=h,e.lineWidth=1,e.beginPath(),a=0;a<u.length;a++)l=u[a],m=l.item.y,d=l.left,p=l.right,e.rect(d,m,p-d,o-m);e.fill()}}},o.prototype.hitTest=function(e){var t,i,o,r=.5*this.barSpacing+this.lineWidth,s=e.x-r,a=e.x+r,l=this.items;for(t=l.length;t--;)if((i=l[t].x)>=s&&i<=a&&(o=l[t].y,e.y>=Math.min(o,this.histogramBase)&&e.y<=Math.max(o,this.histogramBase)))return new n(n.REGULAR);return null},t.PaneRendererColumns=TradingView.PaneRendererColumns=o},function(e,t,i){"use strict";function o(e){this.items=e.items,this.barSpacing=e.barSpacing,this.lineColor=e.lineColor,this.lineWidth=e.lineWidth,this.lineStyle=e.lineStyle}var n=i(6).Point,r=i(31).distanceToSegment,s=i(29).selectionTolerance,a=i(9).HitTestResult;o.prototype.draw=function(e){var t,i,o,n,r,s,a,l,c=!1;for(o=0;o<this.items.length;++o)n=this.items[o],r=n.x,s=n.y,TradingView.isNaN(r)||TradingView.isNaN(s)||(null!=n.style?(a=n.style.color,t=n.style.width):(a=this.lineColor,t=this.lineWidth),a!==i&&(i=a,c&&e.fill(),e.beginPath(),e.fillStyle=a),l=3*t,e.rect(r-l/2,s-t/2,l,t),e.rect(r-t/2,s-l/2,t,l),c=!0);c&&e.fill()},o.prototype.hitTest=function(e){var t,i,o,l,c,h,u=s(this.lineWidth);for(h=1;h<this.items.length;++h)if(t=this.items[h-1],i=this.items[h],o=t.x,l=i.x,c=r(new n(o,t.y),new n(l,i.y),new n(e.x,e.y)),c.distance<=u)return new a(a.REGULAR);return null},t.PaneRendererCross=TradingView.PaneRendererCross=o},function(e,t,i){"use strict";function o(e){this.items=e.items,this.barSpacing=e.barSpacing,this.lineColor=e.lineColor||e.color,this.radius=e.lineWidth||e.height/2,this.vertOffset=e.vertOffset||0}var n=i(6).Point,r=i(29).selectionTolerance,s=i(9).HitTestResult;o.prototype.draw=function(e){var t,i,o,n,r,s,a,l=2*Math.PI,c=!1;for(o=0;o<this.items.length;++o)n=this.items[o],r=n.x,s=n.y+this.vertOffset,TradingView.isNaN(r)||TradingView.isNaN(s)||(null!=n.style?(a=n.style.color,
t=n.style.width):(a=this.lineColor,t=this.radius),a!==i&&(i=a,c&&e.fill(),e.beginPath(),e.fillStyle=a),e.moveTo(r+t,s),e.arc(r,s,t,0,l,!1),c=!0);c&&e.fill()},o.prototype.hitTest=function(e){var t,i,o,a=2*this.radius,l=this.vertOffset,c=r(a);for(t=0;t<this.items.length;++t)if((i=this.items[t])&&(o=new n(i.x,i.y+l),o.subtract(e).length()+this.radius<=c))return new s(s.REGULAR);return null},t.PaneRendererCircles=TradingView.PaneRendererCircles=o},function(e,t,i){"use strict";function o(e){this._items=e.items,this._y=e.y,this._h=e.h,this._w=e.w}o.prototype.draw=function(e){},o.prototype.drawBackground=function(e){var t,i,o;for(e.save(),e.translate(-.5,-.5),t=0;t<this._items.length;++t)i=this._items[t],null!=i.color&&(e.fillStyle=i.color,o=t===this._items.length-1?this._w:this._items[t+1].x-i.x,e.fillRect(i.x,this._y,o,this._h));e.restore()},o.prototype.hitTest=function(e){return null},t.PaneRendererBackground=TradingView.PaneRendererBackground=o},function(e,t,i){"use strict";var o,n,r,s,a,l,c;Object.defineProperty(t,"__esModule",{value:!0}),i.d(t,"PaneRendererStepLine",function(){return c}),o=i(9),n=i(6),i.n(n),r=i(51),i.n(r),s=i(78),a=i(31),i.n(a),l=i(29),c=function(){function e(){this._data=null}return e.prototype.setData=function(e){this._data=e},e.prototype.draw=function(e){var t,i,o,n,s,a,l,c,h,u;if(null!==this._data&&0!==this._data.items.length){for(t=this._data,i=t.lineWidth,o=t.lineStyle,n=t.lineColor,s=t.items,e.save(),e.lineCap="square",e.strokeStyle=n,e.lineWidth=i,i%2==0&&e.translate(-.5,-.5),void 0!==o&&Object(r.setLineStyle)(e,o),e.beginPath(),e.moveTo(s[0].x,s[0].y),a=s.length,l=0;l<a;l++)c=s[l],e.lineTo(c.x,c.y),(h=s[l+1])&&(u=Math.round((c.x+h.x)/2),e.lineTo(u,c.y),e.lineTo(u,h.y));e.stroke(),e.restore()}},e.prototype.hitTest=function(e){var t,i,r,c,h,u,d,p,_,f,m,g,y;if(null===this._data||0===this._data.items.length)return null;for(t=this._data,i=t.items,r=t.lineWidth,c=Object(l.selectionTolerance)(r),h=Object(s.lowerbound)(i,e,function(e,t){return e.x<=t.x}),u=Math.max(0,h-1),d=Math.min(i.length-1,h+1),p=u;p<d;p++)if(_=i[p],(f=i[p+1])&&(m=Math.round((_.x+f.x)/2),g=new n.Point(m,_.y),y=new n.Point(m,f.y),Math.min(Object(a.distanceToSegment)(_,g,e).distance,Object(a.distanceToSegment)(g,y,e).distance,Object(a.distanceToSegment)(y,f,e).distance)<=c))return new o.HitTestResult(o.HitTestResult.REGULAR);return null},e}()},function(e,t,i){"use strict";function o(e,t){var i=function i(o){var n=i.cache,r=""+(t?t.apply(this,arguments):o);return n.hasOwnProperty(r)||(n[r]=e.apply(this,arguments)),n[r]};return i.cache={},i}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o,e.exports=t.default},function(e,t,i){"use strict";function o(e){s.call(this,e),this.width=this._calculateWidth(e.barSpacing),this._isUp=!1}function n(e){o.call(this,e),this._isUp=!0}function r(e){o.call(this,e),this._isUp=!1}var s=i(42).PaneRendererAbstractShape;inherit(o,s),o.prototype._calculateWidth=function(e){return e=e||this.barSpacing,Math.round(e/4)},o.prototype.drawShape=function(e){
var t,i,o,n,r,s,a,l,c=!1,h=this.width,u=Math.abs(this.height),d=h<4,p=Math.max(parseInt(h/2),1),_=Math.round(this.width/2),f=Math.round(this.width),m=this._isUp?-1:1;for(i=0,o=this.items.length;i<o;i++)n=this.items[i],r=n.x,s=n.y+this._vertOffset+m*Math.round(u/2),n.style&&null!=n.style.color?(a=n.style.color,l=n.style.borderColor):(a=this._color,l=this._borderColor),a!==t&&(t=a,c&&(e.fill(),e.stroke()),e.beginPath(),e.fillStyle=a,e.strokeStyle=l),e.translate(r,s),d?(e.moveTo(0,0),e.lineTo(-_,-_*m),e.moveTo(0,0),e.lineTo(_,-_*m),e.moveTo(0,0),e.lineTo(0,-u*m),e.moveTo(-_,-u*m),e.lineTo(_,-u*m),e.lineWidth=p):(e.moveTo(0,0),u<f?(e.lineTo(h,-u*m),e.lineTo(-h,-u*m)):(e.lineTo(h,-f*m),e.lineTo(_,-f*m),e.lineTo(_,-u*m),e.lineTo(-_,-u*m),e.lineTo(-_,-f*m),e.lineTo(-h,-f*m)),e.lineTo(0,0)),e.translate(-r,-s),c=!0;c&&(e.fill(),e.stroke())},inherit(n,o),inherit(r,o),t.PaneRendererArrowBase=TradingView.PaneRendererArrowBase=o,t.PaneRendererArrowUp=TradingView.PaneRendererArrowUp=n,t.PaneRendererArrowDown=TradingView.PaneRendererArrowDown=r},function(e,t,i){"use strict";function o(e){n.call(this,e)}var n=i(42).PaneRendererAbstractShape;inherit(o,n),o.prototype.drawShape=function(e){var t,i,o,n,r,s,a,l,c=Math.max(this.width,this.height)/2,h=this._vertOffset,u=2*Math.PI,d=!1;for(i=0,o=this.items.length;i<o;i++)n=this.items[i],n.style&&null!=n.style.color?(r=n.style.color,s=n.style.borderColor):(r=this._color,s=this._borderColor),r!==t&&(t=r,d&&(e.fill(),e.stroke()),e.beginPath(),e.fillStyle=r,e.strokeStyle=s),a=n.x,l=n.y+h,e.moveTo(a+c,l),e.arc(a,l,c,0,u,!1),d=!0;d&&(e.fill(),e.stroke())},t.PaneRendererCircleShape=TradingView.PaneRendererCircleShape=o},function(e,t,i){"use strict";function o(e){n.call(this,e)}var n=i(42).PaneRendererAbstractShape;inherit(o,n),o.prototype.drawShape=function(e){var t,i,o,n,r,s,a,l,c,h,u;for(e.lineWidth=2,t=this.width,i=this.height,o=this._vertOffset,r=!1,s=0,a=this.items.length;s<a;s++)l=this.items[s],c=l.style&&null!=l.style.color?l.style.color:this._color,c!==n&&(n=c,r&&e.stroke(),e.beginPath(),e.strokeStyle=c),h=l.x-t/2,u=l.y-i/2+o,e.moveTo(h+t/2,u),e.lineTo(h+t/2,u+i),e.moveTo(h,u+i/2),e.lineTo(h+t,u+i/2),r=!0;r&&e.stroke()},t.PaneRendererCrossShape=TradingView.PaneRendererCrossShape=o},function(e,t,i){"use strict";function o(e){n.call(this,e)}var n=i(42).PaneRendererAbstractShape;inherit(o,n),o.prototype.drawShape=function(e){var t,i,o,n,r,s,a,l,c=!1,h=Math.round(this.height/2);for(i=0,o=this.items.length;i<o;i++)n=this.items[i],n.style&&null!=n.style.color?(r=n.style.color,s=n.style.borderColor):(r=this._color,s=this._borderColor),r!==t&&(t=r,c&&(e.fill(),e.stroke()),e.beginPath(),e.fillStyle=r,e.strokeStyle=s),a=n.x,l=n.y+this._vertOffset,e.moveTo(a,l-h),e.lineTo(a+h,l),e.lineTo(a,l+h),e.lineTo(a-h,l),e.lineTo(a,l-h),c=!0;c&&(e.fill(),e.stroke())},t.PaneRendererDiamond=TradingView.PaneRendererDiamond=o},function(e,t,i){"use strict";function o(e){n.call(this,e)}var n=i(42).PaneRendererAbstractShape;inherit(o,n),o.prototype.drawShape=function(e){
var t,i,o,n,r,s,a,l,c=this.width,h=this.height,u=h/2,d=this._vertOffset,p=3,_=(c-p)/3,f=!1;for(i=0,o=this.items.length;i<o;i++)n=this.items[i],n.style&&null!=n.style.color?(r=n.style.color,s=n.style.borderColor):(r=this._color,s=this._borderColor),r!==t&&(t=r,f&&(e.fill(),e.stroke()),e.beginPath(),e.fillStyle=r,e.strokeStyle=s),a=n.x-c/2,l=n.y-u+d,e.moveTo(a,l),e.lineTo(a+p,l),e.bezierCurveTo(a+_,l-_,a+2*_,l+_,a+c,l),e.lineTo(a+c,l+u),e.bezierCurveTo(a+c-_,l+u+_,a+c-2*_,l+u-_,a+p,l+u),e.lineTo(a+p,l+h),e.lineTo(a,l+h),e.lineTo(a,l),f=!0;f&&(e.fill(),e.stroke())},t.PaneRendererFlagShape=TradingView.PaneRendererFlagShape=o},function(e,t,i){"use strict";function o(e,t){l.call(this,e),this._isUp=t,this._stepX=Math.round(this.height/2*.65)+.5,this._stepY=Math.round(this.height/2)+.5,this._textCache?(this._padding=this._stepX/2,this._shapeWidth=this._textImageWidth+2*this._stepX,this._shapeHeight=this._textImageHeight+2*this._padding+this._stepY,0===this._vertOffset?this._isUp?this._textVertOffset=this._stepY+this._padding+this._textImageHeight:this._textVertOffset=-this._stepY-this._padding:this._textVertOffset=this._vertOffset>0?this._stepY+this._padding:-this._stepY-this._padding):(this._padding=0,this._shapeWidth=2*this._stepX,this._shapeHeight=2.5*this._stepY)}function n(e){o.call(this,e,!0)}function r(e){o.call(this,e,!1)}var s=i(6).Point,a=i(9).HitTestResult,l=i(42).PaneRendererAbstractShape;inherit(o,l),o.prototype.drawShape=function(e){var t,i,o,n,r,s,a,l,c=!1,h=this._isUp?1:-1,u=Math.round(this._shapeWidth/2)-.5,d=Math.round(this._shapeHeight)-.5,p=0;for(0!==this._vertOffset&&this._vertOffset<0===this._isUp&&(p=-h*Math.round(d+this._stepY)),i=0,o=this.items.length;i<o;i++)n=this.items[i],r=n.x+.5,s=n.y+this._vertOffset+p+.5,n.style&&null!=n.style.color?(a=n.style.color,l=n.style.borderColor):(a=this._color,l=this._borderColor),a!==t&&(t=a,c&&(e.fill(),e.stroke()),e.beginPath(),e.fillStyle=a,e.strokeStyle=l),e.translate(r,s),e.moveTo(0,0),e.lineTo(this._stepX,this._stepY*h),e.lineTo(u,this._stepY*h),e.lineTo(u,d*h),e.lineTo(-u,d*h),e.lineTo(-u,this._stepY*h),e.lineTo(-this._stepX,this._stepY*h),e.lineTo(0,0),e.translate(-r,-s),c=!0;c&&(e.fill(),e.stroke())},o.prototype.hitTest=function(e,t){var i,o,n,r,l,c,h,u,d,p,_,f,m,g,y=this._stepY/2,v=this._vertOffset,b=this._isUp?1:-1;for(o=0;o<this.items.length;++o)if(n=this.items[o]){if(r=b*y,0!==this._vertOffset&&this._vertOffset<0===this._isUp&&(r=-b*(this._shapeHeight+y)),i=new s(n.x,n.y+v+r),i.subtract(e).length()<=y)return new a(a.REGULAR);if(l=this._shapeWidth/2,r=0,0!==this._vertOffset&&this._vertOffset<0===this._isUp&&(r=-b*(this._shapeHeight+this._stepY)),c=n.y+v+r,h=this._isUp?this._stepY:-this._shapeHeight,u=this._isUp?this._shapeHeight:-this._stepY,d=e.x,p=e.y,_=n.x-l,f=c+h,m=n.x+l,g=c+u,d>_&&d<m&&p>f&&p<g)return new a(a.REGULAR)}return null},inherit(n,o),inherit(r,o),t.PaneRendererLabelBase=TradingView.PaneRendererLabelBase=o,t.PaneRendererLabelUp=TradingView.PaneRendererLabelUp=n,t.PaneRendererLabelDown=TradingView.PaneRendererLabelDown=r},function(e,t,i){
"use strict";function o(e){n.call(this,e)}var n=i(42).PaneRendererAbstractShape;inherit(o,n),o.prototype.drawShape=function(e){var t,i,o,n,r,s,a,l,c=!1,h=Math.round(this.height/2);for(i=0,o=this.items.length;i<o;i++)n=this.items[i],n.style&&null!=n.style.color?(r=n.style.color,s=n.style.borderColor):(r=this._color,s=this._borderColor),r!==t&&(t=r,c&&(e.fill(),e.stroke()),e.beginPath(),e.fillStyle=r,e.strokeStyle=s),a=n.x-h,l=n.y+this._vertOffset-h,e.rect(a,l,this.height,this.height),c=!0;c&&(e.fill(),e.stroke())},t.PaneRendererSquare=TradingView.PaneRendererSquare=o},function(e,t,i){"use strict";function o(e){s.call(this,e)}function n(e){s.call(this,e)}function r(e){s.call(this,e)}var s=i(42).PaneRendererAbstractShape;inherit(o,s),o.prototype.drawShape=function(e){var t,i,o,n,r,s,a,l,c=this.width,h=this.height,u=Math.round(h/3),d=this._vertOffset-2*u,p=!1;for(i=0,o=this.items.length;i<o;i++)n=this.items[i],n.style&&null!=n.style.color?(r=n.style.color,s=n.style.borderColor):(r=this._color,s=this._borderColor),r!==t&&(t=r,p&&(e.fill(),e.stroke()),e.beginPath(),e.fillStyle=r,e.strokeStyle=s),a=n.x,l=n.y+d,e.moveTo(a,l),e.lineTo(a+c/2,l+h),e.lineTo(a-c/2,l+h),e.lineTo(a,l),p=!0;p&&(e.fill(),e.stroke())},inherit(n,s),n.prototype.drawShape=function(e){var t,i,o,n,r,s,a,l,c=this.width,h=this.height,u=Math.round(h/3),d=this._vertOffset-u,p=!1;for(i=0,o=this.items.length;i<o;i++)n=this.items[i],n.style&&null!=n.style.color?(r=n.style.color,s=n.style.borderColor):(r=this._color,s=this._borderColor),r!==t&&(t=r,p&&(e.fill(),e.stroke()),e.beginPath(),e.fillStyle=r,e.strokeStyle=s),a=n.x-c/2,l=n.y+d,e.moveTo(a,l),e.lineTo(a+c,l),e.lineTo(a+c/2,l+h),e.lineTo(a,l),p=!0;p&&(e.fill(),e.stroke())},inherit(r,s),r.prototype.drawShape=function(e){var t,i,o,n,r,s,a,l=this.width,c=this.height,h=this._vertOffset,u=!1;for(i=0,o=this.items.length;i<o;i++)n=this.items[i],r=n.style&&null!=n.style.color?n.style.color:this._color,r!==t&&(t=r,u&&e.fill(),e.beginPath(),e.fillStyle=r),s=n.x+l/2,a=n.y-c/2+h,e.moveTo(s,a),e.lineTo(s,a+c),e.lineTo(s-l,a+c/2),e.lineTo(s,a),u=!0;u&&e.fill()},t.PaneRendererTriangleApexUp=TradingView.PaneRendererTriangleApexUp=o,t.PaneRendererTriangleApexDown=TradingView.PaneRendererTriangleApexDown=n,t.PaneRendererTriangleApexLeft=TradingView.PaneRendererTriangleApexLeft=r},function(e,t,i){"use strict";function o(e){n.call(this,e)}var n=i(42).PaneRendererAbstractShape;inherit(o,n),o.prototype.drawShape=function(e){var t,i,o,n,r,s,a,l,c,h,u;for(e.lineWidth=2,t=this.width,i=this.height,o=this._vertOffset,r=!1,s=0,a=this.items.length;s<a;s++)l=this.items[s],c=l.style&&null!=l.style.color?l.style.color:this._color,c!==n&&(n=c,r&&e.stroke(),e.beginPath(),e.strokeStyle=c),h=l.x-t/2,u=l.y-i/2+o,e.moveTo(h,u),e.lineTo(h+t,u+i),e.moveTo(h,u+i),e.lineTo(h+t,u),r=!0;r&&e.stroke()},t.PaneRendererXCross=TradingView.PaneRendererXCross=o},function(e,t,i){"use strict";function o(){this._data=null}function n(e){this._source=e,this._points1=[],this._points2=[],this._timePoints=[],
this._getBarSpacing=e.model().timeScale().barSpacing.bind(e.model().timeScale()),this._invalidated=!0,this._areaRenderer=new o}function r(e){n.call(this,e)}function s(e,t,i){var o,r;if(n.call(this,e),this._isHlineFill=t.type===h.FilledArea.TYPE_HLINES,a(this._isHlineFill||t.type===h.FilledArea.TYPE_PLOTS,"Wrong filledArea type: "+t.type),this._isHlineFill&&this._initBandIndexes(t.objAId,t.objBId),this._fillMetaInfo=t,this._fillStyleProps=i,o=e._metaInfo,t.palette)for(r in o.plots)if(o.plots[r].palette===t.palette){this._colorPlotOffset=parseInt(r),this._colorsMap=o.palettes[t.palette].valToIndex,this._colorValues=e.properties().palettes[t.palette].colors;break}}var a=i(7).assert,l=i(9).HitTestResult,c=i(29).coordinateIsValid,h=i(28),u=i(24),d=i(46).clamp,p=i(20).PlotRowSearchMode;o.prototype.setData=function(e){this._data=e},o.prototype.hitTest=function(e){var t,i,o;if(null===this._data)return null;for(o=1;o<this._data.points1.length;++o)if(t=this._data.points1[o],i=this._data.points2[o],this._data.timePoints[o]===e.x&&(e.y>=t&&e.y<=i||e.y<=t&&e.y>=i))return new l(l.REGULAR);return null},o.prototype.draw=function(e){var t,i,o,n,r,s,a,l,h,d,p,_,f,m,g,y,v,b;if(null!==this._data&&((t=this._data.isHlineFill)||0!==this._data.points1.length&&0!==this._data.points2.length)){for(i=this._data.timePoints,o=this._data.points1,n=this._data.points2,r=this._data.colors,s=isNumber(this._data.transparency)?this._data.transparency:50,s=Math.min(s,100),s=Math.max(s,0),a={},l=[],d=0;d<this._data.timePoints.length;d++)p={point1:t?this._data.level1:o[d],point2:t?this._data.level2:n[d],timePoint:i[d]},_=c(p.point1)&&c(p.point2),_&&(h=r&&r[d]?r[d]:this._data.backcolor,l.push(p)),(d===this._data.timePoints.length-1||r&&h!==r[d+1]||!_)&&(l.length>0&&(f=a[h]||[],f.push(l),a[h]=f),l=_?[p]:[]);for(m in a){for(g=a[m],e.beginPath(),y=0;y<g.length;y++){for(v=g[y],e.moveTo(v[0].timePoint,v[0].point1),b=1;b<v.length;b++)e.lineTo(v[b].timePoint,v[b].point1);for(b=v.length-1;b>=0;b--)e.lineTo(v[b].timePoint,v[b].point2)}e.closePath(),e.fillStyle=u.generateColor(m,s),e.fill()}}},n.prototype.update=function(){this._invalidated=!0},n.prototype._updateImpl=function(){var e,t,i,o,n,r,s,a,l,c,h,u,d,_,f,m,g,y,v,b,S,w,T,P,x,C,L,I;if(this._points1=[],this._points2=[],this._colorsMap&&(this._colors=[]),this._timePoints=[],this._visible()&&(e=this._source.priceScale(),t=this._source._model.timeScale(),e&&!e.isEmpty()&&!this._source._model.timeScale().isEmpty()&&!(this._source._series.bars().isEmpty()||(this._isHlineFill&&(i=this._source.firstValue(),o=this._source.properties().bands[this._bandAKey],n=this._source.properties().bands[this._bandBKey],this._level1=e.priceToCoordinate(o.value.value(),i),this._level2=e.priceToCoordinate(n.value.value(),i)),r=this._source.data().plotNames().indexOf(this._plotAId())+1,s=this._source.data().plotNames().indexOf(this._plotBId())+1,null===(a=this._source._model.timeScale().visibleBars())||(l=this._source._series.nearestIndex(a.firstBar(),p.NearestRight),c=this._source._series.nearestIndex(a.lastBar(),p.NearestLeft),
(l=this._correctStartBarIndex(l))>c))))){if(h=this._source.data().range(l,c),h.size()>0)for(u=h.firstIndex(),d=h.lastIndex(),_=this._source.offset(this._plotAId()),f=this._source.offset(this._plotBId()),m=Math.max(_,f),g=Math.min(_,f),y=u+m,v=this._source.data().firstIndex(),u>v&&(y=u<m+v?m+v:u),b=d+g,S=this._source.data().lastIndex(),d>S+g&&d<S&&(b=S+g),g<0&&d<=S+g&&(b=d),w=y<u?u+m:y>d?u+m:y,T=y;T<=b;++T)this._timePoints.push(t.indexToCoordinate(w++)),this._colors&&null!=(P=this._source.data().valueAt(T-g)[this._colorPlotOffset+1])&&this._colors.push(this._colorValues[this._colorsMap[P]].color.value()),this._isHlineFill||(x=this._source.data().valueAt(T-_),C=this._source.data().valueAt(T-f),L=x[r],I=C[s],this._points1.push(L),this._points2.push(I));i=this._source.firstValue(),e.pricesArrayToCoordinates(this._points1,i),e.pricesArrayToCoordinates(this._points2,i)}},n.prototype.renderer=function(){this._invalidated&&(this._updateImpl(),this._invalidated=!1);var e={};return e.points1=this._points1,e.points2=this._points2,e.timePoints=this._timePoints,e.getBarSpacing=this._getBarSpacing,e.backcolor=this._color(),e.transparency=this._transparency(),e.isHlineFill=this._isHlineFill,e.level1=this._level1,e.level2=this._level2,this._colors&&(e.colors=this._colors),this._areaRenderer.setData(e),this._areaRenderer},n.prototype._plotAId=function(){a(!1,"Pure virtual call!")},n.prototype._plotBId=function(){a(!1,"Pure virtual call!")},n.prototype._color=function(){a(!1,"Pure virtual call!")},n.prototype._transparency=function(){a(!1,"Pure virtual call!")},n.prototype._visible=function(){a(!1,"Pure virtual call!")},n.prototype._correctStartBarIndex=function(e){return e},inherit(r,n),r.prototype._plotAId=function(){return this._source.properties().area[0].name.value()},r.prototype._plotBId=function(){return this._source.properties().area[1].name.value()},r.prototype._color=function(){return this._source.properties().areaBackground.backgroundColor.value()},r.prototype._transparency=function(){var e=this._source.properties().areaBackground.transparency.value();return d(e,0,100)},r.prototype._visible=function(){return this._source.properties().areaBackground.fillBackground.value()},inherit(s,n),s.prototype._initBandIndexes=function(e,t){var i,o;for(this._bandAKey=null,this._bandBKey=null,i=0;i<this._source.metaInfo().bands.length;++i)o=this._source.metaInfo().bands[i],null!==this._bandAKey||o.id!==e?null!==this._bandBKey||o.id!==t||(this._bandBKey=i):this._bandAKey=i},s.prototype._plotAId=function(){return this._fillMetaInfo.objAId},s.prototype._plotBId=function(){return this._fillMetaInfo.objBId},s.prototype._color=function(){return this._fillStyleProps.color.value()},s.prototype._transparency=function(){return this._fillStyleProps.transparency.value()},s.prototype._visible=function(){return this._fillStyleProps.visible.value()},s.prototype._correctStartBarIndex=function(e){var t=this._source.getMinFirstBarIndexForPlot(this._fillMetaInfo.id);return Math.max(t,e)},t.PlotFillPaneView=s,t.AreaBackgroundPaneView=r},function(e,t,i){
"use strict";function o(e){return new Promise(function(t){i.e(24).then(function(o){var r=Object.keys(e.metaInfo().graphics);r.sort(function(e,t){return n(e)-n(t)}),t(r.map(function(t){var o=i(826).VertLinePaneView,n={backgrounds:null,hhists:null,horizlines:null,hlines:null,lines:null,polygons:null,shapemarks:null,textmarks:null,trendchannels:null,vertlines:o},r=n[t];return null===r?(h.logWarn(t+" is not supported by this build of graphics subsystem, skipping"),null):new r(e,e.model())}).filter(function(e){return null!==e}))}.bind(null,i)).catch(i.oe)})}function n(e){switch(e){case"polygons":return-100;case"trendchannels":return-90;default:return 0}}function r(e){var t,i,o,n=Object.keys(e.metaInfo().graphics),r=[];for(t=0,i=n;t<i.length;t++)o=i[t],h.logWarn(o+" is not supported by this build of graphics subsystem, skipping");return r}var s,a,l,c,h;Object.defineProperty(t,"__esModule",{value:!0}),t.createGraphicsPaneViews=o,t.createGraphicsPriceAxisViews=r,s=i(5),a=i(167),i.d(t,"isStudyGraphicsEmpty",function(){return a.c}),l=i(263),i.d(t,"StaticStudyGraphics",function(){return l.a}),i.d(t,"emptyStudyGraphics",function(){return l.b}),i.d(t,"loadStudyGraphics",function(){return l.c}),i.d(t,"saveStudyGraphics",function(){return l.d}),c=i(262),i.d(t,"LiveStudyGraphics",function(){return c.a}),h=Object(s.getLogger)("Chart.StudyGraphics")},function(e,t,i){"use strict";var o,n,r,s,a;Object.defineProperty(t,"__esModule",{value:!0}),i.d(t,"PLACE_HOLDER",function(){return s}),i.d(t,"VolumeFormatter",function(){return a}),o=i(102),n=i(14),i.n(n),r=i(127),i.n(r),i(11),s="---",a=function(){function e(e){this.type="volume",this._numericFormatter=new o.NumericFormatter,this._fractionalValues=void 0!==e&&e>0,this._precision=e}return e.prototype.state=function(){return{precision:this._precision}},e.prototype.format=function(e){if(!Object(n.isNumber)(e))return s;var t="";return e<0&&(t="-",e=-e),e>=1e100?window.t("N/A"):(!this._fractionalValues||e>=995?e=Math.round(e):this._fractionalValues&&(e=+e.toFixed(this._precision)),e<995?t+this._formatNumber(e):e<999995?t+this._formatNumber(e/1e3)+"K":e<999999995?(e=1e3*Math.round(e/1e3),t+this._formatNumber(e/1e6)+"M"):(e=1e6*Math.round(e/1e6),t+this._formatNumber(e/1e9)+"B"))},e.prototype.parse=function(e){var t,i,o;return"---"===e?{error:"not a number",res:!1,value:NaN}:(t={K:1e3,M:1e6,B:1e9},i=e.slice(-1),t.hasOwnProperty(i)?(o=this._numericFormatter.parse(e.slice(0,-1)),Object(n.isNumber)(o)?{res:!0,value:o*t[i]}:{error:"not a number",res:!1,value:NaN}):(o=this._numericFormatter.parse(e),Object(n.isNumber)(o)?{res:!0,value:o}:{error:"not a number",res:!1,value:NaN}))},e.serialize=function(e){return e.state()},e.deserialize=function(t){return new e(t.precision)},e.prototype._formatNumber=function(e){return this._fractionalValues&&(e=Object(r.fixComputationError)(e)),this._numericFormatter.format(e).replace(/(\.[1-9]*)0+$/,function(e,t){return t})},e}()},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i.d(t,"tzData",function(){return o});var o={
"America/New_York":{time:[-2717668562,-1633298400,-1615154400,-1601848800,-1583704800,-1570399200,-1551650400,-1536530400,-1523224800,-1504476e3,-1491775200,-1473026400,-1459720800,-1441576800,-1428271200,-1410127200,-1396821600,-1378677600,-1365372e3,-1347228e3,-1333922400,-1315173600,-1301868e3,-1283724e3,-1270418400,-1252274400,-1238968800,-1220824800,-1207519200,-1189375200,-1176069600,-1157320800,-114462e4,-1125871200,-1112565600,-1094421600,-1081116e3,-1062972e3,-1049666400,-1031522400,-1018216800,-1000072800,-986767200,-968018400,-955317600,-936568800,-923263200,-905119200,-891813600,-880236e3,-76941e4,-765410400,-747266400,-733960800,-715816800,-702511200,-684367200,-671061600,-652917600,-639612e3,-620863200,-608162400,-589413600,-576108e3,-557964e3,-544658400,-526514400,-513208800,-495064800,-481759200,-463615200,-447285600,-431560800,-415836e3,-400111200,-384386400,-368661600,-352936800,-337212e3,-321487200,-305762400,-289432800,-273708e3,-257983200,-242258400,-226533600,-210808800,-195084e3,-179359200,-163634400,-147909600,-13158e4,-11646e4,-100130400,-84405600,-68680800,-52956e3,-37231200,-21506400,-5781600,9943200,25668e3,41392800,57722400,73447200,89172e3,104896800,120621600,126669600,152071200,162352800,183520800,199245600,215575200,230695200,247024800,262749600,278474400,294199200,309924e3,325648800,341373600,357098400,372823200,388548e3,404877600,419997600,436327200,452052e3,467776800,483501600,499226400,514951200,530676e3,544586400,562125600,576036e3,59418e4,607485600,625629600,638935200,657079200,670989600,688528800,702439200,719978400,733888800,752032800,765338400,783482400,796788e3,814932e3,828842400,846381600,860292e3,877831200,891741600,909280800,923191200,941335200,954640800,972784800,986090400,1004234400,1018144800,1035684e3,1049594400,1067133600,1081044e3,1099188e3,1112493600,1130637600,1143943200,1162087200,1173578400,1194141600,1205028e3,1225591200,1236477600,1257040800,1268532e3,1289095200,1299981600,1320544800,1331431200,1351994400,1362880800,1383444e3,1394330400,1414893600,142578e4,1446343200,1457834400,1478397600,1489284e3,1509847200,1520733600,1541296800,1552183200,1572746400,1583632800,1604196e3,1615687200,1636250400,1647136800,16677e5,1678586400,1699149600,1710036e3,1730599200,1741485600,1762048800,1772935200,1793498400,1804989600,1825552800,1836439200,1857002400,1867888800,1888452e3,1899338400,1919901600,1930788e3],
offset:[-17762,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3]},"America/Los_Angeles":{
time:[-2717668378,-1633298400,-1615154400,-1601848800,-1583704800,-880236e3,-769420800,-765410400,-687995940,-662680800,-620866800,-608162400,-589417200,-576108e3,-557967600,-544658400,-526518e3,-513208800,-495068400,-481759200,-463618800,-450309600,-431564400,-418255200,-400114800,-386805600,-368665200,-355356e3,-337215600,-323906400,-305766e3,-292456800,-273711600,-261007200,-242262e3,-226533600,-210812400,-195084e3,-179362800,-163634400,-147913200,-13158e4,-116463600,-100130400,-84405600,-68680800,-52956e3,-37231200,-21506400,-5781600,9943200,25668e3,41392800,57722400,73447200,89172e3,104896800,120621600,126669600,152071200,162352800,183520800,199245600,215575200,230695200,247024800,262749600,278474400,294199200,309924e3,325648800,341373600,357098400,372823200,388548e3,404877600,419997600,436327200,452052e3,467776800,483501600,499226400,514951200,530676e3,544586400,562125600,576036e3,59418e4,607485600,625629600,638935200,657079200,670989600,688528800,702439200,719978400,733888800,752032800,765338400,783482400,796788e3,814932e3,828842400,846381600,860292e3,877831200,891741600,909280800,923191200,941335200,954640800,972784800,986090400,1004234400,1018144800,1035684e3,1049594400,1067133600,1081044e3,1099188e3,1112493600,1130637600,1143943200,1162087200,1173578400,1194141600,1205028e3,1225591200,1236477600,1257040800,1268532e3,1289095200,1299981600,1320544800,1331431200,1351994400,1362880800,1383444e3,1394330400,1414893600,142578e4,1446343200,1457834400,1478397600,1489284e3,1509847200,1520733600,1541296800,1552183200,1572746400,1583632800,1604196e3,1615687200,1636250400,1647136800,16677e5,1678586400,1699149600,1710036e3,1730599200,1741485600,1762048800,1772935200,1793498400,1804989600,1825552800,1836439200,1857002400,1867888800,1888452e3,1899338400,1919901600,1930788e3],offset:[-28378,-28800,-25200,-28800,-25200,-28800,-25200,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800]},"America/Chicago":{
time:[-2717668236,-1633298400,-1615154400,-1601848800,-1583704800,-1563746400,-1551650400,-1538949600,-1520200800,-1504476e3,-1491775200,-1473026400,-1459720800,-1441576800,-1428271200,-1410127200,-1396821600,-1378677600,-1365372e3,-1347228e3,-1333922400,-1315173600,-1301868e3,-1283724e3,-1270418400,-1252274400,-1238968800,-1220824800,-1207519200,-1189375200,-1176069600,-1157320800,-114462e4,-1125871200,-1112565600,-1094421600,-1081116e3,-1067810400,-1045432800,-1031522400,-1018216800,-1000072800,-986767200,-968018400,-955317600,-936568800,-923263200,-905119200,-891813600,-880236e3,-769413600,-765410400,-747266400,-733960800,-715816800,-702511200,-684367200,-671061600,-652917600,-639612e3,-620863200,-608162400,-589413600,-576108e3,-557964e3,-544658400,-526514400,-513208800,-495064800,-481759200,-463615200,-447285600,-431560800,-415836e3,-400111200,-384386400,-368661600,-352936800,-337212e3,-321487200,-305762400,-289432800,-273708e3,-257983200,-242258400,-226533600,-210808800,-195084e3,-179359200,-163634400,-147909600,-13158e4,-11646e4,-100130400,-84405600,-68680800,-52956e3,-37231200,-21506400,-5781600,9943200,25668e3,41392800,57722400,73447200,89172e3,104896800,120621600,126669600,152071200,162352800,183520800,199245600,215575200,230695200,247024800,262749600,278474400,294199200,309924e3,325648800,341373600,357098400,372823200,388548e3,404877600,419997600,436327200,452052e3,467776800,483501600,499226400,514951200,530676e3,544586400,562125600,576036e3,59418e4,607485600,625629600,638935200,657079200,670989600,688528800,702439200,719978400,733888800,752032800,765338400,783482400,796788e3,814932e3,828842400,846381600,860292e3,877831200,891741600,909280800,923191200,941335200,954640800,972784800,986090400,1004234400,1018144800,1035684e3,1049594400,1067133600,1081044e3,1099188e3,1112493600,1130637600,1143943200,1162087200,1173578400,1194141600,1205028e3,1225591200,1236477600,1257040800,1268532e3,1289095200,1299981600,1320544800,1331431200,1351994400,1362880800,1383444e3,1394330400,1414893600,142578e4,1446343200,1457834400,1478397600,1489284e3,1509847200,1520733600,1541296800,1552183200,1572746400,1583632800,1604196e3,1615687200,1636250400,1647136800,16677e5,1678586400,1699149600,1710036e3,1730599200,1741485600,1762048800,1772935200,1793498400,1804989600,1825552800,1836439200,1857002400,1867888800,1888452e3,1899338400,1919901600,1930788e3],
offset:[-21036,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600]},"America/Phoenix":{time:[-2717670498,-1633298400,-1615154400,-1601848800,-1583704800,-880236e3,-820540740,-812678340,-796867140,-84405600,-68680800,1924966800],offset:[-26898,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200]},"America/Toronto":{
time:[-2366755200,-1632088800,-1615154400,-1601771400,-1583712e3,-1567375200,-1554681600,-1534716e3,-1524088800,-1503266400,-149238e4,-1471816800,-1460930400,-1440972e3,-1428876e3,-1409522400,-1397426400,-1378072800,-1365976800,-1346623200,-1333922400,-1315173600,-1301868e3,-1283724e3,-1270418400,-1252274400,-1238968800,-1220824800,-1207519200,-1188770400,-1176069600,-1157320800,-1144015200,-1125871200,-1112565600,-1094421600,-1081116e3,-1062972e3,-1049666400,-1031522400,-1018216800,-1000072800,-986767200,-968018400,-955317600,-936568800,-880232400,-76941e4,-765410400,-747266400,-733960800,-715824e3,-702518400,-684374400,-671068800,-652924800,-634176e3,-620863200,-602719200,-589413600,-576108e3,-557964e3,-544658400,-526514400,-513208800,-495064800,-481759200,-463615200,-450309600,-431560800,-418255200,-400111200,-384386400,-368661600,-352936800,-337212e3,-321487200,-305762400,-289432800,-273708e3,-257983200,-242258400,-226533600,-210808800,-195084e3,-179359200,-163634400,-147909600,-13158e4,-11646e4,-100130400,-84405600,-68680800,-52956e3,-37231200,-21506400,-5781600,9943200,25668e3,41392800,57722400,73447200,89172e3,104896800,120621600,136346400,152071200,167796e3,183520800,199245600,215575200,230695200,247024800,262749600,278474400,294199200,309924e3,325648800,341373600,357098400,372823200,388548e3,404877600,419997600,436327200,452052e3,467776800,483501600,499226400,514951200,530676e3,544586400,562125600,576036e3,59418e4,607485600,625629600,638935200,657079200,670989600,688528800,702439200,719978400,733888800,752032800,765338400,783482400,796788e3,814932e3,828842400,846381600,860292e3,877831200,891741600,909280800,923191200,941335200,954640800,972784800,986090400,1004234400,1018144800,1035684e3,1049594400,1067133600,1081044e3,1099188e3,1112493600,1130637600,1143943200,1162087200,1173578400,1194141600,1205028e3,1225591200,1236477600,1257040800,1268532e3,1289095200,1299981600,1320544800,1331431200,1351994400,1362880800,1383444e3,1394330400,1414893600,142578e4,1446343200,1457834400,1478397600,1489284e3,1509847200,1520733600,1541296800,1552183200,1572746400,1583632800,1604196e3,1615687200,1636250400,1647136800,16677e5,1678586400,1699149600,1710036e3,1730599200,1741485600,1762048800,1772935200,1793498400,1804989600,1825552800,1836439200,1857002400,1867888800,1888452e3,1899338400,1919901600,1930788e3],
offset:[-19052,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-14400,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3]},"America/Vancouver":{
time:[-2713910400,-1632088800,-1615154400,-880236e3,-769420800,-765410400,-747266400,-732751200,-715816800,-702511200,-684367200,-671061600,-652917600,-639612e3,-620863200,-608162400,-589413600,-576108e3,-557964e3,-544658400,-526514400,-513208800,-495064800,-481759200,-463615200,-450309600,-431560800,-418255200,-400111200,-386805600,-368661600,-355356e3,-337212e3,-323906400,-305762400,-292456800,-273708e3,-261007200,-242258400,-226533600,-210808800,-195084e3,-179359200,-163634400,-147909600,-13158e4,-11646e4,-100130400,-84405600,-68680800,-52956e3,-37231200,-21506400,-5781600,9943200,25668e3,41392800,57722400,73447200,89172e3,104896800,120621600,136346400,152071200,167796e3,183520800,199245600,215575200,230695200,247024800,262749600,278474400,294199200,309924e3,325648800,341373600,357098400,372823200,388548e3,404877600,419997600,436327200,452052e3,467776800,483501600,499226400,514951200,530676e3,544586400,562125600,576036e3,59418e4,607485600,625629600,638935200,657079200,670989600,688528800,702439200,719978400,733888800,752032800,765338400,783482400,796788e3,814932e3,828842400,846381600,860292e3,877831200,891741600,909280800,923191200,941335200,954640800,972784800,986090400,1004234400,1018144800,1035684e3,1049594400,1067133600,1081044e3,1099188e3,1112493600,1130637600,1143943200,1162087200,1173578400,1194141600,1205028e3,1225591200,1236477600,1257040800,1268532e3,1289095200,1299981600,1320544800,1331431200,1351994400,1362880800,1383444e3,1394330400,1414893600,142578e4,1446343200,1457834400,1478397600,1489284e3,1509847200,1520733600,1541296800,1552183200,1572746400,1583632800,1604196e3,1615687200,1636250400,1647136800,16677e5,1678586400,1699149600,1710036e3,1730599200,1741485600,1762048800,1772935200,1793498400,1804989600,1825552800,1836439200,1857002400,1867888800,1888452e3,1899338400,1919901600,1930788e3],
offset:[-29548,-28800,-25200,-28800,-25200,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800]},"America/Argentina/Buenos_Aires":{time:[-2372112e3,-1567468800,-1233446400,-1222992e3,-1205971200,-1194048e3,-117288e4,-1162512e3,-1141344e3,-1130976e3,-1109808e3,-109944e4,-1078272e3,-1067817600,-1046649600,-1036281600,-1015113600,-1004745600,-983577600,-973209600,-952041600,-941587200,-931046400,-900892800,-890352e3,-83376e4,-82728e4,-752284800,-733795200,-197337600,-190857600,-184204800,-164505600,-152668800,-132969600,-121132800,-101433600,-86832e3,-71107200,-54777600,-39052800,-23328e3,-7603200,128131200,136598400,596937600,605059200,624412800,636508800,656467200,667958400,687916800,699408e3,719366400,731462400,938908800,952041600,1198972800,1205625600,1224374400,1237075200,1924981200],offset:[-14028,-15408,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-10800,-10800,-7200,-10800,-7200,-10800]},"America/El_Salvador":{time:[-1546300800,546998400,559699200,578448e3,591148800,1924970400],offset:[-21408,-21600,-18e3,-21600,-18e3,-21600]},"America/Sao_Paulo":{
time:[-1767225600,-1206968400,-1191369600,-1175385600,-1159833600,-633830400,-622076400,-602294400,-59184e4,-570758400,-560217600,-539136e3,-53136e4,-195436800,-184204800,-155174400,-150076800,-128908800,-121132800,-99964800,-89596800,-68428800,-57974400,499737600,511228800,530582400,540259200,562118400,571190400,592963200,602035200,624412800,634694400,656467200,666748800,687916800,697593600,719971200,728438400,750816e3,761702400,782265600,793152e3,813715200,823996800,84456e4,856051200,876096e3,888710400,908064e3,919555200,938908800,951609600,970963200,982454400,1003017600,1013904e3,1036281600,1045353600,1066521600,1076803200,1099353600,1108857600,1129420800,1140307200,1162684800,1172361600,119232e4,1203206400,1224374400,1234656e3,1255824e3,1266710400,1287273600,129816e4,1318723200,1330214400,1350777600,1361059200,1382227200,1392508800,1413676800,1424563200,1445126400,1456012800,1476576e3,1487462400,1508025600,1518912e3,1541289600,1550361600,1572739200,1581811200,1604188800,1613865600,1636243200,1645315200,1667692800,1677369600,1699142400,1708214400,1730592e3,1739664e3,1762041600,1771718400,1793491200,1803168e3,1825545600,1834617600,1856995200,1866067200,1888444800,1897516800,1919894400,1928966400],offset:[-11188,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200]},"America/Bogota":{time:[-2707689600,-1739059200,704851200,733881600,1924974e3],offset:[-17776,-17776,-18e3,-14400,-18e3]},"America/Caracas":{time:[-2524521600,-1826755200,-157766400,1197169200,1462069800,1924977600],offset:[-16064,-16060,-16200,-14400,-16200,-14400]},"Europe/Moscow":{
time:[-2840140800,-1688256e3,-165681e4,-1641340800,-1627956e3,-1618700400,-1596416400,-1593804521,-1589846400,-1542416400,-1539478800,-1525305600,-1522713600,-1491177600,-1247529600,354931200,370742400,386467200,402278400,418003200,433814400,449625600,465361200,481082400,496810800,512532e3,528260400,543981600,55971e4,575431200,591159600,606880800,622609200,638330400,654663600,670384800,686113200,695786400,701834400,717562800,733284e3,749012400,764733600,780462e3,796183200,811911600,828237600,846385200,859687200,877834800,891136800,909284400,922586400,941338800,954036e3,972788400,985485600,1004238e3,101754e4,1035687600,1048989600,1067137200,1080439200,1099191600,1111888800,1130641200,1143338400,1162090800,1174788e3,1193540400,1206842400,122499e4,1238292e3,1256439600,1269741600,1288494e3,1301191200,1414288800,1925002800],offset:[9017,9017,9079,12679,9079,16279,12679,16279,14400,10800,14400,18e3,14400,10800,7200,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,10800,7200,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800]},"Europe/Athens":{time:[-2344636800,-1686095940,-1182988800,-1178150400,-906854400,-904867200,-85725e4,-844473600,-828230400,-812419200,-552355200,-541641600,166492800,186195600,198036e3,213764400,228880800,244090800,260330400,275457600,291805200,307418400,323395200,338947200,354682800,370411200,386132400,401860800,417582e3,433310400,449031600,465364800,481086e3,496814400,512535600,528264e3,543985200,559713600,575434800,591163200,606884400,622612800,638334e3,654667200,670388400,686116800,701838e3,717566400,733287600,749016e3,764737200,780465600,796186800,811915200,828241200,846388800,859690800,877838400,891140400,909288e3,92259e4,941342400,954039600,972792e3,985489200,1004241600,1017543600,1035691200,1048993200,1067140800,1080442800,1099195200,1111892400,1130644800,1143342e3,1162094400,1174791600,1193544e3,1206846e3,1224993600,1238295600,1256443200,1269745200,1288497600,1301194800,1319947200,1332644400,1351396800,1364698800,1382846400,1396148400,1414296e3,1427598e3,1445745600,1459047600,14778e5,1490497200,1509249600,1521946800,1540699200,1554001200,1572148800,1585450800,1603598400,1616900400,1635652800,164835e4,1667102400,1679799600,1698552e3,1711854e3,1730001600,1743303600,1761451200,1774753200,1792900800,1806202800,1824955200,1837652400,1856404800,1869102e3,1887854400,1901156400,1919304e3,1932606e3],
offset:[5692,5692,7200,10800,7200,10800,7200,3600,7200,3600,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200]},"Europe/Belgrade":{time:[-2713910400,-905821200,-85725e4,-844552800,-828219600,-812498400,-79677e4,-777938400,-766616400,417578400,433306800,449028e3,465361200,481082400,496810800,512532e3,528260400,543981600,55971e4,575431200,591159600,606880800,622609200,638330400,654663600,670384800,686113200,701834400,717562800,733284e3,749012400,764733600,780462e3,796183200,811911600,828237600,846385200,859687200,877834800,891136800,909284400,922586400,941338800,954036e3,972788400,985485600,1004238e3,101754e4,1035687600,1048989600,1067137200,1080439200,1099191600,1111888800,1130641200,1143338400,1162090800,1174788e3,1193540400,1206842400,122499e4,1238292e3,1256439600,1269741600,1288494e3,1301191200,1319943600,1332640800,1351393200,1364695200,1382842800,1396144800,1414292400,1427594400,1445742e3,1459044e3,1477796400,1490493600,1509246e3,1521943200,1540695600,1553997600,1572145200,1585447200,1603594800,1616896800,1635649200,1648346400,1667098800,1679796e3,1698548400,1711850400,1729998e3,17433e5,1761447600,1774749600,1792897200,1806199200,1824951600,1837648800,1856401200,1869098400,1887850800,1901152800,1919300400,1932602400],offset:[4920,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600]},"Europe/Berlin":{
time:[-2422051200,-1693702800,-1680476400,-1663452e3,-1650142800,-1632002400,-1618693200,-938901600,-85725e4,-844552800,-828219600,-812498400,-79677e4,-781048800,-776556e3,-765925200,-761173200,-748476e3,-733266e3,-717627600,-714603600,-71037e4,-701902800,-684972e3,-670453200,-654127200,-639003600,323834400,338958e3,354679200,370407600,386128800,401857200,417578400,433306800,449028e3,465361200,481082400,496810800,512532e3,528260400,543981600,55971e4,575431200,591159600,606880800,622609200,638330400,654663600,670384800,686113200,701834400,717562800,733284e3,749012400,764733600,780462e3,796183200,811911600,828237600,846385200,859687200,877834800,891136800,909284400,922586400,941338800,954036e3,972788400,985485600,1004238e3,101754e4,1035687600,1048989600,1067137200,1080439200,1099191600,1111888800,1130641200,1143338400,1162090800,1174788e3,1193540400,1206842400,122499e4,1238292e3,1256439600,1269741600,1288494e3,1301191200,1319943600,1332640800,1351393200,1364695200,1382842800,1396144800,1414292400,1427594400,1445742e3,1459044e3,1477796400,1490493600,1509246e3,1521943200,1540695600,1553997600,1572145200,1585447200,1603594800,1616896800,1635649200,1648346400,1667098800,1679796e3,1698548400,1711850400,1729998e3,17433e5,1761447600,1774749600,1792897200,1806199200,1824951600,1837648800,1856401200,1869098400,1887850800,1901152800,1919300400,1932602400],offset:[3208,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,10800,7200,3600,7200,3600,7200,10800,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600]},"Europe/London":{
time:[-3852662400,-1691964e3,-1680469200,-1664143200,-1650142800,-1633903200,-1617483600,-1601848800,-1586034e3,-1570399200,-1552165200,-1538344800,-152253e4,-15075e5,-1490562e3,-1473631200,-1460926800,-1442786400,-1428872400,-1410732e3,-1396213200,-1379282400,-1364763600,-1348437600,-1333314e3,-1315778400,-1301259600,-1284328800,-126981e4,-1253484e3,-1238360400,-1221429600,-1206910800,-118998e4,-1175461200,-1159135200,-1143406800,-1126476e3,-1111957200,-1095631200,-1080507600,-1063576800,-1049058e3,-1032127200,-1017608400,-1001282400,-986158800,-969228e3,-950475600,-942012e3,-904514400,-896043600,-875484e3,-864594e3,-844034400,-832539600,-812584800,-798066e3,-781048800,-772059600,-764802e3,-748476e3,-733352400,-719445600,-717026400,-706741200,-699483600,-687996e3,-668034e3,-654732e3,-636584400,-622072800,-605739600,-590623200,-57429e4,-558568800,-542235600,-527119200,-512600400,-496274400,-481150800,-46422e4,-449701200,-432165600,-417646800,-401320800,-386197200,-369266400,-354747600,-337816800,-323298e3,-306972e3,-291848400,-276732e3,-257979600,-245282400,-22653e4,-213228e3,-195080400,-182383200,-163630800,-150933600,-132181200,-119484e3,-100731600,-88034400,-68677200,-59004e3,-37238400,57726e3,69818400,89175600,101268e3,120625200,132717600,152074800,164167200,183524400,196221600,214974e3,227671200,246423600,259120800,278478e3,290570400,309927600,32202e4,341377200,354675600,372823200,386125200,404272800,417574800,435722400,449024400,467776800,481078800,499226400,512528400,530676e3,543978e3,562125600,575427600,593575200,606877200,625629600,638326800,657079200,670381200,688528800,701830800,719978400,733280400,751428e3,76473e4,782877600,796179600,814327200,828234e3,846381600,859683600,877831200,891133200,909280800,922582800,941335200,954032400,972784800,985482e3,1004234400,1017536400,1035684e3,1048986e3,1067133600,1080435600,1099188e3,1111885200,1130637600,1143334800,1162087200,1174784400,1193536800,1206838800,1224986400,1238288400,1256436e3,1269738e3,1288490400,1301187600,131994e4,1332637200,1351389600,1364691600,1382839200,1396141200,1414288800,1427590800,1445738400,1459040400,1477792800,149049e4,1509242400,1521939600,1540692e3,1553994e3,1572141600,1585443600,1603591200,1616893200,1635645600,1648342800,1667095200,1679792400,1698544800,1711846800,1729994400,1743296400,1761444e3,1774746e3,1792893600,1806195600,1824948e3,1837645200,1856397600,1869094800,1887847200,1901149200,1919296800,1932598800],
offset:[-75,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,0,3600,0,3600,7200,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0]},"Europe/Luxembourg":{time:[-2069712e3,-1692493200,-1680476400,-1662339600,-165015e4,-1632002400,-1618693200,-1612656e3,-1604278800,-1585515600,-1574038800,-1552255200,-1539997200,-1520546400,-1507510800,-1490569200,-1473642e3,-1459116e3,-1444006800,-142767e4,-1411866e3,-1396220400,-1379293200,-1364770800,-1348448400,-1333321200,-1316394e3,-1301266800,-1284339600,-126981e4,-1253484e3,-1238360400,-1221429600,-1206910800,-1191189600,-1175461200,-1160344800,-1143406800,-1127685600,-1111957200,-1096840800,-1080507600,-1063576800,-1049058e3,-1033336800,-1017608400,-1002492e3,-986158800,-969228e3,-950475600,-942012e3,-935182800,-85725e4,-844552800,-828219600,-812498400,-797979600,-781048800,-766616400,-745452e3,-733266e3,228880800,244004400,260330400,276058800,29178e4,307508400,323834400,338958e3,354679200,370407600,386128800,401857200,417578400,433306800,449028e3,465361200,481082400,496810800,512532e3,528260400,543981600,55971e4,575431200,591159600,606880800,622609200,638330400,654663600,670384800,686113200,701834400,717562800,733284e3,749012400,764733600,780462e3,796183200,811911600,828237600,846385200,859687200,877834800,891136800,909284400,922586400,941338800,954036e3,972788400,985485600,1004238e3,101754e4,1035687600,1048989600,1067137200,1080439200,1099191600,1111888800,1130641200,1143338400,1162090800,1174788e3,1193540400,1206842400,122499e4,1238292e3,1256439600,1269741600,1288494e3,1301191200,1319943600,1332640800,1351393200,1364695200,1382842800,1396144800,1414292400,1427594400,1445742e3,1459044e3,1477796400,1490493600,1509246e3,1521943200,1540695600,1553997600,1572145200,1585447200,1603594800,1616896800,1635649200,1648346400,1667098800,1679796e3,1698548400,1711850400,1729998e3,17433e5,1761447600,1774749600,1792897200,1806199200,1824951600,1837648800,1856401200,1869098400,1887850800,1901152800,1919300400,1932602400],
offset:[1476,3600,7200,3600,7200,3600,7200,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600]},"Europe/Madrid":{time:[-2177453684,-1631926800,-1616972400,-1601168400,-1585436400,-1442451600,-1427756400,-1379293200,-1364857200,-1348448400,-1333407600,-1316390400,-1301353200,-1284339600,-1269903600,-1026954e3,-1017702e3,-1001898e3,-999478800,-986083200,-951519600,-940208400,-873075600,-862614e3,-842835600,-828313200,-811386e3,-796863600,-779936400,-765414e3,-748486800,-733964400,-652323600,-639010800,135126e3,150253200,166575600,181702800,196815600,212547600,22887e4,243997200,260330400,276058800,29178e4,307508400,323834400,338958e3,354679200,370407600,386128800,401857200,417578400,433306800,449028e3,465361200,481082400,496810800,512532e3,528260400,543981600,55971e4,575431200,591159600,606880800,622609200,638330400,654663600,670384800,686113200,701834400,717562800,733284e3,749012400,764733600,780462e3,796183200,811911600,828237600,846385200,859687200,877834800,891136800,909284400,922586400,941338800,954036e3,972788400,985485600,1004238e3,101754e4,1035687600,1048989600,1067137200,1080439200,1099191600,1111888800,1130641200,1143338400,1162090800,1174788e3,1193540400,1206842400,122499e4,1238292e3,1256439600,1269741600,1288494e3,1301191200,1319943600,1332640800,1351393200,1364695200,1382842800,1396144800,1414292400,1427594400,1445742e3,1459044e3,1477796400,1490493600,1509246e3,1521943200,1540695600,1553997600,1572145200,1585447200,1603594800,1616896800,1635649200,1648346400,1667098800,1679796e3,1698548400,1711850400,1729998e3,17433e5,1761447600,1774749600,1792897200,1806199200,1824951600,1837648800,1856401200,1869098400,1887850800,1901152800,1919300400,1932602400],
offset:[-884,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,7200,3600,0,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600]},"Europe/Paris":{time:[-2486678340,-1855958340,-1689814800,-1680393600,-1665363600,-1648339200,-1635123600,-1616889600,-1604278800,-158544e4,-1574038800,-1552262400,-1539997200,-1520553600,-1507510800,-1490572800,-1470618e3,-1459123200,-1444006800,-1427673600,-1411952400,-1396224e3,-1379293200,-1364774400,-1348448400,-1333324800,-1316394e3,-1301270400,-1284339600,-1269820800,-1253494800,-1238371200,-1221440400,-1206921600,-1191200400,-1175472e3,-1160355600,-1143417600,-1127696400,-1111968e3,-1096851600,-1080518400,-1063587600,-1049068800,-1033347600,-1017619200,-1002502800,-986169600,-969238800,-950486400,-942012e3,-932432400,-85725e4,-844552800,-828219600,-812498400,-800064e3,-796258800,-781048800,-766616400,196822800,212547600,228880800,244004400,260330400,276058800,29178e4,307508400,323834400,338958e3,354679200,370407600,386128800,401857200,417578400,433306800,449028e3,465361200,481082400,496810800,512532e3,528260400,543981600,55971e4,575431200,591159600,606880800,622609200,638330400,654663600,670384800,686113200,701834400,717562800,733284e3,749012400,764733600,780462e3,796183200,811911600,828237600,846385200,859687200,877834800,891136800,909284400,922586400,941338800,954036e3,972788400,985485600,1004238e3,101754e4,1035687600,1048989600,1067137200,1080439200,1099191600,1111888800,1130641200,1143338400,1162090800,1174788e3,1193540400,1206842400,122499e4,1238292e3,1256439600,1269741600,1288494e3,1301191200,1319943600,1332640800,1351393200,1364695200,1382842800,1396144800,1414292400,1427594400,1445742e3,1459044e3,1477796400,1490493600,1509246e3,1521943200,1540695600,1553997600,1572145200,1585447200,1603594800,1616896800,1635649200,1648346400,1667098800,1679796e3,1698548400,1711850400,1729998e3,17433e5,1761447600,1774749600,1792897200,1806199200,1824951600,1837648800,1856401200,1869098400,1887850800,1901152800,1919300400,1932602400],
offset:[561,561,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,7200,3600,7200,3600,7200,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600]},"Europe/Rome":{time:[-3259094400,-2403562204,-1690761600,-168048e4,-1664755200,-1648944e3,-163512e4,-1616889600,-1604275200,-1585526400,-1571011200,-1555286400,-932428800,-85725e4,-844552800,-828219600,-812498400,-798066e3,-781048800,-76671e4,-750895200,-733352400,-719452800,-70191e4,-689205600,-670453200,-114048e3,-103161600,-81993600,-71708400,-50544e3,-40258800,-18489600,-8204400,1296e4,23245200,43804800,54694800,75859200,86749200,107913600,118198800,138758400,149648400,170812800,181098e3,202262400,212547600,233107200,243997200,265161600,276051600,296611200,307501200,323834400,338958e3,354679200,370407600,386128800,401857200,417578400,433306800,449028e3,465361200,481082400,496810800,512532e3,528260400,543981600,55971e4,575431200,591159600,606880800,622609200,638330400,654663600,670384800,686113200,701834400,717562800,733284e3,749012400,764733600,780462e3,796183200,811911600,828237600,846385200,859687200,877834800,891136800,909284400,922586400,941338800,954036e3,972788400,985485600,1004238e3,101754e4,1035687600,1048989600,1067137200,1080439200,1099191600,1111888800,1130641200,1143338400,1162090800,1174788e3,1193540400,1206842400,122499e4,1238292e3,1256439600,1269741600,1288494e3,1301191200,1319943600,1332640800,1351393200,1364695200,1382842800,1396144800,1414292400,1427594400,1445742e3,1459044e3,1477796400,1490493600,1509246e3,1521943200,1540695600,1553997600,1572145200,1585447200,1603594800,1616896800,1635649200,1648346400,1667098800,1679796e3,1698548400,1711850400,1729998e3,17433e5,1761447600,1774749600,1792897200,1806199200,1824951600,1837648800,1856401200,1869098400,1887850800,1901152800,1919300400,1932602400],
offset:[2996,2996,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600]},"Europe/Warsaw":{time:[-2840140800,-1717027200,-1693702800,-1680476400,-1663452e3,-1650142800,-1632002400,-1618693200,-1600466400,-1587157200,-1501718400,-931730400,-85725e4,-844552800,-828219600,-812498400,-796600800,-778723200,-762652800,-748483200,-733266e3,-715212e3,-701902800,-684972e3,-670453200,-654127200,-639003600,-397090800,-386805600,-371084400,-355356e3,-334191600,-323301600,-307580400,-291852e3,-271292400,-260402400,-239842800,-228952800,-208393200,-197503200,-176338800,-166053600,228877200,244000800,260326800,276055200,291776400,307504800,323830800,338954400,354675600,370404e3,386125200,401853600,417574800,433303200,449024400,465357600,481078800,496807200,512528400,528256800,543978e3,559706400,575431200,591159600,606880800,622609200,638330400,654663600,670384800,686113200,701834400,717562800,733284e3,749012400,764733600,780462e3,796183200,811911600,828237600,846385200,859687200,877834800,891136800,909284400,922586400,941338800,954036e3,972788400,985485600,1004238e3,101754e4,1035687600,1048989600,1067137200,1080439200,1099191600,1111888800,1130641200,1143338400,1162090800,1174788e3,1193540400,1206842400,122499e4,1238292e3,1256439600,1269741600,1288494e3,1301191200,1319943600,1332640800,1351393200,1364695200,1382842800,1396144800,1414292400,1427594400,1445742e3,1459044e3,1477796400,1490493600,1509246e3,1521943200,1540695600,1553997600,1572145200,1585447200,1603594800,1616896800,1635649200,1648346400,1667098800,1679796e3,1698548400,1711850400,1729998e3,17433e5,1761447600,1774749600,1792897200,1806199200,1824951600,1837648800,1856401200,1869098400,1887850800,1901152800,1919300400,1932602400],
offset:[5040,5040,3600,7200,3600,7200,3600,7200,7200,10800,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600]},"Europe/Istanbul":{time:[-2840140800,-1869868800,-1693699200,-168048e4,-1570406400,-1552176e3,-1538352e3,-1522540800,-1507507200,-1490572800,-1440201600,-1428019200,-1409702400,-1396483200,-931132800,-922752e3,-917827200,-892425600,-875836800,-857347200,-781056e3,-764726400,-744336e3,-733795200,-716428800,-701913600,-684979200,-670464e3,-654134400,-639014400,-621820800,-60696e4,-590025600,-575424e3,-235612800,-228268800,-177724800,-165715200,10540800,23846400,41990400,55296e3,74044800,87350400,107917200,12123e4,133927200,152686800,165369600,183513600,202435200,215568e3,228873600,245808e3,260323200,277257600,308793600,323838e3,340243200,354682800,371692800,386132400,403142400,428457600,433900800,482803200,496713600,512528400,528256800,543978e3,559706400,575427600,591156e3,606877200,622605600,638326800,65466e4,670381200,686109600,701830800,717559200,733280400,749008800,764125200,780458400,796179600,811908e3,828234e3,846381600,859683600,877831200,891133200,909280800,922582800,941335200,954032400,972784800,985482e3,1004234400,1017536400,1035684e3,1048986e3,1067133600,1080435600,1099188e3,1111885200,1130637600,1143334800,1162087200,1174791600,1193544e3,1206846e3,1224993600,1238295600,1256443200,1269745200,1288497600,1301281200,1319947200,1332644400,1351396800,1364698800,1382846400,1396234800,1414296e3,1427598e3,1446955200,1459047600,1473206400,1925002800],offset:[6952,7016,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,10800]},"Europe/Zurich":{
time:[-3675196800,-2385244800,-904431600,-891122400,-872982e3,-859672800,354679200,370407600,386128800,401857200,417578400,433306800,449028e3,465361200,481082400,496810800,512532e3,528260400,543981600,55971e4,575431200,591159600,606880800,622609200,638330400,654663600,670384800,686113200,701834400,717562800,733284e3,749012400,764733600,780462e3,796183200,811911600,828237600,846385200,859687200,877834800,891136800,909284400,922586400,941338800,954036e3,972788400,985485600,1004238e3,101754e4,1035687600,1048989600,1067137200,1080439200,1099191600,1111888800,1130641200,1143338400,1162090800,1174788e3,1193540400,1206842400,122499e4,1238292e3,1256439600,1269741600,1288494e3,1301191200,1319943600,1332640800,1351393200,1364695200,1382842800,1396144800,1414292400,1427594400,1445742e3,1459044e3,1477796400,1490493600,1509246e3,1521943200,1540695600,1553997600,1572145200,1585447200,1603594800,1616896800,1635649200,1648346400,1667098800,1679796e3,1698548400,1711850400,1729998e3,17433e5,1761447600,1774749600,1792897200,1806199200,1824951600,1837648800,1856401200,1869098400,1887850800,1901152800,1919300400,1932602400],offset:[2048,1786,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600]},"Australia/Sydney":{time:[-2364076800,-1672531140,-1665352800,-883605600,-876088800,-860364e3,-844639200,-828309600,-813189600,57722400,68007600,89172e3,100062e3,120621600,131511600,152071200,162961200,183520800,195015600,215575200,226465200,247024800,257914800,278474400,289364400,309924e3,320814e3,341373600,352263600,372823200,386737200,404877600,415767600,436327200,447217200,467776800,478666800,499226400,511326e3,530071200,542775600,562125600,57483e4,59418e4,606279600,625629600,636519600,657079200,667969200,688528800,699418800,719978400,731473200,752032800,762922800,783482400,794372400,814932e3,828241200,846381600,859690800,877831200,891140400,909280800,92259e4,941335200,954039600,967341600,985489200,1004234400,1017543600,1035684e3,1048993200,1067133600,1080442800,1099188e3,1111892400,1130637600,1143946800,1162087200,1174791600,1193536800,1207450800,1223172e3,1238900400,1254621600,127035e4,1286071200,1301799600,1317520800,1333249200,1349575200,1365303600,1381024800,1396753200,1412474400,1428202800,1443924e3,1459652400,1475373600,1491102e3,1506823200,1522551600,1538877600,1554606e3,1570327200,1586055600,1601776800,1617505200,1633226400,1648954800,1664676e3,1680404400,1696125600,1712458800,172818e4,1743908400,1759629600,1775358e3,1791079200,1806807600,1822528800,1838257200,1853978400,1869706800,1886032800,1901761200,1917482400,1933210800],
offset:[36292,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600]},"Australia/Brisbane":{time:[-2366755200,-1672531140,-1665352800,-883605600,-876088800,-860364e3,-844639200,-828309600,-813189600,57722400,68007600,625629600,636519600,657079200,667969200,688528800,699418800,1925028e3],offset:[36728,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3]},"Australia/Adelaide":{time:[-2364076800,-2230156800,-1672531140,-1665352800,-883605600,-876088800,-860364e3,-844639200,-828309600,-813189600,57722400,68007600,89172e3,100062e3,120621600,131511600,152071200,162961200,183520800,195015600,215575200,226465200,247024800,257914800,278474400,289364400,309924e3,320814e3,341373600,352263600,372823200,384318e3,404877600,415767600,436327200,447217200,467776800,478666800,499226400,511326e3,530071200,542775600,562125600,57483e4,59418e4,606279600,625629600,637729200,657079200,667969200,688528800,701233200,719978400,731473200,752032800,764132400,783482400,796186800,814932e3,828241200,846381600,859690800,877831200,891140400,909280800,92259e4,941335200,954039600,972784800,985489200,1004234400,1017543600,1035684e3,1048993200,1067133600,1080442800,1099188e3,1111892400,1130637600,1143946800,1162087200,1174791600,1193536800,1207450800,1223172e3,1238900400,1254621600,127035e4,1286071200,1301799600,1317520800,1333249200,1349575200,1365303600,1381024800,1396753200,1412474400,1428202800,1443924e3,1459652400,1475373600,1491102e3,1506823200,1522551600,1538877600,1554606e3,1570327200,1586055600,1601776800,1617505200,1633226400,1648954800,1664676e3,1680404400,1696125600,1712458800,172818e4,1743908400,1759629600,1775358e3,1791079200,1806807600,1822528800,1838257200,1853978400,1869706800,1886032800,1901761200,1917482400,1933210800],
offset:[33260,32400,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800]},"Australia/ACT":{time:[-2364076800,-1672531140,-1665352800,-883605600,-876088800,-860364e3,-844639200,-828309600,-813189600,57722400,68007600,89172e3,100062e3,120621600,131511600,152071200,162961200,183520800,195015600,215575200,226465200,247024800,257914800,278474400,289364400,309924e3,320814e3,341373600,352263600,372823200,386737200,404877600,415767600,436327200,447217200,467776800,478666800,499226400,511326e3,530071200,542775600,562125600,57483e4,59418e4,606279600,625629600,636519600,657079200,667969200,688528800,699418800,719978400,731473200,752032800,762922800,783482400,794372400,814932e3,828241200,846381600,859690800,877831200,891140400,909280800,92259e4,941335200,954039600,967341600,985489200,1004234400,1017543600,1035684e3,1048993200,1067133600,1080442800,1099188e3,1111892400,1130637600,1143946800,1162087200,1174791600,1193536800,1207450800,1223172e3,1238900400,1254621600,127035e4,1286071200,1301799600,1317520800,1333249200,1349575200,1365303600,1381024800,1396753200,1412474400,1428202800,1443924e3,1459652400,1475373600,1491102e3,1506823200,1522551600,1538877600,1554606e3,1570327200,1586055600,1601776800,1617505200,1633226400,1648954800,1664676e3,1680404400,1696125600,1712458800,172818e4,1743908400,1759629600,1775358e3,1791079200,1806807600,1822528800,1838257200,1853978400,1869706800,1886032800,1901761200,1917482400,1933210800],offset:[36292,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600]},"Asia/Almaty":{
time:[-1441152e3,-1247529600,354931200,370742400,386467200,402278400,418003200,433814400,449625600,465361200,481082400,496810800,512532e3,528260400,543981600,55971e4,575431200,591159600,606880800,622609200,638330400,654663600,670384800,686113200,695786400,701834400,717562800,733284e3,749012400,764733600,780462e3,796183200,811911600,828237600,846385200,859687200,877834800,891136800,909284400,922586400,941338800,954036e3,972788400,985485600,1004238e3,101754e4,1035687600,1048989600,1067137200,1080439200,1099191600,1925013600],offset:[18468,18e3,21600,25200,21600,25200,21600,25200,21600,25200,21600,25200,21600,25200,21600,25200,21600,25200,21600,25200,21600,25200,21600,21600,18e3,21600,25200,21600,25200,21600,25200,21600,25200,21600,25200,21600,25200,21600,25200,21600,25200,21600,25200,21600,25200,21600,25200,21600,25200,21600,25200,21600]},"Asia/Ashkhabad":{time:[-1441152e3,-1247529600,354931200,370742400,386467200,402278400,418003200,433814400,449625600,465361200,481082400,496810800,512532e3,528260400,543981600,55971e4,575431200,591159600,606880800,622609200,638330400,654663600,670384800,686113200,695786400,192501e4],offset:[14012,14400,18e3,21600,18e3,21600,18e3,21600,18e3,21600,18e3,21600,18e3,21600,18e3,21600,18e3,21600,18e3,21600,18e3,21600,18e3,18e3,14400,18e3]},"Asia/Tokyo":{time:[-2587678861,-683769600,-672278400,-654739200,-640828800,-620265600,-609379200,-588816e3,-577929600,1925024400],offset:[33539,32400,36e3,32400,36e3,32400,36e3,32400,36e3,32400]},"Asia/Taipei":{time:[-2335219200,-1017792e3,-766191600,-745804800,-733795200,-716860800,-699580800,-683856e3,-670636800,-65232e4,-639100800,-620784e3,-607564800,-589248e3,-576028800,-562896e3,-541728e3,-528681600,-510192e3,-497145600,-478656e3,-465609600,-449798400,-433987200,-418176e3,-402451200,-38664e4,-370915200,-355104e3,-339379200,-323568e3,-302486400,-291945600,-270950400,-260409600,134006400,149817600,165542400,181353600,299635200,307584e3,1925020800],offset:[29160,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800]},"Asia/Singapore":{time:[-2177452800,-2038176e3,-1167609600,-1073001600,-894153600,-879638400,-766972800,378691200,1925020800],offset:[24925,24925,25200,26400,26400,27e3,32400,27e3,28800]},"Asia/Shanghai":{time:[-2177452800,-933465600,-923097600,-908755200,-891561600,515548800,52704e4,545184e3,558489600,576633600,589939200,608688e3,621993600,640137600,653443200,671587200,684892800,1925020800],offset:[29143,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800]},"Asia/Seoul":{time:[-1948752e3,-1830384e3,-767318400,-498096e3,-462672e3,-451699200,-429753600,-418262400,-399513600,-387417600,-368064e3,-355968e3,-336614400,-324518400,-305164800,-293068800,-264902400,547610400,560919600,57906e4,592369200,1925024400],
offset:[30472,30600,32400,32400,30600,34200,30600,34200,30600,34200,30600,34200,30600,34200,30600,34200,30600,32400,36e3,32400,36e3,32400]},"Asia/Tehran":{time:[-1704153600,-757382400,247190400,259286400,277776e3,283996800,290822400,306547200,322444800,338515200,673228800,685497600,701222400,71712e4,732758400,748656e3,764294400,780192e3,795830400,811728e3,827366400,843264e3,858988800,874886400,890524800,906422400,922060800,937958400,953596800,969494400,985219200,1001116800,1016755200,1032652800,1048291200,1064188800,1079827200,1095724800,1111449600,1127347200,1206057600,1221955200,123768e4,1253577600,1269216e3,1285113600,1300752e3,1316649600,1332288e3,1348185600,1363910400,1379808e3,1395446400,1411344e3,1426982400,144288e4,1458518400,1474416e3,1490140800,1506038400,1521676800,1537574400,1553212800,1569110400,1584748800,1600646400,1616371200,1632268800,1647907200,1663804800,1679443200,1695340800,1710979200,1726876800,1742601600,1758499200,1774137600,1790035200,1805673600,1821571200,1837209600,1853107200,1868745600,1884643200,1900368e3,1916265600,1931904e3],offset:[12344,12344,12600,14400,18e3,14400,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600]},"Asia/Dubai":{time:[-1577923200,1925006400],offset:[13272,14400]},"Asia/Kolkata":{time:[-3645216e3,-3155673600,-2019686400,-891561600,-872035200,-862617600,-764121600,1925011800],offset:[21208,21200,19270,19800,23400,19800,23400,19800]},"Asia/Hong_Kong":{time:[-2056665600,-907360200,-891635400,-884217600,-766713600,-747952200,-728512200,-717021e3,-694470600,-683757e3,-668032200,-654726600,-636582600,-623277e3,-605133e3,-591827400,-573683400,-559773e3,-542320200,-528323400,-510179400,-498083400,-478729800,-466633800,-446675400,-435184200,-415225800,-403129800,-383776200,-371680200,-352326600,-340230600,-320877e3,-308781e3,-288822600,-277331400,-257373e3,-245881800,-225923400,-213827400,-194473800,-182377800,-163024200,-148509e3,-132784200,-117059400,-101334600,-85609800,-69280200,-53555400,-37830600,-22105800,-6381e3,9343800,25068600,40793400,56518200,72243e3,88572600,104297400,120022200,126070200,151471800,167196600,182921400,198646200,214371e3,295414200,309324600,1925020800],offset:[27402,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800]},"Asia/Bangkok":{
time:[-2840140800,-1570060800,1925017200],offset:[24124,24124,25200]},"Asia/Chongqing":{time:[-2177452800,-933465600,-923097600,-908755200,-891561600,515548800,52704e4,545184e3,558489600,576633600,589939200,608688e3,621993600,640137600,653443200,671587200,684892800,1925020800],offset:[29143,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800]},"Asia/Jerusalem":{time:[-2840140800,-1640995200,-933638400,-857347200,-844293600,-825811200,-812678400,-794188800,-779846400,-762645600,-748303200,-731116800,-681955200,-673228800,-667951200,-65232e4,-636415200,-62208e4,-608936400,-59184e4,-572475600,-558568800,-542840400,-527724e3,-514414800,-490838400,-482976e3,-459468e3,-451526400,-428544e3,-418251600,-400024800,-387417600,142387200,150854400,167184e3,178675200,482284800,495590400,516758400,526435200,545443200,558489600,576633600,589334400,609897600,620784e3,638323200,651628800,669772800,683683200,701827200,715737600,733708800,747187200,765158400,778032e3,796608e3,810086400,826848e3,842832e3,858902400,874195200,890352e3,90504e4,923018400,936324e3,955677600,970794e3,986778e3,1001293200,1017363600,1033952400,1048813200,1065142800,1081299600,1095814800,1112320800,1128823200,1143770400,1159668e3,117522e4,1189908e3,1206669600,1223172e3,1238119200,1254016800,1269568800,1284256800,1301623200,1317520800,1333072800,1348365600,1364522400,1382839200,1395972e3,1414288800,1427421600,1445738400,1458871200,1477792800,1490320800,1509242400,1521770400,1540692e3,1553824800,1572141600,1585274400,1603591200,1616724e3,1635645600,1648173600,1667095200,1679623200,1698544800,1711677600,1729994400,1743127200,1761444e3,1774576800,1792893600,1806026400,1824948e3,1837476e3,1856397600,1868925600,1887847200,190098e4,1919296800,1932429600],offset:[8454,8440,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,14400,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200]},"Asia/Kuwait":{time:[-719625600,1925002800],offset:[11212,10800]},"Asia/Muscat":{time:[-1577923200,1925006400],offset:[13272,14400]},"Asia/Qatar":{time:[-1577923200,76204800,1925002800],offset:[12368,14400,10800]},"Asia/Riyadh":{time:[-719625600,1925002800],offset:[11212,10800]},"Pacific/Auckland":{
time:[-3192393600,-1330293600,-1320012e3,-1300658400,-1287352800,-1269208800,-1255903200,-1237759200,-1224453600,-1206309600,-1192399200,-117486e4,-1160949600,-1143410400,-1125871200,-1112565600,-1094421600,-1081116e3,-1062972e3,-1049666400,-1031522400,-1018216800,-1000072800,-986767200,-968018400,-955317600,-936568800,-923263200,-757382400,152676e3,162356400,183520800,195015600,215575200,226465200,247024800,257914800,278474400,289364400,309924e3,320814e3,341373600,352263600,372823200,384318e3,404877600,415767600,436327200,447217200,467776800,478666800,499226400,510116400,530676e3,541566e3,562125600,573620400,59418e4,60507e4,623815200,637729200,655264800,669178800,686714400,700628400,718164e3,732682800,749613600,764132400,781063200,795582e3,812512800,827031600,844567200,858481200,876016800,889930800,907466400,921985200,938916e3,953434800,970365600,984884400,100242e4,1016334e3,1033869600,1047783600,1065319200,1079838e3,1096768800,1111287600,1128218400,1142737200,1159668e3,1174186800,1191117600,1207450800,1222567200,1238900400,1254016800,127035e4,1285466400,1301799600,1316916e3,1333249200,1348970400,1365303600,138042e4,1396753200,1411869600,1428202800,1443319200,1459652400,1474768800,1491102e3,1506218400,1522551600,1538272800,1554606e3,1569722400,1586055600,1601172e3,1617505200,1632621600,1648954800,1664071200,1680404400,1695520800,1712458800,1727575200,1743908400,1759024800,1775358e3,1790474400,1806807600,1821924e3,1838257200,1853373600,1869706800,1885428e3,1901761200,1916877600,1933210800],offset:[41944,41400,45e3,41400,43200,41400,43200,41400,43200,41400,43200,41400,43200,41400,43200,41400,43200,41400,43200,41400,43200,41400,43200,41400,43200,41400,43200,41400,43200,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800]},"Pacific/Chatham":{
time:[-3192393600,-757382400,152678700,162359100,183523500,195018300,215577900,226467900,247027500,257917500,278477100,289367100,309926700,320816700,341376300,352266300,372825900,384320700,404880300,415770300,436329900,447219900,467779500,478669500,499229100,510119100,530678700,541568700,562128300,573623100,594182700,605072700,623817900,637731900,655267500,669181500,686717100,700631100,718166700,732685500,749616300,764135100,781065900,795584700,812515500,827034300,844569900,858483900,876019500,889933500,907469100,921987900,938918700,953437500,970368300,984887100,1002422700,1016336700,1033872300,1047786300,1065321900,1079840700,1096771500,1111290300,1128221100,1142739900,1159670700,1174189500,1191120300,1207453500,1222569900,1238903100,1254019500,1270352700,1285469100,1301802300,1316918700,1333251900,1348973100,1365306300,1380422700,1396755900,1411872300,1428205500,1443321900,1459655100,1474771500,1491104700,1506221100,1522554300,1538275500,1554608700,1569725100,1586058300,1601174700,1617507900,1632624300,1648957500,1664073900,1680407100,1695523500,1712461500,1727577900,1743911100,1759027500,1775360700,1790477100,1806810300,1821926700,1838259900,1853376300,1869709500,1885430700,1901763900,1916880300,1933213500],offset:[44028,44100,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500]},"Pacific/Fakaofo":{time:[-2177452800,1325203200,1925038800],offset:[-41096,-39600,46800]},"Pacific/Honolulu":{time:[-2334139200,-1157320800,-1155470400,-880236e3,-765410400,-712188e3,1924956e3],offset:[-37886,-37800,-34200,-37800,-34200,-37800,-36e3]},"America/Mexico_City":{
time:[-1514763396,-1343091600,-1234828800,-1220317200,-1207180800,-1191369600,-975283200,-963187200,-917136e3,-907372800,-821923200,-810086400,-627523200,-613008e3,828842400,846381600,860292e3,877831200,891741600,909280800,923191200,941335200,954640800,972784800,989114400,1001815200,1018144800,1035684e3,1049594400,1067133600,1081044e3,1099188e3,1112493600,1130637600,1143943200,1162087200,1175392800,1193536800,1207447200,1224986400,1238896800,1256436e3,1270346400,1288490400,1301796e3,131994e4,1333245600,1351389600,13653e5,1382839200,1396749600,1414288800,1428199200,1445738400,1459648800,1477792800,1491098400,1509242400,1522548e3,1540692e3,1554602400,1572141600,1586052e3,1603591200,1617501600,1635645600,1648951200,1667095200,1680400800,1698544800,1712455200,1729994400,1743904800,1761444e3,1775354400,1792893600,1806804e3,1824948e3,1838253600,1856397600,1869703200,1887847200,1901757600,1919296800,1933207200],offset:[-23796,-25200,-21600,-25200,-21600,-25200,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600]},"Africa/Cairo":{time:[-2185401600,-929836800,-923097600,-906163200,-892857600,-875836800,-857779200,-844300800,-825811200,-812678400,-794188800,-779846400,-762652800,-399081600,-38664e4,-368323200,-355104e3,-336783600,-323643600,-305161200,-292021200,-273625200,-260485200,-242089200,-228949200,-210553200,-197413200,-178930800,-165790800,-147394800,-134254800,-115858800,-102632400,-84322800,-71096400,-52700400,-39474e3,-21164400,-7938e3,10371600,23598e3,41907600,55134e3,7353e4,86756400,105066e3,118292400,136602e3,149828400,168138e3,181364400,199760400,212986800,231296400,244522800,262832400,276058800,294368400,307594800,325990800,339217200,357526800,370753200,396406800,402289200,426819600,433825200,452221200,465447600,483757200,496983600,515293200,528519600,546829200,560055600,578451600,591678e3,610419600,623214e3,641523600,65475e4,673059600,686286e3,704682e3,717908400,736218e3,749444400,767754e3,780980400,799027200,812332800,830476800,843782400,861926400,875232e3,893376e3,906681600,925430400,938736e3,95688e4,970185600,988329600,1001635200,1019779200,1033084800,1051228800,1064534400,1083283200,1096588800,1114732800,1128038400,1146182400,1158883200,1177632e3,1189123200,1209081600,1219968e3,1240531200,1250812800,1272585600,1281484800,1284076800,1285891200,1400198400,1403827200,1406851200,1411689600,1924999200],
offset:[7509,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200]},"Africa/Johannesburg":{time:[-2458166400,-2109283200,-860968800,-845244e3,-829519200,-813794400,1924999200],offset:[6720,5400,7200,10800,7200,10800,7200]},"Asia/Kathmandu":{time:[-1577923200,504921600,1925012700],offset:[20476,19800,20700]},"US/Mountain":{time:[-2717668796,-1633298400,-1615154400,-1601848800,-1583704800,-1570399200,-1551650400,-1538949600,-1534111200,-880236e3,-769417200,-765410400,-147909600,-13158e4,-11646e4,-100130400,-84405600,-68680800,-52956e3,-37231200,-21506400,-5781600,9943200,25668e3,41392800,57722400,73447200,89172e3,104896800,120621600,126669600,152071200,162352800,183520800,199245600,215575200,230695200,247024800,262749600,278474400,294199200,309924e3,325648800,341373600,357098400,372823200,388548e3,404877600,419997600,436327200,452052e3,467776800,483501600,499226400,514951200,530676e3,544586400,562125600,576036e3,59418e4,607485600,625629600,638935200,657079200,670989600,688528800,702439200,719978400,733888800,752032800,765338400,783482400,796788e3,814932e3,828842400,846381600,860292e3,877831200,891741600,909280800,923191200,941335200,954640800,972784800,986090400,1004234400,1018144800,1035684e3,1049594400,1067133600,1081044e3,1099188e3,1112493600,1130637600,1143943200,1162087200,1173578400,1194141600,1205028e3,1225591200,1236477600,1257040800,1268532e3,1289095200,1299981600,1320544800,1331431200,1351994400,1362880800,1383444e3,1394330400,1414893600,142578e4,1446343200,1457834400,1478397600,1489284e3,1509847200,1520733600,1541296800,1552183200,1572746400,1583632800,1604196e3,1615687200,1636250400,1647136800,16677e5,1678586400,1699149600,1710036e3,1730599200,1741485600,1762048800,1772935200,1793498400,1804989600,1825552800,1836439200,1857002400,1867888800,1888452e3,1899338400,1919901600,1930788e3],
offset:[-25196,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200]},"Europe/Helsinki":{time:[-2890252800,-1535932800,-875664e3,-859762800,354679200,370407600,386128800,401857200,417582e3,433310400,449031600,465364800,481086e3,496814400,512535600,528264e3,543985200,559713600,575434800,591163200,606884400,622612800,638334e3,654667200,670388400,686116800,701838e3,717566400,733287600,749016e3,764737200,780465600,796186800,811915200,828241200,846388800,859690800,877838400,891140400,909288e3,92259e4,941342400,954039600,972792e3,985489200,1004241600,1017543600,1035691200,1048993200,1067140800,1080442800,1099195200,1111892400,1130644800,1143342e3,1162094400,1174791600,1193544e3,1206846e3,1224993600,1238295600,1256443200,1269745200,1288497600,1301194800,1319947200,1332644400,1351396800,1364698800,1382846400,1396148400,1414296e3,1427598e3,1445745600,1459047600,14778e5,1490497200,1509249600,1521946800,1540699200,1554001200,1572148800,1585450800,1603598400,1616900400,1635652800,164835e4,1667102400,1679799600,1698552e3,1711854e3,1730001600,1743303600,1761451200,1774753200,1792900800,1806202800,1824955200,1837652400,1856404800,1869102e3,1887854400,1901156400,1919304e3,1932606e3],offset:[5989,5989,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200]},"Europe/Stockholm":{
time:[-2871676800,-2208988800,-1692493200,-1680476400,323834400,338958e3,354679200,370407600,386128800,401857200,417578400,433306800,449028e3,465361200,481082400,496810800,512532e3,528260400,543981600,55971e4,575431200,591159600,606880800,622609200,638330400,654663600,670384800,686113200,701834400,717562800,733284e3,749012400,764733600,780462e3,796183200,811911600,828237600,846385200,859687200,877834800,891136800,909284400,922586400,941338800,954036e3,972788400,985485600,1004238e3,101754e4,1035687600,1048989600,1067137200,1080439200,1099191600,1111888800,1130641200,1143338400,1162090800,1174788e3,1193540400,1206842400,122499e4,1238292e3,1256439600,1269741600,1288494e3,1301191200,1319943600,1332640800,1351393200,1364695200,1382842800,1396144800,1414292400,1427594400,1445742e3,1459044e3,1477796400,1490493600,1509246e3,1521943200,1540695600,1553997600,1572145200,1585447200,1603594800,1616896800,1635649200,1648346400,1667098800,1679796e3,1698548400,1711850400,1729998e3,17433e5,1761447600,1774749600,1792897200,1806199200,1824951600,1837648800,1856401200,1869098400,1887850800,1901152800,1919300400,1932602400],offset:[4332,3614,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600]},"Europe/Copenhagen":{time:[-2524521600,-2398291200,-1692493200,-1680483600,-935107200,-85725e4,-844552800,-828219600,-812498400,-79677e4,-781048800,-769381200,-747007200,-736376400,-715212e3,-706741200,-683157600,-675291600,323834400,338958e3,354679200,370407600,386128800,401857200,417578400,433306800,449028e3,465361200,481082400,496810800,512532e3,528260400,543981600,55971e4,575431200,591159600,606880800,622609200,638330400,654663600,670384800,686113200,701834400,717562800,733284e3,749012400,764733600,780462e3,796183200,811911600,828237600,846385200,859687200,877834800,891136800,909284400,922586400,941338800,954036e3,972788400,985485600,1004238e3,101754e4,1035687600,1048989600,1067137200,1080439200,1099191600,1111888800,1130641200,1143338400,1162090800,1174788e3,1193540400,1206842400,122499e4,1238292e3,1256439600,1269741600,1288494e3,1301191200,1319943600,1332640800,1351393200,1364695200,1382842800,1396144800,1414292400,1427594400,1445742e3,1459044e3,1477796400,1490493600,1509246e3,1521943200,1540695600,1553997600,1572145200,1585447200,1603594800,1616896800,1635649200,1648346400,1667098800,1679796e3,1698548400,1711850400,1729998e3,17433e5,1761447600,1774749600,1792897200,1806199200,1824951600,1837648800,1856401200,1869098400,1887850800,1901152800,1919300400,1932602400],
offset:[3020,3020,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600]},"Atlantic/Reykjavik":{time:[-1956614400,-1668214800,-1647212400,-1636678800,-161343e4,-1605142800,-1581894e3,-1539565200,-153135e4,-968029200,-952293600,-942012e3,-920239200,-909961200,-888789600,-877906800,-857944800,-846457200,-826495200,-815007600,-795045600,-783558e3,-762991200,-752108400,-731541600,-717634800,-700092e3,-686185200,-668642400,-654735600,-636588e3,-623286e3,-605743200,-591836400,-573688800,-559782e3,-542239200,-528332400,-510789600,-496882800,-47934e4,-465433200,-447890400,-433983600,-415836e3,-401929200,-384386400,-370479600,-352936800,-33903e4,-321487200,-307580400,-290037600,-276130800,-258588e3,-244681200,-226533600,-212626800,-195084e3,-181177200,-163634400,-149727600,-132184800,-118278e3,-100735200,-86828400,-68680800,-54774e3,1924992e3],offset:[-5280,-3600,0,-3600,0,-3600,0,-3600,0,-3600,0,-3600,0,-3600,0,-3600,0,-3600,0,-3600,0,-3600,0,-3600,0,-3600,0,-3600,0,-3600,0,-3600,0,-3600,0,-3600,0,-3600,0,-3600,0,-3600,0,-3600,0,-3600,0,-3600,0,-3600,0,-3600,0,-3600,0,-3600,0,-3600,0,-3600,0,-3600,0,-3600,0,-3600,0,-3600,0]},"Europe/Tallinn":{time:[-2840140800,-1638316800,-1632002400,-1618693200,-1593820800,-1535932800,-927936e3,-892944e3,-85725e4,-844552800,-828219600,-812498400,-797644800,354931200,370742400,386467200,402278400,418003200,433814400,449625600,465361200,481082400,496810800,512532e3,528260400,543981600,55971e4,575431200,591159600,606880800,622609200,638330400,654663600,670384800,686113200,701834400,717562800,733284e3,749012400,764733600,780462e3,796183200,811911600,828237600,846385200,859687200,877834800,891136800,909288e3,92259e4,941342400,1017543600,1035691200,1048993200,1067140800,1080442800,1099195200,1111892400,1130644800,1143342e3,1162094400,1174791600,1193544e3,1206846e3,1224993600,1238295600,1256443200,1269745200,1288497600,1301194800,1319947200,1332644400,1351396800,1364698800,1382846400,1396148400,1414296e3,1427598e3,1445745600,1459047600,14778e5,1490497200,1509249600,1521946800,1540699200,1554001200,1572148800,1585450800,1603598400,1616900400,1635652800,164835e4,1667102400,1679799600,1698552e3,1711854e3,1730001600,1743303600,1761451200,1774753200,1792900800,1806202800,1824955200,1837652400,1856404800,1869102e3,1887854400,1901156400,1919304e3,1932606e3],
offset:[5940,5940,3600,7200,3600,5940,7200,10800,7200,3600,7200,3600,7200,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200]},"Europe/Riga":{time:[-2840140800,-1632002400,-1618693200,-1601676e3,-1597266e3,-1377302400,-928022400,-899510400,-85725e4,-844552800,-828219600,-812498400,-79677e4,-795830400,354931200,370742400,386467200,402278400,418003200,433814400,449625600,465361200,481082400,496810800,512532e3,528260400,543981600,55971e4,575431200,591159600,606880800,622609200,638330400,654663600,670384800,686113200,701834400,717562800,733284e3,749012400,764733600,780462e3,796183200,811911600,828237600,843966e3,859690800,877838400,891140400,909288e3,92259e4,941342400,985489200,1004241600,1017543600,1035691200,1048993200,1067140800,1080442800,1099195200,1111892400,1130644800,1143342e3,1162094400,1174791600,1193544e3,1206846e3,1224993600,1238295600,1256443200,1269745200,1288497600,1301194800,1319947200,1332644400,1351396800,1364698800,1382846400,1396148400,1414296e3,1427598e3,1445745600,1459047600,14778e5,1490497200,1509249600,1521946800,1540699200,1554001200,1572148800,1585450800,1603598400,1616900400,1635652800,164835e4,1667102400,1679799600,1698552e3,1711854e3,1730001600,1743303600,1761451200,1774753200,1792900800,1806202800,1824955200,1837652400,1856404800,1869102e3,1887854400,1901156400,1919304e3,1932606e3],offset:[5794,5794,9394,5794,9394,5794,7200,10800,7200,3600,7200,3600,7200,3600,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200]},"Europe/Vilnius":{
time:[-2840140800,-1672531200,-1585094400,-1561248e3,-1553558400,-928195200,-900115200,-85725e4,-844552800,-828219600,-812498400,-802137600,354931200,370742400,386467200,402278400,418003200,433814400,449625600,465361200,481082400,496810800,512532e3,528260400,543981600,55971e4,575431200,591159600,606880800,622609200,638330400,654663600,670384800,686113200,701834400,717562800,733284e3,749012400,764733600,780462e3,796183200,811911600,828237600,846385200,859687200,877834800,891140400,909284400,922586400,941338800,1048993200,1067140800,1080442800,1099195200,1111892400,1130644800,1143342e3,1162094400,1174791600,1193544e3,1206846e3,1224993600,1238295600,1256443200,1269745200,1288497600,1301194800,1319947200,1332644400,1351396800,1364698800,1382846400,1396148400,1414296e3,1427598e3,1445745600,1459047600,14778e5,1490497200,1509249600,1521946800,1540699200,1554001200,1572148800,1585450800,1603598400,1616900400,1635652800,164835e4,1667102400,1679799600,1698552e3,1711854e3,1730001600,1743303600,1761451200,1774753200,1792900800,1806202800,1824955200,1837652400,1856404800,1869102e3,1887854400,1901156400,1919304e3,1932606e3],offset:[6076,5040,5736,3600,7200,3600,10800,7200,3600,7200,3600,7200,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,7200,3600,7200,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200]},"America/Lima":{time:[-2524521600,-1938556800,-1009843200,-1002067200,-986774400,-971049600,-955324800,-9396e5,504921600,512697600,536457600,544233600,631152e3,638928e3,757382400,765158400,1924974e3],offset:[-18492,-18516,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3]},"America/Santiago":{
time:[-2524521600,-1892678400,-1688428800,-1619222400,-1593820800,-1336003200,-13176e5,-1304380800,-1286064e3,-1272844800,-1254528e3,-1241308800,-1222992e3,-1209772800,-1191369600,-1178150400,-870566400,-865296e3,-740534400,-736387200,-718070400,-713667600,-36633600,-23932800,-3369600,7516800,24451200,37756800,55900800,69206400,87955200,100656e3,118195200,132105600,150854400,163555200,182304e3,195609600,213753600,227059200,245203200,258508800,277257600,289958400,308707200,321408e3,340156800,353462400,371606400,384912e3,403056e3,416361600,434505600,447811200,46656e4,479260800,498009600,510710400,529459200,545184e3,560908800,574214400,592358400,605664e3,624412800,637113600,653443200,668563200,687312e3,700617600,718761600,732067200,750211200,763516800,781660800,794966400,813715200,826416e3,845164800,85968e4,876614400,88992e4,906854400,923184e3,939513600,952819200,971568e3,984268800,1003017600,1015718400,1034467200,1047168e3,1065916800,1079222400,1097366400,1110672e3,1128816e3,1142121600,1160870400,1173571200,119232e4,1206835200,1223769600,1237075200,1255219200,1270339200,1286668800,1304812800,1313884800,1335657600,1346544e3,1367107200,1378598400,1398556800,1410048e3,1463270400,1471132800,149472e4,1502582400,1526169600,1534032e3,1557619200,1565481600,1589068800,1596931200,1620518400,1628985600,1652572800,1660435200,1684022400,1691884800,1715472e3,1723334400,1746921600,1754784e3,1778371200,1786233600,1809820800,1818288e3,1841875200,1849737600,1873324800,1881187200,1904774400,1912636800,1936224e3],offset:[-16966,-16966,-18e3,-16966,-14400,-16966,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-10800,-14400,-18e3,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800]},"Asia/Bahrain":{time:[-1577923200,76204800,1925002800],offset:[12368,14400,10800]},"Asia/Jakarta":{time:[-3231273600,-1451693568,-117288e4,-876614400,-766022400,-683856e3,-620784e3,-189388800,1925017200],offset:[25632,25632,26400,27e3,32400,27e3,28800,27e3,25200]},"Africa/Lagos":{time:[-1588464e3,1924995600],offset:[816,3600]},"Pacific/Norfolk":{time:[-2177452800,-599616e3,152071200,162957600,1443924e3,1925031600],offset:[40312,40320,41400,45e3,41400,39600]},"America/Juneau":{
time:[-3225169588,-2188987200,-880236e3,-769420800,-765410400,-21506400,-5781600,9943200,25668e3,41392800,57722400,73447200,89172e3,104896800,120621600,126669600,152071200,162352800,183520800,199245600,215575200,230695200,247024800,262749600,278474400,294199200,309924e3,325648800,341373600,357098400,372823200,388548e3,404877600,419997600,436327200,438998400,452052e3,467776800,483501600,499226400,514951200,530676e3,544586400,562125600,576036e3,59418e4,607485600,625629600,638935200,657079200,670989600,688528800,702439200,719978400,733888800,752032800,765338400,783482400,796788e3,814932e3,828842400,846381600,860292e3,877831200,891741600,909280800,923191200,941335200,954640800,972784800,986090400,1004234400,1018144800,1035684e3,1049594400,1067133600,1081044e3,1099188e3,1112493600,1130637600,1143943200,1162087200,1173578400,1194141600,1205028e3,1225591200,1236477600,1257040800,1268532e3,1289095200,1299981600,1320544800,1331431200,1351994400,1362880800,1383444e3,1394330400,1414893600,142578e4,1446343200,1457834400,1478397600,1489284e3,1509847200,1520733600,1541296800,1552183200,1572746400,1583632800,1604196e3,1615687200,1636250400,1647136800,16677e5,1678586400,1699149600,1710036e3,1730599200,1741485600,1762048800,1772935200,1793498400,1804989600,1825552800,1836439200,1857002400,1867888800,1888452e3,1899338400,1919901600,1930788e3],offset:[54139,-32261,-28800,-25200,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-28800,-28800,-25200,-28800,-25200,-28800,-25200,-32400,-32400,-28800,-32400,-28800,-32400,-28800,-32400,-28800,-32400,-28800,-32400,-28800,-32400,-28800,-32400,-28800,-32400,-28800,-32400,-28800,-32400,-28800,-32400,-28800,-32400,-28800,-32400,-28800,-32400,-28800,-32400,-28800,-32400,-28800,-32400,-28800,-32400,-28800,-32400,-28800,-32400,-28800,-32400,-28800,-32400,-28800,-32400,-28800,-32400,-28800,-32400,-28800,-32400,-28800,-32400,-28800,-32400,-28800,-32400,-28800,-32400,-28800,-32400,-28800,-32400,-28800,-32400,-28800,-32400,-28800,-32400,-28800,-32400,-28800,-32400,-28800,-32400,-28800,-32400,-28800,-32400,-28800,-32400,-28800,-32400,-28800,-32400,-28800,-32400,-28800,-32400,-28800,-32400,-28800,-32400]},"Asia/Ho_Chi_Minh":{time:[-2004048e3,-1851552e3,-852080400,-782614800,-767836800,-718070400,-457747200,-315622800,171849600,1925017200],offset:[25600,25590,25200,28800,32400,25200,28800,25200,28800,25200]}}},function(e,t,i){"use strict";function o(e){this._studyId=e,this._maxToVers=n.ZERO,this._maxFromVers=n.ZERO,this._migrs=[]}var n=i(165).Version,r=i(5).getLogger("Chart.StudyMigration");o.prototype.addMigration=function(e,t,i){var o=n.parse(e),r=n.parse(t);o.isGreater(this._maxFromVers)&&(this._maxFromVers=o),r.isGreater(this._maxToVers)&&(this._maxToVers=r),this._migrs.push({fromVers:o,toVers:r,rules:i})},o.prototype.updateInputs=function(e,t,i){var o,n,s;if(!i)return i;for(o=TradingView.clone(i),n=e;n.isLess(t)&&null!=(s=this._findMigration(n));){
if(r.logNormal("Migrating study inputs from "+s.fromVers+" to "+s.toVers+" version, studyId: "+this._studyId+", migration: "+JSON.stringify(s)+", inputs: "+JSON.stringify(i)),o=this._applyMigration(o,s),!n.isLess(s.toVers))throw Error("Problems in study migration process... Possible infinite cycle has been detected and stopped.");n=s.toVers}return n>e&&r.logNormal("Study inputs migration is done, studyId: "+this._studyId+", inputs: "+JSON.stringify(o)),o},o.prototype._findMigration=function(e){var t,i,o=-1,n=this._maxFromVers;for(t=0;t<this._migrs.length;t++)i=this._migrs[t],i.fromVers.isLess(e)||i.fromVers.isLessOrEqual(n)&&(n=i.fromVers,o=t);return o<0?null:this._migrs[o]},o.prototype._applyMigration=function(e,t){var i,o,n,r=e;for(i=0;i<t.rules.length;i++)o=t.rules[i],n=this._getApplyRuleFun(o.type),r=n(r,o);return r},o.prototype._getApplyRuleFun=function(e){if("inputRemoved"===e)return o._applyInputRemovedRule;if("inputChangedType"===e)return o._applyInputChangedTypeRule;if("inputChangedMinMax"===e)return o._applyInputChangedMinMaxRule;if("inputChangedOptions"===e)return o._applyInputChangedOptionsRule;throw Error("Unknown migration rule type: "+e)},o._applyInputRemovedRule=function(e,t){if(!(t.inputId in e))return e;if("removeVal"!==t.action)throw Error("Unexpected rule.action="+t.action+" in rule.type="+t.type);var i=e[t.inputId];return delete e[t.inputId],r.logNormal("Input "+t.inputId+"="+i+" removed"),e},o._applyInputChangedTypeRule=function(e,t){var i=e[t.inputId];if("resetToDefVal"===t.action)return e[t.inputId]=t.defVal,r.logNormal("Input "+t.inputId+"="+i+" reset to default value "+t.defVal),e;if("convertVal"===t.action){if(null==i)return e;if("float"===t.inputTypeFrom&&"integer"===t.inputType)return e[t.inputId]=Math.round(e[t.inputId]),r.logNormal("Input "+t.inputId+"="+i+" converted to value "+e[t.inputId]),e;if("integer"===t.inputTypeFrom&&"float"===t.inputType)return e;if("text"===t.inputTypeFrom&&"source"===t.inputType)return o._isValidSource(i,t.options)?e:(e[t.inputId]=t.defVal,e);throw Error("Cannot convertVal from "+t.inputTypeFrom+" to "+t.inputType)}throw Error("Unknown action "+t.action+" for rule with type "+t.type)},o._isValidSource=function(e,t){return e.indexOf("$")>=0||t.indexOf(e)>=0},o._applyInputChangedMinMaxRule=function(e,t){if("adjustValIfNeeded"!==t.action)throw Error("Unknown action "+t.action+" for rule with type "+t.type);var i=e[t.inputId];return i<t.minVal?e[t.inputId]=t.minVal:i>t.maxVal&&(e[t.inputId]=t.maxVal),r.logNormal("Input "+t.inputId+"="+i+" adjusted to value "+e[t.inputId]),e},o._applyInputChangedOptionsRule=function(e,t){if(!(["text"].indexOf(t.inputType)>=0&&"resetToDefValIfNeeded"===t.action))throw Error("Unexpected rule.inputType="+t.inputType+" in rule.action="+t.action);var i=e[t.inputId];return t.options.indexOf(i)<0&&(e[t.inputId]=t.defVal,r.logNormal("Input "+t.inputId+"="+i+" reset to default value "+t.defVal)),e},e.exports=o},function(e,t,i){"use strict";(function(t,o,n,r){function s(e){return e instanceof E}function a(e){
return e.isNoScale()?null:e.priceScale()}function l(e,t,i,o,n){if(void 0!==n)switch(n){case"right":return e.rightPriceScale();case"left":return e.leftPriceScale();case"no-scale":return null;case"as-series":if(!e.isMainPane()){q.logWarn('BEWARE: Attempt to set "as-series" price scale to study, but series and study are on different panes');break}return a(t);default:q.logWarn("Unknown override for priceScale type - "+n+", default will be used")}var r=i.priceScale;return o?null:(s(t)||e.isMainPane()&&void 0===r)&&i.is_price_study?a(t):r===B.None?i.is_price_study?null:(q.logWarn("Cannot add study "+i.id+" with 'No Scale' setting, because study is not a price study. Using right price scale."),e.rightPriceScale()):r===B.Left?e.leftPriceScale():e.rightPriceScale()}function c(e,i,n,r,s,a,l,h){var u,d,p;for(h=Object.assign({},K,h),this._version=c.version,this._readOnly=h.readOnly,this._undoModel=a,this._studiesMetaInfoRepository=s,this._properties=n,this._modelIntervals=[],this._isSnapshot=h.isSnapshot,this.setStudiesMetaData(this._studiesMetaInfoRepository.getInternalMetaInfoArray(),this._studiesMetaInfoRepository.getMigrations()),this.m_timeScale=new x(this,{preserveBarSpacing:h.preserveBarSpacing}),F.init(),u=this,this.m_panes=[],this.m_gridSource=new T,this.m_crossHairSource=new b(this,F.properties(),{additionalMenuEnabled:h.crossHairMenuEnabled}),this.m_crossHairSource.selectBarMode().subscribe(function(e){if(e&&u.lineBeingCreated()){var t=F.tool.value();u.cancelCreatingLine(),F.tool.setValue(t)}}),this.m_width=0,this._tagsChanged=new t,this._lineCancelled=new t,this._magnet=new P(F.properties().magnet,this.m_timeScale,n.paneProperties.magnetSensivity),d=new W("chartproperties.mainSeriesProperties"),d.addExclusion("minTick"),d.addExclusion("priceAxisProperties.lockScale"),d.addExclusion("priceAxisProperties.percentage"),d.addExclusion("priceAxisProperties.log"),this.createPane(void 0,{rightAxisProperties:d.priceAxisProperties.state(["autoScale"])}),this.m_panes[0]._stretchFactor=2*S.DEFAULT_STRETCH_FACTOR,this.m_panes[0]._isMainPane=!0,this.m_selectedSource=null,this._selectedSourceChanged=new t,this._chartApi=e,this._invalidateHandler=i,this.m_hoveredSource=null,this._properties.listeners().subscribe(this,c.prototype.propertyChangeHandler),this._properties.timezone.listeners().subscribe(null,function(){u._chartApi&&u._chartApi.connected()&&u._chartApi.switchTimezone(u.timezone())}),this.m_timeScale.defaultRightOffsetProperty().listeners().subscribe(null,function(){u.recalculateAllPanes()}),d.merge(n.mainSeriesProperties.state()),this.m_mainSeries=new N(this,d,r),this.m_panes[0].addDataSource(this.m_mainSeries,this.m_panes[0].rightPriceScale()),this._mainSeriesPriceScaleNameChanged=new t,this._mainSeriesPriceScaleNameProperty=new G(this),this._mainSeriesScaleRatioProperty=new Y(this),this.m_mainSeries.onCompleted().subscribe(this,function(){u.clearCurrentPosition(),u._scrollingState&&u.gotoTime()}),this.m_mainSeries.onIntervalChanged().subscribe(this,function(){this._oldStartVisibleIndex=-1,this._oldEndVisibleIndex=-1}),
this.m_mainSeries.onBarReceived().subscribe(this,c.prototype.updateTimeScaleBaseIndex),this.m_mainSeries.properties().symbol.listeners().subscribe(this,this.setPriceAutoScaleForAllMainSources),this._readOnly||(d.addChild("priceAxisProperties",this.m_mainSeries.m_priceScale.properties()),this._properties.paneProperties.legendProperties.showStudyTitles.listeners().subscribe(this,function(e){e.value()||u._properties.paneProperties.legendProperties.showStudyArguments.setValue(!1)})),this._barsMarksSources=l(this),p=0;p<this._barsMarksSources.length;p++)this._barsMarksSources[p].setOwnerSource(this.m_mainSeries);this._syncPointCache={},this.m_watermarkSource=h.watermarkEnabled?new w(this.m_mainSeries):null,this._brandingSource=null,this.strategySources=[],this.strategySources.change=new t,this._activeStrategySource=new o(null),this._oldStartVisibleIndex=-1,this._oldEndVisibleIndex=-1,this._currentTool="",F.hideAllDrawings().subscribe(this,this.visibilityChangeHandler),this._properties.scalesProperties.listeners().subscribe(this,c.prototype.fullUpdate),this._id=U.guid(),this._studyInserted=new t,this._chartThemeLoaded=new t,this._resetScales=new t,this._isScalesResetAvailableChanged=new t,this._isScalesResetAvailable=!1,this._studyShiftColorStartOffset=void 0}var h=i(7).ensureNotNull,u=i(6).Point,d=i(27),p=d.parseRgb,_=d.rgbToBlackWhiteString,f=i(79),m=f.createLineTool,g=f.isLineToolName,y=f.isLineTool,v=f.isStudyLineTool,b=i(706).CrossHair,S=i(179).Pane,w=i(720).Watermark,T=i(721).Grid,P=i(722),x=i(723).TimeScale,C=i(180).PriceScale,L=i(85).BarsMarksContainer,I=i(728).Branding,M=i(30).PriceDataSource,k=i(16),A=i(25),E=A.Study,D=i(284).createStudy,V=A.prepareStudyProperties,O=i(171),R=i(123),B=i(212).ScaleType,z=i(20).PlotRowSearchMode,N=i(65).Series,F=i(33),W=i(2).DefaultProperty,H=i(283).SyncPoint,j=i(32).trackEvent,U=i(37),q=i(5).getLogger("Chart.ChartModel"),Y=i(740).MainSeriesScaleRatioProperty,G=i(741).MainSeriesPriceScaleNameProperty,K={isSnapshot:!1,readOnly:!1,watermarkEnabled:!0,crossHairMenuEnabled:!1,preserveBarSpacing:!1};c.prototype.applyPreferences=function(e){var t,i;for(t in e)void 0!==this._properties[t]&&"m_mainSeries"!==this._properties[t]&&this._properties[t].mergeAndFire(e[t]);void 0!==e.mainSeriesPriceScaleName&&this.setMainSeriesPriceScaleName(this.mainSeriesPriceScaleName(),e.mainSeriesPriceScaleName),this.m_timeScale.defaultRightOffsetProperty().setValue(e.timeScale.defaultRightOffset),this._properties.saveDefaults(),this.m_mainSeries.checkSessStudy(),i=this.m_mainSeries.sessionsStudy(),i&&i.applyPreferences(e.sessionsStudy),this.m_mainSeries.applyPreferences(e.mainSeries),this.recalculateAllPanes(),this.invalidate(new k(k.FULL_UPDATE))},c.prototype.setStudiesMetaData=function(e,t){this._studiesMetaData=e,this._studyVersioning=new O(this._studiesMetaData,t)},c.prototype.isSnapshot=function(){return this._isSnapshot},c.prototype.currentTool=function(){return this._currentTool},c.prototype.setCurrentTool=function(e){this._currentTool=e},c.prototype.timezone=function(){
return this._properties.timezone.value()},c.prototype.version=function(){return this._version},c.prototype.initConnection=function(){this._chartApi.switchTimezone(this.timezone())},c.prototype.dumpViews=function(){var e,t,i,o,n={};for(n.panes=[],e=0;e<this.m_panes.length;e++)n.panes.push(this.m_panes[e].dumpViews());for(n.dataWindow=[],t=this.dataSources(),e=0;e<t.length;e++)i=t[e],(o=i.dataWindowView())&&n.dataWindow.push(o.dump());return n},c.prototype._paneInvalidationMask=function(e,t){var i=new k,o=this.m_panes.indexOf(e);return void 0===t&&(t=k.LIGHT_UPDATE),i.invalidatePane(o,t),i},c.prototype.updatePane=function(e){var t=this._paneInvalidationMask(e);this.invalidate(t)},c.prototype.fullUpdate=function(){this.invalidate(new k(k.FULL_UPDATE))},c.prototype.updateSource=function(e){var t=this.paneForSource(e),i=this._paneInvalidationMask(t);this.invalidate(i)},c.prototype.studiesMetaData=function(){return this._studiesMetaData},c.prototype.studyVersioning=function(){return this._studyVersioning},c.prototype.disconnect=function(){var e,t,i=this.dataSources();for(t=0;t<i.length;t++)e=i[t],e.disconnect&&e.disconnect()},c.prototype.restart=function(){var e,t,i;for(this.initConnection(),this.m_timeScale.reset(),this.m_mainSeries.restart(),e=this.dataSources(),t=0;t<e.length;t++)i=e[t],i.restart&&i!==this.m_mainSeries&&i.restart()},c.prototype.startNotStartedStudies=function(){var e,t;if(!this.m_mainSeries.isStarted())throw Error("Cannot start studies: main series is not started");for(e=this.dataSources(),t=0;t<e.length;t++)s(e[t])&&!e[t].isStarted()&&e[t].restart&&e[t]!==this.m_mainSeries&&e[t].restart()},c.prototype.updateLineTools=function(){var e,t,i=this.dataSources();for(e=0;e<i.length;e++)y(i[e])&&(t=i[e],t.tryCreateServerPoints(),t.checkAlert&&t.checkAlert())},c.prototype.realignLineTools=function(){var e,t,i=this.dataSources();for(e=0;e<i.length;e++)y(i[e])&&(t=i[e],t.calcIsActualSymbol());for(e=0;e<this.m_panes.length;e++)this.m_panes[e].invalidateSourcesCache()},c.prototype.readOnly=function(){return this._readOnly},c.prototype.properties=function(){return this._properties},c.prototype.lineCancelled=function(){return this._lineCancelled},c.prototype.crossHairMoved=function(){return this.m_crossHairSource.moved()},c.prototype.chartApi=function(){return this._chartApi},c.prototype.propertyChangeHandler=function(){this.invalidate(new k(k.LIGHT_UPDATE))},c.prototype.visibilityChangeHandler=function(){this.setSelectedSource(),this.invalidate(new k(k.LIGHT_UPDATE))},c.prototype.updateAllPaneViews=function(){var e,t;for(e=0;e<this.m_panes.length;e++)t=this.m_panes[e],t.updateAllViews()},c.prototype.mainSeries=function(){return this.m_mainSeries},c.prototype.timeScale=function(){return this.m_timeScale},c.prototype.panes=function(){return this.m_panes},c.prototype.gridSource=function(){return this.m_gridSource},c.prototype.watermarkSource=function(){return this.m_watermarkSource},c.prototype.brandingSource=function(){return this._brandingSource},c.prototype.crossHairSource=function(){return this.m_crossHairSource},
c.prototype.barsMarksSources=function(){return this._barsMarksSources},c.prototype.width=function(){return this.m_width},c.prototype.setPaneHeight=function(e,t){e.setHeight(t),this.recalculateAllPanes(),this.invalidate(new k(k.LIGHT_UPDATE))},c.prototype.setWidth=function(e){var t,i;for(this.m_width=e,this.m_timeScale.setWidth(this.m_width),t=0;t<this.m_panes.length;++t)i=this.m_panes[t],i.setWidth(e);this.recalculateAllPanes(),this.recalcVisibleRangeStudy(this.dataSources())},c.prototype.createPane=function(e,t){var i,o;if(this._undoModel._chartWidget.isMaximizedPane()&&this._undoModel._chartWidget.toggleMaximizePane(),i=this._properties.paneProperties,t&&i.merge(t),o=new S(this.m_timeScale,i,this),"number"==typeof e&&isFinite(e)){if(e<0||e>this.m_panes.length)return void q.logDebug("ChartModel.createPane: invalid index: "+e);this.m_panes.splice(e,0,o)}else this.m_panes.push(o);return o.onTagsChanged().subscribe(this,c.prototype.onPaneTagsChanged),o},c.prototype.removePane=function(e){var t,i;this._undoModel._chartWidget.isMaximizedPane()&&this._undoModel._chartWidget.toggleMaximizePane(),e.destroy(),t=this.m_panes.indexOf(e),-1!==t&&this.m_panes.splice(t,1),i=this.crossHairSource(),i.pane===e&&this.clearCurrentPosition(),this.invalidate(new k(k.FULL_UPDATE))},c.prototype.startScalePrice=function(e,t,i){e.startScalePrice(t,i)},c.prototype.scalePriceTo=function(e,t,i){e.scalePriceTo(t,i),this.mainSeries().priceScale().isLockScale()?this.invalidate(new k(k.LIGHT_UPDATE)):this.invalidate(this._paneInvalidationMask(e,k.LIGHT_UPDATE)),this._setScalesResetAvailable(!0)},c.prototype.endScalePrice=function(e,t){e.endScalePrice(t),this.invalidate(this._paneInvalidationMask(e,k.LIGHT_UPDATE))},c.prototype.startScrollPrice=function(e,t,i){e.startScrollPrice(t,i)},c.prototype.scrollPriceTo=function(e,t,i){e.scrollPriceTo(t,i),this.invalidate(this._paneInvalidationMask(e,k.LIGHT_UPDATE))},c.prototype.endScrollPrice=function(e,t){e.endScrollPrice(t),this.invalidate(this._paneInvalidationMask(e,k.LIGHT_UPDATE))},c.prototype.setPriceAutoScale=function(e,t,i){e.setPriceAutoScale(t,i),this.invalidate(this._paneInvalidationMask(e,k.LIGHT_UPDATE))},c.prototype.restorePriceScaleState=function(e,t,i){e.restorePriceScaleState(t,i),this.invalidate(this._paneInvalidationMask(e,k.LIGHT_UPDATE))},c.prototype.resetPriceScale=function(e,t){this._setScalesResetAvailable(!1),e.resetPriceScale(t),this.invalidate(this._paneInvalidationMask(e,k.LIGHT_UPDATE))},c.prototype.updateScales=function(e,t){this._undoModel._chartWidget._updateScalesActions()},c.prototype.startScaleTime=function(e){this.m_timeScale.startScale(e)},c.prototype.mainSeriesPriceScaleNameProperty=function(){return this._mainSeriesPriceScaleNameProperty},c.prototype.mainSeriesPriceScaleName=function(){var e=this.paneForSource(this.m_mainSeries),t=this._mainSeriesPriceScaleName(),i=null;return"left"===t||"right"===t?i=t:e.isOverlay(this.m_mainSeries)&&(i="none"),i},c.prototype.setMainSeriesPriceScaleName=function(e,t){var i,o=this.paneForSource(this.m_mainSeries)
;e===t||"none"===t&&!o.actionNoScaleIsEnabled(this.m_mainSeries)||(i=o.priceScaleByName(t),this.move(this.m_mainSeries,o,i))},c.prototype.mainSeriesPriceScaleNameChanged=function(){return this._mainSeriesPriceScaleNameChanged},c.prototype.onMainSeriesPriceScaleNameChanged=function(){this._mainSeriesPriceScaleNameChanged.fire()},c.prototype.mainSeriesScaleRatioProperty=function(){return this._mainSeriesScaleRatioProperty},c.prototype.mainSeriesScaleRatioPropertyOnChanged=function(){this._mainSeriesScaleRatioProperty.listeners().fire(this._mainSeriesScaleRatioProperty)},c.prototype._mainSeriesPriceScaleName=function(){var e=this.paneForSource(this.m_mainSeries);return e.priceScaleName(e.priceScaleForSource(this.m_mainSeries))},c.prototype.mainSeriesScaleRatio=function(){var e=this.paneForSource(this.m_mainSeries);return"left"===this._mainSeriesPriceScaleName()?e.leftPriceScaleRatio():e.rightPriceScaleRatio()},c.prototype.setMainSeriesScaleRatio=function(e){var t=this.paneForSource(this.m_mainSeries);"left"===this._mainSeriesPriceScaleName()?t.applyLeftPriceScaleRatio(e):t.applyRightPriceScaleRatio(e)},c.prototype.scaleTimeTo=function(e){this.m_timeScale.scaleTo(e),this.recalculateAllPanes(),this.invalidate(new k(k.LIGHT_UPDATE)),this._setScalesResetAvailable(!0)},c.prototype.endScaleTime=function(){this.m_timeScale.endScale(),this.invalidate(new k(k.LIGHT_UPDATE)),this.mainSeries().requestMoreData(),this.recalcVisibleRangeStudy(this.dataSources())},c.prototype.startScrollTime=function(e){this.m_timeScale.startScroll(e),this._isTimeScrolling=!0},c.prototype.scrollTimeTo=function(e){this.m_timeScale.scrollTo(e),this.recalculateAllPanes(),this.updateCrossHair(),this.invalidate(new k(k.LIGHT_UPDATE)),this._setScalesResetAvailable(!0)},c.prototype.endScrollTime=function(){this.m_timeScale.endScroll(),this.invalidate(new k(k.LIGHT_UPDATE)),this.mainSeries().requestMoreData(),this.recalcVisibleRangeStudy(this.dataSources()),this._isTimeScrolling=!1},c.prototype.recalcStudyBasedLineTools=function(){this.dataSources().forEach(function(e){v(e)&&e.recalcStudyIfNeeded&&e.recalcStudyIfNeeded()})},c.prototype.recalcVisibleRangeStudy=function(e,t){void 0!==this._recalcVRTimerId&&clearTimeout(this._recalcVRTimerId);var i=this;this._recalcVRTimerId=setTimeout(function(){i._recalcVisibleRangeStudy(e,t)},500)},c.prototype._recalcVisibleRangeStudy=function(e,t){var i,o,n,r,a,l,c,h,u,d,p,_,f,m,g,y;if(!this.timeScale().isEmpty()&&(i=this.timeScale().visibleBars(),o=this.mainSeries().nearestData(i.firstBar(),z.NearestRight),n=this.mainSeries().nearestData(i.lastBar(),z.NearestLeft),r=this.mainSeries().bars().lastIndex(),a=o?o.index:void 0,l=n?n.index:void 0,c=a===this._oldStartVisibleIndex,h=l===this._oldEndVisibleIndex,!c||!h||t))for(this._oldStartVisibleIndex=a,this._oldEndVisibleIndex=l,u={first_visible_bar_time:1e3*Math.floor(o&&o.value?o.value[TradingView.TIME_PLOT]:0),last_visible_bar_time:1e3*Math.floor(n&&n.value?n.value[TradingView.TIME_PLOT]:0),subscribeRealtime:n&&n.index===r},d=0;d<e.length;d++)if(s(e[d])){for(p=e[d],
_=p.metaInfo().inputs,f=[],m=0;m<_.length;m++)u.hasOwnProperty(_[m].id)&&f.push(_[m].id);for(g=p.properties().inputs,m=0;m<f.length;m++)y=f[m],g[y].setValueSilently(u[y]);f.length>0&&g.listeners().fire(g)}},c.prototype.onResetScales=function(){return this._resetScales},c.prototype.resetTimeScale=function(){this.m_timeScale.restoreDefault(),this.recalculateAllPanes(),this.mainSeries().requestMoreData(),this.recalcVisibleRangeStudy(this.dataSources()),this.updateCrossHair(),this.invalidate(new k(k.LIGHT_UPDATE)),this._resetScales.fire(),this._setScalesResetAvailable(!1)},c.prototype.restoreTimeScaleState=function(e){this.m_timeScale.restoreState(e),this.recalculateAllPanes(),this.updateCrossHair(),this.invalidate(new k(k.LIGHT_UPDATE)),this._setScalesResetAvailable(!0)},c.prototype.restoreFactoryDefaults=function(e){e.restoreFactoryDefaults(),this.recalcVisibleRangeStudy(this.dataSources(),!0),this.mainSeries().onChartStyleChanged()},c.prototype.restoreDefaults=function(e){e.restoreDefaults(this._studyVersioning),this.recalcVisibleRangeStudy(this.dataSources(),!0),this.mainSeries().onChartStyleChanged()},c.prototype.setSelectedSource=function(e,t){if(!(this.m_selectedSource===e&&this._lastHittestData===t||e&&e.customization&&e.customization.disableSelection)){this._lastHittestData=t;var i=new k;this.m_selectedSource&&(this.m_selectedSource.updateAllViews(),TradingView.alertsDispatcher&&this.m_selectedSource.hasAlert.value()&&this.m_selectedSource.getAlert({fromCache:!0}).done(function(e){e&&e.set("selected",!1)})),this.m_selectedSource=e,this._selectedSourceChanged.fire(e),e&&(e.updateAllViews(),TradingView.alertsDispatcher&&e.hasAlert.value()&&e.getAlert({fromCache:!0}).done(function(e){e&&e.set("selected",!0)})),i.force=!0,this.invalidate(new k(k.LIGHT_UPDATE)),this.setHoveredSource(e,t)}},c.prototype.checkLineToolSelection=function(){this.m_selectedSource&&y(this.m_selectedSource)&&(this.m_selectedSource.calcIsActualSymbol(),this.m_selectedSource.isActualSymbol()||this.setSelectedSource(null))},c.prototype.onSelectedSourceChanged=function(){return this._selectedSourceChanged},c.prototype.setHoveredSource=function(e,t){if(this.m_hoveredSource!==e||this._lastHittestData!==t){this._lastHittestData=t;var i=null;this.m_hoveredSource&&(this.m_hoveredSource.updateAllViews(),i||(i=new k),TradingView.alertsDispatcher&&this.m_hoveredSource.hasAlert.value()&&this.m_hoveredSource.getAlert({fromCache:!0}).done(function(e){e&&e.set("hovered",!1)}),i.merge(this._paneInvalidationMask(this.paneForSource(this.m_hoveredSource),k.LIGHT_UPDATE))),this.m_hoveredSource=e,e&&(e.updateAllViews(),i||(i=new k),i.merge(this._paneInvalidationMask(this.paneForSource(e),k.LIGHT_UPDATE)),TradingView.alertsDispatcher&&e.hasAlert.value()&&e.getAlert({fromCache:!0}).done(function(e){e&&e.set("hovered",!0)})),i&&this.invalidate(i)}},c.prototype.selectedSource=function(){return this.m_selectedSource},c.prototype.hoveredSource=function(){return this.m_hoveredSource},c.prototype.lastHittestData=function(){return this._lastHittestData},
c.prototype.invalidate=function(e){this._invalidateHandler&&this._invalidateHandler(e)},c.prototype.dataSources=function(){var e,t,i,o=[];for(o.push(this.m_crossHairSource),e=0;e<this.m_panes.length;++e)for(t=this.m_panes[e].dataSources(),i=0;i<t.length;i++)o.push(t[i]);return o},c.prototype.orderedDataSources=function(e){var t,i,o=[];for(o.push(this.m_crossHairSource),t=0;t<this.m_panes.length;t++)i=this.m_panes[t].orderedSources().slice(),e&&i.reverse(),o=o.concat(i);return o},c.prototype.dataSourceForId=function(e){var t,i;for(i=0;i<this.m_panes.length;++i)if(t=this.m_panes[i].dataSourceForId(e))return t;return null},c.prototype.children=function(e,t){return this.dataSources().filter(function(i){return(!0!==t||!s(i)||!i.isChildStudy())&&i.ownerSource()===e})},c.prototype.setAndSaveCurrentPosition=function(e,t,i,o){this.m_crossHairSource.saveOriginCoord(e,t),this.setCurrentPosition(e,t,i,o)},c.prototype.setCurrentPosition=function(e,t,i,o){var n,r,s,a,l,c,h,u,d,p,_,f,m,y,v=NaN,b=Math.round(this.m_timeScale.coordinateToIndex(e));if(i&&(n=i.defaultPriceScale(),n.isEmpty()||(r=i.mainDataSource().firstValue(),v=n.coordinateToPrice(t,r))),(this._lineBeingCreated||g(this.currentTool()))&&(v=this._magnet.align(v,b,i)),this._isTimeScrolling)return void this.m_crossHairSource.setPosition(this.m_crossHairSource.index,v,i);for(this.m_crossHairSource.setOnHoveredChartWidget(!0),this.m_crossHairSource.setPosition(b,v,i),this.m_crossHairSource.dataWindowView().update(),s=this.m_panes,a=s.length;a--;)for(l=s[a].dataSources(),c=l.length;c--;)(h=l[c].dataWindowView())&&h.update();this._lineBeingCreated?(this._lineBeingCreated.setLastPoint({index:b,price:v},o),this._lineBeingCreated.updateAllViews(),this.invalidate(new k(k.LIGHT_UPDATE))):this.crossHairSource().startMeasurePoint()?this.invalidate(new k(k.LIGHT_UPDATE)):this.invalidate(new k(k.UPDATE_CURSOR_ONLY)),this._isSettingsExternalPosition||(u=this._undoModel._chartWidget,u._chartWidgetCollection&&(d=this.mainSeries(),(p=d.syncModel())&&(_=this.m_timeScale.points().roughTime(b,p.projectTime.bind(p)),f={timeStamp:_},m=i.mainDataSource(),m instanceof N&&(f.price=v,f.symbol=m.symbol()),f.syncModel=p,y=this._lineBeingCreated||this._linePointBeingEdited||this._sourceBeingMoved,y=y&&F.drawOnAllCharts().value(),u._chartWidgetCollection.syncCrosshair(f,u,y,o))))},c.prototype.clearCurrentPosition=function(){var e,t,i,o,n,r,s=this.crossHairSource();for(s.clearPosition(),s.dataWindowView().update(),e=this.m_panes,t=e.length;t--;)for(i=e[t].dataSources(),o=i.length;o--;)(n=i[o].dataWindowView())&&n.update();this.invalidate(new k(k.UPDATE_CURSOR_ONLY)),r=this._undoModel._chartWidget,r._chartWidgetCollection&&r._chartWidgetCollection.syncCrosshair(NaN,r)},c.prototype.onSyncScrollNeeded=function(e){var t,i,o,n=this._undoModel._chartWidget;n._chartWidgetCollection&&(t=this.mainSeries(),(i=t.syncModel())&&(o=1e3*this.m_timeScale.points().roughTime(e,i.projectTime.bind(i)),n._chartWidgetCollection.syncScroll(o,this)))},c.prototype.gotoTime=function(e,t){function i(){
return p.tickMarks().indexToTime(p.tickMarks().minIndex).valueOf()-e}function o(t){var o,n,r,s,a;if(i()<0){for(o=p.tickMarks().nearestIndex(e),n=h(_.bars().lastIndex()),o=Math.min(o,n),r=p.tickMarks().indexToTime(o).valueOf();r<e&&o<n;)o++,r=p.tickMarks().indexToTime(o).valueOf();return s=p.visibleBars(),a=s.lastBar()-s.firstBar(),!t&&s.contains(o)||(p.zoomToBarsRange(o-a/2,o+a/2),_.requestMoreData()),{timestamp:p.indexToTimePoint(o)}}}var n,r,s,a,l,c,u,d,p=this.timeScale(),_=this.mainSeries();if(t&&t.model&&(n=_.syncModel())&&(r=this._createSyncPoint(t.model.mainSeries().syncModel(),n),e=1e3*r.sourceTimeToTargetTime(e/1e3)),t=t||{centerIfVisible:!0},e)this._scrollingState&&this._scrollingState.deferred.reject(),s=$.Deferred(),this._scrollingState={targetDate:e,deferred:s,centerIfVisible:t.centerIfVisible};else{if(!this._scrollingState)return q.logError("scrollTo called without an argument"),$.Deferred().reject().promise();e=this._scrollingState.targetDate,s=this._scrollingState.deferred}return a=o(this._scrollingState.centerIfVisible),a||(l=p.tickMarks().minIndex,c=p.visibleBars(),u=c.lastBar()-c.firstBar(),_.endOfData()?(p.zoomToBarsRange(l-u/2,l+u/2),a={timestamp:p.indexToTimePoint(l),eod:!0}):(d=this.timeScale().tickMarks().estimateLeft(e),_.requestMoreData(Math.ceil(d+u/2)))),a&&(this.fullUpdate(),this._scrollingState=null,s.resolve(a)),s.promise()},c.prototype._createSyncPoint=function(e,t){var i,o,n=this._syncPointCache[e.uniqueId()];if(n){if(i=n[t.uniqueId()])return i}else this._syncPointCache[e.uniqueId()]={};return o=new H(e,t),this._syncPointCache[e.uniqueId()][t.uniqueId()]=o,o},c.prototype.setExternalPosition=function(e,t){var i,o,n,r,s,a,l,c,h,u,d,p,_=this.crossHairSource();if(_.setOnHoveredChartWidget(!1),!Number.isNaN(e)&&isNumber(e.timeStamp)&&(o=this.mainSeries(),(n=o.syncModel())&&(r=this._createSyncPoint(e.syncModel,n),s=r.sourceTimeToTargetTime(e.timeStamp),i=this.m_timeScale.points().roughIndex(s,n.distance.bind(n)))),this.mainSeries().symbol()===e.symbol)return this._isSettingsExternalPosition=!0,a=this.paneForSource(this.mainSeries()),l=this.m_timeScale.indexToCoordinate(i),c=a.mainDataSource().firstValue(),h=this.mainSeries().priceScale().priceToCoordinate(e.price,c,!0),this.setCurrentPosition(l,h,a,t||{}),_.setOnHoveredChartWidget(!1),void delete this._isSettingsExternalPosition;for(isFinite(i)?_.setPosition(i,NaN,null):(_.clearPosition(),_.dataWindowView().update()),u=this.dataSources(),d=u.length;d--;)(p=u[d].dataWindowView())&&p.update();this.invalidate(new k(k.UPDATE_CURSOR_ONLY))},c.prototype.updateCrossHair=function(){this.m_crossHairSource.update()},c.prototype.updateTimeScale=function(e,t,i,o,n,r){var s,a,l;if(r)for(this.m_timeScale.reset(),s=this.dataSources(),a=0;a<s.length;a++)s[a].clearData&&s[a].clearData();if(o.length>0)for(s=this.dataSources(),a=0;a<s.length;a++)s[a].moveData&&s[a].moveData(o);this.m_timeScale.update(e,t,i,n),l="ChartModel.prototype.updateTimeScale("+e+","+t+","+i.length+","+o.length+","+n.length+","+r+")",
l+="TimeScale: {first:"+this.m_timeScale.m_points.firstIndex()+",last:"+this.m_timeScale.m_points.lastIndex()+"}",q.logDebug(l),this.recalculateAllPanes(),this.invalidate(new k(k.LIGHT_UPDATE))},c.prototype.updateTimeScaleBaseIndex=function(e){var t,i,o,n,r,s,a=this.mainSeries().bars();a.isEmpty()||(t=this.timeScale(),i=t.baseIndex(),o=h(a.lastIndex()),n=t.visibleBars(),null!==n&&(r=n.contains(i),e&&e.index>0&&!r&&(s=o-i,t.setRightOffset(t.rightOffset()-s))),t.setBaseIndex(o))},c.prototype.recalculatePane=function(e){e&&e.recalculate()},c.prototype.paneForSource=function(e){for(var t=this.m_panes.length-1;t>=0;t--)if(-1!==this.m_panes[t].dataSources().indexOf(e))return this.m_panes[t];return e instanceof L?this.paneForSource(this.m_mainSeries):null},c.prototype.recalculateAllPanes=function(){for(var e=0;e<this.m_panes.length;++e)this.m_panes[e].recalculate();this.updateAllPaneViews()},c.prototype._invalidateBarColorerCaches=function(){var e,t,i=this.dataSources();for(e=0;e<i.length;++e)(t=i[e])instanceof N&&t.invalidateBarColorerCache()},c.prototype.addStrategySource=function(e){~this.strategySources.indexOf(e)||(this.strategySources.push(e),this.strategySources.change.fire())},c.prototype.removeStrategySource=function(e){var t,i,o=this.strategySources.indexOf(e);~o&&(t=this.strategySources.splice(o,1),t[0]===this._activeStrategySource.value()&&this.unsetActiveStrategySource(),this.strategySources.length>0&&(i=this.strategySources[this.strategySources.length-1],this.setActiveStrategySource(i)),this.strategySources.change.fire())},c.prototype.setActiveStrategySource=function(e){~this.strategySources.indexOf(e)&&this._activeStrategySource.setValue(e)},c.prototype.unsetActiveStrategySource=function(){this._activeStrategySource.setValue(null)},c.prototype.activeStrategySource=function(){return this._activeStrategySource},c.prototype.insertStudy=function(e,t,i,o,n){var r,s,a,c;return null!==o&&void 0!==o||(o=this.mainSeries()),r=["Study_ESD$TV_SPLITS@tv-scripting","Study_ESD$TV_DIVIDENDS@tv-scripting","Study_ESD$TV_SPLITS@tv-scripting","Volume@tv-basicstudies","Sessions@tv-basicstudies"],-1===r.indexOf(e.id)&&j("studies","Study_"+e.id),s=null,i||e.is_price_study?s=this.paneForSource(o):(s=this.createPane(),t&&t.paneSize&&s.setPaneSize(t.paneSize)),"Compare@tv-basicstudies"===e.id&&(j("compare","symbol:"+t.inputs.symbol),this.m_mainSeries.priceScale().setMode({log:!1,percentage:!0})),a=V(e,t,s,this.studyVersioning(),o),c=D(this,a,o,e),this._recalcVisibleRangeStudy([c],!0),c.start(),c.childStudyByRebind().subscribe(null,function(){j("SOS","Apply SOS","Rebind SOS")}),s.addDataSource(c,l(s,o,c.metaInfo(),i,n)),c.properties().linkedToSeries&&c.properties().linkedToSeries.value()&&c.setOwnerSource(this.mainSeries()),this.recalculatePane(s),this.invalidate(new k(k.FULL_UPDATE)),this._invalidateBarColorerCaches(),this.recalcVisibleRangeStudy(this.dataSources(),!0),this._studyInserted.fire(c),c},c.prototype.studyInserted=function(){return this._studyInserted},c.prototype.replaceStudyStub=function(e,t){
var i,o,n,r=this.paneForSource(e);return null!==r&&(i=e.isNoScale()?null:e.priceScale(),o=e.zorder(),n=e.ownerSource(),r.insertDataSource(t,i,o),t.setOwnerSource(n),this.panes().forEach(function(i){i.dataSources().forEach(function(i){i._ownerSource===e&&i.setOwnerSource(t)})}),this.removeSource(e),t.start(),this.recalculatePane(r),this.invalidate(new k(k.FULL_UPDATE)),!0)},c.prototype.insertStudyStub=function(e){var t=this.mainSeries(),i=this.paneForSource(t),o=new R(this,null,e);return i.addDataSource(o,null),this.recalculatePane(i),this.invalidate(new k(k.FULL_UPDATE)),o},c.prototype.removeStudyStub=function(e){var t=this.dataSourceForId(e);return void 0===t?(q.logNormal("StudyStub id="+e+" is not found in chart model"),!1):(this.removeSource(t),!0)},c.prototype.detachSource=function(e,t){var i=this.paneForSource(e);if(i)return i.removeDataSource(e),i.isEmpty()?(this._lineBeingCreated&&i===this._paneBeingCreatedLineOn&&this.cancelCreatingLine(),this.removePane(i,t),!0):(this.invalidate(new k(k.FULL_UPDATE)),this._alertsList&&this._alertsList.trigger("reset"),!1)},c.prototype.removeSource=function(e,t){var i,o,n,r;if(e===this.m_selectedSource&&this.setSelectedSource(null),e===this._sourceBeingMoved&&(this._sourceBeingMoved=null,this._linePointBeingMoved=null),e===this._lineBeingEdited&&(this._lineBeingEdited=null),e===this._lineBeingCreated&&(this._lineBeingCreated=null),e.stop&&e.stop(),i=this.detachSource(e,t),e.metaInfo&&e.metaInfo()&&"Compare@tv-basicstudies"===e.metaInfo().id){for(o=this.paneForSource(this.m_mainSeries),n=o.dataSources(),r=0;r<n.length;r++)if(n[r].metaInfo&&"Compare@tv-basicstudies"===n[r].metaInfo().id)return;this.m_mainSeries.priceScale().setMode({percentage:!1})}return this.invalidate(new k(k.FULL_UPDATE)),this._invalidateBarColorerCaches(),e.linkKey&&F.removeLineTool({model:this,linkKey:e.linkKey}),s(e)&&e.isChildStudy()&&e.source().unsetChild(e),e.destroy&&e.destroy(),i},c.prototype._isStudyOrMainSeries=function(e){return TradingView.isInherited(e.constructor,E)||e===this.m_mainSeries},c.prototype.isMergeUpAvailableForSource=function(e){return!!this._isStudyOrMainSeries(e)&&this.paneForSource(e)!==this.panes()[0]},c.prototype.mergeSourceUp=function(e){var t,i,o,n;this.isMergeUpAvailableForSource(e)&&(t=this.paneForSource(e),i=this.panes().indexOf(t),o=this.panes()[i-1],n=o.findSuitableScale(e),this.move(e,o,n))},c.prototype.isMergeDownAvailableForSource=function(e){var t,i;return!!this._isStudyOrMainSeries(e)&&(t=this.paneForSource(e),i=this.panes(),t!==i[i.length-1])},c.prototype.mergeSourceDown=function(e){var t,i,o,n;this.isMergeDownAvailableForSource(e)&&(t=this.paneForSource(e),i=this.panes().indexOf(t),o=this.panes()[i+1],n=o.findSuitableScale(e),this.move(e,o,n))},c.prototype.isUnmergeAvailableForSource=function(e){var t,i;return!!this._isStudyOrMainSeries(e)&&(t=this.paneForSource(e),i=t.dataSources().filter(function(e){return TradingView.isInherited(e.constructor,M)&&e.showInObjectTree()}),i.length>1)},c.prototype.unmergeSourceUp=function(e){var t,i,o,n
;this.isUnmergeAvailableForSource(e)&&(t=this.paneForSource(e),i=this.panes().indexOf(t),o=this.createPane(i),n=o.findSuitableScale(e),this.move(e,o,n))},c.prototype.unmergeSourceDown=function(e){var t,i,o,n;this.isUnmergeAvailableForSource(e)&&(t=this.paneForSource(e),i=this.panes().indexOf(t),o=this.createPane(i+1),n=o.findSuitableScale(e),this.move(e,o,n))},c.prototype.isLeftPriceScaleVisible=function(){return this._properties.scalesProperties.showLeftScale.value()},c.prototype.isRightPriceScaleVisible=function(){return this._properties.scalesProperties.showRightScale.value()},c.prototype.setLeftPriceScaleVisible=function(e){this._properties.scalesProperties.showLeftScale.value()!==e&&this._properties.scalesProperties.showLeftScale.setValue(e)},c.prototype.setRightPriceScaleVisible=function(e){this._properties.scalesProperties.showRightScale.value()!==e&&this._properties.scalesProperties.showRightScale.setValue(e)},c.prototype.setPriceScaleVisibility=function(e,t){"left"===e&&this.setLeftPriceScaleVisible(t),"right"===e&&this.setRightPriceScaleVisible(t)},c.prototype.move=function(e,t,i){var o,n,r,s,a=this.children(e,!0),l=this.paneForSource(e),c=t?t.priceScaleName(i):"right";if(l===t){for(o=t.priceScaleByName(c),n=0;n<a.length;n++)t.move(a[n],o);t.move(e,o)}else{for(r=t||this.createPane(),s=r.priceScaleByName(c),n=0;n<a.length;n++)this.detachSource(a[n]);for(this.detachSource(e),r.addDataSource(e,s),n=0;n<a.length;n++)r.addDataSource(a[n],s)}this._alertsList&&this._alertsList.trigger("reset"),e===this.m_mainSeries&&this.onMainSeriesPriceScaleNameChanged(),this.invalidate(new k(k.FULL_UPDATE))},c.prototype.isSingleInstanceLineTool=function(e){return"LineStudyMtpRiskReward"===e||"LineStudyMtpAnalysis"===e},c.prototype._externalTimeStamp=function(e){var t=this.mainSeries().syncModel();return this.m_timeScale.points().roughTime(e,t&&t.projectTime.bind(t))},c.prototype.createLineTool=function(e,t,i,o,n){var r,s,a,l,c,h,d,p,_,f,y,v;return g(i)?(this.isSingleInstanceLineTool(i)&&this._undoModel.removeAllDrawingTools(i),"LineToolExecution"!==i&&j("drawings","Study_Drawing_"+i),o&&(r=o.state(),s=TradingView.factoryDefaults("linetool"),a=i.toLowerCase(),TradingView.merge(s,TradingView.factoryDefaults(a)),o=TradingView[i].prototype.createPropertiesObject(a,s),o.merge(r)),l=m(i,this,o,null,e.mainDataSource()),o||(o=l.properties()),c=!l.linkKey&&!n,F.drawOnAllCharts().value()?l.linkKey=n||U.randomHash():l.linkKey=n,l.toolname=i,l.setOwnerSource(e.mainDataSource()),h=e.defaultPriceScale(),e.addDataSource(l,h),l.isFixed()?(p=e.mainDataSource().firstValue(),_=this.m_timeScale.indexToCoordinate(t.index),f=h.priceToCoordinate(t.price,p),d=l.addFixedPoint(new u(_,f))):(y=l.constructor,y.skipMagnetting||(t.price=this._magnet.align(t.price,t.index,e)),d=l.addPoint(t)),d||(this._lineBeingCreated=l,this._paneBeingCreatedLineOn=e),c&&l.enableCurrentIntervalVisibility(),this.invalidate(new k(k.FULL_UPDATE)),n||!F.drawOnAllCharts().value()||l.properties().singleChartOnly||(v=this._externalTimeStamp(t.index),F.createLineTool({point:{
price:t.price,timeStamp:v},linetool:i,properties:o,symbol:this.mainSeries().symbol(),model:this,linkKey:l.linkKey})),l):null},c.prototype.lineBeingCreated=function(){return this._lineBeingCreated},c.prototype.paneBeingCreatedLineOn=function(){return this._paneBeingCreatedLineOn},c.prototype.coninueCreatingLine=function(e,t,i,o){var n,r,s,a,l,c=this.paneForSource(this._lineBeingCreated);return e.price=this._magnet.align(e.price,e.index,c),n=this._lineBeingCreated.addPoint(e,t,i),r=this._lineBeingCreated,this._lineBeingCreated.updateAllViews(),s=new k(k.LIGHT_UPDATE),a=null,n&&(a={points:this._lineBeingCreated._timePoint,interval:this.mainSeries().interval()},this._paneBeingCreatedLineOn=null,this._lineBeingCreated=null,s.force=!0),this.invalidate(s),o||!F.drawOnAllCharts().value()||r.properties().singleChartOnly||(l=this._externalTimeStamp(e.index),F.continueLineTool({point:{price:e.price,timeStamp:l},envState:t,finalState:a,model:this})),n},c.prototype.cancelCreatingLine=function(){if(this._lineBeingCreated){var e=this._lineBeingCreated;this.removeSource(this._lineBeingCreated),this._lineBeingCreated=null,this._lineCancelled.fire(),F.drawOnAllCharts().value()&&!e.properties().singleChartOnly&&F.cancelLineTool({model:this})}},c.prototype.startChangingLinetool=function(e,t,i,o){var n,r,s;this._lineBeingEdited=e,this._linePointBeingEdited=i,this._lineBeingEdited.startChanging(i,t),n=this.paneForSource(e),t.price=this._magnet.align(t.price,t.index,n),this._lineBeingEdited.startDragPoint&&this._lineBeingEdited.startDragPoint(i,t),this._lineBeingEdited.setPoint(i,t,o),this._lineBeingEdited.updateAllViews(),r=this._paneInvalidationMask(n,k.LIGHT_UPDATE),r.force=!0,this.invalidate(r),e.linkKey&&!e.properties().singleChartOnly&&(s=this._externalTimeStamp(t.index),F.startChangingLineTool({linkKey:e.linkKey,model:this,symbol:this.mainSeries().symbol(),point:{price:t.price,timeStamp:s},pointIndex:i,envState:o}))},c.prototype.lineBeingEdited=function(){return this._lineBeingEdited},c.prototype.linePointBeingEdited=function(){return this._linePointBeingEdited},c.prototype.changeLinePoint=function(e,t){var i,o,n,r,s,a=this.paneForSource(this._lineBeingEdited);void 0!==e.x&&void 0!==e.y?(n=this._lineBeingEdited.priceScale(),r=a.mainDataSource().firstValue(),i=n.coordinateToPrice(e.y,r),o=Math.round(this.timeScale().coordinateToIndex(e.x)),i=this._magnet.align(i,o,a),this._lineBeingEdited.setPoint(this._linePointBeingEdited,{price:i,index:o},t)):this._lineBeingEdited.setPoint(this._linePointBeingEdited,e,t),this._lineBeingEdited.updateAllViews(),this.invalidate(new k(k.LIGHT_UPDATE)),this._lineBeingEdited.linkKey&&!this._lineBeingEdited.properties().singleChartOnly&&(s=this._externalTimeStamp(o),F.changeLineTool({linkKey:this._lineBeingEdited.linkKey,model:this,symbol:this.mainSeries().symbol(),point:{price:i,timeStamp:s},envState:t}))},c.prototype.endChangingLinetool=function(e){var t,i,o=this._lineBeingEdited;this._lineBeingEdited.endChanging(!1,e),this._lineBeingEdited=null,this._linePointBeingEdited=null,t=new k(k.LIGHT_UPDATE),
t.force=!0,this.invalidate(t),i={points:o._timePoint,interval:this.mainSeries().interval()},o.linkKey&&!o.properties().singleChartOnly&&F.finishChangingLineTool({model:this,linkKey:o.linkKey,symbol:this.mainSeries().symbol(),finalState:i})},c.prototype.startMovingSource=function(e,t,i){var o,n,r;this._sourceBeingMoved=e,this._linePointBeingMoved=i,this._sourceBeingMoved.startMoving(t,i),o=this.paneForSource(this._sourceBeingMoved),n=this._paneInvalidationMask(o,k.LIGHT_UPDATE),n.force=!0,this.invalidate(n),e.linkKey&&!e.properties().singleChartOnly&&(r=this._externalTimeStamp(t.index),F.startMovingLineTool({linkKey:e.linkKey,model:this,symbol:this.mainSeries().symbol(),point:{price:t.price,timeStamp:r}}))},c.prototype.sourceBeingMoved=function(){return this._sourceBeingMoved},c.prototype.moveSource=function(e){if(this._sourceBeingMoved.move(e,this._linePointBeingMoved),this.invalidate(new k(k.LIGHT_UPDATE)),this._sourceBeingMoved.linkKey&&!this._sourceBeingMoved.properties().singleChartOnly){var t=this._externalTimeStamp(e.index);F.moveLineTool({linkKey:this._sourceBeingMoved.linkKey,model:this,point:{price:e.price,timeStamp:t}})}},c.prototype.endMovingSource=function(e){var t,i,o=this._sourceBeingMoved,n=this.paneForSource(this._sourceBeingMoved);this._sourceBeingMoved.endMoving(e),this._sourceBeingMoved=null,this._linePointBeingMoved=null,t=this._paneInvalidationMask(n,k.LIGHT_UPDATE),t.invalidateAll(k.LIGHT_UPDATE),t.force=!0,this.invalidate(t),y(o)&&(i={points:o._timePoint,interval:this.mainSeries().interval()},o.linkKey&&!o.properties().singleChartOnly&&F.finishMovingLineTool({linkKey:o.linkKey,model:this,finalState:i}))},c.prototype.finishLineTool=function(e){var t=this.lineBeingCreated();t&&(t.finish&&t.finish(),!e&&F.drawOnAllCharts().value()&&t.linkKey&&!t.properties().singleChartOnly&&F.finishLineTool({linkKey:t.linkKey,model:this}))},c.prototype.calculateDefaultTags=function(){var e,t,i=[],o=this.dataSources();for(e=0;e<o.length;e++)t=o[e],t.tags&&(i=i.concat(t.tags()));return i},c.prototype.changeZOrder=function(e,t){this.paneForSource(e).changeZOrder(e,t),this.invalidate(new k(k.FULL_UPDATE))},c.prototype.sendToBack=function(e){this.paneForSource(e).sendToBack(e),this.invalidate(new k(k.FULL_UPDATE))},c.prototype.bringToFront=function(e){this.paneForSource(e).bringToFront(e),this.invalidate(new k(k.FULL_UPDATE))},c.prototype.onTagsChanged=function(){return this._tagsChanged},c.prototype.onPaneTagsChanged=function(){this._tagsChanged.fire()},c.prototype.setTimeViewport=function(e,t){this.timeScale().zoomToBarsRange(e,t),this.recalculateAllPanes(),this.invalidate(new k(k.LIGHT_UPDATE))},c.prototype.zoomToViewport=function(e,t,i,o,r){var s,a,l;this.setTimeViewport(e,t),s=Math.min(i,o),a=Math.max(i,o),l=r.defaultPriceScale(),l.isPercentage()||l.setMode({autoScale:!1}),l.isLog()&&(s=l.priceToLogical(s),a=l.priceToLogical(a)),l.setPriceRange(new n(s,a)),this.recalculateAllPanes(),this.invalidate(this._paneInvalidationMask(r,k.LIGHT_UPDATE)),this._setScalesResetAvailable(!0)},
c.prototype.clearAllStudies=function(){var e,t=this.dataSources();for(e=0;e<t.length;e++)t[e].clearData&&t[e].clearData()},c.prototype.allStudies=function(){return this._getAllSources(s)},c.prototype.allLineTools=function(){return this._getAllSources(y)},c.prototype.getStudyById=function(e){var t=this.dataSourceForId(e);return null!==t&&s(t)?t:null},c.prototype.getLineToolById=function(e){var t=this.dataSourceForId(e);return null!==t&&y(t)?t:null},c.prototype._getAllSources=function(e){var t,i,o,n,r,s,a=[],l=this.m_panes,c=l.length;for(t=0;t<c;++t)for(i=l[t],o=i.dataSources(),n=o.length,r=0;r<n;++r)s=o[r],e(s)&&a.push(s);return a},c.prototype.getStudyById=function(e){var t=this.dataSourceForId(e);return t instanceof E?t:null},c.prototype.backgroundColor=function(){return this._properties.paneProperties.background._value},c.prototype.backgroundCounterColor=function(){return"black"===_(p(this.backgroundColor()),150)?"white":"black"},c.prototype.isDark=function(){return"white"===this.backgroundCounterColor()},c.prototype.canZoomIn=function(){return this.m_timeScale.canZoomIn()&&r.enabled("chart_zoom")},c.prototype.canZoomOut=function(){return this.m_timeScale.canZoomOut()&&r.enabled("chart_zoom")},c.prototype.updateAllVolumeStudies=function(){var e,t,i,o,n,r,a=this.m_panes;for(e=a.length;e--;)for(t=!1,i=a[e],o=i.dataSources(),n=o.length;n--;)r=o[n],s(r)&&"Volume"===r.metaInfo().shortId&&(r.updateAllViews(),t||(this.updatePane(i),t=!0))},c.prototype.alertsList=function(){return this._alertsList},c.prototype.setAlertsStudiesList=function(e){this._alertsStudiesList=$.map($.grep(e,function(e){var t,i=e.plots||[];for(t=0;t<i.length;t++)if("line"===i[t].type)return!0;return!1}),function(e){return e.id})},c.prototype.canCreateAlertForDataSource=function(e){if(!r.enabled("alerts"))return!1},c.prototype.setInterval=function(e,t){var i=setInterval(e,t);return this._modelIntervals.push(i),i},c.prototype.clearInterval=function(e){clearInterval(e);var t=this._modelIntervals.indexOf(e);t>-1&&this._modelIntervals.splice(t,1)},c.prototype.clearIntervals=function(){for(var e=0;e<this._modelIntervals.length;e++)clearInterval(this._modelIntervals[e]);this._modelIntervals=[]},c.prototype.destroy=function(){var e;for(e=0;e<this._barsMarksSources.length;e++)this._barsMarksSources[e].destroy();for(this.clearIntervals(),F.hideAllDrawings().unsubscribe(this,this.visibilityChangeHandler),this.resetDeferredStudies(),this._brandingSource&&this._brandingSource.destroy(),e=0;e<this._barsMarksSources.length;e++)this._barsMarksSources[e].destroy();for(e=0;e<this.m_panes.length;e++)this.m_panes[e].destroy();this.m_panes.length=0},c.prototype.countUserStudies=function(e){var t,i,o,n,r,a,l=0;for(e=e||{},t=0;t<this.m_panes.length;t++)for(i=this.m_panes[t].dataSources(),o=0;o<i.length;o++)if(n=i[o],s(n)&&n.showInObjectTree()){if(r=n.metaInfo&&n.metaInfo()){if(a=r.id,e.dontCountVolume&&"Volume@tv-basicstudies"===a)continue;if(e.dontCountCompare&&"Compare@tv-basicstudies"===a)continue;if(e.dontCountOverlay&&"Overlay@tv-basicstudies"===a)continue}l++}return l
},c.prototype.isJustClonedChart=function(){return this._undoModel.isJustClonedChart()},c.prototype.undoModel=function(){return this._undoModel},c.prototype.copyToOtherCharts=function(e){var t,i,o,n;e.linkKey=e.linkKey||U.randomHash(),t=this,i=e.state(),o=this.mainSeries(),(n=o.syncModel())&&(i.points=e._timePoint.map(function(e){var i=t.timeScale().timePointToIndex(e.time_t)+e.offset;return{price:e.price,timeStamp:t._externalTimeStamp(i)}}),i.linetool=e.getType(),i.model=this,i.symbol=this.mainSeries().symbol(),i.finalState={points:e._timePoint,interval:this.mainSeries().interval()},F.copyLineTool(i))},c.prototype.restoreSource=function(e,t,i,o,n){var r,s,a,l,c,h,u,d;return r=e?this.createPane(t):this.panes()[t],a=o.type,s=a.toLowerCase().startsWith("study")?r._restoreStudy(o):r._restoreLineTool(o),l=s.ownerSource()?s.ownerSource().priceScale():r.priceScaleByName(n),l?(s.setPriceScale(l),l.addDataSource(s)):(l=new C(this.properties().scalesProperties),l.setHeight(r.m_height),c=s.metaInfo&&"Volume@tv-basicstudies"===s.metaInfo().id,h=c?.75:r.m_rightPriceScale.topMargin(),u=c?0:r.m_rightPriceScale.bottomMargin(),l.setTopMargin(h),l.setBottomMargin(u),l.addDataSource(s),s.setPriceScale(l),s._isOverlay=!0),d=null,o.ownerSource&&(d=r.dataSourceForId(o.ownerSource)),s.setOwnerSource(d),s.setPriceScale(l),s.start(),s.restore&&s.restore(),e&&r.restoreState(i),this.recalculateAllPanes(),this.mainSeries().invalidateBarColorerCache(),this.invalidate(new k(k.FULL_UPDATE,!0)),s.linkKey&&F.restoreLineTool({model:this,linkKey:s.linkKey,state:{restorePane:e,paneIndex:t,paneState:i,sourceState:o,priceScaleName:n}}),s},c.prototype.restoreLineToolState=function(e,t){e.restorePoints(t.points,t.indexes||[]),e.properties().merge(t.state),e.restoreData&&e.restoreData(t),e.createServerPoints(),this.invalidate(new k(k.FULL_UPDATE)),e.linkKey&&F.restoreLineToolState({model:this,linkKey:e.linkKey,state:t})},c.prototype.createBrandingSource=function(){this._brandingSource=new I(this)},c.prototype.onChartThemeLoaded=function(){return this._chartThemeLoaded},c.prototype.chartThemeLoaded=function(){this._chartThemeLoaded.fire()},c.prototype.selectBarMode=function(){return this.m_crossHairSource.selectBarMode()},c.prototype.toggleSelectBarMode=function(){this.m_crossHairSource.toggleSelectBarMode()},c.prototype.onBarSelected=function(){return this.m_crossHairSource.onBarSelected()},c.prototype.isSeriesStyleSupported=function(e){return this.m_mainSeries.isStyleSupported(e)},c.prototype.getStudyShiftColorStartOffset=function(){return this._studyShiftColorStartOffset},c.prototype.setStudyShiftColorStartOffset=function(e){this._studyShiftColorStartOffset=e},c.prototype.setPriceAutoScaleForAllMainSources=function(){var e,t;for(e=0;e<this.m_panes.length;++e)null===(t=this.m_panes[e].mainDataSource())||t.priceScale().isLockScale()||t.priceScale().setMode({autoScale:!0})},c.prototype.defaultResolutions=function(){return this.chartApi().chartApi().defaultResolutions()},c.prototype._setScalesResetAvailable=function(e){
this._isScalesResetAvailable!==e&&(this._isScalesResetAvailable=e,this._isScalesResetAvailableChanged.fire())},c.prototype.isScalesResetAvailable=function(){return this._isScalesResetAvailable},c.prototype.isScalesResetAvailableChanged=function(){return this._isScalesResetAvailableChanged},e.exports=c}).call(t,i(8),i(15),i(58).PriceRange,i(4))},function(e,t,i){"use strict";function o(e,t){this.array=[];for(var i in e)e[i].key=i,this.array.push(e[i]);this.rearrange(t)}o.prototype.rearrange=function(e){if("function"!=typeof e)throw Error("sort param is not a function");return this.array.sort(e)},o.byValue=function(e){return function(e,t){return e-t}},o.byField=function(e){return function(t,i){return t[e]>i[e]?1:t[e]<i[e]?-1:t[e]===i[e]?0:void 0}},o.byOrder=function(e){return function(t,i){return e.indexOf(t.key)-e.indexOf(i.key)}},e.exports=o},function(e,t,i){"use strict";function o(){s.call(this)}function n(e,t){this._constructor="LineToolFibRetracement";var r=t||this.createPropertiesObject("linetoolfibretracement");a.call(this,e,r),this.version=n.version,this._properties._stateVersion=1,e._fibRetracementLabelsCache||(e._fibRetracementLabelsCache=new o),i.e(0).then(function(e){var t=i(878).FibRetracementPaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var r=i(17),s=i(71),a=i(0).LineDataSource,l=i(1).propertyPages;inherit(o,s),o.prototype.levelsCount=function(){return n.LevelsCount},inherit(n,a),n.version=2,n.LevelsCount=24,n.prototype.levelsCount=function(){return n.LevelsCount},n.prototype.stop=function(){a.prototype.stop.call(this),this._model._fibRetracementLabelsCache.removeSource(this.id())},n.prototype.pointsCount=function(){return 2},n.prototype.title=function(){return"Fib Retracement"},n.prototype.migrateVersion=function(e,t,i){1===e&&this.properties().extendLines.setValue(!0)},n.prototype.processErase=function(e,t){var i="level"+t,o=this.properties()[i].visible;e.setProperty(o,!1,"Erase level line")},n.prototype.createPropertiesObject=function(e,t,i){return new r(e,t,i,{range:[1,24],names:["coeff","color","visible"]})},n.prototype.getStylesPropertyPage=function(){return l.LineToolFibRetracementStylesPropertyPage},t.LineToolFibRetracement=n},function(e,t,i){"use strict";(function(t){function i(e){t.call(this,""),this.subscribe(this,i.prototype.checkSelfColor),this.reloadProperties(e)}inherit(i,t),i.prototype.reloadProperties=function(e){for(;this._childs.length>0;)this.removeProperty(this._childs[0]);this._initValues=[];for(var t=0;t<e.length;++t)this._initValues.push(e[t].defaultValue),this.addChild(t,e[t].property);this.checkSelfColor()},i.prototype.setValue=function(e,i){if(this._value!==e||i){var o=this;this._childs.forEach(function(t){o[t].setValue(e||o._initValues[t])}),t.prototype.setValue.call(this,e,i)}},i.prototype.checkSelfColor=function(){var e,i=!0;for(e=0;e<this._initValues.length;++e)if(this[e].value()!==this[0].value()){i=!1;break}t.prototype.setValue.call(this,i?this[0].value():"")},e.exports=i}).call(t,i(12))},function(e,t,i){"use strict"
;function o(){a.call(this)}function n(e,t){this._constructor="LineToolFibChannel";var s=t||this.createPropertiesObject("linetoolfibchannel");r.call(this,e,s),this.version=n.version,e._fibChannelLabelsCache||(e._fibChannelLabelsCache=new o),i.e(0).then(function(e){var t=i(879).FibChannelPaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var r=i(0).LineDataSource,s=i(17),a=i(71),l=i(1).propertyPages;inherit(o,a),o.prototype.levelsCount=function(){return n.LevelsCount},inherit(n,r),n.LevelsCount=24,n.version=2,n.prototype.levelsCount=function(){return n.LevelsCount},n.prototype.migrateVersion=function(e,t,i){i.properties.removeProperty("reverse")},n.prototype.pointsCount=function(){return 3},n.prototype.title=function(){return"Fib Channel"},n.prototype.processErase=function(e,t){var i="level"+t,o=this.properties()[i].visible;e.setProperty(o,!1,"Erase level line")},n.prototype.createPropertiesObject=function(e,t,i){return new s(e,t,i,{range:[1,24],names:["coeff","color","visible"]})},n.prototype.getStylesPropertyPage=function(){return l.LineToolFibChannelStylesPropertyPage},t.LineToolFibChannel=n},function(e,t,i){"use strict";function o(){a.call(this)}function n(e,t){this._constructor="LineToolFibSpeedResistanceArcs";var n=t||this.createPropertiesObject("linetoolfibspeedresistancearcs");r.call(this,e,n),e._fibSpeedResistanceArcsLabelsCache||(e._fibSpeedResistanceArcsLabelsCache=new o),i.e(0).then(function(e){var t=i(880).FibSpeedResistanceArcsPaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var r=i(0).LineDataSource,s=i(17),a=i(71),l=i(1).propertyPages;inherit(o,a),o.prototype.levelsCount=function(){return n.LevelsCount},inherit(n,r),n.LevelsCount=11,n.prototype.levelsCount=function(){return n.LevelsCount},n.prototype.pointsCount=function(){return 2},n.prototype.title=function(){return"Fib Speed Resistance Arcs"},n.prototype.processErase=function(e,t){var i="level"+t,o=this.properties()[i].visible;e.setProperty(o,!1,"Erase level line")},n.prototype.createPropertiesObject=function(e,t,i){return new s(e,t,i,{range:[1,11]})},n.prototype.getStylesPropertyPage=function(){return l.LineToolFibSpeedResistanceArcsStylesPropertyPage},t.LineToolFibSpeedResistanceArcs=n},function(e,t,i){"use strict";function o(){a.call(this)}function n(e,t){this._constructor="LineToolProjection";var o=t||this.createPropertiesObject("linetoolprojection");l.call(this,e,o),i.e(0).then(function(e){var t=i(881).ProjectionLinePaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var r=i(17),s=i(270).LineToolFibWedge,a=i(71),l=i(0).LineDataSource,c=i(1).propertyPages;inherit(o,a),o.prototype.levelsCount=function(){return 1},inherit(n,s),n.prototype.title=function(){return"Projection"},n.prototype.getCache=function(){return this._model._projectionLabelsCache||(this._model._projectionLabelsCache=new o),this._model._projectionLabelsCache},n.prototype.createPropertiesObject=function(e,t,i){return new r(e,t,i,{range:[1,1]})},
n.prototype.getStylesPropertyPage=function(){return c.LineToolProjectionStylesPropertyPage},t.LineToolProjection=n},function(e,t,i){"use strict";function o(){a.call(this)}function n(e,t){this._constructor="LineToolTrendBasedFibExtension";var s=t||new this.createPropertiesObject("linetooltrendbasedfibextension");r.call(this,e,s),this.version=n.version,e._trendBasedFibExtensionLabelsCache||(e._trendBasedFibExtensionLabelsCache=new o),i.e(0).then(function(e){var t=i(882).TrendBasedFibExtensionPaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var r=i(0).LineDataSource,s=i(17),a=i(71),l=i(1).propertyPages;inherit(o,a),o.prototype.levelsCount=function(){return n.LevelsCount},o.prototype.points=function(e){return[e.points()[0],e.points()[1]]},o.prototype.startPoint=function(e,t){return e.points()[2]},o.prototype.priceRange=function(e,t){var i=this.points(e),o=i[0],n=i[1];return t?o.price-n.price:n.price-o.price},o.prototype.sourceIsReady=function(e){return e.points().length>=3},inherit(n,r),n.version=2,n.LevelsCount=24,n.prototype.levelsCount=function(){return n.LevelsCount},n.prototype.stop=function(){r.prototype.stop.call(this),this._model._trendBasedFibExtensionLabelsCache.removeSource(this.id())},n.prototype.pointsCount=function(){return 3},n.prototype.title=function(){return"Trend-Based Fib Extension"},n.prototype.migrateVersion=function(e,t,i){1===e&&this.properties().extendLines.setValue(!0)},n.prototype.processErase=function(e,t){var i="level"+t,o=this.properties()[i].visible;e.setProperty(o,!1,"Erase level line")},n.prototype.createPropertiesObject=function(e,t,i){return new s(e,t,i,{range:[0,8]})},n.prototype.getStylesPropertyPage=function(){return l.LineToolTrendBasedFibExtensionStylesPropertyPage},t.LineToolTrendBasedFibExtension=n},function(e,t,i){"use strict";function o(){a.call(this)}function n(e,t){this._constructor="LineToolFibCircles";var n=t||this.createPropertiesObject("linetoolfibcircles");r.call(this,e,n),e._fibCirclesLabelsCache||(e._fibCirclesLabelsCache=new o),i.e(0).then(function(e){var t=i(883).FibCirclesPaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var r=i(0).LineDataSource,s=i(17),a=i(71),l=i(1).propertyPages;inherit(o,a),o.prototype.levelsCount=function(){return n.LevelsCount},inherit(n,r),n.LevelsCount=11,n.prototype.levelsCount=function(){return n.LevelsCount},n.prototype.pointsCount=function(){return 2},n.prototype.title=function(){return"Fib Circles"},n.prototype.processErase=function(e,t){var i="level"+t,o=this.properties()[i].visible;e.setProperty(o,!1,"Erase level line")},n.prototype.createPropertiesObject=function(e,t,i){return new s(e,t,i,{range:[1,11]})},n.prototype.getStylesPropertyPage=function(){return l.LineToolFibCirclesStylesPropertyPage},t.LineToolFibCircles=n},function(e,t,i){"use strict";function o(e,t){this._constructor="LineToolVertLine";var o=t||new r("linetoolvertline");this._timeAxisView=new a(this,e),n.call(this,e,o),i.e(0).then(function(e){var t=i(884).VertLinePaneView
;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var n=i(0).LineDataSource,r=i(2).DefaultProperty,s=i(1).propertyPages,a=i(271).LineToolVertLineTimeAxisView;inherit(o,n),o.prototype.pointsCount=function(){return 1},o.prototype.title=function(){return"Vertical Line"},o.prototype.timeAxisViews=function(){return this.isSourceHidden()?null:this.properties().showTime.value()?[this._timeAxisView]:null},o.prototype.updateAllViews=function(){n.prototype.updateAllViews.call(this),this._timeAxisView.update()},o.prototype.canHasAlert=function(){return!0},o.prototype._getAlertPlots=function(){var e=this._points[0],t={index:e.index,price:e.price+1};return[this._linePointsToAlertPlot([e,t],null,!0,!0)]},o.prototype.getInputsPropertyPage=function(){return s.LineToolVertLineInputsPropertyPage},o.prototype.getStylesPropertyPage=function(){return s.LineToolVertLineStylesPropertyPage},t.LineToolVertLine=o},function(e,t,i){"use strict";var o,n,r,s,a,l,c;Object.defineProperty(t,"__esModule",{value:!0}),i.d(t,"LineToolCrossLine",function(){return c}),o=i(3),n=i(2),i.n(n),r=i(177),s=i(271),a=i(0),i.n(a),l=i(1),i.n(l),c=function(e){function t(t,o){var a=e.call(this,t,o||new n.DefaultProperty("linetoolcrossline"))||this;return a._constructor="LineToolCrossLine",a._priceAxisView=new r.LineToolHorzLinePriceAxisView(a),a._timeAxisView=new s.LineToolVertLineTimeAxisView(a,t),i.e(0).then(function(e){var t=i(885).CrossLinePaneView;a._setPaneViews([new t(a,a._model)])}.bind(null,i)).catch(i.oe),a}return o.c(t,e),t.prototype.pointsCount=function(){return 1},t.prototype.title=function(){return"Cross Line"},t.prototype.priceAxisViews=function(e,t){return this.isSourceHidden()?null:t===this.priceScale()&&this.properties().showPrice.value()&&this._model.paneForSource(this)===e?[this._priceAxisView]:null},t.prototype.timeAxisViews=function(){return this.isSourceHidden()?null:this.properties().showTime.value()?[this._timeAxisView]:null},t.prototype.updateAllViews=function(){e.prototype.updateAllViews.call(this),this._priceAxisView.update(),this._timeAxisView.update()},t.prototype.canHasAlert=function(){return!1},t.prototype.getInputsPropertyPage=function(){return l.propertyPages.LineToolCrossLineInputsPropertyPage},t.prototype.getStylesPropertyPage=function(){return l.propertyPages.LineToolCrossLineStylesPropertyPage},t.prototype.lineColor=function(){return this.properties().linecolor.value()},t.prototype.lineWidth=function(){return this.properties().linewidth.value()},t.prototype.lineStyle=function(){return this.properties().linestyle.value()},t}(a.LineDataSource),c.prototype.superclass=a.LineDataSource},function(e,t,i){"use strict";function o(e,t){this._constructor="LineToolBarsPattern";var r=t||new s("linetoolbarspattern");n.call(this,e,r),r.mirrored.listeners().subscribe(this,o.prototype.mirror),r.flipped.listeners().subscribe(this,o.prototype.flip),r.addExclusion("mirrored"),r.addExclusion("flipped"),this._scaleCoeff=1,this.version=o.version,this._pattern=[],
this._properties.mode.listeners().subscribe(this,o.prototype.onModeChanged),i.e(0).then(function(e){var t=i(886).BarsPatternPaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var n=i(0).LineDataSource,r=i(40).Action,s=i(2).DefaultProperty,a=i(20).PlotRowSearchMode,l=i(1).propertyPages,c=i(204).LineToolBarsPatternMode;inherit(o,n),o.version=2,o.prototype.onModeChanged=function(){var e=this.patternPriceDiff();e*=this._pressCoeff,this._points[1].price=this._timePoint[1].price=this._points[0].price+e},o.prototype.additionalActions=function(e){var t,i,o=new r({checked:this.properties().mirrored.value(),checkable:!0,text:$.t("Mirrored"),callbackContext:{target:this}}),n=new r({checked:this.properties().flipped.value(),checkable:!0,text:$.t("Flipped"),callbackContext:{target:this}});return o.callbacks().subscribe(null,function(t){var i=t.callbackContext(),o=i.target;e.setProperty(o.properties().mirrored,!o.properties().mirrored.value(),"Bats Pattern Mirroring"),o.updateAllViews(),o._model.updateSource(o)}),n.callbacks().subscribe(null,function(t){var i=t.callbackContext(),o=i.target;e.setProperty(o.properties().flipped,!o.properties().flipped.value(),"Bats Pattern Flipping"),o.updateAllViews(),o._model.updateSource(o)}),t=new r({checkable:!0,text:$.t("Restore Size")}),i=this,t.callbacks().subscribe(null,function(t){var o=i.points()[0],n=i.patternPriceDiff(),r=o.price+n,s=o.index+i._pattern.length-1;e.startChangingLinetool(i,{price:r,index:s},1,{}),e.changeLinePoint({price:r,index:s},{}),e.endChangingLinetool()}),[o,n,t]},o.prototype.pointsCount=function(){return 2},o.prototype.state=function(e){var t=n.prototype.state.call(this,e);return t.pattern=this._pattern,t},o.prototype.restoreData=function(e){e.pattern&&(this._pattern=e.pattern)},o.prototype.title=function(){return"Bars Pattern"},o.prototype.cloneData=function(e){this._pattern=TradingView.clone(e._pattern)},o.prototype.mirror=function(){var e,t,i,o,n,r=this._pattern,s=r[0][TradingView.HIGH_PLOT],a=Math.min(r[0][TradingView.LOW_PLOT],r[0][TradingView.HIGH_PLOT]),l=Math.max(r[0][TradingView.LOW_PLOT],r[0][TradingView.HIGH_PLOT]);for(e=1;e<r.length;e++)a=Math.min(a,r[e][TradingView.LOW_PLOT]),l=Math.max(l,r[e][TradingView.HIGH_PLOT]);if(a<l)for(t=(a+l)/2,i=function(e){return t-(e-t)},e=0;e<r.length;e++)r[e][TradingView.HIGH_PLOT]=i(r[e][TradingView.HIGH_PLOT]),r[e][TradingView.LOW_PLOT]=i(r[e][TradingView.LOW_PLOT]),r[e][TradingView.OPEN_PLOT]=i(r[e][TradingView.OPEN_PLOT]),r[e][TradingView.CLOSE_PLOT]=i(r[e][TradingView.CLOSE_PLOT]);o=r[0][TradingView.HIGH_PLOT]-s,n=r[r.length-1][TradingView.LOW_PLOT]-r[0][TradingView.HIGH_PLOT],this._points[0].price+=o,this._points[1].price=this._points[0].price+n,this.updateAllViews()},o.prototype.flip=function(){var e,t,i;for(this._points[0].price=this._points[1].price,e=0;e<this._pattern.length/2;e++)t=this._pattern[e],this._pattern[e]=this._pattern[this._pattern.length-e-1],this._pattern[this._pattern.length-e-1]=t
;i=this._pattern[this._pattern.length-1][TradingView.LOW_PLOT]-this._pattern[0][TradingView.HIGH_PLOT],this._points[1].price=this._points[0].price+i,this.updateAllViews()},o.prototype.firstPatternPrice=function(){var e,t,i=parseInt(this.properties().mode.value(),10);return i===c.LineHL2?(this._pattern[0][TradingView.HIGH_PLOT]+this._pattern[0][TradingView.LOW_PLOT])/2:(e={0:TradingView.HIGH_PLOT,1:TradingView.CLOSE_PLOT,2:TradingView.OPEN_PLOT,3:TradingView.OPEN_PLOT,4:TradingView.HIGH_PLOT,5:TradingView.LOW_PLOT},t=e[i],this._pattern[0][t])},o.prototype.lastPatternPrice=function(){var e,t,i=parseInt(this.properties().mode.value(),10);return i===c.LineHL2?(this._pattern[this._pattern.length-1][TradingView.HIGH_PLOT]+this._pattern[this._pattern.length-1][TradingView.LOW_PLOT])/2:(e={0:TradingView.LOW_PLOT,1:TradingView.CLOSE_PLOT,2:TradingView.CLOSE_PLOT,3:TradingView.OPEN_PLOT,4:TradingView.HIGH_PLOT,5:TradingView.LOW_PLOT},t=e[i],this._pattern[this._pattern.length-1][t])},o.prototype.patternPriceDiff=function(){return this.lastPatternPrice()-this.firstPatternPrice()},o.prototype.pressCoeff=function(){var e=this.patternPriceDiff(),t=this.points()[0].price,i=this.points()[1].price,o=i-t,n=o/e;return this._pressCoeff=n,n},o.prototype.addPoint=function(e,t){var i,o,r,s,l,h,u,d,p,_,f,m=this._model.mainSeries(),g=m.nearestIndex(e.index,a.NearestRight);if(this.properties().mode.value()===c.Bars?e.price=m.bars().valueAt(g)[TradingView.HIGH_PLOT]:e.price=m.bars().valueAt(g)[TradingView.CLOSE_PLOT],i=this.priceScale(),o=this.ownerSource().firstValue(),r=.05*i.height(),s=i.priceToCoordinate(e.price,o)-r,e.price=i.coordinateToPrice(s,o),l=n.prototype.addPoint.call(this,e,t,!0)){for(h=Math.min(this.points()[0].index,this.points()[1].index),u=Math.max(this.points()[0].index,this.points()[1].index),g=this._model.mainSeries().nearestIndex(h,a.NearestRight),d=this._model.mainSeries().nearestIndex(u,a.NearestLeft),this.points()[0].index>this.points()[1].index&&(this._points[0].price=this._points[1].price),this._pattern=[],p=g;p<=d;p++)_=this._model.mainSeries().data().valueAt(p),this._pattern.push(TradingView.clone(_));this._pattern.length>0&&(f=this.patternPriceDiff(),this._points[1].price=this._points[0].price+f,this._points[1].index=this._points[0].index+(d-g),this.normalizePoints(),this.createServerPoints())}return l},o.prototype.setPoint=function(e,t,i){1===e&&t.index<=this._points[0].index&&(t.index=this._points[0].index+1),0===e&&t.index>=this._points[1].index&&(t.index=this._points[1].index-1),n.prototype.setPoint.call(this,e,t,i)},o.prototype.migrateVersion=function(e,t,i){if(1===e&&this._pattern.length>0){var o=this.patternPriceDiff();2===this._timePoint.length&&(this._timePoint[1].price=this._timePoint[0].price+o),2===this._points.length&&(this._points[1].price=this._points[0].price+o)}},o.prototype.getInputsPropertyPage=function(){return null},o.prototype.getStylesPropertyPage=function(){return l.LineToolBarsPatternStylesPropertyPage},t.LineToolBarsPattern=o},function(e,t,i){"use strict";function o(e,t){
this._constructor="LineToolTrendBasedFibTime";var r=t||new this.createPropertiesObject("linetooltrendbasedfibtime");n.call(this,e,r),this.version=o.version,i.e(0).then(function(e){var t=i(887).TrendBasedFibTimePaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var n=i(0).LineDataSource,r=i(17),s=i(1).propertyPages;inherit(o,n),o.version=1,o.prototype.pointsCount=function(){return 3},o.prototype.title=function(){return"Trend-Based Fib Time"},o.prototype.migrateVersion=function(e,t,i){},o.prototype.processErase=function(e,t){var i="level"+t,o=this.properties()[i].visible;e.setProperty(o,!1,"Erase level line")},o.prototype.createPropertiesObject=function(e,t,i){return new r(e,t,i,{range:[1,11]})},o.prototype.getStylesPropertyPage=function(){return s.LineToolTrendBasedFibTimeStylesPropertyPage},t.LineToolTrendBasedFibTime=o},function(e,t,i){"use strict";function o(e,t){this._constructor="LineToolFibTimeZone";var r=t||this.createPropertiesObject("linetoolfibtimezone");n.call(this,e,r),this.version=o.version,i.e(0).then(function(e){var t=i(888).FibTimeZonePaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var n=i(0).LineDataSource,r=i(17),s=i(1).propertyPages;inherit(o,n),o.version=2,o.prototype.migrateVersion=function(e,t,i){var o;if(1===e){for(i.properties.level1.color.setValue(i.properties.baselinecolor.value()),o=2;o<=11;o++)i.properties["level"+o].color.setValue(i.properties.linecolor.value());for(o=1;o<=11;o++)i.properties["level"+o].linewidth.setValue(i.properties.linewidth.value()),i.properties["level"+o].linestyle.setValue(i.properties.linestyle.value())}},o.prototype.pointsCount=function(){return 2},o.prototype.title=function(){return"Fib Time Zone"},o.prototype.processErase=function(e,t){var i="level"+t,o=this.properties()[i].visible;e.setProperty(o,!1,"Erase level line")},o.prototype.createPropertiesObject=function(e,t,i){return new r(e,t,i,{range:[1,11]})},o.prototype.getStylesPropertyPage=function(){return s.LineToolFibTimeZoneStylesPropertyPage},t.LineToolFibTimeZone=o},function(e,t,i){"use strict";function o(e,t){this._constructor="LineToolCircleLines";var o=t||new r("linetoolcirclelines");n.call(this,e,o),i.e(0).then(function(e){var t=i(889).LineToolCircleLinesPaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var n=i(0).LineDataSource,r=i(2).DefaultProperty,s=i(1).propertyPages;inherit(o,n),o.prototype.pointsCount=function(){return 2},o.prototype.title=function(){return"Cyclic Lines"},o.prototype.getStylesPropertyPage=function(){return s.LineToolCircleLinesStylesPropertyPage},t.LineToolCircleLines=o},function(e,t,i){"use strict";function o(e,t){this._constructor="LineToolDateRange";var o=t||new r("linetooldaterange");n.call(this,e,o),i.e(0).then(function(e){var t=i(890).DateRangePaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var n=i(0).LineDataSource,r=i(2).DefaultProperty,s=i(1).propertyPages;inherit(o,n),
o.prototype.pointsCount=function(){return 2},o.prototype.title=function(){return"Date Range"},o.prototype.getStylesPropertyPage=function(){return s.LineToolDateRangeStylesPropertyPage},t.LineToolDateRange=o},function(e,t,i){"use strict";function o(e,t){this._constructor="LineToolPriceRange";var o=t||new r("linetoolpricerange");n.call(this,e,o),i.e(0).then(function(e){var t=i(891).PriceRangePaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var n=i(0).LineDataSource,r=i(2).DefaultProperty,s=i(1).propertyPages;inherit(o,n),o.prototype.pointsCount=function(){return 2},o.prototype.title=function(){return"Price Range"},o.prototype.getStylesPropertyPage=function(){return s.LineToolDateRangeStylesPropertyPage},t.LineToolPriceRange=o},function(e,t,i){"use strict";function o(e,t){this._constructor="LineToolDateAndPriceRange";var o=t||new r("linetooldateandpricerange");n.call(this,e,o),i.e(0).then(function(e){var t=i(892).DateAndPriceRangePaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var n=i(0).LineDataSource,r=i(2).DefaultProperty,s=i(1).propertyPages;inherit(o,n),o.prototype.pointsCount=function(){return 2},o.prototype.title=function(){return"Date and Price Range"},o.prototype.getStylesPropertyPage=function(){return s.LineToolDateAndPriceRangeStylesPropertyPage},t.LineToolDateAndPriceRange=o},function(e,t,i){"use strict";function o(e,t){this._constructor="LineToolParallelChannel";var o=t||new r("linetoolparallelchannel");n.call(this,e,o),i.e(0).then(function(e){var t=i(893).ParallelChannelPaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var n=i(0).LineDataSource,r=i(2).DefaultProperty,s=i(1).propertyPages;inherit(o,n),o.prototype.addPoint=function(e){var t,i=n.prototype.addPoint.call(this,e);return i&&(t=this.points()[0],this._points[2].index=t.index,this._points[2].price=t.price+this._priceOffset),i},o.prototype.calculatePriceDiff=function(){var e,t,i,o,n,r,s,a,l,c,h,u,d,p,_,f,m,g,y,v;if(3===this.points().length){if(e=this.points()[0],t=this.points()[1],i=this.points()[2],e.index===t.index)return;if(null===(o=this.priceScale()))return;if(o.isLog()){if(n=this._model.timeScale(),n.isEmpty())return;r=this.ownerSource().firstValue(),s=n.indexToCoordinate(e.index),a=n.indexToCoordinate(t.index),l=o.priceToCoordinate(e.price,r),c=o.priceToCoordinate(t.price,r),h=n.indexToCoordinate(i.index),u=(c-l)/(a-s),d=l+u*(h-s),p=o.priceToCoordinate(i.price,r),_=p-d,r=this.ownerSource().firstValue(),f=.5*(l+c),m=o.coordinateToPrice(f,r),g=f+_,y=o.coordinateToPrice(g,r),this._priceOffset=y-m}else u=(t.price-e.price)/(t.index-e.index),v=e.price+u*(i.index-e.index),this._priceOffset=i.price-v}},o.prototype.setLastPoint=function(e,t){t&&t.shift&&2===this.points().length&&this._snapPoint45Degree(e,this.points()[0]),n.prototype.setLastPoint.call(this,e),this.calculatePriceDiff()},o.prototype.restorePoints=function(e,t,i){n.prototype.restorePoints.call(this,e,t,i),
e&&e.length>=3&&(this._priceOffset=e[2].price-e[0].price)},o.prototype.setPoint=function(e,t,i){i&&i.shift&&e<2&&this._snapPoint45Degree(t,this.points()[1-e]),n.prototype.setPoint.call(this,e,t,i),2===e&&this.calculatePriceDiff();var o=this.points()[0];this._points[2].index=o.index,this._points[2].price=o.price+this._priceOffset},o.prototype.pointsCount=function(){return 3},o.prototype.title=function(){return"Parallel Channel"},o.prototype.addPoint=function(e,t){return t&&t.shift&&2===this.points().length&&this._snapPoint45Degree(e,this.points()[0]),n.prototype.addPoint.call(this,e,t)},o.prototype.fixAfterRestorePriceAxis=function(){this.priceScale().isLog()||delete this._priceOffset},o.prototype.cloneData=function(e){this._priceOffset=e._priceOffset},o.prototype.restoreData=function(e){e.priceOffset&&(this._priceOffset=e.priceOffset)},o.prototype.state=function(e){var t=n.prototype.state.call(this,e);return t.priceOffset=this._priceOffset,t},o.prototype.canHasAlert=function(){return!0},o.prototype._getAlertPlots=function(){function e(e,t){return e.index<=t.index?[e,t]:[t,e]}var t,i,o,n,r,s,a,l,c=[].concat(this._points).splice(0,2);return c=c.concat([{price:c[0].price+this._priceOffset,time:c[0].time,index:c[0].index},{price:c[1].price+this._priceOffset,time:c[1].time,index:c[1].index}]),t=e(c[0],c[1]),i=e(c[2],c[3]),this._priceOffset<0?(n=i,o=t):(n=t,o=i),a=this.properties().extendLeft.value(),l=this.properties().extendRight.value(),c[0].index<=c[1].index?(r=a,s=l):(r=l,s=a),[this._linePointsToAlertPlot(o,"Upper",r,s),this._linePointsToAlertPlot(n,"Lower",r,s)]},o.prototype.getInputsPropertyPage=function(){return null},o.prototype.getStylesPropertyPage=function(){return s.LineToolParallelChannelStylesPropertyPage},t.LineToolParallelChannel=o},function(e,t,i){"use strict";(function(e){function o(e,t){this._constructor="LineToolTrendAngleLine";var n=t||new s("linetooltrendangle");r.call(this,e,n),this._properties.addProperty("angle"),this._properties.angle=new o.AngleProperty(this),i.e(0).then(function(e){var t=i(894).TrendAnglePaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var n=i(6).Point,r=i(0).LineDataSource,s=i(2).DefaultProperty,a=i(1).propertyPages;inherit(o,r),o.AngleProperty=function(t){e.call(this),this._lineSource=t},inherit(o.AngleProperty,e),o.AngleProperty.prototype.value=function(){var e=this._lineSource._angle,t=180*e/Math.PI;return Math.round(t)},o.AngleProperty.prototype.setValue=function(e){var t,i,o,r,s,a,l=e*Math.PI/180;this._lineSource._angle=l,t=this._lineSource.pointToScreenPoint(this._lineSource.points()[0])[0],i=Math.cos(this._lineSource._angle),o=-Math.sin(this._lineSource._angle),r=new n(i,o),s=t.addScaled(r,this._lineSource._distance),a=this._lineSource.screenPointToPoint(s),this._lineSource._points[1]=a,this._lineSource._model.updateSource(this._lineSource),this._lineSource.updateAllViews(),this._lineSource._model.updateSource(this._lineSource)},o.prototype.pointsCount=function(){return 2},o.prototype.title=function(){return"Trend Angle"},
o.prototype._calculateAngle=function(){var e,t=this.pointToScreenPoint(this.points()[0])[0],i=this.pointToScreenPoint(this.points()[1])[0],o=i.subtract(t);o.length()>0?(o=o.normalized(),this._angle=Math.acos(o.x),o.y>0&&(this._angle=-this._angle),this._distance=i.subtract(t).length()):delete this._angle,e=this.properties(),e.hasOwnProperty("angle")&&this.properties().angle.listeners().fire(this.properties().angle)},o.prototype.addPoint=function(e,t){var i=r.prototype.addPoint.call(this,e,t);return i&&this._calculateAngle(),i},o.prototype.setLastPoint=function(e,t){r.prototype.setLastPoint.call(this,e,t),this.points().length>1&&this._calculateAngle()},o.prototype.axisPoints=function(){var e,t,i,o,r,s;return this.points().length<2?[]:(e=[this.points()[0]],t=this.pointToScreenPoint(this.points()[0])[1],i=Math.cos(this._angle)*this._distance,o=-Math.sin(this._angle)*this._distance,r=t.add(new n(i,o)),s=this.screenPointToPoint(r),e.push(s),e)},o.prototype.setPoint=function(e,t,i){r.prototype.setPoint.call(this,e,t,i),this.points().length>1&&1===e&&this._calculateAngle()},o.prototype.restoreData=function(e){this._angle=e.angle,this._distance=e.distance},o.prototype.state=function(e){var t=r.prototype.state.call(this,e);return t.angle=this._angle,t.distance=this._distance,t},o.prototype.cloneData=function(e){this._angle=e._angle,this._distance=e._distance},o.prototype.canHasAlert=function(){return!0},o.prototype._getAlertPlots=function(){return[this._linePointsToAlertPlot(this._points,null,this.properties().extendLeft.value(),this.properties().extendRight.value())]},o.prototype.getInputsPropertyPage=function(){return a.LineToolTrendAngleInputsPropertyPage},o.prototype.getStylesPropertyPage=function(){return a.LineToolTrendAngleStylesPropertyPage},t.LineToolTrendAngle=o}).call(t,i(12))},function(e,t,i){"use strict";function o(e,t){this._constructor="LineToolPitchfan";var o=t||this.createPropertiesObject("linetoolpitchfan");n.call(this,e,o),i.e(0).then(function(e){var t=i(897).PitchfanLinePaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var n=i(0).LineDataSource,r=i(17),s=i(1).propertyPages;inherit(o,n),o.prototype.pointsCount=function(){return 3},o.prototype.title=function(){return"Pitchfan"},o.prototype.processErase=function(e,t){var i="level"+t,o=this.properties()[i].visible;e.setProperty(o,!1,"Erase level line")},o.prototype.createPropertiesObject=function(e,t,i){return new r(e,t,i,{range:[0,8]})},o.prototype.getStylesPropertyPage=function(){return s.LineToolPitchfanStylesPropertyPage},t.LineToolPitchfan=o},function(e,t,i){"use strict";function o(e,t){this._constructor="LineToolGannSquare";var o=t||this.createPropertiesObject("linetoolgannsquare");s.call(this,e,o),i.e(0).then(function(e){var t=i(898).GannSquarePaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var n,r,s=i(0).LineDataSource,a=i(17),l=i(1).propertyPages;inherit(o,s),o.prototype.pointsCount=function(){return 2},o.prototype.title=function(){return"Gann Box"},
n=[4.5,9,11.25,18,22.5,36,45],r=function(){for(var e=[],t=1e10,i=n.length-1,o=1,r=0,s=0;s<t;)s=n[r]*o,e.push(Math.round(s)),e.push(Math.ceil(-s)),r===i-1&&(o*=10),r=(r+1)%i;return e.sort(function(e,t){return e<t?-1:e>t?1:0}),e}(),o.prototype._alignPriceOnPattern=function(e,t){var i,o,r,s,a,l,c=Math.round(1e6*(e.price-t.price))/1e6;if(0===c)return t.price;for(i=n[0],o=n[n.length-1],r=1,s=Math.abs(c);s<i*r||o*r<s;)s<i*r?r*=.1:o*r<s&&(r*=10);for(a=o*r,l=n.length-2;l>=0&&!(n[l]*r<s);--l)a=n[l]*r;return e.price=t.price+(c>=0?a:-a),e},o.prototype._alignTimeOnPattern=function(e,t){var i,o=e.index-t.index;if(0===o)return 0;for(i=r.length-2;i>=0&&!(r[i]<o);--i);return i+=o>0?1:0,e.index=t.index+r[i],e},o.prototype._alignPointsFixedIncrement=function(e,t){return this._alignTimeOnPattern(e,t),this._alignPriceOnPattern(e,t),e},o.prototype._preparePoint=function(e,t){return t&&t.shift&&0!==this._points.length&&this._alignPointsFixedIncrement(e,this._points[0]),s.prototype._preparePoint.call(this,e,t)},o.prototype.setPoint=function(e,t,i){if(i&&i.shift){var o=0===e?this._points[1]:this._points[0];this._alignPointsFixedIncrement(t,o)}s.prototype.setPoint.call(this,e,t,i)},o.prototype.createPropertiesObject=function(e,t,i){return new a(e,t,i,{range:[1,7],prefixes:["h","v"],names:["coeff","color","visible"]})},o.prototype.getStylesPropertyPage=function(){return l.LineToolGannSquareStylesPropertyPage},t.LineToolGannSquare=o},function(e,t,i){"use strict";function o(e,t){this._constructor="LineToolFibSpeedResistanceFan";var o=t||this.createPropertiesObject("linetoolfibspeedresistancefan");n.call(this,e,o),i.e(0).then(function(e){var t=i(899).FibSpeedResistanceFanPaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var n=i(0).LineDataSource,r=i(17),s=i(1).propertyPages;inherit(o,n),o.prototype.pointsCount=function(){return 2},o.prototype.title=function(){return"Fib Speed Resistance Fan"},o.prototype.processErase=function(e,t){var i="h"===t.type?"hlevel"+t.index:"vlevel"+t.index,o=this.properties()[i].visible;e.setProperty(o,!1,"Erase level line")},o.prototype.createPropertiesObject=function(e,t,i){return new r(e,t,i,{range:[1,7],prefixes:["h","v"],names:["coeff","color","visible"]})},o.prototype.getStylesPropertyPage=function(){return s.LineToolFibSpeedResistanceFanStylesPropertyPage},t.LineToolFibSpeedResistanceFan=o},function(e,t,i){"use strict";var o,n,r,s,a,l,c,h,u;Object.defineProperty(t,"__esModule",{value:!0}),i.d(t,"LineToolGannComplex",function(){return u}),o=i(3),n=i(6),i.n(n),r=i(7),i.n(r),s=i(197),a=i(0),i.n(a),l=i(120),c=i(1),i.n(c),h=i(273),u=function(e){function t(t,o){var n,r=e.call(this,t,null==o?Object(h.a)("linetoolganncomplex"):o)||this;return r.version=2,r._constructor="LineToolGannComplex",r._scaleRatioFormatter=new s.LimitedPrecisionNumericFormatter(7),i.e(0).then(function(e){var t=i(900).GannComplexPaneView;r._setPaneViews([new t(r,r.model())])}.bind(null,i)).catch(i.oe),n=r.properties(),r._adjustScaleRatio(n),n.subscribe(r,r._adjustScaleRatio),
n.scaleRatio.subscribe(r,r._correctFirstPoint),r._syncStateExclusions=["scaleRatio"],n.addExclusion("scaleRatio"),r._onRestoringFactoryDefaults.subscribe(r,r._handleRestoringFactoryDefaults),r._onTemplateApplying.subscribe(r,r._handleTemplateApplying),r._onTemplateApplied.subscribe(r,r._correctFirstPoint),r}return o.c(t,e),t.prototype.migrateVersion=function(e,t,i){var o=this;1===e&&(this._points.length>=this.pointsCount()?setTimeout(function(){return o._migratePoint()}):this._timePoint.length>=this.pointsCount()&&this._pointAdded.subscribe(this,this._migratePoint))},t.prototype.destroy=function(){var e=this.properties();e.unsubscribe(this,this._adjustScaleRatio),e.scaleRatio.unsubscribe(this,this._correctFirstPoint),this._onRestoringFactoryDefaults.unsubscribe(this,this._handleRestoringFactoryDefaults),this._onTemplateApplying.unsubscribe(this,this._handleTemplateApplying),this._onTemplateApplied.unsubscribe(this,this._correctFirstPoint)},t.prototype.pointsCount=function(){return 2},t.prototype.title=function(){return"Gann Square"},t.prototype.addPoint=function(t,i,o){var n,s,a;return this._points.length>1&&this._points.pop(),n=e.prototype.addPoint.call(this,t,i,o),s=this.priceScale(),a=Object(r.ensureNotNull)(s).isLog(),!a&&n&&this._correctFirstPoint(),n},t.prototype.setPoint=function(t,i,o){e.prototype.setPoint.call(this,t,i,o),void 0!==o&&o.shift?this._correctPoint(t):this._correctScaleRatio()},t.prototype.setLastPoint=function(t,i){var o=this.priceScale();Object(r.ensureNotNull)(o).isLog()||(this._points[1]=t,this._correctPoint(1)),e.prototype.setLastPoint.call(this,t,i)},t.prototype.createPropertiesObject=function(e,t,i){return Object(h.a)(e,t,i)},t.prototype.getStylesPropertyPage=function(){return c.propertyPages.LineToolGannComplexStylesPropertyPage},t.prototype.isReversed=function(){return this.properties().reverse.value()},t.prototype.levelsCount=function(){return this.properties().levels.childCount()},t.prototype.levels=function(){var e,t,i=[],o=this.properties(),n=o.levels.childCount();for(e=0;e<n;e++)t=o.levels[e],i.push({index:e,visible:t.visible.value(),color:t.color.value(),width:t.width.value()});return i},t.prototype.fanLinesCount=function(){return this.properties().fanlines.childCount()},t.prototype.fanLines=function(){var e,t,i=[],o=this.properties(),n=o.fanlines.childCount();for(e=0;e<n;e++)t=o.fanlines[e],i.push({index:e,visible:t.visible.value(),x:t.x.value(),y:t.y.value(),color:t.color.value(),width:t.width.value()});return i},t.prototype.arcsCount=function(){return this.properties().arcs.childCount()},t.prototype.arcs=function(){var e,t,i=[],o=this.properties(),n=o.arcs.childCount();for(e=0;e<n;e++)t=o.arcs[e],i.push({index:e,visible:t.visible.value(),x:t.x.value(),y:t.y.value(),color:t.color.value(),width:t.width.value()});return i},t.prototype.arcsBackgroundTransparency=function(){return this.properties().arcsBackground.transparency.value()},t.prototype.isArcsBackgroundFilled=function(){return this.properties().arcsBackground.fillBackground.value()},t.prototype.isLabelsVisible=function(){
return this.properties().showLabels.value()},t.prototype.getLabelsStyle=function(){var e=this.properties(),t=e.labelsStyle,i=t.font,o=t.fontSize,n=t.bold,r=t.italic,s=e.levels.childCount();return{textColor:e.levels[s-1].color.value(),font:i.value(),fontSize:o.value(),bold:n.value(),italic:r.value()}},t.prototype.getScaleRatioStep=function(){return 1e-7},t.prototype.getScaleRatioFormatter=function(){return this._scaleRatioFormatter},t.prototype.getPriceDiff=function(){var e,t,i=this.points();return i.length<2?null:(e=i[0],t=i[1],t.price-e.price)},t.prototype.getIndexDiff=function(){var e,t,i=this.points();return i.length<2?null:(e=i[0],t=i[1],t.index-e.index)},t.prototype.getScaleRatio=function(){var e=this.getPriceDiff(),t=this.getIndexDiff();return null!==e&&null!==t&&0!==t?Math.abs(e/t):null},t.prototype._correctScaleRatio=function(){var e=this.properties(),t=this.getScaleRatio();e.scaleRatio.setValue(t)},t.prototype._getAdjustedScaleRatio=function(){var e=this.model().mainSeries().priceScale(),t=this.model().timeScale();return Object(l.scaleRatio)(t,e)},t.prototype._adjustScaleRatio=function(e){var t=e.scaleRatio.value();""!==t&&null!==t||e.scaleRatio.setValue(this._getAdjustedScaleRatio())},t.prototype._correctPoint=function(e){var t,i,o,n,r,s,a,l;this._points.length<2||null!==(t=this.getIndexDiff())&&(i=this.properties(),o=i.scaleRatio.value(),null!==o&&(n=this._points[e],r=0===e?this._points[1]:this._points[0],s=n.price-r.price>0,a=n.index-r.index>0,l=s&&!a||!s&&a?-1:1,0===e&&(l=-l),n.price=r.price+l*t*o,this._pointChanged.fire(e)),this.normalizePoints())},t.prototype._correctFirstPoint=function(){this._correctPoint(this.isReversed()?0:1)},t.prototype._handleRestoringFactoryDefaults=function(){this.properties().scaleRatio.setValue(this._getAdjustedScaleRatio())},t.prototype._handleTemplateApplying=function(e){""===e.scaleRatio&&(e.scaleRatio=this._getAdjustedScaleRatio())},t.prototype._migratePoint=function(){var e,t;this.points().length<this.pointsCount()||null!==(e=this._getScreenPoints())&&(t=this.screenPointToPoint(e[1]),this.setPoint(1,t),this._pointAdded.unsubscribe(this,this._migratePoint))},t.prototype._getScreenPoints=function(){var e,t,i,o,r,s,a,l,c,h,u,d=this._calcAngle();return null===d?null:(t=this.points(),i=t[0],o=t[1],this.isReversed()&&(e=[o,i],i=e[0],o=e[1]),r=this.pointToScreenPoint(i)[0],s=this.pointToScreenPoint(o)[0],a=Math.sqrt(Math.pow(r.x-s.x,2)+Math.pow(r.y-s.y,2)),l=new n.Point(Math.cos(d),-Math.sin(d)),c=l.normalized(),h=c.x<0?-1:1,u=c.y<0?-1:1,[r.addScaled(l,a),r.add(new n.Point(5*a*h,5*a*u))])},t.prototype._calcAngle=function(){var e,t=this.points(),i=t[0],o=t[1],n=this.pointToScreenPoint(i)[0],r=this.pointToScreenPoint(o)[0],s=r.subtract(n);return s.length()>0?(s=s.normalized(),e=Math.acos(s.x),s.y>0&&(e=-e),e):null},t}(a.LineDataSource),u.prototype.superclass=a.LineDataSource},function(e,t,i){"use strict";var o,n,r,s,a,l;Object.defineProperty(t,"__esModule",{value:!0}),i.d(t,"LineToolGannFixed",function(){return l}),o=i(3),n=i(6),i.n(n),r=i(0),i.n(r),s=i(273),a=i(1),i.n(a),
l=function(e){function t(t,o){var n=e.call(this,t,null==o?Object(s.a)("linetoolgannfixed"):o)||this;return n._constructor="LineToolGannFixed",i.e(0).then(function(e){var t=i(901).GannFixedPaneView;n._setPaneViews([new t(n,n.model())])}.bind(null,i)).catch(i.oe),n.properties().reverse.subscribe(n,n._reversePoints),n}return o.c(t,e),t.prototype.pointsCount=function(){return 2},t.prototype.title=function(){return"Gann Square Fixed"},t.prototype.createPropertiesObject=function(e,t,i){return Object(s.a)(e,t,i)},t.prototype.getStylesPropertyPage=function(){return a.propertyPages.LineToolGannFixedStylesPropertyPage},t.prototype.axisPoints=function(){var e=this.points(),t=this.getScreenPoints();return e.length<2||t.length<2?[]:[e[0],this.screenPointToPoint(t[1])]},t.prototype.getScreenPoints=function(){var e,t,i,o,r,s,a,l,c,h,u=this.points();return u.length<2?[]:null===(e=this._calcAngle())?[]:(t=u[0],i=u[1],o=this.pointToScreenPoint(t)[0],r=this.pointToScreenPoint(i)[0],s=Math.sqrt(Math.pow(o.x-r.x,2)+Math.pow(o.y-r.y,2)),a=new n.Point(Math.cos(e),-Math.sin(e)),l=a.normalized(),c=l.x<0?-1:1,h=l.y<0?-1:1,[o.addScaled(a,s),o.add(new n.Point(5*s*c,5*s*h))])},t.prototype.levelsCount=function(){return this.properties().levels.childCount()},t.prototype.levels=function(){var e,t,i=[],o=this.properties(),n=o.levels.childCount();for(e=0;e<n;e++)t=o.levels[e],i.push({index:e,visible:t.visible.value(),color:t.color.value(),width:t.width.value()});return i},t.prototype.fanLinesCount=function(){return this.properties().fanlines.childCount()},t.prototype.fanLines=function(){var e,t,i=[],o=this.properties(),n=o.fanlines.childCount();for(e=0;e<n;e++)t=o.fanlines[e],i.push({index:e,visible:t.visible.value(),x:t.x.value(),y:t.y.value(),color:t.color.value(),width:t.width.value()});return i},t.prototype.arcsCount=function(){return this.properties().arcs.childCount()},t.prototype.arcs=function(){var e,t,i=[],o=this.properties(),n=o.arcs.childCount();for(e=0;e<n;e++)t=o.arcs[e],i.push({index:e,visible:t.visible.value(),x:t.x.value(),y:t.y.value(),color:t.color.value(),width:t.width.value()});return i},t.prototype.arcsBackgroundTransparency=function(){return this.properties().arcsBackground.transparency.value()},t.prototype.isArcsBackgroundFilled=function(){return this.properties().arcsBackground.fillBackground.value()},t.prototype._calcAngle=function(){var e,t,i,o,n,r,s=this.points();return s.length<2?null:(e=s[0],t=s[1],i=this.pointToScreenPoint(e)[0],o=this.pointToScreenPoint(t)[0],n=o.subtract(i),n.length()<=0?null:(n=n.normalized(),r=Math.acos(n.x),n.y>0&&(r=-r),r))},t.prototype._reversePoints=function(){var e=this._points,t=e[0],i=e[1];this._points[0]=i,this._points[1]=t,this.normalizePoints(),this.restart()},t}(r.LineDataSource),l.prototype.superclass=r.LineDataSource},function(e,t,i){"use strict";function o(e,t){this._constructor="LineToolGannFan";var o=t||this.createPropertiesObject("linetoolgannfan");n.call(this,e,o),i.e(0).then(function(e){var t=i(902).GannFanPaneView;this._setPaneViews([new t(this,this._model)])
}.bind(this).bind(null,i)).catch(i.oe)}var n=i(0).LineDataSource,r=i(17),s=i(1).propertyPages;inherit(o,n),o.prototype.pointsCount=function(){return 2},o.prototype.title=function(){return"Gann Fan"},o.prototype.processErase=function(e,t){var i="level"+t,o=this.properties()[i].visible;e.setProperty(o,!1,"Erase level line")},o.prototype.createPropertiesObject=function(e,t,i){return new r(e,t,i,{range:[1,9]})},o.prototype.getStylesPropertyPage=function(){return s.LineToolGannFanStylesPropertyPage},t.LineToolGannFan=o},function(e,t,i){"use strict";function o(e,t){this._constructor="LineToolDisjointAngle";var s=t||new r("linetooldisjointangle");n.call(this,e,s),this.version=o.version,i.e(0).then(function(e){var t=i(904).DisjointAnglePaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var n=i(0).LineDataSource,r=i(2).DefaultProperty,s=i(1).propertyPages;inherit(o,n),o.version=1,o.prototype.pointsCount=function(){return 3},o.prototype.title=function(){return"Disjoint Angle"},o.prototype.addPoint=function(e,t){return t&&t.shift&&2===this.points().length&&this._snapPoint45Degree(e,this.points()[this.points().length-2]),n.prototype.addPoint.call(this,e)},o.prototype.setLastPoint=function(e,t){return t&&t.shift&&2===this.points().length&&this._snapPoint45Degree(e,this.points()[this.points().length-2]),n.prototype.setLastPoint.call(this,e)},o.prototype.setPoint=function(e,t,i){var o,r,s,a=.5*(this._points[1].price+this._points[2].price);i&&i.shift&&1===e&&(o=0,this._snapPoint45Degree(t,this.points()[o])),e<3&&n.prototype.setPoint.call(this,e,t),0!==e&&2!==e&&(1===e?(r=this._points[1].price-a,this._points[2].price=this._points[1].price-2*r):3===e&&(s=t.price,r=s-this._points[2].price,this._points[0].price=this._points[1].price-r,this._points[0].index=t.index))},o.prototype.canHasAlert=function(){return!0},o.prototype._getAlertPlots=function(){var e,t,i,o,n,r,s,a,l,c=this._points[0],h=this._points[1],u=[];return c.index<=h.index?(u.push(c),u.push(h)):(u.push(h),u.push(c)),e=this._points[2],e.time=h.time,e.index=h.index,t={price:e.price+(h.price-c.price),time:c.time,index:c.index},i=[],e.index<=t.index?(i.push(e),i.push(t)):(i.push(t),i.push(e)),u[0].price>i[0].price?(o=u,n=i):i[0].price>u[0].price?(o=i,n=u):i[1].price>u[1].price?(o=i,n=u):(o=u,n=i),a=this.properties().extendLeft.value(),l=this.properties().extendRight.value(),c.index<=h.index?(r=a,s=l):(r=l,s=a),[this._linePointsToAlertPlot(o,"Upper",r,s),this._linePointsToAlertPlot(n,"Lower",r,s)]},o.prototype.getInputsPropertyPage=function(){return null},o.prototype.getStylesPropertyPage=function(){return s.LineToolDisjointAngleStylesPropertyPage},t.LineToolDisjointAngle=o},function(e,t,i){"use strict";function o(e,t){this._constructor="LineToolFlatBottom";var s=t||new r("linetoolflatbottom");n.call(this,e,s),this.version=o.version,i.e(0).then(function(e){var t=i(905).FlatBottomPaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var n=i(0).LineDataSource,r=i(2).DefaultProperty,s=i(1).propertyPages
;inherit(o,n),o.version=1,o.prototype.pointsCount=function(){return 3},o.prototype.title=function(){return"Flat Bottom"},o.prototype.addPoint=function(e,t){return t&&t.shift&&2===this.points().length&&this._snapPoint45Degree(e,this.points()[this.points().length-2]),n.prototype.addPoint.call(this,e)},o.prototype.setLastPoint=function(e,t){return t&&t.shift&&2===this.points().length&&this._snapPoint45Degree(e,this.points()[this.points().length-2]),n.prototype.setLastPoint.call(this,e)},o.prototype.setPoint=function(e,t,i){if(i&&i.shift&&1===e){this._snapPoint45Degree(t,this.points()[0])}e<3?n.prototype.setPoint.call(this,e,t):this._points[0].index=t.index},o.prototype.canHasAlert=function(){return!0},o.prototype._getAlertPlots=function(){var e,t,i,o,n,r,s,a,l,c=this._points[0],h=this._points[1],u=[];return c.index<=h.index?(u.push(c),u.push(h)):(u.push(h),u.push(c)),e=this._points[2],e.time=h.time,e.index=h.index,t={price:e.price,time:c.time,index:c.index},i=[],e.index<=t.index?(i.push(e),i.push(t)):(i.push(t),i.push(e)),u[0].price>i[0].price?(o=u,n=i):i[0].price>u[0].price?(o=i,n=u):i[1].price>u[1].price?(o=i,n=u):(o=u,n=i),a=this.properties().extendLeft.value(),l=this.properties().extendRight.value(),c.index<=h.index?(r=a,s=l):(r=l,s=a),[this._linePointsToAlertPlot(o,"Upper",r,s),this._linePointsToAlertPlot(n,"Lower",a,s)]},o.prototype.getInputsPropertyPage=function(){return null},o.prototype.getStylesPropertyPage=function(){return s.LineToolFlatBottomStylesPropertyPage},t.LineToolFlatBottom=o},function(e,t,i){"use strict";function o(e,t){this._constructor="LineToolIcon";var s=t||new r("linetoolicon");s.addExclusion("angle"),s.addExclusion("scale"),n.call(this,e,s),this.version=o.version,i.e(0).then(function(e){var t=i(906).IconPaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var n=i(0).LineDataSource,r=i(2).DefaultProperty,s=i(1).propertyPages;inherit(o,n),o.version=1,o.anchorLimit=80,o.prototype.getAnchorLimit=function(){return o.anchorLimit},o.prototype.pointsCount=function(){return 1},o.prototype.title=function(){return"Icon"},o.prototype.startChanging=function(e,t){var i,r;n.prototype.startChanging.call(this,e,t),i=this.properties(),r=65536*i.icon.value()+i.size.value(),this._startChangeWidth=this._paneViews[0]._cache[r],i.size.value()<o.anchorLimit?this._sizeScale=i.size.value()/o.anchorLimit:this._sizeScale=1,this._origScale=i.scale.value(),this._startChangeWidth*this._origScale<o.anchorLimit?this._resizeRatio=this._startChangeWidth/o.anchorLimit:this._resizeRatio=1},o.prototype.endChanging=function(){n.prototype.endChanging.call(this),delete this._startChangeWidth,delete this._sizeScale,delete this._resizeRatio},o.prototype.setPoint=function(e,t,i){var n,r,s,a,l,c,h,u,d,p=$.extend({},t);i&&i.shift&&this._properties.snapTo45Degrees&&this._snapPoint45Degree(p,this.points()[0]),n=this.pointToScreenPoint(this.points()[0])[1],r=this.pointToScreenPoint(p)[1],0===e||1===e?(s=r.subtract(n).normalized(),a=2*r.subtract(n).length(),a*=this._sizeScale,
this._properties.size.setValue(a),l=-s.x,c=Math.acos(l),Math.asin(s.y)>0&&(c=2*Math.PI-c),0===e&&(c+=Math.PI),this._properties.angle.setValue(c)):(h=this._startChangeWidth,u=r.subtract(n).length(),this._origScale*h<o.anchorLimit?(d=o.anchorLimit/2,this._properties.scale.setValue(this._origScale*u/d)):(d=h/2,this._properties.scale.setValue(u/d)))},o.prototype.getInputsPropertyPage=function(){return null},o.prototype.getStylesPropertyPage=function(){return s.LineToolIconStylesPropertyPage},o.prototype.getSourceIcon=function(){return{type:"text",text:String.fromCharCode(this.properties().icon.value())}},t.LineToolIcon=o},function(e,t,i){"use strict";function o(e,t){this._constructor="LineToolRotatedRectangle";var o=t||new a("linetoolrotatedrectangle");s.call(this,e,o),i.e(0).then(function(e){var t=i(907).RotatedRectanglePaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var n=i(6).Point,r=i(31).distanceToLine,s=i(0).LineDataSource,a=i(2).DefaultProperty,l=i(1).propertyPages;inherit(o,s),o.prototype.startChanging=function(e,t){var i,o,n,a;s.prototype.startChanging.call(this,e,t),0!==e&&1!==e||(i=this._paneViews[0],o=i._points[0],n=i._points[1],a=i._points[2],this._distance=r(o,n,a).distance)},o.prototype.setPoint=function(e,t,i){var o,r,a,l,c,h,u;s.prototype.setPoint.call(this,e,t,i),0!==e&&1!==e||(o=this._paneViews[0],o.update(),r=o._points[0],a=o._points[1],l=a.subtract(r),c=new n(l.y,-l.x).normalized().scaled(this._distance),h=r.add(c),u=this.screenPointToPoint(h),this._points[2]=u)},o.prototype.endChanging=function(){delete this._distance},o.prototype.pointsCount=function(){return 3},o.prototype.title=function(){return"Rotated Rectangle"},o.prototype.getInputsPropertyPage=function(){return null},o.prototype.getStylesPropertyPage=function(){return l.LineToolRectangleStylesPropertyPage},t.LineToolRotatedRectangle=o},function(e,t,i){"use strict";function o(e,t){this._constructor="LineToolFibSpiral";var o=t||new r("linetoolfibspiral");n.call(this,e,o),i.e(0).then(function(e){var t=i(908).FibSpiralPaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var n=i(0).LineDataSource,r=i(2).DefaultProperty,s=i(1).propertyPages;inherit(o,n),o.prototype.pointsCount=function(){return 2},o.prototype.title=function(){return"Fib Spiral"},o.prototype.getStylesPropertyPage=function(){return s.LineToolFibSpiralStylesPropertyPage},t.LineToolFibSpiral=o},function(e,t,i){"use strict";function o(e,t){this._constructor="LineToolHeadAndShoulders";var o=t||new r("linetoolheadandshoulders");n.call(this,e,o),i.e(0).then(function(e){var t=i(909).LineToolHeadAndShouldersPaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var n=i(0).LineDataSource,r=i(2).DefaultProperty,s=i(1).propertyPages;inherit(o,n),o.prototype.pointsCount=function(){return 7},o.prototype.title=function(){return"Head and Shoulders"},o.prototype.getStylesPropertyPage=function(){return s.LineToolLineTool5PointsPatternStylesPropertyPage},
t.LineToolHeadAndShoulders=o},function(e,t,i){"use strict";function o(e,t){this._constructor="LineToolTriangle";var o=t||new r("linetooltriangle");n.call(this,e,o),i.e(0).then(function(e){var t=i(910).TrianglePaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var n=i(0).LineDataSource,r=i(2).DefaultProperty,s=i(1).propertyPages;inherit(o,n),o.prototype.pointsCount=function(){return 3},o.prototype.title=function(){return"Triangle"},o.prototype.getStylesPropertyPage=function(){return s.LineToolTriangleStylesPropertyPage},t.LineToolTriangle=o},function(e,t,i){"use strict";function o(e,t){this._constructor="LineToolTrianglePattern";var o=t||new r("linetooltrianglepattern");n.call(this,e,o),i.e(0).then(function(e){var t=i(911).LineToolTrianglePatternPaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var n=i(0).LineDataSource,r=i(2).DefaultProperty,s=i(1).propertyPages;inherit(o,n),o.prototype.pointsCount=function(){return 4},o.prototype.title=function(){return"Triangle Pattern"},o.prototype.getStylesPropertyPage=function(){return s.LineToolTrianglePatternStylesPropertyPage},t.LineToolTrianglePattern=o},function(e,t,i){"use strict";function o(e,t){this._constructor="LineToolThreeDrivers";var o=t||new r("linetoolthreedrivers");n.call(this,e,o),i.e(0).then(function(e){var t=i(912).LineToolThreeDrivesPaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var n=i(0).LineDataSource,r=i(2).DefaultProperty,s=i(1).propertyPages;inherit(o,n),o.prototype.pointsCount=function(){return 7},o.prototype.title=function(){return"Three Drives Pattern"},o.prototype.getStylesPropertyPage=function(){return s.LineToolABCDPatternStylesPropertyPage},t.LineToolThreeDrivers=o},function(e,t,i){"use strict";function o(e,t){this._constructor="LineToolABCD";var o=t||new r("linetoolabcd");n.call(this,e,o),i.e(0).then(function(e){var t=i(913).ABCDPaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var n=i(0).LineDataSource,r=i(2).DefaultProperty,s=i(275).DateTimeFormatter,a=i(1).propertyPages;inherit(o,n),o.prototype.pointsCount=function(){return 4},o.prototype.title=function(){return"ABCD Pattern"},o.prototype._tooltipFieldsHash={time0:{title:"Date 1",value:null},price0:{title:"Price 1",value:null},time1:{title:"Date 2",value:null},price1:{title:"Price 2",value:null},time2:{title:"Date 3",value:null},price2:{title:"Price 3",value:null},time3:{title:"Date 4",value:null},price3:{title:"Price 4",value:null}},o.prototype._updateTooltip=function(){var e,t,i,o,n=this._tooltipFieldsHash,r=this.points().m_values;r[0]&&(e=this._model.timeScale().indexToUserTime(r[0].index),n.time0.value=e?new s(this._model.mainSeries().isDWM()).format(e):0,n.price0.value=this._model.mainSeries()._formatter.format(r[0].price)),r[1]&&(t=this._model.timeScale().indexToUserTime(r[1].index),n.time1.value=t?new s(this._model.mainSeries().isDWM()).format(t):0,
n.price1.value=this._model.mainSeries()._formatter.format(r[1].price)),r[2]&&(i=this._model.timeScale().indexToUserTime(r[2].index),n.time2.value=i?new s(this._model.mainSeries().isDWM()).format(i):0,n.price2.value=this._model.mainSeries()._formatter.format(r[2].price)),r[3]&&(o=this._model.timeScale().indexToUserTime(r[3].index),n.time3.value=o?new s(this._model.mainSeries().isDWM()).format(o):0,n.price3.value=this._model.mainSeries()._formatter.format(r[3].price))},o.prototype.tooltip=function(){return this._updateTooltip(),this._formatTooltip()},o.prototype.getStylesPropertyPage=function(){return a.LineToolABCDPatternStylesPropertyPage},t.LineToolABCD=o},function(e,t,i){"use strict";var o,n,r;Object.defineProperty(t,"__esModule",{value:!0}),i.d(t,"LineToolRiskRewardPriceAxisView",function(){return r}),o=i(3),n=i(59),r=function(e){function t(t,i){var o=e.call(this)||this;return o._source=t,o._data=i,o}return o.c(t,e),t.prototype._updateRendererData=function(e){var t,i,o,n,r;e.visible=!1,t=this._source.priceScale(),0===this._source.points().length||null===t||t.isEmpty()||(i=this._source.ownerSource(),null!=(o=null!==i?i.firstValue():null)&&(n=this._data.priceProperty.value(),r=this._data.colorProperty.value(),e.background=r,e.color=this.generateTextColor(r),e.coordinate=t.priceToCoordinate(n,o),e.text=t.formatPrice(n,o),e.visible=!0))},t}(n.a)},function(e,t,i){"use strict";function o(e,t){this._constructor="LineToolPolyline";var o;t?o=t:(o=new s("linetoolpolyline"),o.filled.setValue(!1)),r.call(this,e,o),o.addExclusion("filled"),i.e(0).then(function(e){var t=i(915).PolylinePaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var n=i(6).Point,r=i(0).LineDataSource,s=i(2).DefaultProperty,a=i(1).propertyPages;inherit(o,r),o.prototype.pointsCount=function(){return-1},o.prototype.title=function(){return"Polyline"},o.prototype.addPoint=function(e){var t,i,o,s,a,l,c,h,u=this._model.timeScale().indexToCoordinate(e.index),d=e.price,p=this.ownerSource().firstValue(),_=this.priceScale().priceToCoordinate(d,p),f=5;if(this._points.length>0){if(t=this._points[this._points.length-1],i=this._model.timeScale().indexToCoordinate(t.index),o=t.price,s=this.priceScale().priceToCoordinate(o,p),new n(u,_).subtract(new n(i,s)).length()<f)return this._lastPoint=null,this.normalizePoints(),this.createServerPoints(),!0;if(a=this._points[0],l=this._model.timeScale().indexToCoordinate(a.index),c=a.price,h=this.priceScale().priceToCoordinate(c,p),new n(u,_).subtract(new n(l,h)).length()<f)return this._properties.filled.setValue(!0),this._lastPoint=null,this.normalizePoints(),this.createServerPoints(),!0}return r.prototype.addPoint.call(this,e)},o.prototype.setPoint=function(e,t){var i,o,s,a,l,c,h;r.prototype.setPoint.call(this,e,t),this._model.timeScale().isEmpty()||this.priceScale().isEmpty()||e!==this._points.length-1&&0!==e||(i=5,o=this.ownerSource().firstValue(),s=this._model.timeScale().indexToCoordinate(t.index),a=this.priceScale().priceToCoordinate(t.price,o),
l=e===this._points.length-1?this._points[0]:this._points[this._points.length-1],c=this._model.timeScale().indexToCoordinate(l.index),h=this.priceScale().priceToCoordinate(l.price,o),new n(s,a).subtract(new n(c,h)).length()<i&&this._properties.filled.setValue(!0))},o.prototype.getInputsPropertyPage=function(){return null},o.prototype.getStylesPropertyPage=function(){return a.LineToolPolylineStylesPropertyPage},t.LineToolPolyline=o},function(e,t,i){"use strict";function o(e,t){this._constructor="LineToolPrediction";var o=t||new s("linetoolprediction");o.merge({status:l.AlertStatus.Waiting}),r.call(this,e,o),i.e(0).then(function(e){var t=i(916).PredictionPaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var n=i(7).ensureNotNull,r=i(0).LineDataSource,s=i(2).DefaultProperty,a=i(1).propertyPages,l=i(354);inherit(o,r),o.prototype.status=function(){return this._properties.status.value()},o.prototype.setStatus=function(e){return this._properties.status.setValue(e)},o.prototype.pointsCount=function(){return 2},o.prototype.title=function(){return"Forecast"},o.prototype.restorePoints=function(e,t,i){r.prototype.restorePoints.call(this,e,t,i),this.checkAlert()},o.prototype.checkAlert=function(){var e,t,i,o;if(!(this._points.length<2||this._model.mainSeries().bars().isEmpty())){if(e=this._points[1],this.status())return void(e.index>this._model.timeScale().baseIndex()&&this.setStatus(l.AlertStatus.Waiting));t=this._model.mainSeries().bars().valueAt(e.index),null!==t&&(i=this.direction(),i===l.Direction.Up&&t[TradingView.HIGH_PLOT]>=e.price?this.setStatus(l.AlertStatus.Success):i===l.Direction.Down&&t[TradingView.LOW_PLOT]<=e.price?this.setStatus(l.AlertStatus.Success):(o=n(this._model.mainSeries().bars().lastIndex()),e.index!==o&&this.setStatus(l.AlertStatus.Failure)))}},o.prototype.addPoint=function(e){var t=r.prototype.addPoint.call(this,e);return t&&this.checkAlert(),t},o.prototype.endChanging=function(){r.prototype.endChanging.call(this),this.setStatus(l.AlertStatus.Waiting),this.checkAlert()},o.prototype.onData=function(e){r.prototype.onData.call(this,e),this.checkAlert()},o.prototype.endMoving=function(){r.prototype.endMoving.call(this),this.setStatus(l.AlertStatus.Waiting),this.checkAlert()},o.prototype.direction=function(){var e,t;return this.points().length<2?l.Direction.Up:(e=this.points()[0],t=this.points()[1],t.price>e.price?l.Direction.Up:l.Direction.Down)},o.prototype.getStylesPropertyPage=function(){return a.LineToolPredictionStylesPropertyPage},t.LineToolPrediction=o},function(e,t,i){"use strict";function o(e,t){this._constructor="LineToolPriceLabel";var o=t||new r("linetoolpricelabel");n.call(this,e,o),i.e(0).then(function(e){var t=i(917).PriceLabelPaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var n=i(0).LineDataSource,r=i(2).DefaultProperty,s=i(1).propertyPages;inherit(o,n),o.prototype.pointsCount=function(){return 1},o.prototype.title=function(){return"Price Label"},o.prototype.getStylesPropertyPage=function(){
return s.LineToolPriceLabelStylesPropertyPage},t.LineToolPriceLabel=o},function(e,t,i){"use strict";function o(e,t){this._constructor="LineToolBrush";var o=t||new r("linetoolbrush");n.call(this,e,o),this._finished=!1,i.e(0).then(function(e){var t=i(919).BrushPaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var n=i(0).LineDataSource,r=i(2).DefaultProperty,s=i(1).propertyPages;inherit(o,n),o.prototype.pointsCount=function(){return-1},o.prototype.finished=function(){return this._finished},o.prototype.finish=function(){this._finished=!0,this._lastPoint=null,this.normalizePoints(),this.createServerPoints()},o.prototype.title=function(){return"Brush"},o.prototype.percentDistance=function(e,t){return Math.abs((t-e)/e)},o.prototype.addPoint=function(e){var t,i,o;return!!this._finished||(this._lastPoint=null,this._points.length>0&&(t=this._points[this._points.length-1],i=this.pointToScreenPoint(t)[1],o=this.pointToScreenPoint(e)[1],o.subtract(i).length()<2)?this._finished:(n.prototype.addPoint.call(this,e),this._finished))},o.prototype.restorePoints=function(e,t,i){n.prototype.restorePoints.call(this,e,t,i),this._finished=!0},o.prototype.getInputsPropertyPage=function(){return null},o.prototype.getStylesPropertyPage=function(){return s.LineToolBrushStylesPropertyPage},t.LineToolBrush=o},function(e,t,i){"use strict";function o(e,t){this._constructor="LineToolArc";var n=t||new d("linetoolarc");u.call(this,e,n),this.version=o.version,i.e(0).then(function(e){var t=i(920).ArcPaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var n=i(6).Point,r=i(31).distanceToLine,s=i(319),a=s.rotationMatrix,l=s.scalingMatrix,c=s.translationMatrix,h=s.transformPoint,u=i(0).LineDataSource,d=i(2).DefaultProperty,p=i(1).propertyPages;inherit(o,u),o.prototype.startChanging=function(e,t){var i,o,s,a,l,c,h;u.prototype.startChanging.call(this,e,t),0!==e&&1!==e||(i=this.pointToScreenPoint(this._points[0])[0],o=this.pointToScreenPoint(this._points[1])[0],s=this.pointToScreenPoint(this._points[2])[0],this._dist=r(i,o,s).distance,a=o.subtract(i),l=new n(-a.y,a.x),c=i.add(o).scaled(.5),h=s.subtract(c),h.dotProduct(l)<0&&(this._dist=-this._dist))},o.prototype.pointsCount=function(){return 3},o.prototype.title=function(){return"Arc"},o.prototype.setPoint=function(e,t){var i,o,s,u,d,p,_,f,m,g,y,v,b=$.extend({},t),S=this.pointToScreenPoint(this._points[0])[0],w=this.pointToScreenPoint(this._points[1])[0],T=this.pointToScreenPoint(this._points[2])[0];switch(e){case 0:S=this.pointToScreenPoint(b)[0],i=w.subtract(S),o=S.add(w).scaled(.5),s=new n(-i.y,i.x),s=s.normalized(),T=o.add(s.scaled(this._dist)),T=this.screenPointToPoint(T),this._points[0]=b,this._points[2]=T;break;case 1:u=r(S,w,T).distance,w=this.pointToScreenPoint(b)[0],i=w.subtract(S),o=S.add(w).scaled(.5),s=new n(-i.y,i.x),s=s.normalized(),T=o.add(s.scaled(this._dist)),T=this.screenPointToPoint(T),this._points[1]=b,this._points[2]=T;break;case 2:b=this.pointToScreenPoint(b)[0],u=r(S,w,b).distance,i=w.subtract(S),
o=S.add(w).scaled(.5),s=new n(-i.y,i.x),s=s.normalized(),T=o.add(s.scaled(u)),d=o.add(s.scaled(-u)),p=i.length(),_=i.x/p,f=i.y/p,m=Math.acos(_),f<0&&(m=-m),g=c(-o.x,-o.y),b=h(g,b),y=h(g,T),g=a(-m),b=h(g,b),y=h(g,y),g=l(1,p/(2*u)),b=h(g,b),y=h(g,y),v=b.y*y.y>=0?new n(T.x,T.y):new n(d.x,d.y),v=this.screenPointToPoint(v),this._points[2]=v}this.normalizePoints()},o.version=2,o.prototype.migrateVersion=function(e,t,i){var o,n;1===e&&2===this._points.length&&(o=(2*this._points[0].price+3*this._points[1].price)/5,this._points.append({price:o,index:this._points[1].index})),1===e&&2===this._timePoint.length&&(o=(2*this._timePoint[0].price+3*this._timePoint[1].price)/5,n={price:o,offset:this._timePoint[1].offset,time_t:this._timePoint[1].time_t},this._timePoint.append(n))},o.prototype.getInputsPropertyPage=function(){return null},o.prototype.getStylesPropertyPage=function(){return p.LineToolArcStylesPropertyPage},t.LineToolArc=o},function(e,t,i){"use strict";function o(e,t){this._constructor="LineToolCallout";var o=t||new a("linetoolcallout");o.hasChild("text")||o.addChild("text",new s($.t("Text"))),o.addExclusion("text"),n.call(this,e,o),this._barOffset=0,this._timeScale=e.timeScale(),i.e(0).then(function(e){var t=i(921).CalloutPaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var n=i(0).LineDataSource,r=i(30).DataSource,s=i(12),a=i(2).DefaultProperty,l=i(1).propertyPages,c=i(355).CalloutConsts;inherit(o,n),o.prototype.pointsCount=function(){return 2},o.prototype.title=function(){return"Callout"},o.prototype.correctPoints=function(e){var t=this._currentMovingPoint.index-this._startMovingPoint.index,i=this._currentMovingPoint.price-this._startMovingPoint.price,o=e[1];o.index+=t,o.price+=i,e[1]=o},o.prototype.addPoint=function(e){var t=n.prototype.addPoint.call(this,e);return t&&this._calculateBarOffset(),t},o.prototype._calculateBarOffset=function(){this.points().length>1&&(this._barOffset=this.points()[1].index-this.points()[0].index)},o.prototype.setLastPoint=function(e){n.prototype.setLastPoint.call(this,e),2===this.points().length&&this._calculateBarOffset()},o.prototype.setPoint=function(e,t){var i,o,r,s,a;switch(e){case 0:n.prototype.setPoint.call(this,e,t),this._calculateBarOffset();break;case 1:if(i=this.properties(),!i.wordWrapWidth)return;if(o=this._points,r=this._dragStartLeftEdgeIndex,s=Math.round((t.index-r)/2),isFinite(r)&&isFinite(s)){if(o[1]={index:r+s,price:o[1].price},this._calculateBarOffset(),this.normalizePoints(),a=this._timeScale.indexToCoordinate(r+2*s)-this._timeScale.indexToCoordinate(r)-c.RoundRadius-c.TextMargins,!isFinite(a))return;i.wordWrapWidth.setValue(Math.max(c.MinWidth,a));break}o[1]=t,this._calculateBarOffset(),this.normalizePoints()}},o.prototype.startDragPoint=function(e,t){var i=this.properties();1===e&&i.wordWrap&&i.wordWrap.value()&&(this._dragStartLeftEdgeIndex=2*this.points()[1].index-t.index)},o.prototype.move=function(e){n.prototype.move.call(this,e),this._calculateBarOffset()},o.prototype.state=function(e){
var t=n.prototype.state.call(this,e);return t.barOffset=this._barOffset,t},o.prototype.restoreData=function(e){e.barOffset?this._barOffset=e.barOffset:this._calculateBarOffset(),this._calculatePoint2()},o.prototype.setPriceScale=function(e){r.prototype.setPriceScale.call(this,e),e&&e.priceRange()&&this._calculatePoint2()},o.prototype._calculatePoint2=function(){var e,t;this._model.lineBeingEdited()!==this&&this._model.sourceBeingMoved()!==this&&(this._points.length<2||(e=this.points()[0],t=this.points()[1],this._points[1]={price:t.price,index:e.index+this._barOffset}))},o.prototype.getStylesPropertyPage=function(){return l.LineToolCalloutStylesPropertyPage},t.LineToolCallout=o},function(e,t,i){"use strict";function o(e,t){this._constructor="LineToolBalloon";var o=t||new s("linetoolballoon");o.hasChild("text")||o.addChild("text",new r($.t("Comment"))),o.addExclusion("text"),n.call(this,e,o),i.e(0).then(function(e){var t=i(922).BalloonPaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var n=i(0).LineDataSource,r=i(12),s=i(2).DefaultProperty,a=i(1).propertyPages;inherit(o,n),o.prototype.pointsCount=function(){return 1},o.prototype.title=function(){return"Balloon"},o.prototype.getStylesPropertyPage=function(){return a.LineToolBalloonStylesPropertyPage},t.LineToolBalloon=o},function(e,t,i){"use strict";function o(e,t){this._constructor="LineToolHorzLine";var o=t||new a("linetoolhorzline");o.hasChild("text")||o.addChild("text",new s("")),o.addExclusion("text"),this._priceAxisView=new r(this),n.call(this,e,o),i.e(0).then(function(e){var t=i(923).HorzLinePaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var n=i(0).LineDataSource,r=i(177).LineToolHorzLinePriceAxisView,s=i(12),a=i(2).DefaultProperty,l=i(1).propertyPages;inherit(o,n),o.prototype.state=function(e){var t=n.prototype.state.call(this,e);return t.points&&0!==t.points.length&&(t.points[0].offset=0),t},o.prototype.pointsCount=function(){return 1},o.prototype.title=function(){return"Horizontal Line"},o.prototype.priceAxisViews=function(e,t){return this.isSourceHidden()?null:t===this.priceScale()&&this.properties().showPrice.value()&&this._model.paneForSource(this)===e?[this._priceAxisView]:null},o.prototype.updateAllViews=function(){n.prototype.updateAllViews.call(this),this._priceAxisView.update()},o.prototype.canHasAlert=function(){return!0},o.prototype._getAlertPlots=function(){return[this.points()[0].price]},o.prototype.getInputsPropertyPage=function(){return l.LineToolHorzLineInputsPropertyPage},o.prototype.getStylesPropertyPage=function(){return l.LineToolHorzLineStylesPropertyPage},t.LineToolHorzLine=o},function(e,t,i){"use strict";function o(e,t){this._constructor="LineToolHorzRay";var o=t||new a("linetoolhorzray");o.hasChild("text")||o.addChild("text",new s("")),o.addExclusion("text"),this._priceAxisView=new r(this),n.call(this,e,o),i.e(0).then(function(e){var t=i(924).HorzRayPaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}
var n=i(0).LineDataSource,r=i(177).LineToolHorzLinePriceAxisView,s=i(12),a=i(2).DefaultProperty,l=i(1).propertyPages;inherit(o,n),o.prototype.pointsCount=function(){return 1},o.prototype.title=function(){return"Horizontal Ray"},o.prototype.priceAxisViews=function(e,t){return this.isSourceHidden()?null:t===this.priceScale()&&this.properties().showPrice.value()&&this._model.paneForSource(this)===e?[this._priceAxisView]:null},o.prototype.updateAllViews=function(){n.prototype.updateAllViews.call(this),this._priceAxisView.update()},o.prototype.canHasAlert=function(){return!0},o.prototype._getAlertPlots=function(){var e=this._points[0],t={index:e.index+1,price:e.price};return[this._linePointsToAlertPlot([e,t],null,!1,!0)]},o.prototype.getStylesPropertyPage=function(){return l.LineToolHorzLineStylesPropertyPage},t.LineToolHorzRay=o},function(e,t,i){"use strict";function o(e,t){this._constructor="LineToolRectangle";var o=t||new r("linetoolrectangle");n.call(this,e,o),i.e(0).then(function(e){var t=i(925).RectanglePaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var n=i(0).LineDataSource,r=i(2).DefaultProperty,s=i(1).propertyPages;inherit(o,n),o.prototype.pointsCount=function(){return 2},o.prototype.title=function(){return"Rectangle"},o.prototype.setPoint=function(e,t,i){var o,r,s;if(e<2)return void n.prototype.setPoint.call(this,e,t,i);i&&i.shift&&this._properties.snapTo45Degrees&&(o=this.points()[0],r=this.points()[1],s={price:2===e?o.price:r.price,index:2===e?r.index:o.index},this._snapPoint45Degree(t,s)),3===e?(this._points[0].price=t.price,this._points[1].index=t.index):(this._points[1].price=t.price,this._points[0].index=t.index),this.normalizePoints()},o.prototype.getStylesPropertyPage=function(){return s.LineToolRectangleStylesPropertyPage},t.LineToolRectangle=o},function(e,t,i){"use strict";function o(e,t){this._constructor="LineToolEllipse";var n=t||new a("linetoolellipse");s.call(this,e,n),this.version=o.version,i.e(0).then(function(e){var t=i(926).EllipsePaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var n=i(6).Point,r=i(31).distanceToLine,s=i(0).LineDataSource,a=i(2).DefaultProperty,l=i(1).propertyPages;inherit(o,s),o.prototype.startChanging=function(e,t){var i,o,n;s.prototype.startChanging.call(this,e,t),0!==e&&1!==e||(i=this.pointToScreenPoint(this._points[0])[0],o=this.pointToScreenPoint(this._points[1])[0],n=this.pointToScreenPoint(this._points[2])[0],this._dist=r(i,o,n).distance||0)},o.prototype._preparePoint=function(e,t){var i=this._preparePointInternal(e,t,!1);return t&&t.shift&&this._points[0].index===this._points[1].index&&this._fixVerticalDiameterPoints(this._points[1],this._points[0],i),i},o.prototype._preparePointInternal=function(e,t,i){var o,r,a,l,c,h,u,d,p,_,f=$.extend({},e);if(t&&t.shift){if(o=this.points().length,!this._fakePointAdded&&3===o&&!i)return f;(this._fakePointAdded||2===o||i)&&(this._snapPoint45Degree(e,this._points[0]),this._fakePointAdded?this._points[1]=e:i||(this._fakePointAdded=!0,
s.prototype._addPointIntenal.call(this,e)),r=this.pointToScreenPoint(this._points[0])[0],a=this.pointToScreenPoint(this._points[1])[0],l=a.x-r.x,c=a.y-r.y,h=Math.sqrt(l*l+c*c)/2,u=a.subtract(r),d=r.add(a).scaled(.5),p=new n(-u.y,u.x),p=p.normalized(),_=d.add(p.scaled(h)),f=this.screenPointToPoint(_),(TradingView.isNaN(f.price)||TradingView.isNaN(f.index))&&(f=this.screenPointToPoint(d)))}else this._fakePointAdded&&(this._points.splice(1,1),this._fakePointAdded=!1);return f},o.prototype._fixVerticalDiameterPoints=function(e,t,i){var o=this.pointToScreenPoint(e)[0],n=this.pointToScreenPoint(t)[0],r=this._model.timeScale(),s=r.indexToCoordinate(e.index),a=r.indexToCoordinate(i.index),l=2*Math.abs(s-a);l*=t.price>e.price?1:-1,e.price=this.screenPointToPoint({x:o.x,y:n.y+l}).price},o.prototype.addPoint=function(e,t,i){var o=s.prototype.addPoint.call(this,e,t,i);return o&&(this._fakePointAdded=!1),o},o.prototype.setPoint=function(e,t,i){var o,s,a,l,c=$.extend({},t),h=this.pointToScreenPoint(this._points[0])[0],u=this.pointToScreenPoint(this._points[1])[0],d=this.pointToScreenPoint(this._points[2])[0];switch(e){case 0:if(i&&i.shift){this._snapPoint45Degree(c,this._points[1]),this._points[0]=c,this._points[2]=this._preparePointInternal(this._points[2],i,!0),this._points[0].index===this._points[1].index&&this._fixVerticalDiameterPoints(this._points[0],this._points[1],this._points[2]);break}h=this.pointToScreenPoint(c)[0],o=u.subtract(h),s=h.add(u).scaled(.5),a=new n(-o.y,o.x),a=a.normalized(),d=s.add(a.scaled(this._dist)),d=this.screenPointToPoint(d),this._points[0]=c,this._points[2]=d;break;case 1:if(i&&i.shift){this._snapPoint45Degree(c,this._points[0]),this._points[1]=c,this._points[2]=this._preparePointInternal(this._points[2],i,!0),this._points[0].index===this._points[1].index&&this._fixVerticalDiameterPoints(this._points[1],this._points[0],this._points[2]);break}u=this.pointToScreenPoint(c)[0],o=u.subtract(h),s=h.add(u).scaled(.5),a=new n(-o.y,o.x),a=a.normalized(),d=s.add(a.scaled(this._dist)),d=this.screenPointToPoint(d),this._points[1]=c,this._points[2]=d;break;case 2:case 3:c=this.pointToScreenPoint(c)[0],l=r(h,u,c).distance,o=u.subtract(h),s=h.add(u).scaled(.5),a=new n(-o.y,o.x),a=a.normalized(),d=s.add(a.scaled(l)),d=this.screenPointToPoint(d),this._points[2]=d}this.normalizePoints()},o.prototype.pointsCount=function(){return 3},o.prototype.title=function(){return"Ellipse"},o.version=2,o.prototype.migrateVersion=function(e,t,i){var o,n,r;1===e&&2===this._points.length&&(o=this._points[0].price,n=.5*(this._points[0].price+this._points[1].price),this._points[0]={price:n,index:this._points[0].index},this._points[1]={price:n,index:this._points[1].index},this._points.push({price:o,index:this._points[0].index})),1===e&&2===this._timePoint.length&&(o=this._timePoint[0].price,n=.5*(this._timePoint[0].price+this._timePoint[1].price),this._timePoint[0].price=n,this._timePoint[1].price=n,r={price:o,offset:this._timePoint[0].offset,time_t:this._timePoint[0].time_t},this._timePoint.push(r))},
o.prototype.getInputsPropertyPage=function(){return null},o.prototype.getStylesPropertyPage=function(){return l.LineToolEllipseStylesPropertyPage},t.LineToolEllipse=o},function(e,t,i){"use strict";function o(e,t){this._constructor="LineToolTimeCycles";var o=t||new r("linetooltimecycles");n.call(this,e,o),i.e(0).then(function(e){var t=i(927).TimeCyclesPaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var n=i(0).LineDataSource,r=i(2).DefaultProperty,s=i(1).propertyPages;inherit(o,n),o.prototype.pointsCount=function(){return 2},o.prototype.title=function(){return"Time Cycles"},o.prototype.setPoint=function(e,t,i){var o=$.extend({},t),n=this._points[0],r=this._points[1];n.price=o.price,r.price=o.price,this._points[e]=o,this.normalizePoints()},o.prototype.addPoint=function(e,t,i){var o,r,s=n.prototype.addPoint.call(this,e,t,!0);return s&&(o=this._points[0],r=this._points[1],r.price=o.price,i||(this.normalizePoints(),this.createServerPoints())),s},o.prototype.getStylesPropertyPage=function(){return s.LineToolTimeCyclesPropertyPage},t.LineToolTimeCycles=o},function(e,t,i){"use strict";function o(e,t){this._constructor="LineToolSineLine";var o=t||new r("linetoolsineline");n.call(this,e,o),i.e(0).then(function(e){var t=i(928).SineLinePaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var n=i(0).LineDataSource,r=i(2).DefaultProperty,s=i(1).propertyPages;inherit(o,n),o.prototype.pointsCount=function(){return 2},o.prototype.title=function(){return"Sine Line"},o.prototype.getStylesPropertyPage=function(){return s.LineToolTimeCyclesPropertyPage},t.LineToolSineLine=o},function(e,t,i){"use strict";function o(e,t,i){this._source=e,this._index=t,this._bars=i||[]}function n(e,t,i){this._source=e,l.call(this,"linetoolghostfeed",t,i)}function r(e,t,o){var s,l;this._constructor="LineToolGhostFeed",t?(s=t,s._source=this):s=new n(this),o||(l=Math.round(this.calculateATR(e)),s.averageHL.setValue(l)),a.call(this,e,s),this._segments=[],s.averageHL.listeners().subscribe(this,r.prototype.regenerate),s.variance.listeners().subscribe(this,r.prototype.regenerate),s.points||s.addProperty("points"),this._currentAverageHL=this._properties.averageHL.value(),this._currentVariance=this._properties.variance.value(),this._currentInterval=e.mainSeries().interval(),i.e(0).then(function(e){var t=i(929).GhostFeedPaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var s=i(46).sign,a=i(0).LineDataSource,l=i(2).DefaultProperty,c=i(1).propertyPages;o.prototype.setBars=function(e){this._bars=e||[]},o.prototype.clone=function(e){return new o(e,this._index,TradingView.clone(this._bars))},o.prototype.createBar=function(){var e,t,i,o,n,r=this._source.properties().averageHL.value(),s=this._source.properties().variance.value()/100,a=this._source._model.mainSeries().base(),l=Math.random(),c=r*(1-2*l)*s;return l=Math.random(),e=r*(1+(.5-l)*s),t=c-e/2,i=t+e,o=t+Math.random()*e,n=t+Math.random()*e,{o:o/a,h:i/a,l:t/a,c:n/a}},
o.prototype.generate=function(){var e,t,i,o,n,r;if(this._bars=[],e=this._source.points(),t=e[this._index],i=e[this._index+1],t&&i&&t.index!==i.index)for(this._avgHL=this._source.properties().averageHL.value(),this._variance=this._source.properties().variance.value()/100,o=this._index?t.index+1:t.index,n=s(i.index-t.index),r=o;r!==i.index;r+=n)this._bars.push(this.createBar())},o.prototype.bars=function(){return this._bars},o.prototype.setSize=function(e){if(e<this._bars.length)this._bars.splice(e,this._bars.length-e);else for(;this._bars.length<e;)this._bars.push(this.createBar())},inherit(n,l),n.prototype.restoreFactoryDefaults=function(){l.prototype.restoreFactoryDefaults.call(this);var e=Math.round(this._source.calculateATR());this.averageHL.setValue(e)},inherit(r,a),r.prototype.createPropertiesObject=function(e,t,i){return new n(null,t,i)},r.prototype.regenerate=function(){this._currentAverageHL=this._properties.averageHL.value(),this._currentVariance=this._properties.variance.value(),this._segments.forEach(function(e){e.generate()}),this.updateAllViews(),this._model.updateSource(this)},r.prototype.propertiesChanged=function(){a.prototype.propertiesChanged.call(this),this._currentAverageHL===this._properties.averageHL.value()&&this._currentVariance===this._properties.variance.value()||this.regenerate()},r.prototype.pointsCount=function(){return-1},r.prototype.title=function(){return"Ghost Feed"},r.prototype.segmentBars=function(e){return this._segments[e].bars()},r.prototype.segments=function(){return this._segments},r.prototype.generateBars=function(e){this._segments.length<=e&&this._segments.push(new o(this,e)),this._segments[e].generate()},r.prototype.addPoint=function(e){var t,i,o;if(this._points.length>0&&(t=this._points[this._points.length-1],t.index===e.index)){for(this._lastPoint=null,this.normalizePoints(),this.createServerPoints(),i=0;i<this._points.length;i++)this._createPointProperty(i);return!0}return o=a.prototype.addPoint.call(this,e),this._finished&&(this._lastPoint=null),this._points.length>1&&this.generateBars(this._points.length-2),o||this._finished},r.prototype.finish=function(){this._finished=!0,this._lastPoint=null,this.normalizePoints(),this.createServerPoints()},r.prototype.setPoint=function(e,t,i){var o,n,r;a.prototype.setPoint.call(this,e,t,i),e>0&&(o=this.points()[e-1],n=t.index-o.index,this._segments[e-1].setSize(Math.abs(n))),e<this.points().length-1&&(r=this.points()[e+1],n=r.index-t.index,this._segments[e].setSize(Math.abs(n)))},r.prototype.state=function(e){var t=a.prototype.state.call(this,e);return t.segments=this._segments.map(function(e){return{bars:e.bars()}}),t},r.prototype.restoreData=function(e){var t=this;e.segments&&(this._segments=e.segments.map(function(e,i){return new o(t,i,[].concat(e.bars))})),this._currentAverageHL=this._properties.averageHL.value(),this._currentVariance=this._properties.variance.value()},r.prototype.onData=function(e){if(a.prototype.onData.call(this,e),
0===this.properties().points._childs.length)for(var t=0;t<this._points.length;t++)this._createPointProperty(t);this._currentInterval!==this._model.mainSeries().interval()&&(this.regenerate(),this._currentInterval=this._model.mainSeries().interval())},r.prototype.cloneData=function(e){var t=this;this._segments=e._segments.map(function(e){return e.clone(t)})},r.prototype.calculateATR=function(e){var t,i=(void 0!==e?e:this._model).mainSeries(),o=[];return i.bars().each(function(e,t){o.push(t[TradingView.HIGH_PLOT]-t[TradingView.LOW_PLOT])}),t=0===o.length?0:o.reduce(function(e,t){return e+t},0)/o.length,t*=i.base()},r.prototype.getInputsPropertyPage=function(){return c.LineToolGhostFeedInputsPropertyPage},r.prototype.getStylesPropertyPage=function(){return c.LineToolGhostFeedStylesPropertyPage},t.LineToolGhostFeed=r},function(e,t,i){"use strict";function o(e,t){this._constructor="LineToolBezierQuadro";var o=t||new r("linetoolbezierquadro");n.call(this,e,o),i.e(0).then(function(e){var t=i(930).BezierQuadroPaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var n=i(0).LineDataSource,r=i(2).DefaultProperty,s=i(1).propertyPages;inherit(o,n),o.prototype.pointsCount=function(){return 2},o.prototype.title=function(){return"Curve"},o.prototype.controlPoint=function(){var e=this.pointToScreenPoint(this.points()[0])[0],t=this.pointToScreenPoint(this.points()[1])[0],i=t.subtract(e).scaled(.5),o=i.transposed().scaled(.3),n=e.add(t).scaled(.5),r=n.add(o);return this.screenPointToPoint(r)},o.prototype.setLastPoint=function(e,t){n.prototype.setLastPoint.call(this,e,t),this._controlPoint=this.controlPoint()},o.prototype.addPoint=function(e,t,i){var o,r=n.prototype.addPoint.call(this,e,t,!0);return r&&(o=this.controlPoint(),this._points.push(o),delete this._controlPoint,i||(this.normalizePoints(),this.createServerPoints()),this._createPointProperty(2)),r},o.prototype.restorePoints=function(e,t,i){n.prototype.restorePoints.call(this,e,t,i),this._createPointProperty(2)},o.prototype.getStylesPropertyPage=function(){return s.LineToolBezierStylesPropertyPage},t.LineToolBezierQuadro=o},function(e,t,i){"use strict";function o(e,t){this._constructor="LineToolBezierCubic";var o=t||new r("linetoolbeziercubic");n.call(this,e,o),i.e(0).then(function(e){var t=i(931).BezierCubicPaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var n=i(0).LineDataSource,r=i(2).DefaultProperty,s=i(1).propertyPages;inherit(o,n),o.prototype.pointsCount=function(){return 2},o.prototype.title=function(){return"Double Curve"},o.prototype.controlPoints=function(){var e=this.pointToScreenPoint(this.points()[0])[0],t=this.pointToScreenPoint(this.points()[1])[0],i=t.subtract(e).scaled(.5),o=i.transposed().scaled(.3),n=e.add(t).scaled(.33),r=e.add(t).scaled(.67),s=n.add(o),a=r.subtract(o);return[this.screenPointToPoint(s),this.screenPointToPoint(a)]},o.prototype.setLastPoint=function(e,t){n.prototype.setLastPoint.call(this,e,t),this._controlPoints=this.controlPoints()},
o.prototype.addPoint=function(e,t,i){var o,r=n.prototype.addPoint.call(this,e,t,!0);return r&&(o=this.controlPoints(),delete this._controlPoints,this._points.push(o[0]),this._points.push(o[1]),i||(this.normalizePoints(),this.createServerPoints()),this._createPointProperty(2),this._createPointProperty(3)),r},o.prototype.restorePoints=function(e,t,i){n.prototype.restorePoints.call(this,e,t,i),this._createPointProperty(2),this._createPointProperty(3)},o.prototype.getStylesPropertyPage=function(){return s.LineToolBezierStylesPropertyPage},t.LineToolBezierCubic=o},function(e,t,i){"use strict";function o(e,t){this._constructor="LineToolArrow";var i=t||new r("linetoolarrow");n.call(this,e,i)}var n=i(119).LineToolTrendLine,r=i(2).DefaultProperty;inherit(o,n),o.prototype.title=function(){return"Arrow"},t.LineToolArrow=o},function(e,t,i){"use strict";function o(e,t){this._constructor="LineToolRay";var i=t||new r("linetoolray");n.call(this,e,i)}var n=i(119).LineToolTrendLine,r=i(2).DefaultProperty;inherit(o,n),o.prototype.title=function(){return"Ray"},t.LineToolRay=o},function(e,t,i){"use strict";function o(e,t){this._constructor="LineToolExtended";var i=t||new r("linetoolextended");n.call(this,e,i)}var n=i(119).LineToolTrendLine,r=i(2).DefaultProperty;inherit(o,n),o.prototype.title=function(){return"Extended Line"},t.LineToolExtended=o},function(e,t,i){"use strict";function o(e,t){var i=t||this.createPropertiesObject("linetoolschiffpitchfork");r.call(this,e,i),this._constructor="LineToolSchiffPitchfork"}var n=i(17),r=i(121).LineToolPitchfork;inherit(o,r),o.prototype.title=function(){return $.t("Modified Schiff Pitchfork")},o.prototype.createPropertiesObject=function(e,t,i){return new n(e,t,i,{range:[0,8]})},t.LineToolSchiffPitchfork=o},function(e,t,i){"use strict";function o(e,t){var i=t||this.createPropertiesObject("linetoolschiffpitchfork2");r.call(this,e,i),this._constructor="LineToolSchiffPitchfork2"}var n=i(17),r=i(121).LineToolPitchfork;inherit(o,r),o.prototype.title=function(){return $.t("Schiff Pitchfork")},o.prototype.createPropertiesObject=function(e,t,i){return new n(e,t,i,{range:[0,8]})},t.LineToolSchiffPitchfork2=o},function(e,t,i){"use strict";function o(e,t){var i=t||this.createPropertiesObject("linetoolinsidepitchfork");r.call(this,e,i),this._constructor="LineToolInsidePitchfork"}var n=i(17),r=i(121).LineToolPitchfork;inherit(o,r),o.prototype.title=function(){return $.t("Inside Pitchfork")},o.prototype.createPropertiesObject=function(e,t,i){return new n(e,t,i,{range:[0,8]})},t.LineToolInsidePitchfork=o},function(e,t,i){"use strict";function o(e,t){this._constructor="LineToolFlagMark";var o=t||new s("linetoolflagmark");r.call(this,e,o),i.e(0).then(function(t){var o=i(352).MarkPaneView,r=new o(this,e,this.image,25,25,-8,-21);r.setAnchors(new n(0,0)),this._setPaneViews([r])}.bind(this).bind(null,i)).catch(i.oe)}var n=i(6).Point,r=i(0).LineDataSource,s=i(2).DefaultProperty;inherit(o,r),o.prototype.image=new Image,
o.prototype.image.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAZCAYAAADE6YVjAAAAsElEQVR4AWMYWcDExOS/YUd4hWF7+H90bNAePpO2liDwJTxyi2htyVXLvlBOWlry2bAtVIumwWXQERFF4zgJ20iPiP8JDCpLeqSuJ6ZdoRJ0SMIRx7QbQtmItgSXnGFbRCzMEnIzK8ISWgL6WzJqibGxsYaFhYUC7SxBWMQPNMjazMxMjebBZWhoKAq00NHc3FyL5nFiaWkpDTTYz8jISI/mEW9qaqoExGFgS+gFRgEAaE0hWxrw50oAAAAASUVORK5CYII=",o.prototype.pointsCount=function(){return 1},o.prototype.title=function(){return"Flag Mark"},o.prototype.version=2,t.LineToolFlagMark=o},function(e,t,i){"use strict";function o(e,t){this._constructor="LineToolCypherPattern";var o=t||new r("linetoolcypherpattern");n.call(this,e,o),i.e(0).then(function(e){var t=i(932).CypherPaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var n=i(0).LineDataSource,r=i(2).DefaultProperty,s=i(274).LineTool5PointsPattern;inherit(o,s),t.LineToolCypherPattern=o},function(e,t,i){"use strict";(function(e){function o(e){this._line=e,this._data={bodyText:"position",quantityText:"0"},this._closeEnabled=!0}function n(e,t){var n,s,a,l,u,d;this._adapter=new o(this),this._constructor="LineToolPosition",n=t||new c("linetoolposition"),r.call(this,e,n),i.e(0).then(function(e){var t=i(933).PositionPaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe),s=e.mainSeries().symbolInfo(),a=null!==s?s.pricescale:100,l=null!==s&&s.fractional?s.minmov:1,u=null!==s&&s.fractional,d=null!==s?s.minmove2:void 0,this._formatter=new h(a,l,u,d)}var r=i(176),s=i(0).LineDataSource,a=i(704).PositionAveragePriceAxisView,l=i(130),c=i(2).DefaultProperty,h=i(19).PriceFormatter;o.prototype.getPrice=function(){return this._line.points().length>0?this._line.points()[0].price:this._line._timePoint.length>0?this._line._timePoint[0].price:void 0},o.prototype.setPrice=function(e){if(this._line.points().length>0){var t=this._line.points()[0];t.price=e,this._line._points[0]=t,this._line.normalizePoints(),this._line.updateAllViewsAndRedraw()}return this._line._timePoint.length>0&&(this._line._timePoint[0].price=e),this},o.prototype.getText=function(){return this._data.bodyText},o.prototype.setText=function(e){return this._data.bodyText=e||"",this._line.updateAllViewsAndRedraw(),this},o.prototype.setTooltip=function(e){return null==e?e="":e+="",this._line.properties().tooltip.setValue(e),this},o.prototype.getTooltip=function(){return this._line.properties().tooltip.value()},o.prototype.getQuantity=function(){return this._data.quantityText},o.prototype.setQuantity=function(e){return this._data.quantityText=e||"",this._line.updateAllViewsAndRedraw(),this},o.prototype.getExtendLeft=function(){var e=this._line.properties().extendLeft.value();return"inherit"===e?this._line._model.properties().tradingProperties.extendLeft.value():e},o.prototype.setExtendLeft=function(e){return this._line.properties().extendLeft.setValue(e),this},o.prototype.getLineLength=function(){var e=this._line.properties().lineLength.value();return"inherit"===e?this._line._model.properties().tradingProperties.lineLength.value():e},
o.prototype.setLineLength=function(e){return this._line.properties().lineLength.setValue(Math.max(0,Math.min(e,100))),this},o.prototype.getLineColor=function(){return l.getColorFromProperties(this._line.properties().lineColor,this._line.properties().lineTransparency)},o.prototype.setLineColor=function(e){return l.setColorToProperties(e,this._line.properties().lineColor,this._line.properties().lineTransparency),this},o.prototype.getLineStyle=function(){var e=this._line.properties().lineStyle.value();return"inherit"===e?this._line._model.properties().tradingProperties.lineStyle.value():e},o.prototype.setLineStyle=function(e){return this._line.properties().lineStyle.setValue(e),this},o.prototype.getLineWidth=function(){var e=this._line.properties().lineWidth.value();return"inherit"===e?this._line._model.properties().tradingProperties.lineWidth.value():e},o.prototype.setLineWidth=function(e){return this._line.properties().lineWidth.setValue(e),this},o.prototype.getBodyBorderColor=function(){return l.getColorFromProperties(this._line.properties().bodyBorderColor,this._line.properties().bodyBorderTransparency)},o.prototype.setBodyBorderColor=function(e){return l.setColorToProperties(e,this._line.properties().bodyBorderColor,this._line.properties().bodyBorderTransparency),this},o.prototype.getBodyBackgroundColor=function(){return l.getColorFromProperties(this._line.properties().bodyBackgroundColor,this._line.properties().bodyBackgroundTransparency)},o.prototype.setBodyBackgroundColor=function(e){return l.setColorToProperties(e,this._line.properties().bodyBackgroundColor,this._line.properties().bodyBackgroundTransparency),this},o.prototype.getBodyTextColor=function(){return l.getColorFromProperties(this._line.properties().bodyTextColor,this._line.properties().bodyTextTransparency)},o.prototype.setBodyTextColor=function(e){return l.setColorToProperties(e,this._line.properties().bodyTextColor,this._line.properties().bodyTextTransparency),this},o.prototype.getBodyFont=function(){return l.getFontFromProperties(this._line.properties().bodyFontFamily,this._line.properties().bodyFontSize,this._line.properties().bodyFontBold,this._line.properties().bodyFontItalic)},o.prototype.setBodyFont=function(e){return l.setFontToProperties(e,this._line.properties().bodyFontFamily,this._line.properties().bodyFontSize,this._line.properties().bodyFontBold,this._line.properties().bodyFontItalic),this},o.prototype.getQuantityBorderColor=function(){return l.getColorFromProperties(this._line.properties().quantityBorderColor,this._line.properties().quantityBorderTransparency)},o.prototype.setQuantityBorderColor=function(e){return l.setColorToProperties(e,this._line.properties().quantityBorderColor,this._line.properties().quantityBorderTransparency),this},o.prototype.getQuantityBackgroundColor=function(){return l.getColorFromProperties(this._line.properties().quantityBackgroundColor,this._line.properties().quantityBackgroundTransparency)},o.prototype.setQuantityBackgroundColor=function(e){
return l.setColorToProperties(e,this._line.properties().quantityBackgroundColor,this._line.properties().quantityBackgroundTransparency),this},o.prototype.getQuantityTextColor=function(){return l.getColorFromProperties(this._line.properties().quantityTextColor,this._line.properties().quantityTextTransparency)},o.prototype.setQuantityTextColor=function(e){return l.setColorToProperties(e,this._line.properties().quantityTextColor,this._line.properties().quantityTextTransparency),this},o.prototype.getQuantityFont=function(){return l.getFontFromProperties(this._line.properties().quantityFontFamily,this._line.properties().quantityFontSize,this._line.properties().quantityFontBold,this._line.properties().quantityFontItalic)},o.prototype.setQuantityFont=function(e){return l.setFontToProperties(e,this._line.properties().quantityFontFamily,this._line.properties().quantityFontSize,this._line.properties().quantityFontBold,this._line.properties().quantityFontItalic),this},o.prototype.getReverseButtonBorderColor=function(){return l.getColorFromProperties(this._line.properties().reverseButtonBorderColor,this._line.properties().reverseButtonBorderTransparency)},o.prototype.setReverseButtonBorderColor=function(e){return l.setColorToProperties(e,this._line.properties().reverseButtonBorderColor,this._line.properties().reverseButtonBorderTransparency),this},o.prototype.getReverseButtonBackgroundColor=function(){return l.getColorFromProperties(this._line.properties().reverseButtonBackgroundColor,this._line.properties().reverseButtonBackgroundTransparency)},o.prototype.setReverseButtonBackgroundColor=function(e){return l.setColorToProperties(e,this._line.properties().reverseButtonBackgroundColor,this._line.properties().reverseButtonBackgroundTransparency),this},o.prototype.getReverseButtonIconColor=function(){return l.getColorFromProperties(this._line.properties().reverseButtonIconColor,this._line.properties().reverseButtonIconTransparency)},o.prototype.setReverseButtonIconColor=function(e){return l.setColorToProperties(e,this._line.properties().reverseButtonIconColor,this._line.properties().reverseButtonIconTransparency),this},o.prototype.getCloseButtonBorderColor=function(){return l.getColorFromProperties(this._line.properties().closeButtonBorderColor,this._line.properties().closeButtonBorderTransparency)},o.prototype.setCloseButtonBorderColor=function(e){return l.setColorToProperties(e,this._line.properties().closeButtonBorderColor,this._line.properties().closeButtonBorderTransparency),this},o.prototype.getCloseButtonBackgroundColor=function(){return l.getColorFromProperties(this._line.properties().closeButtonBackgroundColor,this._line.properties().closeButtonBackgroundTransparency)},o.prototype.setCloseButtonBackgroundColor=function(e){return l.setColorToProperties(e,this._line.properties().closeButtonBackgroundColor,this._line.properties().closeButtonBackgroundTransparency),this},o.prototype.getCloseButtonIconColor=function(){
return l.getColorFromProperties(this._line.properties().closeButtonIconColor,this._line.properties().closeButtonIconTransparency)},o.prototype.setCloseButtonIconColor=function(e){return l.setColorToProperties(e,this._line.properties().closeButtonIconColor,this._line.properties().closeButtonIconTransparency),this},o.prototype.block=function(){this._blocked=!0,this._line.updateAllViewsAndRedraw()},o.prototype.unblock=function(){this._blocked=!1,this._line.updateAllViewsAndRedraw()},o.prototype.isFunction=function(e){return"function"==typeof e},o.prototype.onReverse=function(e,t){return t?this.isFunction(t)&&(this._onReverseData=e,this._onReverseCallback=t):this.isFunction(e)&&(this._onReverseCallback=e),this},o.prototype.callOnReverse=function(){this.isFunction(this._onReverseCallback)&&this._onReverseCallback.call(this,this._onReverseData)},o.prototype.isOnReverseCallbackPresent=function(){return this.isFunction(this._onReverseCallback)},o.prototype.onClose=function(e,t){return t?this.isFunction(t)&&(this._onCloseData=e,this._onCloseCallback=t):this.isFunction(e)&&(this._onCloseCallback=e),this},o.prototype.setCloseEnabled=function(e){return this._closeEnabled===e?this:(this._closeEnabled=e,this._onCloseCallback&&this._line.updateAllViewsAndRedraw(),this)},o.prototype.isCloseEnabled=function(){return this._closeEnabled},o.prototype.callOnClose=function(){this.isFunction(this._onCloseCallback)&&this._closeEnabled&&this._onCloseCallback.call(this,this._onCloseData)},o.prototype.isOnCloseCallbackPresent=function(){return this._closeEnabled&&this.isFunction(this._onCloseCallback)},o.prototype.onModify=function(e,t){return t?this.isFunction(t)&&(this._onModifyData=e,this._onModifyCallback=t):this.isFunction(e)&&(this._onModifyCallback=e),this},o.prototype.callOnModify=function(){this.isFunction(this._onModifyCallback)&&this._onModifyCallback.call(this,this._onModifyData)},o.prototype.onContextMenu=function(e,t){return t?this.isFunction(t)&&(this._onContextMenuData=e,this._onContextMenuCallback=t):this.isFunction(e)&&(this._onContextMenuCallback=e),this},o.prototype.callOnContextMenu=function(){if(this.isFunction(this._onContextMenuCallback))return this._onContextMenuCallback.call(this,this._onContextMenuData)},o.prototype.remove=function(){this._line._model.removeSource(this._line),delete this._line},inherit(n,r),n.prototype.setPoint=function(e,t,i){this._points[e]=t,this.normalizePoints()},n.prototype.addPoint=function(e,t){return this._points.push(e),this._lastPoint=null,this.normalizePoints(),this.createServerPoints(),!0},n.skipMagnetting=!0,n.prototype.title=function(){return"Position"},n.prototype.createPriceAxisView=function(e){return this._priceAxisView=new a(this,{pointIndex:e,backgroundProperty:this.properties().lineColor}),this._priceAxisView},n.prototype.paneViews=function(t){return TradingView.printing&&!e.enabled("snapshot_trading_drawings")?null:this._model.properties().tradingProperties.showPositions.value()?s.prototype.paneViews.call(this,t):null},n.prototype.priceAxisViews=function(t,i){
return TradingView.printing&&!e.enabled("snapshot_trading_drawings")?null:this._model.properties().tradingProperties.showPositions.value()?s.prototype.priceAxisViews.call(this,t,i):null},n.prototype.hasContextMenu=function(){return!0},n.prototype.contextMenuItems=function(){return this._adapter.callOnContextMenu()},n.prototype.formatter=function(){return this._formatter},t.LineToolPosition=n}).call(t,i(4))},function(e,t,i){"use strict";var o,n,r;Object.defineProperty(t,"__esModule",{value:!0}),i.d(t,"PositionAveragePriceAxisView",function(){return r}),o=i(3),n=i(172),r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.c(t,e),t.prototype._formatPrice=function(e,t){return this._source.formatter().format(e)},t}(n.LineToolPriceAxisView)},function(e,t,i){"use strict";(function(e){function o(e){this._line=e,this._data={bodyText:"order",quantityText:"0"},this._editable=!0}function n(e,t){this._adapter=new o(this),this._constructor="LineToolOrder";var n=t||new c("linetoolorder");r.call(this,e,n),i.e(0).then(function(e){var t=i(934).OrderPaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var r=i(176),s=i(172).LineToolPriceAxisView,a=i(130),l=i(0).LineDataSource,c=i(2).DefaultProperty;o.prototype.setEditable=function(e){return this._editable=e,this},o.prototype.getPrice=function(){return this._line.points().length>0?this._line.points()[0].price:this._line._timePoint.length>0?this._line._timePoint[0].price:void 0},o.prototype.setPrice=function(e){if(this._line.points().length>0){var t=this._line.points()[0];t.price=e,this._line._points[0]=t,this._line.normalizePoints(),this._line.updateAllViewsAndRedraw()}return this._line._timePoint.length>0&&(this._line._timePoint[0].price=e),this},o.prototype.getText=function(){return this._data.bodyText},o.prototype.setText=function(e){return this._data.bodyText=e||"",this._line.updateAllViewsAndRedraw(),this},o.prototype.setTooltip=function(e){return null==e?e="":e+="",this._line.properties().tooltip.setValue(e),this},o.prototype.getTooltip=function(){return this._line.properties().tooltip.value()},o.prototype.getQuantity=function(){return this._data.quantityText},o.prototype.setQuantity=function(e){return this._data.quantityText=e||"",this._line.updateAllViewsAndRedraw(),this},o.prototype.getExtendLeft=function(){var e=this._line.properties().extendLeft.value();return"inherit"===e?this._line._model.properties().tradingProperties.extendLeft.value():e},o.prototype.setExtendLeft=function(e){return this._line.properties().extendLeft.setValue(e),this},o.prototype.getLineLength=function(){var e=this._line.properties().lineLength.value();return"inherit"===e?this._line._model.properties().tradingProperties.lineLength.value():e},o.prototype.setLineLength=function(e){return this._line.properties().lineLength.setValue(Math.max(0,Math.min(e,100))),this},o.prototype.getLineColor=function(){return a.getColorFromProperties(this._line.properties().lineColor,this._line.properties().lineTransparency)},
o.prototype.setLineColor=function(e){return a.setColorToProperties(e,this._line.properties().lineColor,this._line.properties().lineTransparency),this},o.prototype.getLineStyle=function(){var e=this._line.properties().lineStyle.value();return"inherit"===e?this._line._model.properties().tradingProperties.lineStyle.value():e},o.prototype.setLineStyle=function(e){return this._line.properties().lineStyle.setValue(e),this},o.prototype.getLineWidth=function(){var e=this._line.properties().lineWidth.value();return"inherit"===e?this._line._model.properties().tradingProperties.lineWidth.value():e},o.prototype.setLineWidth=function(e){return this._line.properties().lineWidth.setValue(e),this},o.prototype.getBodyBorderColor=function(){return a.getColorFromProperties(this._line.properties().bodyBorderColor,this._line.properties().bodyBorderTransparency)},o.prototype.setBodyBorderColor=function(e){return a.setColorToProperties(e,this._line.properties().bodyBorderColor,this._line.properties().bodyBorderTransparency),this},o.prototype.getBodyBackgroundColor=function(){return a.getColorFromProperties(this._line.properties().bodyBackgroundColor,this._line.properties().bodyBackgroundTransparency)},o.prototype.setBodyBackgroundColor=function(e){return a.setColorToProperties(e,this._line.properties().bodyBackgroundColor,this._line.properties().bodyBackgroundTransparency),this},o.prototype.getBodyTextColor=function(){return a.getColorFromProperties(this._line.properties().bodyTextColor,this._line.properties().bodyTextTransparency)},o.prototype.setBodyTextColor=function(e){return a.setColorToProperties(e,this._line.properties().bodyTextColor,this._line.properties().bodyTextTransparency),this},o.prototype.getBodyFont=function(){return a.getFontFromProperties(this._line.properties().bodyFontFamily,this._line.properties().bodyFontSize,this._line.properties().bodyFontBold,this._line.properties().bodyFontItalic)},o.prototype.setBodyFont=function(e){return a.setFontToProperties(e,this._line.properties().bodyFontFamily,this._line.properties().bodyFontSize,this._line.properties().bodyFontBold,this._line.properties().bodyFontItalic),this},o.prototype.getQuantityBorderColor=function(){return a.getColorFromProperties(this._line.properties().quantityBorderColor,this._line.properties().quantityBorderTransparency)},o.prototype.setQuantityBorderColor=function(e){return a.setColorToProperties(e,this._line.properties().quantityBorderColor,this._line.properties().quantityBorderTransparency),this},o.prototype.getQuantityBackgroundColor=function(){return a.getColorFromProperties(this._line.properties().quantityBackgroundColor,this._line.properties().quantityBackgroundTransparency)},o.prototype.setQuantityBackgroundColor=function(e){return a.setColorToProperties(e,this._line.properties().quantityBackgroundColor,this._line.properties().quantityBackgroundTransparency),this},o.prototype.getQuantityTextColor=function(){return a.getColorFromProperties(this._line.properties().quantityTextColor,this._line.properties().quantityTextTransparency)},
o.prototype.setQuantityTextColor=function(e){return a.setColorToProperties(e,this._line.properties().quantityTextColor,this._line.properties().quantityTextTransparency),this},o.prototype.getQuantityFont=function(){return a.getFontFromProperties(this._line.properties().quantityFontFamily,this._line.properties().quantityFontSize,this._line.properties().quantityFontBold,this._line.properties().quantityFontItalic)},o.prototype.setQuantityFont=function(e){return a.setFontToProperties(e,this._line.properties().quantityFontFamily,this._line.properties().quantityFontSize,this._line.properties().quantityFontBold,this._line.properties().quantityFontItalic),this},o.prototype.getCancelButtonBorderColor=function(){return a.getColorFromProperties(this._line.properties().cancelButtonBorderColor,this._line.properties().cancelButtonBorderTransparency)},o.prototype.setCancelButtonBorderColor=function(e){return a.setColorToProperties(e,this._line.properties().cancelButtonBorderColor,this._line.properties().cancelButtonBorderTransparency),this},o.prototype.getCancelButtonBackgroundColor=function(){return a.getColorFromProperties(this._line.properties().cancelButtonBackgroundColor,this._line.properties().cancelButtonBackgroundTransparency)},o.prototype.setCancelButtonBackgroundColor=function(e){return a.setColorToProperties(e,this._line.properties().cancelButtonBackgroundColor,this._line.properties().cancelButtonBackgroundTransparency),this},o.prototype.getCancelButtonIconColor=function(){return a.getColorFromProperties(this._line.properties().cancelButtonIconColor,this._line.properties().cancelButtonIconTransparency)},o.prototype.setCancelButtonIconColor=function(e){return a.setColorToProperties(e,this._line.properties().cancelButtonIconColor,this._line.properties().cancelButtonIconTransparency),this},o.prototype.block=function(){this._blocked=!0,this._line.updateAllViewsAndRedraw()},o.prototype.unblock=function(){this._blocked=!1,this._line.updateAllViewsAndRedraw()},o.prototype.isFunction=function(e){return"function"==typeof e},o.prototype.onCancel=function(e,t){return t?this.isFunction(t)&&(this._onCancelData=e,this._onCancelCallback=t):this.isFunction(e)&&(this._onCancelCallback=e),this},o.prototype.callOnCancel=function(){this.isFunction(this._onCancelCallback)&&this._onCancelCallback.call(this,this._onCancelData)},o.prototype.isOnCancelCallbackPresent=function(){return this.isFunction(this._onCancelCallback)},o.prototype.onModify=function(e,t){return t?this.isFunction(t)&&(this._onModifyData=e,this._onModifyCallback=t):this.isFunction(e)&&(this._onModifyCallback=e),this},o.prototype.callOnModify=function(){this.isFunction(this._onModifyCallback)&&this._onModifyCallback.call(this,this._onModifyData)},o.prototype.onMove=function(e,t){return t?this.isFunction(t)&&(this._onMoveData=e,this._onMoveCallback=t):this.isFunction(e)&&(this._onMoveCallback=e),this},o.prototype.callOnMove=function(){this.isFunction(this._onMoveCallback)&&this._onMoveCallback.call(this,this._onMoveData)},o.prototype.onContextMenu=function(e,t){
return t?this.isFunction(t)&&(this._onContextMenuData=e,this._onContextMenuCallback=t):this.isFunction(e)&&(this._onContextMenuCallback=e),this},o.prototype.callOnContextMenu=function(){if(this.isFunction(this._onContextMenuCallback))return this._onContextMenuCallback.call(this,this._onContextMenuData)},o.prototype.remove=function(){this._line._model.removeSource(this._line),delete this._line},o.prototype.shouldShowModifyOrder=function(){return!!this._onModifyCallback},inherit(n,r),n.skipMagnetting=!0,n.prototype.setPoint=function(e,t,i){this._points[e]=t,this.normalizePoints()},n.prototype.addPoint=function(e,t){return this._points.push(e),this._lastPoint=null,this.normalizePoints(),this.createServerPoints(),!0},n.prototype.title=function(){return"Order"},n.prototype.endMoving=function(e){var t=this._startMovingPoint&&this._currentMovingPoint&&this._startMovingPoint.price!==this._currentMovingPoint.price;r.prototype.endMoving.call(this),!e&&t&&this._adapter.callOnMove()},n.prototype.createPriceAxisView=function(e){return this._priceAxisView=new s(this,{pointIndex:e,backgroundProperty:this.properties().lineColor}),this._priceAxisView},n.prototype.paneViews=function(t){return TradingView.printing&&!e.enabled("snapshot_trading_drawings")?null:this._model.properties().tradingProperties.showOrders.value()?l.prototype.paneViews.call(this,t):null},n.prototype.priceAxisViews=function(t,i){return TradingView.printing&&!e.enabled("snapshot_trading_drawings")?null:this._model.properties().tradingProperties.showOrders.value()?l.prototype.priceAxisViews.call(this,t,i):null},n.prototype.hasContextMenu=function(){return!0},n.prototype.contextMenuItems=function(){return this._adapter.callOnContextMenu()},n.prototype.onlyYMoving=function(){return!0},n.prototype.userEditEnabled=function(){return this._adapter.shouldShowModifyOrder()},t.LineToolOrder=n}).call(t,i(4))},function(e,t,i){"use strict";(function(e){function o(t,i,o){o=o||{},o=Object.assign({},E,o);var n=this;f.call(this),this._properties=i,this._model=t,this._dataWindowView=new h(this,t),this._priceAxisView=new c(this),this._startMeasurePriceAxisView=new c(this),this._endMeasurePriceAxisView=new c(this),this._timeAxisView=new u(this,t),this._startMeasureTimeAxisView=new u(this,t,"measureStartX"),this._endMeasureTimeAxisView=new u(this,t,"measureEndX"),this.visible=!0,t.readOnly()?this.areLinesVisible=!0:m.cursorTool.subscribe(function(e){n.areLinesVisible="arrow"!==e},{callWithLast:!0}),this._movedDelegate=new e,this._subscribed=!1,this._linesShouldBeHidden=this._model.readOnly(),this._selectBarMode=new I(!1),this._barSelectedDelegate=new e,this._mouseClickBoundedHandler=this._mouseClickHandler.bind(this),this._isOnHoveredChartWidget=!1}function n(e,t){this._source=e,this._pane=t,this._pipFormatter=null,this._lastSymbolInfo=null,this._horzTrenRenderer=new d,this._vertTrenRenderer=new d,this._bgRenderer=new _,this._labelRenderer=new p({})}function r(e,t,i,o){this.source=e,this.pane=t,this._horzVisible=i,this._mouseClickHandler=o}function s(e,t,i){this.source=e,this.pane=t,
this._axis=i||"x"}var a=i(6).Point,l=i(79).isLineToolName,c=i(707).CrossHairPriceAxisView,h=i(708),u=i(709),d=i(187).TrendLineRenderer,p=i(188).TextRenderer,_=i(301).RectangleRenderer,f=i(30).DataSource,m=i(33),g=i(710).PaneRendererCrossHair,y=i(711).PaneRendererCrossHairLock,v=i(50).CompositeRenderer,b=i(16),S=i(105).PercentageFormatter,w=i(314).TimeSpanFormatter,T=i(311).PipFormatter,P=i(24),x=i(100).LineEnd,C=i(195),L=i(14).isNaN,I=i(15),M=i(36),k=M.forceLTRStr,A=M.startWithLTR,E={additionalMenuEnabled:!1};inherit(o,f),o.prototype.index=0,o.prototype.price=NaN,o.prototype.pane=null,o.prototype.color="white",o.prototype.style="",o.prototype.customization={disableSelection:!0},o.prototype.properties=function(){return this._properties},o.prototype.moved=function(){return this._movedDelegate},o.prototype.saveOriginCoord=function(e,t){this._originX=e,this._originY=t},o.prototype.clearOriginCoord=function(){this._originX=NaN,this._originY=NaN},o.prototype.setPosition=function(e,t,i){this._subscribed||(this._model.mainSeries().onRestarted().subscribe(this,o.prototype.clearMeasure),this._subscribed=!0),this.setLockedPosition(i),this.visible=!0,this._tryToUpdateViews(e,t,i)},o.prototype.update=function(){var e,t,i,o,n,r;this.visible&&(e=this._priceScaleByPane(this.pane),t=this._originX||this.x,i=this._originY||this.y,o=this._model.timeScale().coordinateToIndex(t),n=NaN,null!==e&&(r=this.pane.mainDataSource().firstValue(),n=e.coordinateToPrice(i,r)),this._tryToUpdateViews(o,n,this.pane))},o.prototype._priceScaleByPane=function(e){return e&&!e.defaultPriceScale().isEmpty()?e.defaultPriceScale():null},o.prototype._tryToUpdateViews=function(e,t,i){this._tryToUpdateData(e,t,i)&&(this.updateAllViews(),this._movedDelegate.fire({time:this._model.timeScale().points().roughTime(this.index),price:this.price}))},o.prototype._tryToUpdateData=function(e,t,i){var o,n=this.x,r=this.y,s=this.price,a=this.index,l=this.pane,c=this._priceScaleByPane(i);return this.index=e,this.x=L(e)?NaN:this._model.timeScale().indexToCoordinate(e),null!==c?(this.pane=i,this.price=t,o=i.mainDataSource().firstValue(),this.y=c.priceToCoordinate(t,o)):(this.pane=null,this.price=NaN,this.y=NaN),n!==this.x||r!==this.y||a!==this.index||s!==this.price||l!==this.pane},o.prototype.setLockedPosition=function(e){delete this.lockedIndex,delete this.lockedX,e!==this._measurePane&&m.lockTimeAxis().value()&&(this.lockedIndex=this._model.timeScale().points().roughIndex(m.lockTimeAxisTime.value()),this.lockedX=this._model.timeScale().indexToCoordinate(this.lockedIndex))},o.prototype.clearPosition=function(){this.visible=!1;var e=this._model.mainSeries().bars().lastIndex();this.index=null!==e?e:NaN,this.price=NaN,this.x=NaN,this.y=NaN,this.pane=null,this.clearOriginCoord()},o.prototype.measureStartY=function(){var e=this._startMeasurePoint.price,t=this._measurePane,i=t.mainDataSource().firstValue();return t.defaultPriceScale().priceToCoordinate(e,i)},o.prototype.measureStartX=function(){return this._model.timeScale().indexToCoordinate(this._startMeasurePoint.index)},
o.prototype.measureEndY=function(){var e=this._endMeasurePoint.price,t=this._measurePane,i=t.mainDataSource().firstValue();return t.defaultPriceScale().priceToCoordinate(e,i)},o.prototype.measureEndX=function(){return this._model.timeScale().indexToCoordinate(this._endMeasurePoint.index)},o.prototype.paneViews=function(e){var t=this._selectBarMode.value()&&this._isOnHoveredChartWidget,i=e===this.pane&&!t,o=[new r(this,e,i,this._mouseClickBoundedHandler)];return e===this._measurePane&&(this._measurePaneView||(this._measurePaneView=new n(this,e)),this._measurePaneView.update(),o.push(this._measurePaneView)),m.lockTimeAxis().value()&&o.push(this._timeLockPaneView=this._timeLockPaneView||new s(this,e)),o},o.prototype.dataWindowView=function(){return this._dataWindowView},o.prototype.priceAxisViews=function(e,t){var i,o;return this._linesShouldBeHidden||!this.visible||this.pane!==e||t!==e.defaultPriceScale()?null:(i=[],o=this._selectBarMode.value()&&this._isOnHoveredChartWidget,o||i.push(this._priceAxisView),this._startMeasurePoint&&i.push(this._startMeasurePriceAxisView),this._endMeasurePoint&&i.push(this._endMeasurePriceAxisView),i)},o.prototype.timeAxisView=function(){if(this._linesShouldBeHidden||!this.visible&&!m.lockTimeAxis().value())return null;var e=[this._timeAxisView];return this._startMeasurePoint&&e.push(this._startMeasureTimeAxisView),this._endMeasurePoint&&e.push(this._endMeasureTimeAxisView),e},o.prototype.updateAllViews=function(){this._priceAxisView.update(),this._startMeasurePoint&&(this._startMeasurePriceAxisView.update(),this._startMeasureTimeAxisView.update()),this._endMeasurePoint&&(this._endMeasurePriceAxisView.update(),this._endMeasureTimeAxisView.update()),this._timeAxisView.update()},o.prototype.startMeasurePoint=function(){return this._startMeasurePoint},o.prototype.startMeasuring=function(e,t){this._startMeasurePoint=e,this._measurePane=t},o.prototype.finishMeasure=function(e){this._endMeasurePoint=e},o.prototype.endMeasurePoint=function(){return this._endMeasurePoint},o.prototype.clearMeasure=function(e){delete this._measurePane,delete this._startMeasurePoint,delete this._endMeasurePoint,delete this._lastValidMeasurePoint,this._model.invalidate(new b(b.LIGHT_UPDATE))},o.prototype.measurePoints=function(){this.updateAllViews();var e=[this._startMeasurePoint];return this._endMeasurePoint?e.push(this._endMeasurePoint):(this._measurePane===this.pane&&(this._lastValidMeasurePoint={x:this.x,y:this.y,rawPrice:this.price,price:this.price,index:this.index}),e.push(this._lastValidMeasurePoint)),e},o.prototype.currentPoint=function(){return new a(this.x,this.y)},o.prototype.appliedIndex=function(){return isFinite(this.lockedIndex)&&this.lockedIndex||this.index},o.prototype.appliedX=function(){return isFinite(this.lockedX)&&this.lockedX||this.x},o.prototype.selectBarMode=function(){return this._selectBarMode},o.prototype.toggleSelectBarMode=function(){this._setSelectBarModeState(!this._selectBarMode.value())},o.prototype.onBarSelected=function(){return this._barSelectedDelegate},
o.prototype._setSelectBarModeState=function(e){this._selectBarMode.setValue(e),this._model.invalidate(new b(b.LIGHT_UPDATE))},o.prototype._mouseClickHandler=function(){var e;this._model.mainSeries().bars().contains(this.index)&&null!==(e=this._model.timeScale().indexToTimePoint(this.index))&&(this._setSelectBarModeState(!1),this._barSelectedDelegate.fire(e))},o.prototype.handleContextMenuEvent=function(){this._selectBarMode.value()&&this._setSelectBarModeState(!1)},o.prototype.setOnHoveredChartWidget=function(e){this._isOnHoveredChartWidget=e},o.prototype.isOnHoveredChartWidget=function(){return this._isOnHoveredChartWidget},o.prototype.setLinesShouldBeHidden=function(e){this._linesShouldBeHidden=e},o.prototype.linesShouldBeHidden=function(){return this._linesShouldBeHidden},n.prototype.update=function(){var e,t,i,o,n,r,s,l,c,h,u,d,p,_,f,m,g,y,v,b,P,x,C;if(this._source._endMeasurePoint)e=this._source._endMeasurePoint.price,t=this._source._endMeasurePoint.index;else if(this._source._measurePane===this._source.pane)e=this._source.price,t=this._source.index;else{if(!this._source._lastValidMeasurePoint)return;e=this._source._lastValidMeasurePoint.rawPrice,t=this._source._lastValidMeasurePoint.index}i=e-this._source._startMeasurePoint.price,o=t-this._source._startMeasurePoint.index,n=k(o),r=this._source._startMeasurePoint.price,s=this._source._measurePane.mainDataSource(),l=s.formatter().format(i),this._source._startMeasurePoint.price&&(c=i/this._source._startMeasurePoint.price,l+=" ("+(new S).format(100*c)+")"),h=k(l),this._label=h+"\n"+$.t("{0} bars").format(n),r=this._source._model._magnet.align(r,this._source._startMeasurePoint.index,this._source._measurePane),e=this._source._model._magnet.align(e,t,this._source._measurePane),u=s.firstValue(),d=this._source._model.timeScale().indexToCoordinate(this._source._startMeasurePoint.index),p=this._source._model.timeScale().indexToCoordinate(t),_=this._source._measurePane.defaultPriceScale().priceToCoordinate(r,u),f=this._source._measurePane.defaultPriceScale().priceToCoordinate(e,u),this._p1=new a(d,_),this._p2=new a(p,f),m=this._source._model.timeScale().indexToUserTime(this._source._startMeasurePoint.index),g=this._source._model.timeScale().indexToUserTime(t),y=this._pane.model().mainSeries().symbolInfo(),y&&y!==this._lastSymbolInfo&&(this._pipFormatter=new T(y.pricescale,y.minmov,y.type,y.minmove2),this._lastSymbolInfo=y),m&&g&&(v=(g.valueOf()-m.valueOf())/1e3,b=this._pipFormatter?this._pipFormatter.format(i):"",P=b?" , "+b:b,x=(new w).format(v),C=A(x),this._label=k(h+P)+"\n"+$.t("{0} bars").format(n)+", "+C)},n.prototype.renderer=function(){var e,t,i,o,n,r,s,l,c,h,u,d,p=new v,_={};return _.points=[this._p1,this._p2],_.width=this._source._model.timeScale().width(),_.height=this._source._measurePane.defaultPriceScale().height(),_.color="#D3E7FF",_.linewidth=0,_.fillBackground=!0,_.transparency=60,_.backcolor="#BADAFF",this._bgRenderer.setData(_),p.append(this._bgRenderer),e=this._p1.add(this._p2).scaled(.5),t=new a(this._p1.x,e.y),i=new a(this._p2.x,e.y),o={points:[t,i],
width:_.width,height:_.height,color:"#363c4e",linewidth:1,linestyle:CanvasEx.LINESTYLE_DASHED,extendleft:!1,extendright:!1,leftend:x.Normal,rightend:x.Arrow},this._horzTrenRenderer.setData(o),p.append(this._horzTrenRenderer),t=new a(e.x,this._p1.y),i=new a(e.x,this._p2.y),o={points:[t,i],width:_.width,height:_.height,color:"#363c4e",linewidth:1,linestyle:CanvasEx.LINESTYLE_DASHED,extendleft:!1,extendright:!1,leftend:x.Normal,rightend:x.Arrow},this._vertTrenRenderer.setData(o),p.append(this._vertTrenRenderer),n={x:0,y:10},r=function(e,t){return{points:[t],text:e,color:"#FFFFFF",horzAlign:"left",vertAlign:"middle",font:"Arial",offsetX:n.x,offsetY:n.y,bold:!1,italic:!1,fontsize:12,padding:5,highlightBorder:!1,backgroundColor:P.generateColor("#5b85bf",10),backgroundTransparency:10,backgroundVertInflate:5,backgroundHorzInflate:5,backgroundRoundRect:4}},s=.5*(this._p1.x+this._p2.x),l=this._p2.y,c=new a(s,l),h=r(this._label,c),this._labelRenderer.setData(h),u=this._labelRenderer.measure(),d={x:s+h.backgroundHorzInflate+u.textBgPadding-u.width/u.textBgPadding,y:this._p1.y>this._p2.y?c.y-u.height-2*u.textBgPadding-n.y>0?l-u.height-n.y+u.textBgPadding:n.y-2*u.textBgPadding:c.y+u.height+u.textBgPadding+n.y>_.height?_.height-u.height-n.y:l+u.textBgPadding},this._labelRenderer.setPoints([new a(d.x,d.y)]),p.append(this._labelRenderer),p},r.prototype.update=function(){},r.prototype.renderer=function(){var e,t,i,o,n,r,s={},a=this.source.visible&&this.source.areLinesVisible,c=m.lockTimeAxis().value();return s.horzLinesVisible=a&&this._horzVisible,s.vertLinesVisible=a||c,e=this.pane._model.readOnly(),t=e?defaults("chartproperties.paneProperties.crossHairProperties"):null,i=this.source.selectBarMode().value()&&this.source.isOnHoveredChartWidget(),o=TradingView.isMobile.any()&&l(this.source._model.currentTool())&&!i,n=o?"#a000a0":e?t.color:this.pane._model.properties().paneProperties.crossHairProperties.color.value(),r=e?t.transparency:this.pane._model.properties().paneProperties.crossHairProperties.transparency.value(),!o&&r>0&&(n=P.generateColor(n,r)),s.color=n,s.lineWidth=e?t.width:this.pane._model.properties().paneProperties.crossHairProperties.width.value(),s.lineStyle=e?t.style:this.pane._model.properties().paneProperties.crossHairProperties.style.value(),s.drawCenter=o&&this.pane===this.source.pane,s.w=this.pane.width(),s.h=this.pane.height(),s.x=isFinite(this.source.lockedX)&&this.source.lockedX||this.source.x,s.y=this.source.y,i&&(s.x=Math.max(0,this.source.x-1),s.vertLinesVisible=!0,s.lineStyle=C.LINESTYLE_SOLID,s.mouseClickHandler=this._mouseClickHandler,s.lineWidth=2,s.color="#ff0000"),new g(s)},s.prototype.update=function(){},s.prototype.renderer=function(){var e,t,i,o,n=this.source.visible&&this.source.areLinesVisible,r=m.lockTimeAxis().value(),s=n&&this._horzVisible,a=n||r;if(("y"!==this._axis||s)&&a)return e=9,t=11,i="y"===this._axis?this.pane.width()-e/2:this.source.lockedX+1,o="y"===this._axis?this.source.y:this.pane.height()-t/2-1,new y({x:i,y:o,width:e,height:t,bodyHeight:7})},t.CrossHair=o}).call(t,i(8))
},function(e,t,i){"use strict";var o,n,r;Object.defineProperty(t,"__esModule",{value:!0}),i.d(t,"CrossHairPriceAxisView",function(){return r}),o=i(3),n=i(59),r=function(e){function t(t){var i=e.call(this)||this;return i._background="#4c525e",i._source=t,i}return o.c(t,e),t.prototype._updateRendererData=function(e){var t,i,o,n;e.visible=!1,null!==(t=this._source.pane)&&(i=t.defaultPriceScale(),o=t.mainDataSource(),n=null!==o?o.firstValue():null,this._source.visible&&!i.isEmpty()&&null!=n&&(e.background=this._background,e.color=this.generateTextColor(this._background),e.coordinate=this._source.y,e.text=i.formatPrice(this._source.price,n),e.visible=!0))},t}(n.a)},function(e,t,i){"use strict";function o(e,t){r.call(this),this._header=null,this._crossHair=e,this._model=t,this._items.push(new s("Date","")),this._items.push(new s("Time","")),this._items.push(new s("Price","")),this._defaultFormatter=new a(100)}var n=i(116),r=n.DataWindowView,s=n.DataWindowItem,a=i(19).PriceFormatter,l=i(136).DateFormatter,c=i(110).TimeFormatter;inherit(o,r),o.prototype.update=function(){var e,t,i,o,n,r,s=this._model.mainSeries().isDWM();this._items[1].setVisible(!s),this._items[0].setValue("n/a"),this._items[1].setValue("n/a"),this._items[2].setValue("n/a"),this._model.timeScale().isEmpty()||(e=this._crossHair.appliedIndex(),t=this._model.timeScale().indexToUserTime(e),null===t?(this._items[0].setValue("n/a"),s||this._items[1].setValue("n/a")):(this._items[0].setValue((new l).format(t)),s||this._items[1].setValue((new c).format(t))),(i=this._crossHair.pane)&&(o=i.defaultPriceScale(),o.isEmpty()||(n=o.mainSource(),r=n?n.formatter():this._defaultFormatter,this._items[2].setValue(r.format(this._crossHair.price)))))},e.exports=o},function(e,t,i){"use strict";function o(e,t){n.call(this),this._invalidated=!0,this._crosshair=e,this._model=t,this._renderer=new r,this._rendererData={visible:!1,background:"#4c525e",color:"white",text:"",width:0}}var n=i(173).TimeAxisView,r=i(174).TimeAxisViewRenderer,s=i(175).AbbreviatedDateTimeFormatter;inherit(o,n),o.prototype.update=function(){this._invalidated=!0},o.prototype._updateImpl=function(){var e,t,i=this._rendererData;i.visible=!1,e=this._model.timeScale(),e.isEmpty()||(i.width=e.width(),i.coordinate=this._crosshair.appliedX(),(t=e.indexToUserTime(this._crosshair.appliedIndex()))&&(i.text=new s(this._model.mainSeries().isDWM()).format(t),i.visible=!0))},o.prototype.renderer=function(){return this._invalidated&&(this._updateImpl(),this._invalidated=!1),this._renderer.setData(this._rendererData),this._renderer},e.exports=o},function(e,t,i){"use strict";function o(e){this.data=e}var n=i(9).HitTestResult;o.prototype.draw=function(e){var t,i,o,n,r,s,a,l;this.data&&(t=this.data.vertLinesVisible,i=this.data.horzLinesVisible,(t||i)&&(e.lineStyle=this.data.lineStyle,e.lineWidth=this.data.lineWidth,e.strokeStyle=this.data.color,e.fillStyle=this.data.color,o=e.lineStyle===CanvasEx.LINESTYLE_DASHED||e.lineStyle===CanvasEx.LINESTYLE_DOTTED||e.lineStyle===CanvasEx.LINESTYLE_SPARSE_DOTTED,
n=this.data.lineWidth%2==0?.5:0,r=this.data.x+1+n,s=this.data.y+n,a=this.data.w,l=this.data.h,t&&r>=0&&(o?CanvasEx.drawDashedLineVertical(e,r,0,l):CanvasEx.drawSolidLine(e,r,0,r,l)),i&&s>=0&&(o?CanvasEx.drawDashedLineHorizontal(e,0,s,a):CanvasEx.drawSolidLine(e,0,s,a,s)),this.data.drawCenter&&(e.beginPath(),e.arc(r,s,3,0,2*Math.PI,!0),e.fillStyle=this.data.color,e.fill())))},o.prototype.hitTest=function(e){return this.data.mouseClickHandler?new n(n.CUSTOM,{mouseClickHandler:this.data.mouseClickHandler}):null},t.PaneRendererCrossHair=TradingView.PaneRendererCrossHair=o},function(e,t,i){"use strict";function o(e){this._data=e}o.prototype._drawShackle=function(e){var t=this._data.width-3,i=t/2,o=this._data.height-this._data.bodyHeight;e.moveTo(1.5,i),e.arc(this._data.width/2,i,i,Math.PI,2*Math.PI),o>i&&(e.moveTo(1.5,i),e.lineTo(1.5,o),e.moveTo(this._data.width-1.5,i),e.lineTo(this._data.width-1.5,o))},o.prototype.draw=function(e){var t,i,o,n;e.translate(this._data.x-this._data.width/2,this._data.y-this._data.height/2),t="rgba(153,153,153,.3)",i="rgba(153,153,153,.7)",o="#777",n="rgba(255,255,255,.7)",e.strokeStyle=t,e.lineWidth=2,e.beginPath(),this._drawShackle(e),e.stroke(),e.closePath(),e.strokeStyle=i,e.lineWidth=1,e.beginPath(),e.rect(0,this._data.height-this._data.bodyHeight+.5,this._data.width,this._data.bodyHeight),e.closePath(),e.stroke(),e.translate(0,-1),e.strokeStyle=o,e.beginPath(),this._drawShackle(e),e.stroke(),e.closePath(),e.fillStyle=n,e.beginPath(),e.rect(1,this._data.height-this._data.bodyHeight+1.5,this._data.width-2,this._data.bodyHeight-2),e.fill(),e.beginPath(),e.rect(.5,this._data.height-this._data.bodyHeight+1,this._data.width-1,this._data.bodyHeight-1),e.stroke(),e.closePath(),e.fillStyle=o,e.fillRect(this._data.width/2-.5,this._data.height-this._data.bodyHeight/2,1,2)},t.PaneRendererCrossHairLock=TradingView.PaneRendererCrossHairLock=o},function(e,t,i){"use strict";function o(e,t){n.call(this,t),this._series=e,this._series.onRestarted().subscribe(this,o.prototype.invalidate),this._series.onSymbolResolved().subscribe(this,o.prototype.invalidate),this._series.onCompleted().subscribe(this,o.prototype.invalidate),this._series.onBoxSizeChanged().subscribe(this,o.prototype.invalidate)}var n=i(268),r=i(278).getTranslatedSymbolDescription,s=i(713),a=s.generateTitleForGui,l=s.generateSplitTitleForGui;inherit(o,n),o.prototype.invalidate=function(){delete this._text,this.update()},o.prototype.getSeriesPrecision=function(){var e=4;return this._series._symbolInfo&&this._series._symbolInfo.pricescale&&(e=Math.round(Math.log(this._series._symbolInfo.pricescale)/Math.log(10))),e},o.prototype.round=function(e){var t=this.getSeriesPrecision(),i=Math.round(e*Math.pow(10,t))/Math.pow(10,t);return i||""},o.prototype.update=function(){"_text"in this||(this._bold=!1,this._size=this._props.mainSeriesProperties.statusViewStyle.fontSize.value()+"px",this._text=a(this._getTitleGenerationOptions()))},o.prototype.getSplitTitle=function(){return l(this._getTitleGenerationOptions())},
o.prototype._getTitleGenerationOptions=function(){var e=this._series.symbolInfo()||{};return{description:this._props.mainSeriesProperties.statusViewStyle.showSymbolAsDescription.value()?e.name:r({pro_name:e.pro_name,description:e.description,local_description:e.local_description,language:e.language}),exchange:this._props.mainSeriesProperties.statusViewStyle.showExchange.value()?e.exchange:null,symbol:this._series.symbol(),interval:this._props.mainSeriesProperties.statusViewStyle.showInterval.value()?this._series.interval():null,style:this._series._properties.style.value(),inputs:this._series.getInputsProperties().state(),boxSize:this._series.data().boxSize,reversalAmount:this._series.data().reversalAmount,precision:this.getSeriesPrecision()}},e.exports=o},function(e,t,i){"use strict";function o(e){var t,i,o=e||{},n="QUANDL"===o.exchange,r={symbolDescription:"",interval:"",exchange:"",chartStyle:"",extended:""};switch(o.description&&n?2===o.description.split("/").length?r.symbolDescription=o.description.split("/")[1]:(t=o.description.split("'").filter(function(e){return e.length}),t.forEach(function(e){e=e&&("/"===e[0]||/\d+\/\(?/.test(e))?[e]:e.split("/").filter(function(e){return e.length}),r.symbolDescription+=e[2===e.length?1:0]})):o.description?r.symbolDescription=o.description:r.symbolDescription=o.symbol,o.interval&&(r.interval=a(o.interval)),n&&o.description&&(i=/[\w_]+\/[\w_]+/.exec(o.description),i&&i[0]?r.provider=i[0].split("/")[0]:r.provider=o.description.split("/")[0]),o.exchange&&(r.exchange=o.exchange),o.style){case l.STYLE_HEIKEN_ASHI:r.chartStyle=$.t("Heikin Ashi")}return o.extended&&(r.extended=window.t("ext",{context:"shorthand_for_extended_session"})),r}function n(e){var t=o(e),i=t.symbolDescription+(t.interval?", "+t.interval:"")+s(t);return i=i.replace(/\'/g,"")}function r(e){var t,i=o(e),n=s(i),r=i.symbolDescription.replace(/\'/g,"");return n=n.replace(/\'/g,""),t=i.interval?", "+i.interval:"",[r,t,n]}function s(e){return(e.provider?", "+e.provider:"")+(e.exchange?", "+e.exchange:"")+(e.chartStyle?", "+e.chartStyle:"")+(e.extended?", "+e.extended:"")}var a=i(122).translatedIntervalString,l=i(39);e.exports={generateSplitTitleForGui:r,generateTitleForGui:n}},function(e,t,i){"use strict";var o,n,r,s,a,l;Object.defineProperty(t,"__esModule",{value:!0}),i.d(t,"ProjectionSeriesPriceAxisView",function(){return l}),o=i(3),n=i(7),i.n(n),r=i(20),s=i(279),a=i(39),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.c(t,e),t.prototype.lastPrice=function(){return this._getSource().data().lastProjectionPrice},t.prototype._updateRendererData=function(e){var t,i,o,s,l,c,h,u,d,p,_,f,m,g,y,v,b,S,w,T,P;e.visible=!1,t=this._getData().model,t.properties().scalesProperties.showSeriesLastValue.value()&&(i=this._getSource(),o=i.priceScale(),s=t.timeScale(),l=this.lastPrice(),s.isEmpty()||o.isEmpty()||void 0===l||null!==(c=s.visibleBars())&&(h=c.firstBar(),u=c.lastBar(),d=i.data(),
null!==(p=d.search(u,r.PlotRowSearchMode.NearestLeft))&&void 0!==(_=i.nearestIndex(h,r.PlotRowSearchMode.NearestRight))&&(f=Object(n.ensureNotNull)(d.valueAt(_))[TradingView.CLOSE_PLOT],m=e.background,g="",y=!1,v=i.properties(),b=v.style.value()===a.STYLE_HEIKEN_ASHI,b&&v.haStyle.showRealLastPrice.value()?(this._isCountdownEnabled()&&v.showCountdown.value()&&(g=this._countdownText()),S=i.lastValueData(TradingView.CLOSE_PLOT,!0),S.noData||S.color===e.background||(m=S.color),w=i.lastValueData(TradingView.CLOSE_PLOT,!1),S.noData||w.noData||(y=S.index===w.index)):(T=i.barColorer(),P=T.barStyle(p.index,!0),m=P.barColor,y=!0),e.background=m,e.secondLine=g,e.visible=y,e.color=this.generateTextColor(m),e.coordinate=o.priceToCoordinate(l,f),e.text=o.formatPrice(l,f))))},t}(s.SeriesPriceAxisView)},function(e,t,i){"use strict";function o(e,t){h.call(this),this._series=e,this._model=t,this._items.push(new u($.t("O",{context:"in_legend"}),"")),this._items.push(new u($.t("H",{context:"in_legend"}),"")),this._items.push(new u($.t("L",{context:"in_legend"}),"")),this._items.push(new u($.t("C",{context:"in_legend"}),"")),this._invalidated=!0,this.update()}var n=i(27),r=n.parseRgb,s=n.distanceRgb,a=n.invertRgb,l=n.rgbToHexString,c=i(116),h=c.DataWindowView,u=c.DataWindowItem,d=i(122).translatedIntervalString,p=i(20).PlotRowSearchMode;inherit(o,h),o.prototype.update=function(){this._invalidated=!0},o.prototype._updateImpl=function(){var e,t,i,o,n,c,h,u,_,f,m,g,y;if(this._series.symbolInfo()?(this._header=[this._series.symbolInfo().name,d(this._series.interval()),this._series.symbolInfo().exchange].join(", "),this._title=this._series.symbolInfo().description):this._header=this._series.symbol(),this._items[0].setValue($.t("n/a")),this._items[1].setValue($.t("n/a")),this._items[2].setValue($.t("n/a")),this._items[3].setValue($.t("n/a")),!this._model.timeScale().isEmpty()&&0!==this._series.bars().size()&&(e=this._series.data().size()-1,t=this._model.crossHairSource().appliedIndex(),void 0!==(i=isNumber(t)?this._series.nearestIndex(t,p.NearestLeft):this._series.nearestIndex(e,p.NearestLeft))))for(o=this._series.data().valueAt(i),n=this._series.formatter(),this._items[0].setValue(n.format(o[TradingView.OPEN_PLOT])),this._items[1].setValue(n.format(o[TradingView.HIGH_PLOT])),this._items[2].setValue(n.format(o[TradingView.LOW_PLOT])),this._items[3].setValue(n.format(o[TradingView.CLOSE_PLOT])),c=this._series.barColorer(),h=c.barStyle(i,!1),u=null!=h.barBorderColor?h.barBorderColor:h.barColor,_=this._series.model().paneForSource(this._series),f=_._properties.background.value(),m=r(u),g=r(f),s(m,g)<70&&(u=l(a(m))),y=0;y<4;y++)this._items[y].setColor(u)},o.prototype.items=function(){return this._invalidated&&(this._updateImpl(),this._invalidated=!1),this._items},o.prototype.dump=function(){return{header:this._header,items:this._items}},e.exports=o},function(e,t,i){"use strict";function o(e){var t,i;if(0===e.length)return!1;if(-1===(t=e.findIndex(function(e){return Object(l.coordinateIsValid)(e.y)})))return!1
;for(i=e.length-1;i>t&&!Object(l.coordinateIsValid)(e[i].y);)i--;return!(t>=i)}function n(e,t){var i,o,n,a,c,h=[],u=[],d=null;for(i=0;i<e.length;i++){if(o=e[i],n=e[i+1]||{},Object(l.coordinateIsValid)(o.y))o.y<=t&&h.push(o),o.y>=t&&u.push(o),d=o;else{if(null===d)continue;o=d}Object(l.coordinateIsValid)(n.y)&&((o.y>t&&n.y<t||o.y<t&&n.y>t)&&(Math.abs(o.x-n.x)<1?(a=new r.Point(o.x,t),h.push(a),u.push(a)):null!==(c=Object(s.intersectLineSegments)(o,n,new r.Point(o.x,t),new r.Point(n.x,t)))&&(a=o.add(n.subtract(o).scaled(c)),h.push(a),u.push(a))))}return{topItems:h,bottomItems:u}}var r,s,a,l,c,h,u;Object.defineProperty(t,"__esModule",{value:!0}),t.itemsRangeIsValid=o,t.splitItems=n,i.d(t,"PaneRendererBaseline",function(){return u}),r=i(6),i.n(r),s=i(128),i.n(s),a=i(31),i.n(a),l=i(29),c=i(78),h=i(9),u=function(){function e(){this._data=null}return e.prototype.setData=function(e){this._data=e},e.prototype.draw=function(e){var t,i,r,s,a,l,c,h,u,d,p,_,f,m,g;null!==this._data&&(t=this._data,i=t.items,r=t.baseLevelCoordinate,s=t.bottom,a=t.bottomFillColor1,l=t.bottomFillColor2,c=t.topFillColor1,h=t.topFillColor2,u=t.topLineColor,d=t.bottomLineColor,p=t.topLineWidth,_=t.bottomLineWidth,o(i)&&(f=n(i,r),m=f.topItems,g=f.bottomItems,e.lineCap="round",e.lineJoin="round",e.translate(.5,.5),0!==m.length&&(e.beginPath(),e.moveTo(m[0].x,r),this._makeLine(e,m,!0,0),e.closePath(),e.fillStyle=this._makeLinearGradient(e,c,h,r-s,r),e.fill(),e.beginPath(),this._makeLine(e,m,!1,0),e.lineWidth=p,e.strokeStyle=u,e.stroke()),0!==g.length&&(e.beginPath(),e.moveTo(g[0].x,r),this._makeLine(e,g,!0,1),e.closePath(),e.fillStyle=this._makeLinearGradient(e,a,l,r,r+s),e.fill(),e.beginPath(),this._makeLine(e,g,!1,1),e.lineWidth=_,e.strokeStyle=d,e.stroke())))},e.prototype.hitTest=function(e){var t,i,o,n,s,u,d,p,_,f,m;if(null===this._data)return null;for(t=this._data,i=t.items,o=t.topLineWidth,n=t.bottomLineWidth,s=Object(l.selectionTolerance)((o+n)/2),u=Object(c.lowerbound)(i,e,function(e,t){return e.x<=t.x}),d=Math.max(1,u-1),p=Math.min(i.length-1,u+1),_=d;_<=p;++_)if(f=i[_-1],m=i[_],Object(a.distanceToSegment)(new r.Point(f.x,f.y),new r.Point(m.x,m.y),new r.Point(e.x,e.y)).distance<=s)return new h.HitTestResult(h.HitTestResult.REGULAR);return null},e.prototype._makeLine=function(e,t,i,o){var n,r,s,a,c,h,u,d,p,_;if(null!==this._data&&-1!==(n=t.findIndex(function(e){return Object(l.coordinateIsValid)(e.y)})))for(r=this._data,s=r.barSpacing,a=r.baseLevelCoordinate,c=.25*s,u=t.length,d=n;d<u;d++)if(p=t[d],_=t[d+1]||{},Object(l.coordinateIsValid)(p.y)){if(0===o){if(h&&h.y>=a&&p.y>=a){e.moveTo(p.x,p.y);continue}}else if(h&&h.y<=a&&p.y<=a){e.moveTo(p.x,p.y);continue}if(h&&Object(l.coordinateIsValid)(h.y))e.lineTo(p.x,p.y),i&&!Object(l.coordinateIsValid)(_.y)&&e.lineTo(p.x,a);else if(_&&Object(l.coordinateIsValid)(_.y))i?(d!==n&&e.lineTo(p.x,a),e.lineTo(p.x,p.y)):e.moveTo(p.x,p.y);else if(i){if(0===d)continue;d!==n&&e.lineTo(p.x-c,a),e.lineTo(p.x-c,p.y),e.lineTo(p.x+c,p.y),e.lineTo(p.x+c,a)}else e.moveTo(p.x-c,p.y),e.lineTo(p.x+c,p.y);h=p}},
e.prototype._makeLinearGradient=function(e,t,i,o,n){var r=e.createLinearGradient(0,o,0,n);return r.addColorStop(0,t),r.addColorStop(1,i),r},e}()},function(e,t,i){"use strict";function o(){this._data=null}function n(e){this._series=e,this._invalidated=!0,this._renderer=new o}var r=i(6).Point,s=i(50).CompositeRenderer,a=i(136).DateFormatter,l=i(110).TimeFormatter,c=i(72).calcTextHorizontalShift;o.prototype.setData=function(e){this._data=e},o.prototype.hitTest=function(){return null},o.prototype.draw=function(e){var t,i,o,n,r,s,a,l,h,u,d,p,_,f,m,g,y,v,b;null!==this._data&&(t=5,i=12,o=5,n=8,r=13,s=0,e.save(),e.setFont(r+"px Arial"),h=$.t("Last available bar"),this._data.eod?s=e.measureText(h).width:(a=e.measureText(this._data.dateString||"").width,l=e.measureText(this._data.timeString||"").width,s=Math.max(a,l)),u=this._data.timeString?2:1,e.fillStyle=this._data.eod?"#FF4040":"#58A3CD",e.translate(this._data.point.x+.5,this._data.point.y+.5),d=Math.round(-s/2)-n,p=-(r+t)*u-t-i-o,_=Math.round(d+s+2*n),f=-i-o,e.beginPath(),e.moveTo(d,p),e.lineTo(_,p),e.lineTo(_,f),e.lineTo(i,f),e.lineTo(0,f+i),e.lineTo(-i,f),e.lineTo(d,f),e.fill(),e.fillStyle="#FFFFFF",e.textBaseline="middle",this._data.eod?(m=c(e,s),e.fillText(h,d+n+m,p+(f-p)/2)):(g=d+n+(s-a)/2,y=c(e,a),e.fillText(this._data.dateString,g+y,p+r/2+t),this._data.timeString&&(v=c(e,l),b=d+n+(s-l)/2,e.fillText(this._data.timeString,b+v,p+(r+t)*u-.5*r))),e.restore())},n.prototype.update=function(){this._invalidated=!0},n.prototype.updateImpl=function(){var e,t,i,o,n,s,c,h;delete this._point,delete this._dateString,delete this._timeString,delete this._eod,void 0!==(e=this._series.gotoDateResult())&&(t=this._series.model().timeScale().timePointToIndex(e.timestamp),i=this._series.bars(),o=null,t<i.firstIndex()&&null!==i.first()?(t=i.firstIndex(),o=i.first().value):t>i.lastIndex()&&null!==i.last()?(t=i.lastIndex(),o=i.last().value):o=i.valueAt(t),null!==o&&null!=(n=this._series.firstValue())&&(s=this._series.priceScale().priceToCoordinate(o[TradingView.HIGH_PLOT],n),c=this._series.model().timeScale().indexToCoordinate(t),this._point=new r(c,s),e.eod?this._eod=!0:(h=this._series.model().timeScale().indexToUserTime(t),this._dateString=(new a).format(h),this._series.isDWM()||(this._timeString=(new l).format(h)))))},n.prototype.renderer=function(){return this._invalidated&&(this.updateImpl(),this._invalidated=!1),this._point?(this._renderer.setData({point:this._point,dateString:this._dateString,timeString:this._timeString,eod:this._eod}),this._renderer):new s},e.exports=n},function(e,t,i){"use strict";function o(){this._data=null,this._colors=null}function n(e,t,i){this._series=e,this._lastBar=t,this._direction=i,this._renderer=new o}var r=i(7).ensureNotNull;i(282).ChartSession,i(5).getLogger("Chart.Snapshot");o.prototype.setData=function(e){this._data=e},o.prototype.setPredictCode=function(e){this._colors=this.getBackgroundColor(e)},o.prototype.hitTest=function(){return null},o.prototype.getBackgroundColor=function(e){return[{background:"rgba(255, 158, 171, 0.3)",line:"#7E202F"},{
background:"rgba(244, 255, 158, 0.3)",line:"#EBFF3F"},{background:"rgba(195, 255, 160, 0.3)",line:"#308020"}][e+1]},o.prototype.draw=function(e){if(null!==this._data&&null!==this._colors){e.fillStyle=this._colors.background,e.fillRect(Math.max(0,this._data.x),0,this._data.width,this._data.height),e.strokeStyle=this._colors.line,e.beginPath(),e.lineWidth=1;var t=Math.round(this._data.x);e.moveTo(t,0),e.lineTo(t,this._data.height),e.stroke()}},n.prototype.update=function(){this._x=this._series.m_model.timeScale().indexToCoordinate(this._lastBar)+.5*this._series.m_model.timeScale().barSpacing()+1},n.prototype.renderer=function(){var e={x:this._x,height:this._series.priceScale().height(),width:this._series.m_model.timeScale().width()},t=this._series.data().bars(),i=r(t.last()).value[TradingView.CLOSE_PLOT]>r(t.valueAt(this._lastBar))[TradingView.CLOSE_PLOT]?1:-1,o=0;return 1===this._direction?o=i:2===this._direction&&(o=-1*i),this._renderer.setData(e),this._renderer.setPredictCode(o),this._renderer},t.FutureBarsPaneView=n},function(e,t,i){"use strict";(function(t){var i=[{d:"E-Mini S&P 500",t:"ES"},{d:"E-Mini Nasdaq 100",t:"NQ"},{d:"Gold",t:"GC"},{d:"Silver",t:"SI"},{d:"Crude Oil WTI",t:"CL"},{d:"Natural Gas",t:"NG"},{d:"Australian Dollar",t:"6A"},{d:"Australian Dollar (Floor)",t:"AD"},{d:"Euro FX",t:"6E"},{d:"Euro FX (Floor)",t:"EC"},{d:"Corn",t:"ZC"},{d:"Corn (Floor)",t:"C"},{d:"Eurodollar",t:"GE"},{d:"Eurodollar (Floor)",t:"ED"}],o=function(){function e(e,t){var i=function(){};return i.prototype=t.prototype,e.prototype=new i,e}function o(e){return e.replace(/[\^\$\(\)\[\]\{\}\*\+\?\|\\]/g,"\\$&")}function n(){}function r(e){this.value=e}function s(){}function a(){}function l(){}function c(){}function h(){}function u(){}function d(){}function p(){}function _(e){this.value=e}function f(e){this.value=e}function m(e){this.value=e}function g(){_.apply(this,arguments)}function y(){f.apply(this,arguments)}function v(e,t){var i,o,n,s,a,l,c,h,u=[];e:for(;i=W.exec(e);){for(o=H.length;o--;)if(i[o+1]){H[o].ctor&&(n=new H[o].ctor(i[o+1]),n._offset=i.index,u.push(n));continue e}s=new m(i[0]),s._offset=i.index,u.push(s)}if(t&&t.recover)for(o=u.length;o--;)l=u[o],l instanceof f||l instanceof _?(void 0!==a&&(c=new _(""),h=u.splice(o,a-o+1,c),c.value=h.map(function(e){return e.value}).join("")),a=o):l instanceof r||(a=void 0);return u}function b(e){var i,o,n,c,h,u,d,p,g,y;if(t.enabled("charting_library_base"))return{currentState:"var"};for(i="init",o="var",n="operator",c=i,h={warnings:[],errors:[],isEmpty:!0},u=[],d=0;d<e.length;d++)if(!((p=e[d])instanceof r))if(delete h.isEmpty,p.isIncomplete&&(g={status:"incomplete",reason:"incomplete_token",offset:p._offset,token:p},p.incompleteSuggest&&(g.recover={append:p.incompleteSuggest()}),h.warnings.push(g),d!==e.length-1))g.status="error";else if(p instanceof _||p instanceof f){if(c===o){h.errors.push({status:"error",reason:"unexpected_token",offset:p._offset,token:p});continue}c=o}else if(p instanceof l){if(c!==o){h.errors.push({status:"error",reason:"unexpected_token",offset:p._offset,
token:p});continue}c=n}else if(p instanceof s){if(c===o){h.errors.push({status:"error",reason:"unexpected_token",offset:p._offset,token:p});continue}u.push(p),c=i}else if(p instanceof a){if(c!==o){h.errors.push({status:"error",reason:"unexpected_token",offset:p._offset,token:p});continue}y=u.pop(),y||h.errors.push({status:"error",reason:"unbalanced_brace",offset:p._offset,token:p,recover:{prepend:new s}}),c=o}else p instanceof m&&h.errors.push({status:"error",reason:"unparsed_entity",offset:p._offset,token:p});for(h.braceBalance=u.length,c!==o&&h.warnings.push({status:"incomplete"}),y=null;u.length;)p=u.pop(),g={status:"incomplete",reason:"unbalanced_brace",offset:p._offset,token:p},c===o&&(g.recover={append:new a}),h.warnings.push(g);return h.currentState=c,0===h.warnings.length&&delete h.warnings,0===h.errors.length&&delete h.errors,h}function S(e){var t,i=[];for(t=0;t<e.length;t++)e[t]instanceof r||i.push(e[t]);return i}function w(e){var t,i,o,n,r,c,h;for(e=S(e),t=[],i=[],n=0;n<e.length;n++)r=e[n],r instanceof l?i.length&&i[i.length-1].minPrecedence>r.precedence&&(i[i.length-1].minPrecedence=r.precedence):r instanceof s?i.push(o={minPrecedence:1/0,openBraceIndex:n}):r instanceof a&&(o=i.pop(),c=e[o.openBraceIndex-1],(h=e[n+1])instanceof l&&!(h.precedence<=o.minPrecedence)||!(!(c instanceof l)||c.precedence<o.minPrecedence||c.precedence===o.minPrecedence&&c.commutative)||(t.unshift(o.openBraceIndex),t.push(n),i.length&&i[i.length-1].minPrecedence>o.minPrecedence&&(i[i.length-1].minPrecedence=o.minPrecedence)));for(n=t.length;n--;)e.splice(t[n],1);return e}function T(e){for(var t=0;t<e.length;t++)e[t].parse&&e[t].parse();return e}function P(e){var t=x(e);return w(t?t:[new f("1"),new d,new s].concat(e).concat(new a))}function x(e){var t,i,o,n=0,c=1,h=2,u=3,p=n,_=0;for(i=0;i<e.length;i++)if(!((o=e[i])instanceof r))switch(p){case n:if(!(o instanceof f&&1==+o.value))return!1;p=c;break;case c:if(!(p===c&&o instanceof d))return!1;p=h,t=i+1;break;case h:if(o instanceof s)p=u,_=1;else if(o instanceof l)return!1;break;case u:o instanceof s?_++:o instanceof a&&--_<=0&&(p=h)}return e.slice(t)}function C(e){return new _(e).ticker()}function L(e){if("string"!=typeof e)throw new TypeError("expression must be a string");return e=v(e),e.filter(function(e){return e instanceof _}).map(function(e){return e.exchange()}).filter(function(e){return e})}function I(e){return e=L(e),1!==e.length?null:e[0]}function M(e,t){return e=L(e),e.some(function(e){return!!~t.indexOf((e||"").toUpperCase())})}function k(e){return M(e,["BATS"])}function A(e){return(e=I(e))&&-1!==e.toUpperCase().indexOf("_EOD")}function E(e){return M(e,["CHXEUR"])}function D(e){return M(e,["CHXJPY"])}function V(e){return M(e,pro.getProductsByType(pro.PRODUCT_TYPES.exchange).map(function(e){return e.exchange.toUpperCase()+"_DLY"}))}function O(e,t){return!!(e=I(e))&&e.substr(0,t.length)===t}function R(e){if("string"!=typeof e)throw new TypeError("expression must be a string");var t=w(S(v(e)));return t.forEach(function(e){e instanceof _&&e.exchange(null)}),z(t)}function B(e){
if("string"!=typeof e)throw new TypeError("expression must be a string");return z(w(S(v(e))))}function z(e){return e.join("")}var N,F,W,H=[{pattern:"(",ctor:s},{pattern:")",ctor:a},{pattern:"+",ctor:c},{pattern:"-",ctor:h},{pattern:"*",ctor:u},{pattern:"/",ctor:d},{pattern:"^",ctor:p},{pattern:/\d+(?:\.\d*|(?![a-zA-Z0-9_!:\.&]))|\.\d+/,ctor:f},{pattern:/\./,ctor:y},{pattern:t.enabled("charting_library_base")?/[a-zA-Z0-9_\u0370-\u1FFF_\u2E80-\uFFFF^][a-zA-Z0-9_\u0020\u0370-\u1FFF_\u2E80-\uFFFF_!:\.&]*|'.+?'/:/[a-zA-Z0-9_\u0370-\u1FFF_\u2E80-\uFFFF][a-zA-Z0-9_\u0020\u0370-\u1FFF_\u2E80-\uFFFF_!|:\.&]*|'.+?'/,ctor:_},{pattern:/'[^']*/,ctor:g},{pattern:/[\0-\x20\s]+/,ctor:r}];return n.prototype.toString=function(){return this.value},e(r,n),e(s,n),s.prototype.value="(",e(a,n),a.prototype.value=")",e(l,n),e(c,l),c.prototype.value="+",c.prototype.precedence=0,c.prototype.commutative=!0,e(h,l),h.prototype.value="-",h.prototype.precedence=0,h.prototype.commutative=!1,e(u,l),u.prototype.value="*",u.prototype.precedence=1,u.prototype.commutative=!0,e(d,l),d.prototype.value="/",d.prototype.precedence=1,d.prototype.commutative=!1,e(p,l),p.prototype.value="^",p.prototype.precedence=2,p.prototype.commutative=!1,N=/^'?(?:([A-Z0-9_]+):)?(.*?)'?$/i,F=/[\+\-\/\*]/,e(_,n),_.prototype.toString=function(){if(this.hasOwnProperty("_ticker")){var e=F.test(this._ticker)?"'":"";return e+(this._exchange?this._exchange+":":"")+this._ticker+e}return this.value},_.prototype.parse=function(){var e=N.exec(this.value);e[1]&&(this._exchange=e[1]),this._ticker=e[2]},_.prototype.parseAsFutures=function(){var e,t,o;for(this.hasOwnProperty("_ticker")||this.parse(),e=function(e){return i.some(function(t){return t.t===e})},t=2;t>=1;--t)if(o=this._ticker.slice(0,t),e(o)){this._root=o,this._contract=this._ticker.slice(t);break}},_.prototype.exchange=function(e){if(this.hasOwnProperty("_ticker")||this.parse(),!(arguments.length>0))return this._exchange;null===e||void 0===e?delete this._exchange:this._exchange=e+""},_.prototype.ticker=function(e){if(this.hasOwnProperty("_ticker")||this.parse(),!(arguments.length>0))return this._ticker;null===e||void 0===e?delete this._ticker:this._ticker=e+"",delete this._root,delete this._contract},_.prototype.root=function(e){if(this.hasOwnProperty("_root")||this.parseAsFutures(),!(arguments.length>0))return this._root;null===e||void 0===e?delete this._root:(this._root=e+"",this._root&&(this._ticker=this._root+(this._contract||"")))},_.prototype.contract=function(e){if(this.hasOwnProperty("_contract")||this.parseAsFutures(),!(arguments.length>0))return this._root;null===e||void 0===e?delete this._contract:(this._contract=e+"",this._root&&(this._ticker=this._root+this._contract))},e(f,n),f.prototype.toString=function(){return this.hasOwnProperty("_normalizedValue")?this._normalizedValue:this.value},f.prototype.parse=function(){this._normalizedValue=this.value.replace(/^0+|\.0*$/g,"").replace(/(\.\d*?)0+$/,"$1").replace(/^(\.|$)/,"0$1")},m.prototype.toString=function(){return this.value},e(g,_),g.prototype.isIncomplete=!0,
g.prototype.incompleteSuggest=function(){if("'"!==this.value)return"'"},e(y,f),y.prototype.isIncomplete=!0,W=RegExp(H.map(function(e){return"("+("string"==typeof e.pattern?o(e.pattern):e.pattern.source)+")"}).concat(".").join("|"),"g"),{tokenize:v,validate:b,factorOutBraces:w,normalizeTokens:T,flip:P,hasBatsSymbols:k,hasEodSymbols:A,hasChxeurSymbols:E,hasChxjpySymbols:D,hasFreeDelaySymbols:V,getExchange:I,isExchange:O,SymbolToken:_,IncompleteSymbolToken:g,NumberToken:f,BinaryOperatorToken:l,OpenBraceToken:s,CloseBraceToken:a,ticker:C,shortName:R,normalize:B}}();e.exports=o}).call(t,i(4))},function(e,t,i){"use strict";function o(e){function t(e,t){var i=e.font;return a.hasOwnProperty(i)||(a[i]={}),a[i].hasOwnProperty(t)||(a[i][t]=e.measureText(t).width),a[i][t]}function i(){var i=o.width(),a=o.height();return{draw:function(o){var c,h,u,d,p,_,f,m,g,y=e.symbolInfo();if(y){for(o.fillStyle=n.generateColor(l.color.value(),l.transparency.value()),c=y.name,/QUANDL/.test(y.exchange)&&(h=c.split(/\//),h.length&&(c=h[h.length-1])),u={description:y.description,pro_name:y.pro_name,short_name:y.name},d=[{text:c?c+", "+r(e.interval()):"",font:"96px Verdana, Arial, sans-serif",lineHeight:117,vertOffset:0},{text:s(u)||"",font:"48px Verdana, Arial, sans-serif",lineHeight:58,vertOffset:5}],p=0,_=0;_<d.length;_++)f=d[_],f.text&&(o.font=f.font,m=t(o,f.text),f.zoom=m>i?i/m:1,p+=f.lineHeight*f.zoom);for(g=Math.max((a-p)/2,0),_=0;_<d.length;_++)f=d[_],f.text&&(o.save(),o.translate(i/2,g),o.textBaseline="top",o.textAlign="center",o.font=f.font,o.scale(f.zoom,f.zoom),o.fillText(f.text,0,f.vertOffset),o.restore(),g+=f.lineHeight*f.zoom)}}}}var o=null,a={},l=e.model().properties().symbolWatermarkProperties,c={renderer:i,update:function(){}};this.paneViews=function(e){return e.containsMainSeries()?(o=e,[c]):[]}}var n=i(24),r=i(122).translatedIntervalString,s=i(278).getTranslatedSymbolDescription;t.Watermark=o},function(e,t,i){"use strict";function o(){this.visible=!0,this.horzLinesVisible=!0,this.horzLinesColor="white",this.horzLinesStyle="",this.vertLinesVisible=!0,this.vertLinesColor="white",this.vertLinesStyle=""}function n(e,t){this.source=e,this.pane=t,this._renderer=new r}function r(){this.data=null}o.prototype.paneViews=function(e){return[new n(this,e)]},n.prototype.update=function(){},n.prototype.renderer=function(){var e={};return this.pane.defaultPriceScale().isEmpty()||this.pane.timeScale().isEmpty()?null:(e.horzLinesVisible=!0,e.vertLinesVisible=!0,e.horzLinesColor=this.pane._model.properties().paneProperties.horzGridProperties.color.value(),e.vertLinesColor=this.pane._model.properties().paneProperties.vertGridProperties.color.value(),e.horzLineStyle=this.pane._model.properties().paneProperties.horzGridProperties.style.value(),e.vertLineStyle=this.pane._model.properties().paneProperties.vertGridProperties.style.value(),e.priceMarks=this.pane.defaultPriceScale().marks(),e.timeMarks=this.pane.timeScale().marks(),e.w=this.pane.width(),e.h=this.pane.height(),this._renderer.setData(e),this._renderer)},r.prototype.setData=function(e){
this.data=e},r.prototype.draw=function(e){var t;if(null!==this.data){if(e.lineWidth=1,this.data.vertLinesVisible){for(e.strokeStyle=this.data.vertLinesColor,CanvasEx.setLineStyle(e,this.data.vertLineStyle),e.beginPath(),t=0;t<this.data.timeMarks.length;t++)e.moveTo(this.data.timeMarks[t].coord+1,0),e.lineTo(this.data.timeMarks[t].coord+1,this.data.h);e.stroke()}if(this.data.horzLinesVisible){for(e.strokeStyle=this.data.horzLinesColor,CanvasEx.setLineStyle(e,this.data.horzLineStyle),e.beginPath(),t=0;t<this.data.priceMarks.length;t++)e.moveTo(0,this.data.priceMarks[t].coord),e.lineTo(this.data.w,this.data.priceMarks[t].coord);e.stroke()}}},t.Grid=o},function(e,t,i){"use strict";function o(e,t,i){this._magnetProperty=e,this._timeScale=t}var n=i(65).Series;o.prototype.align=function(e,t,i){var o,r,s,a,l,c,h,u,d,p,_=50,f=i.defaultPriceScale(),m=e;if(!this._magnetProperty.value())return m;for(o=f.dataSources(),r=null,s=0;s<o.length;s++)if(o[s]instanceof n){r=o[s];break}if(r&&(a=r.bars(),a.contains(t)&&(l=a.valueAt(t),c=[l[TradingView.OPEN_PLOT],l[TradingView.HIGH_PLOT],l[TradingView.LOW_PLOT],l[TradingView.CLOSE_PLOT]],f=r.priceScale(),!f.isEmpty()))){for(h=[],u=r.firstValue(),s=0;s<c.length;s++)h.push({y:f.priceToCoordinate(c[s],u),price:c[s]});d=f.priceToCoordinate(e,u),h.sort(function(e,t){return Math.abs(e.y-d)-Math.abs(t.y-d)}),p=h[0],Math.abs(p.y-d)<_&&(m=p.price)}return m},e.exports=o},function(e,t,i){"use strict";(function(e){function o(){return[$.t("Jan"),$.t("Feb"),$.t("Mar"),$.t("Apr"),$.t("May"),$.t("Jun"),$.t("Jul"),$.t("Aug"),$.t("Sep"),$.t("Oct"),$.t("Nov"),$.t("Dec")]}function n(t,i){this._options=Object.assign({},T,i),this._model=t,this._scalesProperties=t.properties().scalesProperties,this.m_width=0,this._baseIndex=null,this._defaultRightOffsetProperty=new f(w),this.m_rightOffset=w,this._defaultRightOffsetProperty.listeners().subscribe(this,function(e){this.setRightOffset(e.value())}),this.m_points=new u,this._barSpacingChanged=new e,this.m_barSpacing=S,this._options.preserveBarSpacing&&(this.m_barSpacing=this._scalesProperties.barSpacing.value()||S),this.m_scrollStartPoint=null,this.m_scaleStartPoint=null,this._commonTransitionStartState=null,this.m_tickmarks=new l,this._locked=!1,this._formattedBySpan={},this._onScroll=new e,this._visibleBars=null,this._visibleBarsInvalidated=!0,this._visibleBarsChanged=new e}var r=i(46).clamp,s=i(216).BarsRange,a=i(724),l=i(725),c=i(16),h=i(19).numberToStringWithLeadingZero,u=i(726).TimePoints,d=i(161),p=i(5).getLogger("Chart.TimeScale"),_=i(4),f=i(12),m=i(2).saveDefaultProperties,g=null,y=50,v=_.enabled("high_density_bars")?.025:.5,b=5,S=d.DEFAULT_BAR_SPACING,w=5,T={preserveBarSpacing:!1};n.prototype.tickMarks=function(){return this.m_tickmarks},n.prototype.reset=function(){this._visibleBarsInvalidated=!0,this.m_points=new u,this.m_scrollStartPoint=null,this.m_scaleStartPoint=null,this._clearCommonTransitionsStartState(),this.m_tickmarks.reset()},n.prototype.restoreDefault=function(){this._visibleBarsInvalidated=!0,this.setBarSpacing(S),this.resetRightOffset()},
n.prototype.restoreRightOffsetPropertyToDefault=function(){this._defaultRightOffsetProperty.setValue(w)},n.prototype.baseIndex=function(){return this._baseIndex||0},n.prototype.rightOffset=function(){return this.m_rightOffset},n.prototype.defaultRightOffsetProperty=function(){return this._defaultRightOffsetProperty},n.prototype.rightOffsetForTimePoint=function(e){var t=this.timeToCoordinate(e);return null===t?null:this._rightOffsetForCoordinate(t)},n.prototype._rightOffsetForCoordinate=function(e){return(this.m_width+1-e)/this.m_barSpacing},n.prototype.scrollToRealtime=function(e,t){var i,o,n,r,s=this._defaultRightOffsetProperty.value();if(s<0&&(s=w),e)return i=this,o=this.m_rightOffset,n=this.maxRightOffset(),n>0&&s>n&&(s=n),r=this._model,void $({offset:o}).animate({offset:s},{duration:1e3,easing:"easeInOutQuint",complete:t,step:function(e){i._visibleBarsInvalidated=!0,i.m_rightOffset=e,r.recalculateAllPanes(),r.invalidate(new c(c.LIGHT_UPDATE)),r.recalcVisibleRangeStudy(r.dataSources())}});this._visibleBarsInvalidated=!0,this.m_rightOffset=s,this._correctOffset(),void 0!==t&&t()},n.prototype.points=function(){return this.m_points},n.prototype.width=function(){return this.m_width},n.prototype.setWidth=function(e){if(isFinite(e)&&!(e<=0)&&this.m_width!==e){if(this._visibleBarsInvalidated=!0,this._locked&&this.m_width){var t=this.m_barSpacing*e/this.m_width;this._tryToUpdateBarSpacing(this.m_barSpacing,t)}this.m_width=e,this._correctOffset()}},n.prototype.barSpacing=function(){return this.m_barSpacing},n.prototype.setBarSpacing=function(e){if(void 0===e)return void p.logDebug("setBarSpacing: invalid argument");this._tryToUpdateBarSpacing(this.m_barSpacing,e)&&(this._correctOffset(),this._options.preserveBarSpacing&&(m(!0),this._scalesProperties.barSpacing.setValue(this.m_barSpacing),m(!1)))},n.prototype._tryToUpdateBarSpacing=function(e,t){return e!==t&&(this._visibleBarsInvalidated=!0,this.m_barSpacing=t,this._barSpacingChanged.fire(e,t),!0)},n.prototype.barSpacingChanged=function(){return this._barSpacingChanged},n.prototype.correctBarSpacing=function(){this.isEmpty()||this.points().size()<this.width()/this.barSpacing()&&(this.setRightOffset(w),this.setBarSpacing(Math.min(this.width()/(this.points().size()+this.rightOffset()),y)))},n.prototype.visibleBars=function(){return this._visibleBarsInvalidated&&(this._visibleBarsInvalidated=!1,this._updateVisibleBars()),this._visibleBars},n.prototype._updateVisibleBars=function(){var e,t,i,o,n;if(this.isEmpty())return void(null!==this._visibleBars&&(this._visibleBars=null,this._visibleBarsChanged.fire()));e=this.baseIndex(),t=Math.ceil(this.m_width/this.m_barSpacing)-1,i=Math.round(this.m_rightOffset+e),o=i-t,n=this._visibleBars,this._visibleBars=new s(o,i),null!==n&&this._visibleBars.equals(n)||this._visibleBarsChanged.fire()},n.prototype.isEmpty=function(){return 0===this.m_width||0===this.m_points.size()},n.prototype.indexToCoordinate=function(e,t){var i,o,n;return this.isEmpty()?0:TradingView.isInteger(e)?(i=this.baseIndex(),o=i+this.m_rightOffset-e,
n=this.m_width-(o+.5)*this.m_barSpacing,t?n:Math.round(n)):0},n.prototype.barIndexesToCoordinates=function(e){var t,i,o,n,r=this.baseIndex();for(t=0;t<e.length;t++)i=e[t].time,o=r+this.m_rightOffset-i,n=this.m_width-(o+.5)*this.m_barSpacing,e[t].time=Math.round(n),e[t].exactTime=n},n.prototype.indexesToCoordinates=function(e){var t,i,o,n=this.baseIndex(),r=n+this.m_rightOffset,s=this.m_width-r*this.m_barSpacing-.5*this.m_barSpacing;for(t=0;t<e.length;t++)i=e[t].x,o=s+i*this.m_barSpacing,e[t].x=Math.round(o)},n.prototype.coordinateToIndex=function(e){var t=this._rightOffsetForCoordinate(e),i=this.baseIndex(),o=i+this.m_rightOffset-t,n=Math.round(1e6*o)/1e6;return Math.ceil(n)},n.prototype.timeToCoordinate=function(e){function t(e){return e<=0||e>=l.m_width}var i,o,n,r=this.m_points.closestIndexLeft(e),s=this.m_points.valueAt(r),a=this.indexToCoordinate(r,!0),l=this;return t(a)?null:(i=this.barSpacing(),o=function(){var e=this.baseIndex();return this.m_points.valueAt(e)-this.m_points.valueAt(e-1)}.bind(this)(),n=Math.round(a+(e-s)/o*i)+1,t(n)?null:n)},n.prototype.alignCoordinate=function(e){if(this.isEmpty())return e;var t=this.coordinateToIndex(e);return this.indexToCoordinate(t)},n.prototype.timePointToIndex=function(e){return this.m_points.indexOf(e,!0)},n.prototype.indexToTimePoint=function(e){return this.m_points.valueAt(e)},n.prototype.indexToUserTime=function(e){return this.m_tickmarks.indexToTime(e)},n.prototype.marks=function(){var e,t,i,o,n,r,s,a,l,c,h,u;if(this.isEmpty())return null;for(e=this.m_barSpacing,t=this._scalesProperties.fontSize.value()||0,i=5*(t+4),o=Math.round(i/e),n=this.visibleBars(),r=Math.max(n.firstBar(),n.firstBar()-o),s=Math.max(n.lastBar(),n.lastBar()-o),a=this.m_tickmarks.build(e,i),l=[],c=0;c<a.length;++c)h=a[c],r<=h.index&&h.index<=s&&null!==(u=this.m_tickmarks.indexToTime(h.index))&&l.push({coord:this.indexToCoordinate(h.index),label:this.formatLabel(u,h.span),span:h.span,major:h.label>=d.DAY_SPAN?1:0});return l},n.prototype.state=function(e){var t={};return t.m_barSpacing=this.barSpacing(),t.m_rightOffset=e?this.m_rightOffset:this._defaultRightOffsetProperty.value(),e&&(t.points=this.m_points.state(),t.tickmarks=this.m_tickmarks.state(),t.width=this.m_width),t},n.prototype.restoreState=function(e,t){var i,o,n;return void 0===e.m_barSpacing?void p.logDebug("restoreState: invalid state"):void 0===e.m_rightOffset?void p.logDebug("restoreState: invalid state"):(i=e.m_barSpacing,o=e.m_rightOffset<0&&!t?w:e.m_rightOffset,n=o<0?w:Math.round(o),this._defaultRightOffsetProperty.setValue(n),this.m_rightOffset=o,t&&(this.m_points.restoreState(e.points),this.m_tickmarks.restoreState(e.tickmarks),e.width&&(this._locked=!0,this.m_width>0&&(i*=this.m_width/e.width))),this._tryToUpdateBarSpacing(this.m_barSpacing,i),void this._correctOffset())},n.prototype.setBaseIndex=function(e){if("number"!=typeof e)return void p.logDebug("setBaseIndex: invalid argument");this._visibleBarsInvalidated=!0,this._baseIndex=e,this._correctOffset()},n.prototype.setRightOffset=function(e){
if(void 0===e)return void p.logDebug("setRightOffset: invalid argument");this._visibleBarsInvalidated=!0,this.m_rightOffset=e,this._correctOffset()},n.prototype.resetRightOffset=function(){this.setRightOffset(this._defaultRightOffsetProperty.value())},n.prototype._correctOffset=function(){var e,t=this.maxRightOffset();this.m_rightOffset>t&&(this.m_rightOffset=t,this._visibleBarsInvalidated=!0),null!==(e=this.minRightOffset())&&this.m_rightOffset<e&&(this.m_rightOffset=e,this._visibleBarsInvalidated=!0)},n.prototype.minRightOffset=function(){var e=this.m_points.firstIndex(),t=this._baseIndex;return null===e||null===t?null:e-t-1+b},n.prototype.maxRightOffset=function(){return this.m_width/this.m_barSpacing-b},n.prototype.startScale=function(e){this.m_scrollStartPoint&&this.endScroll(),null===this.m_scaleStartPoint&&null===this._commonTransitionStartState&&(this.isEmpty()||(this.m_scaleStartPoint=e,this._saveCommonTransitionsStartState()))},n.prototype._saveCommonTransitionsStartState=function(){this._commonTransitionStartState={barSpacing:this.barSpacing(),rightOffset:this.rightOffset()}},n.prototype._clearCommonTransitionsStartState=function(){this._commonTransitionStartState=null},n.prototype.scaleTo=function(e){var t,i;null!==this._commonTransitionStartState&&(t=r(this.m_width-e,0,this.m_width),i=r(this.m_width-this.m_scaleStartPoint,0,this.m_width),0!==t&&0!==i&&this.setBarSpacing(this.getValidBarSpacing(this._commonTransitionStartState.barSpacing*t/i)))},n.prototype.getValidBarSpacing=function(e){return void 0===e&&(e=this.barSpacing()),e<v?v:e>y?y:e},n.prototype.isValidBarSpacing=function(e){return e>=v&&e<=y},n.prototype.endScale=function(){null!==this.m_scaleStartPoint&&(this.m_scaleStartPoint=null,this._clearCommonTransitionsStartState())},n.prototype.startScroll=function(e){null===this.m_scrollStartPoint&&null===this._commonTransitionStartState&&(this.isEmpty()||(this.m_scrollStartPoint=e,this._saveCommonTransitionsStartState()))},n.prototype.scrollTo=function(e){if(this._visibleBarsInvalidated=!0,null!==this.m_scrollStartPoint){var t=(this.m_scrollStartPoint-e)/this.barSpacing();this.m_rightOffset=this._commonTransitionStartState.rightOffset+t,this._correctOffset(),this._onScroll.fire()}},n.prototype.scrollToOffsetAnimated=function(e,t){var i,o,n,r;if(!isFinite(e))throw new RangeError("offset is required and must be finite number");if(void 0===t&&(t=400),!isFinite(t)||t<=0)throw new RangeError("animationDuration (optional) must be finite positive number");i=this,o=this.m_rightOffset,n=+new Date,r=this._model,function s(){i._visibleBarsInvalidated=!0;var a=(new Date-n)/t;if(a>=1)return i.m_rightOffset=e,i._visibleBarsInvalidated=!0,r.recalculateAllPanes(),void r.invalidate(new c(c.LIGHT_UPDATE));i.m_rightOffset=o+(e-o)*a,r.recalculateAllPanes(),setTimeout(s,20)}()},n.prototype.endScroll=function(){null!==this.m_scrollStartPoint&&(this.m_scrollStartPoint=null,this._clearCommonTransitionsStartState())},n.prototype.update=function(e,t,i,o){this._visibleBarsInvalidated=!0,i.length>0&&this.m_points.merge(e,t,i),
this.m_tickmarks.merge(o),this._correctOffset()},n.prototype.addTail=function(e,t,i){var o,n,r;for(this.m_tickmarks.removeTail(t),o=e.params,n=this.m_tickmarks.maxIndex+(i?0:1),r=0;r<o.marks.length;r++)o.marks[r].index=n+r;this.m_tickmarks.addTail(o.marks),this.m_points.addTail(o.changes,i),this.m_rightOffset-=o.changes.length},n.prototype.formatLabel=function(e,t){if(this._formattedBySpan[t])return this._formattedBySpan[t].format(e.valueOf());var i=this;return this._formattedBySpan[t]=new a(function(e){return i.formatLabelImpl(new Date(e),t)}),this._formattedBySpan[t].format(e)},n.prototype.formatLabelImpl=function(e,t){if(!(e&&e instanceof Date))return"incorrect time";var i=this._model.mainSeries().isDWM();return t<d.MINUTE_SPAN&&!i?h(e.getUTCHours(),2)+":"+h(e.getUTCMinutes(),2)+":"+h(e.getUTCSeconds(),2):t<d.DAY_SPAN&&!i?h(e.getUTCHours(),2)+":"+h(e.getUTCMinutes(),2):t<d.WEEK_SPAN?e.getUTCDate():t<d.MONTH_SPAN?e.getUTCDate():t<d.YEAR_SPAN?(g||(g=o()),g[e.getUTCMonth()]):e.getUTCFullYear()},n.prototype.normalizeBarIndex=function(e){var t=0,i=0,o=this.baseIndex();return e<this.m_points.firstIndex()?(t=this.m_points.valueAt(this.m_points.firstIndex()),i=e-this.m_points.firstIndex()):e>o?(t=this.m_points.valueAt(o),i=e-o):(t=this.m_points.valueAt(e),i=0),{time_t:t,offset:i}},n.prototype.denormalizeTimePoint=function(e){var t=this.m_points.indexOf(e.time_t);if(null!==t)return t+e.offset},n.prototype.zoomToBarsRange=function(e,t){if(!(t<=e)){var i=this.baseIndex();this.m_rightOffset=t-i,this.setBarSpacing(this.width()/(t-e+1)),this._visibleBarsInvalidated=!0}},n.prototype.canZoomIn=function(){return this.m_barSpacing<y},n.prototype.canZoomOut=function(){return this.m_barSpacing>v},n.prototype.minBarSpacing=function(){return v},n.prototype.maxBarSpacing=function(){return y},n.prototype.onScroll=function(){return this._onScroll},n.prototype.preserveBarSpacing=function(){return this._options.preserveBarSpacing},n.prototype.visibleBarsChanged=function(){return this._visibleBarsChanged},t.TimeScale=n}).call(t,i(8))},function(e,t,i){"use strict";function o(e,t){this._formatter=e,this._maxSize=t||50,this._actualSize=0,this._cache={},this._usageTick=1,this._oldestTick=1,this._tick2Labels={}}o.prototype.format=function(e){var t,i;return this._cache[e]?this._cache[e].string:(this._actualSize===this._maxSize&&(t=this._tick2Labels[this._oldestTick],delete this._tick2Labels[this._oldestTick],delete this._cache[t],this._oldestTick++,this._actualSize--),i=this._formatter(e),this._cache[e]={string:i,tick:this._usageTick},this._tick2Labels[this._usageTick]=e,this._actualSize++,this._usageTick++,i)},e.exports=o},function(e,t,i){"use strict";(function(t){function i(){this._marksByIndex={},this._marksBySpan=[],this.changed=new t}i.prototype.reset=function(){this._marksByIndex={},this._marksBySpan=[],delete this.minIndex,delete this.maxIndex,delete this._cache,this.changed.fire()},i.prototype.minIndex=void 0,i.prototype.maxIndex=void 0,i.prototype.merge=function(e){var t,i,o,n,r,s=this._marksBySpan,a={};for(t=0;t<e.length;t++){if(i=e[t],
o=i.index,n=i.span,r=this._marksByIndex[i.index]){if(r.index===i.index&&r.span===i.span){r.time=i.time;continue}this._removeTickmark(r)}this._marksByIndex[o]=i,this.minIndex<=o||(this.minIndex=o),this.maxIndex>=o||(this.maxIndex=o),s[n]||(s[n]=[]),s[n].push(i),a[n]=!0}for(n=s.length;n--;)s[n]&&(s[n].length||delete s[n],a[n]&&s[n].sort(this._sortByIndexAsc));delete this._cache,this.changed.fire()},i.prototype._removeTickmark=function(e){var t,i,o=e.index;this._marksByIndex[o]===e&&(delete this._marksByIndex[o],o<=this.minIndex&&this.minIndex++,o>=this.maxIndex&&this.maxIndex--,this.maxIndex<this.minIndex&&(delete this.minIndex,delete this.maxIndex),t=this._marksBySpan[e.span],-1!==(i=t.indexOf(e))&&t.splice(i,1))},i.prototype._sortByIndexAsc=function(e,t){return e.index-t.index},i.prototype.removeTail=function(e){var t,i={};this.maxIndex=0;for(t in this._marksByIndex)this._marksByIndex[t].time<e&&(i[t]=this._marksByIndex[t],this.maxIndex=Math.max(this.maxIndex,t));this._marksByIndex=i},i.prototype.addTail=function(e){for(var t=0;t<e.length;t++)e[t].index=this.maxIndex+t+1;this.merge(e)},i.prototype.indexToTime=function(e){var t=this._marksByIndex[e];return t?new Date(1e3*t.time):null},i.prototype.density=function(){var e,t=this.maxIndex-this.minIndex;if(0!==t)return e=this._marksByIndex[this.maxIndex].time-this._marksByIndex[this.minIndex].time,1e3*e/t},i.prototype.estimateLeft=function(e){var t,i=this.density();if(i)return t=1e3*this._marksByIndex[this.minIndex].time-e,t/i},i.prototype.nearestIndex=function(e){for(var t,i=this.minIndex,o=this.maxIndex;o-i>2;){if(1e3*this._marksByIndex[i].time===e)return i;if(1e3*this._marksByIndex[o].time===e)return o;t=Math.round((i+o)/2),1e3*this._marksByIndex[t].time>e?o=t:i=t}return i},i.prototype.build=function(e,t){var i,o,n,r,s,a,l,c,h,u,d,p,_,f,m=Math.ceil(t/e);if(this._maxbar===m&&this._cache)return this._cache;for(this._maxbar=m,i=[],o=this._marksBySpan.length;o--;)if(this._marksBySpan[o]){for(n=i,i=[],r=n.length,s=0,a=this._marksBySpan[o],l=a.length,c=1/0,h=-1/0,u=0;u<l;u++){for(d=a[u],p=d.index;s<r;){if(_=n[s],!((f=_.index)<p)){c=f;break}s++,i.push(_),h=f,c=1/0}c-p>=m&&p-h>=m&&(i.push(d),h=p)}for(;s<r;s++)i.push(n[s])}return this._cache=i,this._cache},i.prototype.state=function(){var e,t=[];for(e=this._marksBySpan.length;e--;)this._marksBySpan[e]&&(t=t.concat(this._marksBySpan[e]));return t=t.map(function(e){return[e.span,e.time,e.index]}),{marks:t,version:2}},i.prototype.restoreState=function(e){if(this._marksByIndex={},this._marksBySpan=[],delete this.maxIndex,delete this.minIndex,e&&e.marks&&e.marks.length)if(2===e.version){var t=e.marks.map(function(e){return{span:e[0],time:e[1],index:e[2]}});this.merge(t)}else this.merge(e.marks)},e.exports=i}).call(t,i(8))},function(e,t,i){"use strict";var o,n,r;Object.defineProperty(t,"__esModule",{value:!0}),i.d(t,"TimePoints",function(){return r}),o=i(5),n=Object(o.getLogger)("Chart.TimePoints"),r=function(){function e(){this._zoffset=0,this._items=[]}return e.prototype.clear=function(){this._zoffset=0,this._items=[]},
e.prototype.size=function(){return this._items.length},e.prototype.firstIndex=function(){return this._offsetToIndex(0)},e.prototype.lastIndex=function(){return this._offsetToIndex(this._items.length-1)},e.prototype.merge=function(e,t,i){var o,r,s,a,l,c,h,u;if(0===i.length)return n.logError("merge: 'values' does not contain any time points"),[];if(t>this._zoffset&&e+t>0)return n.logError("merge: when the first time point index is updated, we should fill the time points starting from the first one"),[];if(0===this._items.length)return this._items=i,this._zoffset=t,[{change:"rebuild",index:this._validOffsetToIndex(0)}];if((o=e+this._zoffset)<0){if(r=Math.abs(o),i.length<r)return n.logError("merge: 'values' does not contain enough time points to fill in the new items. 'index': "+e+", previous 'zoffset': "+this._zoffset+", new 'zoffset': "+t+", 'values.length': "+i.length),[];for(this._items=Array(r).concat(this._items),this._zoffset=t,s=0;s<i.length;++s)this._items[e+s+t]=i[s];return[{change:"rebuild",index:this._validOffsetToIndex(0)}]}for(a=[],l=o;l<this._items.length&&l-o<i.length;++l)this._items[l]=i[l-o],a.push({change:"update",index:this._validOffsetToIndex(l),value:i[l-o]});if((c=o+i.length)>this._items.length)for(r=c-this._items.length,h=l;h<l+r;++h)u=this._items.length,this._items.push(i[h-o]),a.push({change:"append",index:this._validOffsetToIndex(u),value:i[h-o]});return this._zoffset=t,a},e.prototype.addTail=function(e,t){for(var i=t?1:0;i<e.length;i++)this._items.push(e[i])},e.prototype.remove=function(e){var t,i,o,n=this._indexToOffset(e);if(null===n)return[];for(t=this._items.splice(n),i=[],o=0;o<t.length;o++)i.push({change:"remove",index:e+o,value:t[o]});return i},e.prototype.valueAt=function(e){var t=this._indexToOffset(e);return null!==t?this._items[t]:null},e.prototype.indexOf=function(e,t){if(this._items.length<1)return null;if(e>this._items[this._items.length-1])return t?this._validOffsetToIndex(this._items.length-1):null;for(var i=0;i<this._items.length;++i){if(e===this._items[i])return this._validOffsetToIndex(i);if(e<this._items[i])return t?this._validOffsetToIndex(i):null}return null},e.prototype.state=function(){return{items:this._items,zoffset:this._zoffset}},e.prototype.restoreState=function(e){null!==e&&(this._items=e.items,this._zoffset=e.zoffset)},e.prototype.roughTime=function(e,t){var i,o,n,r,s,a,l,c,h,u,d,p;return void 0===t&&(t=null),null!==(i=this.valueAt(e))?i:(o=this._items,!o.length||o.length<2?null:(n=0,r=o.length-1,s=this._validOffsetToIndex(n),a=this._validOffsetToIndex(r),l=o[n],c=o[r],h=(c-l)/(a-s),e<s?(u=s-e,d=u*h,l-d):(p=500,e>a?(u=e-a)<p&&null!=t?t(c,u):(d=u*h,c+d):null)))},e.prototype.roughIndex=function(e,t){var i,o,n,r,s,a,l,c,h,u,d,p;return void 0===t&&(t=null),i=this._items,!i.length||i.length<2?null:(o=0,n=i.length-1,r=this._validOffsetToIndex(o),s=this._validOffsetToIndex(n),a=i[o],l=i[n],e>=a&&e<=l?this.closestIndexLeft(e):(c=(l-a)/(s-r),e<a?(h=a-e,u=Math.round(h/c),r-u):(d=500,e>l?(h=e-l,u=Math.trunc(h/c),u<d&&null!==t&&(p=t(l,e),p.success&&(u=p.result)),s+u):null)))
},e.prototype.closestIndexLeft=function(e){var t,i,o,n,r,s,a=this._items;if(!a.length)return null;if(Number.isNaN(e))return null;if(t=a.length-1,i=a[t],e>=i)return this._validOffsetToIndex(t);if(o=0,n=a[o],e<n)return null;if(e===n)return this._validOffsetToIndex(o);for(;t>o+1;)if(r=o+t>>1,(s=a[r])>e)t=r;else{if(!(s<e))return s===e?this._validOffsetToIndex(r):null;o=r}return this._validOffsetToIndex(o)},e.prototype._validOffsetToIndex=function(e){return e-this._zoffset},e.prototype._offsetToIndex=function(e){return 0<=e&&e<this.size()?this._validOffsetToIndex(e):null},e.prototype._indexToOffset=function(e){var t=e+this._zoffset;return 0<=t&&t<this.size()?t:null},e}()},function(e,t,i){"use strict";function o(e,t){this.tooltips={},this.tooltipFactory=e,this.source=t}function n(e,t){this.renderer=e,this._tooltip=t,this.visible=!1}o.prototype.findOrCreateTooltip=function(e){var t=this.tooltips[e.id];return null==t&&(e.hovered||e.pinned)&&(t=this._createTooltip(),this.tooltips[e.id]=t),t},o.prototype.showPlate=function(e,t){var i=this.findOrCreateTooltip(e);null!=i&&(i._drawPlate(e,t),i.plateData=e)},o.prototype.draw=function(e,t){this.hoveredId=null;for(var i=0;i<e.length;i++)e[i].hovered&&(this.hoveredId=e[i].id);e.forEach(function(e){this.showPlate(e,t)}.bind(this))},o.prototype.endDraw=function(){var e,t,i=this;for(e in this.tooltips)this.tooltips.hasOwnProperty(e)&&(t=this.tooltips[e],t.toggleVisibility(),i.hoveredId&&t.plateData.id!==i.hoveredId&&!t.plateData.pinned&&(t.remove(),delete this.tooltips[e]))},o.prototype.removeAll=function(){var e,t;for(e in this.tooltips)this.tooltips.hasOwnProperty(e)&&(t=this.tooltips[e],t.remove());this.tooltips={}},o.prototype.removeTooltip=function(e){delete this.tooltips[e]},o.prototype._createTooltip=function(){return new n(this,this.tooltipFactory())},n.prototype._drawPlate=function(e,t){var i=this;this.visible=!0,this._tooltip.setSource(this.renderer.source),this._tooltip.showPlate(e,t),e.hovered||e.pinned||this._tooltip.hide(function(){i.renderer.removeTooltip(e.id)})},n.prototype.remove=function(){this._tooltip._removeLayout()},n.prototype.toggleVisibility=function(){this._tooltip._toggleLayout(this.visible),this.visible=!1},t.TooltipRenderer=o},function(e,t,i){"use strict";function o(e){var t,i;if(e&&e.__esModule)return e;if(t={},null!=e)for(i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t,i){var o,n=2*F,r=document.createElement("canvas");return r.width=t*n,r.height=i*n,r.style.width=t+"px",r.style.height=i+"px",o=r.getContext("2d"),o.setTransform(n,0,0,n,0,0),o.drawImage(e,0,0,t,i),r}function s(e,t){return function(){i.e(21).then(function(){W=i(935),e.call(t)}.bind(null,i)).catch(i.oe)}}function a(e){return!y||e>v}var l,c,h,u,d,p,_,f,m,g,y,v,b,S,w,T,P,x,C,L,I,M,k,A,E,D,V,O,R,B,z,N,F,W,H,j;Object.defineProperty(t,"__esModule",{value:!0}),t.Branding=void 0,l=function(){function e(e,t){var i,o;for(i=0;i<t.length;i++)o=t[i],
o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}(),c=i(6),h=i(61),u=i(4),d=o(u),p=i(9),_=i(186),f=i(24),m=i(258).debounce,g=i(729),y=d.enabled("adaptive_logo"),v=500,b="TradingView",S="Ch{0}ar{1}t{2}by{3}{4}".format("",""," "," ",b),w="po{0}wer{1}ed{2}by{3}{4}".format("",""," "," ",b),T="site_branding",P="widget_branding",x="widget_referral_branding",C="widget_custom_branding",L="widget_custom_no_powered_branding",I="fundamental_branding",M="fundamental_custom_branding",k="fundamental_custom_no_powered_branding",A="library_branding",E="library_custom_branding",D="library_custom_no_powered_branding",V=.2,O=navigator.userAgent.toLowerCase().indexOf("firefox")>-1,R=O&&navigator.userAgent.toLowerCase().indexOf("windows")>-1,B=navigator.userAgent.toLowerCase().indexOf("chrome")>-1&&-1===navigator.userAgent.toLowerCase().indexOf("edge"),z=function(){var e,t=window.navigator.userAgent,i=t.indexOf("MSIE ");return i>0?parseInt(t.substring(i+5,t.indexOf(".",i)),10):t.indexOf("Trident/")>0&&(e=t.indexOf("rv:"),parseInt(t.substring(e+3,t.indexOf(".",e)),10))}(),N=window.urlParams||{},window.initData,F=window.hidpiCanvasRatio||1,W=null,H=function(){function e(t){var i=t.layout,o=void 0===i?T:i,r=t.symbol,a=void 0===r?"":r,l=t.model,c=t.onReadyCallback;n(this,e),this._model=l,this._image=null,this._imageReady=!1,this._needDisplay=!1,this._imageWidth=22,this._imageHeight=13,this.show=!0,this.width=100,this.height=14,this._bottomShift=0,this._brandCircleSize=32,this._layout=o,this._symbol=a,this._fillColor=_.color.brandNew,this._colorOldBlue=_.color.brandDown,this._colorOldGray=_.color.black30,this._strokeColor=_.color.black255,this._brandCircleColor=_.color.black255,this._brandCircleShadowColor=_.color.black0,this._strokeWidth=4,this._fontSize=14,this._font='px "Trebuchet MS", Tahoma, Arial, sans-serif',this._txt="TradingView",this._onReadyCallback=c,this._upscaleRatio=B?1:2,this._strokeCanv=null,this._fillCanv=null,z&&(this._init=s(this._init,this)),this._init()}return l(e,[{key:"_init",value:function(){this._checkLayout(),this.show&&(this._loadImage(g,"tvLogo"),this._updateStrokeColor(),this._model.properties().paneProperties.background.subscribe(this,this._updateStrokeColor),this._model.onChartThemeLoaded().subscribe(this,this._updateStrokeColor))}},{key:"_updateStrokeColor",value:function(){var e=(0,f.getLuminance)(this._model.properties().paneProperties.background.value());this._strokeCanv=null,this._fillCanv=null,e>V?(this._brandCircleShadowopacity=.09,this._strokeOpacity=.8,this._circleOpacity=1):(this._brandCircleShadowopacity=.16,this._strokeOpacity=.1,this._circleOpacity=.1)}},{key:"_loadImage",value:function(e,t){var i=this;this._needDisplay&&(this._image=new Image,this._image.src=z?W.fallbackImages[t]:"data:image/svg+xml;charset=utf-8,"+encodeURIComponent(e),this._image.addEventListener("load",function(){R&&(i._image=r(i._image,i._imageWidth,i._imageHeight)),i._imageReady=!0,
"function"==typeof i._onReadyCallback&&i._onReadyCallback()}))}},{key:"_checkLayout",value:function(){switch(this._layout){case P:case x:case C:case I:case M:case E:case A:this.show=!0;break;case T:case L:case k:case D:this.show=!1}switch(this._layout){case A:this._needDisplay=!0,this._txt=$.t(S);break;case E:this._txt=$.t(w)}}},{key:"_drawTextStroke",value:function(e){var t,i;this._strokeCanv||(this._strokeCanv=document.createElement("canvas"),t=this._strokeCanv.getContext("2d"),i=Math.round(this._strokeWidth*this._upscaleRatio),t.font=this._fontSize*this._upscaleRatio+this._font,this._textWidth=t.measureText(this._txt).width,this._strokeCanv.width=(this._textWidth+2*i)*F,this._strokeCanv.height=(this._fontSize+2*i)*this._upscaleRatio*F,this._strokeCanv.width%2==0&&(this._strokeCanv.width+=1,this._strokeCanv.height+=1),t.textBaseline="top",t.textAlign="start",t.font=this._fontSize*this._upscaleRatio+this._font,t.strokeStyle=this._strokeColor,t.lineWidth=this._strokeWidth*this._upscaleRatio*F,t.lineJoin="round",t.strokeText(this._txt,i,O?4:0)),e.save(),e.globalAlpha=this._strokeOpacity,e.drawImage(this._strokeCanv,0,0,this._strokeCanv.width,this._strokeCanv.height,0,0,this._strokeCanv.width/this._upscaleRatio/F,this._strokeCanv.height/this._upscaleRatio/F),e.restore()}},{key:"_drawTextFill",value:function(e){var t,i;this._fillCanv||(this._fillCanv=document.createElement("canvas"),t=this._fillCanv.getContext("2d"),i=Math.round(this._strokeWidth*this._upscaleRatio),this._fillCanv.width=(this._textWidth+2*i)*F,this._fillCanv.height=(this._fontSize+2*i)*this._upscaleRatio*F,this._fillCanv.width%2==0&&(this._fillCanv.width+=1,this._fillCanv.height+=1),t.textBaseline="top",t.textAlign="start",t.font=this._fontSize*this._upscaleRatio+this._font,t.fillStyle=this._fillColor,t.fillText(this._txt,i,O?4:0)),e.save(),e.drawImage(this._fillCanv,0,0,this._fillCanv.width,this._fillCanv.height,0,0,this._fillCanv.width/this._upscaleRatio/F,this._fillCanv.height/this._upscaleRatio/F),e.restore()}},{key:"_drawBgCircle",value:function(e){e.save(),e.beginPath(),e.fillStyle=this._brandCircleShadowColor,e.globalAlpha=this._brandCircleShadowopacity,e.arc(this._imageWidth/2,this._imageHeight/2,this._brandCircleSize/2+1,0,2*Math.PI),e.fill(),e.closePath(),e.restore(),e.save(),e.beginPath(),e.globalAlpha=this._circleOpacity,e.fillStyle=this._brandCircleColor,e.arc(this._imageWidth/2,this._imageHeight/2,this._brandCircleSize/2,0,2*Math.PI,!1),e.fill(),e.closePath(),e.restore()}},{key:"bottomShift",value:function(){return this._bottomShift}},{key:"draw",value:function(e,t){var i,o,n,r,s,l;this._layout===C||this._layout===M?(i='12px "Trebuchet MS", Tahoma, Arial, sans-serif',e.font=i,o=e.measureText(this._txt).width,this.width=o+e.measureText("TradingView").width,e.save(),e.globalAlpha=.7,e.fillStyle=this._colorOldGray,e.fillText(this._txt,0,12),e.fillStyle=this._colorOldBlue,e.fillText("TradingView",o,12),e.restore()):this._needDisplay&&this._imageReady?(e.save(),n=(this._brandCircleSize-this._imageWidth)/2,e.translate(n,0),this._drawBgCircle(e),
e.drawImage(this._image,0,-.5,this._imageWidth,this._imageHeight),r=12+(B?-.5:0),e.translate(this._imageWidth+r,-.5),s=a(t),s&&(this._drawTextStroke(e),this._drawTextFill(e)),e.restore(),this.width=this._imageWidth+n,this.width+=s?r+this._strokeCanv.width/this._upscaleRatio/F:n,this.height=this._brandCircleSize,this._bottomShift=this._brandCircleSize-this._imageHeight):(e.save(),e.translate(0,0),l=a(t),l&&(this._drawTextStroke(e),this._drawTextFill(e)),e.restore(),l&&(this.width=this._strokeCanv.width/this._upscaleRatio/F))}}]),e}(),j=function(){function e(t){var i=t.layout,o=void 0===i?T:i,r=t.src,a=t.onReadyCallback;n(this,e),this._img=new Image,this._ready=!1,this.show=!1,this.width=0,this.height=0,this._layout=o,this._src=r,this._onReadyCallback=a,z&&(this._init=s(this._init,this)),this._init()}return l(e,[{key:"_init",value:function(){var e,t,i=this;this._checkLayout(),this.show&&(e=this._src.match(/(\w+)\.svg/),z&&e&&2===e.length?(t=e[1],this._img.src=W.fallbackImages[t],this._img.addEventListener("load",function(){var e=W.logoSizes;t in e?(i.width=e[t].width,i.height=e[t].height):(i.width=135,i.height=25),i._ready=!0,"function"==typeof i._onReadyCallback&&i._onReadyCallback()})):(this._img.src=this._src,this._img.addEventListener("load",function(){i.width=Math.round(i._img.width),i.height=Math.round(i._img.height),R&&(i._img=r(i._img,i.width,i.height)),i._ready=!0,"function"==typeof i._onReadyCallback&&i._onReadyCallback()})))}},{key:"_checkLayout",value:function(){switch(this._layout){case C:case L:case M:case k:case E:case D:this.show=!0;break;case T:case P:case x:case I:case A:this.show=!1}}},{key:"draw",value:function(e){this._ready&&e.drawImage(this._img,0,0,this.width,this.height)}}]),e}(),t.Branding=function(){function e(t){var i,o=this;n(this,e),this._model=t,this._mainSeries=this._model.mainSeries(),this._canvasWidth=0,this._paneHeight=0,this._left=13,this._bottom=24,this._layout=T,this._needToShow=!0,this._customLogoSrc="",this._customLogoLink="",this._checkLayout(),this._layout!==C&&this._layout!==M||(this._left=8,this._bottom=5),i=function(){o._needToShow?o._layout===T?o._showBranding=window.innerWidth>=768:o._showBranding=!0:o._showBranding=!1},this._resizeHandlerDelayed=m(i,200),i(),window.addEventListener("resize",this._resizeHandlerDelayed),this._model.isSnapshot()?this._init():this._mainSeries.onSymbolResolved().subscribe(this,this._init)}return l(e,[{key:"destroy",value:function(){window.removeEventListener("resize",this._resizeHandlerDelayed)}},{key:"_init",value:function(){var e=this,t=this._mainSeries.symbolInfo()||{};this._powBy=new H({layout:this._layout,symbol:t.name,model:this._model,onReadyCallback:function(){return e._model.fullUpdate()}}),this._custom=new j({layout:this._layout,src:this._customLogoSrc,onReadyCallback:function(){return e._model.fullUpdate()}})}},{key:"_checkLayout",value:function(){if(d.enabled("widget"));else if(d.enabled("charting_library")||d.enabled("amp_terminal")||d.enabled("cqg_terminal")||d.enabled("trading_terminal")){var e=JSON.parse(N.logo)||{}
;e.image?(this._customLogoSrc=e.image,this._customLogoLink=e.link,this._needToShow=d.enabled("widget_logo"),d.enabled("link_to_tradingview")?this._layout=E:this._layout=D):(this._layout=A,this._needToShow=d.enabled("widget_logo"))}else this._layout=T}},{key:"updateAllViews",value:function(){}},{key:"priceScale",value:function(){}},{key:"priceAxisViews",value:function(){}},{key:"onClickOutside",value:function(){}},{key:"hasContextMenu",value:function(){return!1}},{key:"hitTest",value:function(e){var t=this;return!this._showBranding||d.enabled("logo_without_link")?null:this._powBy&&this._layout!==T&&this._layout!==L&&this._layout!==k&&(0,h.pointInRectangle)(e,new c.Point(this._left,this._paneHeight-this._bottom+this._powBy.bottomShift()/2-Math.max(this._powBy.height,void 0!==this._custom?this._custom.height:0)),new c.Point(this._left+Math.max(this._powBy.width,void 0!==this._custom?this._custom.width:0),this._paneHeight-this._bottom+this._powBy.bottomShift()/2))?new p.HitTestResult(p.HitTestResult.CUSTOM,{mouseUpHandler:function(){window.open(t.tvUrl(),"_blank").opener=null}}):null}},{key:"tvUrl",value:function(){var e,t="https://www.tradingview.com/";if(this._customLogoLink)return this._customLogoLink;if(this._layout===A||this._layout===E){switch(e=void 0,!0){case d.enabled("charting_library"):e="library";break;case d.enabled("trading_terminal"):case d.enabled("amp_terminal"):case d.enabled("cqg_terminal"):e="trading-terminal"}return t+="/"===t[t.length-1]?"?":"&",t+="utm_source="+window.location.origin+"&utm_medium=library"+(e?"&utm_campaign="+e:"")}return t}},{key:"draw",value:function(e){if(this._showBranding){var t=0;this._powBy&&this._powBy.show&&(t=this._powBy.height-this._powBy.bottomShift(),e.save(),e.translate(this._left,this._paneHeight-this._bottom-t),this._powBy.draw(e,this._canvasWidth),e.restore()),this._custom&&this._custom.show&&(e.save(),e.translate(this._left,this._paneHeight-this._bottom-t-this._custom.height),this._custom.draw(e),e.restore())}}},{key:"renderer",value:function(e,t){return this._paneHeight=this._pane.height(),this._canvasWidth=t,{draw:this.draw.bind(this),hitTest:this.hitTest.bind(this)}}},{key:"paneViews",value:function(e){var t=d.enabled("move_logo_to_main_pane");return t&&e.isMainPane()||!t&&e.isLast()||e.isMaximized()?(this._pane=e,[{renderer:this.renderer.bind(this)}]):[]}}]),e}()},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 13" width="22" height="13"><path fill="#37A6EF" fill-rule="nonzero" d="M19.354 4.932c.379.55.611 1.207.642 1.918A3.007 3.007 0 0 1 22 9.686a3.003 3.003 0 0 1-3 3.006H4a3.983 3.983 0 0 1-2.814-1.16l6.363-5.048a1.657 1.657 0 0 0 1.495.037l3.034 2.66a1.672 1.672 0 0 0 1.589 2.175 1.668 1.668 0 0 0 1.552-2.28l4.135-4.144zm-.942-.945L14.276 8.13a1.66 1.66 0 0 0-1.32.044l-3.034-2.66A1.672 1.672 0 0 0 8.333 3.34a1.668 1.668 0 0 0-1.611 2.097l-6.316 5.01A3.999 3.999 0 0 1 0 8.683a4.004 4.004 0 0 1 4.041-4.008A5.338 5.338 0 0 1 9.333 0a5.337 5.337 0 0 1 5.124 3.857 3.644 3.644 0 0 1 1.876-.517c.772 0 1.488.239 2.079.647z"/></svg>'
},function(e,t,i){"use strict";(function(t){function o(e,i,o,r){n.call(this,e,i,o,r),this._barsIndexes=[],this._reportDataBuffer=null,this._reportData=null,this.watchedData=new t,this.model().addStrategySource(this)}var n=i(25).Study,r=i(731),s=i(1).propertyPages;inherit(o,n),o.prototype.stop=function(){if(n.prototype.stop.call(this),this._avoidRemoveStrategySource)return void delete this._avoidRemoveStrategySource;this.model().removeStrategySource(this)},o.prototype.start=function(){this.model().addStrategySource(this),n.prototype.start.call(this)},o.prototype.processHibernate=function(){this._studyId&&!this.isVisible()&&(this._avoidRemoveStrategySource=!0),n.prototype.processHibernate.call(this)},o.prototype.onData=function(e){e.method&&"data_update"!==e.method&&this.watchedData.setValue({method:e.method}),n.prototype.onData.call(this,e)},o.prototype._onDataUpdated=function(e,t,i){var o=t&&t.data&&t.data.report;o?(t.isUpdate&&this._reportDataBuffer&&(o=$.extend(this._reportDataBuffer,o)),this._reportDataBuffer=this._reportData=$.extend(this._reportDataBuffer||{},o),this.watchedData.setValue({method:"data_update",nonSeriesData:t})):this.watchedData.setValue({method:"data_update",nonSeriesData:{data:{report:this._reportDataBuffer}}}),"nochange"!==i&&i.length>0&&this._collateBarsIndexes(i),n.prototype._onDataUpdated.call(this,e,t,i)},o.prototype._collateBarsIndexes=function(e){var t,i;if(Array.isArray(e)&&(t=this._reportData&&this._reportData.filledOrders)&&t.length)for(this._barsIndexes.length=0,i=0;i<t.length;i++)this._barsIndexes[i]=e[t[i].tm]},o.prototype.reportData=function(){return this._reportData},o.prototype.ordersData=function(){return this._reportData&&this._reportData.filledOrders},o.prototype.barsIndexes=function(){return this._barsIndexes},o.prototype.clearData=function(){n.prototype.clearData.call(this),this._strategyOrdersPaneView&&this._strategyOrdersPaneView.clearItems()},o.prototype.restoreData=function(e){n.prototype.restoreData.apply(this,arguments),this.model().addStrategySource(this),e.reportData&&e.barsIndexes&&(this._reportData=e.reportData,this._barsIndexes=e.barsIndexes,this.watchedData.setValue({method:"data_update",nonSeriesData:{data:{report:this._reportData}}})),e.activeState&&(this._activeState=!0)},o.prototype.activeState=function(){return this._activeState},o.prototype.updateAllViews=function(){n.prototype.updateAllViews.call(this),this._strategyOrdersPaneView&&this._strategyOrdersPaneView.update()},o.prototype.createViews=function(){n.prototype.createViews.call(this),this._strategyOrdersPaneView=new r(this,this._series,this._model)},o.prototype.state=function(e){var t=n.prototype.state.apply(this,arguments);return e&&this._reportData&&this._barsIndexes&&(t.data||(t.data={}),t.data.reportData=this._reportData,t.data.barsIndexes=this._barsIndexes,t.data.activeState=this.model().activeStrategySource().value()===this),t},o.prototype.getStrategyPropertyPage=function(){return s.StudyStrategyPropertyPage},o.prototype._getTelemetryObjectName=function(){return"strategy"},
o.prototype._getTelemetryAdditionalData=function(){return{symbol:this.series().actualSymbol(),resolution:this.series().interval()}},e.exports=o}).call(t,i(15))},function(e,t,i){"use strict";function o(e,t,i){this._study=e,this._series=t,this._model=i,this._invalidated=!0,this._orderArrow={vMargin:o.DEFAULT_ORDER_ARROW_VMARGIN,width:o.DEFAULT_ORDER_ARROW_WIDTH,height:o.DEFAULT_ORDER_ARROW_HEIGHT},this._exitLineWidth=o.DEFAULT_ORDER_ARROW_EXIT_LINE_WIDTH,this._priceArrow={width:o.DEFAULT_PRICE_ARROW_WIDTH,height:o.DEFAULT_PRICE_ARROW_HEIGHT},this._text={vMargin:o.DEFAULT_TEXT_VMARGIN,font:o.DEFAULT_FONT,fontSize:o.DEFAULT_FONT_SIZE},this._checkHideTextIfBarSpacingLT=o.DEFAULT_CHECK_HIDE_TEXT_IF_BARSPACING_LT,this._textIsVisible=!0,this._colors={entryBuy:o.DEFAULT_ENTRY_BUY_COLOR,entrySell:o.DEFAULT_ENTRY_SELL_COLOR,exit:o.DEFAULT_EXIT_COLOR},this._items={entryBuy:[],entrySell:[],exit:[]},this._textWidths={},this._study.properties().strategy.orders.subscribe(this,this.update)}var n=i(6).Point,r=i(732).PaneRendererStudyStrategyOrders,s=i(50).CompositeRenderer,a=i(20).PlotRowSearchMode;o.DEFAULT_ORDER_ARROW_VMARGIN=7,o.DEFAULT_ORDER_ARROW_WIDTH=9,o.DEFAULT_ORDER_ARROW_HEIGHT=11,o.DEFAULT_ORDER_ARROW_EXIT_LINE_WIDTH=2,o.DEFAULT_PRICE_ARROW_WIDTH=5,o.DEFAULT_PRICE_ARROW_HEIGHT=9,o.DEFAULT_TEXT_VMARGIN=2,o.DEFAULT_FONT="Arial",o.DEFAULT_FONT_SIZE=10,o.DEFAULT_CHECK_HIDE_TEXT_IF_BARSPACING_LT=10,o.DEFAULT_ENTRY_BUY_COLOR="#008fff",o.DEFAULT_ENTRY_SELL_COLOR="#f00",o.DEFAULT_EXIT_COLOR="#cc47ed",o.prototype._updateImpl=function(){var e,t,i,o,r,s,l,c,h,u,d,p,_,f,m,g,y,v,b,S,w,T,P,x,C,L,I;if(this.clearItems(),(e=this._study.ordersData())&&e.length&&(t=this._model.timeScale(),i=this._series.priceScale(),!(!t||!i||t&&t.isEmpty()||i&&i.isEmpty())&&null!==(o=t.visibleBars()))){for(r=this._study.barsIndexes(),s=this._series.nearestIndex(o.firstBar(),a.NearestRight),l=this._series.nearestIndex(o.lastBar(),a.NearestLeft),c=s,h=[],u=[];c<=l;c++)for(d=-1;-1!==(d=r.indexOf(c,d+1));)(p=e[d])&&(h.push(p),u.push(c));for(_=this._study.properties(),f=_.strategy.orders.showLabels.value(),m=_.strategy.orders.showQty.value(),g=f||m,g&&t.barSpacing()<this._checkHideTextIfBarSpacingLT&&this._orderArrow.width*h.length*2>t.width()&&(g=!1),y=g&&this._text.fontSize+this._text.vMargin||0,v=y&&y*(f+m),b=this._series.firstValue(),S=0,w={upper:[],lower:[]};S<h.length;S++)p=h[S],d=u[S],T=t.indexToCoordinate(d,!0),P=i.priceToCoordinate(this._series[p.b?"low":"high"](d),b,!0),x=p.b?"lower":"upper",C="number"==typeof w[x][d]&&w[x][d]||0,P+=p.b?C:-C,"number"!=typeof w[x][d]&&(w[x][d]=0),w[x][d]+=(p.e?0:this._exitLineWidth)+this._orderArrow.vMargin+this._orderArrow.height+v,L=i.priceToCoordinate(p.p,b,!0),I=p.e?!p.b&&p.e?"entrySell":"entryBuy":"exit",this._items[I].push({orderPoint:new n(T,P),pricePoint:new n(T,L),label:f&&(p.c||p.id||"Untitled")||null,qty:m&&(p.b?"+":"-")+~~p.q||null,pos:x});this._textLabelIsVisible=f,this._textQtyIsVisible=m,this._textIsVisible=g}},o.prototype.update=function(){this._invalidated=!0},o.prototype.clearItems=function(){
this._items.entryBuy.length=this._items.entrySell.length=this._items.exit.length=0},o.prototype.renderer=function(){var e,t,i,o=this._study.properties();if(o.visible.value()&&o.strategy.orders.visible.value()&&(e=this._series.priceScale(),(this._invalidated||e&&e.isScaled())&&(this._updateImpl(),this._invalidated=!1),this._items.entryBuy.length||this._items.entrySell.length||this._items.exit.length)){t=new s;for(i in this._items)this._items[i].length&&t.append(new r({items:this._items[i],color:this._colors[i],orderArrow:this._orderArrow,exitLineWidth:"exit"===i&&this._exitLineWidth||0,priceArrow:this._priceArrow,text:this._textIsVisible&&this._text||null},this._textWidths));return t}},e.exports=o},function(e,t,i){"use strict";function o(e,t){this._items=e.items,this._color=e.color,this._orderArrow=e.orderArrow,this._exitLineWidth=e.exitLineWidth,this._priceArrow=e.priceArrow,this._text=e.text,this._textWidths=t}var n=i(9).HitTestResult;o.prototype._drawOrderArrow=function(e,t,i,o){var n,r=t.x,s=t.y;o?(e.rotate(Math.PI),r=-r-this._orderArrow.width/2,s=-s-this._orderArrow.height):(r-=this._orderArrow.width/2,s-=this._orderArrow.height),i&&(s-=i),n=o?"floor":"ceil",r=Math[n](r)+(o?-.5:.5),s=Math[n](s)+.5,e.translate(r,s),e.moveTo(.25*this._orderArrow.width,0),e.lineTo(.75*this._orderArrow.width,0),e.lineTo(.75*this._orderArrow.width,.45*this._orderArrow.height),e.lineTo(this._orderArrow.width,.45*this._orderArrow.height),e.lineTo(.5*this._orderArrow.width,this._orderArrow.height),i&&(e.lineTo(this._orderArrow.width,this._orderArrow.height),e.lineTo(this._orderArrow.width,this._orderArrow.height+i),e.lineTo(0,this._orderArrow.height+i),e.lineTo(0,this._orderArrow.height),e.lineTo(.5*this._orderArrow.width,this._orderArrow.height)),e.lineTo(0,.45*this._orderArrow.height),e.lineTo(.25*this._orderArrow.width,.45*this._orderArrow.height)},o.prototype._drawPriceArrow=function(e,t,i){var o=t.x,n=t.y;i?(e.rotate(Math.PI),o=-o-this._priceArrow.width,n=-n-this._priceArrow.height/2):(o-=this._priceArrow.width,n-=this._priceArrow.height/2),o=Math.round(o)+(i?-1.5:.5),n=Math.floor(n)+.5,e.translate(o,n),e.moveTo(0,0),e.lineTo(this._priceArrow.width,.5*this._priceArrow.height),e.lineTo(0,this._priceArrow.height)},o.prototype.draw=function(e){e.beginPath();for(var t,i,o=0;o<this._items.length;o++)t=this._items[o],i="lower"===t.pos,e.save(),e.translate(0,i?this._orderArrow.vMargin:-this._orderArrow.vMargin),this._drawOrderArrow(e,t.orderPoint,this._exitLineWidth,i),e.restore(),e.save(),this._drawPriceArrow(e,t.pricePoint,!i),e.restore();if(e.closePath(),e.fillStyle=this._color,e.fill(),this._text)for(e.font=this._text.fontSize+"px "+this._text.font,e.textAlign="center",e.textBaseline="top",o=0;o<this._items.length;o++)t=this._items[o],i="lower"===t.pos,e.save(),e.translate(0,i?this._orderArrow.vMargin:-this._orderArrow.height-this._orderArrow.vMargin),t.label&&(e.translate(0,i?this._text.fontSize+this._text.vMargin+this._exitLineWidth:-this._text.fontSize-this._text.vMargin-this._exitLineWidth),
e.fillText(t.label,Math.ceil(t.orderPoint.x),t.orderPoint.y),"number"!=typeof this._textWidths[t.label]&&(this._textWidths[t.label]=e.measureText(t.label).width)),t.qty&&(e.translate(0,i?this._text.fontSize+this._text.vMargin+this._exitLineWidth:-this._text.fontSize-this._text.vMargin-this._exitLineWidth),e.fillText(t.qty,Math.ceil(t.orderPoint.x),t.orderPoint.y),"number"!=typeof this._textWidths[t.qty]&&(this._textWidths[t.qty]=e.measureText(t.qty).width)),e.restore()},o.prototype._testOrderArrows=function(e){for(var t,i,o,n,r,s,a,l=0,c=this._orderArrow.width/2;l<this._items.length;l++)if(t=this._items[l].orderPoint,!(e.x<t.x-c||e.x>t.x+c||(i=this._items[l],o="lower"===i.pos,n=this._orderArrow.height+this._exitLineWidth,o||(n=-n),r=t.y+(o?this._orderArrow.vMargin:-this._orderArrow.vMargin),s=Math.min(r,r+n),a=Math.max(r,r+n),e.y<s||e.y>a)))return!0;return!1},o.prototype._testText=function(e){for(var t,i,o,n,r,s,a,l,c,h,u,d=0;d<this._items.length;d++)if(t=this._items[d],i=t.orderPoint,o="lower"===t.pos,n=this._orderArrow.vMargin+this._orderArrow.height+this._exitLineWidth,o||(n=-n),r=i.y+n,s=this._text.vMargin+this._text.fontSize*(!!t.label+!!t.qty),o||(s=-s),a=Math.min(r,r+s),l=Math.max(r,r+s),!(e.y<a||e.y>l||(c=t.label&&t.qty?o&&e.y<r+this._text.fontSize||!o&&e.y>r-this._text.fontSize?t.label:t.qty:t.label||t.qty,h=this._textWidths[c],u=h&&h/2,!h||e.x<i.x-u||e.x>i.x+u)))return!0;return!1},o.prototype.hitTest=function(e){var t=this._testOrderArrows(e),i=!t&&this._text&&this._testText(e);return t||i?new n(n.REGULAR):null},t.PaneRendererStudyStrategyOrders=TradingView.PaneRendererStudyStrategyOrders=o},function(e,t,i){"use strict";(function(e){function o(e,t,i,o){this._prices=[],this._canvas=$("<canvas>"),this._cache=this._canvas.get(0).getContext("2d"),this.reset({font:e,fontSize:t,backColors:i,colors:o}),this._priceAxisFontSize=11}function n(e,t){this._model=e,this._source=t,this._pivots=[],this._textCache={}}function r(e,t){this._source=e,this._model=e._model,this._prices=[],this._invidated=!0,this._cache=t}function s(e,t,i,o){var n,r,s;for(p.call(this,e,t,i,o),n=["P","S1/R1","S2/R2","S3/R3","S4/R4","S5/R5"],r=this.properties().levelsStyle.visibility,s=0;s<n.length;s++)r[n[s]].listeners().subscribe(this,TradingView.Study.prototype.processHibernate)}var a=i(6).Point,l=i(27),c=l.parseRgb,h=l.rgbToBlackWhiteString,u=i(117),d=i(170).StudyDataWindowView,p=i(734).NonSeriesStudy,_=i(735).StandardPivotPointsPriceAxisView,f=i(187).TrendLineRenderer,m=i(97),g=i(308),y=i(9).HitTestResult,v=i(50).CompositeRenderer,b=i(20).PlotRowSearchMode,S=i(1).propertyPages,w=i(100).LineEnd;o.prototype.destroy=function(){this._canvas.remove()},o.prototype.reset=function(e){this._prices=[],this._params=e,this._cache.setFont(e.fontSize+"px "+e.font);var t=this;this._labelWidth=["P","S1","R1","S2","R2","S3","R3","S4","R4","S5","R5","/"].reduce(function(e,i){var o=t._cache.measureText(i).width;return Math.max(o,e)},0)},o.prototype.rowHeight=function(){return this._priceAxisFontSize+4},o.prototype._labelRectByIndex=function(e){return{left:0,
top:Math.round(this._topByIndex(e)),width:Math.round(this._labelWidth+4),height:this._params.fontSize+8}},o.prototype.params=function(){return this._params},o.prototype._centerByIndex=function(e){return Math.round((e+.5)*(this._params.fontSize+8))},o.prototype._topByIndex=function(e){return Math.round(e*(this._params.fontSize+8))},o.prototype.setPrices=function(e){var t,i,o,n,r,s,a=8,l=!1,c=function(e,t){return void 0===e&&void 0===t||e.formatted===t.formatted};if(e.length!==this._prices.length)l=!0;else for(t=0;t<this._prices.length;t++)if(!c(this._prices[t],e[t])){l=!0;break}if(l){for(i=this,i._cache.save(),i._cache.font=this._priceAxisFontSize+"px Arial",i._cache.restore(),o=this._labelWidth+6,n=window.hidpiCanvasRatio||1,o*=n,this._canvas.prop("width",o),r=Math.max(e.length,22)*(this._params.fontSize+a),r*=n,this._canvas.prop("height",r),this._canvas.css("width",o).css("height",r),this._prices=e,this._cache.clearRect(0,0,o,r),this._cache.save(),this._cache.translate(.5,.5),this._cache.font=this._params.fontSize+"px "+this._params.font,this._cache.textBaseline="middle",t=0;t<this._prices.length;t++)this._prices[t]&&(s=["P","S1","R1","S2","R2","S3","R3","S4","R4","S5","R5"][t],this._cache.fillStyle=this._params.backColors[t],this._cache.fillText(s,0,this._centerByIndex(t)),this._cache.fillText("/",0,this._centerByIndex(t+11)));this._prices=e,this._cache.restore()}},n.prototype.setCache=function(e){this._cache=e},n.prototype.priceAxisViews=function(e,t){return this._priceAxisViews},n.prototype.mergeLabel=function(e,t,i){var o=""+t;void 0===e[o]?(e[o]={},e[o].text=i,e[o].ids=[this.complete(i)]):(e[o].text+="/"+i,e[o].ids.push(this.complete(i)))},n.prototype.complete=function(e){return"P"===e?e:"S"+e[1]+"/R"+e[1]},n.prototype.update=function(){this._invalidated=!0},n.prototype._updateImpl=function(){var e,t,i,o,n,r,s,a,l,c,h,u,d,p,_,f,m,g;if(this._source.pricesView().prices(),this._pivots=[],this._source.customData()&&this._source.customData().pivots&&this._source.properties().visible.value()&&(e=this._source.customData().pivots,t=this._source._indexes,i=this._model.timeScale(),(o=this._source.priceScale())&&!o.isEmpty()&&!i.isEmpty()&&e&&(n=i.visibleBars(),r=n.firstBar(),s=n.lastBar(),this._source.ownerSource())))for(a=this._source.ownerSource().firstValue(),l=0;l<e.length;l++)if(e[l]&&(c=t[e[l].startIndex],!((h=t[e[l].endIndex])<r||c>s))){u={},d=this._source.properties().levelsStyle.visibility,d.P.value()&&this.mergeLabel(u,e[l].p,"P"),d["S1/R1"].value()&&(this.mergeLabel(u,e[l].s1,"S1"),this.mergeLabel(u,e[l].r1,"R1")),d["S2/R2"].value()&&(this.mergeLabel(u,e[l].s2,"S2"),this.mergeLabel(u,e[l].r2,"R2")),d["S3/R3"].value()&&(this.mergeLabel(u,e[l].s3,"S3"),this.mergeLabel(u,e[l].r3,"R3")),d["S4/R4"].value()&&(this.mergeLabel(u,e[l].s4,"S4"),this.mergeLabel(u,e[l].r4,"R4")),d["S5/R5"].value()&&(this.mergeLabel(u,e[l].s5,"S5"),this.mergeLabel(u,e[l].r5,"R5")),p=i.indexToCoordinate(c),_=i.indexToCoordinate(h);for(f in u)m=parseFloat(f),g=o.priceToCoordinate(m,a),this._pivots.push({x1:p,x2:_,y:g,label:u[f].text,
labelIds:u[f].ids})}},n.prototype.renderer=function(){var e,t,i,o,n,r,s,l,c,h,u,d,p,_,m,b,S;for(this._invalidated&&(this._updateImpl(),this._invalidated=!1),e=new v,t=this._source.properties().levelsStyle.colors,i=this._source.properties().levelsStyle.widths,o=0;o<this._pivots.length;o++)if(n=this._pivots[o],r=new a(n.x1,n.y),s=new a(n.x2,n.y),l={points:[r,s],width:this._model.timeScale().width(),height:this._source.priceScale().height(),color:t[n.labelIds[0]].value(),linewidth:i[n.labelIds[0]].value(),linestyle:CanvasEx.LINESTYLE_SOLID,extendleft:!1,extendright:!1,leftend:w.Normal,rightend:w.Normal},c=new f,c.setData(l),c.setHitTest(new y(y.REGULAR)),e.append(c),this._source.properties().levelsStyle.showLabels.value())for(h=n.label.split("/"),u=0,d=0;d<h.length;d++)p=["P","S1","R1","S2","R2","S3","R3","S4","R4","S5","R5"].indexOf(h[d]),d>0&&(_=this._cache._labelRectByIndex(p+11),m={left:r.x-_.width+u,top:Math.round(r.y-_.height/2),width:_.width,height:_.height},u+=_.width/2,b=this._cache._canvas.get(0),S=new g(b,_,m),e.append(S)),_=this._cache._labelRectByIndex(p),m={left:r.x-_.width+u,top:Math.round(r.y-_.height/2),width:_.width,height:_.height},u+=_.width,b=this._cache._canvas.get(0),S=new g(b,_,m),e.append(S);return e},r.prototype._updateImpl=function(){var e,t,i,o,n,r,s,a,l,c,h,u,d,p,_,f,m,g,y,v;if(!this._model.timeScale().isEmpty()&&!this._source.priceScale().isEmpty()&&null!==(e=this._model.timeScale().visibleBars())&&this._source.customData()&&this._source.customData().pivots&&(t=this._model.mainSeries(),i=this._source.priceScale(),null!==(o=t.bars().search(e.lastBar(),b.NearestLeft)))){for(n=o.index,r=this._source.customData().pivots,s=this._source._indexes,a=this._source.properties(),l=this._source.firstValue(),c=0;c<r.length;c++)if(r[c]&&(h=s[r[c].startIndex],u=s[r[c].endIndex],d=a.inputs.showHistoricalPivots.value(),u>=n&&h<=n||!d))for(p=["p","s1","r1","s2","r2","s3","r3","s4","r4","s5","r5"],this._prices=[],_=0;_<p.length;_++)f=p[_],void 0!==(m=r[c][f])&&(g=i.priceToCoordinate(m,l),y={P:"P",S1:"S1/R1",S2:"S2/R2",S3:"S3/R3",S4:"S4/R4",S5:"S5/R5",R1:"S1/R1",R2:"S2/R2",R3:"S3/R3",R4:"S4/R4",R5:"S5/R5"},v=a.levelsStyle.colors[y[f.toUpperCase()]].value(),this._prices.push({formatted:i.formatPrice(m,l),price:m,coordinate:g,color:v}));this._cache.setPrices(this._prices)}},r.prototype.update=function(){this._invidated=!0},r.prototype.prices=function(){return this._invidated&&(this._updateImpl(),this._invidated=!1),this._prices},inherit(s,p),s.prototype.lastValueData=function(e,t,i){var o=["P","S1","R1","S2","R2","S3","R3","S4","R4","S5","R5"].indexOf(e.toUpperCase()),n={noData:!0},r=this._pricesView.prices()[o];return null!==r&&void 0!==r?r:n},s.prototype.lastPriceLabelFixedCoordinate=function(e){var t=["P","S1","R1","S2","R2","S3","R3","S4","R4","S5","R5"].indexOf(e.toUpperCase());return this._priceAxisViews[t]._fixedCoordinate},s.prototype.priceLabelText=function(e){return this._metaInfo.shortDescription+":"+e.toUpperCase()},s.prototype.pricesView=function(){return this._pricesView},
s.prototype._getActualCacheParams=function(){var e={};return e.font=this.properties().font.value(),e.fontSize=this.properties().fontsize.value(),e.backColors=[this.properties().levelsStyle.colors.P.value(),this.properties().levelsStyle.colors["S1/R1"].value(),this.properties().levelsStyle.colors["S1/R1"].value(),this.properties().levelsStyle.colors["S2/R2"].value(),this.properties().levelsStyle.colors["S2/R2"].value(),this.properties().levelsStyle.colors["S3/R3"].value(),this.properties().levelsStyle.colors["S3/R3"].value(),this.properties().levelsStyle.colors["S4/R4"].value(),this.properties().levelsStyle.colors["S4/R4"].value(),this.properties().levelsStyle.colors["S5/R5"].value(),this.properties().levelsStyle.colors["S5/R5"].value()],e.colors=e.backColors.map(function(e){return"black"===h(c(e),150)?"white":"black"}),e},s.prototype.updateAllViews=function(){p.prototype.updateAllViews.call(this),this._pricesView.update()},s.prototype.createViews=function(){var e,t,i,s,a,l=this._getActualCacheParams();for(this._cache&&this._cache.destroy(),this._cache=new o(l.font,l.fontSize,l.backColors,l.colors),this._priceAxisViews=[],e=["P","S1","R1","S2","R2","S3","R3","S4","R4","S5","R5"],this._paneViews.length=0,t=new n(this._model,this),t.setCache(this._cache),this._paneViews.push(t),i=this.properties().levelsStyle.visibility,s=0;s<e.length;s++)this._priceAxisViews.push(new _(this,{name:e[s],cache:this._cache})),a="P"===e[s].toUpperCase()?"P":"S"+e[s][1]+"/R"+e[s][1],i[a]&&i[a].value()&&this._paneViews.push(new m(this._model,this,e[s],"priceLabelText","showStudyPlotLabels"));this._dataWindowView||(this._dataWindowView=new d(this,this._model)),this._statusView||(this._statusView=new u(this,this._model.properties())),this._pricesView=new r(this,this._cache)},s.prototype._postProcessGraphics=function(){},s.prototype.isVisible=function(){var e,t,i;if(!this.properties().visible.value())return!1;for(e=["P","S1/R1","S2/R2","S3/R3","S4/R4","S5/R5"],t=this.properties().levelsStyle.visibility,i=0;i<e.length;i++)if(t[e[i]].value())return!0;return!1},s.prototype.stop=function(){TradingView.Study.prototype.stop.call(this),this._cache&&(this._cache.destroy(),this._cache=null)},s.prototype.priceRange=function(t,i){var o,n,r,s,a,l,c,h;if(!this.customData()||!this.customData().pivots||!this._indexes)return null;if(!this.priceScale())return null;for(o=this.customData().pivots,n=this._indexes,r=null,s=0;s<o.length;s++)if(o[s]&&(a=n[o[s].startIndex],!(n[o[s].endIndex]<t||a>i)))for(l=[],c=this._properties.levelsStyle.visibility,c.P.value()&&l.push(o[s].p),c["S1/R1"].value()&&l.push(o[s].s1,o[s].r1),c["S2/R2"].value()&&l.push(o[s].s2,o[s].r2),c["S3/R3"].value()&&l.push(o[s].s3,o[s].r3),c["S4/R4"].value()&&l.push(o[s].s4,o[s].r4),c["S5/R5"].value()&&l.push(o[s].s5,o[s].r5),h=0;h<l.length;h++)l[h]&&(null===r?r=new e(l[h],l[h]):r.apply(l[h],l[h]));return this.priceScale().isLog()&&r?new e(this.priceScale().priceToLogical(r.minValue()),this.priceScale().priceToLogical(r.maxValue())):r},s.prototype.getStylesPropertyPage=function(){
return S.StudyPivotPointsStandardStylesPropertyPage},t.study_PivotPointsStandard=s}).call(t,i(58).PriceRange)},function(e,t,i){"use strict";var o,n,r,s,a,l;Object.defineProperty(t,"__esModule",{value:!0}),i.d(t,"NonSeriesStudy",function(){return l}),o=i(3),n=i(7),i.n(n),r=i(25),i.n(r),s=i(16),a=i.n(s),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.c(t,e),t.prototype.clearData=function(){this._customData=null,this._indexes=null},t.prototype.restoreData=function(e,t,i){r.Study.prototype.restoreData.call(this,e),this._customData=t,this._indexes=i},t.prototype.state=function(t){var i=e.prototype.state.call(this,t);return t&&(i.nonSeriesData=this._customData,i.indexes=this._indexes),i},t.prototype.customData=function(){return this._customData},t.prototype._setPaneViews=function(e){this._paneViews=e,this.model().invalidate(new a.a(a.a.LIGHT_UPDATE))},t.prototype._onDataUpdated=function(t,i,o){null!==i&&(i.indexes_replace?(Object(n.assert)("nochange"!==o),this._indexes=o):(this._customData=i.data,"nochange"!==o&&(this._indexes=o))),e.prototype._onDataUpdated.call(this,t,i,o)},t}(r.Study)},function(e,t,i){"use strict";var o,n,r,s;Object.defineProperty(t,"__esModule",{value:!0}),i.d(t,"StandardPivotPointsPriceAxisView",function(){return s}),o=i(3),n=i(59),r=["P","S1","R1","S2","R2","S3","R3","S4","R4","S5","R5"],s=function(e){function t(t,i){var o,n=e.call(this)||this;return n._source=t,n._data=i,o=i.name,n._completeName="P"===o.toUpperCase()?"P":"S"+o[1]+"/R"+o[1],n}return o.c(t,e),t.prototype._updateRendererData=function(e){var t,i,o,n,s,a,l,c,h,u;e.visible=!1,t=this._source.properties(),t.visible.value()&&(i=this._completeName,o=t.levelsStyle.visibility,o[i]&&o[i].value()&&(n=this._source.model(),s=n.timeScale(),a=this._source.priceScale(),s.isEmpty()||null===s.visibleBars()||null!==a&&a.isEmpty()||(l=this._source.customData())&&l.pivots&&(c=this._source.pricesView().prices(),h=r.indexOf(this._data.name.toUpperCase()),(u=c[h])&&(e.background=u.color,e.color=this.generateTextColor(u.color),e.coordinate=u.coordinate,e.floatCoordinate=u.floatCoordinate,e.text=u.formatted,e.visible=!0))))},t}(n.a)},function(e,t,i){"use strict";function o(e,t){this._source=e,this._model=t,this._points=[new s(0,0)],this._lineRenderer=new x}function n(e,t){w.call(this),this._additional=void 0,this._study=e,this._model=t,this._items.push(new T("Open","")),this._items.push(new T("High","")),this._items.push(new T("Low","")),this._items.push(new T("Close","")),this._invalidated=!0,this.update()}function r(e,t,i,o){this._symbolLabelView=new C(e,this,void 0,"symbol","showSymbolLabels"),this._baseLineView=null,l.call(this,e,t,i,o),this._formatter=null,this._paneView=null;var n=this;this.properties().minTick.listeners().subscribe(null,function(){n._createFormatter(),n.updateAllViews(),n._model.invalidate(new L(L.FULL_UPDATE))}),this.properties().style.listeners().subscribe(this,this._updateBarFunction),this.properties().lineStyle.priceSource.listeners().subscribe(this,this._updateBarFunction),
this.properties().areaStyle.priceSource.listeners().subscribe(this,this._updateBarFunction),this.properties().baselineStyle.priceSource.listeners().subscribe(this,this._updateBarFunction),this._updateBarFunction()}var s=i(6).Point,a=i(65).Series,l=i(25).Study,c=i(48),h=i(20).PlotRowSearchMode,u=i(737).OverlayPriceAxisView,d=i(280),p=d.SeriesAreaPaneView,_=d.SeriesLinePaneView,f=d.SeriesHollowCandlesPaneView,m=d.SeriesCandlesPaneView,g=d.SeriesBarsPaneView,y=d.SeriesBaselinePaneView,v=d.SeriesBaselineLinePaneView,b=i(117),S=i(116),w=S.DataWindowView,T=S.DataWindowItem,P=i(168).SeriesBarColorer,x=i(84).HorizontalLineRenderer,C=i(97),L=i(16),I=i(19).PriceFormatter,M=i(1).propertyPages,k=i(4),A=!k.enabled("hide_study_overlay_legend_item");o.prototype.update=function(){if(this._visible=!1,this._source.properties().showPriceLine.value()){var e=this._source.lastValueData(void 0,!0);e.noData||(this._visible=!0,this._points=[new s(0,e.coordinate)],this._color=e.color)}},o.prototype.renderer=function(){var e={};return e.width=this._model.timeScale().width(),e.height=this._source.priceScale().height(),e.points=this._points,e.color=this._color,e.linewidth=1,e.linestyle=CanvasEx.LINESTYLE_DOTTED,e.visible=this._visible,this._lineRenderer.setData(e),this._lineRenderer},inherit(n,w),n.prototype._updateImpl=function(){var e,t,i,o,n,r,s,l,c,u,d,p,_,f;if(this._header=this._study.title(),!this._model.timeScale().isEmpty()&&0!==this._study.data().length&&(i=!1,o=this._study.properties().style.value(),o===a.STYLE_BARS?(e=this._study.properties().barStyle.upColor.value(),t=this._study.properties().barStyle.downColor.value(),i=this._study.properties().barStyle.barColorsOnPrevClose.value()):o===a.STYLE_CANDLES?(e=this._study.properties().candleStyle.upColor.value(),t=this._study.properties().candleStyle.downColor.value(),i=this._study.properties().candleStyle.barColorsOnPrevClose.value()):o===a.STYLE_HOLLOW_CANDLES?(e=this._study.properties().hollowCandleStyle.upColor.value(),t=this._study.properties().hollowCandleStyle.downColor.value(),i=!0):o===a.STYLE_LINE?e=t=this._study.properties().lineStyle.color.value():o===a.STYLE_AREA&&(e=t=this._study.properties().areaStyle.linecolor.value()),n=this._study.series(),r=this._model.crossHairSource().appliedIndex(),void 0!==(s=n.nearestIndex(r,h.NearestLeft)))){if(!(null!==(l=this._study.data().valueAt(s))&&l[TradingView.OPEN_PLOT]&&l[TradingView.HIGH_PLOT]&&l[TradingView.LOW_PLOT]&&l[TradingView.CLOSE_PLOT]))return;for(c=this._study.formatter(),this._items[0].setValue(c.format(l[TradingView.OPEN_PLOT])),this._items[1].setValue(c.format(l[TradingView.HIGH_PLOT])),this._items[2].setValue(c.format(l[TradingView.LOW_PLOT])),this._items[3].setValue(c.format(l[TradingView.CLOSE_PLOT])),o===a.STYLE_BASELINE?(d=this._study.barColorer(),p=d.barStyle(s,!1),u=null!=p.barBorderColor?p.barBorderColor:p.barColor):i&&s>=1?(_=this._study.data().valueAt(s-1),u=_[TradingView.CLOSE_PLOT]<=l[TradingView.CLOSE_PLOT]?e:t):u=l[TradingView.OPEN_PLOT]<=l[TradingView.CLOSE_PLOT]?e:t,f=0;f<4;f++)this._items[f].setColor(u)}},
n.prototype.items=function(){return this._invalidated&&(this._updateImpl(),this._invalidated=!1),this._items},n.prototype.update=function(){this._invalidated=!0},n.prototype.additional=function(){return this._invalidated&&(this._updateImpl(),this._invalidated=!1),this._additional},inherit(r,l),r.prototype.createPlotLabels=function(e){},r.prototype._showLastValueOnPriceScale=function(){return this._model.properties().scalesProperties.showSeriesLastValue.value()},r.prototype.symbol=function(){var e,t=this.properties().inputs.symbol.value(),i=this._resolvedSymbols?this._resolvedSymbols[t]:null;return e=i?i.name:t,e.toUpperCase()},r.prototype.lastValueData=function(e,t,i){var o,n,r,s,l,c,u,d,p,_,f,m,g,y={noData:!0};if(this._model.timeScale().isEmpty()||null==this.priceScale()||this.priceScale().isEmpty()||this.data().isEmpty())return y;if(null===(o=this._model.timeScale().visibleBars()))return y;if(!this.properties().visible.value())return y;if(null==(n=this.nearestIndex(o.lastBar(),h.NearestLeft)))return y;if(r=this._lastNonEmptyPlotRow(TradingView.CLOSE_PLOT),s=null!==r&&o.contains(r.index),l=null!==r?r.value:null,c=t||s?l:this.data().valueAt(n),u=this._barFunction(c),!c||!isNumber(u))return y;if(d={noData:!1},i&&(d.price=u),!(p=this.firstValue(!0)))return y;switch(d.text=this.priceScale().formatPrice(u,p),d.floatCoordinate=this.priceScale().priceToCoordinate(u,p,!0),d.coordinate=Math.round(d.floatCoordinate),d.item=c,_=this.properties(),_.style.value()){case a.STYLE_BARS:d.color=c[TradingView.OPEN_PLOT]<=c[TradingView.CLOSE_PLOT]?_.barStyle.upColor.value():_.barStyle.downColor.value();break;case a.STYLE_CANDLES:case a.STYLE_HOLLOW_CANDLES:d.color=c[TradingView.OPEN_PLOT]<=c[TradingView.CLOSE_PLOT]?_.candleStyle.upColor.value():_.candleStyle.downColor.value();break;case a.STYLE_LINE:d.color=_.lineStyle.color.value();break;case a.STYLE_AREA:d.color=_.areaStyle.color1.value();break;case a.STYLE_BASELINE:f=_.baselineStyle,m=this.priceScale(),g=Math.round(m.height()*(Math.abs(100-f.baseLevelPercentage.value())/100)),d.color=d.coordinate<g?_.baselineStyle.topLineColor.value():_.baselineStyle.bottomLineColor.value()}return d},r.prototype.firstValue=function(e){var t,i,o=this._model.timeScale().visibleBars();return null===o?null:(t=o.firstBar(),0===this.data().size()?null:(i=this.data().search(t,h.NearestRight),null!==i?this._barFunction(i.value):null))},r.prototype.barFunction=function(){return this._barFunction},r.prototype._updateBarFunction=function(){this._barFunction=c.barFunction(this._currentPriceSource())},r.prototype._currentPriceSource=function(){switch(this._properties.style.value()){case a.STYLE_LINE:return this._properties.lineStyle.priceSource.value();case a.STYLE_AREA:return this._properties.areaStyle.priceSource.value();case a.STYLE_BASELINE:return this._properties.baselineStyle.priceSource.value()}return"close"},r.prototype.createViews=function(){this._priceAxisViews=[],this._priceAxisViewsBase=[new u(this)],this._paneViews=[];var e=null;switch(this._properties.style.value()){case a.STYLE_BARS:
e=new g(this,this._model);break;case a.STYLE_CANDLES:e=new m(this,this._model);break;case a.STYLE_HOLLOW_CANDLES:e=new f(this,this._model);break;case a.STYLE_LINE:e=new _(this,this._model);break;case a.STYLE_AREA:e=new p(this,this._model);break;case a.STYLE_BASELINE:e=new y(this,this._model),this._baseLineView=new v(this,this._model)}e&&this._paneViews.push(e),null!==this._baseLineView&&this._paneViews.push(this._baseLineView),this._paneViews.push(new o(this,this._model)),this._paneViews.push(this._symbolLabelView),this._dataWindowView||(this._dataWindowView=new n(this,this._model)),this._statusView||(this._statusView=new b(this,this._model.properties())),this._priceAxisViews=[].concat(this._priceAxisViewsBase,this._hlinesPriceAsisViews,this._horizlinesPriceAsisViews)},r.prototype.barColorer=function(){return new P(this)},r.prototype.start=function(e){this._formatter=null,l.prototype.start.apply(this,arguments),this.priceScale()&&this.priceScale().updateFormatter()},r.prototype._createFormatter=function(){var e,t,i,o,n,r,s;"default"===this.properties().minTick.value()?(e=this.properties().inputs.symbol.value(),t=this._resolvedSymbols[e],this._formatter=new I(t?t.pricescale:100,t?t.minmov:1,!!t&&t.fractional)):(i=this.properties().minTick.value(),o=isNumber(i)?["100","1","false"]:i.split(","),n=parseInt(o[0]),r=parseInt(o[1]),s="true"===o[2],this._formatter=new I(n,r,s)),this.priceScale()&&this.priceScale().updateFormatter()},r.prototype.formatter=function(){return this._formatter||this._createFormatter(),this._formatter},r.prototype._tryChangeInputs=function(){l.prototype._tryChangeInputs.call(this),this.m_formatter=null,this.priceScale().updateFormatter()},r.prototype.title=function(){var e,t=this.properties().inputs.symbol.value(),i=this._resolvedSymbols[t];return i?(e=i.name,i.exchange&&0!==i.exchange.length&&(e+=", "+i.exchange)):e=t,e.toUpperCase()},r.prototype.bars=function(){return this.m_data},r.prototype.open=function(e){return this.bars().valueAt(e)[TradingView.OPEN_PLOT]},r.prototype.high=function(e){return this.bars().valueAt(e)[TradingView.HIGH_PLOT]},r.prototype.low=function(e){return this.bars().valueAt(e)[TradingView.LOW_PLOT]},r.prototype.close=function(e){return this.bars().valueAt(e)[TradingView.CLOSE_PLOT]},r.prototype.hl2=function(e){return(this.high(e)+this.low(e))/2},r.prototype.hlc3=function(e){return(this.high(e)+this.low(e)+this.close(e))/3},r.prototype.ohlc4=function(e){return(this.open(e)+this.high(e)+this.low(e)+this.close(e))/4},r.prototype.symbolInfo=function(){if(!this._resolvedSymbols)return null;var e=this._properties.inputs.symbol.value();return e?this._resolvedSymbols[e]:null},r.prototype.lastPriceLabelFixedCoordinate=function(){return this._priceAxisViews[0]._fixedCoordinate},r.prototype.tags=function(){var e=[],t=this.symbolInfo();return t?e.push(t.name):this._properties.inputs.symbol.value()&&e.push(this._properties.inputs.symbol.value()),e},r.prototype.statusView=function(){return A?l.prototype.statusView.call(this):null},r.prototype.getStylesPropertyPage=function(){
return M.StudyOverlayStylesPropertyPage},t.OverlayDataWindowView=n,t.study_Overlay=r},function(e,t,i){"use strict";var o,n,r;Object.defineProperty(t,"__esModule",{value:!0}),i.d(t,"OverlayPriceAxisView",function(){return r}),o=i(3),n=i(59),r=function(e){function t(t){var i=e.call(this)||this;return i._source=t,i}return o.c(t,e),t.prototype._updateRendererData=function(e){e.visible=!1;var t=this._source.lastValueData("close",!1);t.noData||(e.background=t.color,e.color=this.generateTextColor(t.color),e.coordinate=t.coordinate,e.floatCoordinate=t.floatCoordinate,e.text=t.text,e.visible=!0)},t}(n.a)},function(e,t,i){"use strict";function o(e,t,i,o){this._symbolLabelView=new s(e,this,"compare","symbol","showSymbolLabels"),n.call(this,e,t,i,o);var r=this;this._properties.minTick.listeners().subscribe(null,function(){r._createFormatter()}),this.properties().minTick.listeners().subscribe(null,function(){r._model.invalidate(new a(a.FULL_UPDATE))}),this._properties.merge({skipHistogramBaseOnAutoScale:!0})}var n=i(25).Study,r=i(170).DataVendorStudyDataWindowView,s=i(97),a=i(16),l=i(19).PriceFormatter,c=i(1).propertyPages,h=i(4),u=!h.enabled("hide_study_compare_legend_item");inherit(o,n),o.prototype.createPlotLabels=function(e){},o.prototype._showLastValueOnPriceScale=function(){return this._model.properties().scalesProperties.showSeriesLastValue.value()},o.prototype.createViews=function(){this._dataWindowView||(this._dataWindowView=new r(this,this._model)),n.prototype.createViews.call(this),this._paneViews.push(this._symbolLabelView)},o.prototype._createFormatter=function(){var e,t,i,o,n,r=this.properties().inputs.symbol.value(),s=this._resolvedSymbols?this._resolvedSymbols[r]:null;"default"===this.properties().minTick.value()?this._formatter=new l(s?s.pricescale:100,s?s.minmov:1,!!s&&s.fractional):(e=this.properties().minTick.value(),t=isNumber(e)?["100","1","false"]:e.split(","),i=parseInt(t[0]),o=parseInt(t[1]),n="true"===t[2],this._formatter=new l(i,o,n)),this.priceScale()&&this.priceScale().updateFormatter()},o.prototype.symbol=function(){var e,t=this.properties().inputs.symbol.value(),i=this._resolvedSymbols?this._resolvedSymbols[t]:null;return e=i?i.name:t,e.toUpperCase()},o.prototype.title=function(e){var t,i=this.properties().inputs.symbol.value(),o=this._resolvedSymbols?this._resolvedSymbols[i]:null;return o?(t=o.name,o.exchange&&0!==o.exchange.length&&(t+=", "+o.exchange)):t=i,t.toUpperCase()},o.prototype.symbolInfo=function(){if(!this._resolvedSymbols)return null;var e=this._properties.inputs.symbol.value();return e?this._resolvedSymbols[e]:null},o.prototype.lastPriceLabelFixedCoordinate=function(){return this._priceAxisViews[0]._fixedCoordinate},o.prototype.tags=function(){var e=this.symbol();return e?[e]:[]},o.prototype.statusView=function(){return u?n.prototype.statusView.call(this):null},o.prototype.getInputsPropertyPage=function(){return c.StudyCompareInputsPropertyPage},t.study_Compare=o},function(e,t,i){"use strict";function o(e,t,i,o){s.call(this,e,t,i,o),this._underlyingData=new a(this._plotFields)}
var n=i(7).assert,r=i(14).clone,s=i(25).Study,a=i(20).PlotList;inherit(o,s),o.prototype.clearData=function(){s.prototype.clearData.call(this),this._underlyingData.clear()},o.prototype._mergeData=function(e){var t,i;this._invalidateLastNonEmptyPlotRowCache(),t=this._underlyingData.firstIndex(),this._underlyingData.merge(e),t!==this._underlyingData.firstIndex()&&(this.m_data=new a(this._underlyingData.plotNames())),i=this.m_data.lastIndex(),this._underlyingData.range(i,this._underlyingData.lastIndex()).each(function(e,t){return this.m_data.add(e,r(t)),!1}.bind(this)),this._plotsForStrategyProcessing().forEach(function(e){this._createStrategy(e.strategy,e.strategyIndex,e.targetIndex,i).rebuildData(this.m_data)},this)},o.prototype._plotsForStrategyProcessing=function(){var e=["dataoffset"],t=[];return this._metaInfo.plots.forEach(function(i,o){var r,s;e.indexOf(i.type)>-1&&(r=null,this._metaInfo.plots.forEach(function(e,t){e.id===i.target&&(r=t)}),n(r>=0,"target plot not found for strategy plot "+i.id),s={strategy:i.type,strategyIndex:o,targetIndex:r},t.push(s))},this),t},o.prototype._createStrategy=function(e,t,i,n){return new o["Strategy_"+e](t,i,n)},o.Strategy_dataoffset=function(e,t,i){this._strategyPlotIndex=e,this._targetPlotIndex=t,this._startIndex=i},o.Strategy_dataoffset.prototype.rebuildData=function(e){var t=this._targetPlotIndex+1,i=this._strategyPlotIndex+1,o=null,n=null;e.range(this._startIndex||e.firstIndex(),e.lastIndex()).each(function(r,s){var a,l,c,h=s[t],u=s[i]?Math.round(s[i]):null;return s[t]=null,s[i]=null,!(!u||u>0)&&(a=r+u,l={pointIndex:a,value:h},n?n.pointIndex!==l.pointIndex&&(a>=0&&(e.valueAt(a)[t]=h),c=!1,o&&(c=o.value<=n.value&&n.value<=h||o.value>=n.value&&n.value>=h),c?n.pointIndex>=0&&(e.valueAt(n.pointIndex)[t]=null):o=n,n=l):n=l,!1)})},t.study_ScriptWithDataOffset=o},function(e,t,i){"use strict";var o,n,r;Object.defineProperty(t,"__esModule",{value:!0}),i.d(t,"MainSeriesScaleRatioProperty",function(){return r}),o=i(8),n=i.n(o),r=function(){function e(e){this._changed=new n.a,this._model=e}return e.prototype.getStepChangeValue=function(){return.1},e.prototype.getMinValue=function(){return 1e-7},e.prototype.getMaxValue=function(){return 9999},e.prototype.value=function(){return this._model.mainSeriesScaleRatio()},e.prototype.setValue=function(e,t){(e!==this.value()||t)&&(this._model.setMainSeriesScaleRatio(e),this._onChanged())},e.prototype.state=function(){return null},e.prototype.clone=function(){return new e(this._model)},e.prototype.listeners=function(){return this._changed},e.prototype.subscribe=function(e,t){this._changed.subscribe(e,t)},e.prototype.unsubscribe=function(e,t){this._changed.unsubscribe(e,t)},e.prototype.unsubscribeAll=function(e){this._changed.unsubscribeAll(e)},e.prototype._onChanged=function(){this._changed.fire(this)},e}()},function(e,t,i){"use strict";var o,n,r;Object.defineProperty(t,"__esModule",{value:!0}),i.d(t,"MainSeriesPriceScaleNameProperty",function(){return r}),o=i(8),n=i.n(o),r=function(){function e(e){var t=this;this._changed=new n.a,
this._defaultValues=["left","right","none"],this._model=e,this._model.mainSeriesPriceScaleNameChanged().subscribe(null,function(){return t._onChanged()})}return e.prototype.getValues=function(e){var t,i=[],o=this._defaultValues.length-1;for(t=0;t<=o;t++)(t!==o||e)&&i.push(this._defaultValues[t]);return i},e.prototype.value=function(){return this._model.mainSeriesPriceScaleName()},e.prototype.setValue=function(e,t){var i=this.value();(e!==i||t)&&this._model.setMainSeriesPriceScaleName(i,e)},e.prototype.state=function(){return null},e.prototype.clone=function(){return new e(this._model)},e.prototype.listeners=function(){return this._changed},e.prototype.subscribe=function(e,t){this._changed.subscribe(e,t)},e.prototype.unsubscribe=function(e,t){this._changed.unsubscribe(e,t)},e.prototype.unsubscribeAll=function(e){this._changed.unsubscribeAll(e)},e.prototype._onChanged=function(){this._changed.fire(this)},e}()},function(e,t,i){"use strict";function o(e){"LineToolGannComplex"!==e.type||void 0!==e.version&&1!==e.version||(e.type="LineToolGannFixed")}Object.defineProperty(t,"__esModule",{value:!0}),t.migrateState=o},function(e,t,i){"use strict";(function(e){function o(e,t,i,o){this._options=Object.assign({},c,o),this._model=t,this._paneWidget=e,this._chart=e._chart,this.$el=$(document.createElement("div")).addClass("pane-legend"),this._itemsBinding=[],this._chart.properties().paneProperties.legendProperties.showStudyTitles.listeners().subscribe(this,this.updateLayout),this._chart.properties().paneProperties.legendProperties.showSeriesTitle.listeners().subscribe(this,this.updateLayout),this._chart.properties().paneProperties.legendProperties.showSeriesOHLC.listeners().subscribe(this,this.updateLayout),this._chart.properties().paneProperties.legendProperties.showStudyValues.listeners().subscribe(this,this.updateLayout);var n=this._chart.properties().scalesProperties.textColor;n.listeners().subscribe(this,function(e){this.$el.css("color",e.value())}),this.$el.css("color",n.value()),this.updateLayout()}var n=(i(25).Study,i(32).trackEvent),r=(i(5).getLogger("Chart.LegendWidget"),i(24)),s=i(131).showEditObjectDialog,a=i(36).IS_RTL,l=i(81).setMouseEventHandler,c={contextMenuEnabled:!0,sourceSelectionEnabled:!0,symbolMarkerEnabled:!1};o.prototype.destroy=function(){},o.prototype.contextMenuEvent=function(e,t){if(!this._model.chartModel().readOnly()&&this._options.contextMenuEnabled){var i=t.source;this._paneWidget.showContextMenuForSource(i,e)}},o.prototype.updateLayout=function(){var t,o,n,r,s,a,c,h,u,d,p;if(this._itemsBinding.length=0,this.$el.find(".apply-common-tooltip").trigger("mouseleave"),this.$el.empty(),(t=this._paneWidget.state())&&this._model){for(o={showStudyTitles:this._model.model().properties().paneProperties.legendProperties.showStudyTitles.value(),showSeriesTitle:this._chart.properties().paneProperties.legendProperties.showSeriesTitle.value(),showSeriesOHLC:this._chart.properties().paneProperties.legendProperties.showSeriesOHLC.value(),
showStudyValues:this._chart.properties().paneProperties.legendProperties.showStudyValues.value(),showLegend:this._model.model().properties().paneProperties.legendProperties.showLegend.value()},n=this._model.mainSeries(),r=t.orderedSources().slice(),s=r.indexOf(n),s>-1&&(r.splice(s,1),r.push(n)),a=r.length-1;a>=0;a--)c=r[a],(h=c.statusView())&&(!(u=c===n)||o.showSeriesTitle||o.showSeriesOHLC||o.showStudyTitles||o.showStudyValues)&&(u&&e.enabled("fundamental_widget")||(o.showLegend||!u?(u||o.showStudyTitles||o.showStudyValues)&&o.showLegend&&(d=$("<div>").addClass("pane-legend-line pane-legend-wrap"),this._options.sourceSelectionEnabled||d.addClass("legend-selection-disabled"),d.appendTo(this.$el),d.source=c,u?this._chartHasStudies()?(p=$('<a class="pane-legend-minbtn apply-common-tooltip apply" title="'+$.t("Hide")+'"></a>').append($(i(745)).attr({class:"expand"})),d.addClass("main").append(p.on("click touchend",this.toggleTitles.bind(this)))):d.addClass("pane-legend-line--without-child-studies"):d.addClass("study"),c.properties().visible.value()||d.addClass("disabled"),this._generateItemsForRow(d,h,o),l(d,this,!0)):this.$el.find(".expand-line").length||(d=$("<div>").addClass("pane-legend-line pane-legend-wrap main expand-line"),this._options.sourceSelectionEnabled||d.addClass("legend-selection-disabled"),d.appendTo(this.$el),this._chartHasStudies()?(p=$('<a class="pane-legend-minbtn apply-common-tooltip apply" title="'+$.t("Show")+'"></a>').append($(i(744)).attr({class:"expand closed"})),d.append(p.on("click touchend",this.toggleTitles.bind(this)))):d.addClass("pane-legend-line--without-child-studies"),d.source=c,c.properties().visible.value()||d.addClass("disabled"),o={showStudyTitles:!1,showSeriesTitle:o.showSeriesTitle,showSeriesOHLC:o.showSeriesOHLC,showStudyValues:!1},this._generateItemsForRow(d,h,o),l(d,this,!0),this.update())));this.update()}},o.prototype._chartHasStudies=function(){return this._model.model().allStudies().some(function(e){return e.statusView()})},o.prototype._generateItemsForRow=function(t,o,n){var r,s,l,c,h,u,d,p,_,f,m,g=t.source,y=this,v=g===this._model.mainSeries();if((v&&n.showSeriesTitle||!v&&n.showStudyTitles)&&(s=$("<span>"),s.addClass("pane-legend-line apply-overflow-tooltip"),this._options.contextMenuEnabled&&!this._chart.readOnly()||s.addClass("no-context-menu"),this._options.sourceSelectionEnabled||s.addClass("legend-selection-disabled"),v&&s.addClass("main"),g.properties().visible.value()||s.addClass("disabled"),s.css({"font-weight":o.bold()?"bold":"normal","font-size":o.size()}),this._options.contextMenuEnabled&&s.click(function(e){y.contextMenuEvent(e,t)}),s.appendTo(t),this._itemsBinding.push({value:o,cell:s,source:t.source}),!this._chart.readOnly()&&g.userEditEnabled()&&e.enabled("edit_buttons_in_legend")&&(r=$('<span class="pane-legend-icon-container">'),a||r.appendTo(t),!v&&e.enabled("show_hide_button_in_legend")&&$('<a class="pane-legend-icon apply-common-tooltip icon-hide" title="'+$.t("Show/Hide")+'">').append($(i(746)).attr({width:14,height:14
})).appendTo(r).on("click touchend",this._generateItemsForRow._onShowhideClick.bind(this,g)),!v&&e.enabled("property_pages")&&e.enabled("format_button_in_legend")&&$('<a class="pane-legend-icon apply-common-tooltip format" title="'+$.t("Format")+'">').append($(i(747)).attr({width:14,height:14})).appendTo(r).on("click touchend",this._generateItemsForRow._onFormatClick.bind(this,g)),!v&&e.enabled("delete_button_in_legend")&&$('<a class="pane-legend-icon apply-common-tooltip delete" title="'+$.t("Delete")+'">').append($(i(285)).attr({width:14,height:14})).appendTo(r).on("click touchend",this._generateItemsForRow._onDeleteClick.bind(this,g)))),l=g.dataWindowView(),this.isDataWindowValuesVisible(l)&&(v&&n.showSeriesOHLC||!v&&n.showStudyValues)){for(c=[],h=[],u=$('<div class="pane-legend-item-value-container">'),this._options.contextMenuEnabled||u.addClass("no-context-menu"),this._options.sourceSelectionEnabled||u.addClass("legend-selection-disabled"),d=0;d<l.items().length;d++)p=$("<span class='pane-legend-item-value-wrap'>").appendTo(u),_=v?$("<span class='pane-legend-item-value-title pane-legend-line'>").appendTo(p):null,f=$("<span class='pane-legend-item-value pane-legend-line'>").appendTo(p),v&&(_.addClass("pane-legend-item-value-title__main"),f.addClass("pane-legend-item-value__main")),g.properties().visible.value()||(f.addClass("disabled"),_&&_.addClass("disabled")),c.push(f),_&&h.push(_);m=$("<span class='pane-legend-item-additional pane-legend-line'>").appendTo(u.appendTo(t)),this._itemsBinding.push({value:l,cell:c,titleCells:h.length?h:null,source:g,additional:m})}r&&a&&r.appendTo(t)},o.prototype.isDataWindowValuesVisible=function(e){return this._chart.onWidget()?!!e&&!this._chart.isSmall():!!e},o.prototype._generateItemsForRow._onShowhideClick=function(e){this._model.setProperty(e.properties().visible,!e.properties().visible.value(),"Show/Hide "+e.title())},o.prototype._generateItemsForRow._onFormatClick=function(e,t){e.userEditEnabled()&&(TVSettings.setValue("properties_dialog.active_tab.chart",$.t("Style")),s(e,this._model))},o.prototype._generateItemsForRow._onDeleteClick=function(e){e.isUserDeletable()&&(e.hasChildren()?showDeleteStudyTreeConfirm(this._model.removeSource.bind(this._model,e)):this._model.removeSource(e))},o.prototype._generateItemsForRow._onAddChildSourceClick=function(e){var t,i,o=this._chart.showIndicators(e);o&&(t=function(){n("SOS","Apply SOS","Apply by Plus SOS")},i=this._model.model().studyInserted(),i.subscribe(this,t),o.visibilityChanged.subscribe(this,function(e){e||i.unsubscribe(this,t)},!0))},o.prototype._generateItemsForRow._onViewSorceClick=function(e){var t=e.metaInfo();this._getPineSourceCode(t).done(function(e){TradingView.bottomWidgetBar&&TradingView.bottomWidgetBar.activateScriptEditorTab(e)})},o.prototype._getPineSourceCode=function(e){return $.Deferred()},o.prototype.setItemEnabled=function(e,t){var i=!e.hasClass("disabled"),o=e.closest(".pane-legend-wrap");t&&!i?(e.removeClass("disabled"),o.removeClass("disabled")):!t&&i&&(e.addClass("disabled"),o.addClass("disabled"))},
o.prototype.valueChanged=function(e,t,i){return e[t]!==i&&(e[t]=i,!0)},o.prototype.firstTitle=function(){return this.$el.find(".pane-legend-line.pane-legend-wrap:first-child")},o.prototype.updateTitle=function(){var t,i,o,n,r,s,a,l,c,h,u,d,p;for(o=this._itemsBinding.length;o--;)i=this._itemsBinding[o],Array.isArray(i.cell)||(i.last||(i.last={}),n=i.last,r=i.source,t=r.properties().visible.value(),this.valueChanged(n,"sourceVisible",t)&&this.setItemEnabled(i.cell,t),s=i.value.color(),a=r!==this._model.mainSeries()&&r===this._model.selectedSource()?"bold":"normal","function"==typeof i.value.getSplitTitle?(u=i.value.getSplitTitle(),l=u[0].trim(),c=u[1].trim(),h=u[2].trim()):(l=i.value.text().trim(),c="",h=""),e.enabled("fundamental_widget")&&(d=this._model.mainSeries(),p=d.symbolInfo(),l=(p?p.name:d.actualSymbol())+" "+l),i.isCellInited||(i.isCellInited=!0,h?(i.titleElement=document.createElement("div"),i.titleElement.classList.add("pane-legend-title__container"),i.cell[0].appendChild(i.titleElement),i.descriptionElement=document.createElement("div"),i.descriptionElement.classList.add("pane-legend-title__description"),i.titleElement.appendChild(i.descriptionElement),c&&(i.intervalElement=document.createElement("div"),i.intervalElement.classList.add("pane-legend-title__interval"),i.titleElement.appendChild(i.intervalElement)),i.detailsElement=document.createElement("div"),i.detailsElement.classList.add("pane-legend-title__details"),i.titleElement.appendChild(i.detailsElement),i.titleElement.classList.add("apply-overflow-tooltip","apply-overflow-tooltip--allow-text","apply-overflow-tooltip--check-children")):(i.titleElement=i.cell[0],i.descriptionElement=i.titleElement,i.descriptionElement.classList.add("apply-overflow-tooltip"))),(this.valueChanged(n,"color",s)||this.valueChanged(n,"fontWeight",a))&&(i.titleElement.style.color=s,i.titleElement.style.borderColor=s,i.titleElement.style.fontWeight=a),l!==i.description&&(i.descriptionElement.textContent=TradingView.clean(l,!0),i.description=l),i.intervalElement&&c&&c!==i.interval&&(i.intervalElement.textContent=TradingView.clean(c,!0),i.interval=c),i.detailsElement&&h&&h!==i.details&&(i.detailsElement.textContent=TradingView.clean(h,!0),i.details=h));this._chart.resizeIndicator()},o.prototype.update=function(e){var t,i,o,n,s,a,l,c,h,u,d;for(this.updateTitle(),c=this._itemsBinding.length;c--;)if(n=this._itemsBinding[c],t=n.cell,i=n.titleCells,o=n.source.properties().visible.value(),Array.isArray(t)){for(n.last||(n.last={},n.last.dwView||(n.last.dwView={})),h=n.last,s=n.value.items(),u=this.valueChanged(h,"sourceVisible",o),a=0;a<t.length;a++)l=s[a],h[a]||(h[a]={}),u&&this.setItemEnabled(t[a],o),this.valueChanged(h[a],"text",l.text())&&(t[a][0].textContent=l.text()),l.color()&&this.valueChanged(h[a],"color",l.color())&&t[a].css("color",r.resetTransparency(l.color())),i&&(this.valueChanged(h[a],"sourceVisible",o)&&this.setItemEnabled(i[a],o),this.valueChanged(h[a],"title",l.title())&&(i[a][0].textContent=l.title()))
;n.additional&&(d=void 0!==n.value.additional&&n.value.additional.length>0,n.additional.toggleClass("i-hidden",!d),d&&this.valueChanged(h,"additional",n.value.additional())&&n.additional.text(n.value.additional()||""))}this._chart.resizeIndicator()},o.prototype.dataSourceAtPoint=function(e,t){return null},o.prototype.renderTo=function(e,t,i){var o,n,r,s,a,l,c;for(e.save(),e.fillStyle=this._chart.properties().scalesProperties.textColor.value(),e.textBaseline="middle",o=0,n=0;n<this._itemsBinding.length;++n)r=this._itemsBinding[n],s=r.value,a=r.source===this._model.mainSeries(),l=a?12:8,c=a?25:17,Array.isArray(r.cell)||(e.font=s.size()+" Verdana, Arial",e.fillText(s.text(),t,i+o+l),o+=c);e.restore()},o.prototype.toggleTitles=function(e){this._model.model().properties().paneProperties.legendProperties.showLegend.setValue(!this._chart.properties().paneProperties.legendProperties.showLegend.value());for(var t=this._chart._paneWidgets.length-1;t>=0;t--)this._chart._paneWidgets[t].legendWidget.updateLayout()},t.LegendWidget=o}).call(t,i(4))},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 13 13" width="13" height="13"><path d="M1 0v1h11V0H1zm11 1v11h1V1h-1zm0 11H1v1h11v-1zM1 12V1H0v11h1zM6 2v4H2v1h4v4h1V7h4V6H7V2H6z"/></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 13 13" width="13" height="13"><path d="M1 0v1h11V0H1zm11 1v11h1V1h-1zm0 11H1v1h11v-1zM1 12V1H0v11h1zm1-6v1h9V6H2z"/></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14 14" width="14" height="14"><path d="M0 0v14h14V0zm7 2.69c3.018 0 5.172 3.232 5.172 4.31 0 1.077-2.154 4.31-5.172 4.31S1.828 8.08 1.828 7c0-1.077 2.154-4.31 5.172-4.31zm0 1.508C5.49 4.198 4.198 5.49 4.198 7S5.49 9.802 7 9.802 9.802 8.51 9.802 7 8.51 4.198 7 4.198zm0 1.68c.646 0 1.12.476 1.12 1.122 0 .646-.473 1.12-1.12 1.12-.646 0-1.12-.473-1.12-1.12 0-.646.473-1.12 1.12-1.12z"/></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="-2.4 120.9 14 14" width="14" height="14" enable-background="new -2.4 120.9 600 600"><path d="M-2.4 120.9v14h14v-14zm6.086 1.803H5.52v1.332c.416.1.805.258 1.166.48l.944-.935 1.297 1.297-.943.943c.215.35.38.748.48 1.164H9.8v1.837H8.463c-.1.417-.257.806-.48 1.167l.935.944-1.296 1.298-.944-.943c-.35.215-.747.38-1.164.48v1.332H3.677v-1.33c-.415-.102-.804-.258-1.165-.482l-.943.936-1.298-1.296.94-.945c-.216-.35-.38-.748-.482-1.165H-.597v-1.835H.737c.1-.416.257-.805.48-1.166l-.935-.944 1.296-1.297.944.943c.35-.215.747-.38 1.164-.48zm.912 3.053c-1.188 0-2.143.963-2.143 2.143 0 1.187.963 2.143 2.143 2.143 1.18 0 2.14-.963 2.145-2.145 0-1.188-.966-2.144-2.145-2.144z"/></svg>'},function(e,t){},function(e,t,i){"use strict";function o(e){return null==e._parentMenu?null:n(e._parentMenu)}function n(e){return null==e._parentMenuItem?e:o(e._parentMenuItem)}function r(e,t){this.action=e,this._parentMenu=t}function s(e,t){this.action=e,this._parentMenu=t}var a,l,c;i(209),a=i(287),l=i(182),c=i(36).IS_RTL,r.prototype._createIconTag=function(){
var e=this._iconTagAttributes();return this.jqIcon=l.create(a.ICON_CELL_TAG,e),this.jqIcon.addClass("context-menu"),this.jqIcon},r.prototype._createDeleteButton=function(){var e,t,i;if(!this.action.deleteButton)return null;e=this,t=this.action.deleteButton.action,i=l.create("span",{class:"context-menu-delete-button"}),t&&i.click(function(){return t.call(e),!1}),this.jqSubmenu.addClass("delete-spacer"),this.jqSubmenu.append(i)},r.prototype._createTextTag=function(){var e=this._textTagAttributes();return this.jqText=l.create(a.TEXT_CELL_TAG,e),this.jqIcon.addClass("context-menu"),this.jqText},r.prototype._createRightTag=function(){var e=this._rightTagAttributes();return this.jqRight=l.create(a.RIGHT_CELL_TAG,e),this.jqIcon.addClass("context-menu"),this.jqRight},r.prototype._createSubmenuTag=function(){var e=this._submenuTagAttributes();return this.jqSubmenu=l.create(a.SUBMENU_CELL_TAG,e),this.jqIcon.addClass("context-menu"),this.jqSubmenu},r.prototype._iconTagAttributes=function(){var e={},t=[];return this.action&&(this.action.icon?(t.push("icon"),t.push(this.action.icon.replace(/\./,"_"))):this.action.checkable?(t.push("icon"),this.action.checked?(t.push("checked-icon"),e.html=i(198)):t.push("unchecked-icon")):t.push("spacer")),e.class=t.join(" "),e},r.prototype._textTagAttributes=function(){return{class:"text",html:this.action?this.action.text:""}},r.prototype.highlight=function(e){e?(this.jqRow.addClass("context-menu-hover"),this.jqIcon.addClass("context-menu-hover")):(this.jqRow.removeClass("context-menu-hover"),this.jqIcon.removeClass("context-menu-hover")),this.action&&this.action.hasSubActions()&&(e?this.jqSubmenu.addClass("expanded"):this.jqSubmenu.removeClass("expanded"))},r.prototype._rightTagAttributes=function(){var e={},t=["right"];return this.action&&this.action.shortcut&&(t.push("shortcut"),e.class=t.join(" "),e.html=this.action.shortcut),e},r.prototype._submenuTagAttributes=function(){var e={};return this.action&&this.action.hasSubActions()?e.class="submenu-arrow":e.class="context-menu spacer",e},r.prototype.render=function(){var e,t;return this._createRow(),e=this._createIconTag(),this.jqRow.append(c?this._createSubmenuTag():e),this.jqRow.append(this._createTextTag()),this.jqRow.append(this._createRightTag()),this.jqRow.append(c?e:this._createSubmenuTag()),this._createDeleteButton(),this.appendCallback(),t=this,this.jqRow.mouseenter(function(e){t.showSubmenu(e),t.highlight(!0),t._parentMenu&&t._parentMenu._parentMenuItem&&t._parentMenu._parentMenuItem.highlight(!0)}),this.jqRow.mouseleave(function(){t.highlight(!1)}),this.jqRow},r.prototype._createRow=function(){var e,t,i=this._rowTagAttributes();this.jqRow=l.create(a.ITEM_ROW_TAG,i),this.jqRow.addClass("context-menu"),e=this,this.action&&!this.action.hasSubActions()&&(t=function(e){e.destroy(),e._parentMenuItem&&t(e._parentMenuItem._parentMenu)},this.jqRow.click(function(i){t(e._parentMenu)}))},r.prototype.showSubmenu=function(e){var t,o;this._parentMenu.closeOtherSubmenus(this),this.action&&!this.action.hasSubActions()||(this._menu||(t=i(86),o={},
this._menu=t.createMenu(this.action.subActions,o,this)),e.pageX=this._parentMenu.jqMenu.width()-2,e.pageY=this.jqSubmenu.offset().top-this._parentMenu.jqMenu.offset().top-1,this._menu.show(e,this._parentMenu.jqMenu))},r.prototype._rowTagAttributes=function(){var e=[];return this.action&&(!1===this.action.enabled&&e.push("disabled"),!1===this.action.visible&&e.push("hidden"),this.action.font&&e.push("font_"+this.action.font),this.action.hasSubActions()&&e.push("has_submenu"),this.action.htmlclass&&e.push(this.action.htmlclass)),{class:e.join(" ")}},r.prototype.appendCallback=function(){var e=this;this.jqRow.click(function(t){e.action.enabled&&e.action.executeCallback(t)})},r.prototype.getTopLevelMenu=function(){return o(this)},s.prototype.render=function(e){this._createRow();var t=this;return this.action.deferred.then(function(o){var n,r,s,a=i(286);for(n in o)r=o[n],s=t._parentMenu.addItem(r),a.renderItem(e,s)}).always(function(){t.jqRow.hide()}),this.jqRow},s.prototype._createIconTag=function(){var e=this._iconTagAttributes();return this.jqIcon=l.create(a.ICON_CELL_TAG,e),this.jqIcon.addClass("context-menu"),this.jqIcon},s.prototype._createRow=function(){var e=this._rowTagAttributes();this.jqRow=l.create(a.ITEM_ROW_TAG,e),this.jqRow.append(this._createIconTag()),this.jqRow.addClass("context-menu")},s.prototype._rowTagAttributes=function(){var e=[];return this.action&&e.push("spinner"),{class:e.join(" ")}},s.prototype.highlight=function(e){},s.prototype._iconTagAttributes=function(){var e={},t=[];return t.push("spacer"),e.class=t.join(" "),e.colspan="10",e},t.Item=r,t.ItemPlaceholder=s},function(e,t,i){"use strict";var o=i(182),n=i(81).setMouseEventHandler,r={};r.createLabel=function(e,t,i){return o.create("label",$.extend(i,{html:t,for:e}))},r.unbindContextMenu=function(e){e.contextMenu(function(e){return!1})},r.offsetX=function(e,t){return e.width()+t.pageX},r.offsetY=function(e,t){return e.height()+t.pageY},r.isElementInViewport=function(e){"function"==typeof jQuery&&e instanceof jQuery&&(e=e[0]);var t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)},r.isVisible=function(e,t,i){var o,n,r;for("function"==typeof jQuery&&e instanceof jQuery&&(e=e[0]),o=.01,t||(t=1),i||(i=1),n=e.getBoundingClientRect(),r=[];e.parentElement;)r.push(e.parentElement.getBoundingClientRect()),e=e.parentElement;return r.every(function(e){var r=Math.min(n.right,e.right)-Math.max(n.left,e.left),s=Math.min(n.bottom,e.bottom)-Math.max(n.top,e.top),a=r/n.width*100,l=s/n.height*100;return a+o>t&&l+o>i})},r.checkObjIsOutOfWindowX=function(e,t){var i,o=$(window).width()-r.offsetX(e,t);return o<0?(i=t.pageX+o,i>0?i:0):t.pageX},r.checkObjIsOutOfWindowY=function(e,t){var i,o=$(window).height()-r.offsetY(e,t);return o<0?(i=t.pageY+o,i>0?i:0):t.pageY},r.checkObjIsOutOfWindow=function(e,t){return{left:r.checkObjIsOutOfWindowX(e,t),top:r.checkObjIsOutOfWindowY(e,t)}},r.setAttr=function(e,t,i){
return e.attr?e.attr(t,i):e[t]=i,e},r.removeAttr=function(e,t){return e.removeAttr?e.removeAttr(t):e.removeAttribute(t),e},r.notNull=function(e){return-1===$.inArray(e,[null,void 0,"false","null","undefined",0])},r.hideControl=function(e){return e.css({position:"absolute",top:-1e3,left:-1e3})},r.createPopup=function(e,t,i){return new r.Popup(e,t,i).render()},r.Popup=function(e,t,i){if(void 0!==e.selector?this.jqDiv=e:e.nodeType?this.jqDiv=$(e):this.jqDiv=o.create("div",e),i){var r=this;$.each(i,function(e,t){r[e]=t})}n(this.jqDiv,this),this._callback=t},r.Popup.prototype.render=function(){return this.jqDiv},r.Popup.prototype.show=function(){this.jqDiv.show()},r.Popup.prototype.hide=function(){this.jqDiv.hide()},r.Popup.prototype.setVisible=function(e){e?this.show():this.hide()},r.Popup.prototype.isVisible=function(){return this.jqDiv.is(":visible")},r.Popup.prototype.contextMenuEvent=function(e){return!1},r.Popup.prototype.mouseDownOutsideEvent=function(e){if(this.isVisible()){if(this._callback&&!this._callback())return;this.hide()}},e.exports=r},function(e,t,i){"use strict";function o(e){var t,i;return e.getClientRects().length?(t=e.getBoundingClientRect(),"fixed"===getComputedStyle(e).position?{top:t.top,left:t.left}:(i=e.ownerDocument.defaultView,{top:t.top+i.pageYOffset,left:t.left+i.pageXOffset})):{top:0,left:0}}function n(e,t){var i,n,a,l,c,h,u=getComputedStyle(e),d=u.position;"static"===d&&(e.style.position="relative"),i=o(e),n=u.top,a=u.left,l=0,c=0,"absolute"!==d&&"fixed"!==d||"auto"!==n&&"auto"!==a?(n&&(l=parseFloat(n)),a&&(c=parseFloat(a))):(h=r(e),l=h.top,c=h.left),Object(s.isNumber)(t.top)&&(e.style.top=t.top-i.top+l+"px"),Object(s.isNumber)(t.left)&&(e.style.left=t.left-i.left+c+"px")}function r(e){var t=e.ownerDocument,i=e.offsetParent||t.documentElement,n=o(e),r=o(i);return{top:n.top-r.top,left:n.left-r.left}}var s;Object.defineProperty(t,"__esModule",{value:!0}),t.getOffset=o,t.setOffset=n,t.getPosition=r,s=i(127),i.n(s)},function(e,t,i){"use strict";(function(t){function o(e,t,i,o){this.reset(e,t,i,o)}var n=i(115).makeFont,r=i(114),s=t.enabled("charting_library_debug_mode");o.prototype.maxCount=200,o.prototype.reset=function(e,t,i,o){this._textWidthCache=new r(this.maxCount),this._fontSize=e,this._color=o,this._font=n(e,t,i),this._keys=[],this._hash={}},o.prototype.paintTo=function(e,t,i,o,n){var r=this.getLabelImage(e,t);"left"!==n&&(i-=r.textWidth),o-=Math.floor(r.height/2),e.drawImage(r.canvas,i,o)},o.prototype.getLabelImage=function(e,t){var i,o,n,r,a;return Object.prototype.hasOwnProperty.call(this._hash,t)?i=this._hash[t]:(this._keys.length>=this.maxCount&&(o=this._keys.shift(),delete this._hash[o]),i={text:t,textWidth:0,width:0,height:0,canvas:document.createElement("canvas")},n=Math.ceil(this._fontSize/4.5),r=Math.round(this._fontSize/10),a=Math.ceil(this._textWidthCache.measureText(e,t)),i.textWidth=Math.round(Math.max(1,a)),i.width=Math.round(a+2*n),i.height=this._fontSize+2*n,0!==a?(this._keys.push(i.text),
this._hash[i.text]=i):s&&console.log('Canvas 2d context measureText return zero width for "'+t+'" text'),i.canvas.width=i.width,i.canvas.height=i.height,e=i.canvas.getContext("2d"),e.font=this._font,e.fillStyle=this._color,e.fillText(t,0,i.height-n-r)),i},e.exports=o}).call(t,i(4))},function(e,t,i){"use strict";function o(e,t,i){return void 0===i&&(i="promise rejected by time-out"),new Promise(function(o,n){var r=setTimeout(function(){return n(i)},t);e.then(function(e){clearTimeout(r),o(e)}),e.catch(function(e){clearTimeout(r),n(e)})})}Object.defineProperty(t,"__esModule",{value:!0}),t.makeTimeLimited=o},function(e,t,i){"use strict";function o(e,t,i){this._model=t,this._paneWidget=e,this._chart=e._chart,this._mainDiv=i,this.jqDiv=$('<div class="pane-controls">'),this._initVisibility(),this.update(),this.jqDiv.appendTo(i)}var n=i(214);o.prototype.update=function(){var e,t,o,n,r,s,a,l=this._paneWidget.state();if(l){if(!this._visible||!this._chart.isActive())return void this.jqDiv[0].classList.add("pane-controls--hidden");if(this.jqDiv[0].classList.remove("pane-controls--hidden"),e=this,t=e._model,o=t.panes().indexOf(l),this.jqDiv.toggleClass("toppane",0===o||this._chart.isMaximizedPane()),n=!1,!l.containsMainSeries()&&!this._chart.isMaximizedPane()){for(r=0,s=l.dataSources(),a=s.length;a--;)if(s[a]instanceof TradingView.Study&&++r>1){n=!0;break}s=null}o>0&&!this._chart.isMaximizedPane()?(this._$upButton||(this._$upButton=$(document.createElement("a")).addClass("pane-legend-icon up").append($(i(755)).attr({width:14,height:14})).attr("title",$.t("Move Up")).on("click",function(){e._model.rearrangePanes(e._chart,e._model.panes().indexOf(e._paneWidget.state()),"up")})),this._$upButton.appendTo(this.jqDiv)):this._$upButton&&this._$upButton.detach(),o<this._model.panes().length-1&&!this._chart.isMaximizedPane()?(this._$downButton||(this._$downButton=$(document.createElement("a")).addClass("pane-legend-icon down").append($(i(756)).attr({width:14,height:14})).attr("title",$.t("Move Down")).on("click",function(){e._model.rearrangePanes(e._chart,e._model.panes().indexOf(e._paneWidget.state()),"down")})),this._$downButton.appendTo(this.jqDiv)):this._$downButton&&this._$downButton.detach(),n?(this._$closeButton||(this._$closeButton=$(document.createElement("a")).addClass("pane-legend-icon delete").append($(i(285)).attr({width:14,height:14})).attr("title",$.t("Delete")).on("click",function(){e._model.removePane(e._chart,e._model.panes().indexOf(e._paneWidget.state()))})),this._$closeButton.appendTo(this.jqDiv)):this._$closeButton&&this._$closeButton.detach(),this._model.panes().length>1&&!this._chart.isMaximizedPane()?(this._$maximizeButton||(this._$maximizeButton=$(document.createElement("a")).addClass("pane-legend-icon maximize").append($(i(757)).attr({width:14,height:14})).attr("title",$.t("Toggle Maximize Pane")).on("click",function(){e._chart.toggleMaximizePane(e._paneWidget)})),this._$maximizeButton.appendTo(this.jqDiv)):this._$maximizeButton&&this._$maximizeButton.detach(),
this._model.panes().length>1&&this._chart.isMaximizedPane()?(this._$restoreButton||(this._$restoreButton=$(document.createElement("a")).addClass("pane-legend-icon restore").append($(i(758)).attr({width:14,height:14})).attr("title",$.t("Toggle Maximize Pane")).on("click",function(){e._chart.toggleMaximizePane(e._paneWidget)})),this._$restoreButton.appendTo(this.jqDiv)):this._$restoreButton&&this._$restoreButton.detach()}},o.prototype.destroy=function(){this._visibilityProperty&&(this._visibilityProperty.unsubscribe(this,this._onVisibilityPropertyChange),this._visibilityProperty=null),this._boundMouseHandler&&(this._mainDiv[0].removeEventListener("mouseenter",this._boundMouseHandler,!1),this._mainDiv[0].removeEventListener("mouseleave",this._boundMouseHandler,!1),this._boundMouseHandler=null),this.jqDiv.remove()},o.prototype._initVisibility=function(){this._visible=!0,this._visibilityProperty=n.actualBehavior(),this._visibilityProperty.subscribe(this,this._onVisibilityPropertyChange),this._onVisibilityPropertyChange()},o.prototype._onVisibilityPropertyChange=function(){var e=this._visibilityProperty.value();"alwaysOn"===e||"alwaysOff"===e?(this._visible="alwaysOn"===e,this._boundMouseHandler&&(this._mainDiv[0].removeEventListener("mouseenter",this._boundMouseHandler),this._mainDiv[0].removeEventListener("mouseleave",this._boundMouseHandler),this._boundMouseHandler=null)):(this._boundMouseHandler||(this._boundMouseHandler=this._visibilityMouseHandler.bind(this),this._mainDiv[0].addEventListener("mouseenter",this._boundMouseHandler),this._mainDiv[0].addEventListener("mouseleave",this._boundMouseHandler)),this._visible=!1),this.update()},o.prototype._visibilityMouseHandler=function(e){this._visible="mouseenter"===e.type,this.update()},e.exports=o},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14 14" width="14" height="14"><path d="M0 0v14h14V0zm7 2l2.8 3H8v6H6V5H4.2z"/></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14 14" width="14" height="14"><path d="M14 14V0H0v14zm-7-2L4.2 9H6V3h2v6h1.8z"/></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14 14" width="14" height="14"><path d="M0 0v14h14V0zm7 1l2.8 3H8v2.5H6V4H4.2zM6 7.5h2V10h1.8L7 13l-2.8-3H6z"/></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14 14" width="14" height="14"><path d="M0 0v14h14V0H0zm6 1.5h2V4h1.8L7 7l2.8 3H8v2.5H6V10H4.2L7 7 4.2 4H6V1.5z"/></svg>'},function(e,t,i){"use strict";function o(e,t,i){this.chart=e,this.paneA=e.paneWidgets()[t],this.paneB=e.paneWidgets()[i],this.jqRow=$(document.createElement("tr")),this.jqRow.height(o.HEIGHT),this.jqCell=$(document.createElement("td")),this.jqCell.appendTo(this.jqRow),this.jqCell.addClass("pane-separator"),this.jqCell.attr("colspan","3"),this.jqCell.css("background",this.chart.properties().scalesProperties.lineColor.value()),this.jqCell.click(function(){}),this.handle=$('<div class="handle">').appendTo(this.jqCell),r(this.handle,this)}var n,r;i(760),n=i(46).clamp,
r=i(81).setMouseEventHandler,o.HEIGHT=1,o.prototype.hide=function(){this.jqRow.addClass("js-hidden")},o.prototype.show=function(){this.jqRow.removeClass("js-hidden")},o.prototype.mouseDownEvent=function(e){(0===e.button||Modernizr.touch)&&(this.startY=e.pageY,this.deltaY=0,this.totalHeight=this.paneA.size.h+this.paneB.size.h,this.totalStretch=this.paneA.stretchFactor()+this.paneB.stretchFactor(),this.prevStretchA=this.paneA.stretchFactor(),this.minPaneHeight=30,this.maxPaneHeight=this.totalHeight-this.minPaneHeight,this.pixelStretchFactor=this.totalStretch/this.totalHeight)},o.prototype.pressedMouseMoveEvent=function(e){var t,i,o,r;(0===e.button||Modernizr.touch)&&(e.preventDefault(),this.deltaY=e.pageY-this.startY,t=this.paneA.size.h,i=n(t+this.deltaY,this.minPaneHeight,this.maxPaneHeight),o=i*this.pixelStretchFactor,r=this.totalStretch-o,this.paneA.setStretchFactor(o),this.paneB.setStretchFactor(r),this.chart._adjustSize(),this.paneA.size.h!==t&&(this.startY=e.pageY),this.chart.paint())},o.prototype.mouseUpEvent=function(e){(0===e.button||Modernizr.touch)&&(this.chart._model.addPaneStretchFactorUndoCommand(this.paneA._state,this.paneB._state,this.prevStretchA,this.paneA.stretchFactor()),this.startY=0,this.deltaY=0,this.totalHeight=0,this.totalStretch=0,this.minPaneHeight=0,this.maxPaneHeight=0,this.pixelStretchFactor=0)},o.prototype.update=function(){this.jqCell.css("background",this.chart.properties().scalesProperties.lineColor.value())},o.prototype.paint=function(){},o.prototype.image=function(){var e={},t=o.HEIGHT,i=this.paneA.lhsPriceAxisWidget.size.w,n=this.paneA.size.w,r=this.paneA.rhsPriceAxisWidget.size.w,s=$('<canvas width="'+i+'" height="'+t+'">')[0],a=s.getContext("2d");return a.fillStyle=this.chart.properties().scalesProperties.lineColor.value(),a.fillRect(0,0,i,t),e.leftAxis={content:s.toDataURL(),contentWidth:i,contentHeight:t},s=$('<canvas width="'+n+'" height="'+t+'">')[0],a=s.getContext("2d"),a.fillStyle=this.chart.properties().scalesProperties.lineColor.value(),a.fillRect(0,0,n,t),e.content=s.toDataURL(),e.contentWidth=n,e.contentHeight=t,s=$('<canvas width="'+r+'" height="'+t+'">')[0],a=s.getContext("2d"),a.fillStyle=this.chart.properties().scalesProperties.lineColor.value(),a.fillRect(0,0,r,t),e.rightAxis={content:s.toDataURL(),contentWidth:r,contentHeight:t},e},e.exports=o},function(e,t){},function(e,t,i){"use strict";function o(e,t,o,r,s,a,l,c,h){var u=i(762).ChartUndoModel,d=new u(e,t,o,r,s,a,l,c,h);return d.model().invalidate(new n(n.FULL_UPDATE)),d}var n=i(16),r=i(28);TradingView.MAMetaInfo=function(){return new r({id:"MASimple",inputs:[{id:"length",type:"integer",defval:10},{id:"source",type:"text",defval:"close"}],plots:[{id:"MovAvg",type:"line"}],properties:[{id:"is_price_study",type:"bool",value:"true"}],palettes:{}})},TradingView.VolumeMetaInfo=function(){var e={id:"Volume",inputs:[],plots:[{id:"Volume",type:"histogram"},{id:"Color",type:"colorer",palette:"volumePalette",target:"Volume"}],properties:[{id:"is_price_study",type:"bool",value:"false"}],palettes:{volumePalette:{colors:{0:{
color:"#007F0E",width:1,style:CanvasEx.LINESTYLE_SOLID,name:"Up Volume"},1:{color:"#872323",width:1,style:CanvasEx.LINESTYLE_SOLID,name:"Down Volume"}}}}};return new r(e)},TradingView.DMMetaInfo=function(){return new r({id:"DM",inputs:[{id:"ADX smoothing",max:50,min:1,type:"integer",defval:14},{id:"DI Length",max:500,min:1,type:"integer",defval:14}],plots:[{id:"ADX",type:"line"},{id:"DI_P",type:"line"},{id:"DI_N",type:"line"}],properties:[{id:"is_price_study",type:"bool",value:"false"}],palettes:{}})},TradingView.RSIMetaInfo=function(){return new r({id:"RSI",inputs:[{id:"length",type:"integer",defval:14}],plots:[{id:"RelativeStrengthIndex",type:"line"}],properties:[{id:"is_price_study",type:"bool",value:"false"}],palettes:{}})},e.exports=o},function(e,t,i){"use strict";(function(e){function o(t,i,o,n,r,s,a,l,c){this._chartWidget=s,this.m_model=new j(t,i,o,n,r,this,l,c),this.m_zoomStack=new ne,this.undoHistory=a,this._onRearrangePanes=new e,this._onSimpleZoomIn=new e,this._onSimpleZoomOut=new e,this._currentCustomMoveSource=null,this._currentLineMoveCommand=null,this.beginUndoMacro=a.beginUndoMacro.bind(a),this.endUndoMacro=a.endUndoMacro.bind(a),this.createUndoCheckpoint=a.createUndoCheckpoint.bind(a),this.undoToCheckpoint=a.undoToCheckpoint.bind(a)}function n(e,t,i,o){re.call(this,i),this._targetObj=e,this._newValue=t,this._model=o}function r(e,t,i,o){re.call(this,i),this._priceScale=t,this._newMode=e,this._model=o}function s(e,t,i,o){re.call(this,i),this._property=e,this._newValue=t,this._model=o,this._priceScale=this._model.mainSeries().priceScale()}function a(e,t,i,o){re.call(this,"scale price",!1),this.m_model=e,this.m_pane=t,this.m_priceScale=i,this.m_state=o,this.m_newPriceScaleState=null}function l(e,t,i){re.call(this,i,!1),this.setCustomFlag("doesnt_affect_save",!0),this.m_model=e,this.m_state=t,this.m_newTimeScaleState=null}function c(e,t,i,o){this._model=e,this._series=t,this._oldSymbol=t.symbol(),this._oldInterval=t.interval(),this._symbol=i,this._interval=o}function h(e,t,i,o,n){re.call(this,"Insert "+t.id),this._model=e,this._studyMetaInfo=t,this._props=i,this._isOverlay=o,this._parentSource=n,this._oldShowLeftScale=e.isLeftPriceScaleVisible(),this._oldShowRightScale=e.isRightPriceScaleVisible()}function u(e,t){re.call(this,"Remove Source"),this._model=e,this._sourceId=t.id()}function d(e,t){re.call(this,"Remove Drawing(s)"),this._model=e,this._linetools=t,this._statesByPaneIndexes={}}function p(e,t,i,o){this._model=e,this._oldPane=this._model.paneForSource(t),re.call(this,this._oldPane===i?"Change Price Scale":"Move Source"),this._sourceId=t.id(),this._oldPaneIndex=e.panes().indexOf(this._oldPane),this._oldScaleName=this._oldPane.priceScaleName(t.priceScale()),this._oldShowLeftScale=e.isLeftPriceScaleVisible(),this._oldShowRightScale=e.isRightPriceScaleVisible(),this._pane=i,this._paneIndex=e.panes().indexOf(i),this._pane?this._scaleName=this._pane.priceScaleName(o):this._paneIndex=e.panes().length}function _(e,t,i){this._model=e,this._sourceId=t.id(),this._oldShowLeftScale=e.isLeftPriceScaleVisible(),
this._oldShowRightScale=e.isRightPriceScaleVisible(),re.call(this,i)}function f(e,t){_.call(this,e,t,"Merge Up"),this._mergeRedoFn=this._model.mergeSourceUp,this._mergeUndoFn=this._model.unmergeSourceDown}function m(e,t){_.call(this,e,t,"Merge Down"),this._mergeRedoFn=this._model.mergeSourceDown,this._mergeUndoFn=this._model.unmergeSourceUp}function g(e,t){_.call(this,e,t,"Unmerge Up"),this._mergeRedoFn=this._model.unmergeSourceUp,this._mergeUndoFn=this._model.mergeSourceDown}function y(e,t){_.call(this,e,t,"Unmerge Down"),this._mergeRedoFn=this._model.unmergeSourceDown,this._mergeUndoFn=this._model.mergeSourceUp}function v(e,t,i){re.call(this,"Create line "+i,!1),this._model=e,this._paneIndex=e.panes().indexOf(t),this._lineTool=i}function b(e,t,i,o){re.call(this,"Move Drawing",!1),this._model=e,this._sourceId=t.id(),this._origPoint=i instanceof N?i.clone():TradingView.clone(i),this._pointIndex=o}function S(e,t,i){re.call(this,"Change %1 Z order (%2)".format(t.title(),i>0?"Forward":"Backward")),this._model=e,this._sourceId=t.id(),this._shift=i}function w(e,t){re.call(this,"Send "+t.title()+" to back"),this._model=e,this._sourceId=t.id()}function T(e,t){re.call(this,"Bring "+t.title()+" to front"),this._model=e,this._sourceId=t.id()}function P(e,t,i){re.call(this,"Remove pane"),this._model=e,this._index=t,this._pane=this._model.panes()[t],this._chart=i}function x(e,t,i,o){re.call(this,"Rearrange panes"),this._model=e,this._index=t,this._direction=i,this._chart=o}function C(e,t,i,o,n,r){re.call(this,"Zoom"),this._model=e,this._startBar=t,this._endBar=i,this._startPrice=o,this._endPrice=n,this._pane=r}function L(e,t,i){re.call(this,"Zoom"),this._baseCmd=e,this._zoomStack=t,this._inOut=i}function I(e,t,i,o,n){re.call(this,"",!1),this._model=e,this._paneA=t,this._paneB=i,this._prevStretchA=o,this._currStretchA=n}function M(e,t){re.call(this,"Restore Defaults"),this._model=e,this._defaultProperty=t,this._state=t.state(t._exclusions),this._chartWidget=e._undoModel._chartWidget}function k(e,t){re.call(this,"Apply Chart Theme"),this._model=e,this._newChartProps=TradingView.factoryDefaults("chartproperties"),this._newSeriesProps=TradingView.factoryDefaults("chartproperties.mainSeriesProperties"),["candleStyle","hollowCandleStyle","haStyle"].forEach(function(e){t.mainSourceProperties[e].wickUpColor=t.mainSourceProperties[e].wickUpColor||t.mainSourceProperties[e].wickColor,t.mainSourceProperties[e].wickDownColor=t.mainSourceProperties[e].wickDownColor||t.mainSourceProperties[e].wickColor}),t.chartProperties.paneProperties.vertGridProperties=t.chartProperties.paneProperties.vertGridProperties||t.chartProperties.paneProperties.gridProperties,t.chartProperties.paneProperties.horzGridProperties=t.chartProperties.paneProperties.horzGridProperties||t.chartProperties.paneProperties.gridProperties,t.chartProperties.paneProperties.legendProperties=this._model.properties().state().paneProperties.legendProperties,this._newChartProps=$.extend(!0,{},this._newChartProps,t.chartProperties),
delete this._newChartProps.scalesProperties.showLeftScale,delete this._newChartProps.scalesProperties.showRightScale,delete this._newChartProps.scalesProperties.scaleSeriesOnly,delete this._newChartProps.scalesProperties.showSeriesLastValue,delete this._newChartProps.scalesProperties.showStudyLastValue,delete this._newChartProps.scalesProperties.showSymbolLabels,delete this._newChartProps.scalesProperties.showStudyPlotLabels,e.timeScale().preserveBarSpacing()&&delete this._newChartProps.scalesProperties.barSpacing,this._newSeriesProps=$.extend(!0,{},this._newSeriesProps,t.mainSourceProperties),this._newChartProps.symbolWatermarkProperties||(this._newChartProps.symbolWatermarkProperties=defaults("chartproperties.symbolWatermarkProperties"),this._newChartProps.symbolWatermarkProperties.color=this._newChartProps.scalesProperties.textColor),this._oldChartProps=e.properties().state(),delete this._oldChartProps.paneProperties.topMargin,delete this._oldChartProps.paneProperties.bottomMargin,this._oldSeriesProps=e.properties().state().mainSeriesProperties}function A(e,t,i,o){var n;o=o||"",n=o+" Study template",re.call(this,n),this._model=e,this._oldProps=t,this._newProps=i,this._oldShowLeftScale=e.model().isLeftPriceScaleVisible(),this._oldShowRightScale=e.model().isRightPriceScaleVisible(),this._newSourcesPriceScalesNames=[]}function E(e,t,i,o,n){re.call(this,e),this._property=t,this._value=i,this._forceSetProperty=n,this._prevValue=t.value(),this._cw=o}function D(e,t){var i,o,n,r,s=t.priceScale(),a=[],l=t.firstValue();for(i=0;i<e.length;i++)o={offset:e[i].offset,time_t:e[i].time_t},n=e[i].price,r=s.priceToCoordinate(n,l),r-=40,n=s.coordinateToPrice(r,l),o.price=n,a.push(o);return a}function V(e,t,i){re.call(this,"clone "+t.title()),this._model=e,this._originalSource=t,this._withoutShift=i}function O(e,t){re.call(this,"Stop Sincing Drawing"),this._model=e,this._sourceId=t.id(),this._linkKey=t.linkKey}function R(e,t,i){re.call(this,"Paste Drawing"),this._model=e,this._clipboardData=t,this._paneIndex=this._model.panes().indexOf(i||this._model.paneForSource(this._model.mainSeries()))}function B(e,t){re.call(this,"Paste Indicator"),this._model=e,this._clipboardData=t}function z(e,t){re.call(this,"Move",!1),this._origPoint=e.clone(),this._point=null,this._handler=t}var N=i(6).Point,F=i(79).createLineTool,W=i(0).LineDataSource,H=i(4),j=i(118),U=i(33),q=i(16),Y=i(316).doAnimate,G=i(298),K=i(2),Z=K.saveDefaultProperties,X=i(184),J=i(65).Series,Q=i(25),ee=Q.Study,te=i(123),ie=i(37),oe=i(289).showTooManyStudiesNotice,ne=i(290).UndoStack,re=i(41).UndoCommand,se=i(763).SaveLineToolStateUndoCommand,ae=i(764).ApplyLineToolTemplateUndoCommand,le=i(765).SetChartStyleCommand,ce=i(766).SetResolutionUndoCommand,he=i(48).preparePriceAxisProperties,ue=i(291).RestoreFactoryDefaultsUndoCommand,de=i(291).RestoreUserDefaultsUndoCommand,pe=i(48).getChartStyleByResolution,_e=i(5).getLogger("Chart.ChartUndoModel");inherit(o,G),o.prototype.version=function(){return this.m_model._version},o.prototype.onData=function(e){switch(e.method){
case"timescale_update":var t=e.params;this.m_model.updateTimeScale(t.index,t.zoffset,t.changes,t.index_diff,t.marks,t.clear)}},o.prototype.paneForSource=function(e){return this.m_model.paneForSource(e)},o.prototype.createPane=function(e){return this.m_model.createPane(e)},o.prototype.dumpViews=function(){return this.m_model.dumpViews()},o.prototype.readOnly=function(){return this.m_model.readOnly()},o.prototype.restart=function(){this.m_model.restart()},o.prototype.disconnect=function(){this.m_model.disconnect()},o.prototype.studiesMetaData=function(){return this.m_model.studiesMetaData()},o.prototype.studyVersioning=function(){return this.m_model.studyVersioning()},o.prototype.chartModel=function(){return this.m_model},o.prototype.pushUndoCommand=function(e){this.undoHistory.pushUndoCommand(e)},o.prototype.startScalePrice=function(e,t,i){this.pushUndoCommand(new a(this.m_model,e,t,t.state())),this.chartModel().startScalePrice(e,t,i)},o.prototype.scalePriceTo=function(e,t,i){this.chartModel().scalePriceTo(e,t,i)},o.prototype.endScalePrice=function(e,t){this.chartModel().endScalePrice(e,t)},o.prototype.startScrollPrice=function(e,t,i){t.isAutoScale()||(this._initialPriceScrollState=t.state(),this._initialPriceScrollPos=i,this.chartModel().startScrollPrice(e,t,i))},o.prototype.scrollPriceTo=function(e,t,i){t.isAutoScale()||(this._initialPriceScrollPos&&Math.abs(this._initialPriceScrollPos-i)>20&&(this.pushUndoCommand(new a(this.m_model,e,t,this._initialPriceScrollState)),delete this._initialPriceScrollState,delete this._initialPriceScrollPos),this.chartModel().scrollPriceTo(e,t,i))},o.prototype.endScrollPrice=function(e,t){t.isAutoScale()||(delete this._initialPriceScrollState,delete this._initialPriceScrollPos,this.chartModel().endScrollPrice(e,t))},o.prototype.setPriceAutoScale=function(e,t,i){this.pushUndoCommand(new a(this.m_model,e,t,t.state())),this.chartModel().setPriceAutoScale(e,t,i)},o.prototype.resetPriceScale=function(e,t){this.pushUndoCommand(new a(this.m_model,e,t,t.state())),this.chartModel().resetPriceScale(e,t)},o.prototype.startScaleTime=function(e){this.pushUndoCommand(new l(this.m_model,this.m_model.timeScale().state(),"scale time")),this.chartModel().startScaleTime(e)},o.prototype.scaleTimeTo=function(e){this.chartModel().scaleTimeTo(e)},o.prototype.endScaleTime=function(){this.chartModel().endScaleTime()},o.prototype.startScrollTime=function(e){this._initialTimeScrollState=this.m_model.timeScale().state(),this._initialTimeScrollPos=e,this.chartModel().startScrollTime(e)},o.prototype.scrollTimeTo=function(e){this._initialTimeScrollPos&&Math.abs(e-this._initialTimeScrollPos)>20&&(this.pushUndoCommand(new l(this.m_model,this._initialTimeScrollState,"scroll time")),delete this._initialTimeScrollPos,delete this._initialTimeScrollState),this.chartModel().scrollTimeTo(e)},o.prototype.gotoTime=function(e,t){var i,o,n=this.timeScale().visibleBars();if(null===n)return $.Deferred().reject().promise();i=n.firstBar(),o=this.m_model.timeScale().state(),this.chartModel().gotoTime(e,t),
i!==this.timeScale().visibleBars().firstBar()&&this.pushUndoCommand(new l(this.m_model,o,"scroll time"))},o.prototype.endScrollTime=function(){this.chartModel().endScrollTime(),delete this._initialTimeScrollPos,delete this._initialTimeScrollState},o.prototype.resetTimeScale=function(){this.pushUndoCommand(new l(this.m_model,this.m_model.timeScale().state())),this.chartModel().resetTimeScale()},o.prototype.canZoomIn=function(){return this.chartModel().canZoomIn()},o.prototype.canZoomOut=function(){return this.chartModel().canZoomOut()},o.prototype.setWidth=function(e){this.m_model.setWidth(e)},o.prototype.setPaneHeight=function(e,t){this.m_model.setPaneHeight(e,t)},o.prototype.gridSource=function(){return this.m_model.gridSource()},o.prototype.watermarkSource=function(){return this.m_model.watermarkSource()},o.prototype.brandingSource=function(){return this.m_model.brandingSource()},o.prototype.addAlertsSource=function(e){return this.m_model.addAlertsSource(e)},o.prototype.alertsSources=function(){return this.m_model.alertsSources()},o.prototype.barsMarksSources=function(){return this.m_model.barsMarksSources()},o.prototype.crossHairSource=function(){return this.m_model.crossHairSource()},o.prototype.model=function(){return this.m_model},o.prototype.chartWidget=function(){return this._chartWidget},o.prototype.mainSeries=function(){return this.m_model.m_mainSeries},o.prototype.mainSeriesScaleRatioProperty=function(){return this.m_model.mainSeriesScaleRatioProperty()},o.prototype.mainSeriesPriceScaleNameProperty=function(){return this.m_model.mainSeriesPriceScaleNameProperty()},o.prototype.panes=function(){return this.m_model.m_panes},o.prototype.timeScale=function(){return this.m_model.timeScale()},o.prototype.setSelectedSource=function(e,t){this.m_model.setSelectedSource(e,t)},o.prototype.setHoveredSource=function(e,t){this.m_model.setHoveredSource(e,t)},o.prototype.selectedSource=function(){return this.m_model.selectedSource()},o.prototype.onSelectedSourceChanged=function(){return this.m_model.onSelectedSourceChanged()},o.prototype.hoveredSource=function(){return this.m_model.hoveredSource()},o.prototype.activeStrategySource=function(){return this.m_model.activeStrategySource()},o.prototype.invalidate=function(e){this.m_model.invalidate(e)},o.prototype.setCurrentPosition=function(e,t,i,o){this.m_model.setCurrentPosition(e,t,i,o)},o.prototype.setAndSaveCurrentPosition=function(e,t,i,o){this.m_model.setAndSaveCurrentPosition(e,t,i,o)},o.prototype.modifySeries=function(e,t,i){var o=new c(this.m_model,e,t,i);this.pushUndoCommand(o)},o.prototype.canCreateStudy=function(e){return this.model().chartApi().chartApi().isCanCreateStudy(e)},o.prototype.checkIfFeatureAvailable=function(e,t){var i=this.canCreateStudy(),o=t&&t instanceof ee;return!this.readOnly()&&o&&(i=this.canCreateStudy(!0)),!!i||void(o||oe())},o.prototype._insertStudy=function(e,t,i,o){var n=new h(this.m_model,e,t,i,o);return this.pushUndoCommand(n),n.insertedStudy()},o.prototype.insertStudyWithoutCheck=function(){return this._insertStudy.apply(this,arguments)
},o.prototype.insertStudy=function(e,t,i,o){if(this.checkIfFeatureAvailable(e,o))return this._insertStudy(e,t,i,o)},o.prototype.setProperty=function(e,t,i){if(e&&e.value()!==t){var o=new n(e,t,i,this.m_model);this.pushUndoCommand(o),this.emitEvent("setProperty")}},o.prototype.setPriceScaleMode=function(e,t,i){var o,n,s=Object.keys(e),a=t.mode(),l=!1;for(o=0;o<s.length;o++)if(a[s[o]]!==e[s[o]]){l=!0;break}l&&(n=new r(e,t,i,this.m_model),this.pushUndoCommand(n))},o.prototype.setChartStyleProperty=function(e,t,i){if(e.value()!==t){var o=new le(e,t,this.mainSeries(),i,this.m_model,this._chartWidget);this.pushUndoCommand(o),this.emitEvent("setChartStyleProperty")}},o.prototype.setScaleRatioProperty=function(e,t,i){if(e.value()!==t){var o=new s(e,t,i,this.m_model);this.pushUndoCommand(o)}},o.prototype.setScreenChartProperty=function(e,t,i,o,n){if(n||e.value()!==t){var r=new E(o,e,t,i,n);this.pushUndoCommand(r)}},o.prototype.setResolutionProperty=function(e,t,i,o){if(e.value()!==t){var n=new ce(e,t,i,o);this.pushUndoCommand(n)}},o.prototype._getSourcesTree=function(e){var t,i=[],o=this.m_model.children(e);for(t=0;t<o.length;t++)i=i.concat(this._getSourcesTree(o[t]));return i.push(e),i},o.prototype.removeSource=function(e,t){var i,o,n;if(e.isUserDeletable()){if(i=this._getSourcesTree(e),this.lineBeingCreated()===e)this.cancelCreatingLine();else{for(this.beginUndoMacro("Remove source"),o=0;o<i.length;++o)n=new u(this.m_model,i[o]),this.pushUndoCommand(n);this.endUndoMacro()}t||(1===i.length?this.emitEvent("removeSource",[i[0]]):this.emitEvent("removeSources",[i]))}},o.prototype.removeSelectedSource=function(){var e,t=this.m_model.selectedSource();t&&t.isUserDeletable()&&(this.setSelectedSource(null),e=new u(this.m_model,t),this.pushUndoCommand(e),this.emitEvent("removeSource",[t]))},o.prototype.removeLineTools=function(e){var t,i,o=this.lineBeingCreated();o&&-1!==(t=e.indexOf(o))&&(this.cancelCreatingLine(),e.splice(t,1)),i=new d(this.m_model,e),this.pushUndoCommand(i),this.emitEvent("removeSources",[e])},o.prototype.move=function(e,t,i){var o=new p(this.m_model,e,t,i);this.pushUndoCommand(o),this.emitEvent("moveSource",[e])},o.prototype.mergeSourceUp=function(e){var t=new f(this.m_model,e);this.pushUndoCommand(t),this.emitEvent("mergeSourceUp",[e])},o.prototype.mergeSourceDown=function(e){var t=new m(this.m_model,e);this.pushUndoCommand(t),this.emitEvent("mergeSourceDown",[e])},o.prototype.unmergeSourceUp=function(e){var t=new g(this.m_model,e);this.pushUndoCommand(t),this.emitEvent("unmergeSourceUp",[e])},o.prototype.unmergeSourceDown=function(e){var t=new y(this.m_model,e);this.pushUndoCommand(t),this.emitEvent("unmergeSourceDown",[e])},o.prototype.createLineTool=function(e,t,i,o,n){var r,s;return"LineToolRegressionTrend"!==i||this.canCreateStudy()?(this._createLineCommand=new v(this.m_model,e,i),r=this._createLineCommand.startCreatingLine(t,o,n),s=this._createLineCommand.line(),r&&(this.pushUndoCommand(this._createLineCommand),delete this._createLineCommand),s):void oe()},o.prototype.lineBeingCreated=function(){
return this.m_model.lineBeingCreated()},o.prototype.paneBeingCreatedLineOn=function(){return this.m_model.paneBeingCreatedLineOn()},o.prototype.coninueCreatingLine=function(e,t,i){var o=this._createLineCommand.continueCreatingLine(e,t,i);return o&&(this.pushUndoCommand(this._createLineCommand),delete this._createLineCommand),o},o.prototype.finishLineTool=function(e){this.m_model.finishLineTool(e)},o.prototype.cancelCreatingLine=function(){this.m_model.cancelCreatingLine()},o.prototype.lineCancelled=function(){return this.m_model.lineCancelled()},o.prototype.startChangingLinetool=function(e,t,i,o){this._currentLineChangeCommand=new se(this.m_model,e,"Change "+i+"point",!1),this.m_model.startChangingLinetool(e,t,i,o)},o.prototype.lineBeingEdited=function(){return this.m_model.lineBeingEdited()},o.prototype.changeLinePoint=function(e,t){this.m_model.changeLinePoint(e,t)},o.prototype.endChangingLinetool=function(e){this.m_model.endChangingLinetool(e),this.pushUndoCommand(this._currentLineChangeCommand),this._currentLineChangeCommand=null},o.prototype.startMovingSource=function(e,t,i){e.doesMovingAffectsUndo()&&(this._currentLineMoveCommand=new b(this.m_model,e,t,i)),this.m_model.startMovingSource(e,t,i)},o.prototype.sourceBeingMoved=function(){return this.m_model.sourceBeingMoved()},o.prototype.moveSource=function(e){null!==this._currentLineMoveCommand&&this._currentLineMoveCommand.setPoint(e),this.m_model.moveSource(e)},o.prototype.endMovingSource=function(e){this.m_model.endMovingSource(e),null!==this._currentLineMoveCommand&&this._currentLineMoveCommand._point&&(this.pushUndoCommand(this._currentLineMoveCommand),this._currentLineChangeCommand=null),this._currentLineMoveCommand=null},o.prototype.dataSources=function(){return this.m_model.dataSources()},o.prototype.orderedDataSources=function(e){return this.m_model.orderedDataSources(e)},o.prototype.dataSourceForId=function(e){return this.m_model.dataSourceForId(e)},o.prototype.state=function(e,t){return this.m_model.state(e,t)},o.prototype.asyncState=function(e){return this.m_model.asyncState(e)},o.prototype.restoreState=function(e,t){return this.m_model.restoreState(e,t)},o.prototype.calculateDefaultTags=function(){return this.m_model.calculateDefaultTags()},o.prototype.onTagsChanged=function(){return this.m_model.onTagsChanged()},o.prototype.changeZOrder=function(e,t){var i=new S(this.m_model,e,t);this.pushUndoCommand(i),this.emitEvent("changeZOrder",[e,t])},o.prototype.sendToBack=function(e){var t=new w(this.m_model,e);this.pushUndoCommand(t),this.emitEvent("changeZOrder",[e])},o.prototype.bringToFront=function(e){var t=new T(this.m_model,e);this.pushUndoCommand(t),this.emitEvent("changeZOrder",[e])},o.prototype.removeAllStudies=function(){var e,t,i;for(this.beginUndoMacro("remove all studies"),e=this.m_model.dataSources(),t=0;t<e.length;t++)i=e[t],(TradingView.isInherited(i.constructor,ee)&&!i.isChildStudy()&&i.removeByRemoveAllStudies()||TradingView.isInherited(i.constructor,te))&&this.removeSource(i);this.endUndoMacro()},
o.prototype.removeAllDrawingTools=function(e){var t,i,o;for(this.beginUndoMacro("remove all drawing tools"),this.lineBeingCreated()&&this.cancelCreatingLine(),t=this.m_model.dataSources(),i=0;i<t.length;i++)o=t[i],TradingView.isInherited(o.constructor,W)&&o.isActualSymbol()&&o.isUserDeletable()&&(e&&e!==o._constructor||this.removeSource(o));this.endUndoMacro()},o.prototype.unlinkLine=function(e){var t=new O(this.m_model,e);this.pushUndoCommand(t)},o.prototype.copyToOtherCharts=function(e){this.m_model.copyToOtherCharts(e)},o.prototype.moveLeft=function(){var e,t;try{this.beginUndoMacro("Move Left")}catch(e){return}e=this.m_model.timeScale().width(),t=this,Y({to:e/5,onStep:function(e){t.startScrollTime(e),t.scrollTimeTo(0),t.endScrollTime()},onComplete:function(){t.endUndoMacro()}})},o.prototype.moveRight=function(){var e,t;try{this.beginUndoMacro("Move Right")}catch(e){return}e=this.m_model.timeScale().width(),t=this,Y({to:e/5,onStep:function(e){t.startScrollTime(0),t.scrollTimeTo(e),t.endScrollTime()},onComplete:function(){t.endUndoMacro()}})},o.prototype.scrollChart=function(e){H.enabled("chart_scroll")&&(this.startScrollTime(0),this.scrollTimeTo(e),this.endScrollTime())},o.prototype.scrollChartByBar=function(e){if(H.enabled("chart_scroll")){var t=e*this.m_model.timeScale().barSpacing();this.startScrollTime(0),this.scrollTimeTo(t),this.endScrollTime()}},o.prototype.zoomIn=function(e,t){var i,o,n=this.m_model.timeScale().width(),r=this;if(t=t||1,this.canZoomIn())if(e)i=t*n/10,o=i*((e+1)/2),this.startScaleTime(i),this.scaleTimeTo(0),this.endScaleTime(),this.startScrollTime(0),this.scrollTimeTo(i-o),this.endScrollTime(),this._onSimpleZoomIn.fire();else{try{this.beginUndoMacro("Zoom In")}catch(e){return}Y({to:n/5,onStep:function(e){r.startScaleTime(e),r.scaleTimeTo(0),r.endScaleTime()},onComplete:function(){r.endUndoMacro(),r._onSimpleZoomIn.fire()}})}},o.prototype.zoomOut=function(e,t){var i=this.m_model.timeScale().width(),o=this;if(t=t||1,this.canZoomOut())if(e)this.startScaleTime(0),this.scaleTimeTo(t*i/10),this.endScaleTime(),this.startScrollTime(t*(i/20-i/20*e)),this.scrollTimeTo(0),this.endScrollTime(),this._onSimpleZoomOut.fire();else{try{this.beginUndoMacro("Zoom Out")}catch(e){return}Y({to:i/5,onStep:function(e){o.startScaleTime(0),o.scaleTimeTo(e),o.endScaleTime()},onComplete:function(){o.endUndoMacro(),o._onSimpleZoomOut.fire()}})}},o.prototype.resetScales=function(){var e,t;for(this.beginUndoMacro("Reset scales"),this.resetTimeScale(),e=0;e<this.panes().length;e++)t=this.panes()[e],this.resetPriceScale(t,t.leftPriceScale()),this.resetPriceScale(t,t.rightPriceScale());this.endUndoMacro(),this.m_model.recalculateAllPanes()},o.prototype.zoomToViewport=function(e,t,i,o,n){var r=new C(this.m_model,e,t,i,o,n),s=new L(r,this.m_zoomStack,!0);this.pushUndoCommand(s)},o.prototype.zoomFromViewport=function(){var e=new L(this.m_zoomStack.head(),this.m_zoomStack,!1);this.pushUndoCommand(e)},o.prototype.zoomStack=function(){return this.m_zoomStack},o.prototype.addPaneStretchFactorUndoCommand=function(e,t,i,o){
var n=new I(this.m_model,e,t,i,o);this.pushUndoCommand(n)},o.prototype.restoreFactoryDefaults=function(e){var t=new ue(this.m_model,e);this.pushUndoCommand(t)},o.prototype.restoreDefaults=function(e){var t=new de(this.m_model,e);this.pushUndoCommand(t)},o.prototype.chartLoadTheme=function(e,t){var i=new k(e,t);this.pushUndoCommand(i)},o.prototype.applyLineToolTemplate=function(e,t,i){this.beginUndoMacro(i),this.saveLineToolState(e,i);var o=new ae(e,t,i);this.pushUndoCommand(o),this.saveLineToolState(e,i),this.endUndoMacro(),this.model().updateSource(e)},o.prototype.restoreLineToolFactoryDefaults=function(e,t){this.beginUndoMacro(t),this.saveLineToolState(e,t),e.restoreFactoryDefaults(),this.saveLineToolState(e,t),this.endUndoMacro()},o.prototype.studyLoadTemplate=function(e,t,i,o){var n=new A(e,t,i,o);this.pushUndoCommand(n)},o.prototype.onRearrangePanes=function(){return this._onRearrangePanes},o.prototype.onSimpleZoomIn=function(){return this._onSimpleZoomIn},o.prototype.onSimpleZoomOut=function(){return this._onSimpleZoomOut},o.prototype.loadRange=function(e){e.res!==this.m_model.mainSeries().properties().interval.value()?(this.m_model.mainSeries().setDefaultTimeframe(e.val),this.setProperty(this.m_model.mainSeries().properties().interval,e.res,"Change date range")):this.m_model.mainSeries().loadDataTo(e.val)},o.prototype.cloneLineTool=function(e,t){var i=new V(this.m_model,e,t);return this.pushUndoCommand(i),this.emitEvent("cloneLineTool"),i.clonedLineToolId()},o.prototype.alertsList=function(){return this.m_model.alertsList()},o.prototype.alertsListChanged=function(){return this.m_model.alertsListChanged()},o.prototype.insertStudyStub=function(e){return this.m_model.insertStudyStub(e)},o.prototype.removeStudyStub=function(e){return this.m_model.removeStudyStub(e)},o.prototype.isJustClonedChart=function(){return this._chartWidget.isJustClonedChart()},o.prototype.copySourceToClip=function(e){if(e&&!e.properties().blockCopying){var t={};if(e instanceof W)t.type="drawing",t.geometry=e.geometry();else{if(!(e instanceof ee))return!1;t.type="study"}return t.source=e.state&&e.state(),(delete t.source.alertId,delete t.source.linkKey,t.source)?(t.title=e.title&&e.title(),t.modelId=this.m_model._id,X.set(t),!0):!1}},o.prototype.cutSourceToClip=function(e){if(!this.copySourceToClip(e))return!1;this.removeSource(e)},o.prototype.pasteLineTool=function(e,t){var i=new R(this.m_model,t,e);this.pushUndoCommand(i)},o.prototype.pasteStudy=function(e){var t=new B(this.m_model,e);this.pushUndoCommand(t)},o.prototype.pasteSourceFromClip=function(e,t){var i=X.get();if(!i)return!1;"drawing"===i.type&&this.pasteLineTool(e,i),"study"===i.type&&this.checkIfFeatureAvailable(i.state)&&this.pasteStudy(i)},o.prototype.trackTime=function(){return this._chartWidget.trackTime()},o.prototype.startCustomMoving=function(e,t,i){this._currentCustomMoveCommand=new z(t,i),this._currentCustomMoveSource=e},o.prototype.customMoveBeingProcessed=function(){return null!==this._currentCustomMoveSource},o.prototype.processCustomMove=function(e){
this._currentCustomMoveCommand.setPoint(e)},o.prototype.endCustomMoving=function(){null!==this._currentCustomMoveCommand.point()&&(this.pushUndoCommand(this._currentCustomMoveCommand),this._currentCustomMoveCommand=null,this._currentCustomMoveSource=null)},o.prototype.saveLineToolState=function(e,t){this.pushUndoCommand(new se(this.m_model,e,t))},inherit(n,re),n.prototype.redo=function(){this._oldValue=this._targetObj.value(),Z(!0),this._targetObj.setValue(this._newValue),Z(!1),this._model&&(this._model.recalculateAllPanes(),this._model.invalidate(new q(q.LIGHT_UPDATE)))},n.prototype.undo=function(){Z(!0),this._targetObj.setValue(this._oldValue),Z(!1),this._oldValue=null,this._model&&(this._model.recalculateAllPanes(),this._model.invalidate(new q(q.LIGHT_UPDATE)))},inherit(r,re),r.prototype.redo=function(){this._oldMode=this._priceScale.mode(),Z(!0),this._priceScale.setMode(this._newMode),Z(!1),this._model&&(this._model.recalculateAllPanes(),this._model.invalidate(new q(q.LIGHT_UPDATE)))},r.prototype.undo=function(){Z(!0),this._priceScale.setMode(this._oldMode),Z(!1),this._oldMode=null,this._model&&(this._model.recalculateAllPanes(),this._model.invalidate(new q(q.LIGHT_UPDATE)))},inherit(s,re),s.prototype.redo=function(){this._oldValue=this._property.value(),this._oldMode=this._priceScale.mode(),Z(!0),this._priceScale.setMode({autoScale:!1,percentage:!1,log:!1}),this._property.setValue(this._newValue),Z(!1),this._model&&(this._model.recalculateAllPanes(),this._model.invalidate(new q(q.LIGHT_UPDATE)))},s.prototype.undo=function(){Z(!0),this._property.setValue(this._oldValue),this._priceScale.setMode(this._oldMode),Z(!1),this._oldMode=null,this._model&&(this._model.recalculateAllPanes(),this._model.invalidate(new q(q.LIGHT_UPDATE)))},inherit(a,re),a.prototype.undo=function(){if(null!==this.m_newPriceScaleState)return void _e.logDebug("PriceScaleChangeUndoCommand.undo: Command is already undone");this.m_newPriceScaleState=this.m_priceScale.state(),this.m_model.restorePriceScaleState(this.m_pane,this.m_priceScale,this.m_state)},a.prototype.redo=function(){if(null===this.m_newPriceScaleState)return void _e.logDebug("PriceScaleChangeUndoCommand.redo: Command is not undone");this.m_model.restorePriceScaleState(this.m_pane,this.m_priceScale,this.m_newPriceScaleState),this.m_newPriceScaleState=null},inherit(l,re),l.prototype.undo=function(){if(null!==this.m_newTimeScaleState)return void _e.logDebug("TimeScaleChangeUndoCommand.undo: Command is already undone");this.m_newTimeScaleState=this.m_model.timeScale().state(),this.m_model.restoreTimeScaleState(this.m_state)},l.prototype.redo=function(){if(null===this.m_newTimeScaleState)return void _e.logDebug("TimeScaleChangeUndoCommand.redo: Command is not undone");this.m_model.restoreTimeScaleState(this.m_newTimeScaleState),this.m_newTimeScaleState=null},inherit(c,re),c.prototype.redo=function(){this._model.modifySeries(this._series,this._symbol,this._interval)},c.prototype.undo=function(){this._model.modifySeries(this._series,this._oldSymbol,this._oldInterval)},inherit(h,re),
h.prototype.redo=function(){var e,t,i=null;return this._studyState?(i=this._model.restoreSource(this._restorePane,this._paneIndex,this._paneState,this._studyState,this._priceScaleName),this._studyId!==i.id()&&_e.logError("Study was restored improperly - study ids does not match"),delete this._studyState):(i=this._model.insertStudy(this._studyMetaInfo,this._props,this._isOverlay,this._parentSource),this._studyId=i.id()),e=this._model.paneForSource(i),t=e.priceScaleName(i.priceScale()),this._model.setPriceScaleVisibility(t,!0),i},h.prototype.insertedStudy=function(){return this._model.dataSourceForId(this._studyId)},h.prototype.undo=function(){var e,t=this.insertedStudy();this._studyState=t.state(),e=this._model.paneForSource(t),this._paneIndex=this._model.panes().indexOf(e),this._paneState=e.state(),this._restorePane=this._model.removeSource(t),this._model.setLeftPriceScaleVisible(this._oldShowLeftScale),this._model.setRightPriceScaleVisible(this._oldShowRightScale)},inherit(u,re),u.prototype.redo=function(){var e,t=this._model.dataSourceForId(this._sourceId);this._sourceState=t.state(),e=this._model.paneForSource(t),this._paneIndex=this._model.panes().indexOf(e),this._priceScaleName=e.priceScaleName(t.priceScale()),this._paneState=e.state(),this._restorePane=this._model.removeSource(t)},u.prototype.undo=function(){var e=this._model.restoreSource(this._restorePane,this._paneIndex,this._paneState,this._sourceState,this._priceScaleName);this._sourceId!==e.id()&&_e.logError("Source was restored improperly - source ids does not match")},inherit(d,re),d.prototype.redo=function(){var e,t,i;for(e=0;e<this._linetools.length;e++)t=this._model.paneForSource(this._linetools[e]),i=this._model.panes().indexOf(t),this._statesByPaneIndexes[i]=this._statesByPaneIndexes[i]||[],this._statesByPaneIndexes[i].push({state:this._linetools[e].state(),owner:this._linetools[e].ownerSource().id()}),t.removeDataSource(this._linetools[e]);delete this._linetools},d.prototype.undo=function(){var e,t,i,o,n,r,s;this._linetools=[];for(e in this._statesByPaneIndexes)for(t=this._model.panes()[e],i=this._statesByPaneIndexes[e],o=0;o<i.length;o++)n=i[o],r=this._model.dataSourceForId(n.owner),s=t._restoreLineTool(n.state),s.setOwnerSource(r),s.updateAllViews(),this._linetools.push(s);this._model.invalidate(new q(q.LIGHT_UPDATE))},inherit(p,re),p.prototype.redo=function(){var e,t;-1===this._model.panes().indexOf(this._pane)&&(this._pane=this._model.createPane(this._paneIndex)),e=this._model.dataSourceForId(this._sourceId),this._model.move(e,this._pane,this._pane.priceScaleByName(this._scaleName)),t=this._pane.priceScaleName(e.priceScale()),this._model.setPriceScaleVisibility(t,!0)},p.prototype.undo=function(){-1===this._model.panes().indexOf(this._oldPane)&&(this._oldPane=this._model.createPane(this._oldPaneIndex)),this._model.move(this._model.dataSourceForId(this._sourceId),this._oldPane,this._oldPane.priceScaleByName(this._oldScaleName)),this._model.setLeftPriceScaleVisible(this._oldShowLeftScale),
this._model.setRightPriceScaleVisible(this._oldShowRightScale)},inherit(_,re),_.prototype.redo=function(){var e,t,i=this._model.dataSourceForId(this._sourceId);this._mergeRedoFn.call(this._model,i),e=this._model.paneForSource(i),t=e.priceScaleName(i.priceScale()),this._model.setPriceScaleVisibility(t,!0)},_.prototype.undo=function(){var e=this._model.dataSourceForId(this._sourceId);this._mergeUndoFn.call(this._model,e),this._model.setLeftPriceScaleVisible(this._oldShowLeftScale),this._model.setRightPriceScaleVisible(this._oldShowRightScale)},inherit(f,_),inherit(m,_),inherit(g,_),inherit(y,_),inherit(v,re),v.prototype.startCreatingLine=function(e,t,i){var o,n;return this._points=[{point:e}],o=this._model.panes()[this._paneIndex],n=this._model.createLineTool(o,e,this._lineTool,t,i),this._lineId=n.id(),!this._model.lineBeingCreated()},v.prototype.continueCreatingLine=function(e,t,i){return this._points||_e.logError("continueCreatingLine is called before startCreatingLine"),this._points.push({point:e,envState:t}),this._model.coninueCreatingLine(e,t,i)},v.prototype.line=function(){return this._lineId?this._model.dataSourceForId(this._lineId):null},v.prototype.undo=function(){var e=this.line();e&&(this._lineState=e.state(),this._model.removeSource(e),delete this._lineId)},v.prototype.redo=function(){this._lineState||_e.logError("This command was never undone - nothing to redo");var e=this._model.restoreSource(!1,this._paneIndex,null,this._lineState,null);this._lineId=e.id(),delete this._lineState},inherit(b,re),b.prototype.setPoint=function(e){this._point=e instanceof N?e.clone():TradingView.clone(e)},b.prototype.undo=function(){var e=this._model.dataSourceForId(this._sourceId);this._model.startMovingSource(e,this._point,this._pointIndex),this._model.moveSource(this._origPoint),this._model.endMovingSource()},b.prototype.redo=function(){var e=this._model.dataSourceForId(this._sourceId);this._model.startMovingSource(e,this._origPoint,this._pointIndex),this._model.moveSource(this._point),this._model.endMovingSource()},inherit(S,re),S.prototype.undo=function(){var e=this._model.dataSourceForId(this._sourceId);this._model.changeZOrder(e,-this._shift)},S.prototype.redo=function(){var e=this._model.dataSourceForId(this._sourceId);this._model.changeZOrder(e,this._shift)},inherit(w,re),w.prototype.undo=function(){var e=this._model.dataSourceForId(this._sourceId);this._model.bringToFront(e)},w.prototype.redo=function(){var e=this._model.dataSourceForId(this._sourceId);this._model.sendToBack(e)},inherit(T,re);T.prototype.undo=function(){var e=this._model.dataSourceForId(this._sourceId);this._model.sendToBack(e)},T.prototype.redo=function(){var e=this._model.dataSourceForId(this._sourceId);this._model.bringToFront(e)},o.prototype.removePane=function(e,t){var i=new P(this,t,e);this.pushUndoCommand(i)},inherit(P,re),P.prototype.redo=function(){this._model.panes().splice(this._index,1),this._chart._updateGui()},P.prototype.undo=function(){this._model.panes().splice(this._index,0,this._pane),this._chart._updateGui()},
o.prototype.rearrangePanes=function(e,t,i){var o=new x(this,t,i,e);this.pushUndoCommand(o),this._onRearrangePanes.fire()},inherit(x,re),x.prototype.redo=function(){var e=this._model.panes()[this._index];"up"===this._direction&&this._index>0&&(this._model.panes().splice(this._index,1),this._model.panes().splice(this._index-1,0,e)),"down"===this._direction&&this._index<this._model.panes().length-1&&(this._model.panes().splice(this._index,1),this._model.panes().splice(this._index+1,0,e)),this._model.invalidate(new q(q.FULL_UPDATE))},x.prototype.undo=function(){var e;"up"===this._direction&&(e=this._model.panes()[this._index-1],this._model.panes().splice(this._index-1,1),this._model.panes().splice(this._index,0,e)),"down"===this._direction&&(e=this._model.panes()[this._index+1],this._model.panes().splice(this._index+1,1),this._model.panes().splice(this._index,0,e)),this._model.invalidate(new q(q.FULL_UPDATE))},inherit(C,re),C.prototype.redo=function(){this._timeScaleState=this._model.timeScale().state(),this._priceScaleState=this._pane.defaultPriceScale().state(),this._model.zoomToViewport(this._startBar,this._endBar,this._startPrice,this._endPrice,this._pane)},C.prototype.undo=function(){this._model.timeScale().restoreState(this._timeScaleState),this._pane.defaultPriceScale().restoreState(this._priceScaleState),this._model.recalculateAllPanes(),this._model.invalidate(new q(q.LIGHT_UPDATE))},inherit(L,re),L.prototype.undo=function(){if(this._inOut){if(this._baseCmd!==this._zoomStack.head())return void _e.logDebug("zoom stack inconsistency");this._baseCmd.undo(),this._zoomStack.pop()}else this._baseCmd.redo(),this._zoomStack.push(this._baseCmd)},L.prototype.redo=function(){if(this._inOut)this._baseCmd.redo(),this._zoomStack.push(this._baseCmd);else{if(this._baseCmd!==this._zoomStack.head())return void _e.logDebug("zoom stack inconsistency");this._baseCmd.undo(),this._zoomStack.pop()}},inherit(I,re),I.prototype.redo=function(){var e=this._paneA._stretchFactor+this._paneB._stretchFactor;this._paneA._stretchFactor=this._currStretchA,this._paneB._stretchFactor=e-this._currStretchA,this._model.invalidate(new q(q.FULL_UPDATE))},I.prototype.undo=function(){var e=this._paneA._stretchFactor+this._paneB._stretchFactor;this._paneA._stretchFactor=this._prevStretchA,this._paneB._stretchFactor=e-this._prevStretchA,this._model.invalidate(new q(q.FULL_UPDATE))},inherit(M,re),M.prototype.redo=function(){this._model.restoreFactoryDefaults(this._defaultProperty)},M.prototype.undo=function(){this._defaultProperty.merge(this._state),this._defaultProperty.listeners().fire(this._defaultProperty),this._model.mainSeries().onChartStyleChanged()},inherit(k,re),k.prototype._merge=function(e,t){var i=this._model;Z(!0),e&&(i.properties().paneProperties.mergeAndFire(e.paneProperties),i.properties().scalesProperties.mergeAndFire(e.scalesProperties),i.properties().symbolWatermarkProperties.mergeAndFire(e.symbolWatermarkProperties)),i.mainSeries().priceScale().setMode({autoScale:t.priceAxisProperties.autoScale,percentage:t.priceAxisProperties.percentage,
log:t.priceAxisProperties.log,lockScale:t.priceAxisProperties.lockScale}),i.mainSeries().setChartStyleWithIntervalIfNeeded(t.style),delete t.style,delete t.interval,i.mainSeries().properties().mergeAndFire(t),i.mainSeries().properties().saveDefaults(),i.mainSeries().createPaneView(),i.mainSeries().invalidateBarStylesCache(),i._version=t.version,i.recalculateAllPanes(),i.invalidate(new q(q.FULL_UPDATE)),i.properties().saveDefaults(),Z(!1)},k.prototype.undo=function(){this._merge(this._oldChartProps,this._oldSeriesProps),this._model.mainSeries().onChartStyleChanged(),this._model.updateScales(),this._model.chartThemeLoaded()},k.prototype.redo=function(){this._merge(this._newChartProps,this._newSeriesProps),this._model.mainSeries().onChartStyleChanged(),this._model.updateScales(),this._model.chartThemeLoaded()},inherit(A,re),A.prototype._merge=function(e){var t,i,o,n,r,s,a,l,c,h,u,d,p,_=this._model.model(),f=_.mainSeries();for(f.priceScale().properties().lockScale.setValue(!1),e.interval&&(t=pe(e.interval,f.properties().style.value()),f.setChartStyleWithIntervalIfNeeded(t,e.interval)),i=[],o=_.panes(),n=o.length;n--;)for(r=o[n],s=r.containsMainSeries(),a=r.dataSources(),l=a.length;l--;)c=a[l],(!s||c instanceof ee)&&(c.isRemovedByStudyTemplates()||i.push(c),_.removeSource(c));for(h=e.panes,function(e,t){return e.dataSources().some(function(e){return e.alert&&e.alert().id===t.alert.id})},n=0;n<h.length;n++){for(u=!1,d=h[n],l=0;l<d.sources.length;l++)c=d.sources[l],"MainSeries"===c.type&&(delete c.state,u=!0),-1!==d.leftAxisSources.indexOf(c.id)&&-1===this._newSourcesPriceScalesNames.indexOf("left")&&this._newSourcesPriceScalesNames.push("left"),-1!==d.rightAxisSources.indexOf(c.id)&&-1===this._newSourcesPriceScalesNames.indexOf("right")&&this._newSourcesPriceScalesNames.push("right");if(r=null,r=u?o[n]:_.createPane(n),r.restoreState(h[n],!1,e.version),u)for(p=0;p<i.length;p++)i[p].restore&&i[p].restore()}f.priceScale().setMode({autoScale:!0}),_._version=e.version,_.startNotStartedStudies(),_.recalculateAllPanes(),_.invalidate(new q(q.FULL_UPDATE))},A.prototype.redo=function(){var e,t,i;for(this._merge(this._newProps),e=this._model.model(),e.mainSeries().onChartStyleChanged(),t=this._model.model().mainSeries().properties(),he(t),e._recalcVisibleRangeStudy(e.dataSources(),!0),i=0;i<this._newSourcesPriceScalesNames.length;i++)e.setPriceScaleVisibility(this._newSourcesPriceScalesNames[i],!0)},A.prototype.undo=function(){this._merge(this._oldProps),this._model.model().mainSeries().onChartStyleChanged(),this._model.model().setLeftPriceScaleVisible(this._oldShowLeftScale),this._model.model().setRightPriceScaleVisible(this._oldShowRightScale)},inherit(E,re),E.prototype.redo=function(){this._cw.screen.show(),this._property.setValue(this._value,this._forceSetProperty)},E.prototype.undo=function(){this._cw.screen.show(),this._property.setValue(this._prevValue,this._forceSetProperty)},inherit(V,re),V.prototype.redo=function(){var e,t,i,o,n,r,s,a,l,c,h
;if(this._lineState)r=this._model.restoreSource(!1,this._paneIndex,null,this._lineState,null);else{for(e=this._originalSource,t=e.priceScale(),i=this._model.paneForSource(e),o=TradingView.className(e.constructor),n=e.properties().clone(),r=F(o,this._model,n,null,e.ownerSource()),r.setOwnerSource(e.ownerSource()),r.properties().visible._value=!0,r._fixedPoints=r._fixedPoints.concat(e._fixedPoints),s=0;s<r._fixedPoints.length;s++)r._fixedPoints[s]=r._fixedPoints[s].add(new N(20,20));a=e._timePoint,l=this._withoutShift?TradingView.clone(a):D(a,e.ownerSource()),c=e._points,h=c,r.restorePoints(l,h),r.cloneData&&r.cloneData(e),i.addDataSource(r,t),this._model.updateSource(r),r.checkAlert&&r.checkAlert(),this._paneIndex=this._model.panes().indexOf(i),U.drawOnAllCharts().value()&&this._model.copyToOtherCharts(r),this._lineState=r.state()}},V.prototype.undo=function(){this._lineState||_e.logError("This command was never executed - nothing to undo");var e=this._model.dataSourceForId(this._lineState.id);this._model.removeSource(e)},V.prototype.clonedLineToolId=function(){return this._lineState.id},inherit(O,re),O.prototype.redo=function(){delete this._model.dataSourceForId(this._sourceId).linkKey},O.prototype.undo=function(){this._model.dataSourceForId(this._sourceId).linkKey=this._linkKey},inherit(R,re),R.prototype.redo=function(){var e,t,i,o,n,r,s,a,l,c,h=this._model.panes()[this._paneIndex],u=h.dataSourceForId(this._clipboardData.source.ownerSource)||h.mainDataSource();this._sourceState||(e=!0,t=this._clipboardData.source.state.symbol,i=h.mainDataSource(),o=i.symbol?i.symbol():"",n=t===o,n&&(u instanceof J&&(e=!1),u instanceof ee&&(e=!u.metaInfo().is_price_study)),r=TradingView.clone(this._clipboardData.source),delete r.state.symbol,e?(s=this._model,a=function(e){var t=e.x*s.timeScale().width(),i=e.y*u.priceScale().height();return new N(t,i)},l=u.firstValue(),r.points=this._clipboardData.geometry.map(function(e){var t=a(e),i=s.timeScale().coordinateToIndex(t.x),o=s.timeScale().normalizeBarIndex(i);return o.price=u.priceScale().coordinateToPrice(t.y,l),o})):this._model._id===this._clipboardData.modelId&&u.id()===this._clipboardData.source.ownerSource&&(r.points=D(this._clipboardData.source.points,u)),r.id=ie.guid(),this._sourceState=r),c=h._restoreLineTool(this._sourceState,null,!1),c.calcIsActualSymbol(),c.setOwnerSource(u),c.setPriceScale(u.priceScale()),u.priceScale().addDataSource(c),c.createServerPoints(),this._model.invalidate(new q(q.LIGHT_UPDATE,!0))},R.prototype.undo=function(){var e,t;this._sourceState||_e.logError("This command was never executed - nothing to undo"),e=this._model.panes()[this._paneIndex],t=e.dataSourceForId(this._sourceState.id),this._model.removeSource(t)},inherit(B,re),B.prototype.redo=function(){var e,t,i,o;this._sourceState||(e=TradingView.clone(this._clipboardData.source),e.id=ie.guid(),this._sourceState=e),t=null,i=null,this._sourceState.metaInfo.is_price_study?(t=this._model.paneForSource(this._model.mainSeries()),i=this._model.mainSeries().priceScale()):(t=this._model.createPane(),
i=t.defaultPriceScale()),o=t._restoreStudy(this._sourceState),o.start(),o.setPriceScale(i),t.move(o,i)},B.prototype.undo=function(){this._sourceState||_e.logError("This command was never executed - nothing to undo");var e=this._model.dataSourceForId(this._sourceState.id);this._model.removeSource(e)},inherit(z,re),z.prototype.setPoint=function(e){this._point=e.clone(),this._handler(e)},z.prototype.point=function(){return this._point},z.prototype.undo=function(){this._handler(this._origPoint)},z.prototype.redo=function(){this._handler(this._point)},t.ChartUndoModel=o}).call(t,i(8))},function(e,t,i){"use strict";var o,n,r,s;Object.defineProperty(t,"__esModule",{value:!0}),i.d(t,"SaveLineToolStateUndoCommand",function(){return s}),o=i(3),n=i(7),i.n(n),r=i(41),s=function(e){function t(t,i,o,n){void 0===n&&(n=!0);var r=e.call(this,o,n)||this;return r._model=t,r._savedState=i.state(!0),r}return o.c(t,e),t.prototype.redo=function(){this._toggleState()},t.prototype.undo=function(){this._toggleState()},t.prototype._getSource=function(){return Object(n.ensureNotNull)(this._model.dataSourceForId(this._savedState.id))},t.prototype._toggleState=function(){var e=this._getSource(),t=this._savedState;this._savedState=e.state(!0),this._model.restoreLineToolState(e,t)},t}(r.UndoCommand)},function(e,t,i){"use strict";var o,n,r;Object.defineProperty(t,"__esModule",{value:!0}),i.d(t,"ApplyLineToolTemplateUndoCommand",function(){return r}),o=i(3),n=i(41),r=function(e){function t(t,i,o){var n=e.call(this,o)||this;return n._source=t,n._newState=i,n._oldState=t.properties().state(),n}return o.c(t,e),t.prototype.redo=function(){this._source.applyTemplate(this._newState)},t.prototype.undo=function(){this._source.applyTemplate(this._oldState)},t}(n.UndoCommand)},function(e,t,i){"use strict";var o,n,r,s,a,l,c,h,u;Object.defineProperty(t,"__esModule",{value:!0}),i.d(t,"SetChartStyleCommand",function(){return u}),o=i(3),n=i(41),r=i(2),i.n(r),s=i(48),a=i(64),l=i(16),c=i.n(l),h=i(62),u=function(e){function t(t,i,o,n,r,s){var a=e.call(this,n)||this;return a._prevPriceAxisProps={},a._property=t,a._mainSeries=o,a._value=i,a._model=r,a._chartWidget=s,a}return o.c(t,e),t.prototype.redo=function(){var e,t,i,o=this._mainSeries,n=o.properties();n.style===this._property&&o.isNeedRestart(this._value)&&this._chartWidget.screen.show(),this._prevResolution=n.interval.value(),this._prevValue=this._property.value(),this._storePriceAxisProps(),Object(r.saveDefaultProperties)(!0),e=n.interval.value(),t=this._model.defaultResolutions(),i=Object(h.getResolutionByChartStyle)(this._value,e,t),a.linking.interval.setValue(i),o.setChartStyleWithIntervalIfNeeded(this._value,i),Object(s.setLastUsedStyle)(this._value),Object(s.preparePriceAxisProperties)(n),Object(r.saveDefaultProperties)(!1),this._invalidateModel()},t.prototype.undo=function(){var e=this._mainSeries;e.properties().style===this._property&&e.isNeedRestart(this._value)&&this._chartWidget.screen.show(),Object(r.saveDefaultProperties)(!0),e.setChartStyleWithIntervalIfNeeded(this._prevValue,this._prevResolution),
this._restorePriceAxisProps(),a.linking.interval.setValue(this._prevResolution),Object(r.saveDefaultProperties)(!1),this._invalidateModel()},t.prototype._storePriceAxisProps=function(){var e=this._mainSeries.priceScale();this._prevPriceAxisProps=e.mode()},t.prototype._restorePriceAxisProps=function(){this._mainSeries.priceScale().setMode(this._prevPriceAxisProps)},t.prototype._invalidateModel=function(){this._model&&(this._model.recalculateAllPanes(),this._model.invalidate(new c.a(c.a.LIGHT_UPDATE)))},t}(n.UndoCommand)},function(e,t,i){"use strict";var o,n,r,s,a,l;Object.defineProperty(t,"__esModule",{value:!0}),i.d(t,"SetResolutionUndoCommand",function(){return l}),o=i(3),n=i(41),r=i(21),s=i(48),a=i(39),l=function(e){function t(t,i,o,n){var r=e.call(this,n)||this;return r._property=t,r._value=i,r._prevValue=t.value(),r._chartWidget=o,r}return o.c(t,e),t.prototype.redo=function(){this._chartWidget.screen.show(),this._property.setValue(this._value),this._handleResolution(this._value)},t.prototype.undo=function(){this._chartWidget.screen.show(),this._property.setValue(this._prevValue),this._handleResolution(this._prevValue)},t.prototype._handleResolution=function(e){var t=this._chartWidget.model().mainSeries().properties(),i=t.style.value(),o=Object(s.isRangeStyle)(i),n=r.Interval.isRange(e);!o&&n?t.style.setValue(a.STYLE_RANGE):o&&!n&&t.style.setValue(Object(s.getLastUsedStyle)())},t}(n.UndoCommand)},function(e,t,i){"use strict";(function(e){function o(e,t){this._options=Object.assign({},S,t),this.chart=e,this._properties=e.properties().scalesProperties,this.contextMenu=null,this.jqRow=$(document.createElement("tr")),this.jqLhsTimeAxisStub=$(document.createElement("td")),this.jqLhsTimeAxisStub.addClass("chart-markup-table"),this.jqLhsTimeAxisStub.appendTo(this.jqRow),this.jqLhsStub=$("<div>"),this.jqLhsStub.css("width","100%"),this.jqLhsStub.css("height","100%"),this.jqLhsStub.css("position","relative"),this.jqLhsStub.css("overflow","hidden"),this.jqLhsStub.appendTo(this.jqLhsTimeAxisStub),this.lhsCanvas=f(this.jqLhsStub,new m(16,16)),$(this.lhsCanvas).css("position","absolute"),$(this.lhsCanvas).css("z-order","2"),$(this.lhsCanvas).css("left",0),$(this.lhsCanvas).css("top",0),this.lhsCtx=this.lhsCanvas.getContext("2d"),this.jqCell=$(document.createElement("td")),this.jqCell.appendTo(this.jqRow),this.jqCell.addClass("chart-markup-table"),this.jqCell.addClass("time-axis"),this.jqCell.height(25),this._dv=$("<div>"),this._dv.css("width","100%"),this._dv.css("height","100%"),this._dv.css("position","relative"),this._dv.css("overflow","hidden"),this._dv.appendTo(this.jqCell),this.canvas=f(this._dv,new m(16,16)),$(this.canvas).css("position","absolute"),$(this.canvas).css("z-order","2"),$(this.canvas).css("left",0),$(this.canvas).css("top",0),this.ctx=this.canvas.getContext("2d"),this.top_canvas=f(this._dv,new m(16,16)),$(this.top_canvas).css("position","absolute"),$(this.top_canvas).css("z-order","1"),$(this.top_canvas).css("left",0),$(this.top_canvas).css("top",0),this.top_ctx=this.top_canvas.getContext("2d"),
this.jqRhsTimeAxisStub=$(document.createElement("td")),this.jqRhsTimeAxisStub.addClass("chart-markup-table"),this.jqRhsTimeAxisStub.appendTo(this.jqRow),this.jqRhsStub=$("<div>"),this.jqRhsStub.css("width","100%"),this.jqRhsStub.css("height","100%"),this.jqRhsStub.css("position","relative"),this.jqRhsStub.css("overflow","hidden"),this.jqRhsStub.appendTo(this.jqRhsTimeAxisStub),this.rhsCanvas=f(this.jqRhsStub,new m(16,16)),$(this.rhsCanvas).css("position","absolute"),$(this.rhsCanvas).css("z-order","2"),$(this.rhsCanvas).css("left",0),$(this.rhsCanvas).css("top",0),this.rhsCtx=this.rhsCanvas.getContext("2d"),this.restoreDefaultCursor(),this.update(),this._minVisibleSpan=b.MINUTE_SPAN,g(this.jqCell,this,!0),this.updatePriceScalesVisibility()}var n,r,s,a,l,c,h,u,d,p,_,f,m,g,y,v,b,S;i(768),n=i(124).PriceAxisWidget,r=i(0).LineDataSource,s=i(114),a=i(40),l=a.ActionSeparator,c=i(86),h=i(16),u=i(72),d=u.resizeCanvas,p=u.hardResizeCanvas,_=u.clearRect,f=u.addCanvasTo,m=u.Size,g=i(81).setMouseEventHandler,y=i(32).trackEvent,v=i(115).makeFont,b=i(161),S={contextMenuEnabled:!0,timezoneMenuEnabled:!0},o.prototype._BORDER_SIZE=1,o.prototype._OFFSET_SIZE=1,o.prototype._TICK_LENGTH=3,o.prototype.backgroundColor=function(){return this.chart.properties().paneProperties.background.value()},o.prototype.lineColor=function(){return this._properties.lineColor.value()},o.prototype.textColor=function(){return this._properties.textColor.value()},o.prototype.fontSize=function(){return this._properties.fontSize.value()},o.prototype.baseFont=function(){return v(this.fontSize(),"Arial","")},o.prototype.baseBoldFont=function(){return v(this.fontSize(),"Arial","bold")},o.prototype.rendererOptions=function(){var e,t;return this._rendererOptions||(this._rendererOptions={borderSize:this._BORDER_SIZE,offsetSize:this._OFFSET_SIZE,tickLength:this._TICK_LENGTH,fontSize:NaN,font:"",widthCache:new s}),e=this._rendererOptions,e.fontSize!==this.fontSize()&&(t=this.fontSize(),e.fontSize=t,e.font=this.baseFont(),e.font=v(this.fontSize(),"'Trebuchet MS', Tahoma, Arial, sans-serif",""),e.paddingTop=Math.ceil(t/2.5),e.paddingBottom=e.paddingTop,e.paddingHorizontal=Math.ceil(t/2),e.baselineOffset=Math.round(this.fontSize()/5),e.widthCache.reset()),this._rendererOptions},o.prototype.updatePriceScalesVisibility=function(){var e=this.chart.properties().scalesProperties;e.showLeftScale.value()?this.jqLhsTimeAxisStub.css("display","table-cell"):this.jqLhsTimeAxisStub.css("display","none"),e.showRightScale.value()?this.jqRhsTimeAxisStub.css("display","table-cell"):this.jqRhsTimeAxisStub.css("display","none")},o.prototype.mouseDownEvent=function(t){if(this._mousedown||!e.enabled("chart_zoom"))return!0;this._mousedown=!0;var i=this.chart.model();i.timeScale().isEmpty()||(this.setCursor("ew-resize"),i.startScaleTime(t.localX))},o.prototype.mouseDownOutsideEvent=function(e){var t=this.chart.model();!t.timeScale().isEmpty()&&this._mousedown&&(this._mousedown=!1,t.endScaleTime(),this.restoreDefaultCursor())},o.prototype.pressedMouseMoveEvent=function(e){
var t,i,o=this.chart.model();o.timeScale().isEmpty()||(t=!1,i=(new Date).valueOf(),this._lastScrollScaleTime&&i-this._lastScrollScaleTime<100&&(t=!0),t||(o.scaleTimeTo(e.localX),this._lastScrollScaleTime=i))},o.prototype.mouseUpEvent=function(e){this._mousedown=!1;var t=this.chart.model();t.timeScale().isEmpty()||(t.endScaleTime(),this.restoreDefaultCursor())},o.prototype.contextMenuEvent=function(e,t){this._options.contextMenuEnabled&&this._createContextMenu().show(e)},o.prototype._createContextMenu=function(){return c.createMenu(this.getContextMenuActions(),{statName:"TimeScaleContextMenu"})},o.prototype.getContextMenuActions=function(){var t,i,o=this.chart;return o.model().mainSeries().createSessStudy(),o.updateActions(),t=o.actions(),i=e.enabled("charting_library_base")?[t.timeScaleReset,new l,t.applyTimeZone,t.sessionBreaks]:[t.timeScaleReset,new l,t.applyTimeZone,t.sessionBreaks,t.extendedHours],this._options.timezoneMenuEnabled||i.splice(2,1),e.enabled("show_chart_property_page")&&e.enabled("chart_property_page_timezone_sessions")&&t.tmzProperties&&i.push(new l,t.tmzProperties),i},o.prototype.mouseClickEvent=function(e){},o.prototype.mouseDoubleClickEvent=function(e){y("GUI","Double click time scale"),this.chart.model().resetTimeScale()},o.prototype.optimalHeight=function(){var e=this.rendererOptions();return Math.ceil(e.offsetSize+e.borderSize+e.tickLength+e.fontSize+e.paddingTop+e.paddingBottom)},o.prototype.setSize=function(e,t,i){this.size&&this.size.equals(e)||(this.lhsStubSize=t,d(this.lhsCanvas,t),this.jqLhsTimeAxisStub.width(t.w),this.jqLhsTimeAxisStub.height(t.h),this.rhsStubSize=i,d(this.rhsCanvas,i),this.jqRhsTimeAxisStub.width(i.w),this.jqRhsTimeAxisStub.height(i.h),this.size=e,d(this.canvas,e),d(this.top_canvas,e),this.lhsCanvas.getContext("2d"),this.rhsCanvas.getContext("2d"),this.canvas.getContext("2d"),this.top_canvas.getContext("2d"),this.jqCell.width(e.w),this.jqCell.height(e.h))},o.prototype._spanIndex=function(e){for(var t=[b.MINUTE_SPAN,b.HOUR_SPAN,b.DAY_SPAN,b.MONTH_SPAN,b.YEAR_SPAN],i=t.length-1;i>0;){if(t[i]<=e)return i;i--}return i},o.prototype._spanOffset=function(e,t){if(t<e)throw Error("actual span cuold not be less then base");return this._spanIndex(t)-this._spanIndex(e)},o.prototype.update=function(){var e,t;this.chart.model()&&(e=this.chart.model().timeScale().marks())&&(t=this,this._minVisibleSpan=b.YEAR_SPAN,$.each(e,function(){t._minVisibleSpan=Math.min(this.span,t._minVisibleSpan)}))},o.prototype._hightlightBackground=function(e,t){var i,o,n,r,s=this.chart.model(),a=s.timeScale(),l=t[0].index,c=t[0].index;for(i=1;i<t.length;i++)l=Math.min(l,t[i].index),c=Math.max(c,t[i].index);o=a.indexToCoordinate(l),n=a.indexToCoordinate(c),r="rgba(109, 158, 235, 0.3)",_(e,o,1,n-o,this.size.h-1,r)},o.prototype.drawBackground=function(e){var t,i,o,n,s;if(_(e,0,0,this.size.w,this.size.h,this.backgroundColor()),t=this.chart.model()){if(i=t.timeScale(),(o=t.model().selectedSource())&&o instanceof r&&!i.isEmpty()){if(n=o.axisPoints(),0===n.length)return;this._hightlightBackground(e,n)}
s=t.model().crossHairSource(),s.startMeasurePoint()&&this._hightlightBackground(e,s.measurePoints())}},o.prototype.drawBorder=function(e){e.save(),e.fillStyle=this.lineColor(),e.fillRect(-.5,.5,this.size.w+.5,this._BORDER_SIZE),e.restore()},o.prototype.drawStubs=function(){var e,t=this._BORDER_SIZE,i=2*this._BORDER_SIZE,o=this.lhsCtx;_(o,0,0,this.lhsStubSize.w,this.lhsStubSize.h,this.backgroundColor()),o.fillStyle=this.lineColor(),o.fillRect(this.lhsStubSize.w-i-.5,.5,i,t),o.fillRect(this.lhsStubSize.w-i-.5,-.5,t,t),e=this.rhsCtx,_(e,0,0,this.rhsStubSize.w,this.rhsStubSize.h,this.backgroundColor()),e.fillStyle=this.lineColor(),e.fillRect(-.5,.5,i,t),e.fillRect(.5,-.5,t,t)},o.prototype.drawTickMarks=function(e){var t,i,o,n,r,s,a,l,c,h,u,d=this.chart.model().timeScale().marks();if(d&&0!==d.length){for(t=d.reduce(function(e,t){return e.span>t.span?e:t},d[0]).span,t>30&&t<40&&(t=30),e.save(),e.strokeStyle=this.lineColor(),i=this.rendererOptions(),o=i.borderSize+i.tickLength+i.paddingTop+i.fontSize-i.baselineOffset,e.textAlign="center",e.translate(.5,.5),e.fillStyle=this.lineColor(),e.beginPath(),n=d.length;n--;)e.rect(d[n].coord,i.borderSize,1,i.tickLength);for(e.fill(),e.fillStyle=this.textColor(),r={},s=this.baseFont(),a=this.baseBoldFont(),n=0;n<d.length;n++)l=d[n].span>=t?a:s,c=r[l]||[],c.push(d[n]),r[l]=c;for(h in r)for(e.setFont(h),u=r[h],n=0;n<u.length;n++)e.fillText(u[n].label,u[n].coord,o);e.restore()}},o.prototype.drawBackLabels=function(e){var t,i,o,n,r,s,a,l;for(e.save(),t=this.chart.model().dataSources(),i=this.chart.model(),o=i.sourceBeingMoved()||i.lineBeingEdited()||i.lineBeingCreated(),n=this.rendererOptions(),r=0;r<t.length;r++)if((s=t[r])!==this.chart.model().crossHairSource()&&s!==o&&s.timeAxisViews&&(a=s.timeAxisViews()))for(l=0;l<a.length;l++)a[l].renderer().draw(e,n);e.restore()},o.prototype.drawCrossHairLabel=function(e){var t,i,o,n,r;if(this.top_ctx.clearRect(-.5,-.5,this.size.w,this.size.h),t=this.chart.model(),i=t.sourceBeingMoved()||t.lineBeingEdited()||t.lineBeingCreated(),o=this.rendererOptions(),i){if(e.save(),i.timeAxisViews&&(n=i.timeAxisViews()))for(r=0;r<n.length;r++)n[r].renderer().draw(e,o);return void e.restore()}if(e.save(),n=this.chart.model().crossHairSource().timeAxisView())for(r=0;r<n.length;r++)n[r].renderer().draw(e,o);e.restore()},n.prototype.hardResetCanvas=function(){this.size&&(p(this.canvas,this.size),p(this.top_canvas,this.size))},o.prototype.paint=function(e){if(0!==e)if(e===h.UPDATE_CURSOR_ONLY)this.drawCrossHairLabel(this.top_ctx);else{var t=this.ctx;this.drawBackground(t),this.drawBorder(t),this.drawStubs(),this.chart.model()&&(this.drawTickMarks(t),this.drawBackLabels(t),this.drawCrossHairLabel(this.top_ctx))}},o.prototype.setStubVisible=function(e,t){var i=n.isLeft(e)?this.jqLhsTimeAxisStub:this.jqRhsTimeAxisStub;t?i.css("display","table-cell"):i.css("display","none")},o.prototype.restoreDefaultCursor=function(){this.setCursor("")},o.prototype.setCursor=function(e){var t="";"grabbing"!==e&&"ew-resize"!==e||(t="time-axis--cursor-"+e),
this._currentCursorClassName!==t&&(this._currentCursorClassName&&this.jqCell.removeClass(this._currentCursorClassName),t&&this.jqCell.addClass(t),this._currentCursorClassName=t,this.jqCell.css("cursor"))},o.prototype.image=function(){var e={};return e.content=this.canvas.toDataURL(),e.contentWidth=this.size.w,e.contentHeight=this.size.h,e.lhsStub={},e.lhsStub.content=this.lhsCanvas.toDataURL(),e.lhsStub.contentWidth=this.lhsStubSize.w,e.lhsStub.contentHeight=this.lhsStubSize.h,e.rhsStub={},e.rhsStub.content=this.rhsCanvas.toDataURL(),e.rhsStub.contentWidth=this.rhsStubSize.w,e.rhsStub.contentHeight=this.rhsStubSize.h,e},t.TimeAxisWidget=o}).call(t,i(4))},function(e,t){},function(e,t,i){"use strict";var o,n,r,s,a,l,c,h,u,d,p,_,f,m,g,y,v,b,S,w,T,P,x,C,L;Object.defineProperty(t,"__esModule",{value:!0}),i.d(t,"ControlBarNavigation",function(){return L}),i(11),o=i(770),i.n(o),n=i(214),r=i(36),s=i(160),a=i(24),l=i(126),c=i(63),i.n(c),h=i(317),i.n(h),u=i(771),i.n(u),d=i(772),i.n(d),p=i(773),i.n(p),_=i(327),i.n(_),f=i(774),i.n(f),m=i(775),i.n(m),g=i(776),i.n(g),y=i(777),i.n(y),b=Object(l.b)({keys:["Alt","R"],text:"{0} + {1}"}),S=Object(l.b)({keys:[m],text:"{0}"}),w=Object(l.b)({keys:[g],text:"{0}"}),T='<div class="control-bar-wrapper">\n\t<div class="control-bar control-bar--hidden">\n\t\t<div class="control-bar__group js-btn-group js-btn-group-left">\n\t\t\t<div class="control-bar__btn control-bar__btn--zoom-out apply-common-tooltip" title="'+window.t("Zoom Out")+'">\n\t\t\t\t'+u+'\n\t\t\t</div>\n\t\t\t<div class="control-bar__btn control-bar__btn--zoom-in apply-common-tooltip" title="'+window.t("Zoom In")+'">\n\t\t\t\t'+p+'\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="control-bar__group js-btn-group js-btn-group-right">\n\t\t\t<div class="control-bar__btn control-bar__btn--move-left apply-common-tooltip" title="'+window.t("Scroll to the Left")+'" data-tooltip-hotkey="'+S+'">\n\t\t\t\t'+h+'\n\t\t\t</div>\n\t\t\t<div class="control-bar__btn control-bar__btn--move-right apply-common-tooltip" title="'+window.t("Scroll to the Right")+'" data-tooltip-hotkey="'+w+'">\n\t\t\t\t'+_+'\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="control-bar__btn control-bar__btn--turn-button control-bar__btn--btn-hidden apply-common-tooltip js-btn-reset" title="'+window.t("Reset to Default Settings")+'" data-tooltip-hotkey="'+b+'">\n\t\t\t'+d+"\n\t\t</div>\n\t</div>\n</div>",P='<div class="control-bar control-bar__btn control-bar__btn--back-present control-bar__btn--btn-hidden apply-common-tooltip" title="'+window.t("Scroll to the Most Recent Bar")+'">\n\t'+f+"\n</div>",v={},v.moving="wait_finishing",v.wait_finishing="stop",v.stop="moving",x=v,C="control-bar__btn--btn-hidden",L=function(){function e(e,t){this._back=null,this._backButtonVisible=!1,this._boundKeydownHandler=null,this._boundKeyupHandler=null,this._boundMouseHandler=null,this._chartBackgroundProperty=null,this._chartModel=null,this._checkIntervalId=0,this._controlBar=null,this._controlBarVisible=!1,this._currentDistance=0,this._deferredFinishTimeout=0,this._finishingTimeout=0,
this._moveType="",this._movingTimeout=0,this._pressedKey=[],this._priceAxisChanged=null,this._resetAvailabilityChanged=null,this._priceAxisName="",this._rafId=0,this._startTime=0,this._state="stop",this._visibilityTypeProperty=null,this._widget=null,this._btnGroups=null,this._chart=e,this._parent=t,this._init(),this._initHandlers()}return e.prototype.destroy=function(){null!==this._visibilityTypeProperty&&(this._visibilityTypeProperty.unsubscribe(this,this._onVisibilityTypeChange),this._visibilityTypeProperty=null),null!==this._boundMouseHandler&&(this._parent.removeEventListener("mousemove",this._boundMouseHandler,!1),this._parent.removeEventListener("mouseleave",this._boundMouseHandler,!1),this._boundMouseHandler=null),null!==this._boundKeydownHandler&&(this._parent.ownerDocument.removeEventListener("keydown",this._boundKeydownHandler),this._boundKeydownHandler=null),null!==this._boundKeyupHandler&&(this._parent.ownerDocument.removeEventListener("keyup",this._boundKeyupHandler),this._boundKeyupHandler=null),clearTimeout(this._movingTimeout),null!==this._priceAxisChanged&&(this._priceAxisChanged.unsubscribe(this,this._updateBackBtnPosition),this._priceAxisChanged=null),null!==this._chartBackgroundProperty&&(clearInterval(this._checkIntervalId),this._chartBackgroundProperty.unsubscribe(this,this._updateBgBarStyle),this._chartBackgroundProperty=null),null!==this._resetAvailabilityChanged&&(this._resetAvailabilityChanged.unsubscribe(this,this._updateResetScalesButtonVisibility),this._resetAvailabilityChanged=null),this._chart=null},e.prototype.updatePosition=function(e){null!==this._widget&&null!==this._controlBar&&this._updateBtnGroupVisibility(e)},e.prototype._init=function(){var e,t,i,o=this;if(this._widget=Object(s.a)(T).querySelector(".control-bar-wrapper"),this._back=Object(s.a)(P).querySelector(".control-bar__btn--back-present"),this._controlBar=this._widget.querySelector(".control-bar"),this._btnGroups=Array.from(this._controlBar.querySelectorAll(".js-btn-group")),c.CheckMobile.any())for(e=0,t=this._btnGroups;e<t.length;e++)i=t[e],i.classList.add("js-hidden");this._buttons={zoomIn:this._widget.querySelector(".control-bar__btn--zoom-in"),zoomOut:this._widget.querySelector(".control-bar__btn--zoom-out"),moveLeft:this._widget.querySelector(".control-bar__btn--move-left"),moveRight:this._widget.querySelector(".control-bar__btn--move-right"),turn:this._widget.querySelector(".control-bar__btn--turn-button")},this._updateControlBarPosition(),this._initVisibility(),this._parent.appendChild(this._widget),this._parent.appendChild(this._back),this._backButtonVisible=!1,this._priceAxisName=r.IS_RTL?"left":"right",this._chart.withModel(this,function(){o._chartModel=o._chart.model(),o._priceAxisChanged=o._chart.getPriceAxisWidthChangedByName(o._priceAxisName),o._resetAvailabilityChanged=o._chartModel.model().isScalesResetAvailableChanged(),o._priceAxisChanged.subscribe(o,o._updateBackBtnPosition),o._resetAvailabilityChanged.subscribe(o,o._updateResetScalesButtonVisibility),o._updateBackBtnPosition(),
null!==o._back&&o._back.addEventListener("click",function(){null!==o._chartModel&&o._chartModel.timeScale().scrollToRealtime(!0)}),o._checkIntervalId=setInterval(function(){return o._check()},1e3),o._chartBackgroundProperty=o._chartModel.model().properties().paneProperties.background,null!==o._chartBackgroundProperty&&o._chartBackgroundProperty.subscribe(o,o._updateBgBarStyle),o._updateBgBarStyle()})},e.prototype._initHandlers=function(){var e,t,i,o=this,n=Modernizr.touch?"touchstart":"mousedown",r=Modernizr.touch?["touchend"]:["mouseup","mouseout"];for(this._buttons.moveLeft.addEventListener(n,function(e){e.preventDefault(),o._moveByBar(1),o._trackEvent("Move Left")}),this._buttons.moveRight.addEventListener(n,function(e){e.preventDefault(),o._moveByBar(-1),o._trackEvent("Move Right")}),e=0,t=r;e<t.length;e++)i=t[e],this._buttons.moveLeft.addEventListener(i,function(){return o._stopMoveByBar()}),this._buttons.moveRight.addEventListener(i,function(){return o._stopMoveByBar()});this._buttons.turn.addEventListener("click",function(e){e.preventDefault(),o._chart.GUIResetScales(),o._trackEvent("Reset to Default Settings")}),this._buttons.zoomOut.addEventListener("click",function(e){e.preventDefault(),null!==o._chartModel&&o._chartModel.zoomOut(),o._trackEvent("Zoom Out")}),this._buttons.zoomIn.addEventListener("click",function(e){e.preventDefault(),null!==o._chartModel&&o._chartModel.zoomIn(),o._trackEvent("Zoom In")}),this._boundKeydownHandler=this._keydownHandler.bind(this),this._boundKeyupHandler=this._keyupHandler.bind(this),this._parent.ownerDocument.addEventListener("keydown",this._boundKeydownHandler),this._parent.ownerDocument.addEventListener("keyup",this._boundKeyupHandler)},e.prototype._check=function(){if(null!==this._chartModel&&null!==this._back){var e=this._chartModel.timeScale().rightOffset()<0;e!==this._backButtonVisible&&(this._backButtonVisible=e,this._back.classList.toggle(C,!this._backButtonVisible))}},e.prototype._initVisibility=function(){this._visibilityTypeProperty=Object(n.actualBehavior)(),this._visibilityTypeProperty.subscribe(this,this._onVisibilityTypeChange),this._onVisibilityTypeChange()},e.prototype._onVisibilityTypeChange=function(){if(null!==this._visibilityTypeProperty){var e=this._visibilityTypeProperty.value();"alwaysOn"===e||"alwaysOff"===e?(this._controlBarVisible="alwaysOn"===e,null!==this._boundMouseHandler&&(this._parent.removeEventListener("mousemove",this._boundMouseHandler,!1),this._parent.removeEventListener("mouseleave",this._boundMouseHandler,!1),this._boundMouseHandler=null)):(this._controlBarVisible=!1,this._boundMouseHandler||(this._boundMouseHandler=this._visibilityMouseHandler.bind(this),this._parent.addEventListener("mousemove",this._boundMouseHandler),this._parent.addEventListener("mouseleave",this._boundMouseHandler))),this._updateControlBarVisibility()}},e.prototype._visibilityMouseHandler=function(e){var t,i;e.buttons||null!==this._chartModel&&this._chartModel.lineBeingCreated()||(t=!1,
"mousemove"!==e.type&&"mouseleave"!==e.type||null===this._widget||(i=this._widget.getBoundingClientRect(),t=e.clientX>=i.left-100&&e.clientX<=i.right+100&&e.clientY>=i.top-100&&e.clientY<=i.bottom+100),this._controlBarVisible!==t&&(this._controlBarVisible=t,null!==this._controlBar&&null===this._rafId&&(this._rafId=this._controlBar.ownerDocument.defaultView.requestAnimationFrame(this._updateControlBarVisibility.bind(this)))))},e.prototype._updateControlBarVisibility=function(){this._rafId=null,null!==this._controlBar&&this._controlBar.classList.toggle("control-bar--hidden",!this._controlBarVisible)},e.prototype._updateBackBtnPosition=function(){if("left"===this._priceAxisName||"right"===this._priceAxisName){var e=this._chart.getPriceAxisMaxWidthByName(this._priceAxisName)+14;e&&null!==this._back&&(this._back.style.marginRight=e+"px")}},e.prototype._updateBgBarStyle=function(){var e,t,i,o;if(null!==this._chartModel){for(e=Object(a.getLuminance)(this._chartModel.model().properties().paneProperties.background.value())<.5,t=0,i=Object.values(this._buttons);t<i.length;t++)o=i[t],o.classList.toggle("control-bar__btn--dark",e);null!==this._back&&this._back.classList.toggle("control-bar__btn--dark",e)}},e.prototype._updateBtnGroupVisibility=function(e){var t,i,o,n,r,s;if(null!==this._btnGroups&&(t=[{breakPoint:390,className:"js-btn-group-right"},{breakPoint:290,className:"js-btn-group-left"}],!c.CheckMobile.any()))for(i=0,o=t;i<o.length;i++)n=o[i],r=e<=n.breakPoint,void 0!==(s=this._getBtnGroup(n.className))&&r!==s.classList.contains("js-hidden")&&(s.classList.toggle("js-hidden",r),this._updateControlBarPosition())},e.prototype._getBtnGroup=function(e){if(null!==this._btnGroups)return this._btnGroups.find(function(t){return t.classList.contains(e)})},e.prototype._updateControlBarPosition=function(){var e,t;null!==this._widget&&null!==this._controlBar&&(e=0,t=this._controlBar.querySelectorAll(".js-btn-group:not(.js-hidden)"),e=t.length>0?86*t.length:50,this._widget.style.left="calc(50% - "+Math.ceil(e/2)+"px)")},e.prototype._updateResetScalesButtonVisibility=function(){if(null!==this._chartModel){var e=this._chartModel.model().isScalesResetAvailable();this._buttons.turn.classList.toggle(C,!e)}},e.prototype._move=function(e){var t,i,o,n=this;null!==this._chartModel&&"stop"===this._state&&this._chartModel.beginUndoMacro(1===e?"Move Left":"Move Right"),this._state=x.stop,this._moveType="animated",this._deferredFinishTimeout&&(clearTimeout(this._deferredFinishTimeout),this._deferredFinishTimeout=0),this._finishingTimeout&&(clearTimeout(this._finishingTimeout),this._finishingTimeout=0),this._startTime=Date.now(),0===this._movingTimeout&&(t=this._startTime,i=10,o=function(){n._moveStep(t,0,50*e,1e3),n._movingTimeout=setTimeout(o.bind(n),i)},this._movingTimeout=setTimeout(o.bind(this),i))},e.prototype._moveStep=function(e,t,i,o){var n,r,s;return null===this._chartModel||this._chartModel.timeScale().isEmpty()?void 0:(n=Date.now(),n<e&&(e=n),r=(n-e)/o,(r>1||!isFinite(r))&&(r=1),s=1-Math.pow(1-r,3),this._currentDistance=(i-t)*s+t,
this._chartModel.scrollChart(this._currentDistance),r)},e.prototype._finishMove=function(){var e,t,i,o=this;clearTimeout(this._movingTimeout),this._movingTimeout=0,this._deferredFinishTimeout=0,e=this._currentDistance,t=Date.now(),i=function(){var n=o._moveStep(t,e,0,700);n&&n<1?o._finishingTimeout=setTimeout(i.bind(o),10):null!==o._chartModel&&(o._state=x.wait_finishing,o._moveType="",o._movingTimeout=0,o._currentDistance=0,o._chartModel.endUndoMacro())},this._finishingTimeout=setTimeout(i.bind(this),10)},e.prototype._stopMove=function(){"moving"===this._state&&(this._state=x.moving,Date.now()-this._startTime<200?this._deferredFinishTimeout=setTimeout(this._finishMove.bind(this),200-(Date.now()-this._startTime)):this._finishMove())},e.prototype._moveByBar=function(e){var t,i,o,n,r,s,a=this;if(null!==this._chartModel){if(t=this._chartModel.timeScale(),t.isEmpty())return;"stop"===this._state&&this._chartModel.beginUndoMacro(1===e?"Move Left":"Move Right"),null!==t.visibleBars()&&(i=t.indexToCoordinate(t.visibleBars().lastBar())+t.barSpacing()/2,Math.abs(t.width()-i)>t.barSpacing()/6&&this._chartModel.scrollChart(t.width()-i)),this._state=x.stop,this._moveType="by_bar",this._startTime=Date.now(),this._movingTimeout||(o=0,n=150,r=400,s=function(){a._moveByBarStep(e),o++,n>100&&(n-=o/5*20),a._movingTimeout=setTimeout(s,n)},this._movingTimeout=setTimeout(s,r),this._moveByBarStep(e))}},e.prototype._moveByBarStep=function(e){if(null!==this._chartModel){if(this._chartModel.timeScale().isEmpty())return;this._chartModel.scrollChartByBar(e)}},e.prototype._stopMoveByBar=function(){"moving"===this._state&&(clearTimeout(this._movingTimeout),this._movingTimeout=0,this._state=x.wait_finishing,this._moveType="",this._movingTimeout=0,this._currentDistance=0,null!==this._chartModel&&this._chartModel.endUndoMacro())},e.prototype._keydownHandler=function(e){var t,i;e.metaKey||37!==(t=e.which)&&39!==t||this._pressedKey[t]||(this._pressedKey[t]=!0,e.target.closest("input, textarea")||(i=37===t?1:-1,e.ctrlKey||e.altKey?this._move(i):this._moveByBar(i),e.preventDefault()))},e.prototype._keyupHandler=function(e){var t=e.which;37!==t&&39!==t||e.target.closest("input, textarea")||(this._pressedKey[e.which]=!1,"by_bar"===this._moveType?this._stopMoveByBar():this._stopMove())},e.prototype._trackEvent=function(e){},e}()},function(e,t){Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector||Element.prototype.mozMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(e){for(var t=this;t&&1===t.nodeType;t=t.parentNode)if(t.matches(e))return t;return null})},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14 14" width="14" height="14"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M2 7h10"/></svg>'},function(e,t){
e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14 18" width="14" height="18"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-width="2"><path d="M1 10a6 6 0 1 0 6-6H3"/><path d="M5 1L2.5 4 5 7"/></g></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14 14" width="14" height="14"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M7 2v10M2 7h10"/></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14 14" width="14" height="14"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M6.5 1.5l5 5.5-5 5.5M3 4l2.5 3L3 10"/></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 9 7" width="9" height="7"><path fill="currentColor" d="M.5 3.5L4 0v3h5v1H4v3z"/></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 9 7" width="9" height="7"><path fill="currentColor" d="M8.5 3.5L5 0v3H0v1h5v3z"/></svg>'},function(e,t){},function(e,t,i){"use strict";function o(e,t){i.e(11).then(function(o){i(360).showSymbolInfoDialog(e,t)}.bind(null,i)).catch(i.oe)}Object.defineProperty(t,"__esModule",{value:!0}),t.showSymbolInfoDialog=o},function(e,t,i){"use strict";var o,n,r,s,a,l,c;Object.defineProperty(t,"__esModule",{value:!0}),i.d(t,"MarketStatusIndicator",function(){return c}),o=i(3),i(11),n=i(780),i.n(n),r=i(292),s={invalid:"tv-market-status--invalid",market:"tv-market-status--market",out_of_session:"tv-market-status--out-of-session",post_market:"tv-market-status--post-market",pre_market:"tv-market-status--pre-market",loading:"tv-market-status--loading",holiday:"tv-market-status--holiday",replay:"tv-market-status--replay"},a={invalid:$.t("Invalid Symbol"),market:$.t("Market Open"),out_of_session:$.t("Market Closed"),post_market:$.t("Post Market"),pre_market:$.t("Pre Market"),loading:$.t("Loading"),holiday:$.t("Holiday"),replay:""},l={classMap:s,classSuffix:"",data:{},extraTitle:"",labelMap:a,short:!1,showTooltip:!0,tooltipType:"custom"},c=function(e){function t(t){var i=e.call(this,t)||this;return i._quoteSessionPrefix="market-status-indicator",i._componentClass="tv-market-status",i._extraTitle="",i._init(t),i}return o.c(t,e),t.prototype.setStatus=function(e,t){var i={values:{current_session:e}};this.update(i,t)},t.prototype.getTooltipText=function(){var t=e.prototype.getTooltipText.call(this);return""===t?t:(""!==this._extraTitle&&(t=t+", "+this._extraTitle),t)},t.prototype.setExtraTitle=function(e){this._extraTitle=e},t.prototype.reset=function(){this._clearClasses(),this._labelEl.textContent="",this._extraTitle="",this._el.setAttribute("title",""),this._value=""},t.prototype.enableShortMode=function(t){void 0===t&&(t=!0),void 0!==this._labelEl&&this._labelEl.classList.add("i-hidden"),e.prototype.enableShortMode.call(this)},t.prototype.disableShortMode=function(){void 0!==this._labelEl&&this._labelEl.classList.remove("i-hidden"),e.prototype.disableShortMode.call(this)},t.prototype._renderLabel=function(){
this._labelEl.textContent=this.getLabel()},t.prototype._getValueFromData=function(e){return void 0!==e.values&&void 0!==e.values.current_session?e.values.current_session:this.getValue()},t.prototype._render=function(){this._renderLabelElement(),this._renderDotElement(),e.prototype._render.call(this)},t.prototype._init=function(t){var i=Object.assign({},l,t);e.prototype._init.call(this,i),this.setExtraTitle(i.extraTitle),this._render()},t.prototype._renderLabelElement=function(){void 0===this._labelEl&&(this._labelEl=document.createElement("span"),this._labelEl.classList.add(this._componentClass+"__label"),this._labelEl.classList.add(this._componentClass+"__label"+this._classSuffix),this._el.appendChild(this._labelEl))},t.prototype._renderDotElement=function(){void 0===this._dotEl&&(this._dotEl=document.createElement("span"),this._dotEl.classList.add(this._componentClass+"__dot"),this._dotEl.classList.add(this._componentClass+"__dot"+this._classSuffix),this._el.appendChild(this._dotEl))},t}(r.a)},function(e,t){},function(e,t,i){"use strict";var o,n,r,s,a,l,c,h,u,d;Object.defineProperty(t,"__esModule",{value:!0}),i.d(t,"DataModeIndicator",function(){return d}),o=i(3),i(11),i(73),n=i(782),i.n(n),r=i(292),s={connecting:"tv-data-mode--connecting",delayed:"tv-data-mode--delayed",delayed_streaming:"tv-data-mode--delayed",endofday:"tv-data-mode--endofday",forbidden:"tv-data-mode--forbidden",realtime:"tv-data-mode--realtime",snapshot:"tv-data-mode--snapshot",loading:"tv-data-mode--loading",replay:"tv-data-mode--replay"},a={connecting:$.t("Connecting"),delayed:$.t("Delayed"),delayed_streaming:$.t("Delayed"),endofday:$.t("End of Day"),forbidden:$.t("Instrument is not allowed"),realtime:$.t("Real-time"),snapshot:$.t("Snapshot"),loading:"",replay:$.t("Replay Mode")},l={connecting:$.t("C",{context:"data_mode_connecting_letter"}),delayed:$.t("D",{context:"data_mode_delayed_letter"}),delayed_streaming:$.t("D",{context:"data_mode_delayed_streaming_letter"}),endofday:$.t("E",{context:"data_mode_end_of_day_letter"}),forbidden:$.t("F",{context:"data_mode_forbidden_letter"}),realtime:$.t("R",{context:"data_mode_realtime_letter"}),snapshot:$.t("S",{context:"data_mode_snapshot_letter"}),loading:"",replay:$.t("R",{context:"data_mode_replay_letter"})},c=600,h={streaming:"realtime"},u={classMap:s,classSuffix:"",data:{values:{update_mode:"connecting"}},labelMap:a,modeInterval:c,short:!1,shortLabelMap:l,showTooltip:!0,tooltipType:"custom"},d=function(e){function t(t){var i=e.call(this,t)||this;return i._quoteSessionPrefix="data-mode-indicator",i._componentClass="tv-data-mode",i._init(t),i}return o.c(t,e),t.prototype.getLabel=function(){return!0===this._shortMode?this._shortLabelMap[this._value]||"":e.prototype.getLabel.call(this)},t.prototype.setMode=function(e,t){this.update({values:{update_mode:e,update_mode_seconds:t}})},t.prototype.hide=function(){this._el.classList.add("i-hidden")},t.prototype.show=function(){this._el.classList.remove("i-hidden")},t.prototype.getTooltipText=function(){var e="",t=this.getValue();if(""===t)return e
;switch(t){case"delayed":e=$.t("Quotes are delayed by {0} min and updated every 30 seconds");break;case"delayed_streaming":e=$.t("Quotes are delayed by {0} min");break;default:e=this._labelMap[t]||e}return["delayed","delayed_streaming"].includes(t)&&(e=e.format(Math.round(this._modeInterval/60))),e},t.prototype._init=function(t){void 0===t&&(t={});var i=Object.assign({},u,t);this._modeInterval=i.modeInterval||c,this._shortLabelMap=i.shortLabelMap||l,e.prototype._init.call(this,i),this._render()},t.prototype._getValueFromData=function(e){var t;return t=void 0!==e.values&&void 0!==e.values.update_mode?e.values.update_mode:this.getValue(),h[t]||t},t.prototype._updateValue=function(t,i){void 0!==t.values&&void 0!==t.values.update_mode_seconds&&(this._modeInterval=t.values.update_mode_seconds),e.prototype._updateValue.call(this,t,i)},t}(r.a)},function(e,t){},function(e,t,i){"use strict";var o,n,r;Object.defineProperty(t,"__esModule",{value:!0}),i.d(t,"StudyMetaInfoRepository",function(){return r}),i(11),o=i(28),n=i.n(o),r=function(){function e(e){this._nextRequestNumber=1,this._isReady=!1,this._metaInfoQueryQueue=[],this._studiesMetaInfo=[],this._studiesMigrations=[],this._studyScriptingPkgVers=null,this._gateway=e}return e.prototype.getStudyScriptingPkgVers=function(){return this._studyScriptingPkgVers},e.prototype.requestMetaInfo=function(){var e=this;return this._requestStarted(),new Promise(function(t){e._gateway.requestMetadata(e._makeNextRequestId(),function(i){var o=i.params[1].metainfo.slice();e._processLibraryMetaInfo(o),e._requestFinished(),t()})})},e.prototype.findById=function(e){if(this._isReady){var t=this._findStudyMetaInfo(e);if(!t)throw new ReferenceError("unexpected study id:"+e);return Promise.resolve(t)}return this._enqueueMetaInfoQuery(e)},e.prototype.isReady=function(){return this._isReady},e.prototype.getInternalMetaInfoArray=function(){return this._studiesMetaInfo},e.prototype.getMigrations=function(){return this._studiesMigrations},e.prototype._processLibraryMetaInfo=function(t){for(var i=0;i<t.length;++i)n.a.addOrReplaceStudyMetaInfo(this._studiesMetaInfo,e._applyLocalizationToMetadata(t[i]));this._studiesMetaInfo=this._studiesMetaInfo.sort(function(e,t){var i=e.description_localized||e.description,o=t.description_localized||t.description;return i>o?1:i<o?-1:0}),n.a.overrideDefaults(this._studiesMetaInfo)},e.prototype._requestStarted=function(){this._isReady=!1,this._studiesMetaInfo=[],this._studiesMigrations=[],this._studyScriptingPkgVers=null},e.prototype._requestFinished=function(){this._isReady=!0,this._processPendingMetaInfoQueries()},e.prototype._enqueueMetaInfoQuery=function(e){var t=this;return new Promise(function(i){t._metaInfoQueryQueue.push({studyId:e,resolver:i})})},e.prototype._processPendingMetaInfoQueries=function(){for(var e,t;this._metaInfoQueryQueue.length;){if(e=this._metaInfoQueryQueue.shift(),null===(t=this._findStudyMetaInfo(e.studyId)))throw new ReferenceError("unexpected study id:"+e.studyId);e.resolver(t)}},e.prototype._findStudyMetaInfo=function(e){
for(var t=0;t<this._studiesMetaInfo.length;t+=1)if(this._studiesMetaInfo[t].id===e)return this._studiesMetaInfo[t];return null},e.prototype._makeNextRequestId=function(){return"metadata_"+this._nextRequestNumber++},e._applyLocalizationToMetadata=function(e){return e.description_localized=window.t(e.description,{context:"study"}),e},e}()},function(e,t,i){"use strict";function o(){}function n(e){r(e),s(e)}var r,s;Object.defineProperty(t,"__esModule",{value:!0}),t.addPerfMark=n,r=console.timeStamp?console.timeStamp.bind(console):o,s=window.performance&&performance.mark?performance.mark.bind(performance):o},function(e,t,i){"use strict";function o(){function e(e){return f&&t(),f=new r.UndoMacroCommand(e)}function t(){if(f){var e=f;f=null,e.isEmpty()||s(e)}}function i(){if(m.isEmpty())return!1;var e=m.pop();return!!e&&(e.undo(),g.push(e),h.logNormal("UNDO: "+e.text()),!0)}function o(){if(g.isEmpty())return!1;var e=g.pop();return!!e&&(e.redo(),m.push(e),h.logNormal("REDO: "+e.text()),!0)}function s(e){var t,i,o;f?f.addCommand(e):(g.clear(),t=m.head(),i=t&&t.text(),m.push(e),""!==(o=e.text())&&o!==i&&h.logNormal("DO: "+o)),e.executeOnPush()&&e.redo()}function a(){return{lastActualCommand:m.isEmpty()?null:m.head()}}function c(e){for(;!m.isEmpty()&&e.lastActualCommand!==m.head();)m.pop().undo();g.clear()}function u(){return m}function d(){return g}function p(){m.clear(),g.clear()}function _(e,t,i){if(e.value()!==t){var o=new l(e,t,i);s(o),o.redo()}}var f=null,m=new n.UndoStack,g=new n.UndoStack;return{beginUndoMacro:e,clearStack:p,createUndoCheckpoint:a,endUndoMacro:t,pushUndoCommand:s,redo:o,redoStack:d,setWatchedValue:_,undo:i,undoStack:u,undoToCheckpoint:c}}var n,r,s,a,l,c,h;Object.defineProperty(t,"__esModule",{value:!0}),n=i(290),r=i(259),s=i(3),a=i(41),l=function(e){function t(t,i,o){var n=e.call(this,o)||this;return n._wv=t,n._newValue=i,n._oldValue=t.value(),n}return s.c(t,e),t.prototype.redo=function(){this._wv.setValue(this._newValue)},t.prototype.undo=function(){this._wv.setValue(this._oldValue)},t}(a.UndoCommand),c=i(5),t.createUndoHistory=o,h=Object(c.getLogger)("Common.UndoHistory")},function(e,t,i){"use strict";function o(e,t,o){void 0===t&&(t={}),i.e(4).then(function(n){i(137).getImageOfChart(e,t,o)}.bind(null,i)).catch(i.oe)}function n(e,t,o){void 0===t&&(t={}),i.e(4).then(function(n){i(137).getImageOfChartSilently(e,t,o)}.bind(null,i)).catch(i.oe)}Object.defineProperty(t,"__esModule",{value:!0}),t.getImageOfChart=o,t.getImageOfChartSilently=n},function(e,t,i){"use strict";var o,n,r,s;Object.defineProperty(t,"__esModule",{value:!0}),i.d(t,"SetChartLayoutCommand",function(){return s}),o=i(3),n=i(41),r=i(109),s=function(e){function t(t,i){var o=this,n="Change Chart Layout to "+r.layouts[i].title;return o=e.call(this,n)||this,o._chartWidgetCollection=t,o._newLayoutType=i,o._oldLayoutType=t.layout.value(),o}return o.c(t,e),t.prototype.redo=function(){this._chartWidgetCollection.layout.setValue(this._newLayoutType)},t.prototype.undo=function(){this._chartWidgetCollection.layout.setValue(this._oldLayoutType)},t
}(n.UndoCommand)},function(e,t,i){"use strict";function o(e){return new Promise(function(t,i){e.subscribe(null,t,!0)})}Object.defineProperty(t,"__esModule",{value:!0}),t.delegateToPromise=o},function(e,t,i){"use strict";function o(e){r.call(this,e);var t=this;a.hideMarksOnBars().subscribe(this,function(){t._properties.visible.setValue(!a.hideMarksOnBars().value())})}function n(e){s.call(this)}var r=i(85).BarsMarksContainer,s=i(181).BarMarkTooltip,a=i(33);inherit(o,r),o.prototype._initialize=function(e){this._properties.visible.setValue(!0)},o.prototype.userEditEnabled=function(){return!1},o.prototype._constructor="UserDefinedBarsMarks",o.prototype._plateViewData=function(e){var t={text:e.text};return"object"==typeof e.color&&(t.theme="user_defined_theme",t.overridedTheme={},t.overridedTheme.border=e.color.border,t.overridedTheme.background=e.color.background),t},o.prototype.onClicked=function(){var e=this._model.lastHittestData().id;this._marks[e].onClicked()},o.prototype.clearMarks=function(){r.prototype.clearMarks.call(this),this.onNeedRepaint.fire()},o.prototype._getData=function(e){var t,i,o,n=this._model.mainSeries().symbolInfo();n&&(t=this.roundRange(this._rangeDifference(e)),i=this,o=this._model.mainSeries().properties().interval.value(),ChartApiInstance.getMarks(n,t.start,t.end,function(t){t.forEach(function(e){i._marks[e.id]=e},i),i._loadedRange=i._rangeUnion(e,i._loadedRange),i.onNeedRepaint.fire()},o))},o.prototype._createTooltip=function(){return new n},o.prototype.updatePlateData=function(e,t){return t.barWidth=this.barWidth(),t.text=e.text,t.tooltipMargin=-1*Math.max(e.minSize/2,.4*this.barWidth()),t},o.prototype.hasContextMenu=function(){return!1},inherit(n,s),n.prototype._createLayout=function(){this._layout=$('<div class="bar-mark-tooltip"></div>'),this._layout_text=$('<div class="text"></div>').appendTo(this._layout)},n.prototype._updatePlate=function(e){this._currentId=e.id,this._layout.css("border-color",e.theme.border),this._layout.css("margin-top",e.tooltipMargin+"px"),this._layout_text.html(e.text),this._layout.append(this._layout_text)},e.exports=o},function(e,t,i){"use strict";function o(e){a.call(this,e);var t=this;l.hideMarksOnBars().subscribe(this,function(){t._properties.visible.setValue(!l.hideMarksOnBars().value())}),this._paneView=new n(this)}function n(e,t){this.source=e,this._rendererFactory=t,this.stylesCache={},this.templatesCache={},this._lollipops={},this._createLollipops()}var r=i(6).Point,s=i(791).ESDPaneView,a=i(85).BarsMarksContainer,l=i(33),c=i(38),h=i(293).Tooltip;inherit(o,a),o.prototype._initialize=function(e){this._properties.visible.setValue(!0)},o.prototype.userEditEnabled=function(){return!1},o.prototype._constructor="UserDefinedTimescaleMarks",o.prototype._plateViewData=function(e){return{text:e.text}},o.prototype.onClicked=function(){var e=this._model.lastHittestData().id;c.emit("onTimescaleMarkClick",e)},o.prototype.clearMarks=function(){a.prototype.clearMarks.call(this),this._paneView.clearCaches(),this.onNeedRepaint.fire()},o.prototype._getData=function(e){
var t,i,o,n=this._model.mainSeries().symbolInfo();n&&(t=this.roundRange(this._rangeDifference(e)),i=this,o=this._model.mainSeries().properties().interval.value(),ChartApiInstance.getTimescaleMarks(n,t.start,t.end,function(t){t.forEach(function(e){i._marks[e.id]=e},i),i._loadedRange=i._rangeUnion(e,i._loadedRange),i.onNeedRepaint.fire()},o))},o.prototype.updatePlateData=function(e,t){return t.barWidth=this.barWidth(),t.text=e.text,t.tooltipMargin=-1*Math.max(e.minSize/2,.4*this.barWidth()),t},o.prototype.hasContextMenu=function(){return!1},o.prototype.paneViews=function(e){return this._properties.visible.value()?[this._paneView]:[]},o.prototype.onClickOutside=function(e){this._paneView.onClickOutside(e)},inherit(n,s),n.prototype._createLollipops=function(){var e=this.source._model.timeScale(),t=s.prototype._getY.call(this.source),i=this.source._model.lastHittestData(),o=this;$.each(this.source._marks,function(n,s){var a=s.id;o._lollipops[a]={id:a,basePoint:new r(e.indexToCoordinate(e.timePointToIndex(s.tickmark))+1,t),hovered:i&&i.id===a||a===o.getLastClickedLollipopId(),barY:null,label:s.label,color:s.color,items:s.tooltip,tooltip:o._lollipops.hasOwnProperty(a)?o._lollipops[a].tooltip:new h,visible:!0}})},n.prototype.clearCaches=function(){this._lollipops={}},n.prototype.update=function(){this._createLollipops()},n.prototype.renderer=function(){return this.update(),s.prototype.renderer.call(this)},n.prototype._generateTemplateStyle=function(e,t,i){var o,n,r=e+t+i;return r in this.stylesCache||(o={strokeStyle:t,lineWidth:1,fillStyle:"white",barLine:{lineStyle:CanvasEx.LINESTYLE_DASHED},lollipop:{width:32,height:96,circleHeight:16,radius:12,lineWidth:1.5,fillStyle:"white",strokeStyle:"#E2745B",text:{label:i,strokeStyle:t,font:"normal 12px Verdana, Arial, sans-serif"}}},n={strokeStyle:t,lollipop:{fillStyle:t,fillCircle:!0,text:{strokeStyle:"white"}}},this.stylesCache[r]="default"===e?o:$.extend(!0,{},o,n)),this.stylesCache[r]},n.prototype.getTemplate=function(e,t){var i=e+t.color+t.label;return i in this.templatesCache||(this.templatesCache[i]=this.createTemplate(this._generateTemplateStyle(e,t.color,t.label))),this.templatesCache[i]},n.prototype.getStyle=function(e,t){return this._generateTemplateStyle(e,t.color,t.label)},n.prototype.createText=function(e,t){"string"==typeof e.items?t.addTextLine(e.items):Array.isArray(e.items)&&e.items.forEach(function(e){t.addTextLine(e)})},n.prototype.hasTooltip=function(e){return!!e.tooltip&&e.tooltip.length},e.exports=o},function(e,t,i){"use strict";function o(e,t){this._lastClickedId=null,this._model=e,this._study=t,this._metaInfo=t.metaInfo(),this._lollipops={},this._textCache={},this.templatesCache={},this._invalidated=!0,this.templatesCache.hovered=this.createTemplate(this.hoveredStyle),this.templatesCache.default=this.createTemplate(this.defaultStyle),e.properties().paneProperties.background.subscribe(this,this.onPaneBgChange)}function n(e){this.data=e}function r(e){this.data=e,this._hittest=new c(c.CUSTOM,e)}function s(e,t){this._data=e,this._paneView=t,
this.textRenderer=new s.TextRenderer(e.style.lollipop.importance)}var a=i(6).Point,l=i(61).pointInCircle,c=i(9).HitTestResult,h=i(50).CompositeRenderer,u=i(293).Tooltip;i(105).PercentageFormatter,i(793).roundToFirstValuable;o.prototype.onPaneBgChange=function(){this.defaultStyle.lollipop.fillStyle=this._model.properties().paneProperties.background.value(),this._stylesCache=null,Object.keys(this.templatesCache).forEach(function(e){0===e.indexOf("default")&&(this.templatesCache[e]=null)},this)},o.prototype.onClickOutside=function(){this._lastClickedId=null},o.prototype.closeTooltips=function(){var e,t;for(e in this._lollipops)this._lollipops.hasOwnProperty(e)&&(t=this._lollipops[e],t.visible&&(t.tooltip.isOpened()&&t.tooltip.hide(),t.visible=!1))},o.prototype.getLastClickedLollipopId=function(){return this._lastClickedId},o.prototype._setStackStudies=function(){this._stackStudies=[]},o.prototype._getY=function(){var e,t,i=0,o=this._model.panes();for(e=o.length;e--;)t=o[e],t.containsMainSeries()&&(i+=t.height());return i},o.prototype.update=function(){this._invalidated=!0},o.prototype.updateImpl=function(){var e,t,i,o,n,r,s,a,l,c,h,u;this._setStackStudies(),e=this,t=this._study.data(),i=this._model.timeScale(),o=i.visibleBars(),n=this._model.mainSeries().bars(),r=this._study.priceScale(),s=this._model.mainSeries(),a=s.firstBar(),r&&!r.isEmpty()&&!i.isEmpty()&&a&&t&&(this.closeTooltips(),l=this._getY(),c=o.firstBar(),h=o.lastBar(),u=t.range(c,h),u.each(function(t,o){var s,a=0;for(s=0;s<e._stackStudies.length;++s)e._stackStudies[s].data().contains(t)&&++a;t>c&&t<h&&e.addLollipop(l,n,i,r,t,o,a)}),this.afterUpdate(l,n,i,r))},o.prototype.addLollipop=function(e,t,i,o,n,r,s){var l,c,h,d,p,_,f,m,g=r[0],y=this._model.mainSeries().symbolInfo();y&&(l=y.name,c=null,h=this._study.metaInfo().id+"_"+g+"_"+l,d=this._model.lastHittestData(),p=d&&d.id===h,p&&null!==(_=t.valueAt(n))&&(f=_[TradingView.LOW_PLOT],m=this._model.mainSeries().firstValue(),c=o.priceToCoordinate(f,m)),this._lollipops[h]=$.extend({id:h,visible:!0,basePoint:new a(i.indexToCoordinate(n)+1,e),hovered:p||h===this.getLastClickedLollipopId(),barY:c,stack:s,tooltip:this._lollipops.hasOwnProperty(h)?this._lollipops[h].tooltip:new u},this.extraData(r)))},o.prototype.afterUpdate=function(e,t,i){},o.prototype.extraData=function(e){throw Error("Not Implemented")},o.prototype.createText=function(e,t){throw Error("Not Implemented")},o.prototype.showBarLine=function(){return!0},o.prototype.getStyle=function(e,t){var i,o=e;return t.stack&&(o+="_stack:"+t.stack),"hovered"===o?this.hoveredStyle:"default"===o?this.defaultStyle:(this._stylesCache||(this._stylesCache={}),this._stylesCache[o]||(i=TradingView.clone("hovered"===e?this.hoveredStyle:this.defaultStyle),t.stack&&(i.lollipop.incHeight=24*t.stack),this._stylesCache[o]=i),this._stylesCache[o])},o.prototype.hasTooltip=function(e){return!0},o.prototype.renderer=function(){var e,t,i,o,l,c,u,d,p;this._invalidated&&(this.updateImpl(),this._invalidated=!1),e=new h
;for(t in this._lollipops)this._lollipops.hasOwnProperty(t)&&(i=this._lollipops[t],o=15,l=this.getStyle(i.hovered?"hovered":"default",i),i.visible&&(c=$.extend({tooltipPoint:new a(i.basePoint.x,i.basePoint.y-l.lollipop.circleHeight-o-(l.lollipop.incHeight||0)),style:l,createText:this.createText.bind(this)},i),u=this.getTemplate(i.hovered?"hovered":"default",i),d={circlePoint:new a(i.basePoint.x,i.basePoint.y-l.lollipop.circleHeight-(l.lollipop.incHeight||0)),style:l,template:u,basePoint:i.basePoint,id:i.id,mouseClickHandler:this._lollipopMouseClickHandler.bind(this,i.id)},e.append(new r(d)),i.hovered&&this.hasTooltip(i)&&i.barY&&this.showBarLine()&&(p={style:{lineStyle:l.barLine.lineStyle,strokeStyle:l.strokeStyle,lineWidth:l.lineWidth},startPoint:new a(i.basePoint.x,i.basePoint.y-l.lollipop.circleHeight),endPoint:new a(i.basePoint.x,i.barY)},e.append(new n(p))),e.append(new s(c,this))));return e},o.prototype.getTemplate=function(e,t){var i=e;return t.stack&&(i+="_stack:"+t.stack),this.templatesCache[i]||(this.templatesCache[i]=this.createTemplate(this.getStyle(e,t))),this.templatesCache[i]},o.prototype.createTemplate=function(e){var t=document.createElement("canvas"),i=t.getContext("2d"),o=new a(e.lollipop.width/2,e.lollipop.height-e.lollipop.circleHeight-(e.lollipop.incHeight||0));return this.drawCircle(i,e,o),this.drawLabel(i,e,o),t},o.prototype.drawCircle=function(e,t,i){e.strokeStyle=t.strokeStyle,e.fillStyle=t.lollipop.fillStyle,e.lineWidth=t.lollipop.lineWidth,CanvasEx.setLineStyle(e,CanvasEx.LINESTYLE_SOLID),e.beginPath(),e.arc(i.x,i.y,t.lollipop.radius,0,2*Math.PI,!1),e.closePath(),e.stroke(),t.lollipop.fillCircle&&e.fill()},o.prototype.drawLabel=function(e,t,i){e.textAlign="center",e.textBaseline="middle",e.fillStyle=t.lollipop.text.strokeStyle,e.font=t.lollipop.text.font,e.fillText(t.lollipop.text.label,i.x,i.y)},o.prototype._lollipopMouseClickHandler=function(e){this._lastClickedId=this._lastClickedId===e?null:e},n.prototype.draw=function(e){e.strokeStyle=this.data.style.strokeStyle,e.lineWidth=this.data.style.lineWidth,CanvasEx.setLineStyle(e,this.data.style.lineStyle),CanvasEx.drawLine(e,this.data.startPoint.x,this.data.startPoint.y,this.data.endPoint.x,this.data.endPoint.y)},n.prototype.hitTest=function(e){return null},r.prototype.hitTest=function(e){return l(e,this.data.circlePoint,this.data.style.lollipop.radius)?this._hittest:null},r.prototype.draw=function(e){var t=this.data.template;e.drawImage(t,this.data.basePoint.x-(.5+this.data.style.lollipop.width/2<<0)+.5,this.data.basePoint.y-this.data.style.lollipop.height+.5)},s.prototype.draw=function(e){this._data.createText(this._data,this.textRenderer),this._paneView.getLastClickedLollipopId()===this._data.id?this._data.tooltip.show({items:[this.textRenderer],x:this._data.basePoint.x,y:this._data.basePoint.y-this._data.style.lollipop.circleHeight-10-2*this._data.style.lollipop.radius*(this._data.stack?this._data.stack:0),wrapElement:e.canvas.parentNode,leftBorderColor:this._data.color}):this._data.tooltip.hide()},s.prototype.hitTest=function(e){
return null},s.TextRenderer=function(e){this.lines=[],this.fontHeight=12,this.font=this.fontHeight+"px Arial, sans-serif",this.lineSpacing=8,this.fillStyle="black",e&&(this.importance=e)},s.TextRenderer.prototype.draw=function(e,t){var i,o,n=t.y;for(i=0;i<this.lines.length;i++)o=this.lines[i],e.font=this.font,o.options.fontWeight&&(e.font=o.options.fontWeight+" "+this.font),e.fillStyle=this.fillStyle,o.renderer(e,o.line,{x:t.x,y:n}),n+=this.lineSpacing+this.fontHeight},s.TextRenderer.prototype.measure=function(){return this.lines.length*(this.fontHeight+this.lineSpacing)-this.lineSpacing},s.TextRenderer.prototype.basicRenderer=function(e,t,i){e.fillText(t,i.x,i.y)},s.TextRenderer.prototype.addMulticolorTextLine=function(e,t){this.addTextLine(e,t,this.multicolorRenderer)},s.TextRenderer.prototype.addTextLine=function(e,t,i){i||(i=this.basicRenderer),t||(t={}),this.lines.push({line:e,renderer:i,options:t})},s.TextRenderer.prototype.multicolorRenderer=function(e,t,i){var o,n,r=i.x;for(o=0;o<t.length;++o)n=t[o],e.fillStyle=n.color,e.fillText(n.text,r,i.y),r+=e.measureText(n.text).width},t.ESDPaneView=o},function(e,t){},function(e,t,i){"use strict";function o(e){var t,i=""+e,o=i.split(".")[1],n=2;return o&&(t=o.match(/^([0]+)/))&&(n=t[1].length+1),parseFloat(i).toFixed(n)}Object.defineProperty(t,"__esModule",{value:!0}),t.roundToFirstValuable=o},function(e,t,i){"use strict";var o=i(196).TimePointIndexSearchMode,n=i(44),r=i(26),s=i(795),a=i(294),l=i(269),c=l.ChartApiInterface,h=l.HandlerInfo,u=i(14).requireFullInterfaceImplementation,d=i(5).getLogger("Chart.ChartApiLocal");TradingView.STUDY_COUNT_LIMIT=210,JSServer.ChartApi=function(e){this._notificationHandlers={},this._sessions={},this.studyCounter=0,this._connected=!1,this._enabled=!1,this._studyEngine=new s(e),this._callbacks={},this._symbolIdCache={},this._seriesIdCache={},this._recentSeriesId={},this._enableLogging=!1,this._enabledMoreBarsRequest=!0,this._serverTimeOffset=0;var t=this;this._studyEngine.on("configuration_received",function(){t._fireEvent("configuration_received")}),this._studyEngine.on("realtime_tick",function(e){var i={time:e.value[0]/1e3,open:e.value[1],high:e.value[2],low:e.value[3],close:e.value[4],volume:e.value[5]};t._fireEvent("realtime_tick",i,!0)})},JSServer.ChartApi.prototype._makeSymbolKey=function(e,t){if(!e||!t)throw Error("incorrect identifiers");return e+"_"+t},JSServer.ChartApi.prototype._makeSeriesKey=function(e,t){if(!e||!t)throw Error("incorrect identifiers");return e+"_"+t},JSServer.ChartApi.prototype.destroy=function(){this._studyEngine.destroy(),this._studyEngine=null},JSServer.ChartApi.prototype.purgeCache=function(e){this._symbolIdCache={},this._studyEngine.purgeCache(),this._studyEngine.purgeRangeExtensionData(),this._studyEngine.purgeDataCache()},JSServer.ChartApi.prototype.setAdditionalBarsRequestEnabled=function(e){this._enabledMoreBarsRequest=e},JSServer.ChartApi.prototype.defaultWatchlistSymbols=function(){return this._watchlistSettings.default_symbols},JSServer.ChartApi.prototype.defaultResolutions=function(){
return this._studyEngine.supportedResolutions()||["1","3","5","15","30","45","60","120","180","240","D","W","M"]},JSServer.ChartApi.prototype.supportedSymbolsTypes=function(){return this._studyEngine.supportedSymbolsTypes()},JSServer.ChartApi.prototype.supportedExchangesList=function(){return this._studyEngine.supportedExchangesList()},JSServer.ChartApi.prototype.futuresRegex=function(){return this._studyEngine.futuresRegex()},JSServer.ChartApi.prototype.start=function(){this._enabled=!0,this._fireEvent("start_enabled")},JSServer.ChartApi.prototype._logMessage=function(e){this._enableLogging&&console.log(e)},JSServer.ChartApi.prototype.unsubscribe=function(e,t){var i=this._callbacks[e];i&&i.splice(i.indexOf(t),1)},JSServer.ChartApi.prototype.on=function(e,t){return this._callbacks.hasOwnProperty(e)||(this._callbacks[e]=[]),this._callbacks[e].push(t),this},JSServer.ChartApi.prototype._fireEvent=function(e,t,i){var o,n;if(this._callbacks.hasOwnProperty(e))for(o=this._callbacks[e].slice(0),i||(this._callbacks[e]=[]),n=0;n<o.length;++n)o[n](t)},JSServer.ChartApi.prototype.chartCreateSession=function(e,t){},JSServer.ChartApi.prototype.chartDeleteSession=function(e){},JSServer.ChartApi.prototype.createSession=function(e,t){TradingView.ChartapiMessagerInstances[e]=new a(this,e),this._sessions[e]=t,this._notificationHandlers[e]={},this.connected()&&t.onMessage({method:"connected",params:[]})},JSServer.ChartApi.prototype.removeSession=function(e){delete this._sessions[e],delete this._notificationHandlers[e],this._studyEngine.stopSources(e)},JSServer.ChartApi.prototype.connected=function(){return this._connected},JSServer.ChartApi.prototype.connect=function(){if(!this._enabled){var e=this;return void this.on("start_enabled",function(){e.connect()})}this.connected()||(this._connected=!0,this.sessionid="dummy session id",this._notifySessions({method:"connected",params:[]}))},JSServer.ChartApi.prototype.disconnect=function(){this._connected=!1,this._notifySessions({method:"disconnected",params:[]})},JSServer.ChartApi.prototype.switchTimezone=function(e,t){if(TradingView.ChartapiMessagerInstances[e].timezone()!==t&&(TradingView.ChartapiMessagerInstances[e].setTimezone(t),this._recentSeriesId[e])){var i=this;this._doWhenSeriesSymbolIdIsReady(e,this._recentSeriesId[e],function(t){var o=i._seriesIdCache[i._makeSeriesKey(e,i._recentSeriesId[e])].resolution;i._studyEngine.recreateSources(t.name,o,e,!0),i._doWhenSeriesDataReceived(e,function(){var o=i._seriesIdCache[i._makeSeriesKey(e,i._recentSeriesId[e])].resolution,n=TradingView.ChartapiMessagerInstances[e].lastBarTime(i._recentSeriesId[e]);n&&i._studyEngine.rebuildExtrapolatedData(e,t.name,o,t.info,1e3*n)})})}},JSServer.ChartApi.prototype.receiveLocalResponse=function(e){this._logMessage("< "+e.method),this._dispathNotification(e),this._fireEvent("message_"+e.method,void 0,!0)},JSServer.ChartApi.prototype.getMarks=function(e,t,i,o,n){this._studyEngine.getMarks(e,t,i,o,n)},JSServer.ChartApi.prototype.getTimescaleMarks=function(e,t,i,o,n){this._studyEngine.getTimescaleMarks(e,t,i,o,n)
},JSServer.ChartApi.prototype.resolveSymbol=function(e,t,i,o,n){function r(t,o){TradingView.ChartapiMessagerInstances[e].onSymbolError(t,o),s._symbolIdCache[s._makeSymbolKey(e,t)]={name:i,status:"invalid_symbol"},s._fireEvent("resolve_fail",{session:e,symbolId:t},!0),s._fireEvent(s._makeSymbolKey(e,t)+"_resolve_fail")}this._notificationHandlers[e][t]=new h(o,t),this._symbolIdCache[this._makeSymbolKey(e,t)]=null;var s=this;this._studyEngine.resolveSymbol(i,function(o){if(o.errmsg)return void r(t,o.errmsg);s._symbolIdCache[s._makeSymbolKey(e,t)]={name:i,info:o,status:"ok"},s._fireEvent("symbol_resolved",{symbolInfo:o,symbolId:t,session:e},!0),s._fireEvent(s._makeSymbolKey(e,t)+"_resolved",o),TradingView.ChartapiMessagerInstances[e].onSymbolResolved(t,o)},function(e){r(t,e)})},JSServer.ChartApi.prototype._doWhenSymbolIdIsReady=function(e,t,i){function o(){return{name:r._symbolIdCache[r._makeSymbolKey(e,t)].name,info:r._symbolIdCache[r._makeSymbolKey(e,t)].info}}function n(){s&&(i(o()),s=!1,r.unsubscribe(r._makeSymbolKey(e,t)+"_resolved",n),r.unsubscribe(r._makeSymbolKey(e,t)+"_resolve_fail",n))}var r=this,s=!0;this._symbolIdCache[this._makeSymbolKey(e,t)]?n():(this.on(this._makeSymbolKey(e,t)+"_resolved",n),this.on(this._makeSymbolKey(e,t)+"_resolve_fail",n))},JSServer.ChartApi.prototype._doWhenSeriesDataReceived=function(e,t){TradingView.ChartapiMessagerInstances[e].seriesCompleted.subscribe(null,t,!0)},JSServer.ChartApi.prototype._doWhenSeriesSymbolIdIsReady=function(e,t,i,o){function n(){var t=c._symbolIdCache[c._makeSymbolKey(e,h)];return{name:t.name,info:t.info}}function r(){i(n())}function s(){c.unsubscribe("symbol_resolved",l),c.unsubscribe("resolve_fail",a)}function a(t){t.symbolId===h&&t.session===e&&(s(),o&&o())}function l(t){t.symbolId===h&&t.session===e&&(s(),r())}var c=this,h=this._seriesIdCache[e+"_"+t].symbolId;this._symbolIdCache[this._makeSymbolKey(e,h)]?r():(this.on("symbol_resolved",l),this.on("resolve_fail",a))},JSServer.ChartApi.prototype.createSeries=function(e,t,i,o,n,s,a){i=i||"";var l=this;this._notificationHandlers[e][t]=new h(function(s){if("series_completed"===s.method){var c=r.Symbol.parsePeriod(n);c.range&&l._applyRange(e,o,t,i,c.range)}a(s)},t),this._recentSeriesId[e]=t,TradingView.ChartapiMessagerInstances[e].setResolution(r.Symbol.parsePeriod(n).pureResolution),this._seriesIdCache[e+"_"+t]={symbolId:o,resolution:n,turnaround:i},this._studyEngine.updateSeriesTurnaround(e,t,i),this._doWhenSeriesSymbolIdIsReady(e,t,function(o){l._studyEngine.seriesTurnaround(e,t)===i&&l._studyEngine.createSeries(o.name,n,e,t,i)})},JSServer.ChartApi.prototype.removeSeries=function(e,t,i){this._notificationHandlers[e][t]=new h(i,t),this._studyEngine.removeSeries(e,t)},JSServer.ChartApi.prototype.setVisibleTimeRange=function(e,t,i,n,r){function s(){var s,l;a=e.data(),s=[a.plotValueToTimePointIndex(i,TradingView.TIME_PLOT,o.FromLeft),a.plotValueToTimePointIndex(n,TradingView.TIME_PLOT,o.FromRight)],a.valueAt(s[1])[0]<n&&e.syncModel()&&(l=e.syncModel().distance(a.valueAt(s[1])[0],n),l.success&&(s[1]+=l.result)),
TradingView.ChartapiMessagerInstances[t].onSeriesTimeframeUpdate(c,h._seriesIdCache[t+"_"+c].turnaround,s[0],s[1],!0),e.requestMoreData(),r&&r()}var a=e.data(),l=!!a.plotValueToTimePointIndex(i,TradingView.TIME_PLOT,o.FromLeft),c=this._recentSeriesId[t],h=this;l?s():(this._studyEngine.ensureExtendedTo(c,t,i),this._doWhenSeriesDataReceived(t,s))},JSServer.ChartApi.prototype._exactBarsCountOfTimeFrame=function(e,t){var i,o=chartWidget.model().mainSeries().bars(),r=chartWidget.model().mainSeries().symbolInfo().session,s=o._valueAt(o.size()-1)[0],a=n.alignPeriodsBack(r,e.resolution,e.interval,1,1e3*s),l=o.size();for(a/=1e3,i=0,i=0;i<l&&!(o._valueAt(i)[0]>a);++i);return l-i},JSServer.ChartApi.prototype._applyRange=function(e,t,i,o,n){var r,s,a,l=chartWidget.model().mainSeries().bars().size();0!==l&&(r=this._exactBarsCountOfTimeFrame(n,this._symbolIdCache[this._makeSymbolKey(e,t)].info),s=Math.max(0,l-1-r),a=Math.max(s,l-1),TradingView.ChartapiMessagerInstances[e].onSeriesTimeframeUpdate(i,o,s,a))},JSServer.ChartApi.prototype.modifySeries=function(e,t,i,o,n,s,a){var l,c;i=i||"",l=this._seriesIdCache[e+"_"+t]?this._seriesIdCache[e+"_"+t].resolution:void 0,TradingView.ChartapiMessagerInstances[e].setResolution(r.Symbol.parsePeriod(n).pureResolution),c=this,this._notificationHandlers[e][t]=new h(function(a){var h,u;"series_completed"===a.method&&(h=r.Symbol.parsePeriod(l),u=r.Symbol.parsePeriod(n),u.range&&h.range!==u.range&&c._applyRange(e,o,t,i,u.range)),s(a)},t),this._recentSeriesId[e]=t,this._studyEngine.updateSeriesTurnaround(e,t,i),a&&(this._seriesIdCache[this._makeSeriesKey(e,a)]=null),this._seriesIdCache[this._makeSymbolKey(e,t)]={symbolId:o,resolution:n,turnaround:i},this._doWhenSeriesSymbolIdIsReady(e,t,function(t){c._studyEngine.purgeRangeExtensionData(e),c._studyEngine.recreateSources(t.name,n,e,!0)})},JSServer.ChartApi.prototype.requestMoreData=function(e,t,i,o){if(this._enabledMoreBarsRequest){var n=this;setTimeout(function(){n._notificationHandlers[e][t]=new h(o,t),n._studyEngine.extendSeriesRange(t,e,i)})}},JSServer.ChartApi.prototype.setStudiesAccessController=function(e){this.studiesAccessController=e},JSServer.ChartApi.prototype.setWatchlistSettings=function(e){this._watchlistSettings=e},JSServer.ChartApi.prototype.allStudiesMetadata=function(){return this._studyEngine.studiesMetadata()},JSServer.ChartApi.prototype.requestMetadata=function(e,t,i){this._notificationHandlers[e][t]=new h(i,t);var o=this.studiesAccessController.getEnabledTools();TradingView.ChartapiMessagerInstances[e].onRequestMetadata(t,o)},JSServer.ChartApi.prototype.isCanCreateStudy=function(){return this.studyCounter<TradingView.STUDY_COUNT_LIMIT},JSServer.ChartApi.prototype.createStudy=function(e,t,i,o,n,r,s){var a,l,c;if(!this.isCanCreateStudy())throw Error("Exceeded the limit of studies");a=this,i=i||"",this._notificationHandlers[e][t]=new h(s,t),l=this._seriesIdCache[this._makeSeriesKey(e,o)].symbolId,c=this._seriesIdCache[this._makeSeriesKey(e,o)].resolution,this._doWhenSymbolIdIsReady(e,l,function(o){
a._studyEngine.createStudy(o.name,c,e,t,i,n,r),a.studyCounter++})},JSServer.ChartApi.prototype.rebindStudy=function(e,t,i,o,n,r,s,a){throw Error("Not implemented")},JSServer.ChartApi.prototype.removeStudy=function(e,t){this._notificationHandlers[e][t]=null,this._studyEngine.removeStudy(e,t),this.studyCounter--},JSServer.ChartApi.prototype.modifyStudy=function(e,t,i,o,n){var r=this;setTimeout(function(){i=i||"",r._notificationHandlers[e][t]=new h(n,t),r._studyEngine.recomputeStudy(t,o,e,i)},0)},JSServer.ChartApi.prototype.createPointset=function(e,t,i,o,n,r,s){i=i||"",this._notificationHandlers[e][t]=new h(s,t);var a=this;this._doWhenSymbolIdIsReady(e,o,function(i){a._studyEngine.createPointset(e,t,i.info.full_name,i.info,n,r)})},JSServer.ChartApi.prototype.modifyPointset=function(e,t,i,o,n){throw Error("This call is not implemented")},JSServer.ChartApi.prototype.removePointset=function(e,t,i){this._notificationHandlers[e][t]=null,this._studyEngine.removePointset(t)},JSServer.ChartApi.prototype.requestMoreTickmarks=function(e,t,i,o){this._notificationHandlers[e][t]=new h(o,t);var n=this;this._doWhenSeriesSymbolIdIsReady(e,t,function(o){var r=n._seriesIdCache[n._makeSeriesKey(e,t)].resolution;n._studyEngine.onMoreTickmarksRequested(e,o.name,o.info,r,i)})},JSServer.ChartApi.prototype.requestFirstBarTime=function(e,t,i,o){this._notificationHandlers[e][t]=new h(o,t)},JSServer.ChartApi.prototype._invokeHandler=function(e,t){e&&e(t)},JSServer.ChartApi.prototype._sendRequest=function(e,t){throw Error("This method is not implemented")},JSServer.ChartApi.prototype._onMessage=function(e){throw Error("This method is not implemented")},JSServer.ChartApi.prototype._convertTimescaleResponse=function(e){var t,i=e.marks;for(t=0;t<i.length;++t)i[t]={span:i[t][0],time:i[t][1],index:i[t][2]};return e},JSServer.ChartApi.prototype._dispathNotification=function(e){var t,i,o,n,r,s,a,l,c,h,u=e.params.shift();if(this._notificationHandlers[u])switch(e.method){case"timescale_update":t=e.params[0],i=e.params[1],o=this._convertTimescaleResponse(i),o.clear=0===i.changes.length&&0===i.marks.length,this._sessions[u].onMessage({method:"timescale_update",params:o});for(n in t)r={},r.customId=n,r.plots=t[n].series,t[n].ns&&(r.nonseries=t[n].ns),r.turnaround=t[n].turnaround,s={method:"data_update",params:r},this._invokeNotificationHandler(u,n,s);break;case"tickmark_update":o=this._convertTimescaleResponse(e.params[0]),o.changes=[],this._sessions[u].onMessage({method:"timescale_update",params:o});break;case"data_update":for(n in e.params[0]){a=e.params[0][n],r={},r.customId=n,r.plots=a.series?a.series:a.plots,r.turnaround=a.turnaround,"s"in a&&"ns"in a&&(r.plots=a.s,r.nonseries=a.ns);for(l=0;l<r.plots.length;l++)for(c in r.plots[l].value)1e100===r.plots[l].value[c]&&(r.plots[l].value[c]=void 0);s={method:"data_update",params:r},this._invokeNotificationHandler(u,n,s)}break;case"index_update":for(n in e.params[0])s={method:"index_update",params:e.params[0][n]},this._invokeNotificationHandler(u,n,s);break;case"critical_error":
d.logNormal(new Date+" critical_error session:"+this.sessionid+" reason:"+e.params[0]),this._sessions[u].onMessage({method:"critical_error",params:e.params});break;case"quote_symbol_data":case"quote_list_fields":case"depth_symbol_error":case"depth_symbol_success":case"dd":case"dpu":case"depth_bar_last_value":this._sessions[u].onMessage({method:e.method,params:e.params});break;default:h=e.params[0],this._invokeNotificationHandler(u,h,e)}},JSServer.ChartApi.prototype._invokeNotificationHandler=function(e,t,i){if(void 0!==t){var o=this._notificationHandlers[e][t];void 0!==o&&o&&this._invokeHandler(o.handler,i),"series_deleted"!==i.method&&"study_deleted"!==i.method||delete this._notificationHandlers[e][t]}},JSServer.ChartApi.prototype.searchSymbols=function(e,t,i,o,n,r,s,a,l,c){0===e.length&&0===t.length&&0===i.length&&c([]),this._studyEngine.searchSymbols(e,t,i,c)},JSServer.ChartApi.prototype._notifySessions=function(e){var t,i;for(t in this._sessions){if(!this._sessions.hasOwnProperty(t))return;i=this._sessions[t],"function"==typeof i.onMessage&&i.onMessage(e)}},JSServer.ChartApi.prototype.unpack=function(e){throw Error("This method is not implemented")},JSServer.ChartApi.prototype.quoteCreateSession=function(e){return this._studyEngine.quoteCreateSession(e)},JSServer.ChartApi.prototype.quoteDeleteSession=function(e){return this._studyEngine.quoteDeleteSession(e)},JSServer.ChartApi.prototype.quoteSetFields=function(e,t){return this._studyEngine.quoteSetFields(e,t)},JSServer.ChartApi.prototype.quoteAddSymbols=function(e,t){return-1!==t.indexOf(void 0)&&(console.warn("Got undefined in quoteAddSymbols"),t=t.filter(function(e){return!!e})),this._studyEngine.quoteAddSymbols(e,t)},JSServer.ChartApi.prototype.quoteRemoveSymbols=function(e,t){return this._studyEngine.quoteRemoveSymbols(e,t)},JSServer.ChartApi.prototype.quoteFastSymbols=function(e,t){return this._studyEngine.quoteFastSymbols(e,t)},JSServer.ChartApi.prototype.quoteHibernateAll=function(e){return this._studyEngine.quoteHibernateAll(e)},JSServer.ChartApi.prototype.depthCreateSession=function(e){return this._studyEngine.depthCreateSession(e)},JSServer.ChartApi.prototype.depthDeleteSession=function(e){return this._studyEngine.depthDeleteSession(e)},JSServer.ChartApi.prototype.depthSetSymbol=function(e,t){return this._studyEngine.depthSetSymbol(e,t)},JSServer.ChartApi.prototype.depthClearSymbol=function(e){},JSServer.ChartApi.prototype.depthSetScale=function(e,t){},JSServer.ChartApi.prototype.createStudiesAccessController=function(e,t,i){return new this.StudiesAccessController(this._studyEngine,e&&JSON.parse(e)||{type:"black",tools:[]})},JSServer.ChartApi.prototype.StudiesAccessController=function(e,t){this._studyEngine=e,this._studiesAccess=t},JSServer.ChartApi.prototype.StudiesAccessController.prototype._findTool=function(e){var t,i,o=null;for(t=0;t<this._studiesAccess.tools.length;++t)if(i=this._studiesAccess.tools[t],i.name===e||i===e){o=i;break}return o},JSServer.ChartApi.prototype.StudiesAccessController.prototype.getEnabledTools=function(){
return this._studyEngine.studiesMetadata().filter(function(e){var t=this._findTool(e.description);return"black"===this._studiesAccess.type?!t||t.grayed:!!t},this)},JSServer.ChartApi.prototype.StudiesAccessController.prototype.isToolGrayed=function(e){var t=this._findTool(e);return t&&t.grayed},JSServer.ChartApi.prototype.serverTimeOffset=function(){return this._studyEngine.serverTimeOffset()},JSServer.ChartApi.prototype.alignTimePoint=function(e,t,i){return this._studyEngine.alignTimePoint(e,t,i)},JSServer.ChartApi.prototype.disconnectCount=function(){return 0},u(JSServer.ChartApi,"JSServer.ChartApi",c,"ChartApiInterface"),e.exports=JSServer.ChartApi},function(e,t,i){"use strict";(function(t,o){function n(e,i){var o=t.get_timezone(i.timezone),n=new v.Session;return n.init(o,i.session),f.Symbol.newBarBuilder(e,n,n)}function r(e){function t(e){console.warn("SymbolInfo validation: "+e)}var i,o;if((void 0===e.minmov||e.minmov<=0)&&t("minmov must be positive"),(void 0===e.pricescale||e.pricescale<=0)&&t("pricescale must be positive"),void 0!==e.name&&0!==e.name.length||t("name must be non-empty string"),void 0!==e.session&&0!==e.session.length||t("session must be non-empty string"),void 0===e.timezone||0===e.timezone.length?t("timezone must be non-empty string"):"exchange"!==e.timezone&&d(e.timezone)||"UTC"!==e.timezone&&t('unsupported timezone "{0}"'.format(e.timezone)),void 0!==e.intraday_multipliers)if(i=e.intraday_multipliers,Array.isArray(i))for(o=0;o<i.length;++o)"string"!=typeof i[o]&&t('intraday_multipliers[{0}] = "{1}" must be string (now: {2})'.format(o+1,i[o],typeof i[o]));else t("intraday_multipliers must be array");(e.supported_resolutions||[]).filter(function(e){return!b.isValid(e)}).forEach(function(e){t("supported_resolutions field contains invalid value: "+e)})}function s(e){var t,i;if(e.base_name||(e.base_name=[e.name]),e.legs||(e.legs=[e.name]),e.exchange||(e.exchange=e["exchange-listed"]),e.full_name||(e.full_name=e.symbol||(e.exchange?e.exchange+":"+e.name:e.name)),e.pro_name||(e.pro_name=e.full_name),e.data_status||(e.data_status="streaming"),e.ticker||(e.ticker=e.symbol||e.name),!e.session&&e["session-regular"]&&(e.session=e["session-regular"]),!e.minmov&&e.minmovement&&(e.minmov=e.minmovement),e.supported_resolutions)for(t=0;t<e.supported_resolutions.length;t++)i=b.parse(e.supported_resolutions[t]),i.isValid()&&(e.supported_resolutions[t]=i.value())}function a(e,t){null!=e.graphicsCmds&&null!=e.graphicsCmds.create&&null!=e.graphicsCmds.create.vertlines&&e.graphicsCmds.create.vertlines.forEach(function(e){e.data.forEach(t)})}function l(e,t){var i,o,n=e.length,r=t.length,s=0;for(i=0;i<n;++i){for(o=e[i];s<r&&t[s].value[0]<o;)++s;s>=r?e[i]=t[r-1].index:e[i]=t[s].index}}function c(e,t){var i,o;null!==t&&0!==t.length&&(i={},w(e,function(e){T(e)&&Object.keys(e).forEach(function(t){t.endsWith("__t")&&(i[e[t]]=!0)})},{visitInstances:!0}),o=Object.keys(i).map(Number).sort(function(e,t){return e-t}),o.forEach(function(e,t){i[e]=t}),Object.assign(e,w(e,function(e){
return T(e)&&Object.keys(e).forEach(function(t){t.endsWith("__t")&&(e[t.slice(0,-3)]=i[e[t]])}),e},{visitInstances:!0})),l(o,t),e.indexes=o)}function h(e,t){var i,o;null!==t&&0!==t.length&&(i={},a(e.data,function(e){i[e.time]=!0}),o=Object.keys(i).map(Number).sort(function(e,t){return e-t}),o.forEach(function(e,t){i[e]=t}),a(e.data,function(e){e.index=i[e.time]}),l(o,t),e.indexes=o)}var u,d,p,_=i(796),f=i(26),m=i(797),g=i(799),y=i(800),v=i(44),b=i(21).Interval,S=i(38),w=i(801).visitObject,T=i(14).isObject;i(185),i(294),u=i(802).DatafeedRequestsCachedProcessor,d=i(202).timezoneIsAvailable,p=function(e){function t(e,t,i){return function(o){var r,a;o&&o.count()&&(r=n(t,e),a=1e3*s.getCurrentUTCTime(),r.moveTo(a),r.indexOfBar(a)>=0&&o.setLastBarClosed(!1)),i(o)}}function i(e,i,o,n,r){return s._cachedDatafeed.subscribe(e,i,o,t(e,i,n),r)}function o(e){return s._cachedDatafeed.unsubscribe(e)}function r(e,t,i){s.resolveSymbol(e,t,i)}var s=this;this._studiesCache={},this._sessionsLastDataCache={},this._metainfoCache=[],this._barsCoefficientsCache={},this._extrapolationManager=g,this._externalDatafeed=e,this._datafeedConfiguration=null,this._marketStatusWatchers={},this._resolveRequests={},this._callbacks={},this._serverTimeOffset=0,s._logMessage("Datafeed settings received: {0}".format(JSON.stringify(window.configurationData))),s._datafeedConfiguration=s._adoptConfigurationData(window.configurationData),s._fireEvent("configuration_received"),s._externalDatafeed.getServerTime&&s._externalDatafeed.getServerTime(function(e){s._serverTimeOffset=e-(new Date).valueOf()/1e3}),this._pointsetsManager=y,this._rangeExtensionData={},this._quotesInfo=[],this._depthInfo=[],this._fullNameSymbolInfoMap={},this._endOfData={},this._computeStudyCounter=0,this._cachedDatafeed=new u(e,p.createDWMAligner),this._extendedRange=function(e){return s._rangeExtensionData[e]&&s._rangeExtensionData[e].summary},this._extendedTime=function(e){return s._rangeExtensionData[e]&&s._rangeExtensionData[e].time},m.setupFeed({resolve:r,subscribe:i,unsubscribe:o,calculateHistoryDepth:this._externalDatafeed.calculateHistoryDepth?this._externalDatafeed.calculateHistoryDepth.bind(this._externalDatafeed):void 0})},p.createDWMAligner=function(e,i,n){var r,s,a;return o.enabled("disable_resolution_rebuild")||!b.isDWM(e)?null:(r=new v.Session,r.init("Etc/UTC","0000-0000:1234567"),s=t.get_timezone(i),a=new v.Session,a.init(s,n),f.Symbol.newBarBuilder(e,a,r))},p.prototype._barsCoefficients=function(e,t){if(0!==e.indexOf("="))return{};var i=e+t;return this._barsCoefficientsCache[i]||(this._barsCoefficientsCache[i]={}),this._barsCoefficientsCache[i]},p.prototype.destroy=function(){this._cachedDatafeed.destroy(),this._externalDatafeed=null},p.prototype.purgeCache=function(){this._endOfData={},this._resolveRequests={}},p.prototype.purgeDataCache=function(){this._cachedDatafeed.purgeCache()},p.prototype._logMessage=function(e){o.enabled("charting_library_debug_mode")&&console.log(e)},p.prototype._extendRange=function(e,t){
this._rangeExtensionData[e]||(this._rangeExtensionData[e]={}),void 0===this._rangeExtensionData[e].summary&&(this._rangeExtensionData[e].summary=0),this._rangeExtensionData[e].summary+=t},p.prototype.on=function(e,t){return this._callbacks.hasOwnProperty(e)||(this._callbacks[e]=[]),this._callbacks[e].push(t),this},p.prototype._fireEvent=function(e,t,i){var o,n;if(this._callbacks.hasOwnProperty(e)){for(o=this._callbacks[e],n=0;n<o.length;++n)o[n](t);i||(this._callbacks[e]=[])}},p.prototype._adoptConfigurationData=function(e){var t,i,o,n=TradingView.merge({},e),r=n.supported_resolutions;if(!r||0===r.length)return n.supported_resolutions=void 0,n;for(t=[],i=0;i<r.length;i++){if(o=r[i],-1!==t.indexOf(o))throw Error("Duplicating resolution `"+o+"`");t.push(o)}return n.supported_resolutions=t,n},p.prototype.supportedResolutions=function(){return this._datafeedConfiguration.supported_resolutions},p.prototype.supportedSymbolsTypes=function(){return this._datafeedConfiguration.symbols_types||[]},p.prototype.supportedExchangesList=function(){return this._datafeedConfiguration.exchanges||[]},p.prototype.futuresRegex=function(){return this._datafeedConfiguration.futures_regex||/$a/},p.prototype._findStudyObject=function(e){var t=e.split("@")[0],i=JSServer.studyLibrary.filter(function(i){return i.metainfo.id===e||i.metainfo.shortDescription===t});if(0===i.length)throw Error("Study `"+e+"` not found");return i[0]},p.prototype.getMarks=function(e,t,i,o,n){var r,s={red:6,green:5,blue:4,yellow:3};this._externalDatafeed.getMarks&&this._datafeedConfiguration.supports_marks&&(this._logMessage("Requesting bars marks: symbol {0}, resolution {1}, range [{2} ... {3}]".format(e.full_name,n,new Date(1e3*t).toUTCString(),new Date(1e3*i).toUTCString())),r=this,this._externalDatafeed.getMarks(e,t,i,function(t){var i,a,l=t.map(function(e){return e.time=parseInt(e.time),e});r._logMessage("Received bars marks: symbol {0}, resolution {1}, marks {2}".format(e.full_name,n,JSON.stringify(l))),i=p.createDWMAligner(n,e.timezone,e.session),a=l.map(function(e){return e.tickmark=null!==i?i.tradingDayToSessionStart(1e3*e.time)/1e3:e.time,e.direction=s[e.color],e.onClicked=function(){S.emit("onMarkClick",e.id)},e.label=!!e.label&&e.label[0],e}),o(a)},n))},p.prototype.getTimescaleMarks=function(e,t,i,o,n){if(this._externalDatafeed.getTimescaleMarks&&this._datafeedConfiguration.supports_timescale_marks){this._logMessage("Requesting timescale marks: symbol {0}, resolution {1}, range [{2} ... {3}]".format(e.full_name,n,new Date(1e3*t).toUTCString(),new Date(1e3*i).toUTCString()));var r=this;this._externalDatafeed.getTimescaleMarks(e,t,i,function(t){var i,s;r._logMessage("Received timescale marks: symbol {0}, resolution {1}, marks {2}".format(e.full_name,n,JSON.stringify(t))),i=p.createDWMAligner(n,e.timezone,e.session),s=t.map(function(e){return e.tickmark=null!==i?i.tradingDayToSessionStart(1e3*e.time)/1e3:e.time,e}),o(s)},n)}},p.prototype._computeStudy=function(e,t,i,o,n,r,s,a,l,c){function h(e,t,i){var o,n,r,s,l=e.time,c="number"==typeof t?[t]:t
;for(o=0;o<c.length;++o)n=c[o],n&&"object"==typeof n&&(_["plot_"+o]=n.offset,n=n.value,m++),"number"==typeof n&&isNaN(n)&&(n=void 0),c[o]=n;r=p.length-1,s=r<0||l>p[r].value[0],s?p.push({index:p.length,value:[l].concat(c)}):p[r].value=[l].concat(c),u||a([p[p.length-1]],s,p.length,_,i)}var u=!0,d=this._computeStudyCounter++,p=[],_={},m=0,g=!1,y=!1,v=this,b=function(a){var d;if(f.Symbol.parsePeriod(o).isIntraday&&!a.has_intraday)return void l("Unsupported resolution. Did you forget to set has_intraday to true?");if(d=new f.StudyEngine({tickerid:i,symbolInfo:a,period:o,body:t,sessionId:e,onErrorCallback:l,rangeExtension:{getRangeExtensionCount:v._extendedRange.bind(this,e),getRangeExtensionTime:v._extendedTime.bind(this,e)},input:function(e){return r[e]},out:function(e,t){h(e,t,a)},nonseriesOut:function(e,t){y=!0,c(t,a)},setNoMoreData:function(){g=!0},recalc:function(e,t){u=!1,p.endOfData=g,(!y||p.length>0)&&s(p,m>0?_:void 0,a,t)}}),!v._studiesCache[e]||!v._studiesCache[e][n])throw Error("This should never happen");v._studiesCache[e][n].engine=d},S=function(e){l(e)},w=function(){return v._studiesCache[e]&&v._studiesCache[e][n]&&v._studiesCache[e][n].activeResolve===d};v._studiesCache[e][n].activeResolve=d,this.resolveSymbol(i,function(){w()&&b.apply(v,arguments)},function(){w()&&S.apply(v,arguments)})},p.prototype._createStudy=function(e,t,i,o,n,r,s){function a(e){var t,i,r;if(Array.isArray(e))return e;for(t=[],i=u._studiesCache[o][n].metainfo.inputs,r=0;r<i.length;r++)t[r]=e[i[r].id];return t}function l(i,s,a){TradingView.ChartapiMessagerInstances[o].onDataUpdate(n,r,u._convertBarsTimeToUnix(i),s,a,u._extendedRange(e,t)),TradingView.ChartapiMessagerInstances[o].onStudyCompleted(n,r)}var u=this;s=a(s),TradingView.ChartapiMessagerInstances[o].onStudyLoading(n,r),u._computeStudy(o,i,e,t,n,s,function(e,t,i){l(e,t?{data:{offsets:t}}:null,i)},function(i,s,a,l,c){var h=l?{data:{offsets:l}}:null;TradingView.ChartapiMessagerInstances[o].onDataUpdate(n,r,u._convertBarsTimeToUnix(i),h,c,u._extendedRange(e,t))},function(e){TradingView.ChartapiMessagerInstances[o].onStudyError(n,e)},function(e,t){var i;switch(e.type){case"projection":this._updateProjectionData(o,n,r,e);break;case"study_graphics":i={data:e.data,indexes:[]},h(i,u._sessionsLastDataCache[o]),l([],i,t);break;case"non_series_data":i={data:e.data,indexes:[]},c(i,u._sessionsLastDataCache[o]),l([],i,t);break;default:console.warn("unsupported non-series data type for study "+e.type)}}.bind(this))},p.prototype.stopSources=function(e){var t,i;for(t in this._studiesCache[e])(i=this._studiesCache[e][t])&&(i.engine&&i.engine.stop(),i.activeResolve=-1);m.unsubscribeUnused()},p.prototype.recreateSources=function(e,t,i,o){var n,r;this.stopSources(i);for(n in this._studiesCache[i])(r=this._studiesCache[i][n])&&(r.symbol=e,r.resolution=t,"series"===r.type&&this.createSeries(e,t,i,n,r.turnaround,o));for(n in this._studiesCache[i])(r=this._studiesCache[i][n])&&"study"===r.type&&this._createStudy(e,t,r.studyObject,i,n,r.turnaround,r.inputs)},p.prototype.removeStudy=function(e,t){
this._studiesCache[e]&&this._studiesCache[e][t]&&this._studiesCache[e][t].engine&&(this._studiesCache[e][t].engine.stop(),m.unsubscribeUnused()),this._studiesCache[e][t]=null},p.prototype.removeSeries=function(e,t){this.removeStudy(e,t)},p.prototype.recomputeStudy=function(e,t,i,o){var n=this._studiesCache[i][e];if(!n)throw Error("This should never happen");n.inputs=t,n.turnaround=o,n.engine&&n.engine.stop(),this._createStudy(n.symbol,n.resolution,n.studyObject,i,e,o,t)},p.prototype._convertBarsTimeToUnix=function(e){var t,i,o=[];for(t=0;t<e.length;++t)i={index:e[t].index,value:[].concat(e[t].value)},i.value[0]/=1e3,o.push(i);return o.endOfData=e.endOfData,o},p.prototype.createStudy=function(e,t,i,o,n,r,s){var a=this._findStudyObject(r),l=new a.constructor;this._studiesCache[i]=this._studiesCache[i]||{},this._studiesCache[i][o]={studyObject:l,symbol:e,resolution:t,guid:o,type:"study",inputs:s,metainfo:a.metainfo,turnaround:n},this._createStudy(e,t,l,i,o,n,s)},p.prototype.purgeRangeExtensionData=function(e){e?this._rangeExtensionData[e]={summary:0}:this._rangeExtensionData={}},p.prototype.ensureExtendedTo=function(e,t,i){var o,n=this._studiesCache[t][e];if(!n)throw Error("This should never happen");this.purgeRangeExtensionData(t),this._rangeExtensionData[t]||(this._rangeExtensionData[t]={}),this._rangeExtensionData[t].time=i,o=this,setTimeout(function(){o.recreateSources(n.symbol,n.resolution,t,!0)},0)},p.prototype.extendSeriesRange=function(e,t,i){var o,n,r,s,a=this._studiesCache[t][e];if(!a)throw Error("This should never happen");if(this._isEndOfData(t,e,a.turnaround))return o=a.engine.runner.host.symbolInfo.data_status,void setTimeout(function(){TradingView.ChartapiMessagerInstances[t].onSeriesCompleted(e,a.turnaround,o)},0);i+=10,n=this._barsCoefficients(a.symbol,a.resolution),r=n.barsCoefficient||1,this._extendRange(t,i*r),n.barsCoefficient||(n.expectedBarsCount=this._extendedRange(t)),s=this,setTimeout(function(){s.recreateSources(a.symbol,a.resolution,t,!0)},0)},p.prototype._updateProjectionData=function(e,t,i,o){var n=o.barsetSize?this._convertBarsTimeToUnix([{index:o.barsetSize-1,exTime:o.lastBar?o.lastBar[0]/1e3:0,value:o.lastBar}]):null;TradingView.ChartapiMessagerInstances[e].onProjectionUpdate(t,i,o,n)},p.prototype.updateSeriesTurnaround=function(e,t,i){this._studiesCache[e]||(this._studiesCache[e]={}),this._studiesCache[e][t]||(this._studiesCache[e][t]={}),this._studiesCache[e][t].type="series",this._studiesCache[e][t].turnaround=i},p.prototype.seriesTurnaround=function(e,t){return this._studiesCache[e]&&this._studiesCache[e][t]&&this._studiesCache[e][t].turnaround},p.prototype.createSeries=function(e,t,i,n,r,s){function a(e,o,n){l._extrapolationManager.storage(i,e.full_name,t).setLastBarTime(o,n)}var l,c=e,h=new f.OHLCV;this._studiesCache[i]=this._studiesCache[i]||{},this._sessionsLastDataCache[i]=null,this._studiesCache[i][n]={symbol:e,resolution:t,studyObject:h,guid:n,type:"series",turnaround:r},TradingView.ChartapiMessagerInstances[i].onSeriesLoading(n,r),l=this,
this._computeStudy(i,h,c,t,n,[],function(o,c,h,u){var d,p,_,f,m,g;if(!l._studiesCache[i][n])throw Error("This should never happen");if(l._sessionsLastDataCache[i]=o,d=l._convertBarsTimeToUnix(o),p=d.length>0?1e3*d[0].value[0]:void 0,u.nextTime&&(!p||u.nextTime<p/1e3))return void l.ensureExtendedTo(n,i,u.nextTime);0!==d.length&&(_=l._barsCoefficients(e,t),_.expectedBarsCount&&_.barsCount&&(_.barsCoefficient=Math.min(Math.max(_.barsCoefficient||1,parseInt(_.expectedBarsCount/(d.length-_.barsCount)+.5)),100)),_.barsCount=d.length,f=d[d.length-1],a(h,d.length-1,1e3*f.value[0]),l.rebuildExtrapolatedData(i,e.name,t,h,1e3*f.value[0]),s&&TradingView.ChartapiMessagerInstances[i].onSeriesClearData(n,r),TradingView.ChartapiMessagerInstances[i].onTimescaleUpdate(n,r,d,h,0),m=l._extrapolationManager.storage(i,h.full_name,t),Promise.resolve().then(function(){l._pointsetsManager.broadcastPointsetsUpdates(h.full_name,t,o,m,h,function(e,t){TradingView.ChartapiMessagerInstances[i].onPointsetDataUpdate(e,r,t,h)})})),g=0===d.length||u&&u.endOfData,g&&(l._logMessage("Series has no more data on server: {0}".format(h.full_name)),l._setEndOfData(i,n,r),0===d.length&&TradingView.ChartapiMessagerInstances[i].onSeriesClearData(n,r)),TradingView.ChartapiMessagerInstances[i].onSeriesCompleted(n,r,h.data_status)},function(e,o,s,c,h){var u,d=l._convertBarsTimeToUnix(e),p=d[d.length-1];if(o){if(!l._studiesCache[i][n])throw Error("This should never happen");u=s-1,l._logMessage("New bar arrived: symbol {0}, bar {1}".format(h.full_name,JSON.stringify(p))),TradingView.ChartapiMessagerInstances[i].onTimescaleUpdate(n,r,[p],h,u),a(h,u,1e3*p.value[0]),l.rebuildExtrapolatedData(i,h.full_name,t,h,1e3*p.value[0])}else l._logMessage("Last bar update: symbol {0}, bar {1}".format(h.full_name,JSON.stringify(p))),TradingView.ChartapiMessagerInstances[i].onDataUpdate(n,r,d,null,h);l._fireEvent("realtime_tick",e[e.length-1],!0)},function(e){l._logMessage("Series error: {0}".format(e)),TradingView.ChartapiMessagerInstances[i].onSeriesError(n,e),o.enabled("clear_bars_on_series_error")&&TradingView.ChartapiMessagerInstances[i].onSeriesClearData(n,r)},function(e,o){var s,c,h,u,d,p,_,f;if("projection"!==e.type)throw Error("unexpected non-series data type for series "+e.type);if(s=e.projectionTime/1e3,c=-1,(e.data||[]).forEach(function(e){c=Math.max(c,e[0]||0)}),c=Math.min(c,100),h=e.barsetSize,s&&c>=0&&h&&e.lastBar){for(u=[],d=0;d<=c;d++)u.push(s+.001*d);p=e.lastBar.slice(0),p[0]=p[0]/1e3,TradingView.ChartapiMessagerInstances[i].onTimescaleUpdate(n,r,[{index:h-1,value:p}],o,h-1,u),_=h+c,f=1e3*Math.trunc(u[c]),a(o,_,f),l.rebuildExtrapolatedData(i,o.full_name,t,o,f)}l._updateProjectionData(i,n,r,e)})},p.prototype.onMoreTickmarksRequested=function(e,t,i,o,n){this._extrapolationManager.storage(e,i.full_name,o).onTickmarksNeeded(i,n)},p.prototype.removePointset=function(e){this._pointsetsManager.removePointset(e)},p.prototype.rebuildExtrapolatedData=function(e,t,i,o,n){this._extrapolationManager.storage(e,o.full_name,i).rebuild(n,o)},
p.prototype.createPointset=function(e,t,i,o,n,r){var s=this._extrapolationManager.storage(e,o.full_name,n);this._pointsetsManager.createPointset(t,i,n,r,s,o)},p.prototype.studiesMetadata=function(){return 0===this._metainfoCache.length&&(this._metainfoCache=JSServer.studyLibrary.map(function(e){return e.metainfo})),this._metainfoCache},p.prototype.searchSymbols=function(e,t,i,o){function n(e){r._logMessage("Symbol search response: {0}".format(JSON.stringify(e))),o(e)}this._logMessage("Symbol search requested: search string `{0}`, exchange: `{1}`, type `{2}`".format(e,t,i));var r=this;this._externalDatafeed.searchSymbols(e,t,i,n)},p.prototype.resolveSymbol=function(e,t,i){var o,n=m.parseSymbol(e).symbol;this._resolveRequests[n]?o=this._resolveRequests[n]:(o=this.resolveSymbolInternal(n),this._resolveRequests[n]=o),o.done(t).fail(i)},p.prototype.resolveSymbolInternal=function(e){var t,i=this,o=$.Deferred();return this._logMessage("Symbol resolve requested: `{0}` ".format(e)),t=!0,this._externalDatafeed.resolveSymbol(e,function(n){t&&console.warn("`resolveSymbol` should return result asynchronously. Use `setTimeout` with 0 interval to execute the callback function."),i._logMessage("Symbol resolved: `{0}`, SymbolInfo in server response {1}".format(e,JSON.stringify(n))),s(n),r(n),i._logMessage("Symbol info after post-processing: `{0}`, SymbolInfo {1}".format(e,JSON.stringify(n))),i._fullNameSymbolInfoMap[n.full_name]=n,o.resolve(n)},function(t){i._logMessage("Symbol resolve failed: `{0}`, reason: `{1}`".format(e,t)),o.reject(t)}),t=!1,o.promise()},p.prototype._createMarketStatusWatchers=function(e,t){void 0===this._marketStatusWatchers[e]&&(this._marketStatusWatchers[e]={});var i=this;t.forEach(function(t){void 0===i._marketStatusWatchers[e][t]&&(i._marketStatusWatchers[e][t]=new _(i,e,t))})},p.prototype._removeMarketStatusWatchers=function(e){var t=this;Object.keys(this._marketStatusWatchers[e]||{}).forEach(function(i){t._marketStatusWatchers[e][i].stop()}),this._marketStatusWatchers[e]={}},p.prototype._stopQuotesSubscription=function(e){this._quotesInfo[e].listenerGUID&&(this._externalDatafeed.unsubscribeQuotes(this._quotesInfo[e].listenerGUID),this._quotesInfo[e].listenerGUID=void 0),this._removeMarketStatusWatchers(e)},p.prototype._startQuotesSubscription=function(e){function t(t,i){var o=r._marketStatusWatchers[e][t.n];t.symbolname=t.n,t.status=t.s,t.values=t.v,t.values.change=t.v.ch,t.values.last_price=t.v.lp,t.values.change_percent=t.v.chp,t.values.current_session=t.v.cs||o&&o.marketStatus(),t.values.pricescale=i.pricescale,t.values.minmov=i.minmov,t.values.minmove2=i.minmove2||0,t.values.fractional=i.fractional||!1,o&&t.v.cs&&o.stop(),TradingView.ChartapiMessagerInstances[e].onQuotesData([e].concat([t]))}function i(e){e.forEach(function(e){void 0!==n[e.n]?null!==n[e.n]&&t(e,n[e.n]):r.resolveSymbol(e.n,function(i){n[e.n]=i,t(e,i)},function(){n[e.n]=null})})}var n={},r=this,s=this._quotesInfo[e].symbols
;0!==s.length&&(this._externalDatafeed.getQuotes&&!o.enabled("charting_library")?this._externalDatafeed.getQuotes(s,function(t){r._quotesInfo[e]&&(i(t),r._quotesInfo[e].listenerGUID=e,r._externalDatafeed.subscribeQuotes(s,r._quotesInfo[e].fastSymbols,i,r._quotesInfo[e].listenerGUID))},function(e){}):!this._externalDatafeed.getQuotes&&o.enabled("trading_terminal")&&setTimeout(function(){i(s.map(function(e){return{n:e,s:"ok",v:{}}}))}),this._createMarketStatusWatchers(e,s))},p.prototype._restartQuotesSubscription=function(e){this._stopQuotesSubscription(e),this._startQuotesSubscription(e)},p.prototype.quoteCreateSession=function(e){this._quotesInfo[e]={symbols:[],fastSymbols:[],listenerGUID:void 0}},p.prototype.quoteDeleteSession=function(e){this._stopQuotesSubscription(e),this._quotesInfo[e]=null},p.prototype.quoteSetFields=function(e,t){},p.prototype.quoteAddSymbols=function(e,t){this._quotesInfo[e].symbols=this._filteredSymbols(this._quotesInfo[e].symbols.concat(t)),this._restartQuotesSubscription(e)},p.prototype.quoteRemoveSymbols=function(e,t){this._quotesInfo[e].symbols=this._quotesInfo[e].symbols.filter(function(e){return t.indexOf(e)<0}),this._restartQuotesSubscription(e)},p.prototype.quoteFastSymbols=function(e,t){this._quotesInfo[e].fastSymbols=this._filteredSymbols(t),this._restartQuotesSubscription(e)},p.prototype.quoteHibernateAll=function(e){},p.prototype._stopDepthSubscription=function(e){this._depthInfo[e].listenerGUID&&(this._externalDatafeed.unsubscribeDepth(this._depthInfo[e].listenerGUID),this._depthInfo[e].listenerGUID=void 0)},p.prototype._startDepthSubscription=function(e){function t(e){return e.map(function(e){return{p:e.price,v:e.volume}})}function i(e){var i={};return i.s=r,i.bids=t(e.bids),i.asks=t(e.asks),i}function o(t){t.snapshot?TradingView.ChartapiMessagerInstances[e].onDepthData([e].concat([i(t)])):TradingView.ChartapiMessagerInstances[e].onDepthUpdate([e].concat([i(t)]))}var n=this,r=this._depthInfo[e].symbol;r&&this._fullNameSymbolInfoMap[r]&&this._externalDatafeed.subscribeDepth&&(n._depthInfo[e].listenerGUID=this._externalDatafeed.subscribeDepth(r,function(t){n._depthInfo[e]&&o(t)}))},p.prototype._restartDepthSubscription=function(e){this._stopDepthSubscription(e),this._startDepthSubscription(e)},p.prototype.depthCreateSession=function(e){this._depthInfo[e]={symbol:null,listenerGUID:void 0}},p.prototype.depthDeleteSession=function(e){this._depthInfo[e].symbol=null,this._stopDepthSubscription(e),delete this._depthInfo[e]},p.prototype.depthSetSymbol=function(e,t){this._depthInfo[e].symbol=t,this._restartDepthSubscription(e)},p.prototype._filteredSymbols=function(e){var t=[];return e.forEach(function(e){e instanceof Object||t.indexOf(e)<0&&t.push(e)}),t},p.prototype._isEndOfData=function(e,t,i){var o=e+"!"+t+"@"+i;return!!this._endOfData[o]},p.prototype._setEndOfData=function(e,t,i){var o=e+"!"+t+"@"+i;this._endOfData[o]=!0},p.prototype.alignTimePoint=function(e,t,i){return o.enabled("disable_resolution_rebuild")?e:n(t,i).alignTimeIfPossible(1e3*e)/1e3},
p.prototype.serverTimeOffset=function(){return this._serverTimeOffset},p.prototype.getCurrentUTCTime=function(){return(new Date).valueOf()/1e3+this._serverTimeOffset},e.exports=p}).call(t,i(34),i(4))},function(e,t,i){"use strict";(function(t){var o=i(44),n={},r=function(e,i,r){function s(){var e={};e.symbolname=_,e.status="ok",e.values={},e.values.current_session=d,n[_]=d,TradingView.ChartapiMessagerInstances[f].onQuotesData([f].concat([e]))}function a(e,i,n){var r=t.get_timezone(i);c=(new o.Session).init(r,e),h=n,m=setTimeout(l,6e4),l(),s()}function l(){var e,t;if(c){if(h)return void(d="out_of_session");e=o.isTradingNow(new Date,c),t=e?"market":"out_of_session",t!==d&&(d=t,s())}}var c,h,u={},d=n[r]||"out_of_session",p=!1,_=r,f=i,m=null;return e.resolveSymbol(r,function(e){p||a(e.session,e.timezone,e.expired)},function(){}),u.stop=function(){p=!0,m&&clearTimeout(m)},u.marketStatus=function(){return d},u};e.exports=r}).call(t,i(34))},function(e,t,i){"use strict";(function(t){var o=i(798).HeikenAshi,n=i(21).Interval,r=function(){function e(e){this.host=e,this.cache={}}function r(e){var t=e.indexOf(",");return-1===t?e:e.slice(0,t)}function s(e,t,i,o,n,r){return n+e+t+i+(a(o)?"_":"")+r}function a(e){return e.has_empty_bars||e.force_session_rebuild}function l(e){if(0!==e.indexOf("="))return{symbol:e};var t;try{t=JSON.parse(e.slice(1))}catch(t){return{symbol:e}}return t.type&&(0===t.type.indexOf("BarSetHeikenAshi@tv-basicstudies-")?t.builder=new o:console.error("unknown builder type: "+t.type)),"string"!=typeof t.symbol&&(t.session=t.symbol.session||t.session,t.symbol=t.symbol.symbol),t}function c(t){e.instance=new e(t),p.setupFeed(e.instance)}var h,u,d,p=i(26),_=i(44),f=p.Symbol,m=p.StudyEngine,g=p.BarBuilder,y=p.BarSet;return e.prototype.getCache=function(e){return this.cache[e]},e.prototype.putCache=function(e,t){this.cache[e]=t},e.prototype.subscribe=function(e,t,i,o,n,r,a,l,c){var h=s(e,t,i,a,l,o),u=this.getCache(h);return u||(u=this.createItem(e,t,i,a,c,l,o),this.putCache(h,u)),u.listeners.addListener(n,r),{key:h,listener:n}},e.prototype.unsubscribe=function(e){var t=this.getCache(e.key);t&&t.listeners.removeListener(e.listener)},e.prototype.removeUnused=function(){var e,t,i,o,n,r=[];for(e in this.cache)this.cache[e]&&(t=this.cache[e],0===t.listeners.listenersCount()&&r.push(e));if(0!==r.length){for(i=0;i<r.length;i++)o=r[i],n=this.cache[o],this.cache[o]=null,n.stop();this.removeUnused()}},e.prototype.rebuildFrom=function(e,t,i){var o,n,r,s,a=f.parsePeriod(e),l=f.parsePeriod(t);if(""!==a.resolution&&!a.isSeconds){if(i.has_weekly_and_monthly)return a.resolution;if(void 0===i.has_daily||i.has_daily)return"D";""!==l.resolution&&(l.resolution="",l.interval=i.intraday_multipliers?i.intraday_multipliers[0]:1)}if(a.isIntraday&&void 0!==i.has_intraday&&!i.has_intraday)return"";if(a.isSeconds&&!i.has_seconds)return"";if(o=""!==a.resolution?l.interval:""===l.resolution?Math.min(a.interval,l.interval):a.interval,(n=a.isIntraday?i.intraday_multipliers:i.seconds_multipliers)&&-1===n.indexOf(o)){
for(r=n.length-1;r>=0;r--)if(s=+n[r],o%s==0)return s+(a.isSeconds?"S":"");return""}return o+(a.isSeconds?"S":"")},e.prototype.createItem=function(e,t,i,o,s,c,p){var _,f,m,y,v,b,S=new d,w=l(e);return w.builder?new u(S,w.symbol,t,i,w.builder,o,s,c):(_=r(t),f=this.rebuildFrom(_,r(i),o),m=a(o),!n.isEqual(_,f)||m?(y=o.has_empty_bars,v=$.extend({},o),m&&(v.has_empty_bars=!1,v.force_session_rebuild=!1),new u(S,w.symbol,t,f,new g(t,y),v,s,c,p)):(b=w.session&&"extended"!==w.session,new h(S,w.symbol,t,i,b,this.host,o,s,p)))},h=function(e,t,i,o,n,s,a,l,c){this.listeners=e,this.host=s;var h=this;this.host.resolve(t,function(e){n&&e.regular_session&&(e.session=e.regular_session);var s=h.calculateFromTo(e,c||o||i,t,l);h.subs=h.host.subscribe(e,r(i),s,function(e){h.listeners.fire(e)},function(e){h.listeners.onError(e)})},function(e){h.listeners.onError(e)})},h.prototype._createDWMAligner=function(e,i){var o=t.get_timezone(i.timezone),n=new _.Session;return n.init(o,i.session),f.newBarBuilder(e,n,n)},h.prototype.stop=function(){this.subs&&this.host.unsubscribe(this.subs)},h.prototype.calculateFromTo=function(e,i,o,n){var r,s,a,l,c,h,u,d,p=f.parsePeriod(i),m=(new Date).valueOf(),g=e.expired?t.cal_to_utc(t.get_timezone(e.timezone),new Date(1e3*e.expiration_date))||m:m;return""===p.resolution?(s=p.interval,a="D"):"S"===p.resolution?(s=10*p.interval,a=""):(l="D"===p.resolution?1:"W"===p.resolution?5:30,s=12*l*p.interval,a="M"),p.range?(s=p.range.interval,a=p.range.resolution):this.host.calculateHistoryDepth&&(c=this.host.calculateHistoryDepth(i,a,s))&&(s=c.intervalBack||s,a=void 0===c.resolutionBack?a:c.resolutionBack),h=e.sessionString||e.session,r=_.alignPeriodsBack(h,a,s,1,g),n&&n.getRangeExtensionTime&&(u=n.getRangeExtensionTime())&&(r=Math.min(1e3*u,r)),n&&n.getRangeExtensionCount&&(d=n.getRangeExtensionCount())>0&&(r=_.alignPeriodsBack(h,p.resolution,p.interval,d,r)),{from:r,to:g+6e4}},u=function(e,t,i,o,n,r,s,a,l){if(this.listeners=e,this.isRecalculated=!1,""===o)return console.error("unsupported resolution for rebuild: "+i),void this.listeners.onError("unsupported resolution for rebuild: "+i);this.symbolInfo=r;var c=this;this.engine=new m({tickerid:t,period:o,periodBase:i,body:n,sessionId:a,symbolInfo:r,rangeExtension:s,periodForInitialRange:l,recalc:function(e,t){c._recalc(t)},out:function(e,t){c._out(e,t)},nonseriesOut:function(e,t){c._nonseriesOut(e,t)},setNoMoreData:function(){c.barset&&(c.barset.endOfData=!0)},onErrorCallback:function(e){c.listeners.onError(e)}})},u.prototype.stop=function(){this.engine?this.engine.stop():console.error("Internal library error 0x1")},u.prototype._recalc=function(e){this.isRecalculated&&console.error("recalc called twice!"),this.barset||(this.barset=new y(this.symbolInfo)),e&&(this.barset.nextTime=e.nextTime,this.barset.endOfData=e.endOfData),this.listeners.fire(this.barset),this.isRecalculated=!0},u.prototype._nonseriesOut=function(e,t){var i=Object.assign({},t);i.nonseries=!0,i.data=t.bars,delete i.bars,i.barsetSize=this.barset?this.barset.count():0,
i.lastBar=this.barset?this.barset.bar(this.barset.count()-1):null,this.listeners.fire(i,!0)},u.prototype._out=function(e,t){var i,o,n,r,s,a,l,c=t[0];if(!isNaN(c)){if(i={time:c,open:t[1],high:t[2],low:t[3],close:t[4],volume:t[5],updatetime:t[6]},o=t[7],this.barset||(this.barset=new y(e.info)),(n=t[8])instanceof Array)for(r=0;r<n.length;r++)s=t[9],a=n[r],l={time:a,open:s,high:s,low:s,close:s,volume:0,updatetime:a},this.barset.add(l,!0),this.isRecalculated&&this.listeners.fire(this.barset);this.barset.add(i,o),this.barset.isBarClosed=o,this.isRecalculated&&this.listeners.fire(this.barset)}},d=function(){this.listeners=[]},d.prototype.listenersCount=function(){return this.listeners.reduce(function(e,t){return e+(t?1:0)},0)},d.prototype.addListener=function(e,t){this.listeners.push({dataListener:e,onErrorCallback:t}),this.barset&&e(this.barset),this.errorMsg&&t(this.errorMsg)},d.prototype.removeListener=function(e){var t,i=this.listeners.filter(function(t){return t.dataListener===e});0!==i.length&&(t=this.listeners.indexOf(i[0]),delete this.listeners[t])},d.prototype.onError=function(e){var t,i,o,n;for(this.errorMsg=e||"unspecified error",t=this.listeners,i=t.length,o=0;o<i;o++)(n=t[o])&&n.onErrorCallback&&n.onErrorCallback(e)},d.prototype.fire=function(e,t){var i,o,n,r;for(t||(this.barset=e),i=this.listeners,o=i.length,n=0;n<o;n++)(r=i[n])&&r.dataListener(e)},{setupFeed:c,parseSymbol:l,unsubscribeUnused:function(){e.instance.removeUnused()}}}();e.exports=r}).call(t,i(34))},function(e,t,i){"use strict";var o,n;Object.defineProperty(t,"__esModule",{value:!0}),i.d(t,"HeikenAshi",function(){return n}),o=i(26),i.n(o),n=function(){function e(){}return e.prototype.main=function(e){var t,i,n,r,s=e.new_var(o.Std.open(e)),a=e.new_var(o.Std.close(e)),l=s.get(1),c=a.get(1),h=o.Std.ohlc4(e),u=o.Std.na(s.get(1))?(o.Std.open(e)+o.Std.close(e))/2:(l+c)/2;return s.set(u),a.set(h),t=o.Std.max(o.Std.high(e),o.Std.max(u,h)),i=o.Std.min(o.Std.low(e),o.Std.min(u,h)),n=o.Std.volume(e),r=e.symbol,[r.time,u,t,i,h,n,r.updatetime,r.isBarClosed]},e}()},function(e,t,i){"use strict";var o=function(){function e(e,t,i){return e+","+t+","+i}function t(t,i,o){delete n[e(t,i,o)]}function o(t,i,o){function s(e){return"undefined"!=typeof TradingView&&TradingView.ChartapiMessagerInstances?n[e]=new a(TradingView.ChartapiMessagerInstances[t],l.pureResolution):n[e]=new a(null,l.pureResolution),n[e]}var l=r.Symbol.parsePeriod(o),c=e(t,i,l.pureResolution);return n[c]?n[c]:s(c)}var n={},r=i(26),s=i(44),a=function(e,t,i){this._chartApiMessager=e,this._lastRealBarTime=null,this._lastRealBarIndex=null,this._resolution=t,this._extrapolatedBarsCache=[],this._onReadyCallbacks=[],this._requestedAmountOfBars=0,this._maxDepth=i||100};return a.prototype.ready=function(){return null!==this._lastRealBarIndex},a.prototype.rebuild=function(e,t){this._lastRealBarTime=e;var i=Math.max(this._extrapolatedBarsCache.length,this._requestedAmountOfBars);this._extrapolatedBarsCache=[],this.ensureExtrapolatedToBar(t,i)},a.prototype.historyExtrapolator=function(){
return void 0===this._historyExtrapolator&&(this._historyExtrapolator=new a(null,this._resolution,Math.max(this._maxDepth,1500))),this._historyExtrapolator},a.prototype.getPointTimeUTC=function(e,t,i){var o,n;return 0===t?e:!this.ready()||e<this._lastRealBarTime/1e3?(this.historyExtrapolator().setLastBarTime(0,1e3*e),this.historyExtrapolator().getPointTimeUTC(e,t,i)):(o=0===this._extrapolatedBarsCache.length||e===this._lastRealBarTime/1e3,n=o?-1:this.indexOfBar(e,i)-this._lastRealBarIndex-1,this.ensureExtrapolatedToBar(i,n+t+1),this._extrapolatedBarsCache[n+t])},a.prototype.findDistanceInBars=function(e,t,i){return e===t?0:(this.historyExtrapolator().setLastBarTime(0,1e3*e),this.historyExtrapolator().indexOfBar(t,i))},a.prototype.indexOfBar=function(e,t){this._ensureExtrapolatedToTime(t,1e3*e);var i=s.lower_bound(this._extrapolatedBarsCache,e,function(e,t){return e>t?1:e<t?-1:0});return-1===i?i:this._lastRealBarIndex+i+1},a.prototype._extrapolateData=function(e,t){var i,o,n;if(!this._lastRealBarTime)throw Error("No real bars known, so cannot extrapolate anything");if(!(i=t(this._lastRealBarTime))||0===i.length)return void(null!==this._lastRealBarIndex&&null!==this._chartApiMessager&&this._chartApiMessager.onTickmarksUpdated(this._lastRealBarIndex+1,this._extrapolatedBarsCache,e,this._resolution));for(o=0;o<i.length;++o)i[o]=i[o]/1e3;for(i[0]===this._lastRealBarTime/1e3&&(i=i.slice(1)),this._extrapolatedBarsCache=i,n=i.slice(0),n.sort(),o=0;o<n.length-1;++o)n[o]===n[o+1]&&console.error("Duplicating extrapolated bars: duplicated "+new Date(1e3*n[o]));null!==this._lastRealBarIndex&&null!==this._chartApiMessager&&this._chartApiMessager.onTickmarksUpdated(this._lastRealBarIndex+1,i,e,this._resolution)},a.prototype.onTickmarksNeeded=function(e,t){if(this.ready())this.ensureExtrapolatedToBar(e,t);else{var i=this;this._onReadyCallbacks.push(function(){i.ensureExtrapolatedToBar(e,t)})}},a.prototype.ensureExtrapolatedToBar=function(e,t){var i=this;return this._requestedAmountOfBars=t,this._extrapolateData(e,function(o){return i._extrapolatedBarsCache.length>=t||!i._shouldExtrapolateMore()?null:s.extrapolateBarsFrontByCount(i.newBarBuilder(e),o,t)})},a.prototype._ensureExtrapolatedToTime=function(e,t){var i=this;return this._extrapolateData(e,function(o){var n,r;return o>=t||!i._shouldExtrapolateMore()?null:(n=2e3,r=s.extrapolateBarsFrontToTime(i.newBarBuilder(e),o,t,n),r[r.length-1]<t&&console.warn("Extrapolation error: not enough data created"),r)})},a.prototype.newBarBuilder=function(e){var t=r.Symbol.newSession(e.timezone,e.session);return r.Symbol.newBarBuilder(this._resolution,t)},a.prototype._shouldExtrapolateMore=function(){return this._extrapolatedBarsCache.length<this._maxDepth},a.prototype.setLastBarTime=function(e,t){(null===this._lastRealBarIndex||this._lastRealBarIndex===e&&this._lastRealBarTime!==t)&&(this._extrapolatedBarsCache=[]),
this._extrapolatedBarsCache&&this._extrapolatedBarsCache.length&&this._lastRealBarIndex!==e&&(this._lastRealBarIndex>e?this._extrapolatedBarsCache=[]:this._lastRealBarTime!==t&&this._extrapolatedBarsCache.shift(e-this._lastRealBarIndex)),this._lastRealBarIndex=e,this._lastRealBarTime=t;for(var i=0;i<this._onReadyCallbacks.length;++i)this._onReadyCallbacks[i]();this._onReadyCallbacks=[]},{remove:t,storage:o}}();e.exports=o},function(e,t,i){"use strict";(function(t){var o=i(44),n=i(21).Interval,r=function(){function e(e,t){return e}function r(e,t){var i=m.get_timezone(e.timezone),n=new o.Session;return n.init(i,e.session),f.Symbol.newBarBuilder(t,n,n)}function s(t,i,o,n,r,s){var a,l,c,h,u=e(i,o);for(p.hasOwnProperty(u)||(p[u]=[]),a=[],l=0;l<n.length;++l)n[l][1]<0&&(n[l][1]=0),0!==n[l][1]?(c=r.getPointTimeUTC(n[l][0],n[l][1],s),a.push(c)):n[l][0]&&a.push(n[l][0]);h={guid:t,points:a},p[u].push(h)}function a(e){var t,i,o;for(t in p)for(i=p[t],o=0;o<i.length;++o)if(i[o].guid===e)return void i.splice(o,1)}function l(e,t,i,o,n){var r,s,a,l=[];for(r=0;r<e.points.length;++r){if(null==(s=e.points[r]))return null;if(null===(a=h(t,s,i,o,n)))return null;l.push({index:r,value:[a,s]})}return l}function c(t,i,o,n,r,s){var a,c,h,u,d=e(t,i);if(p.hasOwnProperty(d))for(a=p[d].length,c=0;c<a;++c)h=p[d][c],null!==(u=l(h,o,n,r,i))&&s(h.guid,u)}function h(e,t,i,n,s){var a,l;return 1e3*(t=r(n,s).alignTimeIfPossible(1e3*t)/1e3)<e[0].value[0]?-d(n,s,t,e[0].value[0]/1e3,i):(a=o.lower_bound(e,1e3*t,function(e,t){return e.value[0]>t?1:e.value[0]<t?-1:0}))>=0&&t<e[e.length-1].value[0]?(e[a].value[0]/1e3!==t&&0!==a&&a--,e[a].index):(l=i.indexOfBar(t,n),-1===l?null:l)}function u(e,t,i,o,n){function r(e,t){var i=new Date(1e3*e),o=new Date(1e3*t),n=12*(o.getFullYear()-i.getFullYear());return n-=i.getMonth()+1,n+=o.getMonth(),n<=0?0:n}var s,a,l,c,h,u,d,p,_,f,g,y,v,b,S;if(t.isMonths())s=r(o,n)/t.multiplier();else if(t.isWeeks())a=Math.ceil((n-o)/604800),s=Math.ceil(a/t.multiplier());else{if(l=m.utc_to_cal(i.timezone,+new Date(1e3*o)),c=m.utc_to_cal(i.timezone,+new Date(1e3*n)),(h=(n-o)/86400)>4*(7-i.spec.weekEndsCount()))d=h/7,u=d*(7-i.spec.weekEndsCount());else{for(p=0,_={},f=l;f.valueOf()<=c.valueOf();f=m.add_days_considering_dst(i.timezone,f,1))g=m.get_day_of_week(f),void 0===_[g]&&(_[g]=i.spec.isWeekEnd(g)),_[g]&&p++;u=h-p}if(t.isDays())s=Math.ceil(u/t.multiplier());else{if(y=t.isHours()?60*t.multiplier()*60:t.isSeconds()?t.multiplier():60*t.multiplier(),h<1&&(v=i.spec.findSessionEntry(m.get_day_of_week(l),m.get_minutes_from_midnight(l)),b=i.spec.findSessionEntry(m.get_day_of_week(c),m.get_minutes_from_midnight(c)),v===b))return Math.ceil((n-o)/y);g=i.spec.entries()[0].dayOfWeek(),S=60*i.spec.entries().reduce(function(e,t){return e+(t.dayOfWeek()===g?t.length():0)},0),s=Math.ceil(u*S/y)}}return s}function d(e,t,i,s,a){var l,c,h=new n(t),d=m.get_timezone(e.timezone),p=new o.Session;return p.init(d,e.session),l=r(e,t),i=l.alignTimeIfPossible(1e3*i)/1e3,s=l.alignTimeIfPossible(1e3*s)/1e3,i>=s?0:(c=u(e,h,p,i,s),c>=1e3?c:a.findDistanceInBars(i,s,e))}
var p={},_="undefined"!=typeof window?window:t,f=i(26),m=_.PineJsCalendar?_.PineJsCalendar:i(34);return{createPointset:s,removePointset:a,broadcastPointsetsUpdates:c,tests:{approxBarsInterval:u,indexOfTime:h}}}();e.exports=r}).call(t,i(96))},function(e,t,i){"use strict";function o(e,t,i){return Object(a.isArray)(e)?n(e,t,i):Object(a.isObject)(e)&&(Object(a.isHashObject)(e)||i&&i.visitInstances)?r(e,t,i):e}function n(e,t,i){return e.map(function(e){var n=o(e,t,i),r=t(n);return void 0!==r?r:n})}function r(e,t,i){var n={};return Object.keys(e).forEach(function(r){var s=o(e[r],t,i),a=t(s);n[r]=void 0!==a?a:s}),n}function s(e,t,i){var n=o(e,t,i),r=t(n);return void 0!==r?r:n}var a;Object.defineProperty(t,"__esModule",{value:!0}),t.visitObject=s,a=i(14),i.n(a)},function(e,t,i){"use strict";function o(e,t){return e.ticker+"_"+t}function n(e){return new Date(e).toISOString()}var r,s,a,l,c,h;Object.defineProperty(t,"__esModule",{value:!0}),i.d(t,"DatafeedRequestsCachedProcessor",function(){return h}),r=i(21),s=i(78),a=i(26),i.n(a),l=i(4),i.n(l),i(73),c=function(){function e(e,t,i,o){this._cache={bars:[]},this._nextSubscriptionId=0,this._pendingSubscribers=[],this._subscribers=[],this._requesting=!1,this._leftDate=null,this._gaps=[],this._needPurgeCache=!1,this._realtimeOn=!1,this._endOfData=!1,this._resetCacheTimeout=null,this._errorMessage=null,this._datafeed=e,this._symbolInfo=t,this._resolution=i,this._dwmAligner=o}return e.prototype.destroy=function(){0!==this._subscribers.length&&console.warn("Destroying with not-empty state"),this._clearResetCacheTimeout(),this._unsubscribeRealtime(),this._purgeCache(),delete this._datafeed},e.prototype.addSubscription=function(e,t,i){var o=this,n=this._getNextSubscriptionId(),r=Math.floor(e.from/1e3),s=Math.floor(e.to/1e3);return this._pendingSubscribers.push({key:n,range:{from:r,to:s},onHistoryCallback:t,onErrorCallback:i}),this._clearResetCacheTimeout(),setTimeout(function(){return o._processNextPendingSubscriber()},0),n},e.prototype.removeSubscription=function(e){var t,i=this,o=this._pendingSubscribers.find(function(t){return t.key===e});return o?void this._pendingSubscribers.splice(this._pendingSubscribers.indexOf(o),1):(t=this._subscribers.find(function(t){return t.key===e}))?(this._subscribers.splice(this._subscribers.indexOf(t),1),void(this._subscribers.length||(this._symbolInfo.expired||this._symbolInfo.expiration_date?this._unsubscribeRealtime():this._resetCacheTimeout=setTimeout(function(){i._purgeCacheDelayed(),i._unsubscribeRealtime()})))):void console.warn("Unknown subscription symbol={0}, resolution={1}, key={2}".format(this._symbolInfo.name,this._resolution,e))},e.prototype._purgeCacheDelayed=function(){this._logMessage("Reset cache"),this._needPurgeCache=!0,this._clearResetCacheTimeout()},e.prototype._logMessage=function(e,t){(l.enabled("charting_library_debug_mode")||t)&&console.log("FEED [{0}|{1}]: {2}".format(this._symbolInfo.name,this._resolution,e))},e.prototype._clearResetCacheTimeout=function(){
null!==this._resetCacheTimeout&&(clearTimeout(this._resetCacheTimeout),this._resetCacheTimeout=null)},e.prototype._purgeCache=function(){this._cache={bars:[]},this._gaps=[],this._errorMessage=null,this._needPurgeCache=!1,this._leftDate=null,this._endOfData=!1},e.prototype._processNextPendingSubscriber=function(){var e,t,i,o,s,a;if(this._pendingSubscribers.length&&!this._requesting){if(this._needPurgeCache&&this._purgeCache(),e=this._pendingSubscribers.pop(),this._logMessage("Processing bars request {0} from {1} to {2} ".format(e.key,n(1e3*e.range.from),n(1e3*e.range.to))),this._errorMessage)return this._logMessage("Return error:"+this._errorMessage),e.onErrorCallback(this._errorMessage),void this._processNextPendingSubscriber();if((!this._leftDate||e.range.from<this._leftDate)&&(t=new r.Interval(this._resolution),i=(t.inMilliseconds(Date.now())||0)/1e3,o=!this._leftDate,s=!o&&!!this._cache.bars.length&&this._cache.bars[0].time/1e3-e.range.from<i,(o||!s)&&!this._endOfData))return this._pendingSubscribers.push(e),void this._ensureRequestedTo(e.range.from);a=this._moveSubscriberToRealtime(e),this._returnHistoryDataToSubscriber(e,a),this._subscribeRealtimeIfNeeded(),this._processNextPendingSubscriber()}},e.prototype._moveSubscriberToRealtime=function(e){var t={key:e.key,onHistoryCallback:e.onHistoryCallback,barset:null};return this._subscribers.push(t),t},e.prototype._subscribeRealtimeIfNeeded=function(){!this._subscribers.length||this._realtimeOn||this._symbolInfo.expired||this._symbolInfo.expiration_date||this._subscribeRealtime()},e.prototype._subscribeRealtime=function(){var e,t,i=this;this._symbolInfo.expired||this._realtimeOn||(e=function(e){i._dwmAligner&&(e.time=i._dwmAligner.tradingDayToSessionStart(e.time)),i._putToCacheNewBar(e),i._subscribers.forEach(function(t){var i=t.barset;if(null===i)throw Error("subscirber.barset is null");i.add(e),t.onHistoryCallback(i)})},t=function(){i._unsubscribeRealtime();var e=i._leftDate;i._purgeCache(),e&&i._ensureRequestedTo(e)},this._realtimeOn=!0,this._datafeed.subscribeBars(this._symbolInfo,this._resolution,e,o(this._symbolInfo,this._resolution),t),this._logMessage("Subscribed to realtime"))},e.prototype._unsubscribeRealtime=function(){!this._symbolInfo.expired&&this._realtimeOn&&(this._datafeed.unsubscribeBars(o(this._symbolInfo,this._resolution)),this._logMessage("Unsubscribed from realtime"),this._realtimeOn=!1)},e.prototype._returnHistoryDataToSubscriber=function(e,t){var i,o,r=e.range,s=l.enabled("cl_feed_return_all_data")?this._createBarset(this._leftDate||r.from):this._createBarset(r.from);s.count()>0?this._logMessage("Bars to return for request {0}: total {1} bars in [{2} ... {3}] ".format(e.key,s.count(),n(s.bars[0].time),n(s.bars[s.count()-1].time))):this._logMessage("Request {0}. Nothing to return.".format(e.key)),t.barset=s,i=this._inGapNextTime(r.from),i?(this._logMessage("Request {0} is in gap, nextTime = {1}".format(e.key,n(1e3*i))),
s.nextTime=i):0===s.count()&&(o=this._cache.bars.length&&this._cache.bars[this._cache.bars.length-1].time/1e3)&&r.from>o&&(this._logMessage("Request {0} is in gap, nextTime = {1}".format(e.key,n(1e3*o))),s.nextTime=o||void 0),this._endOfData&&null!==this._leftDate&&e.range.from<=this._leftDate&&(s.endOfData=!0),e.onHistoryCallback(s)},e.prototype._createBarset=function(e){var t=Object(s.lowerbound)(this._cache.bars,1e3*e,function(e,t){return e.time<t});return new a.BarSet(this._symbolInfo,this._cache.bars.slice(t))},e.prototype._ensureRequestedTo=function(t){var i,o,r,s=this;if(this._leftDate&&this._leftDate<t)return void this._processNextPendingSubscriber();i=!this._leftDate,this._requesting=!0,o=t,r=this._leftDate?this._leftDate-1:this._symbolInfo.expiration_date||Math.floor(e._now()/1e3),this._leftDate=t,this._logMessage("Requesting data: [{0} ... {1}] ".format(n(1e3*o),n(1e3*r))),this._datafeed.getBars(this._symbolInfo,this._resolution,o,r,function(e,t){s._requesting=!1,s._processBars(e,t)},function(e){s._requesting=!1,s._errorMessage=e||null,s._processNextPendingSubscriber()},i)},e.prototype._processBars=function(e,t){this._checkBars(e),this._alignBarsTime(e),e.length>0?this._processFullBarset(e,t):this._processEmptyBarset(t),this._processNextPendingSubscriber()},e.prototype._processEmptyBarset=function(t){this._logMessage("Receiving bars: barset is empty"),t&&t.nextTime?(this._logMessage("Next time received: `{0}`".format(n(1e3*t.nextTime))),this._addGap(t.nextTime),this._leftDate=Math.min(this._leftDate||e._now()/1e3,t.nextTime+1)):t&&t.noData?(this._logMessage("EOD received"),this._endOfData=!0,this._cache.bars.length&&(this._leftDate=this._cache.bars[0].time/1e3)):this._logMessage("nextTime or noData should present in metainfo when empty barset is returned")},e.prototype._processFullBarset=function(e,t){var i=e[0].time,o=e[e.length-1].time;this._logMessage("Receiving bars: total {0} bars in [{1} ... {2}] ".format(e.length,n(i),n(o))),null!==this._leftDate&&i<1e3*this._leftDate&&!l.enabled("cl_feed_return_all_data")&&this._logMessage("Returned more data than needed"),this._putToCache(e)?null!==this._leftDate&&this._cache.bars.length&&this._leftDate>this._cache.bars[0].time/1e3&&(this._leftDate=this._cache.bars[0].time/1e3):this._logMessage("Incremental update failed. Starting full update. Returned data should be in the requested range.",!0),t&&t.nextTime?console.warn("nextTime should be set when there is no data in the requested period only"):t&&t.noData&&console.warn("noData should be set when there is no data in the requested period and earlier only")},e.prototype._addGap=function(t){var i;this._gaps.find(function(e){return e.from===t})||(i=(this._cache.bars.length?this._cache.bars[0].time:e._now())/1e3,this._gaps.push({from:t,to:i}))},e.prototype._inGapNextTime=function(e){var t=this._gaps.find(function(t){return t.from<e&&t.to>e});return t?t.from:null},e.prototype._getNextSubscriptionId=function(){return this._nextSubscriptionId++},e.prototype._checkBars=function(e,t){var i,o;if(void 0===t&&(t=!1),
l.enabled("charting_library_debug_mode"))for(i=1;i<e.length;i++)e[i].time<=e[i-1].time&&(o="Wrong bars time: time {0} of bar {1} should be more than time {2} of bar {3}".format(e[i].time,i,e[i-1].time,i-1),t&&this._dwmAligner&&(o+="\nCheck that you provide DWM bars without time part, i.e. 00:00 GMT"),console.error(o))},e.prototype._putToCache=function(e){if(0===e.length)return!0;if(this._cache.bars.length===e.length&&this._cache.bars[0].time===e[0].time&&this._cache.bars[this._cache.bars.length-1].time===e[e.length-1].time)return this._logMessage("Time range of received data is the same as cached one. Skip the update."),!0;if(0!==this._cache.bars.length&&e[e.length-1].time===this._cache.bars[0].time&&this._cache.bars.splice(0,1),0!==this._cache.bars.length&&e[e.length-1].time>=this._cache.bars[0].time){var t=this._cache.bars[this._cache.bars.length-1].time===e[e.length-1].time;if(this._cache.bars=[],!t)return this._leftDate=null,!1;this._logMessage("Received history up to now instead of incremental update. Return exactly what is requested.")}return this._cache.bars=e.concat(this._cache.bars),this._checkBars(this._cache.bars,!0),!0},e.prototype._putToCacheNewBar=function(e){var t=this._cache.bars.length,i=e.time,o=0===t?NaN:this._cache.bars[t-1].time;0===t||o<i?this._cache.bars.push(e):o===i?this._cache.bars[t-1]=e:console.error("putToCacheNewBar: time violation, previous bar time: "+n(o)+" should be less or equal to new time: "+n(i))},e.prototype._alignBarsTime=function(e){if(this._dwmAligner)for(var t=0;t<e.length;t++)e[t].time=this._dwmAligner.tradingDayToSessionStart(e[t].time)},e._now=function(){return Date.now()+6e4},e}(),h=function(){function e(e,t){this._threads={},this._datafeed=e,this._dwmAlignerCreator=t}return e.prototype.destroy=function(){this._forEachThread(function(e,t){return t.destroy()}),this._threads={},delete this._datafeed},e.prototype.purgeCache=function(){this._forEachThread(function(e,t){return t.destroy()}),this._threads={}},e.prototype.subscribe=function(e,t,i,n,r){var s,a=o(e,t);return this._threads[a]||(this._threads[a]=this._createThread(e,t)),s=this._threads[a].addSubscription(i,n,r),a+'"'+s},e.prototype.unsubscribe=function(e){var t,i,o=e.split('"');if(2!==o.length)return void console.warn("Wrong guid format");t=o[0],i=parseInt(o[1]),this._threads.hasOwnProperty(t)?this._threads[t].removeSubscription(i):console.warn("Data thread doesnt exist: "+e)},e.prototype._createThread=function(e,t){return new c(this._datafeed,e,t,this._dwmAlignerCreator(t,e.timezone,e.session))},e.prototype._forEachThread=function(e){var t=this;Object.keys(this._threads).forEach(function(i){return e(i,t._threads[i])})},e}()},function(e,t,i){"use strict";(function(t,o){function n(e,i,o,n){this._chartWidgetCollection=e,this._chartApiInstance=i,this._saveChartService=o,this._loadChartService=n,this._proxyWatchListChangedDelegate=null,this._lockDrawingsWatchedValue=null,this._hideDrawingsWatchedValue=null,this._activeChangedChangedDelegate=new t,this._chartWidgetCollection.activeChartWidget.subscribe(function(){
this._activeChangedChangedDelegate.fire()}.bind(this)),this._chartWidgets=new WeakMap}var r=i(64).linking,s=i(804),a=i(109).layouts,l=i(38),c=i(86),h=i(33),u=i(62),d=i(70),p=i(5),_=i(210).createNoticeDialog,f=i(83).createConfirmDialog,m=i(295),g=i(809).ThemesApi;n.prototype.subscribe=function(e,t){l.subscribe(e,t)},n.prototype.unsubscribe=function(e,t){l.unsubscribe(e,t)},n.prototype.onContextMenu=function(e){l.subscribe("onContextMenu",function(t){t.callback(e(t.unixtime,t.price))})},n.prototype.onGrayedObjectClicked=function(e){l.subscribe("onGrayedObjectClicked",e)},n.prototype.activeChart=function(){return this._getChartWidgetApi(this._chartWidgetCollection.activeChartWidget.value())},n.prototype._getChartWidgetApi=function(e){var t=this._chartWidgets.get(e);return void 0===t&&(t=new s(e),this._chartWidgets.set(e,t)),t},n.prototype.onActiveChartChanged=function(){return this._activeChangedChangedDelegate},n.prototype.changeSymbol=function(e,t,i){r.interval.setValue(t),r.symbol.setValue(e),i&&this.activeChart().onDataLoaded().subscribe(null,i,!0)},n.prototype.setLayout=function(e){this._chartWidgetCollection.layout.setValue(e)},n.prototype.layout=function(){return this._chartWidgetCollection.layout.value()},n.prototype.chartsCount=function(){return a[this.layout()].count},n.prototype.chart=function(e){if(void 0===e&&(e=0),e<0||e>this.chartsCount())throw Error("Incorrect index: "+e);return this._getChartWidgetApi(this._chartWidgetCollection.getAll()[e])},n.prototype.getSymbolInterval=function(e){var t={symbol:r.symbol.value(),interval:r.interval.value()};return e&&e(t),t},n.prototype.saveChart=function(e){var t=this;this._saveChartService.whenReadyToSave(function(){var i=t._saveChartService.saveToJSON();return e&&e(JSON.parse(i.content))})},n.prototype.loadChart=function(e){this._chartApiInstance.purgeCache(),this._chartApiInstance._studyEngine.stopSources(),this._chartWidgetCollection.loadContent(e.json),this._chartWidgetCollection.purgeUnusedWidgets(),e.extendedData&&(this._chartWidgetCollection.metaInfo.id.setValue(e.extendedData.uid),this._chartWidgetCollection.metaInfo.uid.setValue(e.extendedData.uid),this._chartWidgetCollection.metaInfo.name.setValue(e.extendedData.name)),r.symbol.setValue(this.activeChart().symbol()),l.emit("chart_loaded")},n.prototype.getStudiesList=function(){return this._chartApiInstance.allStudiesMetadata().filter(function(e){return!e.is_hidden_study}).map(function(e){return e.name||e.description})},n.prototype.getSavedCharts=function(e){d.getCharts(e)},n.prototype.loadChartFromServer=function(e){d.loadChart(e)},n.prototype.saveChartToServer=function(e,t,i,o){this._saveChartService.saveChartSilently(e,i,t,o)},n.prototype.removeChartFromServer=function(e,t){d.removeChart(e,t)},n.prototype.getIntervals=function(){var e=[],t=u.getCustomResolutions();return null!==this._chartApiInstance&&(e=this._chartApiInstance.defaultResolutions()),u.mergeResolutions(e,t)},n.prototype.closePopupsAndDialogs=function(){var e,t,o=document.querySelectorAll("._tv-dialog-title-close")
;for(e=0;e<o.length;e++)o[e].click();t=i.c[814],t&&t.exports.closeAllDialogs(),c.hideAll()},n.prototype.selectLineTool=function(e){m.supportedLineTools[e]&&(e=m.supportedLineTools[e].name,h.tool.value()!==e&&h.tool.setValue(e))},n.prototype.selectedLineTool=function(){var e,t=Object.keys(m.supportedLineTools),i=h.tool.value();for(e=0;e<t.length;++e)if(m.supportedLineTools[t[e]].name===i)return t[e];return""},n.prototype.lockAllDrawingTools=function(){return null===this._lockDrawingsWatchedValue&&(this._lockDrawingsWatchedValue=new o(h.lockDrawings().value()),this._lockDrawingsWatchedValue.subscribe(function(e){h.lockDrawings().setValue(e)}),h.lockDrawings().subscribe(this,function(){this._lockDrawingsWatchedValue.setValue(h.lockDrawings().value())})),this._lockDrawingsWatchedValue},n.prototype.hideAllDrawingTools=function(){return null===this._hideDrawingsWatchedValue&&(this._hideDrawingsWatchedValue=new o(h.hideAllDrawings().value()),this._hideDrawingsWatchedValue.subscribe(function(e){h.hideAllDrawings().setValue(e)}),h.hideAllDrawings().subscribe(this,function(){this._hideDrawingsWatchedValue.setValue(h.hideAllDrawings().value())})),this._hideDrawingsWatchedValue},n.prototype.mainSeriesPriceFormatter=function(){return this._chartWidgetCollection.activeChartWidget.value().model().mainSeries().priceScale().formatter()},n.prototype.showNoticeDialog=function(e){function t(){i&&(i(),i=null)}e=e||{};var i=e.callback;_({title:e.title,content:e.body||""}).then(function(e){e.on("action:ok",t),e.on("afterClose",t),e.open()})},n.prototype.showConfirmDialog=function(e){function t(e){i&&(i(e),i=null)}if(e=e||{},!e.callback)throw Error("callback must be exist");var i=e.callback;f({title:e.title,content:e.body||""}).then(function(e){e.on("action:yes",t.bind(null,!0)),e.on("action:no",t.bind(null,!1)),e.on("afterClose",t.bind(null,!1)),e.open()})},n.prototype.logs=function(){return{getLogHistory:p.getLogHistory,enable:p.loggingOn,disable:p.loggingOff}},n.prototype.showLoadChartDialog=function(){var e=this._loadChartService;e&&e.showLoadDialog()},n.prototype.showSaveAsChartDialog=function(){var e=this._saveChartService;e&&window.runOrSignIn(function(){e.saveChartAs()})},n.prototype.themes=function(){return new g({chartWidgetCollection:this._chartWidgetCollection})},n.prototype.takeScreenshot=function(){this._chartWidgetCollection.takeScreenshot()},e.exports=n}).call(t,i(8),i(15))},function(e,t,i){"use strict";(function(t){function o(e){var t,i,o=Object.keys(g),n=o.length;for(t=0;t<n;++t)if(i=o[t],g[i].name===e)return i;return null}function n(e){return"LineToolRiskRewardLong"===e||"LineToolRiskRewardShort"===e}var r=i(7).ensureNotNull,s=i(805),a=i(164).applyOverridesToStudy,l=i(28),c=i(806).LineDataSourceApi,h=i(807).StudyApi,u=i(808).PaneApi,d=i(2).DefaultProperty,p=i(337).availableIcons,_=i(44),f=i(21).Interval,m=i(34),g=i(295).supportedLineTools,y=i(289).showTooManyStudiesNotice,v=function(e){this._chartWidget=e,this._panes=new WeakMap,this._studies=new WeakMap,this._lineDataSources=new WeakMap}
;v.prototype._getPaneApi=function(e){var t=this._panes.get(e);return void 0===t&&(t=new u(e),this._panes.set(e,t)),t},v.prototype._getStudyApi=function(e){var t=this._studies.get(e);return void 0===t&&(t=new h(e,this._chartWidget.model().model()),this._studies.set(e,t)),t},v.prototype._getLineDataSourceApi=function(e){var t=this._lineDataSources.get(e);return void 0===t&&(t=new c(e,this._chartWidget.model().model(),{apiPointsToDataSource:this._convertUserPointsToDataSource.bind(this),dataSourcePointsToPriced:function(e){var t=this._chartWidget.model().mainSeries().syncModel(),i=this._chartWidget.model().timeScale();return e.map(function(e){var o=i.normalizeBarIndex(e.index);return{price:e.price,time:t.projectTime(o.time_t,o.offset)}})}.bind(this)}),this._lineDataSources.set(e,t)),t},v.prototype._makeSubscriptionFromDelegate=function(e){var t=$.extend({},e);return delete t.fire,t},v.prototype.executeActionById=function(e){this._chartWidget.executeActionById(e)},v.prototype.getCheckableActionState=function(e){return this._chartWidget.getCheckableActionState(e)},v.prototype.refreshMarks=function(){this._chartWidget.refreshMarks()},v.prototype.clearMarks=function(){this._chartWidget.clearMarks()},v.prototype.symbol=function(){return this._chartWidget.getSymbol()},v.prototype.symbolExt=function(){var e=this._chartWidget.model().mainSeries().symbolInfo();return e?{symbol:e.name,full_name:e.full_name,exchange:e.exchange,description:e.description,type:e.type}:null},v.prototype.resolution=function(){return this._chartWidget.model().mainSeries().properties().interval.value()},v.prototype.setSymbol=function(e,i){function o(){n._chartWidget.model().mainSeries().onDataLoaded().unsubscribe(null,o),i&&i()}if(e!==this.symbol()||t.enabled("same_data_requery")){var n=this;return this._chartWidget.model().mainSeries().onDataLoaded().subscribe(null,o),this._chartWidget.setSymbol(e)}},v.prototype.resetData=function(){this._chartWidget.model().mainSeries().rerequestData()},v.prototype.setResolution=function(e,t){function i(){o._chartWidget.model().mainSeries().onDataLoaded().unsubscribe(null,i),t&&t()}if((e=e.toUpperCase())!==this.resolution()){var o=this;return this._chartWidget.model().mainSeries().onDataLoaded().subscribe(null,i),this._chartWidget.setResolution(e)}},v.prototype.setEntityVisibility=function(e,t){var i,o;console.warn("`setEntityVisibility` is deprecated. Use shape/study API instead"),(i=this._chartWidget.model().model().dataSourceForId(e))&&(o=i.properties())&&o.visible&&o.visible.setValue(t)},v.prototype.getAllStudies=function(){return this._chartWidget.model().model().allStudies().map(function(e){return{id:e.id(),name:e._metaInfo.description}})},v.prototype.getAllShapes=function(){return this._chartWidget.model().model().allLineTools().map(function(e){return{id:e.id(),name:o(e.toolname)}}).filter(function(e){return null!==e.name})},v.prototype.removeAllShapes=function(){this._chartWidget.removeAllDrawingTools()},v.prototype.removeAllStudies=function(){this._chartWidget.removeAllStudies()},
v.prototype.removeEntity=function(e){var t=this._chartWidget.model().chartModel().dataSourceForId(e);if(!t)return void console.warn("Can't find a source with id: "+e);this._chartWidget.model().chartModel().removeSource(t,!0)},v.prototype.createStudyTemplate=function(e){return this._chartWidget.model().model().studyTemplate(e.saveInterval)},v.prototype.applyStudyTemplate=function(e){this._chartWidget.model().model().restoreStudyTemplate(e,""+1e3*Math.random())},v.prototype.setVisibleRange=function(e,i){var o,n,r,s;if(void 0===e||!e.from||!e.to||isNaN(e.from)||isNaN(e.to))return void console.warn("Wrong time range: "+JSON.stringify(e)+'. Expected an object with "from" and "to" numeric values.');o=this._chartWidget.model().model(),n=o.mainSeries(),r=[parseInt(e.from),parseInt(e.to)],s=f.isDWM(n.interval())&&!t.enabled("disable_resolution_rebuild")?this._alignPoints(r):r,e.from=s[0],e.to=s[1],this._chartWidget.setVisibleTimeRange(e.from,e.to,i)},v.prototype.getVisibleRange=function(){var e,t=this._chartWidget.model().timeScale(),i=t.visibleBars();return null===i?{from:0,to:0}:(e={from:t.indexToUserTime(i.firstBar()<0?0:i.firstBar()),to:t.indexToUserTime(i.lastBar())},{from:(+e.from||0)/1e3,to:(+e.to||0)/1e3})},v.prototype.getVisiblePriceRange=function(){return this._chartWidget.model().mainSeries()?this._chartWidget.model().mainSeries().priceScale().priceRangeInPrice():null},v.prototype._createTradingPrimitive=function(e,t){function i(){var e=TradingView.CLOSE_PLOT,t=r(o._chartWidget.model().mainSeries().bars().last());return{index:t.index,price:t.value[e]}}var o=this,n=this._chartWidget.model().model(),s=n.paneForSource(n.mainSeries());return(t?n:this._chartWidget.model()).createLineTool(s,i(),e)._adapter},v.prototype.createOrderLine=function(e){var e=e||{};return this._createTradingPrimitive("LineToolOrder",e.disableUndo)},v.prototype.createPositionLine=function(e){var e=e||{};return this._createTradingPrimitive("LineToolPosition",e.disableUndo)},v.prototype.createExecutionShape=function(e){var e=e||{};return this._createTradingPrimitive("LineToolExecution",e.disableUndo)},v.prototype.createShape=function(e,t){return this.createMultipointShape([e],t)},v.prototype._alignPoints=function(e){var t,i=this._chartWidget.model().model(),o=i.mainSeries(),n=o.symbolInfo(),r=m.get_timezone(n.timezone);return i.timeScale().isEmpty()?e:(t=(new _.Session).init(r,n.session),e.map(function(e){return e?_.alignExchangeTimeToSessionStartAndReturnUTC(t.timezone,t.spec,new Date(1e3*e))/1e3:e}))},v.prototype._convertUserPointsToDataSource=function(e){function i(e,t,i){var o,n,r,s=h.closestIndexLeft(e)||0,a={index:s},l=h.valueAt(s);return e>l&&(o=c.syncModel().distance(l,e),o.success&&(a.index=a.index+o.result)),t?a.price=t:(n=["open","high","low","close"],r=i?n.indexOf(i)+1:1,r<=0&&(r=1),a.price=u.valueAt(s)[r]),a}var o,n,r,s,a,l=this._chartWidget.model().model(),c=l.mainSeries(),h=l.timeScale().points(),u=c.data();if(l.timeScale().isEmpty())return null;for(o=e.map(function(e){return e.time}),
n=f.isDWM(c.interval())&&!t.enabled("disable_resolution_rebuild")?this._alignPoints(o):o,r=[],s=0;s<e.length;s++)a=e[s],r.push(i(n[s],a.price,a.channel));return r},v.prototype.createMultipointShape=function(e,t,i){var o,r,s,a,l,c,h,u=t.disableUndo?this._chartWidget.model().model():this._chartWidget.model(),_=this._chartWidget.model().model(),f=_.mainSeries();if(!_.timeScale().isEmpty()){if(o=_.paneForSource(f),r=this._convertUserPointsToDataSource(e),s=g[t.shape]||g.flag,s.onlySelectable)throw Error('Cannot create "'+t.shape+'" shape');if("LineToolPolyline"===s.name)r[0].price===r[r.length-1].price&&r[0].index===r[r.length-1].index||r.push(r[0]);else if("LineToolIcon"===s.name){if(t.icon=t.icon||t.overrides&&t.overrides.icon,!t.hasOwnProperty("icon"))throw Error("icon must be specified in options");if(-1===p.indexOf(t.icon))throw Error("icon value must be valid");t.overrides=t.overrides||{},t.overrides.icon=t.icon}if(a=new d(s.name.toLowerCase()),t.overrides)for(l in t.overrides)a[l]?a[l].setValue(t.overrides[l]):n(s.name)&&-1!==["profitLevel","stopLevel"].indexOf(l)&&a.addProperty(l,t.overrides[l]);if(s.supportsText&&t.text&&a.text.setValue(t.text),c=u.createLineTool(o,r[0],s.name,a),c.pointsCount()!==r.length&&-1!==c.pointsCount())throw Error("Wrong points count for "+t.shape+". Required "+c.pointsCount());for(h=1;h<r.length&&this._chartWidget.model().lineBeingCreated();h++)u.coninueCreatingLine(r[h],{},h<r.length-1);return t.lock&&c.setUserEditEnabled(!1),t.disableSelection&&(c.customization.disableSelection=!0),t.disableSave&&(c.customization.disableSave=!0),t.hasOwnProperty("showInObjectsTree")&&(c.customization.showInObjectsTree=t.showInObjectsTree),t.zOrder&&("top"===t.zOrder?u.bringToFront(c):"bottom"===t.zOrder&&u.sendToBack(c)),c.id()}},v.prototype.getShapeById=function(e){var t=this._chartWidget.model().model().getLineToolById(e);if(null===t)throw Error("There is no such shape");return this._getLineDataSourceApi(t)},v.prototype.createStudy=function(e,t,i,o,n,c,h){var u,d,p,_,f,m;return h=h||{},h.checkLimit&&!this._chartWidget.model().canCreateStudy()?(y(),null):(e=e.toLowerCase(),u=this._chartWidget.model().chartModel(),d=l.findStudyMetaInfoByDescription(u.studiesMetaData(),e),d=$.extend({},d),delete d.state,d?(p={},o&&(p.inputs=s.getStudyRecordFromArray([e].concat(o),this._chartWidget).inputs),_=u.insertStudy(d,p,t,null,h.priceScale),c&&a(_,c),f=r(u.paneForSource(_)),m=f.priceScaleName(_.priceScale()),u.setPriceScaleVisibility(m,!0),i&&_.setUserEditEnabled(!1),n&&n(_.id()),_.id()):(console.warn("Study `"+e+"` not found."),null))},v.prototype.getStudyById=function(e){var t=this._chartWidget.model().model().getStudyById(e);if(null===t)throw Error("There is no such study");return this._getStudyApi(t)},v.prototype.chartType=function(){return this._chartWidget.model().mainSeries().properties().style.value()},v.prototype.setChartType=function(e){this._chartWidget.model().mainSeries().properties().style.setValue(e)},v.prototype.priceFormatter=function(){
return this._chartWidget.model().mainSeries().priceScale().formatter()},v.prototype.onDataLoaded=function(){return this._makeSubscriptionFromDelegate(this._chartWidget.model().mainSeries().onCompleted())},v.prototype.onSymbolChanged=function(){return this._makeSubscriptionFromDelegate(this._chartWidget.model().mainSeries().onSymbolResolved())},v.prototype.onIntervalChanged=function(){return this._makeSubscriptionFromDelegate(this._chartWidget.model().mainSeries().onIntervalChanged())},v.prototype.onVisibleRangeChanged=function(){return this._makeSubscriptionFromDelegate(this._chartWidget.model().timeScale().visibleBarsChanged())},v.prototype.dataReady=function(e){var t=!this._chartWidget.model()||!this._chartWidget.model().mainSeries()||this._chartWidget.model().mainSeries().data().isEmpty();return e&&(t?this.onDataLoaded().subscribe(null,e,!0):e()),!t},v.prototype.crossHairMoved=function(e){this._makeSubscriptionFromDelegate(this._chartWidget.model().chartModel().crossHairMoved()).subscribe(null,e)},v.prototype.setTimezone=function(e){this._chartWidget.setTimezone(e)},v.prototype.getPanes=function(){return this._chartWidget.model().chartModel().panes().map(function(e){return this._getPaneApi(e)},this)},v.prototype.exportData=function(e){var t=this._chartWidget;return new Promise(function(o){i.e(25).then(function(n){var r=i(941).exportData;o(r(t.model().chartModel(),e))}.bind(null,i)).catch(i.oe)})},e.exports=v}).call(t,i(4))},function(e,t,i){"use strict";var o=function(){function e(e){return e.is_price_study}function t(e,t){var i,o=t.slice(0).toLowerCase();if(e){for(i=0;i<e.length;++i)if(e[i].description.toLowerCase()===o||e[i].shortDescription.toLowerCase()===o)return e[i];throw Error("Can't find metainfo for `"+t+"`")}throw Error("There is no studies metainfo at all")}function i(e){return e.inputs.map(function(e){return{id:e.id,type:e.type,name:e.name}})}function o(o,n){var r,a,l,c,h,u,d,p,_;if(!Array.isArray(o))return r=t(n.model().studiesMetaData(),o),{id:r.id,overlay:e(r)};for(a=o.slice(0),l=a[0],r=t(n.model().studiesMetaData(),l),c=e(r),h=i(r),d=a.splice(1),p=0;p<d.length;++p)u||(u={}),_=s[h[p].type]||s.string,u[h[p].id]=_(d[p]);return{id:r.id,name:l,overlay:c,inputs:u}}function n(e,o,n){function r(e){return e.name.toLowerCase()===a}var s,a,l,c=t(n.model().studiesMetaData(),e),h=i(c),u={};for(s in o)a=s.toLowerCase(),l=h.filter(r),0!==l.length?(l=l[0],u[l.id]=o[s]):console.warn("Uknown input `"+s+"` of `"+e+"`");return{id:c.id,name:e,inputs:u}}var r={},s={bool:function(e){return!!e},integer:function(e){return parseInt(e)},float:function(e){return parseFloat(e)},string:function(e){return e}};return r.getStudyRecordFromArray=function(e,t){return t=t||chartWidget,o(e,t)},r.getStudyRecordFromObject=function(e,t,i){return i=i||chartWidget,n(e,t,i)},r}();e.exports=o},function(e,t,i){"use strict";var o,n,r;Object.defineProperty(t,"__esModule",{value:!0}),i.d(t,"LineDataSourceApi",function(){return r}),o=i(14),i.n(o),
n=["alwaysShowStats","clonable","entryPrice","interval","lastUpdateTime","points","singleChartOnly","snapTo45Degrees","stopPrice","symbol","targetPrice"],r=function(){function e(e,t,i){this._source=e,this._model=t,this._pointsConverter=i}return e.prototype.isSelectionEnabled=function(){return this._source.isSelectionEnabled()},e.prototype.setSelectionEnabled=function(e){this._source.setSelectionEnabled(e)},e.prototype.isSavingEnabled=function(){return this._source.isSavedInChart()},e.prototype.setSavingEnabled=function(e){this._source.setSavingInChartEnabled(e)},e.prototype.isShowInObjectsTreeEnabled=function(){return this._source.showInObjectTree()},e.prototype.setShowInObjectsTreeEnabled=function(e){this._source.setShowInObjectsTreeEnabled(e)},e.prototype.isUserEditEnabled=function(){return this._source.userEditEnabled()},e.prototype.setUserEditEnabled=function(e){this._source.setUserEditEnabled(e)},e.prototype.bringToFront=function(){this._model.bringToFront(this._source)},e.prototype.sendToBack=function(){this._model.sendToBack(this._source)},e.prototype.getProperties=function(){return this._source.properties().state(n,!0)},e.prototype.setProperties=function(e){this._setProps(this._source.properties(),e,"")},e.prototype.getPoints=function(){return this._pointsConverter.dataSourcePointsToPriced(this._source.points())},e.prototype.setPoints=function(e){var t,i,o=this._source.pointsCount(),n=-1===o?this._source.points().length:o;if(n!==e.length)throw Error("Wrong points count. Required="+n);for(t=this._pointsConverter.apiPointsToDataSource(e),i=0;i<t.length;++i)this._source.setPoint(i,t[i])},e.prototype._setProps=function(e,t,i){var n,r,s;for(n in t)t.hasOwnProperty(n)&&(r=0===i.length?n:i+"."+n,e.hasOwnProperty(n)?(s=t[n],Object(o.isHashObject)(s)?this._setProps(e[n],s,r):e[n].setValue(s)):console.warn('Unknown property "'+r+'"'))},e}()},function(e,t,i){"use strict";var o,n,r,s;Object.defineProperty(t,"__esModule",{value:!0}),i.d(t,"StudyApi",function(){return s}),o=i(3),i(11),n=i(7),i.n(n),r=i(164),s=function(){function e(e,t){this._study=e,this._model=t}return e.prototype.isUserEditEnabled=function(){return this._study.userEditEnabled()},e.prototype.setUserEditEnabled=function(e){this._study.setUserEditEnabled(e)},e.prototype.getInputsInfo=function(){return this._study.metaInfo().inputs.map(function(e){return o.a({},e,{localizedName:void 0!==e.name?window.t(e.name,{context:"input"}):""})})},e.prototype.getInputValues=function(){var e=this._study.inputs();return Object.keys(e).map(function(t){return{id:t,value:e[t]}})},e.prototype.setInputValues=function(e){var t,i,o,n=this.getInputValues(),r=function(e){void 0!==n.find(function(t){return t.id===e.id})?s._study.properties().inputs[e.id].setValue(e.value):console.warn('There is no such input: "'+e.id+'"')},s=this;for(t=0,i=e;t<i.length;t++)o=i[t],r(o)},e.prototype.mergeUp=function(){this._model.mergeSourceUp(this._study),this._showStudyPriceScale()},e.prototype.mergeDown=function(){this._model.mergeSourceDown(this._study),this._showStudyPriceScale()},
e.prototype.unmergeUp=function(){this._model.unmergeSourceUp(this._study),this._showStudyPriceScale()},e.prototype.unmergeDown=function(){this._model.unmergeSourceDown(this._study),this._showStudyPriceScale()},e.prototype.changePriceScale=function(e){var t,i,o,r=Object(n.ensureNotNull)(this._model.paneForSource(this._study)),s=null;switch(e){case"left":s=r.priceScaleByName("left");break;case"right":s=r.priceScaleByName("right");break;case"no-scale":s=r.priceScaleByName("");break;case"as-series":if(t=this._model.mainSeries(),(i=Object(n.ensureNotNull)(this._model.paneForSource(t)))!==r)return void console.warn('BEWARE: Attempt to change price scale to "as-series", but series and study are on different panes');o=i.priceScaleName(i.priceScaleForSource(t)),s=r.priceScaleByName(o);break;default:throw Error("Cannot change study's price scale to unknown price scale (\""+e+'")')}this._model.move(this._study,r,s),this._showStudyPriceScale()},e.prototype.isVisible=function(){return this._study.properties().visible.value()},e.prototype.setVisible=function(e){this._study.properties().visible.setValue(e)},e.prototype.bringToFront=function(){this._model.bringToFront(this._study)},e.prototype.sendToBack=function(){this._model.sendToBack(this._study)},e.prototype.applyOverrides=function(e){Object(r.applyOverridesToStudy)(this._study,e)},e.prototype._showStudyPriceScale=function(){var e=Object(n.ensureNotNull)(this._model.paneForSource(this._study)),t=e.priceScaleName(this._study.priceScale());this._model.setPriceScaleVisibility(t,!0)},e}()},function(e,t,i){"use strict";var o,n;Object.defineProperty(t,"__esModule",{value:!0}),o=function(){function e(e){this._priceScale=e}return e.prototype.getMode=function(){var e=this._priceScale.properties();return e.percentage.value()?2:e.log.value()?1:0},e.prototype.setMode=function(e){var t=this._priceScale.properties();t.percentage.setValue(2===e),t.log.setValue(1===e)},e}(),i.d(t,"PaneApi",function(){return n}),n=function(){function e(e){this._priceScales=new WeakMap,this._pane=e}return e.prototype.hasMainSeries=function(){return this._pane.containsMainSeries()},e.prototype.getLeftPriceScale=function(){return this._getPriceScaleApi(this._pane.leftPriceScale())},e.prototype.getRightPriceScale=function(){return this._getPriceScaleApi(this._pane.rightPriceScale())},e.prototype.getMainSourcePriceScale=function(){var e,t=this._pane.mainDataSource();return null===t?null:(e=this._pane.priceScaleForSource(t),null===e?null:this._getPriceScaleApi(e))},e.prototype._getPriceScaleApi=function(e){var t=this._priceScales.get(e);return void 0===t&&(t=new o(e),this._priceScales.set(e,t)),t},e}()},function(e,t,i){"use strict";var o,n;Object.defineProperty(t,"__esModule",{value:!0}),i.d(t,"ThemesApi",function(){return n}),o=i(252),n=function(){function e(e){this._opts=e}return e.prototype.isStdTheme=function(){return Object(o.isStdTheme)(Object(o.extractThemeFromModel)(this._getActiveChartModel()))},e.prototype.setStdTheme=function(e){var t=this;return Object(o.getStdTheme)(e).then(function(i){
t._opts.chartWidgetCollection.applyTheme(i.content),Object(o.setTheme)(e),Object(o.syncTheme)()})},e.prototype.setStdThemeForLayout=function(e){Object(o.setTheme)(e),Object(o.syncTheme)()},e.prototype.getCurrentThemeName=function(){return Object(o.getCurrentTheme)().name},e.prototype._getActiveChartModel=function(){return this._getActiveChartWidget().model()},e.prototype._getActiveChartWidget=function(){return this._opts.chartWidgetCollection.activeChartWidget.value()},e}()},function(e,t,i){"use strict";var o,n,r,s=i(26);i(185),o=i(811).pivotPointsStandardStudyItem,n=i(812).spreadStudyItem,r=i(813).ratioStudyItem,JSServer.studyLibrary=JSServer.studyLibrary.concat([{name:"Compare",metainfo:{_metainfoVersion:15,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!0,defaults:{styles:{compare:{linestyle:0,linewidth:2,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#800080"}},precision:4,inputs:{source:"close",symbol:""}},plots:[{id:"compare",type:"line"}],styles:{compare:{title:"Plot",histogramBase:0}},description:"Compare",shortDescription:"Compare",is_price_study:!0,inputs:[{defval:"close",id:"source",name:"Source",options:["open","high","low","close","hl2","hlc3","ohlc4"],type:"text"},{id:"symbol",name:"Symbol",type:"symbol",isHidden:!0}],id:"Compare@tv-basicstudies-1"},constructor:function(){this.init=function(e,t){this._context=e,this._context.new_sym(t(1),s.Std.period(this._context),s.Std.period(this._context))},this.main=function(e,t){var i,o,n,r,a;return this._context=e,i=this._context.new_var(this._context.symbol.time),this._context.select_sym(1),o=this._context.new_var(this._context.symbol.time),n=s.Std[t(0)](this._context),r=this._context.new_var(n),this._context.select_sym(0),a=r.adopt(o,i,0),[a]}}},{name:"Overlay",metainfo:{_metainfoVersion:15,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!0,defaults:{styles:{},precision:4,inputs:{symbol:""}},plots:[{id:"open",type:"line"},{id:"high",type:"line"},{id:"low",type:"line"},{id:"close",type:"line"}],styles:{open:{title:"Open"},high:{title:"High"},low:{title:"Low"},close:{title:"Close"}},description:"Overlay",shortDescription:"Overlay",is_price_study:!1,inputs:[{id:"symbol",name:"symbol",defval:"",type:"symbol",isHidden:!0}],id:"Overlay@tv-basicstudies-1"},constructor:function(){this.init=function(e,t){this._context=e,this._context.new_sym(t(0),s.Std.period(this._context),s.Std.period(this._context))},this.main=function(e,t){var i,o,n,r,a,l;return this._context=e,i=this._context.new_var(this._context.symbol.time),this._context.select_sym(1),o=this._context.new_var(this._context.symbol.time),n=this._context.new_var(s.Std.open(this._context)),r=this._context.new_var(s.Std.high(this._context)),a=this._context.new_var(s.Std.low(this._context)),l=this._context.new_var(s.Std.close(this._context)),this._context.select_sym(0),[n.adopt(o,i,1),r.adopt(o,i,1),a.adopt(o,i,1),l.adopt(o,i,1)]}}},{name:"Volume",metainfo:{_metainfoVersion:15,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,transparency:65,defaults:{styles:{vol:{linestyle:0,linewidth:1,plottype:5,
trackPrice:!1,transparency:65,visible:!0,color:"#000080"},vol_ma:{linestyle:0,linewidth:1,plottype:4,trackPrice:!1,transparency:65,visible:!0,color:"#0496FF"}},precision:0,palettes:{volumePalette:{colors:{0:{color:"#eb4d5c",width:1,style:0},1:{color:"#53b987",width:1,style:0}}}},inputs:{showMA:!1,maLength:20}},plots:[{id:"vol",type:"line"},{id:"volumePalette",palette:"volumePalette",target:"vol",type:"colorer"},{id:"vol_ma",type:"line"}],styles:{vol:{title:"Volume",histogramBase:0},vol_ma:{title:"Volume MA",histogramBase:0}},description:"Volume",shortDescription:"Volume",is_price_study:!1,palettes:{volumePalette:{colors:{0:{name:"Falling"},1:{name:"Growing"}}}},inputs:[{id:"showMA",name:"show MA",defval:!1,type:"bool"},{id:"maLength",name:"MA Length",defval:20,type:"integer",min:1,max:2e3}],id:"Volume@tv-basicstudies-1"},constructor:function(){this.f_0=function(e,t){return s.Std.gt(e,t)?0:1},this.f_1=function(e,t){return e?t:s.Std.na()},this.main=function(e,t){var i,o,n,r,a,l,c;return this._context=e,this._input=t,i=this._input(0),o=s.Std.volume(this._context),n=this.f_0(s.Std.open(this._context),s.Std.close(this._context)),r=s.Std.volume(this._context),a=this._context.new_var(r),l=s.Std.sma(a,this._input(1),this._context),c=this.f_1(i,l),[o,n,c]}}},{name:"ZigZag",metainfo:{_metainfoVersion:23,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:2,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#008000"}},precision:4,inputs:{in_0:5,in_1:10}},plots:[{id:"plot_0",type:"line"},{id:"plot_1",target:"plot_0",type:"dataoffset"}],styles:{plot_0:{title:"Plot",histogramBase:0,joinPoints:!1}},description:"Zig Zag",shortDescription:"ZigZag",is_price_study:!0,classId:"ScriptWithDataOffset",inputs:[{id:"in_0",name:"deviation",defval:5,type:"integer",min:1,max:100},{id:"in_1",name:"depth",defval:10,type:"integer",min:2,max:1e3}],id:"ZigZag@tv-basicstudies-1"},constructor:function(){this.main=function(e,t){var i,o,n,r,a,l,c,h;return this._context=e,this._input=t,i=this._input(0),o=this._input(1),n=i/100,r=o/2,a=s.Std.zigzag(n,r,this._context),l=s.Std.zigzagbars(n,r,this._context),c=a,h=l,[c,h]}}},{name:"Sessions",metainfo:{_metainfoVersion:44,defaults:{graphics:{vertlines:{sessBreaks:{color:"#4985e7",style:2,visible:!1,width:1}}},linkedToSeries:!0,precision:4},description:"Sessions",graphics:{vertlines:{sessBreaks:{name:"Session Break"}}},id:"Sessions@tv-basicstudies-1",inputs:[],is_hidden_study:!0,is_price_study:!0,name:"Sessions@tv-basicstudies",palettes:{},plots:[],shortDescription:"Sessions"},constructor:function(){function e(e,t){return{id:e,time:e,extendBottom:!0,extendTop:!0}}this.init=function(){this._times=[]},this._getVerticalLineData=function(t){return s.Std.selectSessionBreaks(t,this._times).map(e)},this.main=function(e,t){var i,o,n;return s.Std.isdwm(e)?null:(i=s.Std.time(e),isNaN(i)?null:(o=this._times.length,0!==o&&this._times[o-1]===i||this._times.push(i),e.symbol.isLastBar&&e.symbol.isNewBar?(n=this._getVerticalLineData(e),0===n.length?null:{nonseries:!0,
type:"study_graphics",data:{graphicsCmds:{create:{vertlines:[{styleId:"sessBreaks",data:n}]},erase:[{action:"all"}]}}}):null))}}},{name:"SuperTrend",metainfo:{_metainfoVersion:39,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:3,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#000080"},plot_2:{linestyle:0,linewidth:3,plottype:"shape_arrow_up",trackPrice:!1,location:"BelowBar",transparency:35,visible:!0,color:"#00FF00"},plot_3:{linestyle:0,linewidth:3,plottype:"shape_arrow_down",trackPrice:!1,location:"AboveBar",transparency:35,visible:!0,color:"#FF0000"}},precision:4,palettes:{palette_0:{colors:{0:{color:"#008000",width:3,style:0},1:{color:"#800000",width:3,style:0}}}},inputs:{in_0:10,in_1:3}},plots:[{id:"plot_0",type:"line"},{id:"plot_1",palette:"palette_0",target:"plot_0",type:"colorer"},{id:"plot_2",type:"shapes"},{id:"plot_3",type:"shapes"}],styles:{plot_0:{title:"SuperTrend",histogramBase:0,joinPoints:!1,isHidden:!1},plot_2:{title:"Up Arrow",histogramBase:0,joinPoints:!1,isHidden:!1},plot_3:{title:"Down Arrow",histogramBase:0,joinPoints:!1,isHidden:!1}},description:"SuperTrend",shortDescription:"SuperTrend",is_price_study:!0,palettes:{palette_0:{colors:{0:{name:"Color 0"},1:{name:"Color 1"}},valToIndex:{0:0,1:1}}},inputs:[{id:"in_0",name:"Length",defval:10,type:"integer",min:1,max:100},{id:"in_1",name:"Factor",defval:3,type:"float",min:1,max:100}],id:"SuperTrend@tv-basicstudies-1",scriptIdPart:"",name:"SuperTrend",isCustomIndicator:!0},constructor:function(){this.f_0=function(){var e,t,i,o,n,r=this._input(0),a=this._input(1),l=s.Std.atr(r,this._context);return r=s.Std.hl2(this._context)+l*a,l=s.Std.hl2(this._context)-l*a,e=this._context.new_var(s.Std.close(this._context)),a=this._context.new_var(),t=s.Std.max(l,a.get(1)),a.set(s.Std.gt(e.get(1),a.get(1))?t:l),l=this._context.new_var(),t=s.Std.min(r,l.get(1)),l.set(s.Std.lt(e.get(1),l.get(1))?t:r),r=this._context.new_var(),e=s.Std.nz(r.get(1),1),e=s.Std.lt(s.Std.close(this._context),a.get(1))?-1:e,r.set(s.Std.gt(s.Std.close(this._context),l.get(1))?1:e),a=s.Std.eq(r.get(0),1)?a.get(0):l.get(0),i=s.Std.eq(r.get(0),1)?0:1,o=1===r.get(0)&&-1===r.get(1),n=-1===r.get(0)&&1===r.get(1),[a,i,o,n]},this.main=function(e,t){this._context=e,this._input=t;var i=this.f_0();return[i[0],i[1],i[2],i[3]]}}},o,n,r])},function(e,t,i){"use strict";function o(e){switch(e){case"Traditional":return 0;case"Fibonacci":return 1;case"Woodie":return 2;case"Classic":return 3;case"DeMark":return 4;case"Camarilla":return 5;default:throw Error("Unknown kind "+e)}}function n(e,t){e.setUTCMonth(e.getUTCMonth()+t)}function r(e,t){return new Date(t,e,0).getDate()}function s(e,t){var i,o,s;return u.Std.ismonthly(e)?(i=new Date(t),o=i.getUTCDay(),s=r(i.getUTCMonth(),i.getUTCFullYear()),o<s?(n(i,u.Std.interval(e)),i=u.Std.add_days_considering_dst("Etc/UTC",i,1-i.getUTCDay())):(i=u.Std.add_days_considering_dst("Etc/UTC",i,1),n(i,u.Std.interval(e))),i.valueOf()):t+d.Interval.parse(e.symbol.resolution).inMilliseconds(t)}
function a(e,t,i,o,n,r,s,a){var l,c=new p,h=NaN,d=i-o;switch(a){case 0:h=(i+o+n)/3,c.p=h,c.r1=2*h-o,c.s1=2*h-i,c.r2=h+(i-o),c.s2=h-(i-o),c.r3=2*h+(i-2*o),c.s3=2*h-(2*i-o),c.r4=3*h+(i-3*o),c.s4=3*h-(3*i-o),c.r5=4*h+(i-4*o),c.s5=4*h-(4*i-o);break;case 1:h=(i+o+n)/3,c.p=h,c.r1=h+.382*d,c.s1=h-.382*d,c.r2=h+.618*d,c.s2=h-.618*d,c.r3=h+d,c.s3=h-d;break;case 2:h=(i+o+2*e)/4,c.p=h,c.r1=2*h-o,c.s1=2*h-i,c.r2=h+d,c.s2=h-d,c.r3=i+2*(h-o),c.s3=o-2*(i-h),c.r4=c.r3+d,c.s4=c.s3-d;break;case 3:h=(i+o+n)/3,c.p=h,c.r1=2*h-o,c.s1=2*h-i,c.r2=h+d,c.s2=h-d,c.r3=h+2*d,c.s3=h-2*d,c.r4=h+3*d,c.s4=h-3*d;break;case 4:l=NaN,l=u.Std.equal(t,n)?i+o+2*n:u.Std.greater(n,t)?2*i+o+n:2*o+i+n,h=l/4,c.p=h,c.r1=l/2-o,c.s1=l/2-i;break;case 5:h=(i+o+n)/3,c.p=h,c.r1=n+1.1*d/12,c.s1=n-1.1*d/12,c.r2=n+1.1*d/6,c.s2=n-1.1*d/6,c.r3=n+1.1*d/4,c.s3=n-1.1*d/4,c.r4=n+1.1*d/2,c.s4=n-1.1*d/2;break;default:throw Error("Unknown kind")}return c.startIndex__t=r,c.endIndex__t=s,c}function l(e,t){return(!u.Std.isdaily(e)||"Daily"!==t)&&((!u.Std.isweekly(e)||"Daily"!==t&&"Weekly"!==t)&&(!u.Std.ismonthly(e)||"Daily"!==t&&"Weekly"!==t&&"Monthly"!==t))}function c(e){if(u.Std.isweekly(e)||u.Std.ismonthly(e))return"12M";if(u.Std.isdaily(e))return"1M";if(u.Std.isintraday(e)){var t=u.Std.interval(e);return t>=1&&t<=15?"1D":"1W"}throw Error("Unexpected resolution type: "+e.symbol.resolution)}function h(e,t){switch(t){case"Auto":return c(e);case"Daily":return"1D";case"Weekly":return"1W";case"Monthly":return"1M";case"Yearly":return"12M";default:throw Error("No such pivTimeFrame: "+t)}}var u,d,p,_,f,m;Object.defineProperty(t,"__esModule",{value:!0}),i.d(t,"pivotPointsStandardStudyItem",function(){return m}),u=i(26),i.n(u),d=i(21),p=function(){function e(){this.p=NaN,this.r1=NaN,this.s1=NaN,this.r2=NaN,this.s2=NaN,this.r3=NaN,this.s3=NaN,this.r4=NaN,this.s4=NaN,this.r5=NaN,this.s5=NaN,this.startIndex__t=NaN,this.endIndex__t=NaN}return e}(),_=function(){function e(){this.pivots=[]}return e}(),f=function(){function e(){this._secondaryRes="1D",this._firstMainSeriesBarTime=NaN}return e.prototype.init=function(e,t){var i,n=t(0),r=t(1),s=t(2),a=t(3);this._data=new _,this._firstMainSeriesBarTime=NaN,this._kindPP=o(n),this._showHistoricalPivots=r,this._historicalPivotsToKeep=a,this._pivTimeFrame=s,this._isValidResolution=l(e,this._pivTimeFrame),this._isValidResolution&&(this._secondaryRes=h(e,this._pivTimeFrame)),i=""===e.symbol.resolution?Math.max(30,2*parseInt(e.symbol.interval))+"":e.symbol.period,e.new_sym(e.symbol.tickerid,this._secondaryRes,this._secondaryRes,i)},e.prototype.main=function(e){var t,i,o,n,r,l,c,h,d,p,_,f,m,g,y;return this._isValidResolution?e.symbol.time?(isNaN(this._firstMainSeriesBarTime)&&(this._firstMainSeriesBarTime=e.symbol.time,this._removeUnusedPivots()),e.symbol.isLastBar&&e.symbol.isNewBar?this._createResponse():null):(e.select_sym(1),t=e.new_var(u.Std.open(e)),i=e.new_var(u.Std.high(e)),o=e.new_var(u.Std.low(e)),n=e.new_var(u.Std.close(e)),r=e.new_var(u.Std.time(e)),l=this._data,c=t.get(0),h=r.get(0),d=t.get(1),p=i.get(1),_=o.get(1),f=n.get(1),
m=e.symbol.isLastBar,0!==l.pivots.length&&e.symbol.isNewBar&&(g=l.pivots[l.pivots.length-1],g.endIndex__t!==h&&(g.endIndex__t=h)),0!==e.symbol.index&&e.symbol.isNewBar?(y=a(c,d,p,_,f,h,s(e,h),this._kindPP),e.select_sym(0),this._showHistoricalPivots||(l.pivots=[]),l.pivots.push(y),l.pivots.length>this._historicalPivotsToKeep&&l.pivots.shift(),m?this._createResponse():null):(e.select_sym(0),null)):null},e.prototype._createResponse=function(){return 0===this._data.pivots.length?null:{nonseries:!0,type:"non_series_data",data:{data:this._data}}},e.prototype._removeUnusedPivots=function(){var e=this,t=Math.max(this._data.pivots.findIndex(function(t){return t.startIndex__t>e._firstMainSeriesBarTime})-1,0);t>0&&this._data.pivots.splice(0,t)},e}(),m={name:"Pivot Points Standard",metainfo:{_metainfoVersion:44,defaults:{inputs:{kind:"Traditional",lookBack:15,pivTimeFrame:"Auto",showHistoricalPivots:!0},precision:"4"},description:"Pivot Points Standard",id:"PivotPointsStandard@tv-basicstudies-80",inputs:[{defval:"Traditional",id:"kind",name:"Type",options:["Traditional","Fibonacci","Woodie","Classic","DeMark","Camarilla"],type:"text"},{defval:!0,id:"showHistoricalPivots",name:"Show historical pivots",type:"bool"},{defval:"Auto",id:"pivTimeFrame",name:"Pivots Timeframe",options:["Auto","Daily","Weekly","Monthly","Yearly"],type:"text"},{defval:15,id:"lookBack",max:5e3,min:2,name:"Number of Pivots Back",type:"integer"}],is_price_study:!0,linkedToSeries:!0,shortDescription:"Pivots"},constructor:f}},function(e,t,i){"use strict";var o,n,r,s;Object.defineProperty(t,"__esModule",{value:!0}),i.d(t,"spreadStudyItem",function(){return s}),o=i(3),n=i(296),r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.c(t,e),t.prototype._doCalculation=function(e,t,i,o){return e*t-i*o},t}(n.a),s={name:"Spread",metainfo:{_metainfoVersion:15,defaults:n.b,plots:n.d,styles:n.e,description:"Spread",shortDescription:"Spread",is_price_study:!1,inputs:n.c,id:"Spread@tv-basicstudies-1"},constructor:r}},function(e,t,i){"use strict";var o,n,r,s;Object.defineProperty(t,"__esModule",{value:!0}),i.d(t,"ratioStudyItem",function(){return s}),o=i(3),n=i(296),r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.c(t,e),t.prototype._doCalculation=function(e,t,i,o){return e*t/(i*o)},t}(n.a),s={name:"Ratio",metainfo:{_metainfoVersion:15,defaults:n.b,plots:n.d,styles:n.e,description:"Ratio",shortDescription:"Ratio",is_price_study:!1,inputs:n.c,id:"Ratio@tv-basicstudies-1"},constructor:r}}],[463]);